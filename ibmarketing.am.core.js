!function(e){function t(t){for(var n,r,i=t[0],o=t[1],s=0,c=[];s<i.length;s++)r=i[s],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&c.push(a[r][0]),a[r]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);for(l&&l(t);c.length;)c.shift()()}var n={},a={2:0};function r(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.e=function(e){var t=[],n=a[e];if(0!==n)if(n)t.push(n[2]);else{var i=new Promise(function(t,r){n=a[e]=[t,r]});t.push(n[2]=i);var o,s=document.createElement("script");s.charset="utf-8",s.timeout=120,r.nc&&s.setAttribute("nonce",r.nc),s.src=function(e){return r.p+"chunks/ibmarketing.am."+({0:"components/instructionReview",1:"components/transferReview",3:"modals/acknowledgments",4:"modals/asset",5:"modals/errors",7:"pages/brokergiftshares",8:"pages/configurevirtualfx",9:"pages/debitCard",10:"sequences/additional",11:"sequences/brokerGiftShares",12:"sequences/consultantApplication",13:"sequences/debitCard",14:"sequences/directAch",15:"sequences/icm",16:"sequences/invoicing",17:"sequences/iraconversion",18:"sequences/isaAccountTransfer",19:"sequences/linkage",20:"sequences/peaEarlyWithdrawalDetails",21:"sequences/peaOperationType",22:"sequences/plaid",23:"sequences/recurringInvestment",24:"sequences/rfp",25:"sequences/stoppayment",26:"sequences/tbszTransfer",27:"vendors~components/instructionForm",28:"vendors~components/notificationDestination",29:"vendors~components/transferForm",30:"vendors~modals/bank",31:"vendors~pages/transaction",32:"vendors~sequences/cashTransfer",33:"vendors~sequences/identity",34:"vendors~sequences/positionTransfer"}[e]||e)+"."+{0:"bca8a76b4ee0ddadc0e5",1:"1b7d62c6586a37965856",3:"bd1b4e2c29abfffbbb71",4:"9e843c39eba6045557a4",5:"78657bf0776084605b61",7:"7363ed9cee323b6a55d7",8:"5cf2907663512babd247",9:"3903ddc26a05e38cb328",10:"a8a5872e43d8d7797d35",11:"9f5246b25ff3e69072d6",12:"32c1a885f3151e814133",13:"3273798ea45f72d921ba",14:"e8a0562c1cdc99d5e634",15:"02d4e551d279835f7dfb",16:"f1e01bd1f6d063bb5240",17:"f3ad11722afaffb67741",18:"29c7186c9f43760ba86d",19:"b81e8e2a42506e6eb4f8",20:"b9a7e90de3338ed1a291",21:"6f3986a95be39c3dd4ee",22:"9dc4a8ce2a2d1443313a",23:"abd142fbd69681c58cfb",24:"8fbba3fda7b721ba9b72",25:"7b267c4fd2263a6d6afc",26:"54f8da1ec128f6091e52",27:"2b97b5395e7cac699bec",28:"5a81f8a163512bb201f6",29:"056371ee8d637cdee58c",30:"a4c2e4765aa7f4f908c1",31:"25d5d78bc2d275fd6667",32:"8aee193d55804e365fe2",33:"9a120aa21b349fd39364",34:"e4f2d558fd5511b85270",35:"2a2b3ce43f1aef5dca7a",36:"6e2fee5796ba6bf69aa6"}[e]+".js"}(e);var l=new Error;o=function(t){s.onerror=s.onload=null,clearTimeout(c);var n=a[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+r+": "+i+")",l.name="ChunkLoadError",l.type=r,l.request=i,n[1](l)}a[e]=void 0}};var c=setTimeout(function(){o({type:"timeout",target:s})},12e4);s.onerror=s.onload=o,document.head.appendChild(s)}return Promise.all(t)},r.m=e,r.c=n,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/am.webapp/",r.oe=function(e){throw console.error(e),e};var i=window.webpackJsonp=window.webpackJsonp||[],o=i.push.bind(i);i.push=t,i=i.slice();for(var s=0;s<i.length;s++)t(i[s]);var l=o;r(r.s=408)}([function(e,t,n){"use strict";var a=Object.prototype.hasOwnProperty;function r(e,t){return Array.isArray(e)?function(e,t){for(var n,a="",i="",o=Array.isArray(t),s=0;s<e.length;s++)(n=r(e[s]))&&(o&&t[s]&&(n=l(n)),a=a+i+n,i=" ");return a}(e,t):e&&"object"==typeof e?function(e){var t="",n="";for(var r in e)r&&e[r]&&a.call(e,r)&&(t=t+n+r,n=" ");return t}(e):e||""}function i(e){if(!e)return"";if("object"==typeof e){var t="";for(var n in e)a.call(e,n)&&(t=t+n+":"+e[n]+";");return t}return e+""}function o(e,t,n,a){if(!1===t||null==t||!t&&("class"===e||"style"===e))return"";if(!0===t)return" "+(a?e:e+'="'+e+'"');var r=typeof t;return"object"!==r&&"function"!==r||"function"!=typeof t.toJSON||(t=t.toJSON()),"string"==typeof t||(t=JSON.stringify(t),n||-1===t.indexOf('"'))?(n&&(t=l(t))," "+e+'="'+t+'"'):" "+e+"='"+t.replace(/'/g,"&#39;")+"'"}t.merge=function e(t,n){if(1===arguments.length){for(var a=t[0],r=1;r<t.length;r++)a=e(a,t[r]);return a}for(var o in n)if("class"===o){var s=t[o]||[];t[o]=(Array.isArray(s)?s:[s]).concat(n[o]||[])}else if("style"===o){var s=i(t[o]);s=s&&";"!==s[s.length-1]?s+";":s;var l=i(n[o]);l=l&&";"!==l[l.length-1]?l+";":l,t[o]=s+l}else t[o]=n[o];return t},t.classes=r,t.style=i,t.attr=o,t.attrs=function(e,t){var n="";for(var s in e)if(a.call(e,s)){var l=e[s];if("class"===s){l=r(l),n=o(s,l,!1,t)+n;continue}"style"===s&&(l=i(l)),n+=o(s,l,!1,t)}return n};var s=/["&<>]/;function l(e){var t=""+e,n=s.exec(t);if(!n)return e;var a,r,i,o="";for(a=n.index,r=0;a<t.length;a++){switch(t.charCodeAt(a)){case 34:i="&quot;";break;case 38:i="&amp;";break;case 60:i="&lt;";break;case 62:i="&gt;";break;default:continue}r!==a&&(o+=t.substring(r,a)),r=a+1,o+=i}return r!==a?o+t.substring(r,a):o}t.escape=l,t.rethrow=function e(t,a,r,i){if(!(t instanceof Error))throw t;if(!("undefined"==typeof window&&a||i))throw t.message+=" on line "+r,t;try{i=i||n(63).readFileSync(a,"utf8")}catch(n){e(t,null,r)}var o=3,s=i.split("\n"),l=Math.max(r-o,0),c=Math.min(s.length,r+o);var o=s.slice(l,c).map(function(e,t){var n=t+l+1;return(n==r?"  > ":"    ")+n+"| "+e}).join("\n");t.path=a;t.message=(a||"Pug")+":"+r+"\n"+o+"\n\n"+t.message;throw t}},function(e,t){e.exports=function(e){"undefined"!=typeof execScript?execScript(e):eval.call(null,e)}},function(e,t,n){e.exports=function(e,t,a){for(var r=function(t,a){var r=n(398)(t)+"Step";e.component(r,{template:"<"+t+' ng-if="::$ctrl.loaded"></'+t+">",controller:a})},i=n(5)(e,a),o=0;o<t.length;++o)r(t[o],i)}},function(e,t,n){e.exports=function(e,t,a,r){if(a.controller)throw"Cannot chunk component with controller: "+a;a.template='<div ng-if="::$ctrl.loaded">'+(a.template||"")+"</div>",a.controller=n(5)(e,r),e.component(t,a)}},function(e,t,n){e.exports={component:n(400)}},function(e,t){function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(e,t){return["$q","ComponentService",function(a,r){var i=this;i.$onInit=function(){var o;if("function"==typeof t)o=t();else{if(!Array.isArray(t))throw"Cannot process imports: "+t;o=t}for(var s=[],l=0;l<o.length;++l)s.push(o[l].then(function(t){var a;(a=t.__esModule&&"function"==typeof t.default?t.default(e):t).options&&a.options.template&&"object"===n(a.options.template)&&a.options.template.default&&(a.options.template=a.options.template.default),r.loadDynamic(a)}));a.all(s).finally(function(){i.loaded=!0})}}]}},function(e,t){var n,a=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];t.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return 4*e+17},t.getSymbolTotalCodewords=function(e){return a[e]},t.getBCHDigit=function(e){for(var t=0;0!==e;)t++,e>>>=1;return t},t.setToSJISFunction=function(e){if("function"!=typeof e)throw new Error('"toSJISFunc" is not a valid function.');n=e},t.isKanjiModeEnabled=function(){return void 0!==n},t.toSJIS=function(e){return n(e)}},function(e,t,n){var a=n(402),r=n(403);t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(e,t){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!a.isValid(t))throw new Error("Invalid version: "+t);return t>=1&&t<10?e.ccBits[0]:t<27?e.ccBits[1]:e.ccBits[2]},t.getBestModeForData=function(e){return r.testNumeric(e)?t.NUMERIC:r.testAlphanumeric(e)?t.ALPHANUMERIC:r.testKanji(e)?t.KANJI:t.BYTE},t.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")},t.isValid=function(e){return e&&e.bit&&e.ccBits},t.from=function(e,n){if(t.isValid(e))return e;try{return function(e){if("string"!=typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+e)}}(e)}catch(e){return n}}},function(e,t,n){"use strict";var a=n(309);i.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}();var r=i.TYPED_ARRAY_SUPPORT?2147483647:1073741823;function i(e,t,n){return i.TYPED_ARRAY_SUPPORT||this instanceof i?"number"==typeof e?l(this,e):function(e,t,n,a){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');if("undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer)return function(e,t,n,a){if(n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(a||0))throw new RangeError("'length' is out of bounds");var r;r=void 0===n&&void 0===a?new Uint8Array(t):void 0===a?new Uint8Array(t,n):new Uint8Array(t,n,a);i.TYPED_ARRAY_SUPPORT?r.__proto__=i.prototype:r=c(e,r);return r}(e,t,n,a);if("string"==typeof t)return function(e,t){var n=0|d(t),a=s(e,n),r=a.write(t);r!==n&&(a=a.slice(0,r));return a}(e,t);return function(e,t){if(i.isBuffer(t)){var n=0|o(t.length),a=s(e,n);return 0===a.length?a:(t.copy(a,0,0,n),a)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?s(e,0):c(e,t);if("Buffer"===t.type&&Array.isArray(t.data))return c(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}(this,e,t,n):new i(e,t,n)}function o(e){if(e>=r)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return 0|e}function s(e,t){var n;return i.TYPED_ARRAY_SUPPORT?(n=new Uint8Array(t)).__proto__=i.prototype:(null===(n=e)&&(n=new i(t)),n.length=t),n}function l(e,t){var n=s(e,t<0?0:0|o(t));if(!i.TYPED_ARRAY_SUPPORT)for(var a=0;a<t;++a)n[a]=0;return n}function c(e,t){for(var n=t.length<0?0:0|o(t.length),a=s(e,n),r=0;r<n;r+=1)a[r]=255&t[r];return a}function u(e,t){var n;t=t||1/0;for(var a=e.length,r=null,i=[],o=0;o<a;++o){if((n=e.charCodeAt(o))>55295&&n<57344){if(!r){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(o+1===a){(t-=3)>-1&&i.push(239,191,189);continue}r=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(t-=3)>-1&&i.push(239,191,189);if(r=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function d(e){return i.isBuffer(e)?e.length:"undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer)?e.byteLength:("string"!=typeof e&&(e=""+e),0===e.length?0:u(e).length)}i.TYPED_ARRAY_SUPPORT&&(i.prototype.__proto__=Uint8Array.prototype,i.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&i[Symbol.species]===i&&Object.defineProperty(i,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1})),i.prototype.write=function(e,t,n){void 0===t?(n=this.length,t=0):void 0===n&&"string"==typeof t?(n=this.length,t=0):isFinite(t)&&(t|=0,isFinite(n)?n|=0:n=void 0);var a=this.length-t;if((void 0===n||n>a)&&(n=a),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");return function(e,t,n,a){return function(e,t,n,a){for(var r=0;r<a&&!(r+n>=t.length||r>=e.length);++r)t[r+n]=e[r];return r}(u(t,e.length-n),e,n,a)}(this,e,t,n)},i.prototype.slice=function(e,t){var n,a=this.length;if(e=~~e,t=void 0===t?a:~~t,e<0?(e+=a)<0&&(e=0):e>a&&(e=a),t<0?(t+=a)<0&&(t=0):t>a&&(t=a),t<e&&(t=e),i.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=i.prototype;else{var r=t-e;n=new i(r,void 0);for(var o=0;o<r;++o)n[o]=this[o+e]}return n},i.prototype.copy=function(e,t,n,a){if(n||(n=0),a||0===a||(a=this.length),t>=e.length&&(t=e.length),t||(t=0),a>0&&a<n&&(a=n),a===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(a<0)throw new RangeError("sourceEnd out of bounds");a>this.length&&(a=this.length),e.length-t<a-n&&(a=e.length-t+n);var r,o=a-n;if(this===e&&n<t&&t<a)for(r=o-1;r>=0;--r)e[r+t]=this[r+n];else if(o<1e3||!i.TYPED_ARRAY_SUPPORT)for(r=0;r<o;++r)e[r+t]=this[r+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},i.prototype.fill=function(e,t,n){if("string"==typeof e){if("string"==typeof t?(t=0,n=this.length):"string"==typeof n&&(n=this.length),1===e.length){var a=e.charCodeAt(0);a<256&&(e=a)}}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var r;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(r=t;r<n;++r)this[r]=e;else{var o=i.isBuffer(e)?e:new i(e),s=o.length;for(r=0;r<n-t;++r)this[r+t]=o[r%s]}return this},i.concat=function(e,t){if(!a(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return s(null,0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=l(null,t),o=0;for(n=0;n<e.length;++n){var c=e[n];if(!i.isBuffer(c))throw new TypeError('"list" argument must be an Array of Buffers');c.copy(r,o),o+=c.length}return r},i.byteLength=d,i.prototype._isBuffer=!0,i.isBuffer=function(e){return!(null==e||!e._isBuffer)},e.exports=i},function(e,t){e.exports={uuid:function(){return"xxxxxxxx-xxxx-4xxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})}}},function(e,t){var n=function(e,t,n){void 0!=t&&$("#platformProgressInner_"+n).css({width:t+"%"}),void 0!=e&&""!=e&&$("#platformProgressOuter_"+n).css({"background-color":e})};e.exports={updateProgressBar:n,hidePlatformModal:function(e){$("#platformModal_"+e).modal("hide")},updateProcessingDiv:function(e,t){n(void 0,e,t)},updateInnerProgressBar:function(e,t,a,r){void 0!=e&&""!=e&&$("#platformProgressInner_"+r).css({"background-color":e}),n(t,a,r)}}},function(e,t,n){e.exports=function(e,t,a){for(var r=function(t,a){var r=n(398)(t)+"Modal";e.component(r,{template:"<"+t+' ng-if="::$ctrl.loaded"></'+t+">",controller:a})},i=n(5)(e,a),o=0;o<t.length;++o)r(t[o],i)}},function(e,t,n){var a=n(1311),r=n(1312),i=n(1329),o=n(1330);function s(e,t,n,i,o){var s=[].slice.call(arguments,1),l=s.length,c="function"==typeof s[l-1];if(!c&&!a())throw new Error("Callback required as last argument");if(!c){if(l<1)throw new Error("Too few arguments provided");return 1===l?(n=t,t=i=void 0):2!==l||t.getContext||(i=n,n=t,t=void 0),new Promise(function(a,o){try{var s=r.create(n,i);a(e(s,t,i))}catch(e){o(e)}})}if(l<2)throw new Error("Too few arguments provided");2===l?(o=n,n=t,t=i=void 0):3===l&&(t.getContext&&void 0===o?(o=i,i=void 0):(o=i,i=n,n=t,t=void 0));try{var u=r.create(n,i);o(null,e(u,t,i))}catch(e){o(e)}}t.create=r.create,t.toCanvas=s.bind(null,i.render),t.toDataURL=s.bind(null,i.renderToDataURL),t.toString=s.bind(null,function(e,t,n){return o.render(e,n)})},function(e,t,n){"use strict";n.r(t);n(14),n(16),n(18),n(20),n(22),n(24),n(26),n(28),n(30),n(32),n(34),n(36),n(38);var a=angular.module("ibmarketing.authentication",[]);a.WEBAPP_ROOT="/authentication.webapp",a.SERVER_PATH="/AccountManagement",n(40)(a)},function(e,t,n){n(1)(n(15))},function(e,t){e.exports='var b64map = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";\nvar b64pad = "=";\nfunction hex2b64(h) {\n  var i;\n  var c;\n  var ret = "";\n  for (i = 0; i + 3 <= h.length; i += 3) {\n    c = parseInt(h.substring(i, i + 3), 16);\n    ret += b64map.charAt(c >> 6) + b64map.charAt(c & 63);\n  }\n  if (i + 1 == h.length) {\n    c = parseInt(h.substring(i, i + 1), 16);\n    ret += b64map.charAt(c << 2);\n  } else if (i + 2 == h.length) {\n    c = parseInt(h.substring(i, i + 2), 16);\n    ret += b64map.charAt(c >> 2) + b64map.charAt((c & 3) << 4);\n  }\n  while ((ret.length & 3) > 0) ret += b64pad;\n  return ret;\n}\n\n// convert a base64 string to hex\nfunction b64tohex(s) {\n  var ret = "";\n  var i;\n  var k = 0; // b64 state, 0-3\n  var slop;\n  for (i = 0; i < s.length; ++i) {\n    if (s.charAt(i) == b64pad) break;\n    v = b64map.indexOf(s.charAt(i));\n    if (v < 0) continue;\n    if (k == 0) {\n      ret += int2char(v >> 2);\n      slop = v & 3;\n      k = 1;\n    } else if (k == 1) {\n      ret += int2char(slop << 2 | v >> 4);\n      slop = v & 0xf;\n      k = 2;\n    } else if (k == 2) {\n      ret += int2char(slop);\n      ret += int2char(v >> 2);\n      slop = v & 3;\n      k = 3;\n    } else {\n      ret += int2char(slop << 2 | v >> 4);\n      ret += int2char(v & 0xf);\n      k = 0;\n    }\n  }\n  if (k == 1) ret += int2char(slop << 2);\n  return ret;\n}\n\n// convert a base64 string to a byte/number array\nfunction b64toBA(s) {\n  //piggyback on b64tohex for now, optimize later\n  var h = b64tohex(s);\n  var i;\n  var a = new Array();\n  for (i = 0; 2 * i < h.length; ++i) {\n    a[i] = parseInt(h.substring(2 * i, 2 * i + 2), 16);\n  }\n  return a;\n}'},function(e,t,n){n(1)(n(17))},function(e,t){e.exports='var e = "3";\nvar pubKey = null;\nvar rsa = null;\nfunction do_encrypt(ptext) {\n  var res = rsa.encrypt(ptext);\n  return res;\n}\n/*\r\nfunction do_encrypt_with_form(ptext) {\r\n\r\n  var res = do_encrypt(ptext);\r\n  var after = new Date();\r\n  if(res) {\r\n   // alert(ptext);\r\n    var input = document.createElement("input");\r\n    input.type = "hidden";\r\n    input.name = "epass";\r\n    input.id = "epass";\r\n    input.value = res;\r\n    \r\n    var form = document.getElementById("newuserini");\r\n    form.appendChild(input);\r\n    \r\n    \r\n    var after = new Date();\r\n    ptext.value = "";\r\n    return true;\r\n   // alert(before+"\\n"+after);\r\n  }\r\n  return false;\r\n}\r\n*/'},function(e,t,n){n(1)(n(19))},function(e,t){e.exports='/*\n*\n* This software may contain computer code that is proprietary to Interactive Brokers LLC\n* and may not be copied, distributed or used for any purpose other than the authorized use\n* of this software. Copyright, Interactive Brokers LLC (2008). All rights reserved.\n*\n*/\n\nfunction fortifyFilter(input) {\n  var output = "";\n  var inputLower = input.toLowerCase();\n  var index1 = inputLower.indexOf("script");\n  var index2 = inputLower.indexOf("java");\n  if (index1 > 0 || index2 > 0) {\n    alert("BAD STRING");\n    return "XX";\n  } else {\n    for (var p = 0; p < input.length; p++) {\n      var value = getCharIndirectly(input.charAt(p));\n      if (value == "XX") {\n        return value;\n      }\n      output = output + value;\n    }\n    return output;\n  }\n}\nfunction fortifyFilterIncludeSpace(input) {\n  var output = "";\n  var inputLower = input.toLowerCase();\n  var index1 = inputLower.indexOf("script");\n  var index2 = inputLower.indexOf("java");\n  if (index1 > 0 || index2 > 0) {\n    alert("BAD STRING");\n    return "XX";\n  } else {\n    for (var p = 0; p < input.length; p++) {\n      output = output + getCharIndirectlyWithSpace(input.charAt(p));\n    }\n    return output;\n  }\n}\nfunction fortifyFilterOpenRedirect(inputValue) {\n  var output = "";\n  if (inputValue == null) return null;\n  var input = "" + inputValue;\n  if (input != "") {\n    var inputLower = input.toLowerCase();\n    var index1 = inputLower.indexOf("www.");\n    var index2 = inputLower.indexOf("http:");\n    if (index1 > 0 || index2 > 0) {\n      alert("BAD STRING");\n      return "XX";\n    } else {\n      for (var p = 0; p < input.length; p++) {\n        var value = getAlphaNumericIndirectly(input.charAt(p));\n        if (value == "XX") {\n          return value;\n        }\n        output = output + value;\n      }\n      return output;\n    }\n  } else {\n    return output;\n  }\n}\nfunction getCharIndex(inputChar) {\n  var allowedCharStr = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890._";\n  var index = allowedCharStr.indexOf(inputChar);\n  return index;\n}\nfunction getCharIndirectly(inputChar) {\n  var allowedCharStr = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890_./&";\n  var index = allowedCharStr.indexOf(inputChar);\n  if (index < 0) {\n    alert("BAD CHARACTER");\n    return "XX";\n  } else {\n    return allowedCharStr.charAt(index);\n  }\n}\nfunction getCharIndirectlyWithSpace(inputChar) {\n  var allowedCharStr = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890_./& ";\n  var index = allowedCharStr.indexOf(inputChar);\n  if (index < 0) {\n    alert("BAD CHARACTER");\n    return "XX";\n  } else {\n    return allowedCharStr.charAt(index);\n  }\n}\nfunction getAlphaNumericIndirectly(inputChar) {\n  var allowedCharStr = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890@._ -";\n  var index = allowedCharStr.indexOf(inputChar);\n  if (index < 0) {\n    alert("BAD CHARACTER");\n    return "XX";\n  } else {\n    return allowedCharStr.charAt(index);\n  }\n}'},function(e,t,n){n(1)(n(21))},function(e,t){e.exports='/*\n*\n* This software may contain computer code that is proprietary to Interactive Brokers LLC\n* and may not be copied, distributed or used for any purpose other than the authorized use\n* of this software. Copyright, Interactive Brokers LLC (2004). All rights reserved.\n*\n*/\n\n/**************** CROSS-BROWSER XML HTTP REQUEST AND XML PARSER ***************/\n\n//var loader = new xhr.ContentLoader(\'GET\',\'test.xml?id=123\',true,handleGetResponse);\n\n/* \nWrapper function for constructing a request object\n  Parameters:\n\tmethod: POST or GET\n\turl: local URL\n\tasynch: true or false\n\trespHandle: function name to handle response\n\t5th element: parameters for POST method\n*/\nvar xhr = new Object();\nxhr.READY_STATE_UNINITIALIZED = 0;\nxhr.READY_STATE_LOADING = 1;\nxhr.READY_STATE_LOADED = 2;\nxhr.READY_STATE_INTERACTIVE = 3;\nxhr.READY_STATE_COMPLETE = 4;\nxhr.ContentLoader = function (method, url, asynch, respHandle, params, onerror) {\n  this.method = method;\n  this.url = url;\n  this.asynch = asynch;\n  this.respHandle = respHandle;\n  this.params = params;\n  this.onerror = onerror ? onerror : this.defaultError;\n  this.req = null;\n  var agent = navigator.userAgent.toLowerCase();\n  var ie5or6 = agent.indexOf("msie 5") != -1 || agent.indexOf("msie 6") != -1 ? true : false;\n  // alert(ie5or6);\n  // alert(method);\n  // alert(url);\n  // alert(params);\n  if (ie5or6 == true && method.toLowerCase() == "post") {\n    //IE6 POST will use GET\n\n    this.method = method = "GET";\n    this.url = url = url + "?" + params;\n    this.params = params = null;\n  }\n  // alert(\'after\');\n  //  alert(url);\n  // alert(method);\n  this.loadXMLDoc(method, url, asynch, params);\n};\nxhr.ContentLoader.prototype = {\n  loadXMLDoc: function loadXMLDoc(method, url, asynch, params) {\n    //Mozilla-based browsers\n    if (url.indexOf("?") != -1) {\n      url += "&" + Math.floor(Math.random() * 100001);\n    } else {\n      url += "?" + Math.floor(Math.random() * 100001);\n    }\n    if (window.XMLHttpRequest) {\n      this.req = new XMLHttpRequest();\n      //Internet Explorer\n    } else if (window.ActiveXObject) {\n      this.req = new ActiveXObject("Msxml2.XMLHTTP");\n      if (!this.req) {\n        this.req = new ActiveXObject("Microsoft.XMLHTTP");\n      }\n    }\n    //test for null request\n    if (this.req) {\n      if (method.toLowerCase() != "post") {\n        this.initReq(method, url, asynch);\n      } else {\n        //POSTed data\n        var args = arguments[3];\n        if (args != null && args.length > 0) {\n          this.initReq(method, url, asynch, args);\n        }\n      }\n    } else {\n      alert("Your browser does not permit the use of all " + "of this application\'s features!");\n    }\n  },\n  initReq: function initReq(method, url, asynch, args) {\n    try {\n      //Specify the function which will handle HTTP response\n      var loader = this;\n      this.req.onreadystatechange = function () {\n        loader.onReadyState.call(loader);\n      };\n      this.req.open(method, url, asynch);\n      //POSTed data\n      if (method.toLowerCase() == "post") {\n        this.req.setRequestHeader("Content-Type", "application/x-www-form-urlencoded; charset=UTF-8");\n        this.req.send(arguments[3]);\n      } else {\n        this.req.send(null);\n      }\n    } catch (errv) {\n      alert("The application cannot contact the server at the moment. Error details: " + errv.message);\n    }\n  },\n  onReadyState: function onReadyState() {\n    var req = this.req;\n    var ready = req.readyState;\n    if (ready == xhr.READY_STATE_COMPLETE) {\n      var httpStatus = req.status;\n      if (httpStatus == 200 || httpStatus == 0) {\n        this.respHandle.call(this);\n      } else {\n        this.onerror.call(this);\n      }\n    }\n  },\n  defaultError: function defaultError() {\n    /*\n        alert("error fetching data!"\n        +"\\n\\nreadyState:"+this.req.readyState\n        +"\\nstatus: "+this.req.status\n        +"\\nheaders: "+this.req.getAllResponseHeaders());\n        */\n  }\n};'},function(e,t,n){n(1)(n(23))},function(e,t){e.exports='//The basic encryption and decryption methods are taken from http://people.eku.edu/styere/Encrypt/JS-AES.html\n\n//accumulate values to put into text area\nvar accumulated_output_info;\nvar b;\n//add a labeled value to the text area\nfunction accumulate_output(str) {\n  accumulated_output_info = accumulated_output_info + str + "\\n";\n}\n//convert a 8-bit value to a string\nfunction cvt_hex8(val) {\n  var vh = val >>> 4 & 0x0f;\n  return vh.toString(16) + (val & 0x0f).toString(16);\n}\n//convert a 32-bit value to a 8-char hex string\nfunction cvt_hex32(val) {\n  var str = "";\n  var i;\n  var v;\n  for (i = 7; i >= 0; i--) {\n    v = val >>> i * 4 & 0x0f;\n    str += v.toString(16);\n  }\n  return str;\n}\n\n//convert a two-digit hex value to a number\nfunction cvt_byte(str) {\n  // get the first hex digit\n  var val1 = str.charCodeAt(0);\n\n  // do some error checking\n  if (val1 >= 48 && val1 <= 57)\n    // have a valid digit 0-9\n    val1 -= 48;else if (val1 >= 65 && val1 <= 70)\n    // have a valid digit A-F\n    val1 -= 55;else if (val1 >= 97 && val1 <= 102)\n    // have a valid digit A-F\n    val1 -= 87;else {\n    // not 0-9 or A-F, complain\n    window.alert(str.charAt(1) + " is not a valid hex digit");\n    return -1;\n  }\n\n  // get the second hex digit\n  var val2 = str.charCodeAt(1);\n\n  // do some error checking\n  if (val2 >= 48 && val2 <= 57)\n    // have a valid digit 0-9\n    val2 -= 48;else if (val2 >= 65 && val2 <= 70)\n    // have a valid digit A-F\n    val2 -= 55;else if (val2 >= 97 && val2 <= 102)\n    // have a valid digit A-F\n    val2 -= 87;else {\n    // not 0-9 or A-F, complain\n    window.alert(str.charAt(2) + " is not a valid hex digit");\n    return -1;\n  }\n\n  // all is ok, return the value\n  return val1 * 16 + val2;\n}\n\n//add a byte to the output\nfunction accumulate_byte(label, val) {\n  accumulated_output_info += label + cvt_hex8(val) + "\\n";\n}\n\n//add a word to the output\nfunction accumulate_wordarray(label, ary) {\n  var i, j;\n  accumulated_output_info += label + " ";\n\n  // process the four elements in this word\n  for (j = 0; j < 4; j++) accumulated_output_info += " " + cvt_hex8(ary[j]);\n\n  // mark the end of the word\n  accumulated_output_info += "\\n";\n}\n\n//add an array to the output\nfunction accumulate_array(label, ary) {\n  var i, j;\n  var spacer = "";\n\n  // build a set of spaces of equal length to the label\n  while (spacer.length < label.length) spacer += " ";\n\n  // build the table\n  for (i = 0; i < 16; i += 4) {\n    // add label/spaces\n    if (i == 0) accumulated_output_info += label + " ";else accumulated_output_info += spacer + " ";\n\n    // process the four elements in this "row"\n    for (j = 0; j < 4; j++) accumulated_output_info += " " + cvt_hex8(ary[i + j]);\n\n    // mark the end of this row\n    accumulated_output_info += "\\n";\n  }\n}\n\n//S-Box substitution table\nvar S_enc = new Array(0x63, 0x7c, 0x77, 0x7b, 0xf2, 0x6b, 0x6f, 0xc5, 0x30, 0x01, 0x67, 0x2b, 0xfe, 0xd7, 0xab, 0x76, 0xca, 0x82, 0xc9, 0x7d, 0xfa, 0x59, 0x47, 0xf0, 0xad, 0xd4, 0xa2, 0xaf, 0x9c, 0xa4, 0x72, 0xc0, 0xb7, 0xfd, 0x93, 0x26, 0x36, 0x3f, 0xf7, 0xcc, 0x34, 0xa5, 0xe5, 0xf1, 0x71, 0xd8, 0x31, 0x15, 0x04, 0xc7, 0x23, 0xc3, 0x18, 0x96, 0x05, 0x9a, 0x07, 0x12, 0x80, 0xe2, 0xeb, 0x27, 0xb2, 0x75, 0x09, 0x83, 0x2c, 0x1a, 0x1b, 0x6e, 0x5a, 0xa0, 0x52, 0x3b, 0xd6, 0xb3, 0x29, 0xe3, 0x2f, 0x84, 0x53, 0xd1, 0x00, 0xed, 0x20, 0xfc, 0xb1, 0x5b, 0x6a, 0xcb, 0xbe, 0x39, 0x4a, 0x4c, 0x58, 0xcf, 0xd0, 0xef, 0xaa, 0xfb, 0x43, 0x4d, 0x33, 0x85, 0x45, 0xf9, 0x02, 0x7f, 0x50, 0x3c, 0x9f, 0xa8, 0x51, 0xa3, 0x40, 0x8f, 0x92, 0x9d, 0x38, 0xf5, 0xbc, 0xb6, 0xda, 0x21, 0x10, 0xff, 0xf3, 0xd2, 0xcd, 0x0c, 0x13, 0xec, 0x5f, 0x97, 0x44, 0x17, 0xc4, 0xa7, 0x7e, 0x3d, 0x64, 0x5d, 0x19, 0x73, 0x60, 0x81, 0x4f, 0xdc, 0x22, 0x2a, 0x90, 0x88, 0x46, 0xee, 0xb8, 0x14, 0xde, 0x5e, 0x0b, 0xdb, 0xe0, 0x32, 0x3a, 0x0a, 0x49, 0x06, 0x24, 0x5c, 0xc2, 0xd3, 0xac, 0x62, 0x91, 0x95, 0xe4, 0x79, 0xe7, 0xc8, 0x37, 0x6d, 0x8d, 0xd5, 0x4e, 0xa9, 0x6c, 0x56, 0xf4, 0xea, 0x65, 0x7a, 0xae, 0x08, 0xba, 0x78, 0x25, 0x2e, 0x1c, 0xa6, 0xb4, 0xc6, 0xe8, 0xdd, 0x74, 0x1f, 0x4b, 0xbd, 0x8b, 0x8a, 0x70, 0x3e, 0xb5, 0x66, 0x48, 0x03, 0xf6, 0x0e, 0x61, 0x35, 0x57, 0xb9, 0x86, 0xc1, 0x1d, 0x9e, 0xe1, 0xf8, 0x98, 0x11, 0x69, 0xd9, 0x8e, 0x94, 0x9b, 0x1e, 0x87, 0xe9, 0xce, 0x55, 0x28, 0xdf, 0x8c, 0xa1, 0x89, 0x0d, 0xbf, 0xe6, 0x42, 0x68, 0x41, 0x99, 0x2d, 0x0f, 0xb0, 0x54, 0xbb, 0x16);\n\n//inverse S-Box for decryptions\nvar S_dec = new Array(0x52, 0x09, 0x6a, 0xd5, 0x30, 0x36, 0xa5, 0x38, 0xbf, 0x40, 0xa3, 0x9e, 0x81, 0xf3, 0xd7, 0xfb, 0x7c, 0xe3, 0x39, 0x82, 0x9b, 0x2f, 0xff, 0x87, 0x34, 0x8e, 0x43, 0x44, 0xc4, 0xde, 0xe9, 0xcb, 0x54, 0x7b, 0x94, 0x32, 0xa6, 0xc2, 0x23, 0x3d, 0xee, 0x4c, 0x95, 0x0b, 0x42, 0xfa, 0xc3, 0x4e, 0x08, 0x2e, 0xa1, 0x66, 0x28, 0xd9, 0x24, 0xb2, 0x76, 0x5b, 0xa2, 0x49, 0x6d, 0x8b, 0xd1, 0x25, 0x72, 0xf8, 0xf6, 0x64, 0x86, 0x68, 0x98, 0x16, 0xd4, 0xa4, 0x5c, 0xcc, 0x5d, 0x65, 0xb6, 0x92, 0x6c, 0x70, 0x48, 0x50, 0xfd, 0xed, 0xb9, 0xda, 0x5e, 0x15, 0x46, 0x57, 0xa7, 0x8d, 0x9d, 0x84, 0x90, 0xd8, 0xab, 0x00, 0x8c, 0xbc, 0xd3, 0x0a, 0xf7, 0xe4, 0x58, 0x05, 0xb8, 0xb3, 0x45, 0x06, 0xd0, 0x2c, 0x1e, 0x8f, 0xca, 0x3f, 0x0f, 0x02, 0xc1, 0xaf, 0xbd, 0x03, 0x01, 0x13, 0x8a, 0x6b, 0x3a, 0x91, 0x11, 0x41, 0x4f, 0x67, 0xdc, 0xea, 0x97, 0xf2, 0xcf, 0xce, 0xf0, 0xb4, 0xe6, 0x73, 0x96, 0xac, 0x74, 0x22, 0xe7, 0xad, 0x35, 0x85, 0xe2, 0xf9, 0x37, 0xe8, 0x1c, 0x75, 0xdf, 0x6e, 0x47, 0xf1, 0x1a, 0x71, 0x1d, 0x29, 0xc5, 0x89, 0x6f, 0xb7, 0x62, 0x0e, 0xaa, 0x18, 0xbe, 0x1b, 0xfc, 0x56, 0x3e, 0x4b, 0xc6, 0xd2, 0x79, 0x20, 0x9a, 0xdb, 0xc0, 0xfe, 0x78, 0xcd, 0x5a, 0xf4, 0x1f, 0xdd, 0xa8, 0x33, 0x88, 0x07, 0xc7, 0x31, 0xb1, 0x12, 0x10, 0x59, 0x27, 0x80, 0xec, 0x5f, 0x60, 0x51, 0x7f, 0xa9, 0x19, 0xb5, 0x4a, 0x0d, 0x2d, 0xe5, 0x7a, 0x9f, 0x93, 0xc9, 0x9c, 0xef, 0xa0, 0xe0, 0x3b, 0x4d, 0xae, 0x2a, 0xf5, 0xb0, 0xc8, 0xeb, 0xbb, 0x3c, 0x83, 0x53, 0x99, 0x61, 0x17, 0x2b, 0x04, 0x7e, 0xba, 0x77, 0xd6, 0x26, 0xe1, 0x69, 0x14, 0x63, 0x55, 0x21, 0x0c, 0x7d);\n\n//convert two-dimensional indicies to one-dim array indices\nvar I00 = 0;\nvar I01 = 1;\nvar I02 = 2;\nvar I03 = 3;\nvar I10 = 4;\nvar I11 = 5;\nvar I12 = 6;\nvar I13 = 7;\nvar I20 = 8;\nvar I21 = 9;\nvar I22 = 10;\nvar I23 = 11;\nvar I30 = 12;\nvar I31 = 13;\nvar I32 = 14;\nvar I33 = 15;\n//conversion function for non-constant subscripts\n//assume subscript range 0..3\nfunction I(x, y) {\n  return x * 4 + y;\n}\n\n//remove spaces from input\nfunction remove_spaces(instr) {\n  var i;\n  var outstr = "";\n  for (i = 0; i < instr.length; i++) if (instr.charAt(i) != " ")\n    // not a space, include it\n    outstr += instr.charAt(i);\n  return outstr;\n}\n\n//get the message to encrypt/decrypt or the key\n//return as a 16-byte array\nfunction get_value(lbl, str, isASCII) {\n  var dbyte = new Array(16);\n  var i;\n  var val; // one hex digit\n\n  if (isASCII) {\n    if (str.length != 16) {\n      window.alert(lbl + " length wrong: Is " + str.length + "characters, but must be 128 bits (16 ASCII characters)");\n      dbyte[0] = -1;\n      return dbyte;\n    }\n    for (i = 0; i < 16; i++) {\n      dbyte[i] = str.charCodeAt(i);\n    }\n  } else {\n    // convert hex data \n    if (str.length != 32) {\n      window.alert(lbl + " length wrong: Is " + str.length + " hex digits, but must be 128 bits (32 hex digits)");\n      dbyte[0] = -1;\n      return dbyte;\n    }\n    for (i = 0; i < 16; i++) {\n      // isolate and convert this substring\n      dbyte[i] = cvt_byte(str.substr(i * 2, 2));\n      if (dbyte[i] < 0) {\n        dbyte[0] = -1;\n        return dbyte;\n      }\n    }\n  }\n  return dbyte;\n}\n\n//do the AES GF(2**8) multiplication\n//do this by the shift-and-"add" approach\nfunction aes_mul(a, b) {\n  var res = 0;\n  while (a > 0) {\n    if (a & 1) res = res ^ b; // "add" to the result\n    a >>>= 1; // shift a to get next higher-order bit\n    b <<= 1; // shift multiplier also\n  }\n\n  //\tnow reduce it modulo x**8 + x**4 + x**3 + x + 1\n  var hbit = 0x10000; // bit to test if we need to take action\n  var modulus = 0x11b00; // modulus - XOR by this to change value\n  while (hbit >= 0x100) {\n    if (res & hbit)\n      // if the high-order bit is set\n      res ^= modulus; // XOR with the modulus\n\n    // prepare for the next loop\n    hbit >>= 1;\n    modulus >>= 1;\n  }\n  return res;\n}\n\n//apply the S-box substitution to the key expansion\nfunction SubWord(word_ary) {\n  var i;\n  for (i = 0; i < 16; i++) word_ary[i] = S_enc[word_ary[i]];\n  return word_ary;\n}\n\n//rotate the bytes in a word\nfunction RotWord(word_ary) {\n  return new Array(word_ary[1], word_ary[2], word_ary[3], word_ary[0]);\n}\n\n//calculate the first item Rcon[i] = { x^(i-1), 0, 0, 0 }\n//note we only return the first item\nfunction Rcon(exp) {\n  var val = 2;\n  var result = 1;\n\n  //\tremember to calculate x^(exp-1)\n  exp--;\n\n  //\tprocess the exponent using normal shift and multiply\n  while (exp > 0) {\n    if (exp & 1) result = aes_mul(result, val);\n\n    // square the value\n    val = aes_mul(val, val);\n\n    // move to the next bit\n    exp >>= 1;\n  }\n  return result;\n}\n\n//round key generation\n//return a byte array with the expanded key information\nfunction key_expand(key) {\n  var temp = new Array(4);\n  var i, j;\n  var w = new Array(4 * 11);\n\n  //\tcopy initial key stuff\n  for (i = 0; i < 16; i++) {\n    w[i] = key[i];\n  }\n  accumulate_wordarray("w[0] = ", w.slice(0, 4));\n  accumulate_wordarray("w[1] = ", w.slice(4, 8));\n  accumulate_wordarray("w[2] = ", w.slice(8, 12));\n  accumulate_wordarray("w[3] = ", w.slice(12, 16));\n\n  //\tgenerate rest of key schedule using 32-bit words\n  i = 4;\n  while (i < 44)\n  // blocksize * ( rounds + 1 )\n  {\n    // copy word W[i-1] to temp\n    for (j = 0; j < 4; j++) temp[j] = w[(i - 1) * 4 + j];\n    if (i % 4 == 0) {\n      // temp = SubWord(RotWord(temp)) ^ Rcon[i/4];\n      temp = RotWord(temp);\n      accumulate_wordarray("RotWord()=", temp);\n      temp = SubWord(temp);\n      accumulate_wordarray("SubWord()=", temp);\n      temp[0] ^= Rcon(i >>> 2);\n      accumulate_wordarray(" ^ Rcon()=", temp);\n    }\n\n    // word = word ^ temp\n    for (j = 0; j < 4; j++) w[i * 4 + j] = w[(i - 4) * 4 + j] ^ temp[j];\n    accumulate_wordarray("w[" + i + "] = ", w.slice(i * 4, i * 4 + 4));\n    i++;\n  }\n  return w;\n}\n\n//do S-Box substitution\nfunction SubBytes(state, Sbox) {\n  var i;\n  for (i = 0; i < 16; i++) state[i] = Sbox[state[i]];\n  return state;\n}\n\n//shift each row as appropriate\nfunction ShiftRows(state) {\n  var t0, t1, t2, t3;\n\n  //\ttop row (row 0) isn\'t shifted\n\n  //\tnext row (row 1) rotated left 1 place\n  t0 = state[I10];\n  t1 = state[I11];\n  t2 = state[I12];\n  t3 = state[I13];\n  state[I10] = t1;\n  state[I11] = t2;\n  state[I12] = t3;\n  state[I13] = t0;\n\n  //\tnext row (row 2) rotated left 2 places\n  t0 = state[I20];\n  t1 = state[I21];\n  t2 = state[I22];\n  t3 = state[I23];\n  state[I20] = t2;\n  state[I21] = t3;\n  state[I22] = t0;\n  state[I23] = t1;\n\n  //\tbottom row (row 3) rotated left 3 places\n  t0 = state[I30];\n  t1 = state[I31];\n  t2 = state[I32];\n  t3 = state[I33];\n  state[I30] = t3;\n  state[I31] = t0;\n  state[I32] = t1;\n  state[I33] = t2;\n  return state;\n}\n\n//inverset shift each row as appropriate\nfunction InvShiftRows(state) {\n  var t0, t1, t2, t3;\n\n  //\ttop row (row 0) isn\'t shifted\n\n  //\tnext row (row 1) rotated left 1 place\n  t0 = state[I10];\n  t1 = state[I11];\n  t2 = state[I12];\n  t3 = state[I13];\n  state[I10] = t3;\n  state[I11] = t0;\n  state[I12] = t1;\n  state[I13] = t2;\n\n  //\tnext row (row 2) rotated left 2 places\n  t0 = state[I20];\n  t1 = state[I21];\n  t2 = state[I22];\n  t3 = state[I23];\n  state[I20] = t2;\n  state[I21] = t3;\n  state[I22] = t0;\n  state[I23] = t1;\n\n  //\tbottom row (row 3) rotated left 3 places\n  t0 = state[I30];\n  t1 = state[I31];\n  t2 = state[I32];\n  t3 = state[I33];\n  state[I30] = t1;\n  state[I31] = t2;\n  state[I32] = t3;\n  state[I33] = t0;\n  return state;\n}\n\n//process column info\nfunction MixColumns(state) {\n  var col;\n  var c0, c1, c2, c3;\n  for (col = 0; col < 4; col++) {\n    c0 = state[I(0, col)];\n    c1 = state[I(1, col)];\n    c2 = state[I(2, col)];\n    c3 = state[I(3, col)];\n\n    // do mixing, and put back into array\n    state[I(0, col)] = aes_mul(2, c0) ^ aes_mul(3, c1) ^ c2 ^ c3;\n    state[I(1, col)] = c0 ^ aes_mul(2, c1) ^ aes_mul(3, c2) ^ c3;\n    state[I(2, col)] = c0 ^ c1 ^ aes_mul(2, c2) ^ aes_mul(3, c3);\n    state[I(3, col)] = aes_mul(3, c0) ^ c1 ^ c2 ^ aes_mul(2, c3);\n  }\n  return state;\n}\n\n//inverse process column info\nfunction InvMixColumns(state) {\n  var col;\n  var c0, c1, c2, c3;\n  for (col = 0; col < 4; col++) {\n    c0 = state[I(0, col)];\n    c1 = state[I(1, col)];\n    c2 = state[I(2, col)];\n    c3 = state[I(3, col)];\n\n    // do inverse mixing, and put back into array\n    state[I(0, col)] = aes_mul(0x0e, c0) ^ aes_mul(0x0b, c1) ^ aes_mul(0x0d, c2) ^ aes_mul(0x09, c3);\n    state[I(1, col)] = aes_mul(0x09, c0) ^ aes_mul(0x0e, c1) ^ aes_mul(0x0b, c2) ^ aes_mul(0x0d, c3);\n    state[I(2, col)] = aes_mul(0x0d, c0) ^ aes_mul(0x09, c1) ^ aes_mul(0x0e, c2) ^ aes_mul(0x0b, c3);\n    state[I(3, col)] = aes_mul(0x0b, c0) ^ aes_mul(0x0d, c1) ^ aes_mul(0x09, c2) ^ aes_mul(0x0e, c3);\n  }\n  return state;\n}\n\n//insert subkey information\nfunction AddRoundKey(state, w, base) {\n  var col;\n  for (col = 0; col < 4; col++) {\n    state[I(0, col)] ^= w[base + col * 4];\n    state[I(1, col)] ^= w[base + col * 4 + 1];\n    state[I(2, col)] ^= w[base + col * 4 + 2];\n    state[I(3, col)] ^= w[base + col * 4 + 3];\n  }\n  return state;\n}\n\n//return a transposed array\nfunction transpose(msg) {\n  var row, col;\n  var state = new Array(16);\n  for (row = 0; row < 4; row++) for (col = 0; col < 4; col++) state[I(row, col)] = msg[I(col, row)];\n  return state;\n}\n\n//final AES state\nvar AES_output = new Array(16);\nvar mod_length;\nfunction get_padding_str(mod_length) {\n  var padding_char_array = new Array("01", "0202", "030303", "04040404", "0505050505", "060606060606", "07070707070707", "0808080808080808", "090909090909090909", "0a0a0a0a0a0a0a0a0a0a", "0b0b0b0b0b0b0b0b0b0b0b", "0c0c0c0c0c0c0c0c0c0c0c0c", "0d0d0d0d0d0d0d0d0d0d0d0d0d", "0e0e0e0e0e0e0e0e0e0e0e0e0e0e", "0f0f0f0f0f0f0f0f0f0f0f0f0f0f0f", "10101010101010101010101010101010");\n  if (mod_length == 0) {\n    mod_length = 16;\n  }\n  if (mod_length > 16) {\n    window.alert("Does not handle this mod length: " + mod_length + " Should be less than 16 ");\n    return "";\n  }\n  if (mod_length < 0) {\n    window.alert("Does not handle this mod length: " + mod_length + " Should be greater than 0 ");\n    return "";\n  }\n  var padding = padding_char_array[0];\n  padding = padding_char_array[mod_length - 1];\n\n  //window.alert("padding "+padding);\n  //window.alert("padding length"+(padding.length/2));\n\n  var padding_bit_array = new Array(padding.length / 2);\n  var k = 0;\n  for (k = 0; k < padding.length / 2; k = k + 1) {\n    padding_bit_array[k] = cvt_byte(padding.substr(k * 2, 2));\n  }\n  var padding_str = "";\n  for (k = 0; k < padding_bit_array.length; k = k + 1) {\n    padding_str += String.fromCharCode(padding_bit_array[k]);\n  }\n  return padding_str;\n}\nvar input_text_16_chars;\nvar key_hex_32_chars;\nfunction aes_encrypt_main(input_text_16_chars, key_hex_32_chars) {\n  var w = new Array(44); // subkey information\n  var state = new Array(16); // working state\n  var round;\n  accumulated_output_info = "";\n\n  // get the message from the user\n  // also check if it is ASCII or hex\n  var msg = get_value("Message", input_text_16_chars, true); //is ascii is true\n\n  // problems??\n  if (msg[0] < 0) {\n    window.alert(" Error: msg[0] < 0 ");\n    return;\n  }\n  accumulate_array("Input bits", msg);\n\n  // get the key from the user\n  var key = get_value("Key", key_hex_32_chars, false);\n  // problems??\n  if (key[0] < 0) {\n    window.alert(" Error: key[0] < 0 ");\n    return;\n  }\n  accumulate_array("Key bits", key);\n\n  // expand the key\n  w = key_expand(key);\n\n  // initial state = message in columns (transposed from what we input)\n  state = transpose(msg);\n  accumulate_array("Initial state", state);\n  // display the round key - Transpose due to the way it is stored/used\n  accumulate_array("Round Key", transpose(w.slice(0, 16)));\n  state = AddRoundKey(state, w, 0);\n  for (round = 1; round < 10; round++) {\n    accumulate_array("Round " + round, state);\n    state = SubBytes(state, S_enc);\n    accumulate_array("After SubBytes", state);\n    state = ShiftRows(state);\n    accumulate_array("After ShiftRows", state);\n    state = MixColumns(state);\n    accumulate_array("After MixColumns", state);\n    // display the round key - Transpose due to the way it is stored/used\n    accumulate_array("Round Key", transpose(w.slice(round * 4 * 4, round * 16 + 16)));\n    // note here the spec uses 32-bit words, we are using bytes, so an extra *4\n    state = AddRoundKey(state, w, round * 4 * 4);\n  }\n  SubBytes(state, S_enc);\n  accumulate_array("After SubBytes", state);\n  ShiftRows(state);\n  accumulate_array("After ShiftRows", state);\n  AddRoundKey(state, w, 10 * 4 * 4);\n  accumulate_array("Output", state);\n\n  // process output\n  AES_output = transpose(state);\n}\n\n//AES encrypt method returns a hexa-decimal representation of the cipher text. This would be multiple of 32 chars\n//This method accepts a key of length 32 chars which is again a hexa-decimal number representation of the given 128 key bits\n//TODO: need to modify so that key can be text string\nvar key_hex_32;\nvar input_text;\nfunction aes_encrypt_general(input_text, key_hex_32) {\n  var outputStr = "";\n  var i;\n  var j;\n  var k = 0;\n  var aes_block_output = "";\n  var str = input_text;\n  if (!str || str.length == 0) {\n    window.alert(" Invalid input string ");\n    dbyte[0] = -1;\n    return null;\n  }\n  var str_len = str.length;\n  var str_mod = str_len % 16;\n  var str_padding_length = 16 - str_mod;\n  var padding_str = get_padding_str(str_padding_length);\n  var strMul16 = str + padding_str;\n  var num_aes_blocks = strMul16.length / 16;\n  for (i = 0; i < num_aes_blocks; i = i + 1) {\n    var aes_block_input = strMul16.substring(16 * i, 16 * i + 16);\n    aes_encrypt_main(aes_block_input, key_hex_32);\n    for (k = 0; k < 16; k = k + 1) {\n      aes_block_output += "" + cvt_hex8(AES_output[k]);\n    }\n  }\n  return aes_block_output;\n}\nvar cipher_hex_text_32_chars;\nfunction aes_decrypt_main(cipher_hex_text_32_chars, key_hex_32_chars) {\n  var w = new Array(44); // subkey information\n  var state = new Array(16); // working state\n  var round;\n  accumulated_output_info = "";\n\n  // get the message from the user\n  // also check if it is ASCII or hex\n  var msg = get_value("Message", cipher_hex_text_32_chars, false);\n\n  // problems??\n  if (msg[0] < 0) {\n    window.alert(" Error: msg[0] < 0 ");\n    return;\n  }\n  accumulate_array("Input bits", msg);\n\n  // get the key from the user\n  var key = get_value("Key", key_hex_32_chars, false);\n  // problems??\n  if (key[0] < 0) {\n    window.alert(" Error: key[0] < 0 ");\n    return;\n  }\n  accumulate_array("Key bits", key);\n\n  // expand the key\n  w = key_expand(key);\n\n  // initial state = message\n  state = transpose(msg);\n  accumulate_array("Initial state", state);\n  // display the round key - Transpose due to the way it is stored/used\n  accumulate_array("Round Key", transpose(w.slice(10 * 4 * 4, 10 * 4 * 4 + 16)));\n  state = AddRoundKey(state, w, 10 * 4 * 4);\n  for (round = 9; round >= 1; round--) {\n    accumulate_array("Round " + round, state);\n    state = InvShiftRows(state);\n    accumulate_array("After InvShiftRows", state);\n    state = SubBytes(state, S_dec);\n    accumulate_array("After SubBytes", state);\n    // display the round key - Transpose due to the way it is stored/used\n    accumulate_array("Round Key", transpose(w.slice(round * 4 * 4, round * 16 + 16)));\n    // note here the spec uses 32-bit words, we are using bytes, so an extra *4\n    state = AddRoundKey(state, w, round * 4 * 4);\n    accumulate_array("After AddRoundKey", state);\n    state = InvMixColumns(state);\n  }\n  InvShiftRows(state);\n  accumulate_array("After InvShiftRows", state);\n  SubBytes(state, S_dec);\n  accumulate_array("After SubBytes", state);\n  AddRoundKey(state, w, 0);\n  accumulate_array("Output", state);\n\n  // process output\n  AES_output = transpose(state);\n}\n//Cipher input is hexa-decimal text whose length is multiple of 32 \n//key is a hexa-decimal string of 32 chars or 128 bits\nvar input_cipher_text_hex;\nfunction aes_decrypt_general(input_cipher_text_hex, key_hex_32) {\n  var outputStr = "";\n  var i;\n  var j;\n  var str = input_cipher_text_hex;\n  if (!str || str.length == 0) {\n    window.alert(" Invalid input string ");\n    dbyte[0] = -1;\n    return dbyte;\n  }\n  var str_len = str.length;\n  var str_mod = str_len % 32;\n  if (str_mod == 32) str_mod = 0;\n  if (str_mod != 0) {\n    //window.alert(" Invalid input string Cipher Hex string should be multiples of 32 chars");\n    dbyte[0] = -1;\n    return dbyte;\n  }\n  var num_aes_blocks = str.length / 32;\n  var aes_plain_full = "";\n  var aes_plain_full_str = "";\n  var k = 0;\n  for (i = 0; i < num_aes_blocks; i = i + 1) {\n    var aes_block_input = str.substring(32 * i, 32 * i + 32);\n    aes_decrypt_main(aes_block_input, key_hex_32);\n    // convert each set of bits back to ASCII\n    for (k = 0; k < 16; k = k + 1) {\n      if (AES_output[k] <= 32) {\n        //remove padding chars if any\n        ///window.alert("Non printable char: "+AES_output[k]);\n      } else {\n        aes_plain_full_str += String.fromCharCode(AES_output[k]);\n      }\n    }\n  }\n  return aes_plain_full_str;\n}\n//Cipher input is hexa-decimal text whose length is multiple of 32 \n//key is a 16 byte array (total 128 bits)\nvar key_16_byte_array;\nfunction aes_decrypt_key_byte(input_cipher_text_hex, key_16_byte_array) {\n  if (!key_16_byte_array) {\n    window.alert("Error: key_16_byte_array is NOT valid");\n    return;\n  }\n  if (key_16_byte_array.length != 16) {\n    window.alert("Error: key_16_byte_array is not of length 16");\n    return;\n  }\n  var k = 0;\n  var key_hex_32_str = "";\n  for (k = 0; k < 16; k = k + 1) {\n    key_hex_32_str += "" + cvt_hex8(key_16_byte_array[k]);\n  }\n  return aes_decrypt_general(input_cipher_text_hex, key_hex_32_str);\n}\n\n//Main Decryption Method. Input arguments are cipher byte array and key byte array\n//Returns a plain text string as output\nvar cipher_byte_array;\nfunction decrypt(cipher_byte_array, key_16_byte_array) {\n  if (!key_16_byte_array) {\n    window.alert("Error: key_16_byte_array is NOT valid");\n    return;\n  }\n  if (!cipher_byte_array) {\n    window.alert("Error: cipher_byte_array is NOT valid");\n    return;\n  }\n  if (key_16_byte_array.length != 16) {\n    window.alert("Error: key_16_byte_array is not of length 16");\n    return;\n  }\n  if (cipher_byte_array.length <= 0) {\n    window.alert("Error: cipher_byte_array length <=0 ");\n    return;\n  }\n  var k = 0;\n  var key_hex_32_str = "";\n  for (k = 0; k < 16; k = k + 1) {\n    key_hex_32_str += "" + cvt_hex8(key_16_byte_array[k]);\n  }\n  var cipher_hex_str = "";\n  for (k = 0; k < cipher_byte_array.length; k = k + 1) {\n    cipher_hex_str += "" + cvt_hex8(cipher_byte_array[k]);\n  }\n  return aes_decrypt_general(cipher_hex_str, key_hex_32_str);\n}\n\n//Main Encryption Method. Input arguments are plain text as string and key as byte array\n//Returns a byte array as output\nfunction encrypt(input_text, key_16_byte_array) {\n  var outputStr = "";\n  var i;\n  var j;\n  var k = 0;\n  var str = input_text;\n  if (!key_16_byte_array) {\n    window.alert("Error: key_16_byte_array is NOT valid");\n    return;\n  }\n  if (key_16_byte_array.length != 16) {\n    window.alert("Error: key_16_byte_array is not of length 16");\n    return;\n  }\n  if (!str || str.length == 0) {\n    window.alert(" Invalid input string ");\n    dbyte[0] = -1;\n    return null;\n  }\n  var str_len = str.length;\n  var str_mod = str_len % 16;\n  var str_padding_length = 16 - str_mod;\n  var padding_str = get_padding_str(str_padding_length);\n  var strMul16 = str + padding_str;\n  var AES_output_full = new Array(strMul16.length);\n  var num_aes_blocks = strMul16.length / 16;\n  var key_hex_32_str = "";\n  for (k = 0; k < 16; k = k + 1) {\n    key_hex_32_str += "" + cvt_hex8(key_16_byte_array[k]);\n  }\n  for (i = 0; i < num_aes_blocks; i = i + 1) {\n    var aes_block_input = strMul16.substring(16 * i, 16 * i + 16);\n    aes_encrypt_main(aes_block_input, key_hex_32_str);\n    for (k = 0; k < 16; k = k + 1) {\n      AES_output_full[k + 16 * i] = AES_output[k];\n    }\n  }\n  return AES_output_full;\n}'},function(e,t,n){n(1)(n(25))},function(e,t){e.exports='// Copyright (c) 2005  Tom Wu\n// All Rights Reserved.\n// See "LICENSE" for details.\n\n// Basic JavaScript BN library - subset useful for RSA encryption.\n\n// Bits per digit\nvar dbits;\n\n// JavaScript engine analysis\nvar canary = 0xdeadbeefcafe;\nvar j_lm = (canary & 0xffffff) == 0xefcafe;\n\n// (public) Constructor\nfunction BigInteger(a, b, c) {\n  if (a != null) if ("number" == typeof a) this.fromNumber(a, b, c);else if (b == null && "string" != typeof a) this.fromString(a, 256);else this.fromString(a, b);\n}\n\n// return new, unset BigInteger\nfunction nbi() {\n  return new BigInteger(null);\n}\n\n// am: Compute w_j += (x*this_i), propagate carries,\n// c is initial carry, returns final carry.\n// c < 3*dvalue, x < 2*dvalue, this_i < dvalue\n// We need to select the fastest one that works in this environment.\n\n// am1: use a single mult and divide to get the high bits,\n// max digit bits should be 26 because\n// max internal value = 2*dvalue^2-2*dvalue (< 2^53)\nfunction am1(i, x, w, j, c, n) {\n  while (--n >= 0) {\n    var v = x * this[i++] + w[j] + c;\n    c = Math.floor(v / 0x4000000);\n    w[j++] = v & 0x3ffffff;\n  }\n  return c;\n}\n// am2 avoids a big mult-and-extract completely.\n// Max digit bits should be <= 30 because we do bitwise ops\n// on values up to 2*hdvalue^2-hdvalue-1 (< 2^31)\nfunction am2(i, x, w, j, c, n) {\n  var xl = x & 0x7fff,\n    xh = x >> 15;\n  while (--n >= 0) {\n    var l = this[i] & 0x7fff;\n    var h = this[i++] >> 15;\n    var m = xh * l + h * xl;\n    l = xl * l + ((m & 0x7fff) << 15) + w[j] + (c & 0x3fffffff);\n    c = (l >>> 30) + (m >>> 15) + xh * h + (c >>> 30);\n    w[j++] = l & 0x3fffffff;\n  }\n  return c;\n}\n// Alternately, set max digit bits to 28 since some\n// browsers slow down when dealing with 32-bit numbers.\nfunction am3(i, x, w, j, c, n) {\n  var xl = x & 0x3fff,\n    xh = x >> 14;\n  while (--n >= 0) {\n    var l = this[i] & 0x3fff;\n    var h = this[i++] >> 14;\n    var m = xh * l + h * xl;\n    l = xl * l + ((m & 0x3fff) << 14) + w[j] + c;\n    c = (l >> 28) + (m >> 14) + xh * h;\n    w[j++] = l & 0xfffffff;\n  }\n  return c;\n}\nif (j_lm && navigator.appName == "Microsoft Internet Explorer") {\n  BigInteger.prototype.am = am2;\n  dbits = 30;\n} else if (j_lm && navigator.appName != "Netscape") {\n  BigInteger.prototype.am = am1;\n  dbits = 26;\n} else {\n  // Mozilla/Netscape seems to prefer am3\n  BigInteger.prototype.am = am3;\n  dbits = 28;\n}\nBigInteger.prototype.DB = dbits;\nBigInteger.prototype.DM = (1 << dbits) - 1;\nBigInteger.prototype.DV = 1 << dbits;\nvar BI_FP = 52;\nBigInteger.prototype.FV = Math.pow(2, BI_FP);\nBigInteger.prototype.F1 = BI_FP - dbits;\nBigInteger.prototype.F2 = 2 * dbits - BI_FP;\n\n// Digit conversions\nvar BI_RM = "0123456789abcdefghijklmnopqrstuvwxyz";\nvar BI_RC = new Array();\nvar rr, vv;\nrr = "0".charCodeAt(0);\nfor (vv = 0; vv <= 9; ++vv) BI_RC[rr++] = vv;\nrr = "a".charCodeAt(0);\nfor (vv = 10; vv < 36; ++vv) BI_RC[rr++] = vv;\nrr = "A".charCodeAt(0);\nfor (vv = 10; vv < 36; ++vv) BI_RC[rr++] = vv;\nfunction int2char(n) {\n  return BI_RM.charAt(n);\n}\nfunction intAt(s, i) {\n  var c = BI_RC[s.charCodeAt(i)];\n  return c == null ? -1 : c;\n}\n\n// (protected) copy this to r\nfunction bnpCopyTo(r) {\n  for (var i = this.t - 1; i >= 0; --i) r[i] = this[i];\n  r.t = this.t;\n  r.s = this.s;\n}\n\n// (protected) set from integer value x, -DV <= x < DV\nfunction bnpFromInt(x) {\n  this.t = 1;\n  this.s = x < 0 ? -1 : 0;\n  if (x > 0) this[0] = x;else if (x < -1) this[0] = x + DV;else this.t = 0;\n}\n\n// return bigint initialized to value\nfunction nbv(i) {\n  var r = nbi();\n  r.fromInt(i);\n  return r;\n}\n\n// (protected) set from string and radix\nfunction bnpFromString(s, b) {\n  var k;\n  if (b == 16) k = 4;else if (b == 8) k = 3;else if (b == 256) k = 8; // byte array\n  else if (b == 2) k = 1;else if (b == 32) k = 5;else if (b == 4) k = 2;else {\n    this.fromRadix(s, b);\n    return;\n  }\n  this.t = 0;\n  this.s = 0;\n  var i = s.length,\n    mi = false,\n    sh = 0;\n  while (--i >= 0) {\n    var x = k == 8 ? s[i] & 0xff : intAt(s, i);\n    if (x < 0) {\n      if (s.charAt(i) == "-") mi = true;\n      continue;\n    }\n    mi = false;\n    if (sh == 0) this[this.t++] = x;else if (sh + k > this.DB) {\n      this[this.t - 1] |= (x & (1 << this.DB - sh) - 1) << sh;\n      this[this.t++] = x >> this.DB - sh;\n    } else this[this.t - 1] |= x << sh;\n    sh += k;\n    if (sh >= this.DB) sh -= this.DB;\n  }\n  if (k == 8 && (s[0] & 0x80) != 0) {\n    this.s = -1;\n    if (sh > 0) this[this.t - 1] |= (1 << this.DB - sh) - 1 << sh;\n  }\n  this.clamp();\n  if (mi) BigInteger.ZERO.subTo(this, this);\n}\n\n// (protected) clamp off excess high words\nfunction bnpClamp() {\n  var c = this.s & this.DM;\n  while (this.t > 0 && this[this.t - 1] == c) --this.t;\n}\n\n// (public) return string representation in given radix\nfunction bnToString(b) {\n  if (this.s < 0) return "-" + this.negate().toString(b);\n  var k;\n  if (b == 16) k = 4;else if (b == 8) k = 3;else if (b == 2) k = 1;else if (b == 32) k = 5;else if (b == 4) k = 2;else return this.toRadix(b);\n  var km = (1 << k) - 1,\n    d,\n    m = false,\n    r = "",\n    i = this.t;\n  var p = this.DB - i * this.DB % k;\n  if (i-- > 0) {\n    if (p < this.DB && (d = this[i] >> p) > 0) {\n      m = true;\n      r = int2char(d);\n    }\n    while (i >= 0) {\n      if (p < k) {\n        d = (this[i] & (1 << p) - 1) << k - p;\n        d |= this[--i] >> (p += this.DB - k);\n      } else {\n        d = this[i] >> (p -= k) & km;\n        if (p <= 0) {\n          p += this.DB;\n          --i;\n        }\n      }\n      if (d > 0) m = true;\n      if (m) r += int2char(d);\n    }\n  }\n  return m ? r : "0";\n}\n\n// (public) -this\nfunction bnNegate() {\n  var r = nbi();\n  BigInteger.ZERO.subTo(this, r);\n  return r;\n}\n\n// (public) |this|\nfunction bnAbs() {\n  return this.s < 0 ? this.negate() : this;\n}\n\n// (public) return + if this > a, - if this < a, 0 if equal\nfunction bnCompareTo(a) {\n  var r = this.s - a.s;\n  if (r != 0) return r;\n  var i = this.t;\n  r = i - a.t;\n  if (r != 0) return r;\n  while (--i >= 0) if ((r = this[i] - a[i]) != 0) return r;\n  return 0;\n}\n\n// returns bit length of the integer x\nfunction nbits(x) {\n  var r = 1,\n    t;\n  if ((t = x >>> 16) != 0) {\n    x = t;\n    r += 16;\n  }\n  if ((t = x >> 8) != 0) {\n    x = t;\n    r += 8;\n  }\n  if ((t = x >> 4) != 0) {\n    x = t;\n    r += 4;\n  }\n  if ((t = x >> 2) != 0) {\n    x = t;\n    r += 2;\n  }\n  if ((t = x >> 1) != 0) {\n    x = t;\n    r += 1;\n  }\n  return r;\n}\n\n// (public) return the number of bits in "this"\nfunction bnBitLength() {\n  if (this.t <= 0) return 0;\n  return this.DB * (this.t - 1) + nbits(this[this.t - 1] ^ this.s & this.DM);\n}\n\n// (protected) r = this << n*DB\nfunction bnpDLShiftTo(n, r) {\n  var i;\n  for (i = this.t - 1; i >= 0; --i) r[i + n] = this[i];\n  for (i = n - 1; i >= 0; --i) r[i] = 0;\n  r.t = this.t + n;\n  r.s = this.s;\n}\n\n// (protected) r = this >> n*DB\nfunction bnpDRShiftTo(n, r) {\n  for (var i = n; i < this.t; ++i) r[i - n] = this[i];\n  r.t = Math.max(this.t - n, 0);\n  r.s = this.s;\n}\n\n// (protected) r = this << n\nfunction bnpLShiftTo(n, r) {\n  var bs = n % this.DB;\n  var cbs = this.DB - bs;\n  var bm = (1 << cbs) - 1;\n  var ds = Math.floor(n / this.DB),\n    c = this.s << bs & this.DM,\n    i;\n  for (i = this.t - 1; i >= 0; --i) {\n    r[i + ds + 1] = this[i] >> cbs | c;\n    c = (this[i] & bm) << bs;\n  }\n  for (i = ds - 1; i >= 0; --i) r[i] = 0;\n  r[ds] = c;\n  r.t = this.t + ds + 1;\n  r.s = this.s;\n  r.clamp();\n}\n\n// (protected) r = this >> n\nfunction bnpRShiftTo(n, r) {\n  r.s = this.s;\n  var ds = Math.floor(n / this.DB);\n  if (ds >= this.t) {\n    r.t = 0;\n    return;\n  }\n  var bs = n % this.DB;\n  var cbs = this.DB - bs;\n  var bm = (1 << bs) - 1;\n  r[0] = this[ds] >> bs;\n  for (var i = ds + 1; i < this.t; ++i) {\n    r[i - ds - 1] |= (this[i] & bm) << cbs;\n    r[i - ds] = this[i] >> bs;\n  }\n  if (bs > 0) r[this.t - ds - 1] |= (this.s & bm) << cbs;\n  r.t = this.t - ds;\n  r.clamp();\n}\n\n// (protected) r = this - a\nfunction bnpSubTo(a, r) {\n  var i = 0,\n    c = 0,\n    m = Math.min(a.t, this.t);\n  while (i < m) {\n    c += this[i] - a[i];\n    r[i++] = c & this.DM;\n    c >>= this.DB;\n  }\n  if (a.t < this.t) {\n    c -= a.s;\n    while (i < this.t) {\n      c += this[i];\n      r[i++] = c & this.DM;\n      c >>= this.DB;\n    }\n    c += this.s;\n  } else {\n    c += this.s;\n    while (i < a.t) {\n      c -= a[i];\n      r[i++] = c & this.DM;\n      c >>= this.DB;\n    }\n    c -= a.s;\n  }\n  r.s = c < 0 ? -1 : 0;\n  if (c < -1) r[i++] = this.DV + c;else if (c > 0) r[i++] = c;\n  r.t = i;\n  r.clamp();\n}\n\n// (protected) r = this * a, r != this,a (HAC 14.12)\n// "this" should be the larger one if appropriate.\nfunction bnpMultiplyTo(a, r) {\n  var x = this.abs(),\n    y = a.abs();\n  var i = x.t;\n  r.t = i + y.t;\n  while (--i >= 0) r[i] = 0;\n  for (i = 0; i < y.t; ++i) r[i + x.t] = x.am(0, y[i], r, i, 0, x.t);\n  r.s = 0;\n  r.clamp();\n  if (this.s != a.s) BigInteger.ZERO.subTo(r, r);\n}\n\n// (protected) r = this^2, r != this (HAC 14.16)\nfunction bnpSquareTo(r) {\n  var x = this.abs();\n  var i = r.t = 2 * x.t;\n  while (--i >= 0) r[i] = 0;\n  for (i = 0; i < x.t - 1; ++i) {\n    var c = x.am(i, x[i], r, 2 * i, 0, 1);\n    if ((r[i + x.t] += x.am(i + 1, 2 * x[i], r, 2 * i + 1, c, x.t - i - 1)) >= x.DV) {\n      r[i + x.t] -= x.DV;\n      r[i + x.t + 1] = 1;\n    }\n  }\n  if (r.t > 0) r[r.t - 1] += x.am(i, x[i], r, 2 * i, 0, 1);\n  r.s = 0;\n  r.clamp();\n}\n\n// (protected) divide this by m, quotient and remainder to q, r (HAC 14.20)\n// r != q, this != m.  q or r may be null.\nfunction bnpDivRemTo(m, q, r) {\n  var pm = m.abs();\n  if (pm.t <= 0) return;\n  var pt = this.abs();\n  if (pt.t < pm.t) {\n    if (q != null) q.fromInt(0);\n    if (r != null) this.copyTo(r);\n    return;\n  }\n  if (r == null) r = nbi();\n  var y = nbi(),\n    ts = this.s,\n    ms = m.s;\n  var nsh = this.DB - nbits(pm[pm.t - 1]); // normalize modulus\n  if (nsh > 0) {\n    pm.lShiftTo(nsh, y);\n    pt.lShiftTo(nsh, r);\n  } else {\n    pm.copyTo(y);\n    pt.copyTo(r);\n  }\n  var ys = y.t;\n  var y0 = y[ys - 1];\n  if (y0 == 0) return;\n  var yt = y0 * (1 << this.F1) + (ys > 1 ? y[ys - 2] >> this.F2 : 0);\n  var d1 = this.FV / yt,\n    d2 = (1 << this.F1) / yt,\n    e = 1 << this.F2;\n  var i = r.t,\n    j = i - ys,\n    t = q == null ? nbi() : q;\n  y.dlShiftTo(j, t);\n  if (r.compareTo(t) >= 0) {\n    r[r.t++] = 1;\n    r.subTo(t, r);\n  }\n  BigInteger.ONE.dlShiftTo(ys, t);\n  t.subTo(y, y); // "negative" y so we can replace sub with am later\n  while (y.t < ys) y[y.t++] = 0;\n  while (--j >= 0) {\n    // Estimate quotient digit\n    var qd = r[--i] == y0 ? this.DM : Math.floor(r[i] * d1 + (r[i - 1] + e) * d2);\n    if ((r[i] += y.am(0, qd, r, j, 0, ys)) < qd) {\n      // Try it out\n      y.dlShiftTo(j, t);\n      r.subTo(t, r);\n      while (r[i] < --qd) r.subTo(t, r);\n    }\n  }\n  if (q != null) {\n    r.drShiftTo(ys, q);\n    if (ts != ms) BigInteger.ZERO.subTo(q, q);\n  }\n  r.t = ys;\n  r.clamp();\n  if (nsh > 0) r.rShiftTo(nsh, r); // Denormalize remainder\n  if (ts < 0) BigInteger.ZERO.subTo(r, r);\n}\n\n// (public) this mod a\nfunction bnMod(a) {\n  var r = nbi();\n  this.abs().divRemTo(a, null, r);\n  if (this.s < 0 && r.compareTo(BigInteger.ZERO) > 0) a.subTo(r, r);\n  return r;\n}\n\n// Modular reduction using "classic" algorithm\nfunction Classic(m) {\n  this.m = m;\n}\nfunction cConvert(x) {\n  if (x.s < 0 || x.compareTo(this.m) >= 0) return x.mod(this.m);else return x;\n}\nfunction cRevert(x) {\n  return x;\n}\nfunction cReduce(x) {\n  x.divRemTo(this.m, null, x);\n}\nfunction cMulTo(x, y, r) {\n  x.multiplyTo(y, r);\n  this.reduce(r);\n}\nfunction cSqrTo(x, r) {\n  x.squareTo(r);\n  this.reduce(r);\n}\nClassic.prototype.convert = cConvert;\nClassic.prototype.revert = cRevert;\nClassic.prototype.reduce = cReduce;\nClassic.prototype.mulTo = cMulTo;\nClassic.prototype.sqrTo = cSqrTo;\n\n// (protected) return "-1/this % 2^DB"; useful for Mont. reduction\n// justification:\n//         xy == 1 (mod m)\n//         xy =  1+km\n//   xy(2-xy) = (1+km)(1-km)\n// x[y(2-xy)] = 1-k^2m^2\n// x[y(2-xy)] == 1 (mod m^2)\n// if y is 1/x mod m, then y(2-xy) is 1/x mod m^2\n// should reduce x and y(2-xy) by m^2 at each step to keep size bounded.\n// JS multiply "overflows" differently from C/C++, so care is needed here.\nfunction bnpInvDigit() {\n  if (this.t < 1) return 0;\n  var x = this[0];\n  if ((x & 1) == 0) return 0;\n  var y = x & 3; // y == 1/x mod 2^2\n  y = y * (2 - (x & 0xf) * y) & 0xf; // y == 1/x mod 2^4\n  y = y * (2 - (x & 0xff) * y) & 0xff; // y == 1/x mod 2^8\n  y = y * (2 - ((x & 0xffff) * y & 0xffff)) & 0xffff; // y == 1/x mod 2^16\n  // last step - calculate inverse mod DV directly;\n  // assumes 16 < DB <= 32 and assumes ability to handle 48-bit ints\n  y = y * (2 - x * y % this.DV) % this.DV; // y == 1/x mod 2^dbits\n  // we really want the negative inverse, and -DV < y < DV\n  return y > 0 ? this.DV - y : -y;\n}\n\n// Montgomery reduction\nfunction Montgomery(m) {\n  this.m = m;\n  this.mp = m.invDigit();\n  this.mpl = this.mp & 0x7fff;\n  this.mph = this.mp >> 15;\n  this.um = (1 << m.DB - 15) - 1;\n  this.mt2 = 2 * m.t;\n}\n\n// xR mod m\nfunction montConvert(x) {\n  var r = nbi();\n  x.abs().dlShiftTo(this.m.t, r);\n  r.divRemTo(this.m, null, r);\n  if (x.s < 0 && r.compareTo(BigInteger.ZERO) > 0) this.m.subTo(r, r);\n  return r;\n}\n\n// x/R mod m\nfunction montRevert(x) {\n  var r = nbi();\n  x.copyTo(r);\n  this.reduce(r);\n  return r;\n}\n\n// x = x/R mod m (HAC 14.32)\nfunction montReduce(x) {\n  while (x.t <= this.mt2)\n  // pad x so am has enough room later\n  x[x.t++] = 0;\n  for (var i = 0; i < this.m.t; ++i) {\n    // faster way of calculating u0 = x[i]*mp mod DV\n    var j = x[i] & 0x7fff;\n    var u0 = j * this.mpl + ((j * this.mph + (x[i] >> 15) * this.mpl & this.um) << 15) & x.DM;\n    // use am to combine the multiply-shift-add into one call\n    j = i + this.m.t;\n    x[j] += this.m.am(0, u0, x, i, 0, this.m.t);\n    // propagate carry\n    while (x[j] >= x.DV) {\n      x[j] -= x.DV;\n      x[++j]++;\n    }\n  }\n  x.clamp();\n  x.drShiftTo(this.m.t, x);\n  if (x.compareTo(this.m) >= 0) x.subTo(this.m, x);\n}\n\n// r = "x^2/R mod m"; x != r\nfunction montSqrTo(x, r) {\n  x.squareTo(r);\n  this.reduce(r);\n}\n\n// r = "xy/R mod m"; x,y != r\nfunction montMulTo(x, y, r) {\n  x.multiplyTo(y, r);\n  this.reduce(r);\n}\nMontgomery.prototype.convert = montConvert;\nMontgomery.prototype.revert = montRevert;\nMontgomery.prototype.reduce = montReduce;\nMontgomery.prototype.mulTo = montMulTo;\nMontgomery.prototype.sqrTo = montSqrTo;\n\n// (protected) true iff this is even\nfunction bnpIsEven() {\n  return (this.t > 0 ? this[0] & 1 : this.s) == 0;\n}\n\n// (protected) this^e, e < 2^32, doing sqr and mul with "r" (HAC 14.79)\nfunction bnpExp(e, z) {\n  if (e > 0xffffffff || e < 1) return BigInteger.ONE;\n  var r = nbi(),\n    r2 = nbi(),\n    g = z.convert(this),\n    i = nbits(e) - 1;\n  g.copyTo(r);\n  while (--i >= 0) {\n    z.sqrTo(r, r2);\n    if ((e & 1 << i) > 0) z.mulTo(r2, g, r);else {\n      var t = r;\n      r = r2;\n      r2 = t;\n    }\n  }\n  return z.revert(r);\n}\n\n// (public) this^e % m, 0 <= e < 2^32\nfunction bnModPowInt(e, m) {\n  var z;\n  if (e < 256 || m.isEven()) z = new Classic(m);else z = new Montgomery(m);\n  return this.exp(e, z);\n}\n\n// protected\nBigInteger.prototype.copyTo = bnpCopyTo;\nBigInteger.prototype.fromInt = bnpFromInt;\nBigInteger.prototype.fromString = bnpFromString;\nBigInteger.prototype.clamp = bnpClamp;\nBigInteger.prototype.dlShiftTo = bnpDLShiftTo;\nBigInteger.prototype.drShiftTo = bnpDRShiftTo;\nBigInteger.prototype.lShiftTo = bnpLShiftTo;\nBigInteger.prototype.rShiftTo = bnpRShiftTo;\nBigInteger.prototype.subTo = bnpSubTo;\nBigInteger.prototype.multiplyTo = bnpMultiplyTo;\nBigInteger.prototype.squareTo = bnpSquareTo;\nBigInteger.prototype.divRemTo = bnpDivRemTo;\nBigInteger.prototype.invDigit = bnpInvDigit;\nBigInteger.prototype.isEven = bnpIsEven;\nBigInteger.prototype.exp = bnpExp;\n\n// public\nBigInteger.prototype.toString = bnToString;\nBigInteger.prototype.negate = bnNegate;\nBigInteger.prototype.abs = bnAbs;\nBigInteger.prototype.compareTo = bnCompareTo;\nBigInteger.prototype.bitLength = bnBitLength;\nBigInteger.prototype.mod = bnMod;\nBigInteger.prototype.modPowInt = bnModPowInt;\n\n// "constants"\nBigInteger.ZERO = nbv(0);\nBigInteger.ONE = nbv(1);'},function(e,t,n){n(1)(n(27))},function(e,t){e.exports='// Copyright (c) 2005  Tom Wu\n// All Rights Reserved.\n// See "LICENSE" for details.\n\n// Extended JavaScript BN functions, required for RSA private ops.\n\n// (public)\nfunction bnClone() {\n  var r = nbi();\n  this.copyTo(r);\n  return r;\n}\n\n// (public) return value as integer\nfunction bnIntValue() {\n  if (this.s < 0) {\n    if (this.t == 1) return this[0] - this.DV;else if (this.t == 0) return -1;\n  } else if (this.t == 1) return this[0];else if (this.t == 0) return 0;\n  // assumes 16 < DB < 32\n  return (this[1] & (1 << 32 - this.DB) - 1) << this.DB | this[0];\n}\n\n// (public) return value as byte\nfunction bnByteValue() {\n  return this.t == 0 ? this.s : this[0] << 24 >> 24;\n}\n\n// (public) return value as short (assumes DB>=16)\nfunction bnShortValue() {\n  return this.t == 0 ? this.s : this[0] << 16 >> 16;\n}\n\n// (protected) return x s.t. r^x < DV\nfunction bnpChunkSize(r) {\n  return Math.floor(Math.LN2 * this.DB / Math.log(r));\n}\n\n// (public) 0 if this == 0, 1 if this > 0\nfunction bnSigNum() {\n  if (this.s < 0) return -1;else if (this.t <= 0 || this.t == 1 && this[0] <= 0) return 0;else return 1;\n}\n\n// (protected) convert to radix string\nfunction bnpToRadix(b) {\n  if (b == null) b = 10;\n  if (this.signum() == 0 || b < 2 || b > 36) return "0";\n  var cs = this.chunkSize(b);\n  var a = Math.pow(b, cs);\n  var d = nbv(a),\n    y = nbi(),\n    z = nbi(),\n    r = "";\n  this.divRemTo(d, y, z);\n  while (y.signum() > 0) {\n    r = (a + z.intValue()).toString(b).substr(1) + r;\n    y.divRemTo(d, y, z);\n  }\n  return z.intValue().toString(b) + r;\n}\n\n// (protected) convert from radix string\nfunction bnpFromRadix(s, b) {\n  this.fromInt(0);\n  if (b == null) b = 10;\n  var cs = this.chunkSize(b);\n  var d = Math.pow(b, cs),\n    mi = false,\n    j = 0,\n    w = 0;\n  for (var i = 0; i < s.length; ++i) {\n    var x = intAt(s, i);\n    if (x < 0) {\n      if (s.charAt(i) == "-" && this.signum() == 0) mi = true;\n      continue;\n    }\n    w = b * w + x;\n    if (++j >= cs) {\n      this.dMultiply(d);\n      this.dAddOffset(w, 0);\n      j = 0;\n      w = 0;\n    }\n  }\n  if (j > 0) {\n    this.dMultiply(Math.pow(b, j));\n    this.dAddOffset(w, 0);\n  }\n  if (mi) BigInteger.ZERO.subTo(this, this);\n}\n\n// (protected) alternate constructor\nfunction bnpFromNumber(a, b, c) {\n  if ("number" == typeof b) {\n    // new BigInteger(int,int,RNG)\n    if (a < 2) this.fromInt(1);else {\n      this.fromNumber(a, c);\n      if (!this.testBit(a - 1))\n        // force MSB set\n        this.bitwiseTo(BigInteger.ONE.shiftLeft(a - 1), op_or, this);\n      if (this.isEven()) this.dAddOffset(1, 0); // force odd\n      while (!this.isProbablePrime(b)) {\n        this.dAddOffset(2, 0);\n        if (this.bitLength() > a) this.subTo(BigInteger.ONE.shiftLeft(a - 1), this);\n      }\n    }\n  } else {\n    // new BigInteger(int,RNG)\n    var x = new Array(),\n      t = a & 7;\n    x.length = (a >> 3) + 1;\n    b.nextBytes(x);\n    if (t > 0) x[0] &= (1 << t) - 1;else x[0] = 0;\n    this.fromString(x, 256);\n  }\n}\n\n// (public) convert to bigendian byte array\nfunction bnToByteArray() {\n  var i = this.t,\n    r = new Array();\n  r[0] = this.s;\n  var p = this.DB - i * this.DB % 8,\n    d,\n    k = 0;\n  if (i-- > 0) {\n    if (p < this.DB && (d = this[i] >> p) != (this.s & this.DM) >> p) r[k++] = d | this.s << this.DB - p;\n    while (i >= 0) {\n      if (p < 8) {\n        d = (this[i] & (1 << p) - 1) << 8 - p;\n        d |= this[--i] >> (p += this.DB - 8);\n      } else {\n        d = this[i] >> (p -= 8) & 0xff;\n        if (p <= 0) {\n          p += this.DB;\n          --i;\n        }\n      }\n      if ((d & 0x80) != 0) d |= -256;\n      if (k == 0 && (this.s & 0x80) != (d & 0x80)) ++k;\n      if (k > 0 || d != this.s) r[k++] = d;\n    }\n  }\n  return r;\n}\nfunction bnEquals(a) {\n  return this.compareTo(a) == 0;\n}\nfunction bnMin(a) {\n  return this.compareTo(a) < 0 ? this : a;\n}\nfunction bnMax(a) {\n  return this.compareTo(a) > 0 ? this : a;\n}\n\n// (protected) r = this op a (bitwise)\nfunction bnpBitwiseTo(a, op, r) {\n  var i,\n    f,\n    m = Math.min(a.t, this.t);\n  for (i = 0; i < m; ++i) r[i] = op(this[i], a[i]);\n  if (a.t < this.t) {\n    f = a.s & this.DM;\n    for (i = m; i < this.t; ++i) r[i] = op(this[i], f);\n    r.t = this.t;\n  } else {\n    f = this.s & this.DM;\n    for (i = m; i < a.t; ++i) r[i] = op(f, a[i]);\n    r.t = a.t;\n  }\n  r.s = op(this.s, a.s);\n  r.clamp();\n}\n\n// (public) this & a\nfunction op_and(x, y) {\n  return x & y;\n}\nfunction bnAnd(a) {\n  var r = nbi();\n  this.bitwiseTo(a, op_and, r);\n  return r;\n}\n\n// (public) this | a\nfunction op_or(x, y) {\n  return x | y;\n}\nfunction bnOr(a) {\n  var r = nbi();\n  this.bitwiseTo(a, op_or, r);\n  return r;\n}\n\n// (public) this ^ a\nfunction op_xor(x, y) {\n  return x ^ y;\n}\nfunction bnXor(a) {\n  var r = nbi();\n  this.bitwiseTo(a, op_xor, r);\n  return r;\n}\n\n// (public) this & ~a\nfunction op_andnot(x, y) {\n  return x & ~y;\n}\nfunction bnAndNot(a) {\n  var r = nbi();\n  this.bitwiseTo(a, op_andnot, r);\n  return r;\n}\n\n// (public) ~this\nfunction bnNot() {\n  var r = nbi();\n  for (var i = 0; i < this.t; ++i) r[i] = this.DM & ~this[i];\n  r.t = this.t;\n  r.s = ~this.s;\n  return r;\n}\n\n// (public) this << n\nfunction bnShiftLeft(n) {\n  var r = nbi();\n  if (n < 0) this.rShiftTo(-n, r);else this.lShiftTo(n, r);\n  return r;\n}\n\n// (public) this >> n\nfunction bnShiftRight(n) {\n  var r = nbi();\n  if (n < 0) this.lShiftTo(-n, r);else this.rShiftTo(n, r);\n  return r;\n}\n\n// return index of lowest 1-bit in x, x < 2^31\nfunction lbit(x) {\n  if (x == 0) return -1;\n  var r = 0;\n  if ((x & 0xffff) == 0) {\n    x >>= 16;\n    r += 16;\n  }\n  if ((x & 0xff) == 0) {\n    x >>= 8;\n    r += 8;\n  }\n  if ((x & 0xf) == 0) {\n    x >>= 4;\n    r += 4;\n  }\n  if ((x & 3) == 0) {\n    x >>= 2;\n    r += 2;\n  }\n  if ((x & 1) == 0) ++r;\n  return r;\n}\n\n// (public) returns index of lowest 1-bit (or -1 if none)\nfunction bnGetLowestSetBit() {\n  for (var i = 0; i < this.t; ++i) if (this[i] != 0) return i * this.DB + lbit(this[i]);\n  if (this.s < 0) return this.t * this.DB;\n  return -1;\n}\n\n// return number of 1 bits in x\nfunction cbit(x) {\n  var r = 0;\n  while (x != 0) {\n    x &= x - 1;\n    ++r;\n  }\n  return r;\n}\n\n// (public) return number of set bits\nfunction bnBitCount() {\n  var r = 0,\n    x = this.s & this.DM;\n  for (var i = 0; i < this.t; ++i) r += cbit(this[i] ^ x);\n  return r;\n}\n\n// (public) true iff nth bit is set\nfunction bnTestBit(n) {\n  var j = Math.floor(n / this.DB);\n  if (j >= this.t) return this.s != 0;\n  return (this[j] & 1 << n % this.DB) != 0;\n}\n\n// (protected) this op (1<<n)\nfunction bnpChangeBit(n, op) {\n  var r = BigInteger.ONE.shiftLeft(n);\n  this.bitwiseTo(r, op, r);\n  return r;\n}\n\n// (public) this | (1<<n)\nfunction bnSetBit(n) {\n  return this.changeBit(n, op_or);\n}\n\n// (public) this & ~(1<<n)\nfunction bnClearBit(n) {\n  return this.changeBit(n, op_andnot);\n}\n\n// (public) this ^ (1<<n)\nfunction bnFlipBit(n) {\n  return this.changeBit(n, op_xor);\n}\n\n// (protected) r = this + a\nfunction bnpAddTo(a, r) {\n  var i = 0,\n    c = 0,\n    m = Math.min(a.t, this.t);\n  while (i < m) {\n    c += this[i] + a[i];\n    r[i++] = c & this.DM;\n    c >>= this.DB;\n  }\n  if (a.t < this.t) {\n    c += a.s;\n    while (i < this.t) {\n      c += this[i];\n      r[i++] = c & this.DM;\n      c >>= this.DB;\n    }\n    c += this.s;\n  } else {\n    c += this.s;\n    while (i < a.t) {\n      c += a[i];\n      r[i++] = c & this.DM;\n      c >>= this.DB;\n    }\n    c += a.s;\n  }\n  r.s = c < 0 ? -1 : 0;\n  if (c > 0) r[i++] = c;else if (c < -1) r[i++] = this.DV + c;\n  r.t = i;\n  r.clamp();\n}\n\n// (public) this + a\nfunction bnAdd(a) {\n  var r = nbi();\n  this.addTo(a, r);\n  return r;\n}\n\n// (public) this - a\nfunction bnSubtract(a) {\n  var r = nbi();\n  this.subTo(a, r);\n  return r;\n}\n\n// (public) this * a\nfunction bnMultiply(a) {\n  var r = nbi();\n  this.multiplyTo(a, r);\n  return r;\n}\n\n// (public) this / a\nfunction bnDivide(a) {\n  var r = nbi();\n  this.divRemTo(a, r, null);\n  return r;\n}\n\n// (public) this % a\nfunction bnRemainder(a) {\n  var r = nbi();\n  this.divRemTo(a, null, r);\n  return r;\n}\n\n// (public) [this/a,this%a]\nfunction bnDivideAndRemainder(a) {\n  var q = nbi(),\n    r = nbi();\n  this.divRemTo(a, q, r);\n  return new Array(q, r);\n}\n\n// (protected) this *= n, this >= 0, 1 < n < DV\nfunction bnpDMultiply(n) {\n  this[this.t] = this.am(0, n - 1, this, 0, 0, this.t);\n  ++this.t;\n  this.clamp();\n}\n\n// (protected) this += n << w words, this >= 0\nfunction bnpDAddOffset(n, w) {\n  while (this.t <= w) this[this.t++] = 0;\n  this[w] += n;\n  while (this[w] >= this.DV) {\n    this[w] -= this.DV;\n    if (++w >= this.t) this[this.t++] = 0;\n    ++this[w];\n  }\n}\n\n// A "null" reducer\nfunction NullExp() {}\nfunction nNop(x) {\n  return x;\n}\nfunction nMulTo(x, y, r) {\n  x.multiplyTo(y, r);\n}\nfunction nSqrTo(x, r) {\n  x.squareTo(r);\n}\nNullExp.prototype.convert = nNop;\nNullExp.prototype.revert = nNop;\nNullExp.prototype.mulTo = nMulTo;\nNullExp.prototype.sqrTo = nSqrTo;\n\n// (public) this^e\nfunction bnPow(e) {\n  return this.exp(e, new NullExp());\n}\n\n// (protected) r = lower n words of "this * a", a.t <= n\n// "this" should be the larger one if appropriate.\nfunction bnpMultiplyLowerTo(a, n, r) {\n  var i = Math.min(this.t + a.t, n);\n  r.s = 0; // assumes a,this >= 0\n  r.t = i;\n  while (i > 0) r[--i] = 0;\n  var j;\n  for (j = r.t - this.t; i < j; ++i) r[i + this.t] = this.am(0, a[i], r, i, 0, this.t);\n  for (j = Math.min(a.t, n); i < j; ++i) this.am(0, a[i], r, i, 0, n - i);\n  r.clamp();\n}\n\n// (protected) r = "this * a" without lower n words, n > 0\n// "this" should be the larger one if appropriate.\nfunction bnpMultiplyUpperTo(a, n, r) {\n  --n;\n  var i = r.t = this.t + a.t - n;\n  r.s = 0; // assumes a,this >= 0\n  while (--i >= 0) r[i] = 0;\n  for (i = Math.max(n - this.t, 0); i < a.t; ++i) r[this.t + i - n] = this.am(n - i, a[i], r, 0, 0, this.t + i - n);\n  r.clamp();\n  r.drShiftTo(1, r);\n}\n\n// Barrett modular reduction\nfunction Barrett(m) {\n  // setup Barrett\n  this.r2 = nbi();\n  this.q3 = nbi();\n  BigInteger.ONE.dlShiftTo(2 * m.t, this.r2);\n  this.mu = this.r2.divide(m);\n  this.m = m;\n}\nfunction barrettConvert(x) {\n  if (x.s < 0 || x.t > 2 * this.m.t) return x.mod(this.m);else if (x.compareTo(this.m) < 0) return x;else {\n    var r = nbi();\n    x.copyTo(r);\n    this.reduce(r);\n    return r;\n  }\n}\nfunction barrettRevert(x) {\n  return x;\n}\n\n// x = x mod m (HAC 14.42)\nfunction barrettReduce(x) {\n  x.drShiftTo(this.m.t - 1, this.r2);\n  if (x.t > this.m.t + 1) {\n    x.t = this.m.t + 1;\n    x.clamp();\n  }\n  this.mu.multiplyUpperTo(this.r2, this.m.t + 1, this.q3);\n  this.m.multiplyLowerTo(this.q3, this.m.t + 1, this.r2);\n  while (x.compareTo(this.r2) < 0) x.dAddOffset(1, this.m.t + 1);\n  x.subTo(this.r2, x);\n  while (x.compareTo(this.m) >= 0) x.subTo(this.m, x);\n}\n\n// r = x^2 mod m; x != r\nfunction barrettSqrTo(x, r) {\n  x.squareTo(r);\n  this.reduce(r);\n}\n\n// r = x*y mod m; x,y != r\nfunction barrettMulTo(x, y, r) {\n  x.multiplyTo(y, r);\n  this.reduce(r);\n}\nBarrett.prototype.convert = barrettConvert;\nBarrett.prototype.revert = barrettRevert;\nBarrett.prototype.reduce = barrettReduce;\nBarrett.prototype.mulTo = barrettMulTo;\nBarrett.prototype.sqrTo = barrettSqrTo;\n\n// (public) this^e % m (HAC 14.85)\nfunction bnModPow(e, m) {\n  var i = e.bitLength(),\n    k,\n    r = nbv(1),\n    z;\n  if (i <= 0) return r;else if (i < 18) k = 1;else if (i < 48) k = 3;else if (i < 144) k = 4;else if (i < 768) k = 5;else k = 6;\n  if (i < 8) z = new Classic(m);else if (m.isEven()) z = new Barrett(m);else z = new Montgomery(m);\n\n  // precomputation\n  var g = new Array(),\n    n = 3,\n    k1 = k - 1,\n    km = (1 << k) - 1;\n  g[1] = z.convert(this);\n  if (k > 1) {\n    var g2 = nbi();\n    z.sqrTo(g[1], g2);\n    while (n <= km) {\n      g[n] = nbi();\n      z.mulTo(g2, g[n - 2], g[n]);\n      n += 2;\n    }\n  }\n  var j = e.t - 1,\n    w,\n    is1 = true,\n    r2 = nbi(),\n    t;\n  i = nbits(e[j]) - 1;\n  while (j >= 0) {\n    if (i >= k1) w = e[j] >> i - k1 & km;else {\n      w = (e[j] & (1 << i + 1) - 1) << k1 - i;\n      if (j > 0) w |= e[j - 1] >> this.DB + i - k1;\n    }\n    n = k;\n    while ((w & 1) == 0) {\n      w >>= 1;\n      --n;\n    }\n    if ((i -= n) < 0) {\n      i += this.DB;\n      --j;\n    }\n    if (is1) {\n      // ret == 1, don\'t bother squaring or multiplying it\n      g[w].copyTo(r);\n      is1 = false;\n    } else {\n      while (n > 1) {\n        z.sqrTo(r, r2);\n        z.sqrTo(r2, r);\n        n -= 2;\n      }\n      if (n > 0) z.sqrTo(r, r2);else {\n        t = r;\n        r = r2;\n        r2 = t;\n      }\n      z.mulTo(r2, g[w], r);\n    }\n    while (j >= 0 && (e[j] & 1 << i) == 0) {\n      z.sqrTo(r, r2);\n      t = r;\n      r = r2;\n      r2 = t;\n      if (--i < 0) {\n        i = this.DB - 1;\n        --j;\n      }\n    }\n  }\n  return z.revert(r);\n}\n\n// (public) gcd(this,a) (HAC 14.54)\nfunction bnGCD(a) {\n  var x = this.s < 0 ? this.negate() : this.clone();\n  var y = a.s < 0 ? a.negate() : a.clone();\n  if (x.compareTo(y) < 0) {\n    var t = x;\n    x = y;\n    y = t;\n  }\n  var i = x.getLowestSetBit(),\n    g = y.getLowestSetBit();\n  if (g < 0) return x;\n  if (i < g) g = i;\n  if (g > 0) {\n    x.rShiftTo(g, x);\n    y.rShiftTo(g, y);\n  }\n  while (x.signum() > 0) {\n    if ((i = x.getLowestSetBit()) > 0) x.rShiftTo(i, x);\n    if ((i = y.getLowestSetBit()) > 0) y.rShiftTo(i, y);\n    if (x.compareTo(y) >= 0) {\n      x.subTo(y, x);\n      x.rShiftTo(1, x);\n    } else {\n      y.subTo(x, y);\n      y.rShiftTo(1, y);\n    }\n  }\n  if (g > 0) y.lShiftTo(g, y);\n  return y;\n}\n\n// (protected) this % n, n < 2^26\nfunction bnpModInt(n) {\n  if (n <= 0) return 0;\n  var d = this.DV % n,\n    r = this.s < 0 ? n - 1 : 0;\n  if (this.t > 0) if (d == 0) r = this[0] % n;else for (var i = this.t - 1; i >= 0; --i) r = (d * r + this[i]) % n;\n  return r;\n}\n\n// (public) 1/this % m (HAC 14.61)\nfunction bnModInverse(m) {\n  var ac = m.isEven();\n  if (this.isEven() && ac || m.signum() == 0) return BigInteger.ZERO;\n  var u = m.clone(),\n    v = this.clone();\n  var a = nbv(1),\n    b = nbv(0),\n    c = nbv(0),\n    d = nbv(1);\n  while (u.signum() != 0) {\n    while (u.isEven()) {\n      u.rShiftTo(1, u);\n      if (ac) {\n        if (!a.isEven() || !b.isEven()) {\n          a.addTo(this, a);\n          b.subTo(m, b);\n        }\n        a.rShiftTo(1, a);\n      } else if (!b.isEven()) b.subTo(m, b);\n      b.rShiftTo(1, b);\n    }\n    while (v.isEven()) {\n      v.rShiftTo(1, v);\n      if (ac) {\n        if (!c.isEven() || !d.isEven()) {\n          c.addTo(this, c);\n          d.subTo(m, d);\n        }\n        c.rShiftTo(1, c);\n      } else if (!d.isEven()) d.subTo(m, d);\n      d.rShiftTo(1, d);\n    }\n    if (u.compareTo(v) >= 0) {\n      u.subTo(v, u);\n      if (ac) a.subTo(c, a);\n      b.subTo(d, b);\n    } else {\n      v.subTo(u, v);\n      if (ac) c.subTo(a, c);\n      d.subTo(b, d);\n    }\n  }\n  if (v.compareTo(BigInteger.ONE) != 0) return BigInteger.ZERO;\n  if (d.compareTo(m) >= 0) return d.subtract(m);\n  if (d.signum() < 0) d.addTo(m, d);else return d;\n  if (d.signum() < 0) return d.add(m);else return d;\n}\nvar lowprimes = [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97, 101, 103, 107, 109, 113, 127, 131, 137, 139, 149, 151, 157, 163, 167, 173, 179, 181, 191, 193, 197, 199, 211, 223, 227, 229, 233, 239, 241, 251, 257, 263, 269, 271, 277, 281, 283, 293, 307, 311, 313, 317, 331, 337, 347, 349, 353, 359, 367, 373, 379, 383, 389, 397, 401, 409, 419, 421, 431, 433, 439, 443, 449, 457, 461, 463, 467, 479, 487, 491, 499, 503, 509];\nvar lplim = (1 << 26) / lowprimes[lowprimes.length - 1];\n\n// (public) test primality with certainty >= 1-.5^t\nfunction bnIsProbablePrime(t) {\n  var i,\n    x = this.abs();\n  if (x.t == 1 && x[0] <= lowprimes[lowprimes.length - 1]) {\n    for (i = 0; i < lowprimes.length; ++i) if (x[0] == lowprimes[i]) return true;\n    return false;\n  }\n  if (x.isEven()) return false;\n  i = 1;\n  while (i < lowprimes.length) {\n    var m = lowprimes[i],\n      j = i + 1;\n    while (j < lowprimes.length && m < lplim) m *= lowprimes[j++];\n    m = x.modInt(m);\n    while (i < j) if (m % lowprimes[i++] == 0) return false;\n  }\n  return x.millerRabin(t);\n}\n\n// (protected) true if probably prime (HAC 4.24, Miller-Rabin)\nfunction bnpMillerRabin(t) {\n  var n1 = this.subtract(BigInteger.ONE);\n  var k = n1.getLowestSetBit();\n  if (k <= 0) return false;\n  var r = n1.shiftRight(k);\n  t = t + 1 >> 1;\n  if (t > lowprimes.length) t = lowprimes.length;\n  var a = nbi();\n  for (var i = 0; i < t; ++i) {\n    a.fromInt(lowprimes[i]);\n    var y = a.modPow(r, this);\n    if (y.compareTo(BigInteger.ONE) != 0 && y.compareTo(n1) != 0) {\n      var j = 1;\n      while (j++ < k && y.compareTo(n1) != 0) {\n        y = y.modPowInt(2, this);\n        if (y.compareTo(BigInteger.ONE) == 0) return false;\n      }\n      if (y.compareTo(n1) != 0) return false;\n    }\n  }\n  return true;\n}\n\n// protected\nBigInteger.prototype.chunkSize = bnpChunkSize;\nBigInteger.prototype.toRadix = bnpToRadix;\nBigInteger.prototype.fromRadix = bnpFromRadix;\nBigInteger.prototype.fromNumber = bnpFromNumber;\nBigInteger.prototype.bitwiseTo = bnpBitwiseTo;\nBigInteger.prototype.changeBit = bnpChangeBit;\nBigInteger.prototype.addTo = bnpAddTo;\nBigInteger.prototype.dMultiply = bnpDMultiply;\nBigInteger.prototype.dAddOffset = bnpDAddOffset;\nBigInteger.prototype.multiplyLowerTo = bnpMultiplyLowerTo;\nBigInteger.prototype.multiplyUpperTo = bnpMultiplyUpperTo;\nBigInteger.prototype.modInt = bnpModInt;\nBigInteger.prototype.millerRabin = bnpMillerRabin;\n\n// public\nBigInteger.prototype.clone = bnClone;\nBigInteger.prototype.intValue = bnIntValue;\nBigInteger.prototype.byteValue = bnByteValue;\nBigInteger.prototype.shortValue = bnShortValue;\nBigInteger.prototype.signum = bnSigNum;\nBigInteger.prototype.toByteArray = bnToByteArray;\nBigInteger.prototype.equals = bnEquals;\nBigInteger.prototype.min = bnMin;\nBigInteger.prototype.max = bnMax;\nBigInteger.prototype.and = bnAnd;\nBigInteger.prototype.or = bnOr;\nBigInteger.prototype.xor = bnXor;\nBigInteger.prototype.andNot = bnAndNot;\nBigInteger.prototype.not = bnNot;\nBigInteger.prototype.shiftLeft = bnShiftLeft;\nBigInteger.prototype.shiftRight = bnShiftRight;\nBigInteger.prototype.getLowestSetBit = bnGetLowestSetBit;\nBigInteger.prototype.bitCount = bnBitCount;\nBigInteger.prototype.testBit = bnTestBit;\nBigInteger.prototype.setBit = bnSetBit;\nBigInteger.prototype.clearBit = bnClearBit;\nBigInteger.prototype.flipBit = bnFlipBit;\nBigInteger.prototype.add = bnAdd;\nBigInteger.prototype.subtract = bnSubtract;\nBigInteger.prototype.multiply = bnMultiply;\nBigInteger.prototype.divide = bnDivide;\nBigInteger.prototype.remainder = bnRemainder;\nBigInteger.prototype.divideAndRemainder = bnDivideAndRemainder;\nBigInteger.prototype.modPow = bnModPow;\nBigInteger.prototype.modInverse = bnModInverse;\nBigInteger.prototype.pow = bnPow;\nBigInteger.prototype.gcd = bnGCD;\nBigInteger.prototype.isProbablePrime = bnIsProbablePrime;\n\n// BigInteger interfaces not implemented in jsbn:\n\n// BigInteger(int signum, byte[] magnitude)\n// double doubleValue()\n// float floatValue()\n// int hashCode()\n// long longValue()\n// static BigInteger valueOf(long val)'},function(e,t,n){n(1)(n(29))},function(e,t){e.exports='var url = null; //xyz servlet\nvar app_name = \'\';\nvar initialized = 0;\nvar debug = false; //don\'t submit login just show if it works or not\nvar XYZ = true; //use XYZ or fail to old authentication\nvar submit_form = false;\nvar acct_id = null;\nvar user_name = null;\nvar complete_authentication = false;\nvar complete_confirm_token = false;\nvar is_two_factor_user = false;\n//pteng used to identify the user as second factor. used by WT to redirect to login on disconnect\nvar twoFactorUser = false;\nvar suppLongPwd = false;\nvar userSfTypes = [];\nvar selectedSF = null;\n\n//default to 512 bit value\nvar N = parseBigInt("d4c7f8a2b32c11b8fba9581ec4ba4f1b04215642ef7355e37c0fc0443ef756ea2c6b8eeb755a1c723027663caa265ef785b8ff6a9b35227a52d86633dbdfca43", 16);\nvar g = parseBigInt("2", 10);\nvar a = null;\nvar A = null;\nvar B = null;\nvar k = null;\nvar x = null;\nvar u = null;\nvar K = null;\nvar M = 0;\nvar M2 = null;\nvar salt = null;\nvar rng = null;\nvar Sc = null;\nvar one;\nvar two;\nvar three;\nvar radix = 16;\nvar proto = "6"; // 3 or 6 or 6a\nvar hash = "SHA1";\nvar startTime = null; //measure time of execution start\nvar endTime = null; //measure time of execution end\n\nvar INITIATED = "INITIATED"; //starting authentication submitting username\nvar INITIALIZED = "INITIALIZED"; //username submitted\nvar INPROCESS = "INPROCESS"; //submitted M1\nvar AUTHENTICATED = "AUTHENTICATED"; //allok\nvar FAILEDAUTH = "FAILEDAUTH"; //failed\nvar STATE = null;\nvar NULL = null; //<-- added\nvar twoFactType = null; //what type of two factor is used\nvar towFactChlg = null;\nvar submit_enckx = false;\n\n//PHONE AUTH VARIABLES\n//3 minutes\n//var PHONE_AUTH_POLLING_TIMEOUT = 180000;\nvar PUSH_AUTH_MAX_ATTEMPTS = 36; //36*5s = 180s=3min\nvar PUSH_AUTH_ATTEMPTS = 0;\n//5 seconds\nvar PUSH_CHECK_AUTH_INTERVAL = 5000;\n//POLLING URL\nvar PUSH_AUTH_POLLING_URL = \'\';\nvar PUSH_AUTH_STATE = \'INVALID\';\nvar PUSH_AUTH_INSTRUCTIONS = \'A message has been sent to your phone. Tap the link to complete secondary authentication.<br>\';\nvar PUSH_AUTH_ALT_LINK = \'Click here if you did not receive the message.\';\nvar PUSH_TIMEOUT_MSG = \'Error Two Factor Authentication Timed out.\';\nvar pushTimeout;\nvar VERSION = 0;\n\n//Local storage key\nvar SELECTED_SF_KEY = "SELECTED_SF";\n//URL param to reset LS\nvar RESET_KEY = "resetSF";\n//SF types\nvar SSC = "3";\nvar IBKEY_ANDROID = "5.2a";\nvar IBKEY_IOS = "5.2i";\nvar BANK_KEY = "5.3";\nvar DSC = "4.1";\nvar ALPINE = "4";\nvar DSC_PLUS = "5.1";\nvar PLAT_GOLD = "5";\nvar TSC = "6";\nvar SMS = "4.2";\nvar SF_NAMES = {};\nSF_NAMES[SSC] = "Security Code Card";\nSF_NAMES[IBKEY_ANDROID] = "IB Key";\nSF_NAMES[IBKEY_IOS] = "IB Key";\nSF_NAMES[BANK_KEY] = "Bank Key";\nSF_NAMES[DSC] = "Digital Security Card";\nSF_NAMES[ALPINE] = "Alpine Device";\nSF_NAMES[DSC_PLUS] = "Digital Security Card+";\nSF_NAMES[PLAT_GOLD] = "Platinum/Gold";\nSF_NAMES[TSC] = "Temporary Security Code";\nSF_NAMES[SMS] = "One Time Passcode";\nvar tempServerS2 = "";\nwindow.IBSSO = window.IBSSO || {};\nIBSSO.MESSAGES = IBSSO.MESSAGES || {};\nIBSSO.CONSTANT = IBSSO.CONSTANT || {};\nIBSSO.MESSAGES.LIVE_ACCOUNT_WITH_PAPER_TRADING = "You have selected the Live Account Mode, but the specified user is a Paper Trading user. Please select the correct Login mode.";\nIBSSO.isPaper = IBSSO.isPaper || {};\nIBSSO.CONSTANT.LOGIN_TYPE_PROD = 1;\nIBSSO.CONSTANT.LOGIN_TYPE_PAPER = 2;\nIBSSO.CONSTANT.SECOND_FACTOR_TYPE_OTP = "4.2";\nIBSSO.CONSTANT.OTP_DELIVERY_TYPE_SMS = 1;\nIBSSO.CONSTANT.OTP_DELIVERY_TYPE_VOICE = 2;\nIBSSO.CONSTANT.OTP_DELIVERY_TYPE_EMAIL = 4;\n\n// https://prod.ibkr-web.com/ibjira/browse/AUTHSRVR-285\nIBSSO.otpSelectTimer = null;\nIBSSO.otpSelectTimerTimeout = 60 * 1000; //60sec\n\nvar loadingCallback = function loadingCallback() {\n  //Quick check for url parameter to reset local store\n  var resetSF = getParam(RESET_KEY);\n  if (resetSF && resetSF == "true") {\n    localStorage.setItem(SELECTED_SF_KEY, "");\n  }\n  if (typeof SF_VERSION != "undefined" && SF_VERSION) {\n    VERSION = SF_VERSION;\n  }\n};\nvar specialPushAuthRequest;\nvar specialCompleteAuth_1;\nif (document.readyState === "complete" || document.readySate !== "loading" && !document.documentElement.doScroll) {\n  loadingCallback();\n} else {\n  document.addEventListener("DOMContentLoaded", loadingCallback);\n}\n//ibkey recovery variables\n\nvar MODE_NORMAL = "NORMAL";\nvar MODE_IBKEY_RECOVERY = "IBKEY_RECOVERY";\nvar MODE = MODE_NORMAL;\nfunction isync_radix() {\n  radix = 16;\n}\nfunction isync_proto() {\n  proto = "6";\n}\nfunction parseBigInt(str, r) {\n  return new BigInteger(str, r);\n}\nfunction bigInt2radix(bi, radix) {\n  return bi.toString(radix);\n}\nfunction randomBigInt(bytes) {\n  if (rng == null) {\n    rng = new SecureRandom();\n  }\n  return new BigInteger(8 * bytes, rng);\n}\nfunction str2BigInt(str) {\n  return parseBigInt(str, radix);\n}\nfunction bigInt2Str(bi) {\n  return bigInt2radix(bi, radix);\n}\n\n/* Returns a string with n zeroes in it */\nfunction nzero(n) {\n  if (n < 1) {\n    return "";\n  }\n  var t = nzero(n >> 1);\n  if ((n & 1) == 0) {\n    return t + t;\n  } else {\n    return t + t + "0";\n  }\n}\nfunction set_random_a() {\n  a = randomBigInt(32);\n  if (a.compareTo(N) >= 0) {\n    a = a.mod(N.subtract(one));\n  }\n  if (a.compareTo(two) < 0) {\n    a = two;\n  }\n  //for tests keep it static\n  // a = parseBigInt("222444666",16);\n}\nfunction randomize_a() {\n  set_random_a();\n  recalc_A();\n}\nfunction recalc_A() {\n  A = g.modPow(a, N);\n}\nfunction recalc_k() {\n  k = xyz_compute_k(N, g);\n}\nfunction recalc_K() {\n  // writeDebug("recalc_K Sc = "+bigInt2radix(Sc,16));\n  K = xyz_compute_K(Sc);\n  // writeDebug("recalc_K K = "+K);\n}\nfunction recalc_M() {\n  M = xyz_compute_M1(N, g, user_name, salt, A, B, K);\n  // writeDebug("recalc_M M = "+M);\n}\nfunction recalc_M2() {\n  M2 = xyz_compute_M2(A, M, K);\n}\nfunction recalc_x() {\n  // writeDebug("recalc_x  user = "+getUserName());\n  // writeDebug("recalc_x  pass = "+getPassword());\n  // writeDebug("recalc_x  salt = "+bigInt2radix(salt,16));\n  x = xyz_compute_x(getUserName(), getPassword(), salt);\n  // writeDebug("recalc_x x = "+bigInt2radix(x ,16));\n}\nfunction recalc_Sc() {\n  // writeDebug("recalc_Sc B = "+bigInt2radix(B, 16));\n  // writeDebug("recalc_Sc x = "+bigInt2radix(x, 16));\n  // writeDebug("recalc_Sc u = "+bigInt2radix(u, 16));\n  // writeDebug("recalc_Sc a = "+bigInt2radix(a, 16));\n  // writeDebug("recalc_Sc k = "+bigInt2radix(k, 16));\n  Sc = xyz_compute_client_S(B, x, u, a, k);\n  // writeDebug("recalc_Sc Sc = "+bigInt2radix(Sc, 16));\n}\nfunction recalc_u() {\n  // writeDebug("recalc_u N = "+bigInt2radix(N,16));\n  // writeDebug("recalc_u A = "+bigInt2radix(A, 16));\n  // writeDebug("recalc_u B = "+bigInt2radix(B, 16));\n  u = xyz_compute_u(N, A, B);\n  // writeDebug("recalc_u u = "+u);\n}\nfunction recalc_v() {\n  // writeDebug("recalc_v g = "+g);\n  // writeDebug("recalc_v x = "+x);\n  var v = xyz_compute_v(g, x);\n  // writeDebug("recalc_v v = "+v);\n}\n\n/* S = (B - kg^x) ^ (a + ux) (mod N) */\nfunction xyz_compute_client_S(BB, xx, uu, aa, kk) {\n  var bx = g.modPow(xx, N);\n  var btmp = BB.add(N.multiply(kk)).subtract(bx.multiply(kk)).mod(N);\n  return btmp.modPow(xx.multiply(uu).add(aa), N);\n}\nfunction xyz_compute_k(NN, gg) {\n  var hashin = "";\n  var nhex;\n  var ghex;\n  var ktmp;\n  if (proto == "3") return one;else if (proto == "6") return three;else {\n    /* XYZ-6a: k = H(N || g) */\n    nhex = String(bigInt2radix(NN, 16));\n    if ((nhex.length & 1) == 0) {\n      hashin += nhex;\n    } else {\n      hashin += "0" + nhex;\n    }\n    ghex = String(bigInt2radix(gg, 16));\n    hashin += nzero(nhex.length - ghex.length);\n    hashin += ghex;\n    ktmp = parseBigInt(calcSHA1Hex(hashin), 16);\n    if (ktmp.compareTo(NN) < 0) {\n      return ktmp;\n    } else {\n      return ktmp.mod(NN);\n    }\n  }\n}\n\n/* x = H(salt || H(username || ":" || password)) */\nfunction xyz_compute_x(u, p, s) {\n  // Inner hash: SHA-1(username || ":" || password)\n  var ih = calcSHA1(u + ":" + p);\n  // Outer hash: SHA-1(salt || inner_hash)\n  // This assumes that the hex salt string has an even number of characters...\n  //original\n  //var oh = calcSHA1Hex(bigInt2radix(s, 16) + ih);\n  //this makes sure that hex salt string has an even number of characters, kt ...\n  var oh = calcSHA1Hex(verifyHexVal(s) + ih);\n  var xtmp = parseBigInt(oh, 16);\n  if (xtmp.compareTo(N) < 0) {\n    return xtmp;\n  } else {\n    return xtmp.mod(N.subtract(one));\n  }\n}\n\n/*\n * XYZ-3: u = first 32 bits (MSB) of SHA-1(B)\n * XYZ-6(a): u = SHA-1(A || B)\n */\n\nfunction xyz_compute_u(Nv, av, bv) {\n  var ahex;\n  var bhex = String(bigInt2radix(bv, 16));\n  var hashin = "";\n  var utmp;\n  var nlen;\n  if (proto != "3") {\n    ahex = String(bigInt2radix(av, 16));\n    if (proto == "6") {\n      if ((ahex.length & 1) == 0) {\n        hashin += ahex;\n      } else {\n        hashin += "0" + ahex;\n      }\n    } else {\n      /* 6a requires left-padding */\n      nlen = 2 * (Nv.bitLength() + 7 >> 3);\n      hashin += nzero(nlen - ahex.length) + ahex;\n    }\n  }\n  if (proto == "3" || proto == "6") {\n    if ((bhex.length & 1) == 0) {\n      hashin += bhex;\n    } else {\n      hashin += "0" + bhex;\n    }\n  } else {\n    /* 6a requires left-padding; nlen already set above */\n    hashin += nzero(nlen - bhex.length) + bhex;\n  }\n  if (proto == "3") {\n    utmp = parseBigInt(calcSHA1Hex(hashin).substr(0, 8), 16);\n  } else {\n    utmp = parseBigInt(calcSHA1Hex(hashin), 16);\n  }\n  if (utmp.compareTo(Nv) < 0) {\n    return utmp;\n  } else {\n    return utmp.mod(Nv.subtract(one));\n  }\n}\n\n/* K = H(S) */\nfunction xyz_compute_K(SS) {\n  var tmpk = calcSHA1Hex(verifyHexVal(SS));\n  // writeDebug("xyz_compute_K K = "+tmpk);\n  return tmpk;\n}\n\n// M = H(A,B,K) */\nfunction xyz_compute_M_old(AI, BI, KI) {\n  var hashin = "";\n  hashin += String(bigInt2radix(verifyHexVal(AI), 16));\n  hashin += String(bigInt2radix(verifyHexVal(BI), 16));\n  hashin += String(bigInt2radix(verifyHexVal(KI), 16));\n  return calcSHA1Hex(hashin);\n}\n\n// M1 = H( H(N) xor H(g), H(I), s, A,B,K) */\nfunction xyz_compute_M1(NI, gI, uI, sI, AI, BI, KI) {\n  var hashin = "";\n  //  writeDebug("xyz_compute_M1 N: "+NI);\n  var h_n = calcSHA1Hex(bigInt2radix(verifyHexVal(NI), 16));\n  // writeDebug("xyz_compute_M1 h_n: "+h_n);\n  //  writeDebug("xyz_compute_M1 g: "+gI);\n\n  var h_g = calcSHA1Hex(bigInt2radix(verifyHexVal(gI), 16));\n  // writeDebug("xyz_compute_M1 h_g: "+h_g);\n  h_n = parseBigInt(verifyHexVal(h_n), 16);\n  h_g = parseBigInt(verifyHexVal(h_g), 16);\n  var h_xor = verifyHexVal(bigInt2radix(h_n.xor(h_g), 16));\n  // writeDebug("xyz_compute_M1 xor: "+h_xor);\n\n  // writeDebug("xyz_compute_M1 username: "+uI);\n  var h_I = calcSHA1(uI);\n  // writeDebug("xyz_compute_M1 h_I: "+h_I);\n\n  var shex = verifyHexVal(sI);\n  // writeDebug("xyz_compute_M1 s_hex: "+shex);\n  // writeDebug("xyz_compute_M1 AI : "+bigInt2radix(verifyHexVal(AI), 16));\n  // writeDebug("xyz_compute_M1 BI : "+bigInt2radix(verifyHexVal(BI), 16));\n  // writeDebug("xyz_compute_M1 KI : "+bigInt2radix(verifyHexVal(KI), 16));\n\n  hashin += h_xor;\n  hashin += h_I;\n  hashin += shex;\n  hashin += String(bigInt2radix(verifyHexVal(AI), 16));\n  hashin += String(bigInt2radix(verifyHexVal(BI), 16));\n  hashin += String(bigInt2radix(verifyHexVal(KI), 16));\n  // writeDebug("xyz_compute_M1 hashin= "+hashin);\n  return verifyHexVal(calcSHA1Hex(hashin));\n}\nfunction xyz_compute_M2(AI, MI, KI) {\n  //alert("A: "+AI+"\\nMI: "+MI+"\\nKI: "+KI);\n  var hashin = "";\n  hashin += String(bigInt2radix(verifyHexVal(AI), 16));\n  hashin += String(bigInt2radix(verifyHexVal(MI), 16));\n  hashin += String(bigInt2radix(verifyHexVal(KI), 16));\n  return calcSHA1Hex(hashin);\n}\n\n/* v = g^x */\nfunction xyz_compute_v(gi, xi) {\n  return gi.modPow(xi, N);\n}\n\n/* this makes sure it is even number  */\nfunction verifyHexVal(HV) {\n  var hashin = "";\n  var bhex = String(bigInt2radix(HV, 16));\n  if ((bhex.length & 1) == 0) {\n    hashin += bhex;\n  } else {\n    hashin += "0" + bhex;\n  }\n\n  //20061106\n  if (hashin.charAt(0) == "0" && hashin.charAt(1) == "0") {\n    hashin = hashin.substring(2, hashin.length);\n  }\n  return hashin;\n}\nfunction set_radix(r) {\n  radix = r;\n}\nfunction set_proto(p) {\n  proto = p;\n  recalc_k();\n}\n\n//read url params\nfunction getParam(param) {\n  var location = window.location.search;\n  var parArr = location.split(\'?\').length == 2 ? location.split(\'?\')[1].split("&") : [];\n  for (var i = 0; i < parArr.length; i++) {\n    parr = parArr[i].split(\'=\');\n    if (parr[0] == param) {\n      return parr[1];\n    }\n  }\n}\nfunction xyz_initialize() {\n  rng_seed_time();\n  if (initialized > 0) {\n    return;\n  }\n  one = parseBigInt("1", 16);\n  two = parseBigInt("2", 16);\n  three = parseBigInt("3", 16);\n  randomize_a();\n  initialized = 1;\n}\nvar userNameFocused = false;\nvar passwordFocused = false;\nvar forceUserNameFocused = false;\nvar forcePasswordFocused = false;\nvar userNameEnterPressed = false;\nfunction focusElsewhereFirst() {\n  document.getElementById("submitForm").focus(); //<-- As a work around to deal with hidden focus problem\n}\nfunction focusUserName() {\n  if (!userNameFocused && !forcePasswordFocused) {\n    writeDebug("##focusUserName");\n    document.getElementById(user_field_id).focus();\n    userNameFocused = true;\n    passwordFocused = false;\n  }\n}\nfunction focusPassword() {\n  if (!passwordFocused && !forceUserNameFocused) {\n    writeDebug("##focusPassword");\n    document.getElementById(pass_field_id).focus();\n    passwordFocused = true;\n    userNameFocused = false;\n  }\n}\nfunction forceFocusUserName() {\n  writeDebug("##forceFocusUserName: " + STATE);\n  showErrorMessage(error_field_id, "");\n  forceUserNameFocused = true;\n  forcePasswordFocused = false;\n  document.getElementById(user_field_id).focus();\n}\nfunction forceFocusPassword() {\n  writeDebug("##forceFocusPassword: " + STATE);\n  showErrorMessage(error_field_id, "");\n  forceUserNameFocused = false;\n  forcePasswordFocused = true;\n  document.getElementById(pass_field_id).focus();\n}\nfunction enableUserNameSubmit() {\n  writeDebug("enableUserNameSubmit: " + STATE);\n  document.getElementById("submitForm").disabled = false;\n  return true;\n}\nfunction handleUserNameEvent(evt) {\n  evt = evt ? evt : event;\n  var charCode = evt.charCode ? evt.charCode : evt.which ? evt.which : evt.keyCode;\n  if (charCode == 13 || charCode == 3) {\n    writeDebug("*** username enter pressed " + charCode);\n    userNameEnterPressed = true;\n    complete_authentication = false;\n    passwordFocused = false;\n    forceUserNameFocused = false;\n    focusPassword();\n  }\n  return false;\n}\nfunction initAuthentication(in_user_id, in_error_id) {\n  writeDebug("initAuthentication: " + STATE);\n\n  //initAuthentication() requires xyz_initialize() to have completed successfully\n  if (initialized === 0) {\n    writeDebug("Warning: initAuthentication() called before xyz_initialize(). Calling xyz_initialize() now.");\n    xyz_initialize();\n  }\n  setUserFieldId(in_user_id);\n  setErrorFieldId(in_error_id);\n  if (user_name != null && user_name != getUserName()) {\n    writeDebug("user_name != getUserName: " + STATE);\n    STATE = null;\n    XYZ = true;\n  } else if (user_name != null && user_name == getUserName() && STATE != FAILEDAUTH) {\n    writeDebug("user_name == getUserName: " + STATE);\n    return false;\n  }\n\n  //alert("initAuthentication");\n\n  user_name = getUserName();\n  acct_id = getAcctId();\n  force_login = getForceLogin();\n  if (user_name == null || user_name == "") {\n    //showErrorMessage(error_field_id,"Enter username");\n    return false;\n  } else {\n    //showErrorMessage(error_field_id,"");\n  }\n  if (STATE == INITIATED) {\n    return false;\n  }\n  writeDebug("initAuthentication 2 : " + STATE);\n  STATE = INITIATED;\n  var login_type = getLoginType();\n  var params = "ACTION=INIT&APP_NAME=" + app_name + "&MODE=" + MODE + "&FORCE_LOGIN=" + force_login + "&USER=" + user_name + "&ACCT=" + acct_id + "&A=" + bigInt2Str(A);\n  if (login_type) {\n    params += "&LOGIN_TYPE=" + login_type;\n  }\n  var loader = new xhr.ContentLoader("POST", url, true, initHandler, params);\n}\nfunction processError(root, from) {\n  if (root != null && root.getElementsByTagName("error") != null && root.getElementsByTagName("error").length > 0) {\n    var message = root.getElementsByTagName("error")[0].firstChild.nodeValue;\n    //send separately link that has \'LINK_S\' and \'LINK_E\'\n    if (root.getElementsByTagName("link").length > 0) {\n      var url = root.getElementsByTagName("link")[0].firstChild.nodeValue;\n      message = message.replace("LINK_E", "</a>");\n      message = message.replace("LINK_S", "<a href=\'" + url + "\'>");\n    }\n    if (message == "unknown") {\n      if (getPassword().length > 0) {\n        showErrorMessage(error_field_id, "Invalid username password combination");\n        clearUserName();\n        clearPassword();\n        usernameFocus();\n      }\n    } else if (from === "initHandler" && message === "Invalid username password combination") {\n      writeDebug("processError - Do not display error message with empty password");\n      // Do not display this error message if password field is empty\n      // see https://prod.ibkr-web.com/ibjira/browse/IGAME-1244\n    } else {\n      showErrorMessage(error_field_id, message);\n    }\n    STATE = null;\n    return true;\n  }\n  return false;\n}\nfunction initHandler() {\n  writeDebug("initHandler : " + STATE);\n  if (!this.req || !this.req.responseXML) {\n    return false;\n  }\n  var root = this.req.responseXML.documentElement;\n  if (processError(root, "initHandler")) {\n    return false;\n  } else if (this.req.responseText.indexOf("RESPONSEPENDING") != -1) {\n    return false;\n  }\n  var default_param = true;\n  if (!root.getElementsByTagName("user") || !root.getElementsByTagName("user")[0]) {\n    return false;\n  }\n  var user = root.getElementsByTagName("user")[0].firstChild.nodeValue;\n  if (user != "true") {\n    //in transitional period switch to use old type authentication\n    XYZ = false;\n    var isloginform = xyz_form_id == "loginform";\n    if (!isloginform) {\n      showErrorMessage(error_field_id, "Invalid username password combination");\n      return false;\n    } else {\n      return true;\n    }\n  }\n  try {\n    if (root.getElementsByTagName("paper").length > 0) {\n      var paper = root.getElementsByTagName("paper")[0].firstChild.nodeValue;\n      var user = getUserName();\n      if (user && paper) {\n        // save isPaper state for username\n        IBSSO.isPaper[user] = paper === "true";\n      }\n    }\n  } catch (e) {}\n  var newg = root.getElementsByTagName("g")[0].firstChild.nodeValue;\n  var newN = root.getElementsByTagName("N")[0].firstChild.nodeValue;\n  proto = root.getElementsByTagName("proto")[0].firstChild.nodeValue;\n  hash = root.getElementsByTagName("hash")[0].firstChild.nodeValue;\n  salt = parseBigInt(root.getElementsByTagName("s")[0].firstChild.nodeValue, 16);\n  B = parseBigInt(root.getElementsByTagName("B")[0].firstChild.nodeValue, 16);\n  try {\n    suppLongPwd = "true" === root.getElementsByTagName("lp")[0].firstChild.nodeValue;\n  } catch (err) {\n    suppLongPwd = false;\n  } //default not provided\n\n  if (root.getElementsByTagName("rsapub") != null && root.getElementsByTagName("rsapub").length > 0 && root.getElementsByTagName("rsapub")[0].firstChild != null) {\n    submit_enckx = true;\n    rsa = new RSAKey();\n    rsa.setPublic(root.getElementsByTagName("rsapub")[0].firstChild.nodeValue, \'3\');\n  }\n  if (root.getElementsByTagName("info") != null && root.getElementsByTagName("info").length > 0 && root.getElementsByTagName("info")[0].firstChild != null) {\n    var message = root.getElementsByTagName("info")[0].firstChild.nodeValue;\n    showErrorMessage("info", message);\n  }\n  if (!g.equals(parseBigInt(newg, 10))) {\n    default_param = false;\n    g = parseBigInt(newg, 10);\n  }\n  if (!N.equals(parseBigInt(newN, 16))) {\n    default_param = false;\n    N = parseBigInt(newN, 16);\n  }\n  if (!default_param) {\n    STATE = NULL;\n    initAuthentication();\n    return false;\n  }\n  recalc_k();\n  STATE = INITIALIZED;\n  writeDebug("initHandler complete_authentication: " + complete_authentication + " STATE: " + STATE);\n  if (complete_authentication) {\n    writeDebug("** completeAuthentication invoked from initHandler");\n    completeAuthentication();\n  } else {\n    if (!bypass_empty_field) {\n      writeDebug("initHandler focusPassword");\n      focusPassword();\n    }\n  }\n}\nfunction completeAuthentication(in_passw_id, in_error_id) {\n  if (!bypass_empty_field) {\n    if (!complete_authentication) {\n      return false;\n    }\n  }\n  writeDebug("completeAuthentication: " + STATE);\n  setPasswFieldId(in_passw_id);\n  setErrorFieldId(in_error_id);\n  var counter = 0;\n  //here logic is like this if it is not INITIALIZED it is probobly due to 2 reasons:\n  // 1. server has not responded (when it will respond complete auth.\n  // 2. STATE == null - in this case run init and the whole authentication from beginning.\n  if (!XYZ) {\n    return true;\n  } //this user doesn\'t have XYZ use old authentication\n\n  if (STATE == null || STATE == FAILEDAUTH) {\n    //(STATE !=INITIATED && STATE != INITIALIZED && STATE != INPROCESS && STATE != AUTHENTICATED )){\n    complete_authentication = false;\n    initAuthentication(); //do the whole thing;\n    return false;\n  }\n  if (STATE == INITIATED) {\n    //this if submit form is entered and server hasn\'t come back with xyz params\n    complete_authentication = true;\n    return false;\n  }\n  if (STATE == INPROCESS) {\n    //there is already thread running wait till it finishes\n    return false;\n  }\n  if (!bypass_empty_field) {\n    if (getPassword() == null || getPassword() == "") {\n      showErrorMessage(error_field_id, "Please enter password");\n      writeDebug("password focus: " + STATE);\n      focusPassword();\n      return false;\n    }\n  }\n  STATE = INPROCESS;\n  showErrorMessage(error_field_id, "");\n  recalc_x();\n  recalc_u();\n  recalc_Sc();\n  recalc_K();\n  recalc_M();\n  var login_type = getLoginType();\n  var params = "ACTION=COMPLETEAUTH&APP_NAME=" + app_name + "&USER=" + user_name + "&ACCT=" + acct_id + "&M1=" + M + "&VERSION=" + VERSION;\n  if (login_type) {\n    params += "&LOGIN_TYPE=" + login_type;\n  }\n  if (submit_enckx) {\n    var ekx = do_encrypt(K);\n    writeDebug("EKX: " + ekx);\n    params += "&EKX=" + ekx;\n  }\n  if (VERSION == 1) {\n    var loader = new xhr.ContentLoader("POST", url, true, completeAuthenticationHandlerV2, params);\n  } else {\n    var loader = new xhr.ContentLoader("POST", url, true, completeAuthenticationHandler, params);\n  }\n  return false;\n}\n\n//second auth step. completeAuthentication() must have been sent previously to generate variables\nfunction completeAuthentication_1() {\n  if (typeof specialCompleteAuth_1 !== "undefined" && typeof specialCompleteAuth_1 === "function") {\n    specialCompleteAuth_1();\n  } else {\n    //addition of SF parameter\n    var params = "ACTION=COMPLETEAUTH_1&APP_NAME=" + app_name + "&USER=" + user_name + "&ACCT=" + acct_id + "&M1=" + M + "&VERSION=" + VERSION + "&SF=" + selectedSF;\n    var loader = new xhr.ContentLoader("POST", url, true, completeAuthenticationHandler, params);\n  }\n}\nfunction completeAuthenticationHandlerV2() {\n  writeDebug("completeAuthenticationHandlerV2: " + STATE + " " + this.req.responseText.length);\n  var root = this.req.responseXML.documentElement;\n  if (this.req.responseText.length == 0 || root.getElementsByTagName("error").length > 0) {\n    var message = root.getElementsByTagName("error")[0].firstChild.nodeValue;\n    showErrorMessage(error_field_id, message);\n    STATE = null;\n    return false;\n  } else if (this.req.responseText.indexOf("RESPONSEPENDING") != -1) {\n    return false;\n  }\n  var pushSent = false;\n  var server_M2 = "";\n  if (root.getElementsByTagName("M2").length > 0) {\n    server_M2 = root.getElementsByTagName("M2")[0].firstChild.nodeValue;\n    tempServerS2 = server_M2;\n  } else {\n    //from previous request take temps2\n    server_M2 = tempServerS2;\n  }\n  var twoFactorType = null;\n  if (root.getElementsByTagName("type").length > 0) {\n    twoFactorType = root.getElementsByTagName("type")[0].firstChild.nodeValue;\n  }\n  try {\n    pushSent = root.getElementsByTagName("push_sent")[0].firstChild.nodeValue === "true";\n  } catch (err) {\n    pushSent = false;\n  } //default not provided\n\n  recalc_M2();\n  complete_authentication = false; //reset to initial state\n  if (server_M2 == M2) {\n    //calculate session key\n    //store it in the cookie\n    var sk = compute_sk(B, K);\n    recordSK(sk);\n    showErrorMessage(error_field_id, "");\n    //if two factor authentication is required, show the form\n\n    twoFactorUser = true;\n\n    //read second factor types\n    if (root.getElementsByTagName("sftypes").length > 0) {\n      //TODO handle/get multiple sf types\n      var sfTypes = root.getElementsByTagName("sftypes")[0].firstChild.nodeValue;\n      userSfTypes = sfTypes.split(\',\');\n      //check length of userSfTypes\n\n      if (userSfTypes && userSfTypes.length == 1) {\n        //single selection and not show second factor list\n        selectedSF = userSfTypes[0];\n        completeAuthentication_1();\n      } else {\n        showSecondFactorList();\n      }\n      return;\n    }\n\n    //get reference to the form\n    //append M1\n    //submit the form\n\n    STATE = AUTHENTICATED;\n\n    //Added by snarayan for \'Confirm Token Action\'\n    if (complete_confirm_token && !is_two_factor_user) {\n      randomizePassword();\n      var user_name = getUserName();\n      var token = fortifyFilterOpenRedirect(document.getElementById("token").value);\n      complete_confirm_token = false;\n      //if(getIfMultiUser() == "true" ) {\n      //  var myparams = "token="+token+"&ACTION=CONFIRMREQUESTWITHAUTHTOKEN&APP_NAME="+app_name+"&user_name="+user_name;\n      //  generalAjaxQuery(url, myparams);\n      //  return true;\n      //} else {\n      //    var myparams = "token="+token+"&ACTION=CONFIRMREQUEST&APP_NAME="+app_name+"&user_name="+user_name;\n      //    generalAjaxQuery(url, myparams);\n      //    return true;\n      //}\n\n      //Display all the signature parts for ACH signature\n      var signatures = document.getElementsByName("signatures");\n      var signatures_str = "";\n      if (signatures != null) {\n        showErrorMessage("ACHERRORMSG", "");\n        //signatures_str = "&signaturelength="+signatures.length;\n\n        for (var i = 0; i < signatures.length; i++) {\n          //alert("signatures: "+signatures[i].value);\n          signatures_str = signatures_str + "&signatures" + i + "=" + escape(signatures[i].value);\n        }\n        signatures_str = "&signaturelength=" + signatures.length + signatures_str;\n        //alert(signatures_str);\n      }\n      if (getIfMultiUser() == "true") {\n        var myparams = "token=" + token + "&ACTION=CONFIRMREQUESTWITHAUTHTOKEN&APP_NAME=" + app_name + "&user_name=" + user_name;\n        if (signatures != null) {\n          myparams = myparams + signatures_str;\n        }\n        generalAjaxQuery(url, myparams);\n      } else {\n        var myparams = "token=" + token + "&ACTION=CONFIRMREQUEST&APP_NAME=" + app_name + "&user_name=" + user_name;\n        if (signatures != null) {\n          myparams = myparams + signatures_str;\n        }\n        generalAjaxQuery(url, myparams);\n      }\n    }\n    //End of add by snarayan\n\n    if (debug) {\n      showErrorMessage(error_field_id, "");\n      return true;\n    }\n    var my_form = document.getElementById(xyz_form_id);\n    //handle login\n    //alert(" before my_form != null "+STATE);\n\n    if (my_form != null) {\n      appendM1andM2(xyz_form_id);\n      //this form logs in\n      if (submit_form) {\n        //alert(" submitting my form "+STATE);\n\n        randomizePassword();\n        xyzLoginformSubmit(my_form);\n      }\n    }\n    return true;\n  } else {\n    if (root.getElementsByTagName("reached_max_login") != null && root.getElementsByTagName("reached_max_login")[0] != null && root.getElementsByTagName("reached_max_login")[0].firstChild != null) {\n      var reached_max_login = root.getElementsByTagName("reached_max_login")[0].firstChild.nodeValue;\n      if (reached_max_login == "true") {\n        var my_form = document.getElementById(xyz_form_id);\n        showErrorMessage(error_field_id, "Invalid username password combination, reached max limit. Redirecting...");\n        xyzLoginformSubmit(my_form);\n      }\n    }\n    showErrorMessage(error_field_id, "Invalid username password combination");\n    STATE = FAILEDAUTH;\n    clearUserName();\n    clearPassword();\n    usernameFocus();\n    return false;\n  }\n}\nfunction onChangeSelectSF(el) {\n  //make request for second factor\n  var value = el.value;\n  //check value isn\'t blank\n  if (value == "") {\n    return;\n  }\n  selectedSF = value;\n  //set local store\n  localStorage.setItem(SELECTED_SF_KEY, selectedSF);\n  //display/forward to handle of second factor\n  completeAuthentication_1();\n}\nfunction showSecondFactorList() {\n  //check local storage\n  var selectedSecondFactor = localStorage.getItem(SELECTED_SF_KEY);\n  //read userSfTypes\n  var html = "<select style=\\"width:inherit;\\" class=\\"custom-dropdown__select custom-dropdown__select--white\\" id=\\"sf_select\\" onChange=\\"onChangeSelectSF(this)\\"> ";\n  html += "<option value =\\"\\">Select Type</option>";\n  var foundSelected = false;\n  for (var a = 0; a < userSfTypes.length; a++) {\n    //numerical type\n    var typeNum = userSfTypes[a];\n    var name = SF_NAMES[typeNum];\n    var selected = selectedSecondFactor == typeNum ? "selected" : "";\n    if (selected.length > 0) {\n      foundSelected = true;\n    }\n    html += "<option value =\\"" + typeNum + "\\"" + selected + ">" + name + "</option>";\n  }\n  html += "</select>";\n  var sfContainer = document.getElementById("sfContainer");\n  var twofactSelect = document.getElementById("twofactselect");\n  sfContainer.innerHTML = html;\n  twofactSelect.style.display = "";\n  //append to\n  //attempt to auto select value\n  if (foundSelected) {\n    selectedSF = selectedSecondFactor;\n    completeAuthentication_1();\n  }\n}\nfunction completeAuthenticationHandler() {\n  writeDebug("completeAuthenticationHandler: " + STATE + " " + this.req.responseText.length);\n  var root = this.req.responseXML.documentElement;\n  if (this.req.responseText.length == 0 || root.getElementsByTagName("error").length > 0) {\n    var message = root.getElementsByTagName("error")[0].firstChild.nodeValue;\n    showErrorMessage(error_field_id, message);\n    STATE = null;\n    return false;\n  } else if (this.req.responseText.indexOf("RESPONSEPENDING") != -1) {\n    return false;\n  }\n  var pushSent = false;\n  var server_M2 = "";\n  if (root.getElementsByTagName("M2").length > 0) {\n    server_M2 = root.getElementsByTagName("M2")[0].firstChild.nodeValue;\n  } else {\n    //from previous request take temps2\n    server_M2 = tempServerS2;\n  }\n  var twoFactorType = null;\n  if (root.getElementsByTagName("type").length > 0) {\n    twoFactorType = root.getElementsByTagName("type")[0].firstChild.nodeValue;\n  }\n  try {\n    pushSent = root.getElementsByTagName("push_sent")[0].firstChild.nodeValue === "true";\n  } catch (err) {\n    pushSent = false;\n  } //default not provided\n\n  recalc_M2();\n  complete_authentication = false; //reset to initial state\n  if (server_M2 == M2) {\n    //calculate session key\n    //store it in the cookie\n    var sk = compute_sk(B, K);\n    recordSK(sk);\n    showErrorMessage(error_field_id, "");\n    //if two factor authentication is required, show the form\n    if (twoFactorType != null) {\n      twoFactorUser = true;\n      doTwoFactorAuthentication(root, pushSent);\n      if (pushSent) {\n        //If specialPushAuthRequest() is defined, then execute that. Otherwise, default to pushAuthRequest(root)\n        if (typeof specialPushAuthRequest !== "undefined" && typeof specialPushAuthRequest === "function") {\n          specialPushAuthRequest(root);\n        } else {\n          pushAuthRequest(root);\n        }\n      }\n      return;\n    }\n\n    //get reference to the form\n    //append M1\n    //submit the form\n\n    STATE = AUTHENTICATED;\n\n    //Added by snarayan for \'Confirm Token Action\'\n    if (complete_confirm_token && !is_two_factor_user) {\n      randomizePassword();\n      var user_name = getUserName();\n      var token = fortifyFilterOpenRedirect(document.getElementById("token").value);\n      complete_confirm_token = false;\n      //if(getIfMultiUser() == "true" ) {\n      //  var myparams = "token="+token+"&ACTION=CONFIRMREQUESTWITHAUTHTOKEN&APP_NAME="+app_name+"&user_name="+user_name;\n      //  generalAjaxQuery(url, myparams);\n      //  return true;\n      //} else {\n      //    var myparams = "token="+token+"&ACTION=CONFIRMREQUEST&APP_NAME="+app_name+"&user_name="+user_name;\n      //    generalAjaxQuery(url, myparams);\n      //    return true;\n      //}\n\n      //Display all the signature parts for ACH signature\n      var signatures = document.getElementsByName("signatures");\n      var signatures_str = "";\n      if (signatures != null) {\n        showErrorMessage("ACHERRORMSG", "");\n        //signatures_str = "&signaturelength="+signatures.length;\n\n        for (var i = 0; i < signatures.length; i++) {\n          //alert("signatures: "+signatures[i].value);\n          signatures_str = signatures_str + "&signatures" + i + "=" + escape(signatures[i].value);\n        }\n        signatures_str = "&signaturelength=" + signatures.length + signatures_str;\n        //alert(signatures_str);\n      }\n      if (getIfMultiUser() == "true") {\n        var myparams = "token=" + token + "&ACTION=CONFIRMREQUESTWITHAUTHTOKEN&APP_NAME=" + app_name + "&user_name=" + user_name;\n        if (signatures != null) {\n          myparams = myparams + signatures_str;\n        }\n        generalAjaxQuery(url, myparams);\n      } else {\n        var myparams = "token=" + token + "&ACTION=CONFIRMREQUEST&APP_NAME=" + app_name + "&user_name=" + user_name;\n        if (signatures != null) {\n          myparams = myparams + signatures_str;\n        }\n        generalAjaxQuery(url, myparams);\n      }\n    }\n    //End of add by snarayan\n\n    if (debug) {\n      showErrorMessage(error_field_id, "");\n      return true;\n    }\n    var my_form = document.getElementById(xyz_form_id);\n    //handle login\n    //alert(" before my_form != null "+STATE);\n\n    if (my_form != null) {\n      appendM1andM2(xyz_form_id);\n      //this form logs in\n      if (submit_form) {\n        //alert(" submitting my form "+STATE);\n\n        randomizePassword();\n        xyzLoginformSubmit(my_form);\n      }\n    }\n    return true;\n  } else {\n    if (root.getElementsByTagName("reached_max_login") != null && root.getElementsByTagName("reached_max_login")[0] != null && root.getElementsByTagName("reached_max_login")[0].firstChild != null) {\n      var reached_max_login = root.getElementsByTagName("reached_max_login")[0].firstChild.nodeValue;\n      if (reached_max_login === "true") {\n        var my_form = document.getElementById(xyz_form_id);\n        showErrorMessage(error_field_id, "Invalid username password combination, reached max limit. Redirecting...");\n        xyzLoginformSubmit(my_form);\n      }\n    }\n    showErrorMessage(error_field_id, "Invalid username password combination");\n    STATE = FAILEDAUTH;\n    clearUserName();\n    clearPassword();\n    usernameFocus();\n    return false;\n  }\n}\nfunction doTwoFactorAuthentication(xmlroot, isPushAuth) {\n  var div1 = document.getElementById("authtable");\n  var tbodypos = document.getElementById("twofactauth");\n  var tbodybase = document.getElementById("twofactbase");\n  if (typeof tbodypos != "undefined" && tbodypos) {\n    div1.replaceChild(tbodybase, tbodypos);\n  }\n  var chlgtext = document.getElementById("chlgtext");\n  var chlgdescr = document.getElementById("chlgdescr");\n  var chlgfield = document.getElementById("chlginput");\n  chlgfield.focus();\n  chlgfield.select();\n\n  //delete chlginput1 if present\n  if (document.getElementById("chlginput1") != null) {\n    document.getElementById("chlginput1").remove();\n  }\n  try {\n    var submitbttn = document.getElementById("submitForm");\n    submitbttn.diabled = false;\n    submitbttn.onclick = authenticateTwoFactor;\n  } catch (e) {}\n  twoFactType = xmlroot.getElementsByTagName("type")[0].firstChild.nodeValue;\n\n  //hide push if present\n  hideIBKeyInst();\n  //make sure twofactbase present\n  document.getElementById("twofactbase").style.display = \'\';\n  //clear timeout\n  clearPush();\n  if (twoFactType == "SWTK") {\n    var swtkText = "Security Code";\n    //clear instructions\n    chlgtext.innerHTML = "";\n    if (document.getElementById("chlgdescr_SWTK")) swtkText = document.getElementById("chlgdescr_SWTK").textContent;\n    if (xyz_html5_placeholderCheck()) {\n      chlgfield.setAttribute("placeholder", swtkText);\n      if (chlgdescr) {\n        chlgdescr.parentNode.removeChild(chlgdescr);\n      }\n    } else chlgdescr.innerHTML = swtkText;\n    attachXYZHelpLink(twoFactType);\n    checkOTPSelection(xmlroot);\n  } else if (twoFactType == "SWCR") {\n    twoFactChlg = xmlroot.getElementsByTagName("challenge")[0].firstChild.nodeValue;\n    if (document.getElementById("chlgtext_SWCR")) {\n      //   document.getElementById("chlgtext_SWCR").innerHTML = document.getElementById("chlgtext_SWCR").innerHTML;\n      if (document.getElementById("chlg_SWCR")) {\n        document.getElementById("chlg_SWCR").remove();\n      }\n      var challenge = document.createElement("span");\n      challenge.id = "chlg_SWCR";\n      challenge.innerHTML = twoFactChlg;\n      document.getElementById("chlgtext_SWCR").appendChild(challenge);\n      document.getElementById("chlgtext_SWCR").style.display = "";\n    } else chlgtext.innerHTML = "<label>Challenge: " + twoFactChlg + "</label>";\n    chlgtext.style.display = "";\n    var swcrText = "Response String";\n    if (document.getElementById("chlgdescr_SWCR")) swcrText = document.getElementById("chlgdescr_SWCR").textContent;\n    var usePlaceHolder = xyz_html5_placeholderCheck();\n    if (usePlaceHolder) {\n      chlgfield.setAttribute("placeholder", swcrText);\n      //reset size of challenge field\n\n      if (chlgdescr) {\n        chlgdescr.parentNode.removeChild(chlgdescr);\n      }\n    } else chlgdescr.innerHTML = swcrText;\n    if (!isPushAuth) {\n      attachXYZHelpLink(twoFactType);\n    }\n  } else if (twoFactType == "Bingo") {\n    //reset first\n    chlgtext.innerHTML = "";\n    if (document.getElementById("chlgtext_Bingo")) document.getElementById("chlgtext_Bingo").style.display = "";else chlgtext.innerHTML = "<label>Use your security code card for authentication. Two card index numbers are shown in the image below. For each index, look up the corresponding value, and enter in the field below.<br/><br/>Index Numbers<br/></label>";\n    var img = new Image();\n    img.src = url + "?ACTION=GET_BINGO_CHLG&APP_NAME=" + app_name + "&USER=" + user_name + "&rand=" + Math.random();\n    chlgtext.appendChild(img);\n    chlgtext.style.display = "";\n    var bingoText = "Card Values";\n    if (document.getElementById("chlgdescr_Bingo")) bingoText = document.getElementById("chlgdescr_Bingo").textContent;\n    if (xyz_html5_placeholderCheck()) {\n      chlgfield.setAttribute("placeholder", bingoText);\n      if (chlgdescr) {\n        chlgdescr.parentNode.removeChild(chlgdescr);\n      }\n    } else chlgdescr.innerHTML = bingoText;\n    attachXYZHelpLink(twoFactType);\n  } else if (twoFactType == "IBTK") {\n    twoFactChlg = xmlroot.getElementsByTagName("challenge")[0].firstChild.nodeValue;\n    var ibtkText = "Temporary Security Code";\n    //clear instructions\n    chlgtext.innerHTML = "";\n    if (document.getElementById("chlgdescr_IBTK")) ibtkText = document.getElementById("chlgdescr_IBTK").textContent;\n    if (xyz_html5_placeholderCheck()) {\n      chlgfield.setAttribute("placeholder", ibtkText);\n      if (chlgdescr) {\n        chlgdescr.parentNode.removeChild(chlgdescr);\n      }\n    } else chlgdescr.innerHTML = ibtkText;\n    attachXYZHelpLink(twoFactType);\n  }\n  if (isPushAuth) {\n    // hide and display phone text\n    tbodybase.style.display = \'none\';\n\n    // add hide show link\n\n    var ibKeyInst = document.getElementById(\'ibKeyInst\');\n    ibKeyInst.innerHTML = PUSH_AUTH_INSTRUCTIONS;\n    ibKeyInst.style.display = \'\';\n    //create and add link\n    var link = document.createElement(\'a\');\n    //link.style.fontSize = "14px";\n    link.id = \'phoneLink\';\n    link.href = "javascript:void(0)";\n    link.onclick = hideShowChallenge;\n    link.innerHTML = PUSH_AUTH_ALT_LINK;\n    ibKeyInst.appendChild(link);\n    ibKeyInst.appendChild(createHelpLink(twoFactType));\n    /*\n    var pwdAuth = document.getElementById(\'pwdauth\');\n     var instructions = document.createElement(\'span\');\n    var lineBreak = document.createElement(\'br\');\n    instructions.innerHTML = PUSH_AUTH_INSTRUCTIONS;\n    instructions.id = \'phoneInstructions\';\n      var row = document.createElement(\'tr\');\n    var col = document.createElement(\'td\');\n    col.colSpan=2;\n    col.appendChild(instructions);\n    col.appendChild(lineBreak);\n    col.appendChild(lineBreak);\n    col.appendChild(link);\n    row.appendChild(col);\n    pwdAuth.appendChild(row);\n    */\n  }\n}\nfunction xyz_html5_placeholderCheck() {\n  var test = document.createElement("input");\n  return "placeholder" in test;\n}\nfunction hideIBKeyInst() {\n  var ibKeyInst = document.getElementById("ibKeyInst");\n  if (ibKeyInst != null) ibKeyInst.style.display = \'none\';\n}\nfunction hideShowChallenge() {\n  var tbodybase = document.getElementById("twofactbase");\n  var instructions2 = document.getElementById("phoneLink");\n  if (tbodybase.style.display == \'none\') {\n    tbodybase.style.display = \'\';\n  } else {\n    tbodybase.style.display = \'none\';\n  }\n}\n\n// PHONE AUTH FUNCTIONS\nfunction pushAuthRequest(root) {\n  // set root to reuse on timeout\n  if (root) {\n    PHONE_AUTH_ROOT = root;\n  }\n  // TODO replace params\n  if (VERSION == 1) {\n    var params = "ACTION=COMPLETETWOFACT&APP_NAME=" + app_name + "&USER=" + user_name + "&VERSION=" + VERSION + "&SF=" + selectedSF + "&PUSH=true";\n  } else {\n    var params = "ACTION=COMPLETETWOFACT&APP_NAME=" + app_name + "&USER=" + user_name + "&VERSION=" + VERSION + "&SF=" + twoFactType + "&PUSH=true";\n  }\n  PUSH_AUTH_ATTEMPTS++;\n  var loader = new xhr.ContentLoader("POST", url, true, pushAuthHandler, params);\n  // PHONE_AUTH_REQUESTED = true;\n}\nfunction pushAuthHandler() {\n  // Read XML doc\n  var root = this.req.responseXML.documentElement;\n\n  // check response valid\n  // not valid call pushAuthRequest again\n  // also check if max attempts reached\n  if (PUSH_AUTH_ATTEMPTS >= PUSH_AUTH_MAX_ATTEMPTS) {\n    // display error message or show challenege inputs\n    // TODO change error message\n    showErrorMessage(error_field_id, PUSH_TIMEOUT_MSG);\n    hideShowChallenge();\n    return;\n  }\n  if (root.getElementsByTagName("auth_res") != null) {\n    var auth_res = root.getElementsByTagName("auth_res")[0].firstChild.nodeValue;\n    if (auth_res === "true") {\n      PUSH_AUTH_ATTEMPTS = 0;\n      authenticateTwoFactorHandler(root);\n    } else {\n      pushTimeout = setTimeout(pushAuthRequest, PUSH_CHECK_AUTH_INTERVAL);\n    }\n  }\n}\nfunction clearPush() {\n  //reset to zero\n  PUSH_AUTH_ATTEMPTS = 0;\n  clearTimeout(pushTimeout);\n}\nfunction createHelpLink(twoFactType, secondHelp) {\n  var suffix = "";\n  if (secondHelp) {\n    suffix = "2";\n  }\n  var aLink = document.createElement("a");\n  aLink.style.fontSize = "14px";\n  aLink.style.color = "#999999";\n  aLink.style.cssFloat = "right";\n  aLink.href = "javascript:void(0)";\n  aLink.onclick = showXYZHelpWindow;\n  aLink.id = "help_SF" + suffix;\n  aLink.name = "help_" + twoFactType;\n  if (document.getElementById("helpTextCopy")) aLink.innerHTML = document.getElementById("helpTextCopy").innerHTML;else aLink.innerHTML = "Help";\n  return aLink;\n}\nfunction attachXYZHelpLink(twoFactType) {\n  try {\n    var url = top.frames ? top.frames.location : document.location;\n    url = url.toString().toLowerCase();\n    var chlgfield = document.getElementById("chlginput");\n    if (url && chlgfield && url.indexOf("interactivebrokers") != -1) {\n      var parent = chlgfield.parentNode;\n      if (parent) {\n        //delete old sf\n        if (document.getElementById(\'help_SF2\') != null) {\n          document.getElementById(\'help_SF2\').remove();\n        }\n        //check if IBTK\n        if (twoFactType == \'IBTK\') {\n          return;\n        }\n        var aLink = createHelpLink(twoFactType, true);\n        parent.appendChild(aLink);\n        chlgfield.focus();\n        chlgfield.select();\n      }\n    }\n  } catch (e) {}\n}\nfunction addSecondInputResponse() {\n  var noSpaceChal = twoFactChlg.replace(/ /gi, \'\');\n  var added = noSpaceChal.length == 6;\n  if (added) {\n    //delete chlginput1 if present\n\n    var responseInput = document.getElementById("chlginput");\n    responseInput.maxLength = 5;\n    responseInput.size = 5;\n    responseInput.style.width = "90px";\n    responseInput.style.marginLeft = "25px";\n    responseInput.onkeyup = challengeKeyUpCheck;\n    //remove placeholder\n    responseInput.placeholder = "";\n    responseInput.autocomplete = "off";\n    var responseInput1 = document.createElement("input");\n    responseInput1.maxLength = 3;\n    responseInput1.size = 3;\n    responseInput1.style.width = "40px";\n    responseInput1.id = "chlginput1";\n    responseInput1.disabled = true;\n    responseInput1.style.marginLeft = "10px";\n    responseInput1.autocomplete = "off";\n    responseInput.parentElement.appendChild(responseInput1);\n  }\n  return added;\n}\nfunction challengeKeyUpCheck(e) {\n  //enable second response and change focus\n  var responseInput = document.getElementById(\'chlginput\').value;\n  var responseInput1 = document.getElementById(\'chlginput1\');\n  if (responseInput.length == 5) {\n    var responseInput1 = document.getElementById(\'chlginput1\');\n    responseInput1.disabled = false;\n    responseInput1.focus();\n  }\n}\nfunction showXYZHelpWindow() {\n  var twoFactType = this.name.split("_")[1];\n  var helpPlatinum = "https://www.interactivebrokers.com/en/general/platinumHelp.php";\n  var helpDSC = "https://www.interactivebrokers.com/en/general/digital_security_device.php";\n  var helpBingo = "https://www.interactivebrokers.com/en/general/bingoHelp.php";\n  var helpGold = "https://www.interactivebrokers.com/en/index.php?f=5775";\n  var helpSMS = "https://ibkr.info/article/3196#login";\n  var helpIBKey = "https://www.interactivebrokers.com/en/index.php?f=13733";\n  if (twoFactType == "SWTK") {\n    if (selectedSF == IBSSO.CONSTANT.SECOND_FACTOR_TYPE_OTP) {\n      window.open(helpSMS, "HelpSMS", "width=800,height=700,scrollbars=yes,resizable=yes");\n    } else {\n      window.open(helpDSC, "HelpSWTK", "width=800,height=700,scrollbars=yes,resizable=yes");\n    }\n  } else if (twoFactType == "SWCR") {\n    //check if gold\n    var noSpaceChal = twoFactChlg.replace(/ /gi, \'\');\n    if (selectedSF == IBKEY_ANDROID || selectedSF == IBKEY_IOS) {\n      window.open(helpIBKey, "HelpSWCR", "width=800,height=700,scrollbars=yes,resizable=yes");\n      return;\n    }\n    if (noSpaceChal.length == 6) {\n      window.open(helpGold, "HelpSWCR", "width=800,height=700,scrollbars=yes,resizable=yes");\n    } else {\n      window.open(helpPlatinum, "HelpSWCR", "width=800,height=700,scrollbars=yes,resizable=yes");\n    }\n  } else if (twoFactType == "Bingo") {\n    window.open(helpBingo, "HelpBingo", "width=800,height=700,scrollbars=yes,resizable=yes");\n  } else if (twoFactType == "IBTK") {\n    window.open(helpPlatinum, "HelpIBTK", "width=800,height=700,scrollbars=yes,resizable=yes");\n  }\n}\nfunction authenticateTwoFactor() {\n  document.getElementById("submitForm").disabled = true;\n  var additionalChal = "";\n  if (document.getElementById("chlginput1")) {\n    additionalChal = document.getElementById("chlginput1").value;\n  }\n  var resp = fortifyFilterOpenRedirect(document.getElementById("chlginput").value + additionalChal);\n  if (twoFactType != null && twoFactType == "IBTK") {\n    var num = "";\n    var ctmp = parseBigInt(twoFactChlg, 16);\n    //num = "112628796121458";\n    //var ntmp = parseBigInt(num,10);\n\n    num = "";\n    for (var i = 0; i < resp.length; i++) {\n      num += "" + dec2Hex(resp.charCodeAt(i));\n    }\n    ntmp = num;\n    var hashin = String(bigInt2radix(verifyHexVal(ctmp), 16));\n    hashin += String(bigInt2radix(verifyHexVal(ntmp), 16));\n    resp = verifyHexVal(calcSHA1Hex(hashin));\n  }\n  var params = "";\n  if (VERSION == 1) {\n    var params = "ACTION=COMPLETETWOFACT&APP_NAME=" + app_name + "&USER=" + user_name + "&ACCT=" + acct_id + "&RESPONSE=" + resp + "&VERSION=" + VERSION + "&SF=" + selectedSF;\n  } else {\n    var params = "ACTION=COMPLETETWOFACT&APP_NAME=" + app_name + "&USER=" + user_name + "&ACCT=" + acct_id + "&RESPONSE=" + resp + "&VERSION=" + VERSION + "&SF=" + twoFactType;\n  }\n  var loader = new xhr.ContentLoader("POST", url, true, authenticateTwoFactorHandler, params);\n}\nfunction authenticateTwoFactorHandler() {\n  var my_form = document.getElementById(xyz_form_id);\n  if (my_form != null) {\n    appendM1andM2(xyz_form_id);\n    randomizePassword();\n    xyzLoginformSubmit(document.getElementById(xyz_form_id));\n    return true;\n  }\n}\nfunction appendM1andM2(formname) {\n  var my_form = document.getElementById(formname);\n  //handle login\n  if (my_form != null) {\n    var checkForM1 = document.getElementsByName("M1");\n    if (checkForM1.length) checkForM1[0].parentNode.removeChild(checkForM1[0]);\n    var cs = document.createElement("input");\n    cs.type = "hidden";\n    cs.name = "M1";\n    cs.id = "M1";\n    cs.value = M;\n    my_form.appendChild(cs);\n    var checkForM2 = document.getElementsByName("M2");\n    if (checkForM2.length) checkForM2[0].parentNode.removeChild(checkForM2[0]);\n    var ss = document.createElement("input");\n    ss.type = "hidden";\n    ss.name = "M2";\n    ss.id = "M2";\n    ss.value = M2;\n    my_form.appendChild(ss);\n  }\n}\nvar bypass_empty_field = false;\nfunction bypass_empty_field_check() {\n  bypass_empty_field = true;\n  return false;\n}\n\n//this is the form that is invoked from authentication forms\n// In order to show proper error messages and shifting focus as per twiki http://websrv3/twiki/bin/view/Main/LoginBlankFieldHandling\n// more conditions are added in this method but these are not required in invoked from pages like password change\n// the variable bypass_empty_field is set to true for the regular flow and for error messages it it set to false. By default it is false\nfunction submit_xyz_form(in_xyz_form_id, in_user_id, in_passw_id, in_error_id) {\n  if (!bypass_empty_field) {\n    if (getUserName() == null || getUserName() == "") {\n      showErrorMessage(error_field_id, "Please enter Username and Password");\n      writeDebug("Please enter Username and Password submit_xyz_form: " + STATE + " error_field_id: " + error_field_id);\n      forceUserNameFocused = false;\n      forcePasswordFocused = false;\n      userNameFocused = false;\n      passwordFocused = false;\n      clearUserName();\n      //clearPassword();\n      focusUserName();\n      return false;\n    }\n    if (userNameEnterPressed) {\n      writeDebug("* userNameEnterPressed ");\n      userNameEnterPressed = false;\n      forceUserNameFocused = false;\n      forcePasswordFocused = false;\n      userNameFocused = false;\n      passwordFocused = false;\n      focusPassword();\n      return false;\n    }\n    if (getPassword() == null || getPassword() == "") {\n      showErrorMessage(error_field_id, "Please enter password");\n      writeDebug("Please enter Password submit_xyz_form: " + STATE + " error_field_id: " + error_field_id);\n      forceUserNameFocused = false;\n      forcePasswordFocused = false;\n      userNameFocused = false;\n      passwordFocused = false;\n      focusPassword();\n      return false;\n    }\n    complete_authentication = true;\n  }\n  if (!checkUsernameWithLoginType()) {\n    writeDebug("checkUsernameWithLoginType failed");\n    enableSubmit();\n    alert(IBSSO.MESSAGES.LIVE_ACCOUNT_WITH_PAPER_TRADING);\n    return false;\n  }\n  setXyzFormId(in_xyz_form_id);\n  setUserFieldId(in_user_id);\n  setPasswFieldId(in_passw_id);\n  setErrorFieldId(in_error_id);\n  writeDebug("submit_xyz_form: " + STATE);\n  submit_form = true;\n  if (!XYZ) {\n    return true;\n  }\n  if (STATE == AUTHENTICATED) {\n    //state is authenticate reset password\n    randomizePassword();\n    return true;\n  } else if (STATE == FAILEDAUTH) {\n    //failed authentication start from beginning\n    STATE = null;\n    completeAuthentication(in_passw_id, in_error_id);\n    return false;\n  } else {\n    //go to completeAuthentication depending on state it will complete\n    writeDebug("completeAuthentication submit_xyz_form: " + STATE + " error_field_id: " + error_field_id);\n    completeAuthentication(in_passw_id, in_error_id);\n    return false;\n  }\n}\nfunction checkUsernameWithLoginType() {\n  var valid = true;\n  var login_type = getLoginType();\n  var paper = IBSSO.isPaper[getUserName()];\n  if (paper !== undefined) {\n    // we have data to username\n    if (login_type == IBSSO.CONSTANT.LOGIN_TYPE_PROD && paper) {\n      valid = false;\n    }\n  }\n  return valid;\n}\nfunction modifyPassword() {\n  var pass_ver = verify_password_modification();\n  if (!pass_ver) {\n    showErrorMessage(error_field_id, "Invalid new passwords");\n    return;\n  } else if (STATE == AUTHENTICATED) {\n    showErrorMessage(error_field_id, "");\n    var npass = getNewPassword();\n    var epass = do_encrypt(getNewPassword());\n    var params = "ACTION=MODIFYPASS&APP_NAME=" + app_name + "&USER=" + getUserName() + "&token=" + getToken() + "&epass=" + epass + "&M1=" + M;\n    var loader = new xhr.ContentLoader("POST", url, true, modifyPasswordHandler, params);\n    return;\n  } else {\n    complete_authentication = true;\n    completeAuthentication();\n    return false;\n  }\n}\nfunction modifyPasswordHandler() {\n  var root = this.req.responseXML.documentElement;\n  var pass_modif_res = root.getElementsByTagName("pass_modif_res")[0].firstChild.nodeValue;\n  if (pass_modif_res == "NULL") {\n    password_was_changed();\n    return;\n  } else {\n    showErrorMessage(error_field_id, passwordChangeCodes[pass_modif_res]);\n  }\n}\nfunction requestPasswordToken(tokenURL) {\n  var params = "ACTION=TOKEN&APP_NAME=" + app_name;\n  var loader = new xhr.ContentLoader("POST", tokenURL, true, requestPasswordTokenHandler, params);\n}\nfunction requestPasswordTokenHandler() {\n  var root = this.req.responseXML.documentElement;\n  var token_sending_res = root.getElementsByTagName("token_sending_res")[0].firstChild.nodeValue;\n  showErrorMessage(error_field_id, token_sending_res);\n}\nfunction modifyPasswordByOperator() {\n  if (!verify_password_modification()) {\n    showErrorMessage(error_field_id, "Invalid New Passwords");\n    return false;\n  }\n  var epass = do_encrypt(getNewPassword());\n  var params = "ACTION=MODIFYPASS&APP_NAME=" + app_name + "&user_name=" + user_name + "&epass=" + epass;\n  var loader = new xhr.ContentLoader("POST", url, true, modifyPasswordByOperatorHandler, params);\n}\nfunction modifyPasswordByOperatorHandler() {\n  var root = this.req.responseXML.documentElement;\n  var pass_modif_res = root.getElementsByTagName("pass_modif_res")[0].firstChild.nodeValue;\n  if (pass_modif_res == "NULL") {\n    //no errors\n    showErrorMessage(error_field_id, "");\n    password_was_changed();\n    return;\n  } else {\n    showErrorMessage(error_field_id, "Password was not changed. " + passwordChangeCodes[pass_modif_res]);\n  }\n}\nfunction canDisableLoginForm() {\n  if (STATE == null) {\n    return false;\n  } else if (!XYZ) {\n    return false;\n  } else if (STATE == INITIATED && userNameEnterPressed) {\n    return false;\n  } else {\n    return true;\n  }\n}\nfunction dec2Hex(dec) {\n  dec = parseInt(dec, 10);\n  if (!isNaN(dec)) {\n    hexChars = "0123456789abcdef";\n    if (dec > 255) {\n      return "";\n    }\n    var i = dec % 16;\n    var j = (dec - i) / 16;\n    var result = hexChars.charAt(j) + hexChars.charAt(i);\n    return result;\n  } else return "";\n}\n\n//Functions required for Signature Component\n\nvar token_field_id = "token";\nvar in_xyz_form_id = "confirmform";\nvar actual_user_field_id = "actual_user_name";\nvar pass_field_id = "password";\nvar two_factor_user_id = "twofactoruser";\nvar multi_user_id = "multiuser";\nfunction getToken() {\n  return fortifyFilterOpenRedirect(document.getElementById(token_field_id).value);\n}\nfunction getActualUserName() {\n  return document.getElementById(actual_user_field_id).value;\n}\nfunction getIfTwoFactorUser() {\n  return document.getElementById(two_factor_user_id).value;\n}\nfunction getIfMultiUser() {\n  return document.getElementById(multi_user_id).value;\n}\nfunction doNothing() {\n  return true;\n}\nfunction authenticateTwoFactorSign() {\n  //document.getElementById("submitForm").disabled = true;\n  var additionalChal = "";\n  if (document.getElementById("chlginput1")) {\n    additionalChal = document.getElementById("chlginput1").value;\n  }\n  var resp = fortifyFilterOpenRedirect(document.getElementById("chlginput").value + additionalChal);\n  if (twoFactType != null && twoFactType == "IBTK") {\n    var num = "";\n    var ctmp = parseBigInt(twoFactChlg, 16);\n    //num = "112628796121458";\n    //var ntmp = parseBigInt(num,10);\n\n    num = "";\n    for (var i = 0; i < resp.length; i++) {\n      num += "" + dec2Hex(resp.charCodeAt(i));\n    }\n    ntmp = num;\n    var hashin = String(bigInt2radix(verifyHexVal(ctmp), 16));\n    hashin += String(bigInt2radix(verifyHexVal(ntmp), 16));\n    resp = verifyHexVal(calcSHA1Hex(hashin));\n  }\n  var params = "ACTION=COMPLETETWOFACT&APP_NAME=" + app_name + "&USER=" + user_name + "&RESPONSE=" + resp + "&VERSION" + VERSION + "SF=" + selectedSF;\n  var loader = new xhr.ContentLoader("POST", url, true, authenticateTwoFactorHandlerSign, params);\n}\nfunction authenticateTwoFactorHandlerSign() {\n  var root = this.req.responseXML.documentElement;\n  var res = root.getElementsByTagName("auth_res")[0].firstChild.nodeValue;\n  var my_form = document.getElementById(xyz_form_id);\n  res = res.replace(/^\\s+/, \'\');\n  res = res.replace(/\\s+$/, \'\');\n  if (my_form != null) {\n    appendM1andM2(xyz_form_id);\n    randomizePassword();\n    if (res == "true") showErrorMessage(error_field_id, "");else {\n      showErrorMessage(error_field_id, "Error While Two Factor Authentication");\n      document.getElementById("confirmrequestform").submit();\n    }\n    return true;\n  }\n}\nfunction confirmTwoFactorAndSign(myURL, myparams) {\n  writeDebug("generalAjaxQuery: myURL: " + myURL);\n  writeDebug("generalAjaxQuery: myparams: " + myparams);\n  var loader = new xhr.ContentLoader("POST", myURL, true, generalAjaxQueryHandler, myparams);\n}\nfunction generalAjaxQuery(myURL, myparams) {\n  writeDebug("generalAjaxQuery: myURL: " + myURL);\n  var loader = new xhr.ContentLoader("POST", myURL, true, generalAjaxQueryHandler, myparams);\n}\nfunction clearToken() {\n  document.getElementById("token").value = "";\n}\nfunction generalAjaxQueryHandler() {\n  var root = this.req.responseXML.documentElement;\n  var confirmAndVerify = root.getElementsByTagName("confirmAndVerify")[0].firstChild.nodeValue;\n  //alert("generalAjaxQueryHandler ");\n  if (confirmAndVerify == "true") {\n    showErrorMessage(error_field_id, "Confirmed and Signature Verified");\n    document.confirmrequestform.submit();\n  } else if (confirmAndVerify == "achfalse") {\n    showErrorMessage("ACHERRORMSG", "Please Check Signature(s)");\n    clearUserName();\n    clearPassword();\n    usernameFocus();\n  } else if (confirmAndVerify == "achdepositfalse") {\n    showErrorMessage(error_field_id, "Error While Submitting ACH Deposit");\n    clearUserName();\n    clearPassword();\n    usernameFocus();\n  } else {\n    if (getIfTwoFactorUser() == "true") {\n      showErrorMessage(error_field_id, "Error While Two Factor Authentication");\n      document.confirmrequestform.submit();\n    } else {\n      showErrorMessage(error_field_id, "Please Check Confirmation Number");\n    }\n    STATE = "FAILEDCONFIRM"; //required so that the \'confirmRequest\' would start by completeAuthentication again\n    clearUserName();\n    clearPassword();\n    clearToken();\n    usernameFocus();\n  }\n}\nfunction blockEnter(evt) {\n  evt = evt ? evt : event;\n  var charCode = evt.charCode ? evt.charCode : evt.which ? evt.which : evt.keyCode;\n  if (charCode == 13 || charCode == 3) {\n    return false;\n  } else {\n    return true;\n  }\n}\nfunction checkUser(url, redirect_url) {\n  var user_name = getUserName();\n  var token = getToken();\n  var actual_user_name = getActualUserName();\n  if (actual_user_name == user_name) {\n    showErrorMessage("MYERRORMSG", "");\n    return true;\n  } else {\n    if (user_name != null && user_name != "") {\n      showErrorMessage("MYERRORMSG", "Error: Username mismatch");\n    }\n    clearUserName();\n    clearPassword();\n    usernameFocus();\n    return false;\n  }\n}\nfunction requestNewToken(url, request_user_name, request_id) {\n  var myparams = "request_id=" + request_id + "&ACTION=RESENDREQUESTTOKEN&APP_NAME=" + app_name + "&request_user_name=" + request_user_name;\n  var loader = new xhr.ContentLoader("POST", url, true, requestNewTokenHandler, myparams);\n}\nvar request_error_field_id = "REQUESTERRORMSG";\nfunction requestNewTokenHandler() {\n  var root = this.req.responseXML.documentElement;\n  var resendrequesttoken = root.getElementsByTagName("resendrequesttoken")[0].firstChild.nodeValue;\n  if (resendrequesttoken == "true") {\n    showErrorMessage(request_error_field_id, "Email Sent");\n  } else {\n    showErrorMessage(request_error_field_id, "Error while sending email token");\n  }\n}\nfunction confirmTwoFactorRequest(url, redirect_url) {\n  var user_name = getUserName();\n  var actual_user_name = getActualUserName();\n  if (actual_user_name == user_name) {\n    showErrorMessage("MYERRORMSG", "");\n    authenticateTwoFactorSignNew();\n    return true;\n  } else {\n    if (user_name != null && user_name != "") {\n      showErrorMessage("MYERRORMSG", "Error: Username mismatch");\n    }\n    clearUserName();\n    clearPassword();\n    usernameFocus();\n    return false;\n  }\n}\nvar donotsubmit = false;\nfunction confirmTwoFactorAchDepositRequest(url, redirect_url) {\n  var user_name = getUserName();\n  var actual_user_name = getActualUserName();\n  if (actual_user_name == user_name) {\n    showErrorMessage("MYERRORMSG", "");\n    donotsubmit = true;\n    authenticateTwoFactorSignNew();\n    return true;\n  } else {\n    if (user_name != null && user_name != "") {\n      showErrorMessage("MYERRORMSG", "Error: Username mismatch");\n    }\n    clearUserName();\n    clearPassword();\n    usernameFocus();\n    return false;\n  }\n}\nfunction confirmAchDepositRequest(url, redirect_url, in_passw_id, in_error_id) {\n  debug = false;\n  var user_name = getUserName();\n  var token = 0;\n  var actual_user_name = getActualUserName();\n  complete_confirm_token = true;\n  completeAuthentication(in_passw_id, in_error_id);\n}\nfunction confirmRequest(url, redirect_url) {\n  debug = false;\n  var user_name = getUserName();\n  var token = getToken();\n  var actual_user_name = getActualUserName();\n  if (actual_user_name == user_name) {\n    if (STATE == INPROCESS) {\n      setTimeout(\'doNothing()\', 200);\n      return true;\n    }\n    setXyzFormId(in_xyz_form_id);\n    setUserFieldId(user_field_id);\n    setPasswFieldId(pass_field_id);\n    setErrorFieldId(error_field_id);\n    submit_form = false;\n    if (STATE == AUTHENTICATED && !complete_confirm_token) {\n      //state is authenticate reset password\n      randomizePassword();\n      //if(getIfMultiUser() == "true" ) {\n      //  var myparams = "token="+token+"&ACTION=CONFIRMREQUESTWITHAUTHTOKEN&APP_NAME="+app_name+"&user_name="+user_name;\n      //  generalAjaxQuery(url, myparams);\n      //} else {\n      //    var myparams = "token="+token+"&ACTION=CONFIRMREQUEST&APP_NAME="+app_name+"&user_name="+user_name;\n      //    generalAjaxQuery(url, myparams);\n      //}\n\n      //Display all the signature parts for ACH signature\n      var signatures = document.getElementsByName("signatures");\n      var signatures_str = "";\n      if (signatures != null) {\n        showErrorMessage("ACHERRORMSG", "");\n        //signatures_str = "&signaturelength="+signatures.length;\n\n        for (var i = 0; i < signatures.length; i++) {\n          //alert("signatures: "+signatures[i].value);\n          signatures_str = signatures_str + "&signatures" + i + "=" + escape(signatures[i].value);\n        }\n        signatures_str = "&signaturelength=" + signatures.length + signatures_str;\n        //alert(signatures_str);\n      }\n      if (getIfMultiUser() == "true") {\n        var myparams = "token=" + token + "&ACTION=CONFIRMREQUESTWITHAUTHTOKEN&APP_NAME=" + app_name + "&user_name=" + user_name;\n        if (signatures != null) {\n          myparams = myparams + signatures_str;\n        }\n        generalAjaxQuery(url, myparams);\n      } else {\n        var myparams = "token=" + token + "&ACTION=CONFIRMREQUEST&APP_NAME=" + app_name + "&user_name=" + user_name;\n        if (signatures != null) {\n          myparams = myparams + signatures_str;\n        }\n        generalAjaxQuery(url, myparams);\n      }\n      return true;\n    } else {\n      //If the onBlur function of javascript is disabled, try to complete authentication\n      //go to completeAuthetication, depending on state it will complete authentication\n      complete_authentication = true;\n      complete_confirm_token = true;\n      if (getIfTwoFactorUser() == "true") {\n        is_two_factor_user = true;\n      }\n      if (STATE != INITIATED) {\n        initAuthentication(); //do the whole thing;\n      } else {\n        setTimeout(\'doNothing()\', 200);\n        completeAuthentication(pass_field_id, error_field_id);\n      }\n    }\n  } else {\n    showErrorMessage(error_field_id, "Error: Username mismatch");\n    num_invoked = 0;\n    clearUserName();\n    clearPassword();\n    clearToken();\n    usernameFocus();\n  }\n}\n\n/////\n//Functions for two factor signing with out token\nfunction authenticateTwoFactorSignNew() {\n  //document.getElementById("submitForm").disabled = true;\n  //alert("authenticateTwoFactorSignNew");\n  var additionalChal = "";\n  if (document.getElementById("chlginput1")) {\n    additionalChal = document.getElementById("chlginput1").value;\n  }\n  var resp = fortifyFilterOpenRedirect(document.getElementById("chlginput").value + additionalChal);\n\n  //    var resp = fortifyFilterOpenRedirect(document.getElementById("chlginput").value);\n  if (twoFactType != null && twoFactType == "IBTK") {\n    var num = "";\n    var ctmp = parseBigInt(twoFactChlg, 16);\n    //num = "112628796121458";\n    //var ntmp = parseBigInt(num,10);\n\n    num = "";\n    for (var i = 0; i < resp.length; i++) {\n      num += "" + dec2Hex(resp.charCodeAt(i));\n    }\n    ntmp = num;\n    var hashin = String(bigInt2radix(verifyHexVal(ctmp), 16));\n    hashin += String(bigInt2radix(verifyHexVal(ntmp), 16));\n    resp = verifyHexVal(calcSHA1Hex(hashin));\n  }\n  var params = "ACTION=COMPLETETWOFACT&APP_NAME=" + app_name + "&USER=" + user_name + "&RESPONSE=" + resp + "&VERSION=" + VERSION + "&SF=" + selectedSF;\n  var loader = new xhr.ContentLoader("POST", url, true, authenticateTwoFactorHandlerSignNew, params);\n}\nfunction authenticateTwoFactorHandlerSignNew() {\n  //alert("authenticateTwoFactorHandlerSignNew");\n\n  var root = this.req.responseXML.documentElement;\n  var res = root.getElementsByTagName("auth_res")[0].firstChild.nodeValue;\n  var my_form = document.getElementById(xyz_form_id);\n  res = res.replace(/^\\s+/, \'\');\n  res = res.replace(/\\s+$/, \'\');\n  if (my_form != null) {\n    appendM1andM2(xyz_form_id);\n    randomizePassword();\n    if (res == "true") {\n      showErrorMessage(error_field_id, "");\n      var user_name = getUserName();\n      var actual_user_name = getActualUserName();\n      if (actual_user_name == user_name) {\n        //alert("getIfMultiUser()"+getIfMultiUser());\n\n        //Added For Handling ACH signatures\n        //Display all the signature parts for ACH signature\n        var signatures = document.getElementsByName("signatures");\n        var signatures_str = "";\n        if (signatures != null) {\n          showErrorMessage("ACHERRORMSG", "");\n          //signatures_str = "&signaturelength="+signatures.length;\n\n          for (var i = 0; i < signatures.length; i++) {\n            //alert("signatures: "+signatures[i].value);\n            signatures_str = signatures_str + "&signatures" + i + "=" + escape(signatures[i].value);\n          }\n          signatures_str = "&signaturelength=" + signatures.length + signatures_str;\n          //alert(signatures_str);\n        }\n        // End of add for ACH Signature\n\n        if (getIfMultiUser() == "true") {\n          var myparams = "token=&ACTION=CONFIRMREQUESTWITHAUTHTOKEN&APP_NAME=" + app_name + "&user_name=" + user_name;\n          showErrorMessage("MYERRORMSG", "");\n          if (signatures != null) {\n            myparams = myparams + signatures_str;\n          }\n          generalAjaxQuery(url, myparams);\n        } else {\n          var myparams = "token=&ACTION=CONFIRMREQUEST&APP_NAME=" + app_name + "&user_name=" + user_name;\n          showErrorMessage("MYERRORMSG", "");\n          if (signatures != null) {\n            myparams = myparams + signatures_str;\n          }\n          generalAjaxQuery(url, myparams);\n        }\n      } else {\n        if (user_name != null && user_name != "") {\n          showErrorMessage("MYERRORMSG", "Error: Username mismatch");\n        }\n        clearUserName();\n        clearPassword();\n        usernameFocus();\n      }\n    } else {\n      showErrorMessage(error_field_id, "Error While Two Factor Authentication");\n      if (donotsubmit == true) {\n        donotsubmit = false;\n      } else {\n        document.confirmrequestform.submit();\n      }\n    }\n    return true;\n  }\n}\nfunction compute_sk(seed, verifier) {\n  var hashin = "";\n  hashin += String(bigInt2radix(verifyHexVal(seed), 16));\n  hashin += String(bigInt2radix(verifyHexVal(verifier), 16));\n  var ret = calcSHA1Hex(hashin);\n  writeDebug("seed: " + bigInt2radix(verifyHexVal(seed), 16));\n  writeDebug("ver: " + bigInt2radix(verifyHexVal(verifier), 16));\n  writeDebug("res: " + ret);\n  return ret;\n}\n\n//End of functions for two factor confirm with out token\n\n$(document).ready(function () {\n  $(\'body\').on(\'click\', \'.otp-select-sms\', selectOTPText);\n  $(\'body\').on(\'click\', \'.otp-select-voice\', selectOTPVoice);\n  $(\'body\').on(\'click\', \'.otp-select-email\', selectOTPEmail);\n  $(\'body\').on(\'click\', \'.otp-cancel\', cancelOTPSelection);\n  $(\'body\').on(\'click\', \'.otp-opener-text\', showOTPSelection);\n});\nfunction showOTPSelection() {\n  writeDebug(\'showOTPSelection\');\n  $(\'#otp-delivery\').show();\n  $(\'#twofactbase\').hide();\n  window.clearTimeout(window.IBSSO.otpSelectTimer);\n}\nfunction selectOTPText() {\n  writeDebug(\'selectOTPText\');\n  selectOTPDelivery(1);\n}\nfunction selectOTPVoice() {\n  writeDebug(\'selectOTPVoice\');\n  selectOTPDelivery(2);\n}\nfunction selectOTPEmail() {\n  writeDebug(\'selectOTPEmail\');\n  selectOTPDelivery(4);\n}\nfunction selectOTPDelivery(delivery) {\n  $.ajax({\n    method: "POST",\n    url: url,\n    data: {\n      ACTION: "COMPLETEAUTH_1",\n      APP_NAME: app_name,\n      USER: user_name,\n      ACCT: acct_id,\n      M1: M,\n      VERSION: VERSION,\n      SF: selectedSF,\n      OTP_DELIVERY: delivery\n    },\n    success: function success(xml) {\n      if (xml && xml.getElementsByTagName("delivery_description").length > 0) {\n        var delivery_description = xml.getElementsByTagName("delivery_description")[0].firstChild.nodeValue;\n        if (delivery_description) {\n          // Update delivery description\n          $(\'.otp-text\').text(delivery_description);\n        }\n      }\n    }\n  });\n  $(\'#otp-delivery\').hide();\n  $(\'#twofactbase\').show();\n}\nfunction cancelOTPSelection() {\n  writeDebug(\'cancelOTPSelection\');\n  $(\'#otp-delivery\').hide();\n  $(\'#twofactbase\').show();\n}\nfunction checkOTPSelection(xml) {\n  if (selectedSF !== IBSSO.CONSTANT.SECOND_FACTOR_TYPE_OTP) {\n    return;\n  }\n  var delivery_description = \'\';\n  var supported_media = 0;\n  if (xml.getElementsByTagName("delivery_description").length > 0) {\n    delivery_description = xml.getElementsByTagName("delivery_description")[0].firstChild.nodeValue;\n  }\n  if (xml.getElementsByTagName("supported_media").length > 0) {\n    var supported_media_node = xml.getElementsByTagName("supported_media")[0].firstChild.nodeValue;\n    supported_media = parseInt(supported_media_node, 10);\n  }\n  $(\'.otp-text\').text(delivery_description);\n  if (supported_media > 0) {\n    var isSMSSupported = supported_media & IBSSO.CONSTANT.OTP_DELIVERY_TYPE_SMS;\n    var isVoiceSupported = supported_media & IBSSO.CONSTANT.OTP_DELIVERY_TYPE_VOICE;\n    var isEmailSupported = supported_media & IBSSO.CONSTANT.OTP_DELIVERY_TYPE_EMAIL;\n    var has2buttons = isSMSSupported && isVoiceSupported && !isEmailSupported || isSMSSupported && !isVoiceSupported && isEmailSupported || !isSMSSupported && isVoiceSupported && isEmailSupported;\n    var has3buttons = isSMSSupported && isVoiceSupported && isEmailSupported;\n    if (isSMSSupported) {\n      $(\'.otp-select-sms\').show();\n    } else {\n      $(\'.otp-select-sms\').hide();\n    }\n    if (isVoiceSupported) {\n      $(\'.otp-select-voice\').show();\n    } else {\n      $(\'.otp-select-voice\').hide();\n    }\n    if (isEmailSupported) {\n      $(\'.otp-select-email\').show();\n    } else {\n      $(\'.otp-select-email\').hide();\n    }\n    if (has2buttons) {\n      $(\'.otp-buttons\').addClass(\'twobuttons\');\n    }\n    if (has3buttons) {\n      $(\'.otp-buttons\').addClass(\'threebuttons\');\n    }\n    $(\'.otp-opener-text\').show();\n    window.IBSSO.otpSelectTimer = window.setTimeout(showOTPSelectionDelayed, window.IBSSO.otpSelectTimerTimeout);\n  }\n}\nfunction showOTPSelectionDelayed() {\n  writeDebug(\'showOTPSelectionDelayed\');\n\n  // switch Text and Voice and Email buttons\n  $(\'.otp-buttons\').addClass(\'otp-buttons-reverse\');\n\n  // show buttons\n  showOTPSelection();\n}\nfunction xyzLoginformSubmit(formElement) {\n  if (typeof window.runPublishToken === \'function\') {\n    window.runPublishToken();\n    window.setTimeout(function () {\n      formElement.submit();\n    }, 1000);\n  } else {\n    formElement.submit();\n  }\n}'},function(e,t,n){n(1)(n(31))},function(e,t){e.exports="/*prng4.js - uses Arcfour as a PRNG*/\n\nfunction Arcfour() {\n  this.i = 0;\n  this.j = 0;\n  this.S = new Array();\n}\n\n// Initialize arcfour context from key, an array of ints, each from [0..255]\nfunction ARC4init(key) {\n  var i, j, t;\n  for (i = 0; i < 256; ++i) this.S[i] = i;\n  j = 0;\n  for (i = 0; i < 256; ++i) {\n    j = j + this.S[i] + key[i % key.length] & 255;\n    t = this.S[i];\n    this.S[i] = this.S[j];\n    this.S[j] = t;\n  }\n  this.i = 0;\n  this.j = 0;\n}\nfunction ARC4next() {\n  var t;\n  this.i = this.i + 1 & 255;\n  this.j = this.j + this.S[this.i] & 255;\n  t = this.S[this.i];\n  this.S[this.i] = this.S[this.j];\n  this.S[this.j] = t;\n  return this.S[t + this.S[this.i] & 255];\n}\nArcfour.prototype.init = ARC4init;\nArcfour.prototype.next = ARC4next;\n\n// Plug in your RNG constructor here\nfunction prng_newstate() {\n  return new Arcfour();\n}\n\n// Pool size must be a multiple of 4 and greater than 32.\n// An array of bytes the size of the pool will be passed to init()\nvar rng_psize = 256;"},function(e,t,n){n(1)(n(33))},function(e,t){e.exports='// Random number generator - requires a PRNG backend, e.g. prng4.js\n\n// For best results, put code like\n// <body onClick=\'rng_seed_time();\' onKeyPress=\'rng_seed_time();\'>\n// in your main HTML document.\n\nvar rng_state;\nvar rng_pool;\nvar rng_pptr;\n\n// Mix in a 32-bit integer into the pool\nfunction rng_seed_int(x) {\n  rng_pool[rng_pptr++] ^= x & 255;\n  rng_pool[rng_pptr++] ^= x >> 8 & 255;\n  rng_pool[rng_pptr++] ^= x >> 16 & 255;\n  rng_pool[rng_pptr++] ^= x >> 24 & 255;\n  if (rng_pptr >= rng_psize) rng_pptr -= rng_psize;\n  //alert("rng_psize: "+rng_psize);\n}\n\n// Mix in the current time (w/milliseconds) into the pool\nfunction rng_seed_time() {\n  rng_seed_int(new Date().getTime());\n}\n\n// Initialize the pool with junk if needed.\nif (rng_pool == null) {\n  rng_pool = new Array();\n  rng_pptr = 0;\n  var t;\n  if (navigator.appName == "Netscape" && navigator.appVersion < "5" && window.crypto) {\n    // Extract entropy (256 bits) from NS4 RNG if available\n    var z = window.crypto.random(32);\n    for (t = 0; t < z.length; ++t) rng_pool[rng_pptr++] = z.charCodeAt(t) & 255;\n  }\n  while (rng_pptr < rng_psize) {\n    // extract some randomness from Math.random()\n    t = Math.floor(65536 * Math.random());\n    rng_pool[rng_pptr++] = t >>> 8;\n    rng_pool[rng_pptr++] = t & 255;\n  }\n  rng_pptr = 0;\n  rng_seed_time();\n  //rng_seed_int(window.screenX);\n  //rng_seed_int(window.screenY);\n}\nfunction rng_get_byte() {\n  if (rng_state == null) {\n    rng_seed_time();\n    rng_state = prng_newstate();\n    rng_state.init(rng_pool);\n    for (rng_pptr = 0; rng_pptr < rng_pool.length; ++rng_pptr) rng_pool[rng_pptr] = 0;\n    rng_pptr = 0;\n    //rng_pool = null;\n  }\n  // TODO: allow reseeding after first request\n  return rng_state.next();\n}\nfunction rng_get_bytes(ba) {\n  var i;\n  for (i = 0; i < ba.length; ++i) ba[i] = rng_get_byte();\n}\nfunction SecureRandom() {}\nSecureRandom.prototype.nextBytes = rng_get_bytes;'},function(e,t,n){n(1)(n(35))},function(e,t){e.exports='// Depends on jsbn.js and rng.js\n\n// convert a (hex) string to a bignum object\nfunction parseBigInt(str, r) {\n  return new BigInteger(str, r);\n}\nfunction linebrk(s, n) {\n  var ret = "";\n  var i = 0;\n  while (i + n < s.length) {\n    ret += s.substring(i, i + n) + "\\n";\n    i += n;\n  }\n  return ret + s.substring(i, s.length);\n}\nfunction byte2Hex(b) {\n  if (b < 0x10) return "0" + b.toString(16);else return b.toString(16);\n}\n\n// PKCS#1 (type 2, random) pad input string s to n bytes, and return a bigint\nfunction pkcs1pad2(s, n) {\n  if (n < s.length + 11) {\n    alert("Message too long for RSA");\n    return null;\n  }\n  var ba = new Array();\n  var i = s.length - 1;\n  while (i >= 0 && n > 0) ba[--n] = s.charCodeAt(i--);\n  ba[--n] = 0;\n  var rng = new SecureRandom();\n  var x = new Array();\n  while (n > 2) {\n    // random non-zero pad\n    x[0] = 0;\n    while (x[0] == 0) rng.nextBytes(x);\n    ba[--n] = x[0];\n  }\n  ba[--n] = 2;\n  ba[--n] = 0;\n  return new BigInteger(ba);\n}\n\n// "empty" RSA key constructor\nfunction RSAKey() {\n  this.n = null;\n  this.e = 0;\n  this.d = null;\n  this.p = null;\n  this.q = null;\n  this.dmp1 = null;\n  this.dmq1 = null;\n  this.coeff = null;\n}\n\n// Set the public key fields N and e from hex strings\nfunction RSASetPublic(N, E) {\n  if (N != null && E != null && N.length > 0 && E.length > 0) {\n    this.n = parseBigInt(N, 16);\n    this.e = parseInt(E, 16);\n  } else alert("Invalid RSA public key");\n}\n\n// Perform raw public operation on "x": return x^e (mod n)\nfunction RSADoPublic(x) {\n  return x.modPowInt(this.e, this.n);\n}\n\n// Return the PKCS#1 RSA encryption of "text" as an even-length hex string\nfunction RSAEncrypt(text) {\n  var m = pkcs1pad2(text, this.n.bitLength() + 7 >> 3);\n  if (m == null) return null;\n  var c = this.doPublic(m);\n  if (c == null) return null;\n  var h = c.toString(16);\n  if ((h.length & 1) == 0) return h;else return "0" + h;\n}\n\n// Return the PKCS#1 RSA encryption of "text" as a Base64-encoded string\n//function RSAEncryptB64(text) {\n//  var h = this.encrypt(text);\n//  if(h) return hex2b64(h); else return null;\n//}\n\n// protected\nRSAKey.prototype.doPublic = RSADoPublic;\n\n// public\nRSAKey.prototype.setPublic = RSASetPublic;\nRSAKey.prototype.encrypt = RSAEncrypt;\n//RSAKey.prototype.encrypt_b64 = RSAEncryptB64;'},function(e,t,n){n(1)(n(37))},function(e,t){e.exports='/*\r\n * A JavaScript implementation of the Secure Hash Algorithm, SHA-1, as defined\r\n * in FIPS PUB 180-1\r\n * Copyright (C) Paul Johnston 2000.\r\n * See http://pajhome.org.uk/site/legal.html for details.\r\n */\n/*\r\n * Modified by Tom Wu (tjw@cs.stanford.edu) for the\r\n * XYZ JavaScript implementation.\r\n */\n\n/*\r\n * Convert a 32-bit number to a hex string with ms-byte first\r\n */\nvar hex_chr = "0123456789abcdef";\nfunction hex(num) {\n  var str = "";\n  for (var j = 7; j >= 0; j--) str += hex_chr.charAt(num >> j * 4 & 0x0F);\n  return str;\n}\n\n/*\r\n * Convert a string to a sequence of 16-word blocks, stored as an array.\r\n * Append padding bits and the length, as described in the SHA1 standard.\r\n */\nfunction str2blks_SHA1(str) {\n  var nblk = (str.length + 8 >> 6) + 1;\n  var blks = new Array(nblk * 16);\n  for (var i = 0; i < nblk * 16; i++) blks[i] = 0;\n  for (i = 0; i < str.length; i++) blks[i >> 2] |= str.charCodeAt(i) << 24 - i % 4 * 8;\n  blks[i >> 2] |= 0x80 << 24 - i % 4 * 8;\n  blks[nblk * 16 - 1] = str.length * 8;\n  return blks;\n}\n\n/*\r\n * Input is in hex format - trailing odd nibble gets a zero appended.\r\n */\nfunction hex2blks_SHA1(hex) {\n  var len = hex.length + 1 >> 1;\n  var nblk = (len + 8 >> 6) + 1;\n  var blks = new Array(nblk * 16);\n  for (var i = 0; i < nblk * 16; i++) blks[i] = 0;\n  for (i = 0; i < len; i++) blks[i >> 2] |= parseInt(hex.substr(2 * i, 2), 16) << 24 - i % 4 * 8;\n  blks[i >> 2] |= 0x80 << 24 - i % 4 * 8;\n  blks[nblk * 16 - 1] = len * 8;\n  return blks;\n}\nfunction ba2blks_SHA1(ba, off, len) {\n  var nblk = (len + 8 >> 6) + 1;\n  var blks = new Array(nblk * 16);\n  for (var i = 0; i < nblk * 16; i++) blks[i] = 0;\n  for (i = 0; i < len; i++) blks[i >> 2] |= (ba[off + i] & 0xFF) << 24 - i % 4 * 8;\n  blks[i >> 2] |= 0x80 << 24 - i % 4 * 8;\n  blks[nblk * 16 - 1] = len * 8;\n  return blks;\n}\n\n/*\r\n * Add integers, wrapping at 2^32. This uses 16-bit operations internally \r\n * to work around bugs in some JS interpreters.\r\n */\nfunction add(x, y) {\n  var lsw = (x & 0xFFFF) + (y & 0xFFFF);\n  var msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n  return msw << 16 | lsw & 0xFFFF;\n}\n\n/*\r\n * Bitwise rotate a 32-bit number to the left\r\n */\nfunction rol(num, cnt) {\n  return num << cnt | num >>> 32 - cnt;\n}\n\n/*\r\n * Perform the appropriate triplet combination function for the current\r\n * iteration\r\n */\nfunction ft(t, b, c, d) {\n  if (t < 20) return b & c | ~b & d;\n  if (t < 40) return b ^ c ^ d;\n  if (t < 60) return b & c | b & d | c & d;\n  return b ^ c ^ d;\n}\n\n/*\r\n * Determine the appropriate additive constant for the current iteration\r\n */\nfunction kt(t) {\n  return t < 20 ? 1518500249 : t < 40 ? 1859775393 : t < 60 ? -1894007588 : -899497514;\n}\n\n/*\r\n * Take a string and return the hex representation of its SHA-1.\r\n */\nfunction calcSHA1(str) {\n  return calcSHA1Blks(str2blks_SHA1(str));\n}\nfunction calcSHA1Hex(str) {\n  return calcSHA1Blks(hex2blks_SHA1(str));\n}\nfunction calcSHA1BA(ba) {\n  return calcSHA1Blks(ba2blks_SHA1(ba, 0, ba.length));\n}\nfunction calcSHA1BAEx(ba, off, len) {\n  return calcSHA1Blks(ba2blks_SHA1(ba, off, len));\n}\nfunction calcSHA1Blks(x) {\n  var s = calcSHA1Raw(x);\n  return hex(s[0]) + hex(s[1]) + hex(s[2]) + hex(s[3]) + hex(s[4]);\n}\nfunction calcSHA1Raw(x) {\n  var w = new Array(80);\n  var a = 1732584193;\n  var b = -271733879;\n  var c = -1732584194;\n  var d = 271733878;\n  var e = -1009589776;\n  for (var i = 0; i < x.length; i += 16) {\n    var olda = a;\n    var oldb = b;\n    var oldc = c;\n    var oldd = d;\n    var olde = e;\n    for (var j = 0; j < 80; j++) {\n      var t;\n      if (j < 16) w[j] = x[i + j];else w[j] = rol(w[j - 3] ^ w[j - 8] ^ w[j - 14] ^ w[j - 16], 1);\n      t = add(add(rol(a, 5), ft(j, b, c, d)), add(add(e, w[j]), kt(j)));\n      e = d;\n      d = c;\n      c = rol(b, 30);\n      b = a;\n      a = t;\n    }\n    a = add(a, olda);\n    b = add(b, oldb);\n    c = add(c, oldc);\n    d = add(d, oldd);\n    e = add(e, olde);\n  }\n  return new Array(a, b, c, d, e);\n}\nfunction core_sha1(x, len) {\n  x[len >> 5] |= 0x80 << 24 - len % 32;\n  x[(len + 64 >> 9 << 4) + 15] = len;\n  return calcSHA1Raw(x);\n}'},function(e,t,n){n(1)(n(39))},function(e,t){e.exports='//this js file deals with creatin of input forms for:\n//authentication - createLoginForm\n//set new password - createPasswordForm\n//modify password - createModifyPasswordForm\n\n//all of them rely on div element with id=authdiv being in the form if it does not exist it will create one.\n\n//create <div id="authdiv"></div> in your html page\n//specify servlet that you need to go against var invoke_servlet = "Authenticate";\n//specify what action to be taken after Login - AcctManagementCode var access=forardTo...?\nvar app_context = null;\nvar token_required = true; //some password modifications do not require token\n\nvar pass_req = "Choose a password that is six to eight characters long and contains at " + "least one number and no spaces. Make sure it is difficult for others to guess!";\nvar pass_efe_web = "The password change will be effective immediate for the purpose of logging into our web site. ";\nvar pass_efe_tws = " For the purpose of logging into the Trader Workstation however, " + " password changes made before 5:30pm (New York Time) on any business " + " day will become effective on the following business day. Password " + " changes made after 5:30pm (New York Time) on any business day will " + " not become effective until two business days after the change was made ";\nvar pass_changed = "Your Password has been changed. The change will be effective immediately " + " for the purpose of logging into our web site. ";\nvar passwordChangeCodes = new Array("NULL", "INVALID_PASSWORD", "REPEAT_PASSWORD", "INVALID_TOKEN");\npasswordChangeCodes["NULL"] = "Password Changed";\npasswordChangeCodes["INVALID_PASSWORD"] = "Invalid New Password";\npasswordChangeCodes["REPEAT_PASSWORD"] = "Do not use old passwords";\npasswordChangeCodes["INVALID_TOKEN"] = "Invalid Token";\nvar force_login_id = "forceLogin";\nvar acct_field_id = "acct_id";\nvar user_field_id = "user_name";\nvar pass_field_id = "password";\nvar npass_field_id = "npassword";\nvar npass2_field_id = "npassword2";\nvar token_field_id = "token";\nvar error_field_id = "ERRORMSG";\nvar login_type_field_id = "loginType";\nvar xyz_form_id = null;\nfunction setUserFieldId(m_in) {\n  if (m_in != null && m_in != "undefined") {\n    user_field_id = m_in;\n  }\n}\nfunction setPasswFieldId(m_in) {\n  if (m_in != null && m_in != "undefined") {\n    pass_field_id = m_in;\n  }\n}\nfunction setNPasswFieldId(m_in) {\n  if (m_in != null && m_in != "undefined") {\n    npass_field_id = m_in;\n  }\n}\nfunction setNPassw2FieldId(m_in) {\n  if (m_in != null && m_in != "undefined") {\n    npass2_field_id = m_in;\n  }\n}\nfunction setErrorFieldId(m_in) {\n  if (m_in != null && m_in != "undefined") {\n    error_field_id = m_in;\n  }\n}\nfunction setTokenFieldId(m_in) {\n  if (m_in != null && m_in != "undefined") {\n    token_field_id = m_in;\n  }\n}\nfunction setXyzFormId(m_in) {\n  if (m_in != null && m_in != "undefined") {\n    xyz_form_id = m_in;\n  }\n}\nfunction getAcctId() {\n  if (document.getElementById(acct_field_id) != null && document.getElementById(acct_field_id) != \'undefined\') {\n    return fortifyFilterOpenRedirect(document.getElementById(acct_field_id).value);\n  } else {\n    return "";\n  }\n}\nfunction getForceLogin() {\n  if (document.getElementById(force_login_id) != null && document.getElementById(force_login_id) != \'undefined\') {\n    return fortifyFilterOpenRedirect(document.getElementById(force_login_id).value);\n  } else {\n    return "";\n  }\n}\nfunction getUserName() {\n  var username = convertToLowercase(document.getElementById(user_field_id).value);\n  document.getElementById(user_field_id).value = username;\n  return fortifyFilterOpenRedirect(username);\n}\nfunction convertToLowercase(str) {\n  if (!str || typeof str !== \'string\' || str.indexOf(\'@\') !== -1) {\n    return str;\n  }\n  return str.toLowerCase();\n}\nfunction getPassword() {\n  if (suppLongPwd) {\n    return document.getElementById(pass_field_id).value;\n  } else {\n    //do the inteligent chop, if password longer than 8 and indication is that it is not supported\n    var p = document.getElementById(pass_field_id).value;\n    if (p != null && p.length > 8) {\n      return p.substr(0, 8);\n    }\n    return p;\n  }\n}\nfunction getNewPassword() {\n  return document.getElementById(npass_field_id).value;\n}\nfunction getNewPassword2() {\n  return document.getElementById(npass2_field_id).value;\n}\nfunction getToken() {\n  return fortifyFilterOpenRedirect(document.getElementById(token_field_id).value);\n}\nfunction getLoginType() {\n  var login_type;\n  try {\n    var login_type_field = document.getElementById(login_type_field_id);\n    if (login_type_field != null) {\n      if (login_type_field.nodeName === "INPUT") {\n        login_type = login_type_field.value; // <input type="hidden"> in RL page\n      }\n      if (login_type_field.nodeName === "SELECT") {\n        login_type = login_type_field.options[login_type_field.selectedIndex].value;\n      }\n    }\n  } catch (e) {}\n  return +login_type;\n}\nfunction clearUserName() {\n  //only if the field is enbled clear it.\n  if (document.getElementById(user_field_id).type == "text") {\n    document.getElementById(user_field_id).value = "";\n  }\n}\nfunction clearPassword() {\n  return document.getElementById(pass_field_id).value = "";\n}\nfunction randomizePassword() {\n  randomizeField(pass_field_id);\n}\nfunction randomizeField(fieldid) {\n  var currval = document.getElementById(fieldid).value;\n  var newval = "";\n  if (currval != null && currval.length > 0) {\n    for (var i = 0; i < currval.length; i++) {\n      newval += "x";\n    }\n  }\n  document.getElementById(fieldid).value = newval;\n}\nfunction clearNewPassword() {\n  return document.getElementById(npass_field_id).value = "";\n}\nfunction clearNewPassowrd2() {\n  return document.getElementById(npass2_field_id).value = "";\n}\nfunction usernameFocus() {\n  if (document.getElementById(user_field_id) != null && document.getElementById(user_field_id).type == "text") {\n    document.getElementById(user_field_id).disabled = false;\n    document.getElementById(user_field_id).focus();\n  }\n}\nfunction passwordFocus() {\n  document.getElementById(pass_field_id).focus();\n}\nfunction createInputField(name, id, type) {\n  var input = document.createElement("input");\n  input.type = type;\n  input.name = name;\n  input.id = id;\n  return input;\n}\n\n//handles enter key in login\nfunction handleKeystrokeLogin(evt) {\n  evt = evt ? evt : event;\n  var charCode = evt.charCode ? evt.charCode : evt.which ? evt.which : evt.keyCode;\n  if (charCode == 13 || charCode == 3) {\n    //completeAuthentication();\n  }\n}\nfunction verify_and_encrypt_password_fields(formid, errorfield, pass1_id, pass2_id) {\n  var num = /\\d+/;\n  var npass = document.getElementById(pass1_id).value;\n  var npass2 = document.getElementById(pass2_id).value;\n  if (npass != npass2) {\n    showErrorMessage(errorfield, "Passwords are not the same");\n    return false;\n  } else if (npass == null || npass.length < 8 || !npass.match(num)) {\n    showErrorMessage(errorfield, "Check password criteria");\n    return false;\n  } else {\n    encryptFormFields(formid, pass1_id);\n    encryptFormFields(formid, pass2_id);\n  }\n  return true;\n}\n\n/* encripts field with id fieldid and appends to form, setting initial value to  "" */\nfunction encryptFormFields(formid, fieldid) {\n  var mform = document.getElementById(formid);\n  var fv = document.getElementById(fieldid).value;\n  if (fv != null) {\n    var efv = do_encrypt(fv);\n    document.getElementById(fieldid).value = "";\n    //randomizeField(fieldid);\n    var input = document.getElementById("enc_" + fieldid);\n    //Bug 50143 check if field already there not to continously append password values\n    if (input == null) {\n      input = document.createElement("input");\n      input.type = "hidden";\n      input.name = "enc_" + fieldid;\n      input.id = "enc_" + fieldid;\n      if (mform != null) {\n        mform.appendChild(input);\n      }\n    }\n    input.value = efv;\n  }\n  return false;\n}\n\n//verify new passwords:\n//passwords are the same\n//password length is >6\n//need to add some error flags\n\nfunction verify_password_modification() {\n  var npass = getNewPassword();\n  var npass2 = getNewPassword2();\n  if (npass == null || npass.length < 6) {\n    return false;\n  }\n  if (npass != npass2) {\n    return false;\n  }\n  return true;\n}\nfunction createPasswordFormChangeByOperator() {\n  var passwdiv = document.getElementById("passwdiv");\n  if (passwdiv == null) {\n    if (passwdiv == null) {\n      var mbody = document.getElementsByTagName("body")[0];\n      passwdiv = document.createElement("div");\n      passwdiv.id = "passwdiv";\n      mbody.appendChild(passwdiv);\n    }\n  }\n  var datatable = document.createElement("table");\n  passwdiv.appendChild(datatable);\n  var f_row = datatable.insertRow(datatable.rows.length);\n  var f_col = f_row.insertCell(f_row.cells.length);\n  var i_col = f_row.insertCell(f_row.cells.length);\n  var infotable = document.createElement("table");\n  var i_row1 = infotable.insertRow(infotable.rows.length);\n  var i_col1 = i_row1.insertCell(i_row1.cells.length);\n  i_col1.appendChild(document.createTextNode(pass_req));\n  i_col1.className = "redEmph";\n  var i_row2 = infotable.insertRow(infotable.rows.length);\n  var i_col2 = i_row2.insertCell(i_row2.cells.length);\n  i_col2.appendChild(document.createTextNode(pass_efe_web + pass_efe_tws));\n  var authtable = document.createElement("table");\n  f_col.appendChild(authtable);\n  i_col.appendChild(infotable);\n  var row3 = authtable.insertRow(authtable.rows.length);\n  var col_31 = row3.insertCell(row3.cells.length);\n  col_31.appendChild(document.createTextNode("New Password:"));\n  var npassw = createInputField("npassword", "npassword", "password");\n  var col_32 = row3.insertCell(row3.cells.length);\n  col_32.appendChild(npassw);\n  var row4 = authtable.insertRow(authtable.rows.length);\n  var col_41 = row4.insertCell(row4.cells.length);\n  col_41.appendChild(document.createTextNode("Re-enter New Password:"));\n  var npassw2 = createInputField("npassword2", "npassword2", "password");\n  var col_42 = row4.insertCell(row4.cells.length);\n  col_42.appendChild(npassw2);\n  var row6 = authtable.insertRow(authtable.rows.length);\n  var col_61 = row6.insertCell(row6.cells.length);\n  col_61.appendChild(document.createTextNode(""));\n  var col_62 = row6.insertCell(row6.cells.length);\n  var subm = createInputField("submit", "submit", "button");\n  subm.size = 10;\n  subm.value = "SUBMIT";\n  subm.onclick = modifyPasswordByOperator;\n  col_62.appendChild(subm);\n}\nfunction showErrorMessage(field_id, text) {\n  var error_field = document.getElementById(field_id);\n  if (error_field != null) {\n    error_field.innerHTML = text;\n    error_field.style.visability = "visible";\n  }\n}\nfunction writeDebug(text) {\n  if (debug) {\n    var msgbox = document.getElementById("debugarea");\n    if (msgbox == null) {\n      msgbox = document.createElement("div");\n      msgbox.id = "debugarea";\n    }\n    var content = msgbox.innerHTML;\n    content += text + "<br/>\\n";\n    msgbox.innerHTML = content;\n    return true;\n  }\n}\nfunction GetCookie(name) {\n  var end = 0;\n  var result = 0;\n  var myCookie = " " + document.cookie + ";";\n  var searchFor = " " + name + "=";\n  var start = myCookie.lastIndexOf(searchFor);\n  if (start > -1) {\n    start += searchFor.length;\n    end = myCookie.indexOf(";", start);\n    if (end > -1) result = unescape(myCookie.substring(start, end));\n  }\n  return result;\n}\nfunction SetCookie(name, value, expires, domain) {\n  var expString = expires == 0 ? "" : "; expires =" + expires.toGMTString();\n  var domainstr = "";\n  if (domain != null && domain.length > 0) {\n    domainstr = "domain=" + domain + ";";\n  }\n  document.cookie = name + "=" + (value == 0 ? "" : escape(value)) + expString + "; path=/;" + domainstr + " ;SameSite=None; Secure";\n}\nfunction ClearCookie(name) {\n  var expDate = new Date();\n  expDate.setTime(200000);\n  SetCookie(name, 0, expDate);\n}\nfunction VerifyCookiesEnabled() {\n  var name = "testCookie";\n  var date = new Date();\n  var value = date.getTime().toString();\n  SetCookie(name, value, 0);\n  var realValue = GetCookie(name);\n  ClearCookie(name);\n  if (realValue == 0 || realValue != value) {\n    //alert("You currently have cookies disabled on your browser. You must enable cookies to proceed.");\n    return false;\n  }\n  return true;\n}\nfunction recordSK(sk) {\n  var hostname = location.hostname;\n  var domain = "";\n  //check that letter c is in domain name\n  if (hostname.indexOf(".") != -1 && hostname.indexOf("c") != -1) {\n    domain = hostname.substring(hostname.indexOf("."));\n  }\n  // alert(hostname+" "+domain);\n  if (app_context != null) {\n    SetCookie("XYZAB_" + app_context, sk, 0, domain);\n    if (app_context == "IBG.LOGIN") {\n      SetCookie("XYZAB_AM.LOGIN", sk, 0, domain);\n    }\n  }\n  // alert(hostname+" "+domain);\n  //set this for backwards compatibility TODO is to remove it\n  SetCookie("XYZAB", sk, 0, domain);\n}'},function(e,t,n){e.exports=function(e){n(41)(e),n(49)(e),n(51)(e),n(58)(e)}},function(e,t,n){e.exports=function(e){n(42)(e),n(43)(e),n(45)(e),n(46)(e),n(47)(e),n(48)(e)}},function(e,t){e.exports=function(e){e.component("amFormSecurityQuestions",{bindings:{securityQuestions:"=ngModel",rules:"<"},templateUrl:e.WEBAPP_ROOT+"/components/securityquestion/securityQuestionsForm.html",controller:["$translate","$translatePartialLoader",function(e,t){var n=function(e,t){for(var n=0;n<t.length;++n)if(t[n].question===e)return n;return-1},a=this;a.$onInit=function(){angular.isUndefined(a.securityQuestions)&&(a.securityQuestions=[]),a.displayQuestions=function(){for(var e={questions:[],selectedQuestionsCache:[]},t=0;t<a.rules.requiredQuestionCount;++t){a.securityQuestions.length<=t&&a.securityQuestions.push({question:"",answer:""}),e.questions.push([]),e.questions[t].push({question:"",answer:""});var r=a.securityQuestions[t];""!==r.question&&(e.questions[t].push(r),e.selectedQuestionsCache.push(r))}for(t=0;t<a.rules.requiredQuestionCount;++t)for(var i=0;i<a.rules.allowedQuestions.length;++i){var o=a.rules.allowedQuestions[i];-1===n(o,e.selectedQuestionsCache)&&e.questions[t].push({question:o,answer:"",enabled:!0})}return e}(),a.refreshQuestions=function(e){for(var t=a.displayQuestions.selectedQuestionsCache[e],r=a.securityQuestions[e],i=0;i<a.displayQuestions.questions.length;++i)if(i!==e){var o=a.displayQuestions.questions[i];if(angular.isDefined(t)&&angular.isDefined(t.question)&&""!==t.question)-1===n(t.question,o)&&o.push(t);if(""!==r.question){var s=n(r.question,o);-1!==s&&o.splice(s,1)}}a.displayQuestions.selectedQuestionsCache[e]=r},a.toTranslateTag=function(e){if(""===e.question)return"word.chooseOne";var t="securityQuestion."+e.question.replace(/\?/g,"");return t=(t=(t=(t=(t=(t=t.replace(/\(/g,"")).replace(/\)/g,"")).replace(/\,/g,"")).replace(/\'/g,"")).replace(/\//g,"")).replace(/ /g,"_")},a.isLoading=!0,t.addPart("/authentication.webapp/i18n/ibcust_SecQuestions_v1"),e.refresh().then(function(){a.isLoading=!1})}}]})}},function(e,t,n){e.exports=function(e){var t=n(44),a=function(e){return{name:e,isValid:t[e]}},r={0:[a("noSpecialChars"),a("beginWithLetter"),a("threeChars"),a("usernameLength")],5:[a("aliasSpecialChars"),a("beginWithLetterOrNumber"),a("threeLetters"),a("aliasLength")]};e.component("xyzCredentialForm",{require:{parentForm:"^^form"},bindings:{credential:"=ngModel",type:"<?",name:"@?"},templateUrl:e.WEBAPP_ROOT+"/components/xyzCredentialForm.html",controller:["ModalService",function(e){var t=this;t.$onInit=function(){t.type=t.type||0,t.name=t.name||"credential",t.showValidation=!1,t.isModalOpen=e.isModalOpen,t.getCredential=function(){return t.credential||""},t.onCredentialFocus=function(){t.showValidation=!0},t.validateCredential=function(){for(var e=!0,n=0;n<t.credentialValidations.length;++n)t.credentialValidations[n].isValid(t.getCredential())||(e=!1);t.parentForm.$setValidity(t.name,e)},t.credentialValidations=r[t.type],t.validateCredential()}}]})}},function(e,t){e.exports={noSpecialChars:function(e){return e.length>0&&/^[a-z0-9]+$/.test(e)},aliasSpecialChars:function(e){return e.length>0&&/^[a-z0-9.-]+$/.test(e)},beginWithLetter:function(e){return e.length>0&&e.charAt(0).match(/[a-z]/)},beginWithLetterOrNumber:function(e){return e.length>0&&e.charAt(0).match(/[a-z0-9]/)},threeChars:function(e){for(var t=0,n=0,a=0;a<e.length;++a){var r=e.charAt(a);r.match(/[0-9]/)?++n:r.match(/[a-z]/)&&++t}return t>=3&&n>=3},threeLetters:function(e){for(var t=0,n=0;n<e.length;++n){e.charAt(n).match(/[a-z]/)&&++t}return t>=3},usernameLength:function(e){return e.length>7&&e.length<10},aliasLength:function(e){return e.length>=9}}},function(e,t){e.exports=function(e){e.component("xyzPasswordForm",{require:{parentForm:"^^form"},bindings:{password:"=ngModel",username:"<",encryptInvoker:"<",keyFetchFn:"&?"},templateUrl:e.WEBAPP_ROOT+"/components/xyzPasswordForm.html",controller:["$window","ModalService",function(e,t){var n=this;n.$onInit=function(){this.passwordValidations=[],this.isEdit=!0,!angular.isUndefined(n.keyFetchFn)&&angular.isFunction(n.keyFetchFn)||(n.keyFetchFn=e.amHooks.fetchAnonKey,this.isEdit=!1),this.isModalOpen=t.isModalOpen,this.showPasswordValidation=!1,this.getPassword=function(){return this.password||""},this.onPasswordFocus=function(){n.showPasswordValidation=!0},this.validatePassword=function(){for(var e=!0,t=0;t<this.passwordValidations.length;++t){var n=this.passwordValidations[t];n.valid=n.isValid(this.getPassword()),n.valid||(e=!1)}this.parentForm.$setValidity("password",e)},this.encryptInvoker.invoke=function(){return n.keyFetchFn().then(function(t){if(angular.isUndefined(n.password)||0===n.password.length)return"";var a=t.data.publicKey;return rsa=new RSAKey,rsa.setPublic(a,"3"),e.do_encrypt(n.password)},function(e){return""})},this.needsTextDangerClass=function(e){return"error"===e.type&&!e.valid},this.needsTextSuccessClass=function(e){return"requirement"===e.type&&e.valid},this.needsFaTimesClass=function(e){return"requirement"===e.type&&!e.valid},this.needsFaCheckClass=function(e){return"requirement"===e.type&&e.valid},this.needsFaExclamationClass=function(e){return"error"===e.type&&!e.valid},this.isValidationVisible=function(e){return"requirement"===e.type||"error"===e.type&&!e.valid},this.passwordValidations.push({name:"username",isValid:function(e){return e.length>0&&e!==n.username},type:"requirement"}),this.passwordValidations.push({name:"length",isValid:function(e){return e.length>7&&e.length<41},type:"requirement"}),this.passwordValidations.push({name:"oneLetter",isValid:function(e){return/.*[a-zA-Z].*/.test(e)},type:"requirement"}),this.passwordValidations.push({name:"oneNumber",isValid:function(e){return/.*[0-9].*/.test(e)},type:"requirement"}),this.passwordValidations.push({name:"invalidCharacter",isValid:function(e){return 0===e.length||/^[a-zA-Z0-9~!@#\$%\^&\*()_\+\|\.\{\}\[\]\?,<>=:-]+$/.test(e)},type:"error"}),this.validatePassword()}}]})}},function(e,t){e.exports=function(e){e.component("xyzUsernameForm",{require:{parentForm:"^^form"},bindings:{user:"=ngModel",encryptInvoker:"<",keyFetchFn:"&?"},templateUrl:e.WEBAPP_ROOT+"/components/xyzUsernameForm.html",controller:["AlphaTestService",function(e){var t=this;t.$onInit=function(){t.user=t.user||{},t.credentialFieldName="username",t.user.credentialType=0,t.isLoading=!0,e.fetch("CREATE_ALIAS",!0).then(function(e){e&&e.data&&e.data.isEnabled&&(t.user.credentialType=5,t.credentialFieldName="alias")},function(e){t.user.credentialType=0}).finally(function(){t.isLoading=!1}),t.getUsername=function(){return t.user.username||""}}}]})}},function(e,t){e.exports=function(e){e.component("xyzBundleAuthentication",{bindings:{authInvoker:"<",authCallback:"<",username:"@?"},template:'<section id="loginWrapper"></section><am-form-error name="powToken"></am-form-error>',controller:["JsService","LanguageService","$q","$compile","$scope","$timeout","$rootScope",function(e,t,n,a,r,i,o){var s=this;s.isXyzRequired=function(e){return $("[name="+e+"]").is(":visible")},s.$onInit=function(){var l=angular.isDefined(s.username)&&s.username.length>0;s.injectLoginForm=function(){function e(e,t){var n=angular.element(t),a=n.attr("name");"username"===a?n.attr("ng-model","$ctrl.username"):(a||(a=n[0].localName+e.toString(),n.attr("name",a)),n.attr("ng-model","$ctrl."+a.replace("-","_"))),n.attr("ng-required","$ctrl.isXyzRequired('"+a+"')")}var n="/sso/",l={WRAPPER:"#loginWrapper",SHOW_TITLE:!1,CONSOLE_LOGGING:!1,LOGIN_DEBUG:!1,DEFINED_USERNAME:s.username,APPLICATION:"VALIDATE_USER",LOCALE:t.getCurrentLanguage(),HIDE_SUBMIT:!0,LOGINTYPE:"Live",AUTHENTICATED_CALLBACK:function(e,t){e?console.error("Authentication error:",e):(s.authCallback(t),window.IBSSO.XYZ.destroy())},INJECTED_CALLBACK:function(){window.IBSSO.XYZ.httpClient.setPrefix(n),i(function(){angular.element($("#loginWrapper")).find("input").each(e),angular.element($("#loginWrapper")).find("select").change(function(e){i(function(){o.$applyAsync(angular.noop)},100)}),a($("#loginWrapper"))(r)},100)}};window.IBSSO.XYZ.inject(l)};var c=e.injectJavascript("xyzBundleAuth","/sso/lib/xyz.bundle.min.js");n.all([c]).then(function(e){s.injectLoginForm()}).catch(function(e){s.error=!0,console.error("xyz.bundle.min.js was not injected successfully",e)}),s.authInvoker.resetAuth=function(){l||delete s.username,s.injectLoginForm()},s.authInvoker.invoke=function(){window.IBSSO.XYZ.formSubmit()}}}]})}},function(e,t){e.exports=function(e){e.component("xyzBundleAuthenticationForm",{bindings:{authInvoker:"<",authCallback:"<",labelText:"@",username:"@?"},template:function(){var e="";return e+='<generic-form-data label-text="{{ $ctrl.labelText }}" label-align="top">',e+='<xyz-bundle-authentication auth-invoker="$ctrl.authInvoker" auth-callback="$ctrl.authCallback" username="{{ $ctrl.username }}">',e+="</xyz-bundle-authentication> </generic-form-data>",e}})}},function(e,t,n){e.exports=function(e){n(50)(e)}},function(e,t){e.exports=function(e){e.directive("xyzAuthentication",["UserAuthService","ModalService","CredentialService",function(e,t,n){return{restrict:"E",scope:{authUrl:"@",authCallback:"<",authInvoker:"<",authVersion:"<?",allowSeamless:"<?",skipTwoFactor:"<?",identityUsername:"@?username",usernameLabelKey:"@?",passwordLabelKey:"@?",publicKey:"@?"},template:function(n,a){var r="";return r+="<div>",r+='<loading-overlay ng-if="authInvoker.isAuthenticating"></loading-overlay>',r+='<am-form-input type="text" ng-model="identityUsername" label-text="{{usernameLabelKey | translate}}" is-disabled="twoFactorUser || lockedUser" model-listener="onUsernameChange()" required></am-form-input>',r+='<am-form-input type="password" ng-model="identityPassword" hook-enter="authInvoker.invoke()" label-text="{{passwordLabelKey | translate}}" is-disabled="twoFactorUser" required></am-form-input>',r+='<div ng-if="isM2fs">',r+='<am-form-select label-text="{{\'identity.auth.m2fs\' | translate}}" ng-model="$ctrl.selectedTf" model-listener="onM2fsChange()" options="::m2fsOptions" option-key="getM2fsKey" no-translate="true" hide-empty-option="true" required></am-form-select>',r+="</div>",r+='<div id="xyzAuthDiv" style="display: none">',r+='<input id="twofactoruser" type="hidden" value="{{twoFactorUser}}" />',r+='<input id="actual_user_name" type="hidden" value="'+e.getUsername()+'" />',r+='<label id="chlgdescr_SWTK" style="display: none;">{{\'identity.auth.secCode\' | translate}}</label>',r+='<label id="chlgdescr_IBTK" style="display: none;">{{\'identity.auth.tempSecCode\' | translate}}</label>',r+='<label id="chlgdescr_SWCR" style="display: none;">{{\'identity.auth.respString\' | translate}}</label>',r+='<label id="chlgdescr_Bingo" style="display: none;">{{\'identity.auth.cardValues\' | translate}}</label>',r+='<input id="multiuser" type="hidden" value="false" />',r+='<form id="xyzForm" name="xyzForm">',r+='<input type="text" id="xyzUsername" name="xyzUsername" autocomplete="off" />',r+='<input type="password" id="xyzPassword" name="xyzPassword" autocomplete="off" />',r+="</form>",r+="</div>",r+="</div>",r+='<div class="row">',t.isModalOpen()?r+='<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">':r+='<div class="col-xs-12 col-sm-12 col-md-12 col-lg-8">',r+='<div ng-if="authErrors[\'password\']" class="alert alert-danger">',r+="<p>{{'field.error.' + authErrors['password'] | translate}}</p>",r+="</div>",r+='<div ng-if="authErrors[\'auth_internal\']" class="alert alert-danger">',r+="<p>{{'internal.error.' + authErrors['auth_internal'] | translate}}</p>",r+="</div>",r+="</div>",r+="</div>",r},controllerAs:"$ctrl",controller:["$scope","$timeout","$compile","$window","$translate",function(e,t,a,r,i){var o,s,l,c,u,d,p=this,g={3:"SECURITY_CODE_CARD",4:"ALPINE",4.1:"DIGITAL_SECURITY_CARD",4.2:"SMS_ONETIME",5.1:"DIGITAL_SECURITY_CARD_PLUS","5.2a":"IB_KEY","5.2i":"IB_KEY",6:"TEMPORARY_CODE"},f=function(t,a){var r={result:"SUCCESS",M1:t,M2:a};r.password=e.publicKey?n.getEncryptedPassword(e.identityPassword,e.publicKey):void 0,p.authCallback(r)},m=function(){var n=r.STATE;if("AUTHENTICATED"===n){var i=$("#xyzForm").find("#M1").val(),o=$("#xyzForm").find("#M2").val();f(i,o)}else if("FAILEDAUTH"===n)e.authErrors.password="invalidCredentials",p.authCallback({result:"AUTH_FAIL"});else if(r.twoFactorUser){if(e.skipTwoFactor){i=r.M,o=r.M2;f(i,o)}e.twoFactorUser=!0,e.twoFactorType=r.twoFactType;var s=$("#authtable");a(s)(e),t(function(){$("#chlginput",s).focus(),$("a[name^='help_']").click(function(){r.showXYZHelpWindow.apply(this)})},50),p.authCallback({result:"TF_PENDING"})}else e.authErrors.auth_internal="request_submit",p.authCallback({})};this.$onInit=function(){e.usernameLabelKey=e.usernameLabelKey||"identity.label.username",e.passwordLabelKey=e.passwordLabelKey||"identity.label.password",e.authVersion=e.authVersion||0,e.allowSeamless=e.allowSeamless||!1,e.skipTwoFactor=e.skipTwoFactor||!1,r.VERSION=e.authVersion,r.SF_VERSION=e.authVersion,r.PUSH_AUTH_INSTRUCTIONS=i.instant("identity.auth.ibKeySeamless")+"<br />",r.PUSH_AUTH_ALT_LINK=i.instant("identity.auth.ibKeySeamlessNoMessage"),this.resetAuth=function(){p.selectedTf="",r.userSfTypes=[],r.user_name=null,r.selectedSF="",r.twoFactorUser=!1,r.PUSH_AUTH_ATTEMPTS=0,e.challenge="",e.twoFactorUser=!1,e.isM2fs=!1,e.m2fsOptions=[],e.twoFactorType="",e.lockedUser||(e.identityUsername=""),e.identityPassword="",e.authInvoker.isAuthenticating=!1,delete e.authInvoker.authResults;var t,n="";n+='<div id="authtable">',n+='<div id="twofactauth"></div>',n+=(t='<div id="otp-delivery" class="otp-delivery-section" style="display: none;">',t+='<div class="form-group">',t+='<div class="row">',t+='<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">',t+="<h6 class=\"subtitle otp-title\">{{'identity.auth.smsDeliveryMethod' | translate}}</h6>",t+='<p class="otp-text"></p>',t+="</div>",t+="</div>",t+="</div>",t+='<div class="form-group">',t+='<div class="row">',t+='<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">',t+='<div class="panel-btn-left">',t+="<p>",t+='<am-button class="otp-select-sms" btn-type="primary" btn-text="{{\'identity.auth.smsTextMethod\' | translate}}" on-click="selectSmsDelivery(\'text\')" btn-icon="fa-comment"></am-button>',t+='<am-button class="otp-select-voice" btn-type="primary" btn-text="{{\'identity.auth.smsVoiceMethod\' | translate}}" on-click="selectSmsDelivery(\'voice\')" btn-icon="fa-phone-volume"></am-button>',t+='<am-button class="otp-select-email" btn-type="primary" btn-text="{{\'identity.auth.smsEmailMethod\' | translate}}" on-click="selectSmsDelivery(\'email\')" btn-icon="fa-envelope"></am-button>',t+="</p>",t+="</div>",t+="</div>",t+="</div>",t+="</div>",t+='<div class="form-group">',t+='<div class="row">',t+='<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">',t+='<am-button btn-text="{{\'word.cancel\' | translate}}" on-click="cancelSmsDelivery()"></am-button>',t+="</div>",t+="</div>",t+="</div>",t+="</div>"),n+="</div>";var a="";a+='<div id="twofactparent" style="display: none;">',a+='<div id="twofactbase">',a+='<div class="form-group" id="chlgtext_Bingo" style="display: none;">',a+="{{'identity.auth.bingoDesc' | translate}}",a+="</div>",a+='<div class="form-group">',a+='<div class="row">',a+='<div class="hidden-xs hidden-sm col-md-6 col-lg-4"></div>',a+='<div id="chlgtext" class="col-xs-12 col-sm-12 col-md-6 col-lg-4"></div>',a+="</div>",a+="</div>",a+='<div class="form-group" id="chlgtext_SWCR" style="display: none;">',a+="{{'identity.auth.challengeDesc' | translate}}: ",a+="</div>",a+='<div class="form-group">',a+='<div class="row">',a+='<div class="col-xs-12 col-sm-12 col-md-6 col-lg-4">',a+='<label id="chlgdescr" class="control-label"></label>',a+="</div>",a+='<div class="col-xs-12 col-sm-12 col-md-6 col-lg-4">',a+='<input type="text" name="chlginput" ng-model="challenge" id="chlginput" hook-enter="authInvoker.invoke()" class="form-control" autocomplete="off" ng-required="twoFactorUser" />',a+='<a href="javascript:void(0);" class="otp-opener-text" style="display: none" ng-click="showSmsDeliveryOptions()">{{\'identity.auth.smsNoCode\' | translate}}</a>',a+="</div>",a+="</div>",a+="</div>",a+="</div>",a+="</div>",a+="</div>";var i="";i+='<div id="seamlessAuthTable" class="row">',i+='<div class="col-xs-12 col-sm-12 col-md-12 col-lg-8">',i+='<span id="ibKeyInst" style="display:none"></span>',i+="<br />",i+="</div>",i+="</div>",$("#authtable").remove(),angular.element(n).insertAfter($("#xyzAuthDiv")),$("#twofactparent").remove(),angular.element(a).insertAfter($("#authtable")),$("#seamlessAuthTable").remove(),angular.element(i).insertAfter($("#twofactparent"))},o=r.initHandler,r.initHandler=function(){!1!==o.apply(this)?($("#xyzPassword").val(e.identityPassword),r.submit_form=!1,r.completeAuthentication("xyzPassword")):m()},s=r.completeAuthenticationHandler,r.completeAuthenticationHandler=function(){s.apply(this),m()},l=r.completeAuthenticationHandlerV2,r.completeAuthenticationHandlerV2=function(){l.apply(this),(angular.isUndefined(r.userSfTypes)||0===r.userSfTypes.length)&&m()},d=r.showSecondFactorList,r.showSecondFactorList=function(){p.selectedTf=localStorage.getItem(r.SELECTED_SF_KEY),e.m2fsOptions=r.userSfTypes,e.isM2fs=!0,p.authCallback({result:"M2FS_PENDING"})},c=r.authenticateTwoFactorHandlerSignNew,r.authenticateTwoFactorHandlerSignNew=function(){var t=this.req.responseXML.documentElement.getElementsByTagName("auth_res")[0].firstChild.nodeValue;if("true"===(t=t.replace(/^\s+/,"").replace(/\s+$/,""))){var n=r.M,a=r.M2;f(n,a)}else e.authErrors.password="invalidTwoFactor",p.resetAuth(),p.authCallback({result:"TF_FAIL"})},u=r.xyz_html5_placeholderCheck,r.xyz_html5_placeholderCheck=function(){return!1},e.allowSeamless&&(r.specialPushAuthRequest=function(e){e&&(r.PHONE_AUTH_ROOT=e);var t="ACTION=COMPLETETWOFACT&APP_NAME="+r.app_name+"&USER="+r.user_name+"&VERSION="+r.VERSION+"&PUSH=true";1===r.VERSION?t+="&SF="+r.selectedSF:t+="&SF="+r.twoFactType,++r.PUSH_AUTH_ATTEMPTS,new xhr.ContentLoader("POST",r.url,!0,r.specialPushAuthHandler,t)},r.specialPushAuthHandler=function(){var t=this.req.responseXML.documentElement;if(r.PUSH_AUTH_ATTEMPTS>=r.PUSH_AUTH_MAX_ATTEMPTS)return e.authErrors.password="tfPushTimeout",p.resetAuth(),void p.authCallback({result:"PUSH_TIMEOUT"});null!=t.getElementsByTagName("auth_res")&&("true"===t.getElementsByTagName("auth_res")[0].firstChild.nodeValue?(r.PUSH_AUTH_ATTEMPTS=0,r.authenticateTwoFactorHandlerSignNew.apply(this)):r.pushTimeout=setTimeout(r.specialPushAuthRequest,r.PUSH_CHECK_AUTH_INTERVAL))},r.specialCompleteAuth_1=function(){var e="ACTION=COMPLETEAUTH_1_NEW&APP_NAME="+r.app_name+"&USER="+r.user_name+"&ACCT="+r.acct_id+"&M1="+r.M+"&VERSION="+r.VERSION+"&SF="+r.selectedSF;new xhr.ContentLoader("POST",r.url,!0,r.completeAuthenticationHandler,e)}),e.lockedUser=angular.isDefined(e.identityUsername)&&e.identityUsername.length>0,e.authErrors={},e.authInvoker.resetAuth=this.resetAuth,this.resetAuth(),r.bypass_empty_field=!0,r.url=e.authUrl,r.xyz_form_id="xyzForm",r.xyz_initialize()},e.authInvoker.getUsername=function(){return e.identityUsername},e.authInvoker.invoke=function(){angular.isUndefined(e.identityUsername)||0===e.identityUsername.length||(e.authErrors={},e.authInvoker.isAuthenticating=!0,p.authCallback=function(t){t.username=e.identityUsername,e.authInvoker.authResults=t,e.$apply(function(){e.authInvoker.isAuthenticating=!1,e.authCallback(t)})},e.twoFactorUser?r.authenticateTwoFactorSignNew():($("#xyzUsername").val(e.identityUsername),r.initAuthentication("xyzUsername")))},e.onUsernameChange=function(){angular.isDefined(e.identityUsername)&&(e.identityUsername=e.identityUsername.toLowerCase())},e.getM2fsKey=function(e){return"5"!==e?i.instant("secureLoginDeviceType."+g[e]):i.instant("secureLoginDeviceType.PLATINUM")+" / "+i.instant("secureLoginDeviceType.GOLD")},e.onM2fsChange=function(){$("#chlgtext").html(""),$("#chlgtext_Bingo").hide(),$("#chlgtext_SWCR").hide(),angular.isUndefined(p.selectedTf)||null===p.selectedTf||"null"===p.selectedTf||(localStorage.setItem(r.SELECTED_SF_KEY,p.selectedTf),r.selectedSF=p.selectedTf,r.completeAuthentication_1())},e.showSmsDeliveryOptions=function(){r.showOTPSelection()},e.selectSmsDelivery=function(e){"text"===e?r.selectOTPText():"voice"===e?r.selectOTPVoice():"email"===e&&r.selectOTPEmail()},e.cancelSmsDelivery=function(){r.cancelOTPSelection()},this.$onDestroy=function(){r.initHandler=o,r.completeAuthenticationHandler=s,r.completeAuthenticationHandlerV2=l,r.showSecondFactorList=d,r.authenticateTwoFactorHandlerSignNew=c,r.xyz_html5_placeholderCheck=u,e.allowSeamless&&(r.clearPush(),delete r.specialPushAuthRequest,delete r.specialPushAuthHandler,delete r.specialCompleteAuth_1)}}]}}])}},function(e,t,n){e.exports=function(e){n(52)(e),n(56)(e)}},function(e,t,n){e.exports=function(e){n(53)(e),n(54)(e),n(55)(e)}},function(e,t){e.exports=function(e){e.component("credentialChangeStep",{template:function(){var e="";return e+='<div page-structure ng-form="$ctrl.credentialForm">',e+='<xyz-authentication username="{{$ctrl.credential}}" public-key="{{$ctrl.publicKey}}" auth-invoker="$ctrl.authInvoker" auth-callback="$ctrl.authCallback" auth-url="/AccountManagement/UserAuthHandler" skip-two-factor="true" username-label-key="{{\'userCredential.type.\' + $ctrl.credentialType}}"></xyz-authentication>',e+='<xyz-credential-form ng-model="$ctrl.identityCredential" type="$ctrl.credentialType"></xyz-credential-form>',e+="</div>",e},controller:["DynamicSequenceService",function(e){var t=this;t.$onInit=function(){t.publicKey=e.getSequenceData().publicKey,t.credential=e.getSequenceData().credential,t.credentialType=e.getSequenceData().credentialType,t.authInvoker={},t.authCallback=function(n){if("SUCCESS"===n.result){var a={M1:n.M1,M2:n.M2,credential:t.identityCredential,password:n.password};e.stepForward(a).catch(function(e){t.authInvoker.resetAuth()})}},e.configureButtons({continueBtn:{onClick:function(){t.authInvoker.invoke()}}})}}]})}},function(e,t){e.exports=function(e){e.component("credentialChangeCompletionStep",{templateUrl:e.WEBAPP_ROOT+"/sequences/credential/credentialChangeCompletion.html",controller:["$translate","ModalService","DynamicSequenceService","AmInterfaceService",function(e,t,n,a){var r=this;r.$onInit=function(){r.request=n.getSequenceData().request,r.logout=a.logout,t.openInfoModal({title:e.instant("word.logout"),modalData:{infoContent:e.instant("loginTask.unsupportedCredential.completion",{credential:r.request.credential,strongStart:"<strong>",strongEnd:"</strong>",lineBreak:"<br>"})}}).then(function(){r.logout()})}}]})}},function(e,t){e.exports=function(e){e.controller("CredentialChangeSequenceController",function(){var t=this;t.$onInit=function(){t.sequenceSource=e.SERVER_PATH+"/Credential/Sequence"}})}},function(e,t,n){e.exports=function(e){n(57)(e)}},function(e,t){e.exports=function(e){e.controller("ConfirmIdentityController",["$translate","DynamicSequenceService","EmailTokenService",function(e,t,n){var a=this;a.$onInit=function(){a.identityCriteria=t.getSequenceData().identityCriteria,a.identityAccount=t.getSequenceData().identityAccount,a.tokenEmailAddress=t.getSequenceData().tokenEmailAddress,a.emailTokenType=t.getSequenceData().emailTokenType,a.username=t.getSequenceData().credential,a.authInvoker={},a.emailToken="",a.resendStatus="",a.getErrors=function(){return t.getSequenceData().errors},a.goBack=t.stepBack,a.submitIdentity=function(){if(!a.isContinueDisabled()){var e=a.authInvoker.authResults,t=angular.isDefined(e)&&"SUCCESS"===e.result;t&&e.username!==a.authInvoker.getUsername()&&(a.authInvoker.resetAuth(),t=!1),!t&&angular.isFunction(a.authInvoker.invoke)?a.authInvoker.invoke():angular.isDefined(e)?a.authCallback(e):a.authCallback({result:"SUCCESS"})}},a.resendToken=function(){a.isLoading=!0,n.sendEmailToken(a.emailTokenType).then(function(e){a.resendStatus="SUCCESS"},function(e){a.resendStatus="FAIL"}).finally(function(){a.isLoading=!1})},a.isContinueDisabled=function(){return!a.identityForm||!a.identityForm.$valid||a.authInvoker.isAuthenticating},a.authCallback=function(e){delete a.getErrors().identity;var n;n={powToken:e.powToken,username:e.user,emailToken:a.emailToken},t.stepForward(n).catch(function(e){a.authInvoker.resetAuth()})},t.configureButtons({canGoBack:!0,continueBtn:{isDisabled:a.isContinueDisabled,onClick:a.submitIdentity}})}}])}},function(e,t,n){e.exports=function(e){n(59)(e),n(60)(e)}},function(e,t){e.exports=function(e){e.factory("CredentialService",["$window",function(e){var t={getEncryptedPassword:function(t,n){return e.rsa=new RSAKey,rsa.setPublic(n,"3"),e.do_encrypt(t)}};return t}])}},function(e,t,n){e.exports=function(e){var t=n(61).LoginParams;e.constant("$INIT_REQUESTS",{}),e.factory("UserAuthService",["USER_PLATFORM","USER_SESSION_ID","WHITE_BRANDING_DETAILS","$INIT_REQUESTS","$timeout","ResourceService","PageService",function(e,n,a,r,i,o,s){var l="",c={getUsername:function(){return l},getPlatform:function(){return""},setUsername:function(e){l=e}};return c.login=function(t,l){return function(e){var t=e;if(t.startsWith("http")){var n=t.indexOf("//");n=(t=t.substring(n+2)).indexOf("/"),t=t.substring(n)}for(var a=t.split("/"),i="",s=1;s<a.length-1;++s)i+="/"+a[s];return i+="/Init",angular.isUndefined(r[i])&&(r[i]=o.fetch(i)),r[i]}(t).then(function(r){return o.create(t,l).then(function(t){if(c.setUsername(l.username),angular.isDefined(t)&&angular.isDefined(t.data)){if(angular.isArray(t.data.activeSelections)){var r=t.data.activeSelections;s.setActivePickerSelections(r)}angular.isDefined(t.data.platform)&&e.set(t.data.platform),angular.isDefined(t.data.sessionId)&&n.set(t.data.sessionId),angular.isDefined(t.data.isWhiteBranded)&&a.setBranded(t.data.isWhiteBranded),angular.isDefined(t.data.whiteBrandingTitle)&&a.setTitle(t.data.whiteBrandingTitle)}}).finally(function(){i(angular.noop,250)})})},c.authenticate=function(e,n,a){var r=new t(n,a);return r.user_name=n,c.login(e,r)},c.dependencyLogin=function(e){for(var a=c.getUsername(),r=new t(a,n.get()),i=[],o=0;o<s.getActivePickerSelections().length;++o){var l=s.getActivePickerSelections()[o];i.push(l.accountId)}return r.accountIds=i,c.login(e,r)},c.moduleLogin=function(e,n){var a=n.getAttribute("data-username"),r=n.getAttribute("data-session-id"),i=n.getAttribute("data-account-id"),o=new t(a,r),s=[];return s.push(i),o.accountIds=s,c.login(e,o)},c}])}},function(e,t,n){e.exports={LoginParams:n(62)}},function(e,t){e.exports=function(e,t){this.username=e||"",this.sessionId=t||"",this.accountIds=[]}},function(e,t){},function(e,t,n){"use strict";n.r(t);n(65),n(67),n(69),n(71),n(73),n(75),n(77),n(79),n(81);function a(e){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r=angular.module("ibmarketing.common",[]);r.AM_SERVER_PATH="/AccountManagement",r.config(["$httpProvider","$provide","$injector","$compileProvider","$translateProvider",function(e,t,n,i,o){t.constant("AM_BRANCH",window.AM_BRANCH||"CORE"),t.constant("AM_BAR_TYPE",window.AM_BAR_TYPE),t.constant("CRM_RACKSPACE_HOST",window.CRM_RACKSPACE_HOST||""),t.constant("SESSION_ID",window.AM_SESSION_ID||""),t.constant("CONTENT_HOST",window.AM_CONTENT_HOST||""),t.constant("INITIAL_PAGE",window.AM_INITIAL_PAGE||new PageEntry({})),t.constant("LOGIN_APPLICATION",window.LOGIN_APPLICATION||""),t.constant("LOGIN_LANGUAGE",window.AM_LOGIN_LANGUAGE||"en"),t.constant("ACTIVE_CONTEXT",window.ACTIVE_CONTEXT||"AM_DEPENDENCY"),t.constant("NATIVE_LOGIN_MESSAGE",window.NATIVE_LOGIN_MESSAGE||"");var s=window.USER_PLATFORM||"WEB",l=window.USER_PLATFORM_VERSION||"";t.constant("USER_PLATFORM",{get:function(){return s},set:function(e){s=e},getVersion:function(){return l},setVersion:function(e){l=e}});var c=window.APPLICATION_THEME||"IBKR";t.constant("APPLICATION_THEME",{get:function(){return c},set:function(e){c=e}});var u=window.COLOR_THEME||"LIGHT";t.constant("COLOR_THEME",{get:function(){return u},set:function(e){u=e}});var d="STANDARD";t.constant("SIZE_THEME",{get:function(){return d},set:function(e){return d=e}});var p=window.AM_SESSION_ID||"";t.constant("USER_SESSION_ID",{get:function(){return p},set:function(e){p=e}});var g=window.WHITE_BRANDING_TITLE||"IBKR",f=window.IS_WHITE_BRANDED||!1;t.constant("WHITE_BRANDING_DETAILS",{isBranded:function(){return f},setBranded:function(e){f=e},getTitle:function(){return g},setTitle:function(e){g=e}}),e.interceptors.push("amResponseInterceptor"),r.dynamicComponents={};var m=function(e){var t=e.name,n=e.options;angular.isDefined(r.dynamicComponents[t])||(r.dynamicComponents[t]=n,i.component(t,n))};r.loadDynamicComponent=function(e){if(Array.isArray(e))for(var t=0;t<e.length;++t)m(e[t]);else{if("object"!==a(e))throw"Cannot load component: "+e;m(e)}},o.useInterpolation("ibTranslationInterpolationFactory"),$(document).on("click",function(e){var t=$(e.target).parents(".persistent-dropdown"),n=t.length>0?t[0]:null;if($(".persistent-dropdown").each(function(e,t){t!==n&&$(t).find(".dropdown-menu").removeClass("show")}),0!==t.length){var a=$(n).find(".dropdown-menu");$(e.target).closest(".persistent-dropdown-closer").length>0&&$(a).hasClass("show")?$(a).removeClass("show"):$(a).addClass("show")}})}]),r.run(["$window","PageService","MessageHandlerService","UserPlatformService","NativeAppCommunicationProvider",function(e,t,n,a,r){e.addEventListener("message",function(e){var t=n.getMessageHandlers();for(var a in t)t.hasOwnProperty(a)&&a.startsWith(e.origin)&&angular.isFunction(t[a])&&t[a](e)},!1),$(window).resize(function(){t.resizeContent()}),a.isNativeMobileApplication()&&(e.sendToWebApp=r.sendToWebApp)}]),r.WEBAPP_ROOT="/common.webapp",n(83)(r),n(142)(r),n(151)(r),n(192)(r),n(198)(r),n(212)(r),n(214)(r),n(225)(r),n(241)(r,PageEntry)},function(e,t,n){n(1)(n(66))},function(e,t){e.exports="if (!Array.prototype.find) {\n  Object.defineProperty(Array.prototype, 'find', {\n    value: function value(predicate) {\n      if (this == null) {\n        throw new TypeError('\"this\" is null or not defined');\n      }\n      var o = Object(this);\n      var len = o.length >>> 0;\n      if (typeof predicate !== 'function') {\n        throw new TypeError('predicate must be a function');\n      }\n      var thisArg = arguments[1];\n      var k = 0;\n      while (k < len) {\n        var kValue = o[k];\n        if (predicate.call(thisArg, kValue, k, o)) {\n          return kValue;\n        }\n        k++;\n      }\n      return undefined;\n    },\n    configurable: true,\n    writable: true\n  });\n}\n;"},function(e,t,n){n(1)(n(68))},function(e,t){e.exports="if (!Array.prototype.findIndex) {\n  Object.defineProperty(Array.prototype, 'findIndex', {\n    value: function value(predicate) {\n      if (this == null) {\n        throw new TypeError('\"this\" is null or not defined');\n      }\n      var o = Object(this);\n      var len = o.length >>> 0;\n      if (typeof predicate !== 'function') {\n        throw new TypeError('predicate must be a function');\n      }\n      var thisArg = arguments[1];\n      var k = 0;\n      while (k < len) {\n        var kValue = o[k];\n        if (predicate.call(thisArg, kValue, k, o)) {\n          return k;\n        }\n        k++;\n      }\n      return -1;\n    },\n    configurable: true,\n    writable: true\n  });\n}\n;"},function(e,t,n){n(1)(n(70))},function(e,t){e.exports="if (!Array.prototype.includes) {\n  Object.defineProperty(Array.prototype, 'includes', {\n    value: function value(searchElement, fromIndex) {\n      if (this == null) {\n        throw new TypeError('\"this\" is null or not defined');\n      }\n      var o = Object(this);\n      var len = o.length >>> 0;\n      if (len === 0) {\n        return false;\n      }\n      var n = fromIndex | 0;\n      var k = Math.max(n >= 0 ? n : len - Math.abs(n), 0);\n      function sameValueZero(x, y) {\n        return x === y || typeof x === 'number' && typeof y === 'number' && isNaN(x) && isNaN(y);\n      }\n      while (k < len) {\n        if (sameValueZero(o[k], searchElement)) {\n          return true;\n        }\n        k++;\n      }\n      return false;\n    }\n  });\n}\n;"},function(e,t,n){n(1)(n(72))},function(e,t){e.exports="if (!String.prototype.replaceAll) {\n  String.prototype.replaceAll = function (search, replace) {\n    return this.split(search).join(replace);\n  };\n}"},function(e,t,n){n(1)(n(74))},function(e,t){e.exports="if (typeof window.getCookie !== 'function') {\n  window.getCookie = function (cookieName) {\n    var nameEq = cookieName + '=';\n    var cookies = document.cookie.split(';');\n    for (var i = 0; i < cookies.length; ++i) {\n      var cookie = cookies[i];\n      if (cookie.charAt(0) === ' ') {\n        cookie = cookie.substring(1, cookie.length);\n      }\n      if (cookie.indexOf(nameEq) === 0) {\n        return cookie.substring(nameEq.length, cookie.length);\n      }\n    }\n  };\n}"},function(e,t,n){n(1)(n(76))},function(e,t){e.exports="/**\n * Object that represents a page and information relating to\n * where the page is sourced from, how navigation to it should\n * be performed, and how server interaction should be handled\n * when viewing it.\n */\nfunction PageEntry(options) {\n  /**\n   * Unique ID for the page\n   */\n  this.id = options.id;\n  /**\n   * Path to the content for the page\n   */\n  this.path = options.path || '/AccountManagement/template/page/' + options.id + '.html';\n  /**\n   * Whether to skip a server fetch when navigating to this page\n   */\n  this.skipFetch = angular.isUndefined(options.skipFetch) ? false : options.skipFetch;\n  /**\n   * Remote location for fetching page data\n   */\n  this.serverPath = options.serverPath || '/AccountManagement' + '/' + options.id;\n  /**\n   * Optional parameters to pass when fetching page info\n   */\n  this.serverParams = options.serverParams || {};\n  /**\n   * Optional client-side data references for the page\n   */\n  this.pageData = options.pageData || {};\n\n  /**\n   * Optional title override for the page\n   */\n  this.title = options.title || '';\n  /**\n   * Optional icon for the page\n   */\n  this.icon = options.icon || '';\n\n  /**\n   * Optional boolean for hiding help on the page\n   */\n  this.hideHelp = options.hideHelp || false;\n  /**\n   * Optional help ID override\n   */\n  this.helpId = options.helpId || options.id;\n\n  /**\n   * Optional action to take when navigating\n   */\n  this.navigateAction = options.navigateAction || 'NONE';\n  /**\n   * Optional breadcrumb parent value to use for parent-based\n   * breadcrumb actions.\n   */\n  this.breadcrumbParent = options.breadcrumbParent || '';\n  /**\n   * Optional breadcrumb action for when this page is navigated to\n   */\n  this.breadcrumb = options.breadcrumb || 'NONE';\n  /**\n   * Optional menu action for when this page is navigated to\n   */\n  this.menu = options.menu || '';\n  /**\n   * Optional state action field to make this page entry statable\n   *  - NONE: Default\n   *  - REPLACE: Replaces previous state\n   *  - ARCHIVED: Get historical state  \n   */\n  this.stateAction = options.stateAction || 'NONE';\n\n  /**\n   * Check if this PageEntry is the equivalent of another\n   * PageEntry. Equality between PageEntry objects is true\n   * if navigating to either object would result in reaching\n   * the same page. PageEntry equality does not consider\n   * per-navigation actions (e.g. navigateAction, breadcrumb,\n   * menu) or display-specific fields (e.g. title, icon).\n   * @param other The other PageEntry to compare to this one\n   * @return Whether this PageEntry and the supplied PageEntry\n   *         are considered equivalent\n   */\n  this.equals = function (other) {\n    if (angular.isUndefined(other)) {\n      return false;\n    }\n    if (!angular.isObject(other)) {\n      return false;\n    }\n    if (this.id !== other.id) {\n      return false;\n    }\n    if (this.path !== other.path) {\n      return false;\n    }\n    if (this.skipFetch !== other.skipFetch) {\n      return false;\n    }\n    if (this.serverPath !== other.serverPath) {\n      return false;\n    }\n    if (!angular.equals(this.serverParams, other.serverParams)) {\n      return false;\n    }\n    if (!angular.equals(this.pageData, other.pageData)) {\n      return false;\n    }\n    return true;\n  };\n}"},function(e,t,n){n(1)(n(78))},function(e,t){e.exports="/**\n * Plugin for managing the account picker\n * \n * Based off of slidebars by Adam Smith\n * http://plugins.adchsm.me/slidebars/\n */\nvar BASE_PAGE_CLASSES = 'sb-init sb-lock';\nvar PICKER_CLASS = 'sb-right';\nvar PICKER_ACTIVE_CLASS = 'sb-active';\nvar OLD_MOBILE_CLASS = 'sb-static';\nvar CLOSE_HOOK_CLASS = 'sb-close';\n$.picker = function (options) {\n  var self = this;\n  self.options = options;\n  // Determine animation support\n  var test = document.createElement('div').style,\n    // Create element to test on.\n    supportTransition = false,\n    // Variable for testing transitions.\n    supportTransform = false; // variable for testing transforms.\n\n  supportTransition = test.MozTransition === '' || test.WebkitTransition === '' || test.OTransition === '' || test.transition === '';\n  supportTransform = test.MozTransform === '' || test.WebkitTransform === '' || test.OTransform === '' || test.transform === '';\n  var animation; // Animation type.\n  if (supportTransition && supportTransform) {\n    // Browser supports css transitions and transforms.\n    animation = 'side'; // Use 'right' transition\n  } else {\n    animation = 'jQuery'; // Browsers that don't support css transitions and transitions.\n  }\n\n  // User agent detection\n  var ua = navigator.userAgent; // User agent string.\n  var android = false; // Android version\n  var iOS = false; // iOS version.\n  if (/Android/.test(ua)) {\n    android = ua.substr(ua.indexOf('Android') + 8, 3);\n  } else if (/(iPhone|iPod|iPad)/.test(ua)) {\n    iOS = ua.substr(ua.indexOf('OS ') + 3, 3).replace('_', '.');\n  }\n\n  // Picker setup\n  var $picker = $('.' + PICKER_CLASS); // Cache the picker\n\n  // Change the right/left value to match the width\n  function matchWidth() {\n    var width = $picker.css('width');\n    $picker.css(options.isRtl() ? 'left' : 'right', '-' + width);\n  }\n  function isActive() {\n    return $picker.hasClass(PICKER_ACTIVE_CLASS);\n  }\n\n  // Add initial classes\n  if (android && android < 3 || iOS && iOS < 5) {\n    $('html').addClass(OLD_MOBILE_CLASS); // Add helper class for older versions of Android & iOS.\n  }\n  $('html').addClass(BASE_PAGE_CLASSES);\n  matchWidth();\n\n  // Perform a slide animation\n  function animate(amount) {\n    if (animation === 'side') {\n      $picker.css(options.isRtl() ? 'left' : 'right', amount);\n    } else if (animation === 'jQuery') {\n      var properties = {};\n      properties[options.isRtl() ? 'left' : 'right'] = amount;\n      $picker.stop().animate(properties, self.options.animationDuration); // Stop any current jQuery animation before starting another.\n    }\n  }\n\n  // Open the picker\n  function open() {\n    if (isActive()) {\n      return;\n    }\n    var width = $picker.css('width');\n    var currentOffset = $picker.css(options.isRtl() ? 'left' : 'right');\n    if (currentOffset && currentOffset[0] == '-') {\n      currentOffset = currentOffset.substr(1);\n    }\n    var openFn = function openFn() {\n      $('html').addClass(PICKER_ACTIVE_CLASS);\n      $picker.addClass(PICKER_ACTIVE_CLASS);\n      animate('0px');\n    };\n\n    // If the picker is not pushed over to its full\n    // width, adjust it, wait for it to apply, then\n    // open it.\n    if (width != currentOffset) {\n      matchWidth();\n      setTimeout(openFn, 100);\n    } else {\n      openFn();\n    }\n  }\n\n  // Close the picker\n  function close() {\n    if (!isActive()) {\n      return;\n    }\n    var width = $picker.css('width');\n    animate('-' + width);\n\n    // Only remove active classes when the animation completes\n    setTimeout(function () {\n      $('html').removeClass(PICKER_ACTIVE_CLASS);\n      $picker.removeClass(PICKER_ACTIVE_CLASS);\n    }, self.options.animationDuration);\n  }\n\n  // Hook close on relevant elements\n  $('.' + CLOSE_HOOK_CLASS).on('touchend click', function (event) {\n    if (self.options && self.options.closeCb) {\n      self.options.closeCb();\n    } else {\n      close();\n    }\n  });\n\n  // Exposed functions\n  this.open = open;\n  this.close = close;\n  this.active = isActive;\n};"},function(e,t,n){n(1)(n(80))},function(e,t){e.exports="if (typeof String.prototype.startsWith !== 'function') {\n  String.prototype.startsWith = function (prefix) {\n    return this.indexOf(prefix) === 0;\n  };\n}\nif (typeof String.prototype.endsWith !== 'function') {\n  String.prototype.endsWith = function (suffix) {\n    if (this.length < suffix.length) {\n      return false;\n    } else {\n      return this.indexOf(suffix, this.length - suffix.length) !== -1;\n    }\n  };\n}"},function(e,t,n){n(1)(n(82))},function(e,t){e.exports="function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n(function (f) {\n  if ((typeof exports === \"undefined\" ? \"undefined\" : _typeof(exports)) === \"object\" && typeof module !== \"undefined\") {\n    module.exports = f();\n  } else if (typeof define === \"function\" && define.amd) {\n    define([], f);\n  } else {\n    var g;\n    if (typeof window !== \"undefined\") {\n      g = window;\n    } else if (typeof global !== \"undefined\") {\n      g = global;\n    } else if (typeof self !== \"undefined\") {\n      g = self;\n    } else {\n      g = this;\n    }\n    g.XRegExp = f();\n  }\n})(function () {\n  var define, module, exports;\n  return function e(t, n, r) {\n    function s(o, u) {\n      if (!n[o]) {\n        if (!t[o]) {\n          var a = typeof require == \"function\" && require;\n          if (!u && a) return a(o, !0);\n          if (i) return i(o, !0);\n          var f = new Error(\"Cannot find module '\" + o + \"'\");\n          throw f.code = \"MODULE_NOT_FOUND\", f;\n        }\n        var l = n[o] = {\n          exports: {}\n        };\n        t[o][0].call(l.exports, function (e) {\n          var n = t[o][1][e];\n          return s(n ? n : e);\n        }, l, l.exports, e, t, n, r);\n      }\n      return n[o].exports;\n    }\n    var i = typeof require == \"function\" && require;\n    for (var o = 0; o < r.length; o++) s(r[o]);\n    return s;\n  }({\n    1: [function (require, module, exports) {\n      'use strict';\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      /*!\n       * XRegExp.build 4.0.0\n       * <xregexp.com>\n       * Steven Levithan (c) 2012-2017 MIT License\n       */\n\n      exports[\"default\"] = function (XRegExp) {\n        var REGEX_DATA = 'xregexp';\n        var subParts = /(\\()(?!\\?)|\\\\([1-9]\\d*)|\\\\[\\s\\S]|\\[(?:[^\\\\\\]]|\\\\[\\s\\S])*\\]/g;\n        var parts = XRegExp.union([/\\({{([\\w$]+)}}\\)|{{([\\w$]+)}}/, subParts], 'g', {\n          conjunction: 'or'\n        });\n\n        /**\n         * Strips a leading `^` and trailing unescaped `$`, if both are present.\n         *\n         * @private\n         * @param {String} pattern Pattern to process.\n         * @returns {String} Pattern with edge anchors removed.\n         */\n        function deanchor(pattern) {\n          // Allow any number of empty noncapturing groups before/after anchors, because regexes\n          // built/generated by XRegExp sometimes include them\n          var leadingAnchor = /^(?:\\(\\?:\\))*\\^/;\n          var trailingAnchor = /\\$(?:\\(\\?:\\))*$/;\n          if (leadingAnchor.test(pattern) && trailingAnchor.test(pattern) &&\n          // Ensure that the trailing `$` isn't escaped\n          trailingAnchor.test(pattern.replace(/\\\\[\\s\\S]/g, ''))) {\n            return pattern.replace(leadingAnchor, '').replace(trailingAnchor, '');\n          }\n          return pattern;\n        }\n\n        /**\n         * Converts the provided value to an XRegExp. Native RegExp flags are not preserved.\n         *\n         * @private\n         * @param {String|RegExp} value Value to convert.\n         * @param {Boolean} [addFlagX] Whether to apply the `x` flag in cases when `value` is not\n         *   already a regex generated by XRegExp\n         * @returns {RegExp} XRegExp object with XRegExp syntax applied.\n         */\n        function asXRegExp(value, addFlagX) {\n          var flags = addFlagX ? 'x' : '';\n          return XRegExp.isRegExp(value) ? value[REGEX_DATA] && value[REGEX_DATA].captureNames ?\n          // Don't recompile, to preserve capture names\n          value :\n          // Recompile as XRegExp\n          XRegExp(value.source, flags) :\n          // Compile string as XRegExp\n          XRegExp(value, flags);\n        }\n        function interpolate(substitution) {\n          return substitution instanceof RegExp ? substitution : XRegExp.escape(substitution);\n        }\n        function reduceToSubpatternsObject(subpatterns, interpolated, subpatternIndex) {\n          subpatterns['subpattern' + subpatternIndex] = interpolated;\n          return subpatterns;\n        }\n        function embedSubpatternAfter(raw, subpatternIndex, rawLiterals) {\n          var hasSubpattern = subpatternIndex < rawLiterals.length - 1;\n          return raw + (hasSubpattern ? '{{subpattern' + subpatternIndex + '}}' : '');\n        }\n\n        /**\n         * Provides tagged template literals that create regexes with XRegExp syntax and flags. The\n         * provided pattern is handled as a raw string, so backslashes don't need to be escaped.\n         *\n         * Interpolation of strings and regexes shares the features of `XRegExp.build`. Interpolated\n         * patterns are treated as atomic units when quantified, interpolated strings have their special\n         * characters escaped, a leading `^` and trailing unescaped `$` are stripped from interpolated\n         * regexes if both are present, and any backreferences within an interpolated regex are\n         * rewritten to work within the overall pattern.\n         *\n         * @memberOf XRegExp\n         * @param {String} [flags] Any combination of XRegExp flags.\n         * @returns {Function} Handler for template literals that construct regexes with XRegExp syntax.\n         * @example\n         *\n         * const h12 = /1[0-2]|0?[1-9]/;\n         * const h24 = /2[0-3]|[01][0-9]/;\n         * const hours = XRegExp.tag('x')`${h12} : | ${h24}`;\n         * const minutes = /^[0-5][0-9]$/;\n         * // Note that explicitly naming the 'minutes' group is required for named backreferences\n         * const time = XRegExp.tag('x')`^ ${hours} (?<minutes>${minutes}) $`;\n         * time.test('10:59'); // -> true\n         * XRegExp.exec('10:59', time).minutes; // -> '59'\n         */\n        XRegExp.tag = function (flags) {\n          return function (literals) {\n            for (var _len = arguments.length, substitutions = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n              substitutions[_key - 1] = arguments[_key];\n            }\n            var subpatterns = substitutions.map(interpolate).reduce(reduceToSubpatternsObject, {});\n            var pattern = literals.raw.map(embedSubpatternAfter).join('');\n            return XRegExp.build(pattern, subpatterns, flags);\n          };\n        };\n\n        /**\n         * Builds regexes using named subpatterns, for readability and pattern reuse. Backreferences in\n         * the outer pattern and provided subpatterns are automatically renumbered to work correctly.\n         * Native flags used by provided subpatterns are ignored in favor of the `flags` argument.\n         *\n         * @memberOf XRegExp\n         * @param {String} pattern XRegExp pattern using `{{name}}` for embedded subpatterns. Allows\n         *   `({{name}})` as shorthand for `(?<name>{{name}})`. Patterns cannot be embedded within\n         *   character classes.\n         * @param {Object} subs Lookup object for named subpatterns. Values can be strings or regexes. A\n         *   leading `^` and trailing unescaped `$` are stripped from subpatterns, if both are present.\n         * @param {String} [flags] Any combination of XRegExp flags.\n         * @returns {RegExp} Regex with interpolated subpatterns.\n         * @example\n         *\n         * const time = XRegExp.build('(?x)^ {{hours}} ({{minutes}}) $', {\n         *   hours: XRegExp.build('{{h12}} : | {{h24}}', {\n         *     h12: /1[0-2]|0?[1-9]/,\n         *     h24: /2[0-3]|[01][0-9]/\n         *   }, 'x'),\n         *   minutes: /^[0-5][0-9]$/\n         * });\n         * time.test('10:59'); // -> true\n         * XRegExp.exec('10:59', time).minutes; // -> '59'\n         */\n        XRegExp.build = function (pattern, subs, flags) {\n          flags = flags || '';\n          // Used with `asXRegExp` calls for `pattern` and subpatterns in `subs`, to work around how\n          // some browsers convert `RegExp('\\n')` to a regex that contains the literal characters `\\`\n          // and `n`. See more details at <https://github.com/slevithan/xregexp/pull/163>.\n          var addFlagX = flags.indexOf('x') !== -1;\n          var inlineFlags = /^\\(\\?([\\w$]+)\\)/.exec(pattern);\n          // Add flags within a leading mode modifier to the overall pattern's flags\n          if (inlineFlags) {\n            flags = XRegExp._clipDuplicates(flags + inlineFlags[1]);\n          }\n          var data = {};\n          for (var p in subs) {\n            if (subs.hasOwnProperty(p)) {\n              // Passing to XRegExp enables extended syntax and ensures independent validity,\n              // lest an unescaped `(`, `)`, `[`, or trailing `\\` breaks the `(?:)` wrapper. For\n              // subpatterns provided as native regexes, it dies on octals and adds the property\n              // used to hold extended regex instance data, for simplicity.\n              var sub = asXRegExp(subs[p], addFlagX);\n              data[p] = {\n                // Deanchoring allows embedding independently useful anchored regexes. If you\n                // really need to keep your anchors, double them (i.e., `^^...$$`).\n                pattern: deanchor(sub.source),\n                names: sub[REGEX_DATA].captureNames || []\n              };\n            }\n          }\n\n          // Passing to XRegExp dies on octals and ensures the outer pattern is independently valid;\n          // helps keep this simple. Named captures will be put back.\n          var patternAsRegex = asXRegExp(pattern, addFlagX);\n\n          // 'Caps' is short for 'captures'\n          var numCaps = 0;\n          var numPriorCaps = void 0;\n          var numOuterCaps = 0;\n          var outerCapsMap = [0];\n          var outerCapNames = patternAsRegex[REGEX_DATA].captureNames || [];\n          var output = patternAsRegex.source.replace(parts, function ($0, $1, $2, $3, $4) {\n            var subName = $1 || $2;\n            var capName = void 0;\n            var intro = void 0;\n            var localCapIndex = void 0;\n            // Named subpattern\n            if (subName) {\n              if (!data.hasOwnProperty(subName)) {\n                throw new ReferenceError('Undefined property ' + $0);\n              }\n              // Named subpattern was wrapped in a capturing group\n              if ($1) {\n                capName = outerCapNames[numOuterCaps];\n                outerCapsMap[++numOuterCaps] = ++numCaps;\n                // If it's a named group, preserve the name. Otherwise, use the subpattern name\n                // as the capture name\n                intro = '(?<' + (capName || subName) + '>';\n              } else {\n                intro = '(?:';\n              }\n              numPriorCaps = numCaps;\n              var rewrittenSubpattern = data[subName].pattern.replace(subParts, function (match, paren, backref) {\n                // Capturing group\n                if (paren) {\n                  capName = data[subName].names[numCaps - numPriorCaps];\n                  ++numCaps;\n                  // If the current capture has a name, preserve the name\n                  if (capName) {\n                    return '(?<' + capName + '>';\n                  }\n                  // Backreference\n                } else if (backref) {\n                  localCapIndex = +backref - 1;\n                  // Rewrite the backreference\n                  return data[subName].names[localCapIndex] ?\n                  // Need to preserve the backreference name in case using flag `n`\n                  '\\\\k<' + data[subName].names[localCapIndex] + '>' : '\\\\' + (+backref + numPriorCaps);\n                }\n                return match;\n              });\n              return '' + intro + rewrittenSubpattern + ')';\n            }\n            // Capturing group\n            if ($3) {\n              capName = outerCapNames[numOuterCaps];\n              outerCapsMap[++numOuterCaps] = ++numCaps;\n              // If the current capture has a name, preserve the name\n              if (capName) {\n                return '(?<' + capName + '>';\n              }\n              // Backreference\n            } else if ($4) {\n              localCapIndex = +$4 - 1;\n              // Rewrite the backreference\n              return outerCapNames[localCapIndex] ?\n              // Need to preserve the backreference name in case using flag `n`\n              '\\\\k<' + outerCapNames[localCapIndex] + '>' : '\\\\' + outerCapsMap[+$4];\n            }\n            return $0;\n          });\n          return XRegExp(output, flags);\n        };\n      };\n      module.exports = exports['default'];\n    }, {}],\n    2: [function (require, module, exports) {\n      'use strict';\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      /*!\n       * XRegExp.matchRecursive 4.0.0\n       * <xregexp.com>\n       * Steven Levithan (c) 2009-2017 MIT License\n       */\n\n      exports[\"default\"] = function (XRegExp) {\n        /**\n         * Returns a match detail object composed of the provided values.\n         *\n         * @private\n         */\n        function row(name, value, start, end) {\n          return {\n            name: name,\n            value: value,\n            start: start,\n            end: end\n          };\n        }\n\n        /**\n         * Returns an array of match strings between outermost left and right delimiters, or an array of\n         * objects with detailed match parts and position data. An error is thrown if delimiters are\n         * unbalanced within the data.\n         *\n         * @memberOf XRegExp\n         * @param {String} str String to search.\n         * @param {String} left Left delimiter as an XRegExp pattern.\n         * @param {String} right Right delimiter as an XRegExp pattern.\n         * @param {String} [flags] Any native or XRegExp flags, used for the left and right delimiters.\n         * @param {Object} [options] Lets you specify `valueNames` and `escapeChar` options.\n         * @returns {Array} Array of matches, or an empty array.\n         * @example\n         *\n         * // Basic usage\n         * let str = '(t((e))s)t()(ing)';\n         * XRegExp.matchRecursive(str, '\\\\(', '\\\\)', 'g');\n         * // -> ['t((e))s', '', 'ing']\n         *\n         * // Extended information mode with valueNames\n         * str = 'Here is <div> <div>an</div></div> example';\n         * XRegExp.matchRecursive(str, '<div\\\\s*>', '</div>', 'gi', {\n         *   valueNames: ['between', 'left', 'match', 'right']\n         * });\n         * // -> [\n         * // {name: 'between', value: 'Here is ',       start: 0,  end: 8},\n         * // {name: 'left',    value: '<div>',          start: 8,  end: 13},\n         * // {name: 'match',   value: ' <div>an</div>', start: 13, end: 27},\n         * // {name: 'right',   value: '</div>',         start: 27, end: 33},\n         * // {name: 'between', value: ' example',       start: 33, end: 41}\n         * // ]\n         *\n         * // Omitting unneeded parts with null valueNames, and using escapeChar\n         * str = '...{1}.\\\\{{function(x,y){return {y:x}}}';\n         * XRegExp.matchRecursive(str, '{', '}', 'g', {\n         *   valueNames: ['literal', null, 'value', null],\n         *   escapeChar: '\\\\'\n         * });\n         * // -> [\n         * // {name: 'literal', value: '...',  start: 0, end: 3},\n         * // {name: 'value',   value: '1',    start: 4, end: 5},\n         * // {name: 'literal', value: '.\\\\{', start: 6, end: 9},\n         * // {name: 'value',   value: 'function(x,y){return {y:x}}', start: 10, end: 37}\n         * // ]\n         *\n         * // Sticky mode via flag y\n         * str = '<1><<<2>>><3>4<5>';\n         * XRegExp.matchRecursive(str, '<', '>', 'gy');\n         * // -> ['1', '<<2>>', '3']\n         */\n        XRegExp.matchRecursive = function (str, left, right, flags, options) {\n          flags = flags || '';\n          options = options || {};\n          var global = flags.indexOf('g') !== -1;\n          var sticky = flags.indexOf('y') !== -1;\n          // Flag `y` is controlled internally\n          var basicFlags = flags.replace(/y/g, '');\n          var escapeChar = options.escapeChar;\n          var vN = options.valueNames;\n          var output = [];\n          var openTokens = 0;\n          var delimStart = 0;\n          var delimEnd = 0;\n          var lastOuterEnd = 0;\n          var outerStart = void 0;\n          var innerStart = void 0;\n          var leftMatch = void 0;\n          var rightMatch = void 0;\n          var esc = void 0;\n          left = XRegExp(left, basicFlags);\n          right = XRegExp(right, basicFlags);\n          if (escapeChar) {\n            if (escapeChar.length > 1) {\n              throw new Error('Cannot use more than one escape character');\n            }\n            escapeChar = XRegExp.escape(escapeChar);\n            // Example of concatenated `esc` regex:\n            // `escapeChar`: '%'\n            // `left`: '<'\n            // `right`: '>'\n            // Regex is: /(?:%[\\S\\s]|(?:(?!<|>)[^%])+)+/\n            esc = new RegExp('(?:' + escapeChar + '[\\\\S\\\\s]|(?:(?!' +\n            // Using `XRegExp.union` safely rewrites backreferences in `left` and `right`.\n            // Intentionally not passing `basicFlags` to `XRegExp.union` since any syntax\n            // transformation resulting from those flags was already applied to `left` and\n            // `right` when they were passed through the XRegExp constructor above.\n            XRegExp.union([left, right], '', {\n              conjunction: 'or'\n            }).source + ')[^' + escapeChar + '])+)+',\n            // Flags `gy` not needed here\n            flags.replace(/[^imu]+/g, ''));\n          }\n          while (true) {\n            // If using an escape character, advance to the delimiter's next starting position,\n            // skipping any escaped characters in between\n            if (escapeChar) {\n              delimEnd += (XRegExp.exec(str, esc, delimEnd, 'sticky') || [''])[0].length;\n            }\n            leftMatch = XRegExp.exec(str, left, delimEnd);\n            rightMatch = XRegExp.exec(str, right, delimEnd);\n            // Keep the leftmost match only\n            if (leftMatch && rightMatch) {\n              if (leftMatch.index <= rightMatch.index) {\n                rightMatch = null;\n              } else {\n                leftMatch = null;\n              }\n            }\n            // Paths (LM: leftMatch, RM: rightMatch, OT: openTokens):\n            // LM | RM | OT | Result\n            // 1  | 0  | 1  | loop\n            // 1  | 0  | 0  | loop\n            // 0  | 1  | 1  | loop\n            // 0  | 1  | 0  | throw\n            // 0  | 0  | 1  | throw\n            // 0  | 0  | 0  | break\n            // The paths above don't include the sticky mode special case. The loop ends after the\n            // first completed match if not `global`.\n            if (leftMatch || rightMatch) {\n              delimStart = (leftMatch || rightMatch).index;\n              delimEnd = delimStart + (leftMatch || rightMatch)[0].length;\n            } else if (!openTokens) {\n              break;\n            }\n            if (sticky && !openTokens && delimStart > lastOuterEnd) {\n              break;\n            }\n            if (leftMatch) {\n              if (!openTokens) {\n                outerStart = delimStart;\n                innerStart = delimEnd;\n              }\n              ++openTokens;\n            } else if (rightMatch && openTokens) {\n              if (! --openTokens) {\n                if (vN) {\n                  if (vN[0] && outerStart > lastOuterEnd) {\n                    output.push(row(vN[0], str.slice(lastOuterEnd, outerStart), lastOuterEnd, outerStart));\n                  }\n                  if (vN[1]) {\n                    output.push(row(vN[1], str.slice(outerStart, innerStart), outerStart, innerStart));\n                  }\n                  if (vN[2]) {\n                    output.push(row(vN[2], str.slice(innerStart, delimStart), innerStart, delimStart));\n                  }\n                  if (vN[3]) {\n                    output.push(row(vN[3], str.slice(delimStart, delimEnd), delimStart, delimEnd));\n                  }\n                } else {\n                  output.push(str.slice(innerStart, delimStart));\n                }\n                lastOuterEnd = delimEnd;\n                if (!global) {\n                  break;\n                }\n              }\n            } else {\n              throw new Error('Unbalanced delimiter found in string');\n            }\n            // If the delimiter matched an empty string, avoid an infinite loop\n            if (delimStart === delimEnd) {\n              ++delimEnd;\n            }\n          }\n          if (global && !sticky && vN && vN[0] && str.length > lastOuterEnd) {\n            output.push(row(vN[0], str.slice(lastOuterEnd), lastOuterEnd, str.length));\n          }\n          return output;\n        };\n      };\n      module.exports = exports['default'];\n    }, {}],\n    3: [function (require, module, exports) {\n      'use strict';\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      /*!\n       * XRegExp Unicode Base 4.0.0\n       * <xregexp.com>\n       * Steven Levithan (c) 2008-2017 MIT License\n       */\n\n      exports[\"default\"] = function (XRegExp) {\n        /**\n         * Adds base support for Unicode matching:\n         * - Adds syntax `\\p{..}` for matching Unicode tokens. Tokens can be inverted using `\\P{..}` or\n         *   `\\p{^..}`. Token names ignore case, spaces, hyphens, and underscores. You can omit the\n         *   braces for token names that are a single letter (e.g. `\\pL` or `PL`).\n         * - Adds flag A (astral), which enables 21-bit Unicode support.\n         * - Adds the `XRegExp.addUnicodeData` method used by other addons to provide character data.\n         *\n         * Unicode Base relies on externally provided Unicode character data. Official addons are\n         * available to provide data for Unicode categories, scripts, blocks, and properties.\n         *\n         * @requires XRegExp\n         */\n\n        // ==--------------------------==\n        // Private stuff\n        // ==--------------------------==\n\n        // Storage for Unicode data\n        var unicode = {};\n\n        // Reuse utils\n        var dec = XRegExp._dec;\n        var hex = XRegExp._hex;\n        var pad4 = XRegExp._pad4;\n\n        // Generates a token lookup name: lowercase, with hyphens, spaces, and underscores removed\n        function normalize(name) {\n          return name.replace(/[- _]+/g, '').toLowerCase();\n        }\n\n        // Gets the decimal code of a literal code unit, \\xHH, \\uHHHH, or a backslash-escaped literal\n        function charCode(chr) {\n          var esc = /^\\\\[xu](.+)/.exec(chr);\n          return esc ? dec(esc[1]) : chr.charCodeAt(chr[0] === '\\\\' ? 1 : 0);\n        }\n\n        // Inverts a list of ordered BMP characters and ranges\n        function invertBmp(range) {\n          var output = '';\n          var lastEnd = -1;\n          XRegExp.forEach(range, /(\\\\x..|\\\\u....|\\\\?[\\s\\S])(?:-(\\\\x..|\\\\u....|\\\\?[\\s\\S]))?/, function (m) {\n            var start = charCode(m[1]);\n            if (start > lastEnd + 1) {\n              output += \"\\\\u\" + pad4(hex(lastEnd + 1));\n              if (start > lastEnd + 2) {\n                output += \"-\\\\u\" + pad4(hex(start - 1));\n              }\n            }\n            lastEnd = charCode(m[2] || m[1]);\n          });\n          if (lastEnd < 0xFFFF) {\n            output += \"\\\\u\" + pad4(hex(lastEnd + 1));\n            if (lastEnd < 0xFFFE) {\n              output += \"-\\\\uFFFF\";\n            }\n          }\n          return output;\n        }\n\n        // Generates an inverted BMP range on first use\n        function cacheInvertedBmp(slug) {\n          var prop = 'b!';\n          return unicode[slug][prop] || (unicode[slug][prop] = invertBmp(unicode[slug].bmp));\n        }\n\n        // Combines and optionally negates BMP and astral data\n        function buildAstral(slug, isNegated) {\n          var item = unicode[slug];\n          var combined = '';\n          if (item.bmp && !item.isBmpLast) {\n            combined = '[' + item.bmp + ']' + (item.astral ? '|' : '');\n          }\n          if (item.astral) {\n            combined += item.astral;\n          }\n          if (item.isBmpLast && item.bmp) {\n            combined += (item.astral ? '|' : '') + '[' + item.bmp + ']';\n          }\n\n          // Astral Unicode tokens always match a code point, never a code unit\n          return isNegated ? '(?:(?!' + combined + \")(?:[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\0-\\uFFFF]))\" : '(?:' + combined + ')';\n        }\n\n        // Builds a complete astral pattern on first use\n        function cacheAstral(slug, isNegated) {\n          var prop = isNegated ? 'a!' : 'a=';\n          return unicode[slug][prop] || (unicode[slug][prop] = buildAstral(slug, isNegated));\n        }\n\n        // ==--------------------------==\n        // Core functionality\n        // ==--------------------------==\n\n        /*\n         * Add astral mode (flag A) and Unicode token syntax: `\\p{..}`, `\\P{..}`, `\\p{^..}`, `\\pC`.\n         */\n        XRegExp.addToken(\n        // Use `*` instead of `+` to avoid capturing `^` as the token name in `\\p{^}`\n        /\\\\([pP])(?:{(\\^?)([^}]*)}|([A-Za-z]))/, function (match, scope, flags) {\n          var ERR_DOUBLE_NEG = 'Invalid double negation ';\n          var ERR_UNKNOWN_NAME = 'Unknown Unicode token ';\n          var ERR_UNKNOWN_REF = 'Unicode token missing data ';\n          var ERR_ASTRAL_ONLY = 'Astral mode required for Unicode token ';\n          var ERR_ASTRAL_IN_CLASS = 'Astral mode does not support Unicode tokens within character classes';\n          // Negated via \\P{..} or \\p{^..}\n          var isNegated = match[1] === 'P' || !!match[2];\n          // Switch from BMP (0-FFFF) to astral (0-10FFFF) mode via flag A\n          var isAstralMode = flags.indexOf('A') !== -1;\n          // Token lookup name. Check `[4]` first to avoid passing `undefined` via `\\p{}`\n          var slug = normalize(match[4] || match[3]);\n          // Token data object\n          var item = unicode[slug];\n          if (match[1] === 'P' && match[2]) {\n            throw new SyntaxError(ERR_DOUBLE_NEG + match[0]);\n          }\n          if (!unicode.hasOwnProperty(slug)) {\n            throw new SyntaxError(ERR_UNKNOWN_NAME + match[0]);\n          }\n\n          // Switch to the negated form of the referenced Unicode token\n          if (item.inverseOf) {\n            slug = normalize(item.inverseOf);\n            if (!unicode.hasOwnProperty(slug)) {\n              throw new ReferenceError(ERR_UNKNOWN_REF + match[0] + ' -> ' + item.inverseOf);\n            }\n            item = unicode[slug];\n            isNegated = !isNegated;\n          }\n          if (!(item.bmp || isAstralMode)) {\n            throw new SyntaxError(ERR_ASTRAL_ONLY + match[0]);\n          }\n          if (isAstralMode) {\n            if (scope === 'class') {\n              throw new SyntaxError(ERR_ASTRAL_IN_CLASS);\n            }\n            return cacheAstral(slug, isNegated);\n          }\n          return scope === 'class' ? isNegated ? cacheInvertedBmp(slug) : item.bmp : (isNegated ? '[^' : '[') + item.bmp + ']';\n        }, {\n          scope: 'all',\n          optionalFlags: 'A',\n          leadChar: '\\\\'\n        });\n\n        /**\n         * Adds to the list of Unicode tokens that XRegExp regexes can match via `\\p` or `\\P`.\n         *\n         * @memberOf XRegExp\n         * @param {Array} data Objects with named character ranges. Each object may have properties\n         *   `name`, `alias`, `isBmpLast`, `inverseOf`, `bmp`, and `astral`. All but `name` are\n         *   optional, although one of `bmp` or `astral` is required (unless `inverseOf` is set). If\n         *   `astral` is absent, the `bmp` data is used for BMP and astral modes. If `bmp` is absent,\n         *   the name errors in BMP mode but works in astral mode. If both `bmp` and `astral` are\n         *   provided, the `bmp` data only is used in BMP mode, and the combination of `bmp` and\n         *   `astral` data is used in astral mode. `isBmpLast` is needed when a token matches orphan\n         *   high surrogates *and* uses surrogate pairs to match astral code points. The `bmp` and\n         *   `astral` data should be a combination of literal characters and `\\xHH` or `\\uHHHH` escape\n         *   sequences, with hyphens to create ranges. Any regex metacharacters in the data should be\n         *   escaped, apart from range-creating hyphens. The `astral` data can additionally use\n         *   character classes and alternation, and should use surrogate pairs to represent astral code\n         *   points. `inverseOf` can be used to avoid duplicating character data if a Unicode token is\n         *   defined as the exact inverse of another token.\n         * @example\n         *\n         * // Basic use\n         * XRegExp.addUnicodeData([{\n         *   name: 'XDigit',\n         *   alias: 'Hexadecimal',\n         *   bmp: '0-9A-Fa-f'\n         * }]);\n         * XRegExp('\\\\p{XDigit}:\\\\p{Hexadecimal}+').test('0:3D'); // -> true\n         */\n        XRegExp.addUnicodeData = function (data) {\n          var ERR_NO_NAME = 'Unicode token requires name';\n          var ERR_NO_DATA = 'Unicode token has no character data ';\n          var item = void 0;\n          for (var i = 0; i < data.length; ++i) {\n            item = data[i];\n            if (!item.name) {\n              throw new Error(ERR_NO_NAME);\n            }\n            if (!(item.inverseOf || item.bmp || item.astral)) {\n              throw new Error(ERR_NO_DATA + item.name);\n            }\n            unicode[normalize(item.name)] = item;\n            if (item.alias) {\n              unicode[normalize(item.alias)] = item;\n            }\n          }\n\n          // Reset the pattern cache used by the `XRegExp` constructor, since the same pattern and\n          // flags might now produce different results\n          XRegExp.cache.flush('patterns');\n        };\n\n        /**\n         * @ignore\n         *\n         * Return a reference to the internal Unicode definition structure for the given Unicode\n         * Property if the given name is a legal Unicode Property for use in XRegExp `\\p` or `\\P` regex\n         * constructs.\n         *\n         * @memberOf XRegExp\n         * @param {String} name Name by which the Unicode Property may be recognized (case-insensitive),\n         *   e.g. `'N'` or `'Number'`. The given name is matched against all registered Unicode\n         *   Properties and Property Aliases.\n         * @returns {Object} Reference to definition structure when the name matches a Unicode Property.\n         *\n         * @note\n         * For more info on Unicode Properties, see also http://unicode.org/reports/tr18/#Categories.\n         *\n         * @note\n         * This method is *not* part of the officially documented API and may change or be removed in\n         * the future. It is meant for userland code that wishes to reuse the (large) internal Unicode\n         * structures set up by XRegExp.\n         */\n        XRegExp._getUnicodeProperty = function (name) {\n          var slug = normalize(name);\n          return unicode[slug];\n        };\n      };\n      module.exports = exports['default'];\n    }, {}],\n    4: [function (require, module, exports) {\n      'use strict';\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      /*!\n       * XRegExp Unicode Blocks 4.0.0\n       * <xregexp.com>\n       * Steven Levithan (c) 2010-2017 MIT License\n       * Unicode data by Mathias Bynens <mathiasbynens.be>\n       */\n\n      exports[\"default\"] = function (XRegExp) {\n        /**\n         * Adds support for all Unicode blocks. Block names use the prefix 'In'. E.g.,\n         * `\\p{InBasicLatin}`. Token names are case insensitive, and any spaces, hyphens, and\n         * underscores are ignored.\n         *\n         * Uses Unicode 9.0.0.\n         *\n         * @requires XRegExp, Unicode Base\n         */\n\n        if (!XRegExp.addUnicodeData) {\n          throw new ReferenceError('Unicode Base must be loaded before Unicode Blocks');\n        }\n        XRegExp.addUnicodeData([{\n          name: 'InAdlam',\n          astral: \"\\uD83A[\\uDD00-\\uDD5F]\"\n        }, {\n          name: 'InAegean_Numbers',\n          astral: \"\\uD800[\\uDD00-\\uDD3F]\"\n        }, {\n          name: 'InAhom',\n          astral: \"\\uD805[\\uDF00-\\uDF3F]\"\n        }, {\n          name: 'InAlchemical_Symbols',\n          astral: \"\\uD83D[\\uDF00-\\uDF7F]\"\n        }, {\n          name: 'InAlphabetic_Presentation_Forms',\n          bmp: \"\\uFB00-\\uFB4F\"\n        }, {\n          name: 'InAnatolian_Hieroglyphs',\n          astral: \"\\uD811[\\uDC00-\\uDE7F]\"\n        }, {\n          name: 'InAncient_Greek_Musical_Notation',\n          astral: \"\\uD834[\\uDE00-\\uDE4F]\"\n        }, {\n          name: 'InAncient_Greek_Numbers',\n          astral: \"\\uD800[\\uDD40-\\uDD8F]\"\n        }, {\n          name: 'InAncient_Symbols',\n          astral: \"\\uD800[\\uDD90-\\uDDCF]\"\n        }, {\n          name: 'InArabic',\n          bmp: \"\\u0600-\\u06FF\"\n        }, {\n          name: 'InArabic_Extended_A',\n          bmp: \"\\u08A0-\\u08FF\"\n        }, {\n          name: 'InArabic_Mathematical_Alphabetic_Symbols',\n          astral: \"\\uD83B[\\uDE00-\\uDEFF]\"\n        }, {\n          name: 'InArabic_Presentation_Forms_A',\n          bmp: \"\\uFB50-\\uFDFF\"\n        }, {\n          name: 'InArabic_Presentation_Forms_B',\n          bmp: \"\\uFE70-\\uFEFF\"\n        }, {\n          name: 'InArabic_Supplement',\n          bmp: \"\\u0750-\\u077F\"\n        }, {\n          name: 'InArmenian',\n          bmp: \"\\u0530-\\u058F\"\n        }, {\n          name: 'InArrows',\n          bmp: \"\\u2190-\\u21FF\"\n        }, {\n          name: 'InAvestan',\n          astral: \"\\uD802[\\uDF00-\\uDF3F]\"\n        }, {\n          name: 'InBalinese',\n          bmp: \"\\u1B00-\\u1B7F\"\n        }, {\n          name: 'InBamum',\n          bmp: \"\\uA6A0-\\uA6FF\"\n        }, {\n          name: 'InBamum_Supplement',\n          astral: \"\\uD81A[\\uDC00-\\uDE3F]\"\n        }, {\n          name: 'InBasic_Latin',\n          bmp: '\\0-\\x7F'\n        }, {\n          name: 'InBassa_Vah',\n          astral: \"\\uD81A[\\uDED0-\\uDEFF]\"\n        }, {\n          name: 'InBatak',\n          bmp: \"\\u1BC0-\\u1BFF\"\n        }, {\n          name: 'InBengali',\n          bmp: \"\\u0980-\\u09FF\"\n        }, {\n          name: 'InBhaiksuki',\n          astral: \"\\uD807[\\uDC00-\\uDC6F]\"\n        }, {\n          name: 'InBlock_Elements',\n          bmp: \"\\u2580-\\u259F\"\n        }, {\n          name: 'InBopomofo',\n          bmp: \"\\u3100-\\u312F\"\n        }, {\n          name: 'InBopomofo_Extended',\n          bmp: \"\\u31A0-\\u31BF\"\n        }, {\n          name: 'InBox_Drawing',\n          bmp: \"\\u2500-\\u257F\"\n        }, {\n          name: 'InBrahmi',\n          astral: \"\\uD804[\\uDC00-\\uDC7F]\"\n        }, {\n          name: 'InBraille_Patterns',\n          bmp: \"\\u2800-\\u28FF\"\n        }, {\n          name: 'InBuginese',\n          bmp: \"\\u1A00-\\u1A1F\"\n        }, {\n          name: 'InBuhid',\n          bmp: \"\\u1740-\\u175F\"\n        }, {\n          name: 'InByzantine_Musical_Symbols',\n          astral: \"\\uD834[\\uDC00-\\uDCFF]\"\n        }, {\n          name: 'InCJK_Compatibility',\n          bmp: \"\\u3300-\\u33FF\"\n        }, {\n          name: 'InCJK_Compatibility_Forms',\n          bmp: \"\\uFE30-\\uFE4F\"\n        }, {\n          name: 'InCJK_Compatibility_Ideographs',\n          bmp: \"\\uF900-\\uFAFF\"\n        }, {\n          name: 'InCJK_Compatibility_Ideographs_Supplement',\n          astral: \"\\uD87E[\\uDC00-\\uDE1F]\"\n        }, {\n          name: 'InCJK_Radicals_Supplement',\n          bmp: \"\\u2E80-\\u2EFF\"\n        }, {\n          name: 'InCJK_Strokes',\n          bmp: \"\\u31C0-\\u31EF\"\n        }, {\n          name: 'InCJK_Symbols_and_Punctuation',\n          bmp: \"\\u3000-\\u303F\"\n        }, {\n          name: 'InCJK_Unified_Ideographs',\n          bmp: \"\\u4E00-\\u9FFF\"\n        }, {\n          name: 'InCJK_Unified_Ideographs_Extension_A',\n          bmp: \"\\u3400-\\u4DBF\"\n        }, {\n          name: 'InCJK_Unified_Ideographs_Extension_B',\n          astral: \"[\\uD840-\\uD868][\\uDC00-\\uDFFF]|\\uD869[\\uDC00-\\uDEDF]\"\n        }, {\n          name: 'InCJK_Unified_Ideographs_Extension_C',\n          astral: \"\\uD869[\\uDF00-\\uDFFF]|[\\uD86A-\\uD86C][\\uDC00-\\uDFFF]|\\uD86D[\\uDC00-\\uDF3F]\"\n        }, {\n          name: 'InCJK_Unified_Ideographs_Extension_D',\n          astral: \"\\uD86D[\\uDF40-\\uDFFF]|\\uD86E[\\uDC00-\\uDC1F]\"\n        }, {\n          name: 'InCJK_Unified_Ideographs_Extension_E',\n          astral: \"\\uD86E[\\uDC20-\\uDFFF]|[\\uD86F-\\uD872][\\uDC00-\\uDFFF]|\\uD873[\\uDC00-\\uDEAF]\"\n        }, {\n          name: 'InCarian',\n          astral: \"\\uD800[\\uDEA0-\\uDEDF]\"\n        }, {\n          name: 'InCaucasian_Albanian',\n          astral: \"\\uD801[\\uDD30-\\uDD6F]\"\n        }, {\n          name: 'InChakma',\n          astral: \"\\uD804[\\uDD00-\\uDD4F]\"\n        }, {\n          name: 'InCham',\n          bmp: \"\\uAA00-\\uAA5F\"\n        }, {\n          name: 'InCherokee',\n          bmp: \"\\u13A0-\\u13FF\"\n        }, {\n          name: 'InCherokee_Supplement',\n          bmp: \"\\uAB70-\\uABBF\"\n        }, {\n          name: 'InCombining_Diacritical_Marks',\n          bmp: \"\\u0300-\\u036F\"\n        }, {\n          name: 'InCombining_Diacritical_Marks_Extended',\n          bmp: \"\\u1AB0-\\u1AFF\"\n        }, {\n          name: 'InCombining_Diacritical_Marks_Supplement',\n          bmp: \"\\u1DC0-\\u1DFF\"\n        }, {\n          name: 'InCombining_Diacritical_Marks_for_Symbols',\n          bmp: \"\\u20D0-\\u20FF\"\n        }, {\n          name: 'InCombining_Half_Marks',\n          bmp: \"\\uFE20-\\uFE2F\"\n        }, {\n          name: 'InCommon_Indic_Number_Forms',\n          bmp: \"\\uA830-\\uA83F\"\n        }, {\n          name: 'InControl_Pictures',\n          bmp: \"\\u2400-\\u243F\"\n        }, {\n          name: 'InCoptic',\n          bmp: \"\\u2C80-\\u2CFF\"\n        }, {\n          name: 'InCoptic_Epact_Numbers',\n          astral: \"\\uD800[\\uDEE0-\\uDEFF]\"\n        }, {\n          name: 'InCounting_Rod_Numerals',\n          astral: \"\\uD834[\\uDF60-\\uDF7F]\"\n        }, {\n          name: 'InCuneiform',\n          astral: \"\\uD808[\\uDC00-\\uDFFF]\"\n        }, {\n          name: 'InCuneiform_Numbers_and_Punctuation',\n          astral: \"\\uD809[\\uDC00-\\uDC7F]\"\n        }, {\n          name: 'InCurrency_Symbols',\n          bmp: \"\\u20A0-\\u20CF\"\n        }, {\n          name: 'InCypriot_Syllabary',\n          astral: \"\\uD802[\\uDC00-\\uDC3F]\"\n        }, {\n          name: 'InCyrillic',\n          bmp: \"\\u0400-\\u04FF\"\n        }, {\n          name: 'InCyrillic_Extended_A',\n          bmp: \"\\u2DE0-\\u2DFF\"\n        }, {\n          name: 'InCyrillic_Extended_B',\n          bmp: \"\\uA640-\\uA69F\"\n        }, {\n          name: 'InCyrillic_Extended_C',\n          bmp: \"\\u1C80-\\u1C8F\"\n        }, {\n          name: 'InCyrillic_Supplement',\n          bmp: \"\\u0500-\\u052F\"\n        }, {\n          name: 'InDeseret',\n          astral: \"\\uD801[\\uDC00-\\uDC4F]\"\n        }, {\n          name: 'InDevanagari',\n          bmp: \"\\u0900-\\u097F\"\n        }, {\n          name: 'InDevanagari_Extended',\n          bmp: \"\\uA8E0-\\uA8FF\"\n        }, {\n          name: 'InDingbats',\n          bmp: \"\\u2700-\\u27BF\"\n        }, {\n          name: 'InDomino_Tiles',\n          astral: \"\\uD83C[\\uDC30-\\uDC9F]\"\n        }, {\n          name: 'InDuployan',\n          astral: \"\\uD82F[\\uDC00-\\uDC9F]\"\n        }, {\n          name: 'InEarly_Dynastic_Cuneiform',\n          astral: \"\\uD809[\\uDC80-\\uDD4F]\"\n        }, {\n          name: 'InEgyptian_Hieroglyphs',\n          astral: \"\\uD80C[\\uDC00-\\uDFFF]|\\uD80D[\\uDC00-\\uDC2F]\"\n        }, {\n          name: 'InElbasan',\n          astral: \"\\uD801[\\uDD00-\\uDD2F]\"\n        }, {\n          name: 'InEmoticons',\n          astral: \"\\uD83D[\\uDE00-\\uDE4F]\"\n        }, {\n          name: 'InEnclosed_Alphanumeric_Supplement',\n          astral: \"\\uD83C[\\uDD00-\\uDDFF]\"\n        }, {\n          name: 'InEnclosed_Alphanumerics',\n          bmp: \"\\u2460-\\u24FF\"\n        }, {\n          name: 'InEnclosed_CJK_Letters_and_Months',\n          bmp: \"\\u3200-\\u32FF\"\n        }, {\n          name: 'InEnclosed_Ideographic_Supplement',\n          astral: \"\\uD83C[\\uDE00-\\uDEFF]\"\n        }, {\n          name: 'InEthiopic',\n          bmp: \"\\u1200-\\u137F\"\n        }, {\n          name: 'InEthiopic_Extended',\n          bmp: \"\\u2D80-\\u2DDF\"\n        }, {\n          name: 'InEthiopic_Extended_A',\n          bmp: \"\\uAB00-\\uAB2F\"\n        }, {\n          name: 'InEthiopic_Supplement',\n          bmp: \"\\u1380-\\u139F\"\n        }, {\n          name: 'InGeneral_Punctuation',\n          bmp: \"\\u2000-\\u206F\"\n        }, {\n          name: 'InGeometric_Shapes',\n          bmp: \"\\u25A0-\\u25FF\"\n        }, {\n          name: 'InGeometric_Shapes_Extended',\n          astral: \"\\uD83D[\\uDF80-\\uDFFF]\"\n        }, {\n          name: 'InGeorgian',\n          bmp: \"\\u10A0-\\u10FF\"\n        }, {\n          name: 'InGeorgian_Supplement',\n          bmp: \"\\u2D00-\\u2D2F\"\n        }, {\n          name: 'InGlagolitic',\n          bmp: \"\\u2C00-\\u2C5F\"\n        }, {\n          name: 'InGlagolitic_Supplement',\n          astral: \"\\uD838[\\uDC00-\\uDC2F]\"\n        }, {\n          name: 'InGothic',\n          astral: \"\\uD800[\\uDF30-\\uDF4F]\"\n        }, {\n          name: 'InGrantha',\n          astral: \"\\uD804[\\uDF00-\\uDF7F]\"\n        }, {\n          name: 'InGreek_Extended',\n          bmp: \"\\u1F00-\\u1FFF\"\n        }, {\n          name: 'InGreek_and_Coptic',\n          bmp: \"\\u0370-\\u03FF\"\n        }, {\n          name: 'InGujarati',\n          bmp: \"\\u0A80-\\u0AFF\"\n        }, {\n          name: 'InGurmukhi',\n          bmp: \"\\u0A00-\\u0A7F\"\n        }, {\n          name: 'InHalfwidth_and_Fullwidth_Forms',\n          bmp: \"\\uFF00-\\uFFEF\"\n        }, {\n          name: 'InHangul_Compatibility_Jamo',\n          bmp: \"\\u3130-\\u318F\"\n        }, {\n          name: 'InHangul_Jamo',\n          bmp: \"\\u1100-\\u11FF\"\n        }, {\n          name: 'InHangul_Jamo_Extended_A',\n          bmp: \"\\uA960-\\uA97F\"\n        }, {\n          name: 'InHangul_Jamo_Extended_B',\n          bmp: \"\\uD7B0-\\uD7FF\"\n        }, {\n          name: 'InHangul_Syllables',\n          bmp: \"\\uAC00-\\uD7AF\"\n        }, {\n          name: 'InHanunoo',\n          bmp: \"\\u1720-\\u173F\"\n        }, {\n          name: 'InHatran',\n          astral: \"\\uD802[\\uDCE0-\\uDCFF]\"\n        }, {\n          name: 'InHebrew',\n          bmp: \"\\u0590-\\u05FF\"\n        }, {\n          name: 'InHigh_Private_Use_Surrogates',\n          bmp: \"\\uDB80-\\uDBFF\"\n        }, {\n          name: 'InHigh_Surrogates',\n          bmp: \"\\uD800-\\uDB7F\"\n        }, {\n          name: 'InHiragana',\n          bmp: \"\\u3040-\\u309F\"\n        }, {\n          name: 'InIPA_Extensions',\n          bmp: \"\\u0250-\\u02AF\"\n        }, {\n          name: 'InIdeographic_Description_Characters',\n          bmp: \"\\u2FF0-\\u2FFF\"\n        }, {\n          name: 'InIdeographic_Symbols_and_Punctuation',\n          astral: \"\\uD81B[\\uDFE0-\\uDFFF]\"\n        }, {\n          name: 'InImperial_Aramaic',\n          astral: \"\\uD802[\\uDC40-\\uDC5F]\"\n        }, {\n          name: 'InInscriptional_Pahlavi',\n          astral: \"\\uD802[\\uDF60-\\uDF7F]\"\n        }, {\n          name: 'InInscriptional_Parthian',\n          astral: \"\\uD802[\\uDF40-\\uDF5F]\"\n        }, {\n          name: 'InJavanese',\n          bmp: \"\\uA980-\\uA9DF\"\n        }, {\n          name: 'InKaithi',\n          astral: \"\\uD804[\\uDC80-\\uDCCF]\"\n        }, {\n          name: 'InKana_Supplement',\n          astral: \"\\uD82C[\\uDC00-\\uDCFF]\"\n        }, {\n          name: 'InKanbun',\n          bmp: \"\\u3190-\\u319F\"\n        }, {\n          name: 'InKangxi_Radicals',\n          bmp: \"\\u2F00-\\u2FDF\"\n        }, {\n          name: 'InKannada',\n          bmp: \"\\u0C80-\\u0CFF\"\n        }, {\n          name: 'InKatakana',\n          bmp: \"\\u30A0-\\u30FF\"\n        }, {\n          name: 'InKatakana_Phonetic_Extensions',\n          bmp: \"\\u31F0-\\u31FF\"\n        }, {\n          name: 'InKayah_Li',\n          bmp: \"\\uA900-\\uA92F\"\n        }, {\n          name: 'InKharoshthi',\n          astral: \"\\uD802[\\uDE00-\\uDE5F]\"\n        }, {\n          name: 'InKhmer',\n          bmp: \"\\u1780-\\u17FF\"\n        }, {\n          name: 'InKhmer_Symbols',\n          bmp: \"\\u19E0-\\u19FF\"\n        }, {\n          name: 'InKhojki',\n          astral: \"\\uD804[\\uDE00-\\uDE4F]\"\n        }, {\n          name: 'InKhudawadi',\n          astral: \"\\uD804[\\uDEB0-\\uDEFF]\"\n        }, {\n          name: 'InLao',\n          bmp: \"\\u0E80-\\u0EFF\"\n        }, {\n          name: 'InLatin_Extended_Additional',\n          bmp: \"\\u1E00-\\u1EFF\"\n        }, {\n          name: 'InLatin_Extended_A',\n          bmp: \"\\u0100-\\u017F\"\n        }, {\n          name: 'InLatin_Extended_B',\n          bmp: \"\\u0180-\\u024F\"\n        }, {\n          name: 'InLatin_Extended_C',\n          bmp: \"\\u2C60-\\u2C7F\"\n        }, {\n          name: 'InLatin_Extended_D',\n          bmp: \"\\uA720-\\uA7FF\"\n        }, {\n          name: 'InLatin_Extended_E',\n          bmp: \"\\uAB30-\\uAB6F\"\n        }, {\n          name: 'InLatin_1_Supplement',\n          bmp: '\\x80-\\xFF'\n        }, {\n          name: 'InLepcha',\n          bmp: \"\\u1C00-\\u1C4F\"\n        }, {\n          name: 'InLetterlike_Symbols',\n          bmp: \"\\u2100-\\u214F\"\n        }, {\n          name: 'InLimbu',\n          bmp: \"\\u1900-\\u194F\"\n        }, {\n          name: 'InLinear_A',\n          astral: \"\\uD801[\\uDE00-\\uDF7F]\"\n        }, {\n          name: 'InLinear_B_Ideograms',\n          astral: \"\\uD800[\\uDC80-\\uDCFF]\"\n        }, {\n          name: 'InLinear_B_Syllabary',\n          astral: \"\\uD800[\\uDC00-\\uDC7F]\"\n        }, {\n          name: 'InLisu',\n          bmp: \"\\uA4D0-\\uA4FF\"\n        }, {\n          name: 'InLow_Surrogates',\n          bmp: \"\\uDC00-\\uDFFF\"\n        }, {\n          name: 'InLycian',\n          astral: \"\\uD800[\\uDE80-\\uDE9F]\"\n        }, {\n          name: 'InLydian',\n          astral: \"\\uD802[\\uDD20-\\uDD3F]\"\n        }, {\n          name: 'InMahajani',\n          astral: \"\\uD804[\\uDD50-\\uDD7F]\"\n        }, {\n          name: 'InMahjong_Tiles',\n          astral: \"\\uD83C[\\uDC00-\\uDC2F]\"\n        }, {\n          name: 'InMalayalam',\n          bmp: \"\\u0D00-\\u0D7F\"\n        }, {\n          name: 'InMandaic',\n          bmp: \"\\u0840-\\u085F\"\n        }, {\n          name: 'InManichaean',\n          astral: \"\\uD802[\\uDEC0-\\uDEFF]\"\n        }, {\n          name: 'InMarchen',\n          astral: \"\\uD807[\\uDC70-\\uDCBF]\"\n        }, {\n          name: 'InMathematical_Alphanumeric_Symbols',\n          astral: \"\\uD835[\\uDC00-\\uDFFF]\"\n        }, {\n          name: 'InMathematical_Operators',\n          bmp: \"\\u2200-\\u22FF\"\n        }, {\n          name: 'InMeetei_Mayek',\n          bmp: \"\\uABC0-\\uABFF\"\n        }, {\n          name: 'InMeetei_Mayek_Extensions',\n          bmp: \"\\uAAE0-\\uAAFF\"\n        }, {\n          name: 'InMende_Kikakui',\n          astral: \"\\uD83A[\\uDC00-\\uDCDF]\"\n        }, {\n          name: 'InMeroitic_Cursive',\n          astral: \"\\uD802[\\uDDA0-\\uDDFF]\"\n        }, {\n          name: 'InMeroitic_Hieroglyphs',\n          astral: \"\\uD802[\\uDD80-\\uDD9F]\"\n        }, {\n          name: 'InMiao',\n          astral: \"\\uD81B[\\uDF00-\\uDF9F]\"\n        }, {\n          name: 'InMiscellaneous_Mathematical_Symbols_A',\n          bmp: \"\\u27C0-\\u27EF\"\n        }, {\n          name: 'InMiscellaneous_Mathematical_Symbols_B',\n          bmp: \"\\u2980-\\u29FF\"\n        }, {\n          name: 'InMiscellaneous_Symbols',\n          bmp: \"\\u2600-\\u26FF\"\n        }, {\n          name: 'InMiscellaneous_Symbols_and_Arrows',\n          bmp: \"\\u2B00-\\u2BFF\"\n        }, {\n          name: 'InMiscellaneous_Symbols_and_Pictographs',\n          astral: \"\\uD83C[\\uDF00-\\uDFFF]|\\uD83D[\\uDC00-\\uDDFF]\"\n        }, {\n          name: 'InMiscellaneous_Technical',\n          bmp: \"\\u2300-\\u23FF\"\n        }, {\n          name: 'InModi',\n          astral: \"\\uD805[\\uDE00-\\uDE5F]\"\n        }, {\n          name: 'InModifier_Tone_Letters',\n          bmp: \"\\uA700-\\uA71F\"\n        }, {\n          name: 'InMongolian',\n          bmp: \"\\u1800-\\u18AF\"\n        }, {\n          name: 'InMongolian_Supplement',\n          astral: \"\\uD805[\\uDE60-\\uDE7F]\"\n        }, {\n          name: 'InMro',\n          astral: \"\\uD81A[\\uDE40-\\uDE6F]\"\n        }, {\n          name: 'InMultani',\n          astral: \"\\uD804[\\uDE80-\\uDEAF]\"\n        }, {\n          name: 'InMusical_Symbols',\n          astral: \"\\uD834[\\uDD00-\\uDDFF]\"\n        }, {\n          name: 'InMyanmar',\n          bmp: \"\\u1000-\\u109F\"\n        }, {\n          name: 'InMyanmar_Extended_A',\n          bmp: \"\\uAA60-\\uAA7F\"\n        }, {\n          name: 'InMyanmar_Extended_B',\n          bmp: \"\\uA9E0-\\uA9FF\"\n        }, {\n          name: 'InNKo',\n          bmp: \"\\u07C0-\\u07FF\"\n        }, {\n          name: 'InNabataean',\n          astral: \"\\uD802[\\uDC80-\\uDCAF]\"\n        }, {\n          name: 'InNew_Tai_Lue',\n          bmp: \"\\u1980-\\u19DF\"\n        }, {\n          name: 'InNewa',\n          astral: \"\\uD805[\\uDC00-\\uDC7F]\"\n        }, {\n          name: 'InNumber_Forms',\n          bmp: \"\\u2150-\\u218F\"\n        }, {\n          name: 'InOgham',\n          bmp: \"\\u1680-\\u169F\"\n        }, {\n          name: 'InOl_Chiki',\n          bmp: \"\\u1C50-\\u1C7F\"\n        }, {\n          name: 'InOld_Hungarian',\n          astral: \"\\uD803[\\uDC80-\\uDCFF]\"\n        }, {\n          name: 'InOld_Italic',\n          astral: \"\\uD800[\\uDF00-\\uDF2F]\"\n        }, {\n          name: 'InOld_North_Arabian',\n          astral: \"\\uD802[\\uDE80-\\uDE9F]\"\n        }, {\n          name: 'InOld_Permic',\n          astral: \"\\uD800[\\uDF50-\\uDF7F]\"\n        }, {\n          name: 'InOld_Persian',\n          astral: \"\\uD800[\\uDFA0-\\uDFDF]\"\n        }, {\n          name: 'InOld_South_Arabian',\n          astral: \"\\uD802[\\uDE60-\\uDE7F]\"\n        }, {\n          name: 'InOld_Turkic',\n          astral: \"\\uD803[\\uDC00-\\uDC4F]\"\n        }, {\n          name: 'InOptical_Character_Recognition',\n          bmp: \"\\u2440-\\u245F\"\n        }, {\n          name: 'InOriya',\n          bmp: \"\\u0B00-\\u0B7F\"\n        }, {\n          name: 'InOrnamental_Dingbats',\n          astral: \"\\uD83D[\\uDE50-\\uDE7F]\"\n        }, {\n          name: 'InOsage',\n          astral: \"\\uD801[\\uDCB0-\\uDCFF]\"\n        }, {\n          name: 'InOsmanya',\n          astral: \"\\uD801[\\uDC80-\\uDCAF]\"\n        }, {\n          name: 'InPahawh_Hmong',\n          astral: \"\\uD81A[\\uDF00-\\uDF8F]\"\n        }, {\n          name: 'InPalmyrene',\n          astral: \"\\uD802[\\uDC60-\\uDC7F]\"\n        }, {\n          name: 'InPau_Cin_Hau',\n          astral: \"\\uD806[\\uDEC0-\\uDEFF]\"\n        }, {\n          name: 'InPhags_pa',\n          bmp: \"\\uA840-\\uA87F\"\n        }, {\n          name: 'InPhaistos_Disc',\n          astral: \"\\uD800[\\uDDD0-\\uDDFF]\"\n        }, {\n          name: 'InPhoenician',\n          astral: \"\\uD802[\\uDD00-\\uDD1F]\"\n        }, {\n          name: 'InPhonetic_Extensions',\n          bmp: \"\\u1D00-\\u1D7F\"\n        }, {\n          name: 'InPhonetic_Extensions_Supplement',\n          bmp: \"\\u1D80-\\u1DBF\"\n        }, {\n          name: 'InPlaying_Cards',\n          astral: \"\\uD83C[\\uDCA0-\\uDCFF]\"\n        }, {\n          name: 'InPrivate_Use_Area',\n          bmp: \"\\uE000-\\uF8FF\"\n        }, {\n          name: 'InPsalter_Pahlavi',\n          astral: \"\\uD802[\\uDF80-\\uDFAF]\"\n        }, {\n          name: 'InRejang',\n          bmp: \"\\uA930-\\uA95F\"\n        }, {\n          name: 'InRumi_Numeral_Symbols',\n          astral: \"\\uD803[\\uDE60-\\uDE7F]\"\n        }, {\n          name: 'InRunic',\n          bmp: \"\\u16A0-\\u16FF\"\n        }, {\n          name: 'InSamaritan',\n          bmp: \"\\u0800-\\u083F\"\n        }, {\n          name: 'InSaurashtra',\n          bmp: \"\\uA880-\\uA8DF\"\n        }, {\n          name: 'InSharada',\n          astral: \"\\uD804[\\uDD80-\\uDDDF]\"\n        }, {\n          name: 'InShavian',\n          astral: \"\\uD801[\\uDC50-\\uDC7F]\"\n        }, {\n          name: 'InShorthand_Format_Controls',\n          astral: \"\\uD82F[\\uDCA0-\\uDCAF]\"\n        }, {\n          name: 'InSiddham',\n          astral: \"\\uD805[\\uDD80-\\uDDFF]\"\n        }, {\n          name: 'InSinhala',\n          bmp: \"\\u0D80-\\u0DFF\"\n        }, {\n          name: 'InSinhala_Archaic_Numbers',\n          astral: \"\\uD804[\\uDDE0-\\uDDFF]\"\n        }, {\n          name: 'InSmall_Form_Variants',\n          bmp: \"\\uFE50-\\uFE6F\"\n        }, {\n          name: 'InSora_Sompeng',\n          astral: \"\\uD804[\\uDCD0-\\uDCFF]\"\n        }, {\n          name: 'InSpacing_Modifier_Letters',\n          bmp: \"\\u02B0-\\u02FF\"\n        }, {\n          name: 'InSpecials',\n          bmp: \"\\uFFF0-\\uFFFF\"\n        }, {\n          name: 'InSundanese',\n          bmp: \"\\u1B80-\\u1BBF\"\n        }, {\n          name: 'InSundanese_Supplement',\n          bmp: \"\\u1CC0-\\u1CCF\"\n        }, {\n          name: 'InSuperscripts_and_Subscripts',\n          bmp: \"\\u2070-\\u209F\"\n        }, {\n          name: 'InSupplemental_Arrows_A',\n          bmp: \"\\u27F0-\\u27FF\"\n        }, {\n          name: 'InSupplemental_Arrows_B',\n          bmp: \"\\u2900-\\u297F\"\n        }, {\n          name: 'InSupplemental_Arrows_C',\n          astral: \"\\uD83E[\\uDC00-\\uDCFF]\"\n        }, {\n          name: 'InSupplemental_Mathematical_Operators',\n          bmp: \"\\u2A00-\\u2AFF\"\n        }, {\n          name: 'InSupplemental_Punctuation',\n          bmp: \"\\u2E00-\\u2E7F\"\n        }, {\n          name: 'InSupplemental_Symbols_and_Pictographs',\n          astral: \"\\uD83E[\\uDD00-\\uDDFF]\"\n        }, {\n          name: 'InSupplementary_Private_Use_Area_A',\n          astral: \"[\\uDB80-\\uDBBF][\\uDC00-\\uDFFF]\"\n        }, {\n          name: 'InSupplementary_Private_Use_Area_B',\n          astral: \"[\\uDBC0-\\uDBFF][\\uDC00-\\uDFFF]\"\n        }, {\n          name: 'InSutton_SignWriting',\n          astral: \"\\uD836[\\uDC00-\\uDEAF]\"\n        }, {\n          name: 'InSyloti_Nagri',\n          bmp: \"\\uA800-\\uA82F\"\n        }, {\n          name: 'InSyriac',\n          bmp: \"\\u0700-\\u074F\"\n        }, {\n          name: 'InTagalog',\n          bmp: \"\\u1700-\\u171F\"\n        }, {\n          name: 'InTagbanwa',\n          bmp: \"\\u1760-\\u177F\"\n        }, {\n          name: 'InTags',\n          astral: \"\\uDB40[\\uDC00-\\uDC7F]\"\n        }, {\n          name: 'InTai_Le',\n          bmp: \"\\u1950-\\u197F\"\n        }, {\n          name: 'InTai_Tham',\n          bmp: \"\\u1A20-\\u1AAF\"\n        }, {\n          name: 'InTai_Viet',\n          bmp: \"\\uAA80-\\uAADF\"\n        }, {\n          name: 'InTai_Xuan_Jing_Symbols',\n          astral: \"\\uD834[\\uDF00-\\uDF5F]\"\n        }, {\n          name: 'InTakri',\n          astral: \"\\uD805[\\uDE80-\\uDECF]\"\n        }, {\n          name: 'InTamil',\n          bmp: \"\\u0B80-\\u0BFF\"\n        }, {\n          name: 'InTangut',\n          astral: \"[\\uD81C-\\uD821][\\uDC00-\\uDFFF]\"\n        }, {\n          name: 'InTangut_Components',\n          astral: \"\\uD822[\\uDC00-\\uDEFF]\"\n        }, {\n          name: 'InTelugu',\n          bmp: \"\\u0C00-\\u0C7F\"\n        }, {\n          name: 'InThaana',\n          bmp: \"\\u0780-\\u07BF\"\n        }, {\n          name: 'InThai',\n          bmp: \"\\u0E00-\\u0E7F\"\n        }, {\n          name: 'InTibetan',\n          bmp: \"\\u0F00-\\u0FFF\"\n        }, {\n          name: 'InTifinagh',\n          bmp: \"\\u2D30-\\u2D7F\"\n        }, {\n          name: 'InTirhuta',\n          astral: \"\\uD805[\\uDC80-\\uDCDF]\"\n        }, {\n          name: 'InTransport_and_Map_Symbols',\n          astral: \"\\uD83D[\\uDE80-\\uDEFF]\"\n        }, {\n          name: 'InUgaritic',\n          astral: \"\\uD800[\\uDF80-\\uDF9F]\"\n        }, {\n          name: 'InUnified_Canadian_Aboriginal_Syllabics',\n          bmp: \"\\u1400-\\u167F\"\n        }, {\n          name: 'InUnified_Canadian_Aboriginal_Syllabics_Extended',\n          bmp: \"\\u18B0-\\u18FF\"\n        }, {\n          name: 'InVai',\n          bmp: \"\\uA500-\\uA63F\"\n        }, {\n          name: 'InVariation_Selectors',\n          bmp: \"\\uFE00-\\uFE0F\"\n        }, {\n          name: 'InVariation_Selectors_Supplement',\n          astral: \"\\uDB40[\\uDD00-\\uDDEF]\"\n        }, {\n          name: 'InVedic_Extensions',\n          bmp: \"\\u1CD0-\\u1CFF\"\n        }, {\n          name: 'InVertical_Forms',\n          bmp: \"\\uFE10-\\uFE1F\"\n        }, {\n          name: 'InWarang_Citi',\n          astral: \"\\uD806[\\uDCA0-\\uDCFF]\"\n        }, {\n          name: 'InYi_Radicals',\n          bmp: \"\\uA490-\\uA4CF\"\n        }, {\n          name: 'InYi_Syllables',\n          bmp: \"\\uA000-\\uA48F\"\n        }, {\n          name: 'InYijing_Hexagram_Symbols',\n          bmp: \"\\u4DC0-\\u4DFF\"\n        }]);\n      };\n      module.exports = exports['default'];\n    }, {}],\n    5: [function (require, module, exports) {\n      'use strict';\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      /*!\n       * XRegExp Unicode Categories 4.0.0\n       * <xregexp.com>\n       * Steven Levithan (c) 2010-2017 MIT License\n       * Unicode data by Mathias Bynens <mathiasbynens.be>\n       */\n\n      exports[\"default\"] = function (XRegExp) {\n        /**\n         * Adds support for Unicode's general categories. E.g., `\\p{Lu}` or `\\p{Uppercase Letter}`. See\n         * category descriptions in UAX #44 <http://unicode.org/reports/tr44/#GC_Values_Table>. Token\n         * names are case insensitive, and any spaces, hyphens, and underscores are ignored.\n         *\n         * Uses Unicode 9.0.0.\n         *\n         * @requires XRegExp, Unicode Base\n         */\n\n        if (!XRegExp.addUnicodeData) {\n          throw new ReferenceError('Unicode Base must be loaded before Unicode Categories');\n        }\n        XRegExp.addUnicodeData([{\n          name: 'C',\n          alias: 'Other',\n          isBmpLast: true,\n          bmp: \"\\0-\\x1F\\x7F-\\x9F\\xAD\\u0378\\u0379\\u0380-\\u0383\\u038B\\u038D\\u03A2\\u0530\\u0557\\u0558\\u0560\\u0588\\u058B\\u058C\\u0590\\u05C8-\\u05CF\\u05EB-\\u05EF\\u05F5-\\u0605\\u061C\\u061D\\u06DD\\u070E\\u070F\\u074B\\u074C\\u07B2-\\u07BF\\u07FB-\\u07FF\\u082E\\u082F\\u083F\\u085C\\u085D\\u085F-\\u089F\\u08B5\\u08BE-\\u08D3\\u08E2\\u0984\\u098D\\u098E\\u0991\\u0992\\u09A9\\u09B1\\u09B3-\\u09B5\\u09BA\\u09BB\\u09C5\\u09C6\\u09C9\\u09CA\\u09CF-\\u09D6\\u09D8-\\u09DB\\u09DE\\u09E4\\u09E5\\u09FC-\\u0A00\\u0A04\\u0A0B-\\u0A0E\\u0A11\\u0A12\\u0A29\\u0A31\\u0A34\\u0A37\\u0A3A\\u0A3B\\u0A3D\\u0A43-\\u0A46\\u0A49\\u0A4A\\u0A4E-\\u0A50\\u0A52-\\u0A58\\u0A5D\\u0A5F-\\u0A65\\u0A76-\\u0A80\\u0A84\\u0A8E\\u0A92\\u0AA9\\u0AB1\\u0AB4\\u0ABA\\u0ABB\\u0AC6\\u0ACA\\u0ACE\\u0ACF\\u0AD1-\\u0ADF\\u0AE4\\u0AE5\\u0AF2-\\u0AF8\\u0AFA-\\u0B00\\u0B04\\u0B0D\\u0B0E\\u0B11\\u0B12\\u0B29\\u0B31\\u0B34\\u0B3A\\u0B3B\\u0B45\\u0B46\\u0B49\\u0B4A\\u0B4E-\\u0B55\\u0B58-\\u0B5B\\u0B5E\\u0B64\\u0B65\\u0B78-\\u0B81\\u0B84\\u0B8B-\\u0B8D\\u0B91\\u0B96-\\u0B98\\u0B9B\\u0B9D\\u0BA0-\\u0BA2\\u0BA5-\\u0BA7\\u0BAB-\\u0BAD\\u0BBA-\\u0BBD\\u0BC3-\\u0BC5\\u0BC9\\u0BCE\\u0BCF\\u0BD1-\\u0BD6\\u0BD8-\\u0BE5\\u0BFB-\\u0BFF\\u0C04\\u0C0D\\u0C11\\u0C29\\u0C3A-\\u0C3C\\u0C45\\u0C49\\u0C4E-\\u0C54\\u0C57\\u0C5B-\\u0C5F\\u0C64\\u0C65\\u0C70-\\u0C77\\u0C84\\u0C8D\\u0C91\\u0CA9\\u0CB4\\u0CBA\\u0CBB\\u0CC5\\u0CC9\\u0CCE-\\u0CD4\\u0CD7-\\u0CDD\\u0CDF\\u0CE4\\u0CE5\\u0CF0\\u0CF3-\\u0D00\\u0D04\\u0D0D\\u0D11\\u0D3B\\u0D3C\\u0D45\\u0D49\\u0D50-\\u0D53\\u0D64\\u0D65\\u0D80\\u0D81\\u0D84\\u0D97-\\u0D99\\u0DB2\\u0DBC\\u0DBE\\u0DBF\\u0DC7-\\u0DC9\\u0DCB-\\u0DCE\\u0DD5\\u0DD7\\u0DE0-\\u0DE5\\u0DF0\\u0DF1\\u0DF5-\\u0E00\\u0E3B-\\u0E3E\\u0E5C-\\u0E80\\u0E83\\u0E85\\u0E86\\u0E89\\u0E8B\\u0E8C\\u0E8E-\\u0E93\\u0E98\\u0EA0\\u0EA4\\u0EA6\\u0EA8\\u0EA9\\u0EAC\\u0EBA\\u0EBE\\u0EBF\\u0EC5\\u0EC7\\u0ECE\\u0ECF\\u0EDA\\u0EDB\\u0EE0-\\u0EFF\\u0F48\\u0F6D-\\u0F70\\u0F98\\u0FBD\\u0FCD\\u0FDB-\\u0FFF\\u10C6\\u10C8-\\u10CC\\u10CE\\u10CF\\u1249\\u124E\\u124F\\u1257\\u1259\\u125E\\u125F\\u1289\\u128E\\u128F\\u12B1\\u12B6\\u12B7\\u12BF\\u12C1\\u12C6\\u12C7\\u12D7\\u1311\\u1316\\u1317\\u135B\\u135C\\u137D-\\u137F\\u139A-\\u139F\\u13F6\\u13F7\\u13FE\\u13FF\\u169D-\\u169F\\u16F9-\\u16FF\\u170D\\u1715-\\u171F\\u1737-\\u173F\\u1754-\\u175F\\u176D\\u1771\\u1774-\\u177F\\u17DE\\u17DF\\u17EA-\\u17EF\\u17FA-\\u17FF\\u180E\\u180F\\u181A-\\u181F\\u1878-\\u187F\\u18AB-\\u18AF\\u18F6-\\u18FF\\u191F\\u192C-\\u192F\\u193C-\\u193F\\u1941-\\u1943\\u196E\\u196F\\u1975-\\u197F\\u19AC-\\u19AF\\u19CA-\\u19CF\\u19DB-\\u19DD\\u1A1C\\u1A1D\\u1A5F\\u1A7D\\u1A7E\\u1A8A-\\u1A8F\\u1A9A-\\u1A9F\\u1AAE\\u1AAF\\u1ABF-\\u1AFF\\u1B4C-\\u1B4F\\u1B7D-\\u1B7F\\u1BF4-\\u1BFB\\u1C38-\\u1C3A\\u1C4A-\\u1C4C\\u1C89-\\u1CBF\\u1CC8-\\u1CCF\\u1CF7\\u1CFA-\\u1CFF\\u1DF6-\\u1DFA\\u1F16\\u1F17\\u1F1E\\u1F1F\\u1F46\\u1F47\\u1F4E\\u1F4F\\u1F58\\u1F5A\\u1F5C\\u1F5E\\u1F7E\\u1F7F\\u1FB5\\u1FC5\\u1FD4\\u1FD5\\u1FDC\\u1FF0\\u1FF1\\u1FF5\\u1FFF\\u200B-\\u200F\\u202A-\\u202E\\u2060-\\u206F\\u2072\\u2073\\u208F\\u209D-\\u209F\\u20BF-\\u20CF\\u20F1-\\u20FF\\u218C-\\u218F\\u23FF\\u2427-\\u243F\\u244B-\\u245F\\u2B74\\u2B75\\u2B96\\u2B97\\u2BBA-\\u2BBC\\u2BC9\\u2BD2-\\u2BEB\\u2BF0-\\u2BFF\\u2C2F\\u2C5F\\u2CF4-\\u2CF8\\u2D26\\u2D28-\\u2D2C\\u2D2E\\u2D2F\\u2D68-\\u2D6E\\u2D71-\\u2D7E\\u2D97-\\u2D9F\\u2DA7\\u2DAF\\u2DB7\\u2DBF\\u2DC7\\u2DCF\\u2DD7\\u2DDF\\u2E45-\\u2E7F\\u2E9A\\u2EF4-\\u2EFF\\u2FD6-\\u2FEF\\u2FFC-\\u2FFF\\u3040\\u3097\\u3098\\u3100-\\u3104\\u312E-\\u3130\\u318F\\u31BB-\\u31BF\\u31E4-\\u31EF\\u321F\\u32FF\\u4DB6-\\u4DBF\\u9FD6-\\u9FFF\\uA48D-\\uA48F\\uA4C7-\\uA4CF\\uA62C-\\uA63F\\uA6F8-\\uA6FF\\uA7AF\\uA7B8-\\uA7F6\\uA82C-\\uA82F\\uA83A-\\uA83F\\uA878-\\uA87F\\uA8C6-\\uA8CD\\uA8DA-\\uA8DF\\uA8FE\\uA8FF\\uA954-\\uA95E\\uA97D-\\uA97F\\uA9CE\\uA9DA-\\uA9DD\\uA9FF\\uAA37-\\uAA3F\\uAA4E\\uAA4F\\uAA5A\\uAA5B\\uAAC3-\\uAADA\\uAAF7-\\uAB00\\uAB07\\uAB08\\uAB0F\\uAB10\\uAB17-\\uAB1F\\uAB27\\uAB2F\\uAB66-\\uAB6F\\uABEE\\uABEF\\uABFA-\\uABFF\\uD7A4-\\uD7AF\\uD7C7-\\uD7CA\\uD7FC-\\uF8FF\\uFA6E\\uFA6F\\uFADA-\\uFAFF\\uFB07-\\uFB12\\uFB18-\\uFB1C\\uFB37\\uFB3D\\uFB3F\\uFB42\\uFB45\\uFBC2-\\uFBD2\\uFD40-\\uFD4F\\uFD90\\uFD91\\uFDC8-\\uFDEF\\uFDFE\\uFDFF\\uFE1A-\\uFE1F\\uFE53\\uFE67\\uFE6C-\\uFE6F\\uFE75\\uFEFD-\\uFF00\\uFFBF-\\uFFC1\\uFFC8\\uFFC9\\uFFD0\\uFFD1\\uFFD8\\uFFD9\\uFFDD-\\uFFDF\\uFFE7\\uFFEF-\\uFFFB\\uFFFE\\uFFFF\",\n          astral: \"\\uD800[\\uDC0C\\uDC27\\uDC3B\\uDC3E\\uDC4E\\uDC4F\\uDC5E-\\uDC7F\\uDCFB-\\uDCFF\\uDD03-\\uDD06\\uDD34-\\uDD36\\uDD8F\\uDD9C-\\uDD9F\\uDDA1-\\uDDCF\\uDDFE-\\uDE7F\\uDE9D-\\uDE9F\\uDED1-\\uDEDF\\uDEFC-\\uDEFF\\uDF24-\\uDF2F\\uDF4B-\\uDF4F\\uDF7B-\\uDF7F\\uDF9E\\uDFC4-\\uDFC7\\uDFD6-\\uDFFF]|\\uD801[\\uDC9E\\uDC9F\\uDCAA-\\uDCAF\\uDCD4-\\uDCD7\\uDCFC-\\uDCFF\\uDD28-\\uDD2F\\uDD64-\\uDD6E\\uDD70-\\uDDFF\\uDF37-\\uDF3F\\uDF56-\\uDF5F\\uDF68-\\uDFFF]|\\uD802[\\uDC06\\uDC07\\uDC09\\uDC36\\uDC39-\\uDC3B\\uDC3D\\uDC3E\\uDC56\\uDC9F-\\uDCA6\\uDCB0-\\uDCDF\\uDCF3\\uDCF6-\\uDCFA\\uDD1C-\\uDD1E\\uDD3A-\\uDD3E\\uDD40-\\uDD7F\\uDDB8-\\uDDBB\\uDDD0\\uDDD1\\uDE04\\uDE07-\\uDE0B\\uDE14\\uDE18\\uDE34-\\uDE37\\uDE3B-\\uDE3E\\uDE48-\\uDE4F\\uDE59-\\uDE5F\\uDEA0-\\uDEBF\\uDEE7-\\uDEEA\\uDEF7-\\uDEFF\\uDF36-\\uDF38\\uDF56\\uDF57\\uDF73-\\uDF77\\uDF92-\\uDF98\\uDF9D-\\uDFA8\\uDFB0-\\uDFFF]|\\uD803[\\uDC49-\\uDC7F\\uDCB3-\\uDCBF\\uDCF3-\\uDCF9\\uDD00-\\uDE5F\\uDE7F-\\uDFFF]|\\uD804[\\uDC4E-\\uDC51\\uDC70-\\uDC7E\\uDCBD\\uDCC2-\\uDCCF\\uDCE9-\\uDCEF\\uDCFA-\\uDCFF\\uDD35\\uDD44-\\uDD4F\\uDD77-\\uDD7F\\uDDCE\\uDDCF\\uDDE0\\uDDF5-\\uDDFF\\uDE12\\uDE3F-\\uDE7F\\uDE87\\uDE89\\uDE8E\\uDE9E\\uDEAA-\\uDEAF\\uDEEB-\\uDEEF\\uDEFA-\\uDEFF\\uDF04\\uDF0D\\uDF0E\\uDF11\\uDF12\\uDF29\\uDF31\\uDF34\\uDF3A\\uDF3B\\uDF45\\uDF46\\uDF49\\uDF4A\\uDF4E\\uDF4F\\uDF51-\\uDF56\\uDF58-\\uDF5C\\uDF64\\uDF65\\uDF6D-\\uDF6F\\uDF75-\\uDFFF]|\\uD805[\\uDC5A\\uDC5C\\uDC5E-\\uDC7F\\uDCC8-\\uDCCF\\uDCDA-\\uDD7F\\uDDB6\\uDDB7\\uDDDE-\\uDDFF\\uDE45-\\uDE4F\\uDE5A-\\uDE5F\\uDE6D-\\uDE7F\\uDEB8-\\uDEBF\\uDECA-\\uDEFF\\uDF1A-\\uDF1C\\uDF2C-\\uDF2F\\uDF40-\\uDFFF]|\\uD806[\\uDC00-\\uDC9F\\uDCF3-\\uDCFE\\uDD00-\\uDEBF\\uDEF9-\\uDFFF]|\\uD807[\\uDC09\\uDC37\\uDC46-\\uDC4F\\uDC6D-\\uDC6F\\uDC90\\uDC91\\uDCA8\\uDCB7-\\uDFFF]|\\uD808[\\uDF9A-\\uDFFF]|\\uD809[\\uDC6F\\uDC75-\\uDC7F\\uDD44-\\uDFFF]|[\\uD80A\\uD80B\\uD80E-\\uD810\\uD812-\\uD819\\uD823-\\uD82B\\uD82D\\uD82E\\uD830-\\uD833\\uD837\\uD839\\uD83F\\uD874-\\uD87D\\uD87F-\\uDB3F\\uDB41-\\uDBFF][\\uDC00-\\uDFFF]|\\uD80D[\\uDC2F-\\uDFFF]|\\uD811[\\uDE47-\\uDFFF]|\\uD81A[\\uDE39-\\uDE3F\\uDE5F\\uDE6A-\\uDE6D\\uDE70-\\uDECF\\uDEEE\\uDEEF\\uDEF6-\\uDEFF\\uDF46-\\uDF4F\\uDF5A\\uDF62\\uDF78-\\uDF7C\\uDF90-\\uDFFF]|\\uD81B[\\uDC00-\\uDEFF\\uDF45-\\uDF4F\\uDF7F-\\uDF8E\\uDFA0-\\uDFDF\\uDFE1-\\uDFFF]|\\uD821[\\uDFED-\\uDFFF]|\\uD822[\\uDEF3-\\uDFFF]|\\uD82C[\\uDC02-\\uDFFF]|\\uD82F[\\uDC6B-\\uDC6F\\uDC7D-\\uDC7F\\uDC89-\\uDC8F\\uDC9A\\uDC9B\\uDCA0-\\uDFFF]|\\uD834[\\uDCF6-\\uDCFF\\uDD27\\uDD28\\uDD73-\\uDD7A\\uDDE9-\\uDDFF\\uDE46-\\uDEFF\\uDF57-\\uDF5F\\uDF72-\\uDFFF]|\\uD835[\\uDC55\\uDC9D\\uDCA0\\uDCA1\\uDCA3\\uDCA4\\uDCA7\\uDCA8\\uDCAD\\uDCBA\\uDCBC\\uDCC4\\uDD06\\uDD0B\\uDD0C\\uDD15\\uDD1D\\uDD3A\\uDD3F\\uDD45\\uDD47-\\uDD49\\uDD51\\uDEA6\\uDEA7\\uDFCC\\uDFCD]|\\uD836[\\uDE8C-\\uDE9A\\uDEA0\\uDEB0-\\uDFFF]|\\uD838[\\uDC07\\uDC19\\uDC1A\\uDC22\\uDC25\\uDC2B-\\uDFFF]|\\uD83A[\\uDCC5\\uDCC6\\uDCD7-\\uDCFF\\uDD4B-\\uDD4F\\uDD5A-\\uDD5D\\uDD60-\\uDFFF]|\\uD83B[\\uDC00-\\uDDFF\\uDE04\\uDE20\\uDE23\\uDE25\\uDE26\\uDE28\\uDE33\\uDE38\\uDE3A\\uDE3C-\\uDE41\\uDE43-\\uDE46\\uDE48\\uDE4A\\uDE4C\\uDE50\\uDE53\\uDE55\\uDE56\\uDE58\\uDE5A\\uDE5C\\uDE5E\\uDE60\\uDE63\\uDE65\\uDE66\\uDE6B\\uDE73\\uDE78\\uDE7D\\uDE7F\\uDE8A\\uDE9C-\\uDEA0\\uDEA4\\uDEAA\\uDEBC-\\uDEEF\\uDEF2-\\uDFFF]|\\uD83C[\\uDC2C-\\uDC2F\\uDC94-\\uDC9F\\uDCAF\\uDCB0\\uDCC0\\uDCD0\\uDCF6-\\uDCFF\\uDD0D-\\uDD0F\\uDD2F\\uDD6C-\\uDD6F\\uDDAD-\\uDDE5\\uDE03-\\uDE0F\\uDE3C-\\uDE3F\\uDE49-\\uDE4F\\uDE52-\\uDEFF]|\\uD83D[\\uDED3-\\uDEDF\\uDEED-\\uDEEF\\uDEF7-\\uDEFF\\uDF74-\\uDF7F\\uDFD5-\\uDFFF]|\\uD83E[\\uDC0C-\\uDC0F\\uDC48-\\uDC4F\\uDC5A-\\uDC5F\\uDC88-\\uDC8F\\uDCAE-\\uDD0F\\uDD1F\\uDD28-\\uDD2F\\uDD31\\uDD32\\uDD3F\\uDD4C-\\uDD4F\\uDD5F-\\uDD7F\\uDD92-\\uDDBF\\uDDC1-\\uDFFF]|\\uD869[\\uDED7-\\uDEFF]|\\uD86D[\\uDF35-\\uDF3F]|\\uD86E[\\uDC1E\\uDC1F]|\\uD873[\\uDEA2-\\uDFFF]|\\uD87E[\\uDE1E-\\uDFFF]|\\uDB40[\\uDC00-\\uDCFF\\uDDF0-\\uDFFF]\"\n        }, {\n          name: 'Cc',\n          alias: 'Control',\n          bmp: '\\0-\\x1F\\x7F-\\x9F'\n        }, {\n          name: 'Cf',\n          alias: 'Format',\n          bmp: \"\\xAD\\u0600-\\u0605\\u061C\\u06DD\\u070F\\u08E2\\u180E\\u200B-\\u200F\\u202A-\\u202E\\u2060-\\u2064\\u2066-\\u206F\\uFEFF\\uFFF9-\\uFFFB\",\n          astral: \"\\uD804\\uDCBD|\\uD82F[\\uDCA0-\\uDCA3]|\\uD834[\\uDD73-\\uDD7A]|\\uDB40[\\uDC01\\uDC20-\\uDC7F]\"\n        }, {\n          name: 'Cn',\n          alias: 'Unassigned',\n          bmp: \"\\u0378\\u0379\\u0380-\\u0383\\u038B\\u038D\\u03A2\\u0530\\u0557\\u0558\\u0560\\u0588\\u058B\\u058C\\u0590\\u05C8-\\u05CF\\u05EB-\\u05EF\\u05F5-\\u05FF\\u061D\\u070E\\u074B\\u074C\\u07B2-\\u07BF\\u07FB-\\u07FF\\u082E\\u082F\\u083F\\u085C\\u085D\\u085F-\\u089F\\u08B5\\u08BE-\\u08D3\\u0984\\u098D\\u098E\\u0991\\u0992\\u09A9\\u09B1\\u09B3-\\u09B5\\u09BA\\u09BB\\u09C5\\u09C6\\u09C9\\u09CA\\u09CF-\\u09D6\\u09D8-\\u09DB\\u09DE\\u09E4\\u09E5\\u09FC-\\u0A00\\u0A04\\u0A0B-\\u0A0E\\u0A11\\u0A12\\u0A29\\u0A31\\u0A34\\u0A37\\u0A3A\\u0A3B\\u0A3D\\u0A43-\\u0A46\\u0A49\\u0A4A\\u0A4E-\\u0A50\\u0A52-\\u0A58\\u0A5D\\u0A5F-\\u0A65\\u0A76-\\u0A80\\u0A84\\u0A8E\\u0A92\\u0AA9\\u0AB1\\u0AB4\\u0ABA\\u0ABB\\u0AC6\\u0ACA\\u0ACE\\u0ACF\\u0AD1-\\u0ADF\\u0AE4\\u0AE5\\u0AF2-\\u0AF8\\u0AFA-\\u0B00\\u0B04\\u0B0D\\u0B0E\\u0B11\\u0B12\\u0B29\\u0B31\\u0B34\\u0B3A\\u0B3B\\u0B45\\u0B46\\u0B49\\u0B4A\\u0B4E-\\u0B55\\u0B58-\\u0B5B\\u0B5E\\u0B64\\u0B65\\u0B78-\\u0B81\\u0B84\\u0B8B-\\u0B8D\\u0B91\\u0B96-\\u0B98\\u0B9B\\u0B9D\\u0BA0-\\u0BA2\\u0BA5-\\u0BA7\\u0BAB-\\u0BAD\\u0BBA-\\u0BBD\\u0BC3-\\u0BC5\\u0BC9\\u0BCE\\u0BCF\\u0BD1-\\u0BD6\\u0BD8-\\u0BE5\\u0BFB-\\u0BFF\\u0C04\\u0C0D\\u0C11\\u0C29\\u0C3A-\\u0C3C\\u0C45\\u0C49\\u0C4E-\\u0C54\\u0C57\\u0C5B-\\u0C5F\\u0C64\\u0C65\\u0C70-\\u0C77\\u0C84\\u0C8D\\u0C91\\u0CA9\\u0CB4\\u0CBA\\u0CBB\\u0CC5\\u0CC9\\u0CCE-\\u0CD4\\u0CD7-\\u0CDD\\u0CDF\\u0CE4\\u0CE5\\u0CF0\\u0CF3-\\u0D00\\u0D04\\u0D0D\\u0D11\\u0D3B\\u0D3C\\u0D45\\u0D49\\u0D50-\\u0D53\\u0D64\\u0D65\\u0D80\\u0D81\\u0D84\\u0D97-\\u0D99\\u0DB2\\u0DBC\\u0DBE\\u0DBF\\u0DC7-\\u0DC9\\u0DCB-\\u0DCE\\u0DD5\\u0DD7\\u0DE0-\\u0DE5\\u0DF0\\u0DF1\\u0DF5-\\u0E00\\u0E3B-\\u0E3E\\u0E5C-\\u0E80\\u0E83\\u0E85\\u0E86\\u0E89\\u0E8B\\u0E8C\\u0E8E-\\u0E93\\u0E98\\u0EA0\\u0EA4\\u0EA6\\u0EA8\\u0EA9\\u0EAC\\u0EBA\\u0EBE\\u0EBF\\u0EC5\\u0EC7\\u0ECE\\u0ECF\\u0EDA\\u0EDB\\u0EE0-\\u0EFF\\u0F48\\u0F6D-\\u0F70\\u0F98\\u0FBD\\u0FCD\\u0FDB-\\u0FFF\\u10C6\\u10C8-\\u10CC\\u10CE\\u10CF\\u1249\\u124E\\u124F\\u1257\\u1259\\u125E\\u125F\\u1289\\u128E\\u128F\\u12B1\\u12B6\\u12B7\\u12BF\\u12C1\\u12C6\\u12C7\\u12D7\\u1311\\u1316\\u1317\\u135B\\u135C\\u137D-\\u137F\\u139A-\\u139F\\u13F6\\u13F7\\u13FE\\u13FF\\u169D-\\u169F\\u16F9-\\u16FF\\u170D\\u1715-\\u171F\\u1737-\\u173F\\u1754-\\u175F\\u176D\\u1771\\u1774-\\u177F\\u17DE\\u17DF\\u17EA-\\u17EF\\u17FA-\\u17FF\\u180F\\u181A-\\u181F\\u1878-\\u187F\\u18AB-\\u18AF\\u18F6-\\u18FF\\u191F\\u192C-\\u192F\\u193C-\\u193F\\u1941-\\u1943\\u196E\\u196F\\u1975-\\u197F\\u19AC-\\u19AF\\u19CA-\\u19CF\\u19DB-\\u19DD\\u1A1C\\u1A1D\\u1A5F\\u1A7D\\u1A7E\\u1A8A-\\u1A8F\\u1A9A-\\u1A9F\\u1AAE\\u1AAF\\u1ABF-\\u1AFF\\u1B4C-\\u1B4F\\u1B7D-\\u1B7F\\u1BF4-\\u1BFB\\u1C38-\\u1C3A\\u1C4A-\\u1C4C\\u1C89-\\u1CBF\\u1CC8-\\u1CCF\\u1CF7\\u1CFA-\\u1CFF\\u1DF6-\\u1DFA\\u1F16\\u1F17\\u1F1E\\u1F1F\\u1F46\\u1F47\\u1F4E\\u1F4F\\u1F58\\u1F5A\\u1F5C\\u1F5E\\u1F7E\\u1F7F\\u1FB5\\u1FC5\\u1FD4\\u1FD5\\u1FDC\\u1FF0\\u1FF1\\u1FF5\\u1FFF\\u2065\\u2072\\u2073\\u208F\\u209D-\\u209F\\u20BF-\\u20CF\\u20F1-\\u20FF\\u218C-\\u218F\\u23FF\\u2427-\\u243F\\u244B-\\u245F\\u2B74\\u2B75\\u2B96\\u2B97\\u2BBA-\\u2BBC\\u2BC9\\u2BD2-\\u2BEB\\u2BF0-\\u2BFF\\u2C2F\\u2C5F\\u2CF4-\\u2CF8\\u2D26\\u2D28-\\u2D2C\\u2D2E\\u2D2F\\u2D68-\\u2D6E\\u2D71-\\u2D7E\\u2D97-\\u2D9F\\u2DA7\\u2DAF\\u2DB7\\u2DBF\\u2DC7\\u2DCF\\u2DD7\\u2DDF\\u2E45-\\u2E7F\\u2E9A\\u2EF4-\\u2EFF\\u2FD6-\\u2FEF\\u2FFC-\\u2FFF\\u3040\\u3097\\u3098\\u3100-\\u3104\\u312E-\\u3130\\u318F\\u31BB-\\u31BF\\u31E4-\\u31EF\\u321F\\u32FF\\u4DB6-\\u4DBF\\u9FD6-\\u9FFF\\uA48D-\\uA48F\\uA4C7-\\uA4CF\\uA62C-\\uA63F\\uA6F8-\\uA6FF\\uA7AF\\uA7B8-\\uA7F6\\uA82C-\\uA82F\\uA83A-\\uA83F\\uA878-\\uA87F\\uA8C6-\\uA8CD\\uA8DA-\\uA8DF\\uA8FE\\uA8FF\\uA954-\\uA95E\\uA97D-\\uA97F\\uA9CE\\uA9DA-\\uA9DD\\uA9FF\\uAA37-\\uAA3F\\uAA4E\\uAA4F\\uAA5A\\uAA5B\\uAAC3-\\uAADA\\uAAF7-\\uAB00\\uAB07\\uAB08\\uAB0F\\uAB10\\uAB17-\\uAB1F\\uAB27\\uAB2F\\uAB66-\\uAB6F\\uABEE\\uABEF\\uABFA-\\uABFF\\uD7A4-\\uD7AF\\uD7C7-\\uD7CA\\uD7FC-\\uD7FF\\uFA6E\\uFA6F\\uFADA-\\uFAFF\\uFB07-\\uFB12\\uFB18-\\uFB1C\\uFB37\\uFB3D\\uFB3F\\uFB42\\uFB45\\uFBC2-\\uFBD2\\uFD40-\\uFD4F\\uFD90\\uFD91\\uFDC8-\\uFDEF\\uFDFE\\uFDFF\\uFE1A-\\uFE1F\\uFE53\\uFE67\\uFE6C-\\uFE6F\\uFE75\\uFEFD\\uFEFE\\uFF00\\uFFBF-\\uFFC1\\uFFC8\\uFFC9\\uFFD0\\uFFD1\\uFFD8\\uFFD9\\uFFDD-\\uFFDF\\uFFE7\\uFFEF-\\uFFF8\\uFFFE\\uFFFF\",\n          astral: \"\\uD800[\\uDC0C\\uDC27\\uDC3B\\uDC3E\\uDC4E\\uDC4F\\uDC5E-\\uDC7F\\uDCFB-\\uDCFF\\uDD03-\\uDD06\\uDD34-\\uDD36\\uDD8F\\uDD9C-\\uDD9F\\uDDA1-\\uDDCF\\uDDFE-\\uDE7F\\uDE9D-\\uDE9F\\uDED1-\\uDEDF\\uDEFC-\\uDEFF\\uDF24-\\uDF2F\\uDF4B-\\uDF4F\\uDF7B-\\uDF7F\\uDF9E\\uDFC4-\\uDFC7\\uDFD6-\\uDFFF]|\\uD801[\\uDC9E\\uDC9F\\uDCAA-\\uDCAF\\uDCD4-\\uDCD7\\uDCFC-\\uDCFF\\uDD28-\\uDD2F\\uDD64-\\uDD6E\\uDD70-\\uDDFF\\uDF37-\\uDF3F\\uDF56-\\uDF5F\\uDF68-\\uDFFF]|\\uD802[\\uDC06\\uDC07\\uDC09\\uDC36\\uDC39-\\uDC3B\\uDC3D\\uDC3E\\uDC56\\uDC9F-\\uDCA6\\uDCB0-\\uDCDF\\uDCF3\\uDCF6-\\uDCFA\\uDD1C-\\uDD1E\\uDD3A-\\uDD3E\\uDD40-\\uDD7F\\uDDB8-\\uDDBB\\uDDD0\\uDDD1\\uDE04\\uDE07-\\uDE0B\\uDE14\\uDE18\\uDE34-\\uDE37\\uDE3B-\\uDE3E\\uDE48-\\uDE4F\\uDE59-\\uDE5F\\uDEA0-\\uDEBF\\uDEE7-\\uDEEA\\uDEF7-\\uDEFF\\uDF36-\\uDF38\\uDF56\\uDF57\\uDF73-\\uDF77\\uDF92-\\uDF98\\uDF9D-\\uDFA8\\uDFB0-\\uDFFF]|\\uD803[\\uDC49-\\uDC7F\\uDCB3-\\uDCBF\\uDCF3-\\uDCF9\\uDD00-\\uDE5F\\uDE7F-\\uDFFF]|\\uD804[\\uDC4E-\\uDC51\\uDC70-\\uDC7E\\uDCC2-\\uDCCF\\uDCE9-\\uDCEF\\uDCFA-\\uDCFF\\uDD35\\uDD44-\\uDD4F\\uDD77-\\uDD7F\\uDDCE\\uDDCF\\uDDE0\\uDDF5-\\uDDFF\\uDE12\\uDE3F-\\uDE7F\\uDE87\\uDE89\\uDE8E\\uDE9E\\uDEAA-\\uDEAF\\uDEEB-\\uDEEF\\uDEFA-\\uDEFF\\uDF04\\uDF0D\\uDF0E\\uDF11\\uDF12\\uDF29\\uDF31\\uDF34\\uDF3A\\uDF3B\\uDF45\\uDF46\\uDF49\\uDF4A\\uDF4E\\uDF4F\\uDF51-\\uDF56\\uDF58-\\uDF5C\\uDF64\\uDF65\\uDF6D-\\uDF6F\\uDF75-\\uDFFF]|\\uD805[\\uDC5A\\uDC5C\\uDC5E-\\uDC7F\\uDCC8-\\uDCCF\\uDCDA-\\uDD7F\\uDDB6\\uDDB7\\uDDDE-\\uDDFF\\uDE45-\\uDE4F\\uDE5A-\\uDE5F\\uDE6D-\\uDE7F\\uDEB8-\\uDEBF\\uDECA-\\uDEFF\\uDF1A-\\uDF1C\\uDF2C-\\uDF2F\\uDF40-\\uDFFF]|\\uD806[\\uDC00-\\uDC9F\\uDCF3-\\uDCFE\\uDD00-\\uDEBF\\uDEF9-\\uDFFF]|\\uD807[\\uDC09\\uDC37\\uDC46-\\uDC4F\\uDC6D-\\uDC6F\\uDC90\\uDC91\\uDCA8\\uDCB7-\\uDFFF]|\\uD808[\\uDF9A-\\uDFFF]|\\uD809[\\uDC6F\\uDC75-\\uDC7F\\uDD44-\\uDFFF]|[\\uD80A\\uD80B\\uD80E-\\uD810\\uD812-\\uD819\\uD823-\\uD82B\\uD82D\\uD82E\\uD830-\\uD833\\uD837\\uD839\\uD83F\\uD874-\\uD87D\\uD87F-\\uDB3F\\uDB41-\\uDB7F][\\uDC00-\\uDFFF]|\\uD80D[\\uDC2F-\\uDFFF]|\\uD811[\\uDE47-\\uDFFF]|\\uD81A[\\uDE39-\\uDE3F\\uDE5F\\uDE6A-\\uDE6D\\uDE70-\\uDECF\\uDEEE\\uDEEF\\uDEF6-\\uDEFF\\uDF46-\\uDF4F\\uDF5A\\uDF62\\uDF78-\\uDF7C\\uDF90-\\uDFFF]|\\uD81B[\\uDC00-\\uDEFF\\uDF45-\\uDF4F\\uDF7F-\\uDF8E\\uDFA0-\\uDFDF\\uDFE1-\\uDFFF]|\\uD821[\\uDFED-\\uDFFF]|\\uD822[\\uDEF3-\\uDFFF]|\\uD82C[\\uDC02-\\uDFFF]|\\uD82F[\\uDC6B-\\uDC6F\\uDC7D-\\uDC7F\\uDC89-\\uDC8F\\uDC9A\\uDC9B\\uDCA4-\\uDFFF]|\\uD834[\\uDCF6-\\uDCFF\\uDD27\\uDD28\\uDDE9-\\uDDFF\\uDE46-\\uDEFF\\uDF57-\\uDF5F\\uDF72-\\uDFFF]|\\uD835[\\uDC55\\uDC9D\\uDCA0\\uDCA1\\uDCA3\\uDCA4\\uDCA7\\uDCA8\\uDCAD\\uDCBA\\uDCBC\\uDCC4\\uDD06\\uDD0B\\uDD0C\\uDD15\\uDD1D\\uDD3A\\uDD3F\\uDD45\\uDD47-\\uDD49\\uDD51\\uDEA6\\uDEA7\\uDFCC\\uDFCD]|\\uD836[\\uDE8C-\\uDE9A\\uDEA0\\uDEB0-\\uDFFF]|\\uD838[\\uDC07\\uDC19\\uDC1A\\uDC22\\uDC25\\uDC2B-\\uDFFF]|\\uD83A[\\uDCC5\\uDCC6\\uDCD7-\\uDCFF\\uDD4B-\\uDD4F\\uDD5A-\\uDD5D\\uDD60-\\uDFFF]|\\uD83B[\\uDC00-\\uDDFF\\uDE04\\uDE20\\uDE23\\uDE25\\uDE26\\uDE28\\uDE33\\uDE38\\uDE3A\\uDE3C-\\uDE41\\uDE43-\\uDE46\\uDE48\\uDE4A\\uDE4C\\uDE50\\uDE53\\uDE55\\uDE56\\uDE58\\uDE5A\\uDE5C\\uDE5E\\uDE60\\uDE63\\uDE65\\uDE66\\uDE6B\\uDE73\\uDE78\\uDE7D\\uDE7F\\uDE8A\\uDE9C-\\uDEA0\\uDEA4\\uDEAA\\uDEBC-\\uDEEF\\uDEF2-\\uDFFF]|\\uD83C[\\uDC2C-\\uDC2F\\uDC94-\\uDC9F\\uDCAF\\uDCB0\\uDCC0\\uDCD0\\uDCF6-\\uDCFF\\uDD0D-\\uDD0F\\uDD2F\\uDD6C-\\uDD6F\\uDDAD-\\uDDE5\\uDE03-\\uDE0F\\uDE3C-\\uDE3F\\uDE49-\\uDE4F\\uDE52-\\uDEFF]|\\uD83D[\\uDED3-\\uDEDF\\uDEED-\\uDEEF\\uDEF7-\\uDEFF\\uDF74-\\uDF7F\\uDFD5-\\uDFFF]|\\uD83E[\\uDC0C-\\uDC0F\\uDC48-\\uDC4F\\uDC5A-\\uDC5F\\uDC88-\\uDC8F\\uDCAE-\\uDD0F\\uDD1F\\uDD28-\\uDD2F\\uDD31\\uDD32\\uDD3F\\uDD4C-\\uDD4F\\uDD5F-\\uDD7F\\uDD92-\\uDDBF\\uDDC1-\\uDFFF]|\\uD869[\\uDED7-\\uDEFF]|\\uD86D[\\uDF35-\\uDF3F]|\\uD86E[\\uDC1E\\uDC1F]|\\uD873[\\uDEA2-\\uDFFF]|\\uD87E[\\uDE1E-\\uDFFF]|\\uDB40[\\uDC00\\uDC02-\\uDC1F\\uDC80-\\uDCFF\\uDDF0-\\uDFFF]|[\\uDBBF\\uDBFF][\\uDFFE\\uDFFF]\"\n        }, {\n          name: 'Co',\n          alias: 'Private_Use',\n          bmp: \"\\uE000-\\uF8FF\",\n          astral: \"[\\uDB80-\\uDBBE\\uDBC0-\\uDBFE][\\uDC00-\\uDFFF]|[\\uDBBF\\uDBFF][\\uDC00-\\uDFFD]\"\n        }, {\n          name: 'Cs',\n          alias: 'Surrogate',\n          bmp: \"\\uD800-\\uDFFF\"\n        }, {\n          name: 'L',\n          alias: 'Letter',\n          bmp: \"A-Za-z\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B4\\u08B6-\\u08BD\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0AF9\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58-\\u0C5A\\u0C60\\u0C61\\u0C80\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D54-\\u0D56\\u0D5F-\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F5\\u13F8-\\u13FD\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16F1-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u1884\\u1887-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1C80-\\u1C88\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2183\\u2184\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005\\u3006\\u3031-\\u3035\\u303B\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FD5\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6E5\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA7AE\\uA7B0-\\uA7B7\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA8FD\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB65\\uAB70-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC\",\n          astral: \"\\uD800[\\uDC00-\\uDC0B\\uDC0D-\\uDC26\\uDC28-\\uDC3A\\uDC3C\\uDC3D\\uDC3F-\\uDC4D\\uDC50-\\uDC5D\\uDC80-\\uDCFA\\uDE80-\\uDE9C\\uDEA0-\\uDED0\\uDF00-\\uDF1F\\uDF30-\\uDF40\\uDF42-\\uDF49\\uDF50-\\uDF75\\uDF80-\\uDF9D\\uDFA0-\\uDFC3\\uDFC8-\\uDFCF]|\\uD801[\\uDC00-\\uDC9D\\uDCB0-\\uDCD3\\uDCD8-\\uDCFB\\uDD00-\\uDD27\\uDD30-\\uDD63\\uDE00-\\uDF36\\uDF40-\\uDF55\\uDF60-\\uDF67]|\\uD802[\\uDC00-\\uDC05\\uDC08\\uDC0A-\\uDC35\\uDC37\\uDC38\\uDC3C\\uDC3F-\\uDC55\\uDC60-\\uDC76\\uDC80-\\uDC9E\\uDCE0-\\uDCF2\\uDCF4\\uDCF5\\uDD00-\\uDD15\\uDD20-\\uDD39\\uDD80-\\uDDB7\\uDDBE\\uDDBF\\uDE00\\uDE10-\\uDE13\\uDE15-\\uDE17\\uDE19-\\uDE33\\uDE60-\\uDE7C\\uDE80-\\uDE9C\\uDEC0-\\uDEC7\\uDEC9-\\uDEE4\\uDF00-\\uDF35\\uDF40-\\uDF55\\uDF60-\\uDF72\\uDF80-\\uDF91]|\\uD803[\\uDC00-\\uDC48\\uDC80-\\uDCB2\\uDCC0-\\uDCF2]|\\uD804[\\uDC03-\\uDC37\\uDC83-\\uDCAF\\uDCD0-\\uDCE8\\uDD03-\\uDD26\\uDD50-\\uDD72\\uDD76\\uDD83-\\uDDB2\\uDDC1-\\uDDC4\\uDDDA\\uDDDC\\uDE00-\\uDE11\\uDE13-\\uDE2B\\uDE80-\\uDE86\\uDE88\\uDE8A-\\uDE8D\\uDE8F-\\uDE9D\\uDE9F-\\uDEA8\\uDEB0-\\uDEDE\\uDF05-\\uDF0C\\uDF0F\\uDF10\\uDF13-\\uDF28\\uDF2A-\\uDF30\\uDF32\\uDF33\\uDF35-\\uDF39\\uDF3D\\uDF50\\uDF5D-\\uDF61]|\\uD805[\\uDC00-\\uDC34\\uDC47-\\uDC4A\\uDC80-\\uDCAF\\uDCC4\\uDCC5\\uDCC7\\uDD80-\\uDDAE\\uDDD8-\\uDDDB\\uDE00-\\uDE2F\\uDE44\\uDE80-\\uDEAA\\uDF00-\\uDF19]|\\uD806[\\uDCA0-\\uDCDF\\uDCFF\\uDEC0-\\uDEF8]|\\uD807[\\uDC00-\\uDC08\\uDC0A-\\uDC2E\\uDC40\\uDC72-\\uDC8F]|\\uD808[\\uDC00-\\uDF99]|\\uD809[\\uDC80-\\uDD43]|[\\uD80C\\uD81C-\\uD820\\uD840-\\uD868\\uD86A-\\uD86C\\uD86F-\\uD872][\\uDC00-\\uDFFF]|\\uD80D[\\uDC00-\\uDC2E]|\\uD811[\\uDC00-\\uDE46]|\\uD81A[\\uDC00-\\uDE38\\uDE40-\\uDE5E\\uDED0-\\uDEED\\uDF00-\\uDF2F\\uDF40-\\uDF43\\uDF63-\\uDF77\\uDF7D-\\uDF8F]|\\uD81B[\\uDF00-\\uDF44\\uDF50\\uDF93-\\uDF9F\\uDFE0]|\\uD821[\\uDC00-\\uDFEC]|\\uD822[\\uDC00-\\uDEF2]|\\uD82C[\\uDC00\\uDC01]|\\uD82F[\\uDC00-\\uDC6A\\uDC70-\\uDC7C\\uDC80-\\uDC88\\uDC90-\\uDC99]|\\uD835[\\uDC00-\\uDC54\\uDC56-\\uDC9C\\uDC9E\\uDC9F\\uDCA2\\uDCA5\\uDCA6\\uDCA9-\\uDCAC\\uDCAE-\\uDCB9\\uDCBB\\uDCBD-\\uDCC3\\uDCC5-\\uDD05\\uDD07-\\uDD0A\\uDD0D-\\uDD14\\uDD16-\\uDD1C\\uDD1E-\\uDD39\\uDD3B-\\uDD3E\\uDD40-\\uDD44\\uDD46\\uDD4A-\\uDD50\\uDD52-\\uDEA5\\uDEA8-\\uDEC0\\uDEC2-\\uDEDA\\uDEDC-\\uDEFA\\uDEFC-\\uDF14\\uDF16-\\uDF34\\uDF36-\\uDF4E\\uDF50-\\uDF6E\\uDF70-\\uDF88\\uDF8A-\\uDFA8\\uDFAA-\\uDFC2\\uDFC4-\\uDFCB]|\\uD83A[\\uDC00-\\uDCC4\\uDD00-\\uDD43]|\\uD83B[\\uDE00-\\uDE03\\uDE05-\\uDE1F\\uDE21\\uDE22\\uDE24\\uDE27\\uDE29-\\uDE32\\uDE34-\\uDE37\\uDE39\\uDE3B\\uDE42\\uDE47\\uDE49\\uDE4B\\uDE4D-\\uDE4F\\uDE51\\uDE52\\uDE54\\uDE57\\uDE59\\uDE5B\\uDE5D\\uDE5F\\uDE61\\uDE62\\uDE64\\uDE67-\\uDE6A\\uDE6C-\\uDE72\\uDE74-\\uDE77\\uDE79-\\uDE7C\\uDE7E\\uDE80-\\uDE89\\uDE8B-\\uDE9B\\uDEA1-\\uDEA3\\uDEA5-\\uDEA9\\uDEAB-\\uDEBB]|\\uD869[\\uDC00-\\uDED6\\uDF00-\\uDFFF]|\\uD86D[\\uDC00-\\uDF34\\uDF40-\\uDFFF]|\\uD86E[\\uDC00-\\uDC1D\\uDC20-\\uDFFF]|\\uD873[\\uDC00-\\uDEA1]|\\uD87E[\\uDC00-\\uDE1D]\"\n        }, {\n          name: 'Ll',\n          alias: 'Lowercase_Letter',\n          bmp: \"a-z\\xB5\\xDF-\\xF6\\xF8-\\xFF\\u0101\\u0103\\u0105\\u0107\\u0109\\u010B\\u010D\\u010F\\u0111\\u0113\\u0115\\u0117\\u0119\\u011B\\u011D\\u011F\\u0121\\u0123\\u0125\\u0127\\u0129\\u012B\\u012D\\u012F\\u0131\\u0133\\u0135\\u0137\\u0138\\u013A\\u013C\\u013E\\u0140\\u0142\\u0144\\u0146\\u0148\\u0149\\u014B\\u014D\\u014F\\u0151\\u0153\\u0155\\u0157\\u0159\\u015B\\u015D\\u015F\\u0161\\u0163\\u0165\\u0167\\u0169\\u016B\\u016D\\u016F\\u0171\\u0173\\u0175\\u0177\\u017A\\u017C\\u017E-\\u0180\\u0183\\u0185\\u0188\\u018C\\u018D\\u0192\\u0195\\u0199-\\u019B\\u019E\\u01A1\\u01A3\\u01A5\\u01A8\\u01AA\\u01AB\\u01AD\\u01B0\\u01B4\\u01B6\\u01B9\\u01BA\\u01BD-\\u01BF\\u01C6\\u01C9\\u01CC\\u01CE\\u01D0\\u01D2\\u01D4\\u01D6\\u01D8\\u01DA\\u01DC\\u01DD\\u01DF\\u01E1\\u01E3\\u01E5\\u01E7\\u01E9\\u01EB\\u01ED\\u01EF\\u01F0\\u01F3\\u01F5\\u01F9\\u01FB\\u01FD\\u01FF\\u0201\\u0203\\u0205\\u0207\\u0209\\u020B\\u020D\\u020F\\u0211\\u0213\\u0215\\u0217\\u0219\\u021B\\u021D\\u021F\\u0221\\u0223\\u0225\\u0227\\u0229\\u022B\\u022D\\u022F\\u0231\\u0233-\\u0239\\u023C\\u023F\\u0240\\u0242\\u0247\\u0249\\u024B\\u024D\\u024F-\\u0293\\u0295-\\u02AF\\u0371\\u0373\\u0377\\u037B-\\u037D\\u0390\\u03AC-\\u03CE\\u03D0\\u03D1\\u03D5-\\u03D7\\u03D9\\u03DB\\u03DD\\u03DF\\u03E1\\u03E3\\u03E5\\u03E7\\u03E9\\u03EB\\u03ED\\u03EF-\\u03F3\\u03F5\\u03F8\\u03FB\\u03FC\\u0430-\\u045F\\u0461\\u0463\\u0465\\u0467\\u0469\\u046B\\u046D\\u046F\\u0471\\u0473\\u0475\\u0477\\u0479\\u047B\\u047D\\u047F\\u0481\\u048B\\u048D\\u048F\\u0491\\u0493\\u0495\\u0497\\u0499\\u049B\\u049D\\u049F\\u04A1\\u04A3\\u04A5\\u04A7\\u04A9\\u04AB\\u04AD\\u04AF\\u04B1\\u04B3\\u04B5\\u04B7\\u04B9\\u04BB\\u04BD\\u04BF\\u04C2\\u04C4\\u04C6\\u04C8\\u04CA\\u04CC\\u04CE\\u04CF\\u04D1\\u04D3\\u04D5\\u04D7\\u04D9\\u04DB\\u04DD\\u04DF\\u04E1\\u04E3\\u04E5\\u04E7\\u04E9\\u04EB\\u04ED\\u04EF\\u04F1\\u04F3\\u04F5\\u04F7\\u04F9\\u04FB\\u04FD\\u04FF\\u0501\\u0503\\u0505\\u0507\\u0509\\u050B\\u050D\\u050F\\u0511\\u0513\\u0515\\u0517\\u0519\\u051B\\u051D\\u051F\\u0521\\u0523\\u0525\\u0527\\u0529\\u052B\\u052D\\u052F\\u0561-\\u0587\\u13F8-\\u13FD\\u1C80-\\u1C88\\u1D00-\\u1D2B\\u1D6B-\\u1D77\\u1D79-\\u1D9A\\u1E01\\u1E03\\u1E05\\u1E07\\u1E09\\u1E0B\\u1E0D\\u1E0F\\u1E11\\u1E13\\u1E15\\u1E17\\u1E19\\u1E1B\\u1E1D\\u1E1F\\u1E21\\u1E23\\u1E25\\u1E27\\u1E29\\u1E2B\\u1E2D\\u1E2F\\u1E31\\u1E33\\u1E35\\u1E37\\u1E39\\u1E3B\\u1E3D\\u1E3F\\u1E41\\u1E43\\u1E45\\u1E47\\u1E49\\u1E4B\\u1E4D\\u1E4F\\u1E51\\u1E53\\u1E55\\u1E57\\u1E59\\u1E5B\\u1E5D\\u1E5F\\u1E61\\u1E63\\u1E65\\u1E67\\u1E69\\u1E6B\\u1E6D\\u1E6F\\u1E71\\u1E73\\u1E75\\u1E77\\u1E79\\u1E7B\\u1E7D\\u1E7F\\u1E81\\u1E83\\u1E85\\u1E87\\u1E89\\u1E8B\\u1E8D\\u1E8F\\u1E91\\u1E93\\u1E95-\\u1E9D\\u1E9F\\u1EA1\\u1EA3\\u1EA5\\u1EA7\\u1EA9\\u1EAB\\u1EAD\\u1EAF\\u1EB1\\u1EB3\\u1EB5\\u1EB7\\u1EB9\\u1EBB\\u1EBD\\u1EBF\\u1EC1\\u1EC3\\u1EC5\\u1EC7\\u1EC9\\u1ECB\\u1ECD\\u1ECF\\u1ED1\\u1ED3\\u1ED5\\u1ED7\\u1ED9\\u1EDB\\u1EDD\\u1EDF\\u1EE1\\u1EE3\\u1EE5\\u1EE7\\u1EE9\\u1EEB\\u1EED\\u1EEF\\u1EF1\\u1EF3\\u1EF5\\u1EF7\\u1EF9\\u1EFB\\u1EFD\\u1EFF-\\u1F07\\u1F10-\\u1F15\\u1F20-\\u1F27\\u1F30-\\u1F37\\u1F40-\\u1F45\\u1F50-\\u1F57\\u1F60-\\u1F67\\u1F70-\\u1F7D\\u1F80-\\u1F87\\u1F90-\\u1F97\\u1FA0-\\u1FA7\\u1FB0-\\u1FB4\\u1FB6\\u1FB7\\u1FBE\\u1FC2-\\u1FC4\\u1FC6\\u1FC7\\u1FD0-\\u1FD3\\u1FD6\\u1FD7\\u1FE0-\\u1FE7\\u1FF2-\\u1FF4\\u1FF6\\u1FF7\\u210A\\u210E\\u210F\\u2113\\u212F\\u2134\\u2139\\u213C\\u213D\\u2146-\\u2149\\u214E\\u2184\\u2C30-\\u2C5E\\u2C61\\u2C65\\u2C66\\u2C68\\u2C6A\\u2C6C\\u2C71\\u2C73\\u2C74\\u2C76-\\u2C7B\\u2C81\\u2C83\\u2C85\\u2C87\\u2C89\\u2C8B\\u2C8D\\u2C8F\\u2C91\\u2C93\\u2C95\\u2C97\\u2C99\\u2C9B\\u2C9D\\u2C9F\\u2CA1\\u2CA3\\u2CA5\\u2CA7\\u2CA9\\u2CAB\\u2CAD\\u2CAF\\u2CB1\\u2CB3\\u2CB5\\u2CB7\\u2CB9\\u2CBB\\u2CBD\\u2CBF\\u2CC1\\u2CC3\\u2CC5\\u2CC7\\u2CC9\\u2CCB\\u2CCD\\u2CCF\\u2CD1\\u2CD3\\u2CD5\\u2CD7\\u2CD9\\u2CDB\\u2CDD\\u2CDF\\u2CE1\\u2CE3\\u2CE4\\u2CEC\\u2CEE\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\uA641\\uA643\\uA645\\uA647\\uA649\\uA64B\\uA64D\\uA64F\\uA651\\uA653\\uA655\\uA657\\uA659\\uA65B\\uA65D\\uA65F\\uA661\\uA663\\uA665\\uA667\\uA669\\uA66B\\uA66D\\uA681\\uA683\\uA685\\uA687\\uA689\\uA68B\\uA68D\\uA68F\\uA691\\uA693\\uA695\\uA697\\uA699\\uA69B\\uA723\\uA725\\uA727\\uA729\\uA72B\\uA72D\\uA72F-\\uA731\\uA733\\uA735\\uA737\\uA739\\uA73B\\uA73D\\uA73F\\uA741\\uA743\\uA745\\uA747\\uA749\\uA74B\\uA74D\\uA74F\\uA751\\uA753\\uA755\\uA757\\uA759\\uA75B\\uA75D\\uA75F\\uA761\\uA763\\uA765\\uA767\\uA769\\uA76B\\uA76D\\uA76F\\uA771-\\uA778\\uA77A\\uA77C\\uA77F\\uA781\\uA783\\uA785\\uA787\\uA78C\\uA78E\\uA791\\uA793-\\uA795\\uA797\\uA799\\uA79B\\uA79D\\uA79F\\uA7A1\\uA7A3\\uA7A5\\uA7A7\\uA7A9\\uA7B5\\uA7B7\\uA7FA\\uAB30-\\uAB5A\\uAB60-\\uAB65\\uAB70-\\uABBF\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFF41-\\uFF5A\",\n          astral: \"\\uD801[\\uDC28-\\uDC4F\\uDCD8-\\uDCFB]|\\uD803[\\uDCC0-\\uDCF2]|\\uD806[\\uDCC0-\\uDCDF]|\\uD835[\\uDC1A-\\uDC33\\uDC4E-\\uDC54\\uDC56-\\uDC67\\uDC82-\\uDC9B\\uDCB6-\\uDCB9\\uDCBB\\uDCBD-\\uDCC3\\uDCC5-\\uDCCF\\uDCEA-\\uDD03\\uDD1E-\\uDD37\\uDD52-\\uDD6B\\uDD86-\\uDD9F\\uDDBA-\\uDDD3\\uDDEE-\\uDE07\\uDE22-\\uDE3B\\uDE56-\\uDE6F\\uDE8A-\\uDEA5\\uDEC2-\\uDEDA\\uDEDC-\\uDEE1\\uDEFC-\\uDF14\\uDF16-\\uDF1B\\uDF36-\\uDF4E\\uDF50-\\uDF55\\uDF70-\\uDF88\\uDF8A-\\uDF8F\\uDFAA-\\uDFC2\\uDFC4-\\uDFC9\\uDFCB]|\\uD83A[\\uDD22-\\uDD43]\"\n        }, {\n          name: 'Lm',\n          alias: 'Modifier_Letter',\n          bmp: \"\\u02B0-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0374\\u037A\\u0559\\u0640\\u06E5\\u06E6\\u07F4\\u07F5\\u07FA\\u081A\\u0824\\u0828\\u0971\\u0E46\\u0EC6\\u10FC\\u17D7\\u1843\\u1AA7\\u1C78-\\u1C7D\\u1D2C-\\u1D6A\\u1D78\\u1D9B-\\u1DBF\\u2071\\u207F\\u2090-\\u209C\\u2C7C\\u2C7D\\u2D6F\\u2E2F\\u3005\\u3031-\\u3035\\u303B\\u309D\\u309E\\u30FC-\\u30FE\\uA015\\uA4F8-\\uA4FD\\uA60C\\uA67F\\uA69C\\uA69D\\uA717-\\uA71F\\uA770\\uA788\\uA7F8\\uA7F9\\uA9CF\\uA9E6\\uAA70\\uAADD\\uAAF3\\uAAF4\\uAB5C-\\uAB5F\\uFF70\\uFF9E\\uFF9F\",\n          astral: \"\\uD81A[\\uDF40-\\uDF43]|\\uD81B[\\uDF93-\\uDF9F\\uDFE0]\"\n        }, {\n          name: 'Lo',\n          alias: 'Other_Letter',\n          bmp: \"\\xAA\\xBA\\u01BB\\u01C0-\\u01C3\\u0294\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u063F\\u0641-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u0800-\\u0815\\u0840-\\u0858\\u08A0-\\u08B4\\u08B6-\\u08BD\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0972-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0AF9\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58-\\u0C5A\\u0C60\\u0C61\\u0C80\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D54-\\u0D56\\u0D5F-\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E45\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10D0-\\u10FA\\u10FD-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16F1-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17DC\\u1820-\\u1842\\u1844-\\u1877\\u1880-\\u1884\\u1887-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C77\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u2135-\\u2138\\u2D30-\\u2D67\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u3006\\u303C\\u3041-\\u3096\\u309F\\u30A1-\\u30FA\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FD5\\uA000-\\uA014\\uA016-\\uA48C\\uA4D0-\\uA4F7\\uA500-\\uA60B\\uA610-\\uA61F\\uA62A\\uA62B\\uA66E\\uA6A0-\\uA6E5\\uA78F\\uA7F7\\uA7FB-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA8FD\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9E0-\\uA9E4\\uA9E7-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA6F\\uAA71-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB\\uAADC\\uAAE0-\\uAAEA\\uAAF2\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF66-\\uFF6F\\uFF71-\\uFF9D\\uFFA0-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC\",\n          astral: \"\\uD800[\\uDC00-\\uDC0B\\uDC0D-\\uDC26\\uDC28-\\uDC3A\\uDC3C\\uDC3D\\uDC3F-\\uDC4D\\uDC50-\\uDC5D\\uDC80-\\uDCFA\\uDE80-\\uDE9C\\uDEA0-\\uDED0\\uDF00-\\uDF1F\\uDF30-\\uDF40\\uDF42-\\uDF49\\uDF50-\\uDF75\\uDF80-\\uDF9D\\uDFA0-\\uDFC3\\uDFC8-\\uDFCF]|\\uD801[\\uDC50-\\uDC9D\\uDD00-\\uDD27\\uDD30-\\uDD63\\uDE00-\\uDF36\\uDF40-\\uDF55\\uDF60-\\uDF67]|\\uD802[\\uDC00-\\uDC05\\uDC08\\uDC0A-\\uDC35\\uDC37\\uDC38\\uDC3C\\uDC3F-\\uDC55\\uDC60-\\uDC76\\uDC80-\\uDC9E\\uDCE0-\\uDCF2\\uDCF4\\uDCF5\\uDD00-\\uDD15\\uDD20-\\uDD39\\uDD80-\\uDDB7\\uDDBE\\uDDBF\\uDE00\\uDE10-\\uDE13\\uDE15-\\uDE17\\uDE19-\\uDE33\\uDE60-\\uDE7C\\uDE80-\\uDE9C\\uDEC0-\\uDEC7\\uDEC9-\\uDEE4\\uDF00-\\uDF35\\uDF40-\\uDF55\\uDF60-\\uDF72\\uDF80-\\uDF91]|\\uD803[\\uDC00-\\uDC48]|\\uD804[\\uDC03-\\uDC37\\uDC83-\\uDCAF\\uDCD0-\\uDCE8\\uDD03-\\uDD26\\uDD50-\\uDD72\\uDD76\\uDD83-\\uDDB2\\uDDC1-\\uDDC4\\uDDDA\\uDDDC\\uDE00-\\uDE11\\uDE13-\\uDE2B\\uDE80-\\uDE86\\uDE88\\uDE8A-\\uDE8D\\uDE8F-\\uDE9D\\uDE9F-\\uDEA8\\uDEB0-\\uDEDE\\uDF05-\\uDF0C\\uDF0F\\uDF10\\uDF13-\\uDF28\\uDF2A-\\uDF30\\uDF32\\uDF33\\uDF35-\\uDF39\\uDF3D\\uDF50\\uDF5D-\\uDF61]|\\uD805[\\uDC00-\\uDC34\\uDC47-\\uDC4A\\uDC80-\\uDCAF\\uDCC4\\uDCC5\\uDCC7\\uDD80-\\uDDAE\\uDDD8-\\uDDDB\\uDE00-\\uDE2F\\uDE44\\uDE80-\\uDEAA\\uDF00-\\uDF19]|\\uD806[\\uDCFF\\uDEC0-\\uDEF8]|\\uD807[\\uDC00-\\uDC08\\uDC0A-\\uDC2E\\uDC40\\uDC72-\\uDC8F]|\\uD808[\\uDC00-\\uDF99]|\\uD809[\\uDC80-\\uDD43]|[\\uD80C\\uD81C-\\uD820\\uD840-\\uD868\\uD86A-\\uD86C\\uD86F-\\uD872][\\uDC00-\\uDFFF]|\\uD80D[\\uDC00-\\uDC2E]|\\uD811[\\uDC00-\\uDE46]|\\uD81A[\\uDC00-\\uDE38\\uDE40-\\uDE5E\\uDED0-\\uDEED\\uDF00-\\uDF2F\\uDF63-\\uDF77\\uDF7D-\\uDF8F]|\\uD81B[\\uDF00-\\uDF44\\uDF50]|\\uD821[\\uDC00-\\uDFEC]|\\uD822[\\uDC00-\\uDEF2]|\\uD82C[\\uDC00\\uDC01]|\\uD82F[\\uDC00-\\uDC6A\\uDC70-\\uDC7C\\uDC80-\\uDC88\\uDC90-\\uDC99]|\\uD83A[\\uDC00-\\uDCC4]|\\uD83B[\\uDE00-\\uDE03\\uDE05-\\uDE1F\\uDE21\\uDE22\\uDE24\\uDE27\\uDE29-\\uDE32\\uDE34-\\uDE37\\uDE39\\uDE3B\\uDE42\\uDE47\\uDE49\\uDE4B\\uDE4D-\\uDE4F\\uDE51\\uDE52\\uDE54\\uDE57\\uDE59\\uDE5B\\uDE5D\\uDE5F\\uDE61\\uDE62\\uDE64\\uDE67-\\uDE6A\\uDE6C-\\uDE72\\uDE74-\\uDE77\\uDE79-\\uDE7C\\uDE7E\\uDE80-\\uDE89\\uDE8B-\\uDE9B\\uDEA1-\\uDEA3\\uDEA5-\\uDEA9\\uDEAB-\\uDEBB]|\\uD869[\\uDC00-\\uDED6\\uDF00-\\uDFFF]|\\uD86D[\\uDC00-\\uDF34\\uDF40-\\uDFFF]|\\uD86E[\\uDC00-\\uDC1D\\uDC20-\\uDFFF]|\\uD873[\\uDC00-\\uDEA1]|\\uD87E[\\uDC00-\\uDE1D]\"\n        }, {\n          name: 'Lt',\n          alias: 'Titlecase_Letter',\n          bmp: \"\\u01C5\\u01C8\\u01CB\\u01F2\\u1F88-\\u1F8F\\u1F98-\\u1F9F\\u1FA8-\\u1FAF\\u1FBC\\u1FCC\\u1FFC\"\n        }, {\n          name: 'Lu',\n          alias: 'Uppercase_Letter',\n          bmp: \"A-Z\\xC0-\\xD6\\xD8-\\xDE\\u0100\\u0102\\u0104\\u0106\\u0108\\u010A\\u010C\\u010E\\u0110\\u0112\\u0114\\u0116\\u0118\\u011A\\u011C\\u011E\\u0120\\u0122\\u0124\\u0126\\u0128\\u012A\\u012C\\u012E\\u0130\\u0132\\u0134\\u0136\\u0139\\u013B\\u013D\\u013F\\u0141\\u0143\\u0145\\u0147\\u014A\\u014C\\u014E\\u0150\\u0152\\u0154\\u0156\\u0158\\u015A\\u015C\\u015E\\u0160\\u0162\\u0164\\u0166\\u0168\\u016A\\u016C\\u016E\\u0170\\u0172\\u0174\\u0176\\u0178\\u0179\\u017B\\u017D\\u0181\\u0182\\u0184\\u0186\\u0187\\u0189-\\u018B\\u018E-\\u0191\\u0193\\u0194\\u0196-\\u0198\\u019C\\u019D\\u019F\\u01A0\\u01A2\\u01A4\\u01A6\\u01A7\\u01A9\\u01AC\\u01AE\\u01AF\\u01B1-\\u01B3\\u01B5\\u01B7\\u01B8\\u01BC\\u01C4\\u01C7\\u01CA\\u01CD\\u01CF\\u01D1\\u01D3\\u01D5\\u01D7\\u01D9\\u01DB\\u01DE\\u01E0\\u01E2\\u01E4\\u01E6\\u01E8\\u01EA\\u01EC\\u01EE\\u01F1\\u01F4\\u01F6-\\u01F8\\u01FA\\u01FC\\u01FE\\u0200\\u0202\\u0204\\u0206\\u0208\\u020A\\u020C\\u020E\\u0210\\u0212\\u0214\\u0216\\u0218\\u021A\\u021C\\u021E\\u0220\\u0222\\u0224\\u0226\\u0228\\u022A\\u022C\\u022E\\u0230\\u0232\\u023A\\u023B\\u023D\\u023E\\u0241\\u0243-\\u0246\\u0248\\u024A\\u024C\\u024E\\u0370\\u0372\\u0376\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E\\u038F\\u0391-\\u03A1\\u03A3-\\u03AB\\u03CF\\u03D2-\\u03D4\\u03D8\\u03DA\\u03DC\\u03DE\\u03E0\\u03E2\\u03E4\\u03E6\\u03E8\\u03EA\\u03EC\\u03EE\\u03F4\\u03F7\\u03F9\\u03FA\\u03FD-\\u042F\\u0460\\u0462\\u0464\\u0466\\u0468\\u046A\\u046C\\u046E\\u0470\\u0472\\u0474\\u0476\\u0478\\u047A\\u047C\\u047E\\u0480\\u048A\\u048C\\u048E\\u0490\\u0492\\u0494\\u0496\\u0498\\u049A\\u049C\\u049E\\u04A0\\u04A2\\u04A4\\u04A6\\u04A8\\u04AA\\u04AC\\u04AE\\u04B0\\u04B2\\u04B4\\u04B6\\u04B8\\u04BA\\u04BC\\u04BE\\u04C0\\u04C1\\u04C3\\u04C5\\u04C7\\u04C9\\u04CB\\u04CD\\u04D0\\u04D2\\u04D4\\u04D6\\u04D8\\u04DA\\u04DC\\u04DE\\u04E0\\u04E2\\u04E4\\u04E6\\u04E8\\u04EA\\u04EC\\u04EE\\u04F0\\u04F2\\u04F4\\u04F6\\u04F8\\u04FA\\u04FC\\u04FE\\u0500\\u0502\\u0504\\u0506\\u0508\\u050A\\u050C\\u050E\\u0510\\u0512\\u0514\\u0516\\u0518\\u051A\\u051C\\u051E\\u0520\\u0522\\u0524\\u0526\\u0528\\u052A\\u052C\\u052E\\u0531-\\u0556\\u10A0-\\u10C5\\u10C7\\u10CD\\u13A0-\\u13F5\\u1E00\\u1E02\\u1E04\\u1E06\\u1E08\\u1E0A\\u1E0C\\u1E0E\\u1E10\\u1E12\\u1E14\\u1E16\\u1E18\\u1E1A\\u1E1C\\u1E1E\\u1E20\\u1E22\\u1E24\\u1E26\\u1E28\\u1E2A\\u1E2C\\u1E2E\\u1E30\\u1E32\\u1E34\\u1E36\\u1E38\\u1E3A\\u1E3C\\u1E3E\\u1E40\\u1E42\\u1E44\\u1E46\\u1E48\\u1E4A\\u1E4C\\u1E4E\\u1E50\\u1E52\\u1E54\\u1E56\\u1E58\\u1E5A\\u1E5C\\u1E5E\\u1E60\\u1E62\\u1E64\\u1E66\\u1E68\\u1E6A\\u1E6C\\u1E6E\\u1E70\\u1E72\\u1E74\\u1E76\\u1E78\\u1E7A\\u1E7C\\u1E7E\\u1E80\\u1E82\\u1E84\\u1E86\\u1E88\\u1E8A\\u1E8C\\u1E8E\\u1E90\\u1E92\\u1E94\\u1E9E\\u1EA0\\u1EA2\\u1EA4\\u1EA6\\u1EA8\\u1EAA\\u1EAC\\u1EAE\\u1EB0\\u1EB2\\u1EB4\\u1EB6\\u1EB8\\u1EBA\\u1EBC\\u1EBE\\u1EC0\\u1EC2\\u1EC4\\u1EC6\\u1EC8\\u1ECA\\u1ECC\\u1ECE\\u1ED0\\u1ED2\\u1ED4\\u1ED6\\u1ED8\\u1EDA\\u1EDC\\u1EDE\\u1EE0\\u1EE2\\u1EE4\\u1EE6\\u1EE8\\u1EEA\\u1EEC\\u1EEE\\u1EF0\\u1EF2\\u1EF4\\u1EF6\\u1EF8\\u1EFA\\u1EFC\\u1EFE\\u1F08-\\u1F0F\\u1F18-\\u1F1D\\u1F28-\\u1F2F\\u1F38-\\u1F3F\\u1F48-\\u1F4D\\u1F59\\u1F5B\\u1F5D\\u1F5F\\u1F68-\\u1F6F\\u1FB8-\\u1FBB\\u1FC8-\\u1FCB\\u1FD8-\\u1FDB\\u1FE8-\\u1FEC\\u1FF8-\\u1FFB\\u2102\\u2107\\u210B-\\u210D\\u2110-\\u2112\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u2130-\\u2133\\u213E\\u213F\\u2145\\u2183\\u2C00-\\u2C2E\\u2C60\\u2C62-\\u2C64\\u2C67\\u2C69\\u2C6B\\u2C6D-\\u2C70\\u2C72\\u2C75\\u2C7E-\\u2C80\\u2C82\\u2C84\\u2C86\\u2C88\\u2C8A\\u2C8C\\u2C8E\\u2C90\\u2C92\\u2C94\\u2C96\\u2C98\\u2C9A\\u2C9C\\u2C9E\\u2CA0\\u2CA2\\u2CA4\\u2CA6\\u2CA8\\u2CAA\\u2CAC\\u2CAE\\u2CB0\\u2CB2\\u2CB4\\u2CB6\\u2CB8\\u2CBA\\u2CBC\\u2CBE\\u2CC0\\u2CC2\\u2CC4\\u2CC6\\u2CC8\\u2CCA\\u2CCC\\u2CCE\\u2CD0\\u2CD2\\u2CD4\\u2CD6\\u2CD8\\u2CDA\\u2CDC\\u2CDE\\u2CE0\\u2CE2\\u2CEB\\u2CED\\u2CF2\\uA640\\uA642\\uA644\\uA646\\uA648\\uA64A\\uA64C\\uA64E\\uA650\\uA652\\uA654\\uA656\\uA658\\uA65A\\uA65C\\uA65E\\uA660\\uA662\\uA664\\uA666\\uA668\\uA66A\\uA66C\\uA680\\uA682\\uA684\\uA686\\uA688\\uA68A\\uA68C\\uA68E\\uA690\\uA692\\uA694\\uA696\\uA698\\uA69A\\uA722\\uA724\\uA726\\uA728\\uA72A\\uA72C\\uA72E\\uA732\\uA734\\uA736\\uA738\\uA73A\\uA73C\\uA73E\\uA740\\uA742\\uA744\\uA746\\uA748\\uA74A\\uA74C\\uA74E\\uA750\\uA752\\uA754\\uA756\\uA758\\uA75A\\uA75C\\uA75E\\uA760\\uA762\\uA764\\uA766\\uA768\\uA76A\\uA76C\\uA76E\\uA779\\uA77B\\uA77D\\uA77E\\uA780\\uA782\\uA784\\uA786\\uA78B\\uA78D\\uA790\\uA792\\uA796\\uA798\\uA79A\\uA79C\\uA79E\\uA7A0\\uA7A2\\uA7A4\\uA7A6\\uA7A8\\uA7AA-\\uA7AE\\uA7B0-\\uA7B4\\uA7B6\\uFF21-\\uFF3A\",\n          astral: \"\\uD801[\\uDC00-\\uDC27\\uDCB0-\\uDCD3]|\\uD803[\\uDC80-\\uDCB2]|\\uD806[\\uDCA0-\\uDCBF]|\\uD835[\\uDC00-\\uDC19\\uDC34-\\uDC4D\\uDC68-\\uDC81\\uDC9C\\uDC9E\\uDC9F\\uDCA2\\uDCA5\\uDCA6\\uDCA9-\\uDCAC\\uDCAE-\\uDCB5\\uDCD0-\\uDCE9\\uDD04\\uDD05\\uDD07-\\uDD0A\\uDD0D-\\uDD14\\uDD16-\\uDD1C\\uDD38\\uDD39\\uDD3B-\\uDD3E\\uDD40-\\uDD44\\uDD46\\uDD4A-\\uDD50\\uDD6C-\\uDD85\\uDDA0-\\uDDB9\\uDDD4-\\uDDED\\uDE08-\\uDE21\\uDE3C-\\uDE55\\uDE70-\\uDE89\\uDEA8-\\uDEC0\\uDEE2-\\uDEFA\\uDF1C-\\uDF34\\uDF56-\\uDF6E\\uDF90-\\uDFA8\\uDFCA]|\\uD83A[\\uDD00-\\uDD21]\"\n        }, {\n          name: 'M',\n          alias: 'Mark',\n          bmp: \"\\u0300-\\u036F\\u0483-\\u0489\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u0610-\\u061A\\u064B-\\u065F\\u0670\\u06D6-\\u06DC\\u06DF-\\u06E4\\u06E7\\u06E8\\u06EA-\\u06ED\\u0711\\u0730-\\u074A\\u07A6-\\u07B0\\u07EB-\\u07F3\\u0816-\\u0819\\u081B-\\u0823\\u0825-\\u0827\\u0829-\\u082D\\u0859-\\u085B\\u08D4-\\u08E1\\u08E3-\\u0903\\u093A-\\u093C\\u093E-\\u094F\\u0951-\\u0957\\u0962\\u0963\\u0981-\\u0983\\u09BC\\u09BE-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CD\\u09D7\\u09E2\\u09E3\\u0A01-\\u0A03\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A70\\u0A71\\u0A75\\u0A81-\\u0A83\\u0ABC\\u0ABE-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AE2\\u0AE3\\u0B01-\\u0B03\\u0B3C\\u0B3E-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B62\\u0B63\\u0B82\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD7\\u0C00-\\u0C03\\u0C3E-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C62\\u0C63\\u0C81-\\u0C83\\u0CBC\\u0CBE-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CE2\\u0CE3\\u0D01-\\u0D03\\u0D3E-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4D\\u0D57\\u0D62\\u0D63\\u0D82\\u0D83\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DF2\\u0DF3\\u0E31\\u0E34-\\u0E3A\\u0E47-\\u0E4E\\u0EB1\\u0EB4-\\u0EB9\\u0EBB\\u0EBC\\u0EC8-\\u0ECD\\u0F18\\u0F19\\u0F35\\u0F37\\u0F39\\u0F3E\\u0F3F\\u0F71-\\u0F84\\u0F86\\u0F87\\u0F8D-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u102B-\\u103E\\u1056-\\u1059\\u105E-\\u1060\\u1062-\\u1064\\u1067-\\u106D\\u1071-\\u1074\\u1082-\\u108D\\u108F\\u109A-\\u109D\\u135D-\\u135F\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17B4-\\u17D3\\u17DD\\u180B-\\u180D\\u1885\\u1886\\u18A9\\u1920-\\u192B\\u1930-\\u193B\\u1A17-\\u1A1B\\u1A55-\\u1A5E\\u1A60-\\u1A7C\\u1A7F\\u1AB0-\\u1ABE\\u1B00-\\u1B04\\u1B34-\\u1B44\\u1B6B-\\u1B73\\u1B80-\\u1B82\\u1BA1-\\u1BAD\\u1BE6-\\u1BF3\\u1C24-\\u1C37\\u1CD0-\\u1CD2\\u1CD4-\\u1CE8\\u1CED\\u1CF2-\\u1CF4\\u1CF8\\u1CF9\\u1DC0-\\u1DF5\\u1DFB-\\u1DFF\\u20D0-\\u20F0\\u2CEF-\\u2CF1\\u2D7F\\u2DE0-\\u2DFF\\u302A-\\u302F\\u3099\\u309A\\uA66F-\\uA672\\uA674-\\uA67D\\uA69E\\uA69F\\uA6F0\\uA6F1\\uA802\\uA806\\uA80B\\uA823-\\uA827\\uA880\\uA881\\uA8B4-\\uA8C5\\uA8E0-\\uA8F1\\uA926-\\uA92D\\uA947-\\uA953\\uA980-\\uA983\\uA9B3-\\uA9C0\\uA9E5\\uAA29-\\uAA36\\uAA43\\uAA4C\\uAA4D\\uAA7B-\\uAA7D\\uAAB0\\uAAB2-\\uAAB4\\uAAB7\\uAAB8\\uAABE\\uAABF\\uAAC1\\uAAEB-\\uAAEF\\uAAF5\\uAAF6\\uABE3-\\uABEA\\uABEC\\uABED\\uFB1E\\uFE00-\\uFE0F\\uFE20-\\uFE2F\",\n          astral: \"\\uD800[\\uDDFD\\uDEE0\\uDF76-\\uDF7A]|\\uD802[\\uDE01-\\uDE03\\uDE05\\uDE06\\uDE0C-\\uDE0F\\uDE38-\\uDE3A\\uDE3F\\uDEE5\\uDEE6]|\\uD804[\\uDC00-\\uDC02\\uDC38-\\uDC46\\uDC7F-\\uDC82\\uDCB0-\\uDCBA\\uDD00-\\uDD02\\uDD27-\\uDD34\\uDD73\\uDD80-\\uDD82\\uDDB3-\\uDDC0\\uDDCA-\\uDDCC\\uDE2C-\\uDE37\\uDE3E\\uDEDF-\\uDEEA\\uDF00-\\uDF03\\uDF3C\\uDF3E-\\uDF44\\uDF47\\uDF48\\uDF4B-\\uDF4D\\uDF57\\uDF62\\uDF63\\uDF66-\\uDF6C\\uDF70-\\uDF74]|\\uD805[\\uDC35-\\uDC46\\uDCB0-\\uDCC3\\uDDAF-\\uDDB5\\uDDB8-\\uDDC0\\uDDDC\\uDDDD\\uDE30-\\uDE40\\uDEAB-\\uDEB7\\uDF1D-\\uDF2B]|\\uD807[\\uDC2F-\\uDC36\\uDC38-\\uDC3F\\uDC92-\\uDCA7\\uDCA9-\\uDCB6]|\\uD81A[\\uDEF0-\\uDEF4\\uDF30-\\uDF36]|\\uD81B[\\uDF51-\\uDF7E\\uDF8F-\\uDF92]|\\uD82F[\\uDC9D\\uDC9E]|\\uD834[\\uDD65-\\uDD69\\uDD6D-\\uDD72\\uDD7B-\\uDD82\\uDD85-\\uDD8B\\uDDAA-\\uDDAD\\uDE42-\\uDE44]|\\uD836[\\uDE00-\\uDE36\\uDE3B-\\uDE6C\\uDE75\\uDE84\\uDE9B-\\uDE9F\\uDEA1-\\uDEAF]|\\uD838[\\uDC00-\\uDC06\\uDC08-\\uDC18\\uDC1B-\\uDC21\\uDC23\\uDC24\\uDC26-\\uDC2A]|\\uD83A[\\uDCD0-\\uDCD6\\uDD44-\\uDD4A]|\\uDB40[\\uDD00-\\uDDEF]\"\n        }, {\n          name: 'Mc',\n          alias: 'Spacing_Mark',\n          bmp: \"\\u0903\\u093B\\u093E-\\u0940\\u0949-\\u094C\\u094E\\u094F\\u0982\\u0983\\u09BE-\\u09C0\\u09C7\\u09C8\\u09CB\\u09CC\\u09D7\\u0A03\\u0A3E-\\u0A40\\u0A83\\u0ABE-\\u0AC0\\u0AC9\\u0ACB\\u0ACC\\u0B02\\u0B03\\u0B3E\\u0B40\\u0B47\\u0B48\\u0B4B\\u0B4C\\u0B57\\u0BBE\\u0BBF\\u0BC1\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCC\\u0BD7\\u0C01-\\u0C03\\u0C41-\\u0C44\\u0C82\\u0C83\\u0CBE\\u0CC0-\\u0CC4\\u0CC7\\u0CC8\\u0CCA\\u0CCB\\u0CD5\\u0CD6\\u0D02\\u0D03\\u0D3E-\\u0D40\\u0D46-\\u0D48\\u0D4A-\\u0D4C\\u0D57\\u0D82\\u0D83\\u0DCF-\\u0DD1\\u0DD8-\\u0DDF\\u0DF2\\u0DF3\\u0F3E\\u0F3F\\u0F7F\\u102B\\u102C\\u1031\\u1038\\u103B\\u103C\\u1056\\u1057\\u1062-\\u1064\\u1067-\\u106D\\u1083\\u1084\\u1087-\\u108C\\u108F\\u109A-\\u109C\\u17B6\\u17BE-\\u17C5\\u17C7\\u17C8\\u1923-\\u1926\\u1929-\\u192B\\u1930\\u1931\\u1933-\\u1938\\u1A19\\u1A1A\\u1A55\\u1A57\\u1A61\\u1A63\\u1A64\\u1A6D-\\u1A72\\u1B04\\u1B35\\u1B3B\\u1B3D-\\u1B41\\u1B43\\u1B44\\u1B82\\u1BA1\\u1BA6\\u1BA7\\u1BAA\\u1BE7\\u1BEA-\\u1BEC\\u1BEE\\u1BF2\\u1BF3\\u1C24-\\u1C2B\\u1C34\\u1C35\\u1CE1\\u1CF2\\u1CF3\\u302E\\u302F\\uA823\\uA824\\uA827\\uA880\\uA881\\uA8B4-\\uA8C3\\uA952\\uA953\\uA983\\uA9B4\\uA9B5\\uA9BA\\uA9BB\\uA9BD-\\uA9C0\\uAA2F\\uAA30\\uAA33\\uAA34\\uAA4D\\uAA7B\\uAA7D\\uAAEB\\uAAEE\\uAAEF\\uAAF5\\uABE3\\uABE4\\uABE6\\uABE7\\uABE9\\uABEA\\uABEC\",\n          astral: \"\\uD804[\\uDC00\\uDC02\\uDC82\\uDCB0-\\uDCB2\\uDCB7\\uDCB8\\uDD2C\\uDD82\\uDDB3-\\uDDB5\\uDDBF\\uDDC0\\uDE2C-\\uDE2E\\uDE32\\uDE33\\uDE35\\uDEE0-\\uDEE2\\uDF02\\uDF03\\uDF3E\\uDF3F\\uDF41-\\uDF44\\uDF47\\uDF48\\uDF4B-\\uDF4D\\uDF57\\uDF62\\uDF63]|\\uD805[\\uDC35-\\uDC37\\uDC40\\uDC41\\uDC45\\uDCB0-\\uDCB2\\uDCB9\\uDCBB-\\uDCBE\\uDCC1\\uDDAF-\\uDDB1\\uDDB8-\\uDDBB\\uDDBE\\uDE30-\\uDE32\\uDE3B\\uDE3C\\uDE3E\\uDEAC\\uDEAE\\uDEAF\\uDEB6\\uDF20\\uDF21\\uDF26]|\\uD807[\\uDC2F\\uDC3E\\uDCA9\\uDCB1\\uDCB4]|\\uD81B[\\uDF51-\\uDF7E]|\\uD834[\\uDD65\\uDD66\\uDD6D-\\uDD72]\"\n        }, {\n          name: 'Me',\n          alias: 'Enclosing_Mark',\n          bmp: \"\\u0488\\u0489\\u1ABE\\u20DD-\\u20E0\\u20E2-\\u20E4\\uA670-\\uA672\"\n        }, {\n          name: 'Mn',\n          alias: 'Nonspacing_Mark',\n          bmp: \"\\u0300-\\u036F\\u0483-\\u0487\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u0610-\\u061A\\u064B-\\u065F\\u0670\\u06D6-\\u06DC\\u06DF-\\u06E4\\u06E7\\u06E8\\u06EA-\\u06ED\\u0711\\u0730-\\u074A\\u07A6-\\u07B0\\u07EB-\\u07F3\\u0816-\\u0819\\u081B-\\u0823\\u0825-\\u0827\\u0829-\\u082D\\u0859-\\u085B\\u08D4-\\u08E1\\u08E3-\\u0902\\u093A\\u093C\\u0941-\\u0948\\u094D\\u0951-\\u0957\\u0962\\u0963\\u0981\\u09BC\\u09C1-\\u09C4\\u09CD\\u09E2\\u09E3\\u0A01\\u0A02\\u0A3C\\u0A41\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A70\\u0A71\\u0A75\\u0A81\\u0A82\\u0ABC\\u0AC1-\\u0AC5\\u0AC7\\u0AC8\\u0ACD\\u0AE2\\u0AE3\\u0B01\\u0B3C\\u0B3F\\u0B41-\\u0B44\\u0B4D\\u0B56\\u0B62\\u0B63\\u0B82\\u0BC0\\u0BCD\\u0C00\\u0C3E-\\u0C40\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C62\\u0C63\\u0C81\\u0CBC\\u0CBF\\u0CC6\\u0CCC\\u0CCD\\u0CE2\\u0CE3\\u0D01\\u0D41-\\u0D44\\u0D4D\\u0D62\\u0D63\\u0DCA\\u0DD2-\\u0DD4\\u0DD6\\u0E31\\u0E34-\\u0E3A\\u0E47-\\u0E4E\\u0EB1\\u0EB4-\\u0EB9\\u0EBB\\u0EBC\\u0EC8-\\u0ECD\\u0F18\\u0F19\\u0F35\\u0F37\\u0F39\\u0F71-\\u0F7E\\u0F80-\\u0F84\\u0F86\\u0F87\\u0F8D-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u102D-\\u1030\\u1032-\\u1037\\u1039\\u103A\\u103D\\u103E\\u1058\\u1059\\u105E-\\u1060\\u1071-\\u1074\\u1082\\u1085\\u1086\\u108D\\u109D\\u135D-\\u135F\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17B4\\u17B5\\u17B7-\\u17BD\\u17C6\\u17C9-\\u17D3\\u17DD\\u180B-\\u180D\\u1885\\u1886\\u18A9\\u1920-\\u1922\\u1927\\u1928\\u1932\\u1939-\\u193B\\u1A17\\u1A18\\u1A1B\\u1A56\\u1A58-\\u1A5E\\u1A60\\u1A62\\u1A65-\\u1A6C\\u1A73-\\u1A7C\\u1A7F\\u1AB0-\\u1ABD\\u1B00-\\u1B03\\u1B34\\u1B36-\\u1B3A\\u1B3C\\u1B42\\u1B6B-\\u1B73\\u1B80\\u1B81\\u1BA2-\\u1BA5\\u1BA8\\u1BA9\\u1BAB-\\u1BAD\\u1BE6\\u1BE8\\u1BE9\\u1BED\\u1BEF-\\u1BF1\\u1C2C-\\u1C33\\u1C36\\u1C37\\u1CD0-\\u1CD2\\u1CD4-\\u1CE0\\u1CE2-\\u1CE8\\u1CED\\u1CF4\\u1CF8\\u1CF9\\u1DC0-\\u1DF5\\u1DFB-\\u1DFF\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2CEF-\\u2CF1\\u2D7F\\u2DE0-\\u2DFF\\u302A-\\u302D\\u3099\\u309A\\uA66F\\uA674-\\uA67D\\uA69E\\uA69F\\uA6F0\\uA6F1\\uA802\\uA806\\uA80B\\uA825\\uA826\\uA8C4\\uA8C5\\uA8E0-\\uA8F1\\uA926-\\uA92D\\uA947-\\uA951\\uA980-\\uA982\\uA9B3\\uA9B6-\\uA9B9\\uA9BC\\uA9E5\\uAA29-\\uAA2E\\uAA31\\uAA32\\uAA35\\uAA36\\uAA43\\uAA4C\\uAA7C\\uAAB0\\uAAB2-\\uAAB4\\uAAB7\\uAAB8\\uAABE\\uAABF\\uAAC1\\uAAEC\\uAAED\\uAAF6\\uABE5\\uABE8\\uABED\\uFB1E\\uFE00-\\uFE0F\\uFE20-\\uFE2F\",\n          astral: \"\\uD800[\\uDDFD\\uDEE0\\uDF76-\\uDF7A]|\\uD802[\\uDE01-\\uDE03\\uDE05\\uDE06\\uDE0C-\\uDE0F\\uDE38-\\uDE3A\\uDE3F\\uDEE5\\uDEE6]|\\uD804[\\uDC01\\uDC38-\\uDC46\\uDC7F-\\uDC81\\uDCB3-\\uDCB6\\uDCB9\\uDCBA\\uDD00-\\uDD02\\uDD27-\\uDD2B\\uDD2D-\\uDD34\\uDD73\\uDD80\\uDD81\\uDDB6-\\uDDBE\\uDDCA-\\uDDCC\\uDE2F-\\uDE31\\uDE34\\uDE36\\uDE37\\uDE3E\\uDEDF\\uDEE3-\\uDEEA\\uDF00\\uDF01\\uDF3C\\uDF40\\uDF66-\\uDF6C\\uDF70-\\uDF74]|\\uD805[\\uDC38-\\uDC3F\\uDC42-\\uDC44\\uDC46\\uDCB3-\\uDCB8\\uDCBA\\uDCBF\\uDCC0\\uDCC2\\uDCC3\\uDDB2-\\uDDB5\\uDDBC\\uDDBD\\uDDBF\\uDDC0\\uDDDC\\uDDDD\\uDE33-\\uDE3A\\uDE3D\\uDE3F\\uDE40\\uDEAB\\uDEAD\\uDEB0-\\uDEB5\\uDEB7\\uDF1D-\\uDF1F\\uDF22-\\uDF25\\uDF27-\\uDF2B]|\\uD807[\\uDC30-\\uDC36\\uDC38-\\uDC3D\\uDC3F\\uDC92-\\uDCA7\\uDCAA-\\uDCB0\\uDCB2\\uDCB3\\uDCB5\\uDCB6]|\\uD81A[\\uDEF0-\\uDEF4\\uDF30-\\uDF36]|\\uD81B[\\uDF8F-\\uDF92]|\\uD82F[\\uDC9D\\uDC9E]|\\uD834[\\uDD67-\\uDD69\\uDD7B-\\uDD82\\uDD85-\\uDD8B\\uDDAA-\\uDDAD\\uDE42-\\uDE44]|\\uD836[\\uDE00-\\uDE36\\uDE3B-\\uDE6C\\uDE75\\uDE84\\uDE9B-\\uDE9F\\uDEA1-\\uDEAF]|\\uD838[\\uDC00-\\uDC06\\uDC08-\\uDC18\\uDC1B-\\uDC21\\uDC23\\uDC24\\uDC26-\\uDC2A]|\\uD83A[\\uDCD0-\\uDCD6\\uDD44-\\uDD4A]|\\uDB40[\\uDD00-\\uDDEF]\"\n        }, {\n          name: 'N',\n          alias: 'Number',\n          bmp: \"0-9\\xB2\\xB3\\xB9\\xBC-\\xBE\\u0660-\\u0669\\u06F0-\\u06F9\\u07C0-\\u07C9\\u0966-\\u096F\\u09E6-\\u09EF\\u09F4-\\u09F9\\u0A66-\\u0A6F\\u0AE6-\\u0AEF\\u0B66-\\u0B6F\\u0B72-\\u0B77\\u0BE6-\\u0BF2\\u0C66-\\u0C6F\\u0C78-\\u0C7E\\u0CE6-\\u0CEF\\u0D58-\\u0D5E\\u0D66-\\u0D78\\u0DE6-\\u0DEF\\u0E50-\\u0E59\\u0ED0-\\u0ED9\\u0F20-\\u0F33\\u1040-\\u1049\\u1090-\\u1099\\u1369-\\u137C\\u16EE-\\u16F0\\u17E0-\\u17E9\\u17F0-\\u17F9\\u1810-\\u1819\\u1946-\\u194F\\u19D0-\\u19DA\\u1A80-\\u1A89\\u1A90-\\u1A99\\u1B50-\\u1B59\\u1BB0-\\u1BB9\\u1C40-\\u1C49\\u1C50-\\u1C59\\u2070\\u2074-\\u2079\\u2080-\\u2089\\u2150-\\u2182\\u2185-\\u2189\\u2460-\\u249B\\u24EA-\\u24FF\\u2776-\\u2793\\u2CFD\\u3007\\u3021-\\u3029\\u3038-\\u303A\\u3192-\\u3195\\u3220-\\u3229\\u3248-\\u324F\\u3251-\\u325F\\u3280-\\u3289\\u32B1-\\u32BF\\uA620-\\uA629\\uA6E6-\\uA6EF\\uA830-\\uA835\\uA8D0-\\uA8D9\\uA900-\\uA909\\uA9D0-\\uA9D9\\uA9F0-\\uA9F9\\uAA50-\\uAA59\\uABF0-\\uABF9\\uFF10-\\uFF19\",\n          astral: \"\\uD800[\\uDD07-\\uDD33\\uDD40-\\uDD78\\uDD8A\\uDD8B\\uDEE1-\\uDEFB\\uDF20-\\uDF23\\uDF41\\uDF4A\\uDFD1-\\uDFD5]|\\uD801[\\uDCA0-\\uDCA9]|\\uD802[\\uDC58-\\uDC5F\\uDC79-\\uDC7F\\uDCA7-\\uDCAF\\uDCFB-\\uDCFF\\uDD16-\\uDD1B\\uDDBC\\uDDBD\\uDDC0-\\uDDCF\\uDDD2-\\uDDFF\\uDE40-\\uDE47\\uDE7D\\uDE7E\\uDE9D-\\uDE9F\\uDEEB-\\uDEEF\\uDF58-\\uDF5F\\uDF78-\\uDF7F\\uDFA9-\\uDFAF]|\\uD803[\\uDCFA-\\uDCFF\\uDE60-\\uDE7E]|\\uD804[\\uDC52-\\uDC6F\\uDCF0-\\uDCF9\\uDD36-\\uDD3F\\uDDD0-\\uDDD9\\uDDE1-\\uDDF4\\uDEF0-\\uDEF9]|\\uD805[\\uDC50-\\uDC59\\uDCD0-\\uDCD9\\uDE50-\\uDE59\\uDEC0-\\uDEC9\\uDF30-\\uDF3B]|\\uD806[\\uDCE0-\\uDCF2]|\\uD807[\\uDC50-\\uDC6C]|\\uD809[\\uDC00-\\uDC6E]|\\uD81A[\\uDE60-\\uDE69\\uDF50-\\uDF59\\uDF5B-\\uDF61]|\\uD834[\\uDF60-\\uDF71]|\\uD835[\\uDFCE-\\uDFFF]|\\uD83A[\\uDCC7-\\uDCCF\\uDD50-\\uDD59]|\\uD83C[\\uDD00-\\uDD0C]\"\n        }, {\n          name: 'Nd',\n          alias: 'Decimal_Number',\n          bmp: \"0-9\\u0660-\\u0669\\u06F0-\\u06F9\\u07C0-\\u07C9\\u0966-\\u096F\\u09E6-\\u09EF\\u0A66-\\u0A6F\\u0AE6-\\u0AEF\\u0B66-\\u0B6F\\u0BE6-\\u0BEF\\u0C66-\\u0C6F\\u0CE6-\\u0CEF\\u0D66-\\u0D6F\\u0DE6-\\u0DEF\\u0E50-\\u0E59\\u0ED0-\\u0ED9\\u0F20-\\u0F29\\u1040-\\u1049\\u1090-\\u1099\\u17E0-\\u17E9\\u1810-\\u1819\\u1946-\\u194F\\u19D0-\\u19D9\\u1A80-\\u1A89\\u1A90-\\u1A99\\u1B50-\\u1B59\\u1BB0-\\u1BB9\\u1C40-\\u1C49\\u1C50-\\u1C59\\uA620-\\uA629\\uA8D0-\\uA8D9\\uA900-\\uA909\\uA9D0-\\uA9D9\\uA9F0-\\uA9F9\\uAA50-\\uAA59\\uABF0-\\uABF9\\uFF10-\\uFF19\",\n          astral: \"\\uD801[\\uDCA0-\\uDCA9]|\\uD804[\\uDC66-\\uDC6F\\uDCF0-\\uDCF9\\uDD36-\\uDD3F\\uDDD0-\\uDDD9\\uDEF0-\\uDEF9]|\\uD805[\\uDC50-\\uDC59\\uDCD0-\\uDCD9\\uDE50-\\uDE59\\uDEC0-\\uDEC9\\uDF30-\\uDF39]|\\uD806[\\uDCE0-\\uDCE9]|\\uD807[\\uDC50-\\uDC59]|\\uD81A[\\uDE60-\\uDE69\\uDF50-\\uDF59]|\\uD835[\\uDFCE-\\uDFFF]|\\uD83A[\\uDD50-\\uDD59]\"\n        }, {\n          name: 'Nl',\n          alias: 'Letter_Number',\n          bmp: \"\\u16EE-\\u16F0\\u2160-\\u2182\\u2185-\\u2188\\u3007\\u3021-\\u3029\\u3038-\\u303A\\uA6E6-\\uA6EF\",\n          astral: \"\\uD800[\\uDD40-\\uDD74\\uDF41\\uDF4A\\uDFD1-\\uDFD5]|\\uD809[\\uDC00-\\uDC6E]\"\n        }, {\n          name: 'No',\n          alias: 'Other_Number',\n          bmp: \"\\xB2\\xB3\\xB9\\xBC-\\xBE\\u09F4-\\u09F9\\u0B72-\\u0B77\\u0BF0-\\u0BF2\\u0C78-\\u0C7E\\u0D58-\\u0D5E\\u0D70-\\u0D78\\u0F2A-\\u0F33\\u1369-\\u137C\\u17F0-\\u17F9\\u19DA\\u2070\\u2074-\\u2079\\u2080-\\u2089\\u2150-\\u215F\\u2189\\u2460-\\u249B\\u24EA-\\u24FF\\u2776-\\u2793\\u2CFD\\u3192-\\u3195\\u3220-\\u3229\\u3248-\\u324F\\u3251-\\u325F\\u3280-\\u3289\\u32B1-\\u32BF\\uA830-\\uA835\",\n          astral: \"\\uD800[\\uDD07-\\uDD33\\uDD75-\\uDD78\\uDD8A\\uDD8B\\uDEE1-\\uDEFB\\uDF20-\\uDF23]|\\uD802[\\uDC58-\\uDC5F\\uDC79-\\uDC7F\\uDCA7-\\uDCAF\\uDCFB-\\uDCFF\\uDD16-\\uDD1B\\uDDBC\\uDDBD\\uDDC0-\\uDDCF\\uDDD2-\\uDDFF\\uDE40-\\uDE47\\uDE7D\\uDE7E\\uDE9D-\\uDE9F\\uDEEB-\\uDEEF\\uDF58-\\uDF5F\\uDF78-\\uDF7F\\uDFA9-\\uDFAF]|\\uD803[\\uDCFA-\\uDCFF\\uDE60-\\uDE7E]|\\uD804[\\uDC52-\\uDC65\\uDDE1-\\uDDF4]|\\uD805[\\uDF3A\\uDF3B]|\\uD806[\\uDCEA-\\uDCF2]|\\uD807[\\uDC5A-\\uDC6C]|\\uD81A[\\uDF5B-\\uDF61]|\\uD834[\\uDF60-\\uDF71]|\\uD83A[\\uDCC7-\\uDCCF]|\\uD83C[\\uDD00-\\uDD0C]\"\n        }, {\n          name: 'P',\n          alias: 'Punctuation',\n          bmp: \"!-#%-\\\\x2A,-/:;\\\\x3F@\\\\x5B-\\\\x5D_\\\\x7B}\\xA1\\xA7\\xAB\\xB6\\xB7\\xBB\\xBF\\u037E\\u0387\\u055A-\\u055F\\u0589\\u058A\\u05BE\\u05C0\\u05C3\\u05C6\\u05F3\\u05F4\\u0609\\u060A\\u060C\\u060D\\u061B\\u061E\\u061F\\u066A-\\u066D\\u06D4\\u0700-\\u070D\\u07F7-\\u07F9\\u0830-\\u083E\\u085E\\u0964\\u0965\\u0970\\u0AF0\\u0DF4\\u0E4F\\u0E5A\\u0E5B\\u0F04-\\u0F12\\u0F14\\u0F3A-\\u0F3D\\u0F85\\u0FD0-\\u0FD4\\u0FD9\\u0FDA\\u104A-\\u104F\\u10FB\\u1360-\\u1368\\u1400\\u166D\\u166E\\u169B\\u169C\\u16EB-\\u16ED\\u1735\\u1736\\u17D4-\\u17D6\\u17D8-\\u17DA\\u1800-\\u180A\\u1944\\u1945\\u1A1E\\u1A1F\\u1AA0-\\u1AA6\\u1AA8-\\u1AAD\\u1B5A-\\u1B60\\u1BFC-\\u1BFF\\u1C3B-\\u1C3F\\u1C7E\\u1C7F\\u1CC0-\\u1CC7\\u1CD3\\u2010-\\u2027\\u2030-\\u2043\\u2045-\\u2051\\u2053-\\u205E\\u207D\\u207E\\u208D\\u208E\\u2308-\\u230B\\u2329\\u232A\\u2768-\\u2775\\u27C5\\u27C6\\u27E6-\\u27EF\\u2983-\\u2998\\u29D8-\\u29DB\\u29FC\\u29FD\\u2CF9-\\u2CFC\\u2CFE\\u2CFF\\u2D70\\u2E00-\\u2E2E\\u2E30-\\u2E44\\u3001-\\u3003\\u3008-\\u3011\\u3014-\\u301F\\u3030\\u303D\\u30A0\\u30FB\\uA4FE\\uA4FF\\uA60D-\\uA60F\\uA673\\uA67E\\uA6F2-\\uA6F7\\uA874-\\uA877\\uA8CE\\uA8CF\\uA8F8-\\uA8FA\\uA8FC\\uA92E\\uA92F\\uA95F\\uA9C1-\\uA9CD\\uA9DE\\uA9DF\\uAA5C-\\uAA5F\\uAADE\\uAADF\\uAAF0\\uAAF1\\uABEB\\uFD3E\\uFD3F\\uFE10-\\uFE19\\uFE30-\\uFE52\\uFE54-\\uFE61\\uFE63\\uFE68\\uFE6A\\uFE6B\\uFF01-\\uFF03\\uFF05-\\uFF0A\\uFF0C-\\uFF0F\\uFF1A\\uFF1B\\uFF1F\\uFF20\\uFF3B-\\uFF3D\\uFF3F\\uFF5B\\uFF5D\\uFF5F-\\uFF65\",\n          astral: \"\\uD800[\\uDD00-\\uDD02\\uDF9F\\uDFD0]|\\uD801\\uDD6F|\\uD802[\\uDC57\\uDD1F\\uDD3F\\uDE50-\\uDE58\\uDE7F\\uDEF0-\\uDEF6\\uDF39-\\uDF3F\\uDF99-\\uDF9C]|\\uD804[\\uDC47-\\uDC4D\\uDCBB\\uDCBC\\uDCBE-\\uDCC1\\uDD40-\\uDD43\\uDD74\\uDD75\\uDDC5-\\uDDC9\\uDDCD\\uDDDB\\uDDDD-\\uDDDF\\uDE38-\\uDE3D\\uDEA9]|\\uD805[\\uDC4B-\\uDC4F\\uDC5B\\uDC5D\\uDCC6\\uDDC1-\\uDDD7\\uDE41-\\uDE43\\uDE60-\\uDE6C\\uDF3C-\\uDF3E]|\\uD807[\\uDC41-\\uDC45\\uDC70\\uDC71]|\\uD809[\\uDC70-\\uDC74]|\\uD81A[\\uDE6E\\uDE6F\\uDEF5\\uDF37-\\uDF3B\\uDF44]|\\uD82F\\uDC9F|\\uD836[\\uDE87-\\uDE8B]|\\uD83A[\\uDD5E\\uDD5F]\"\n        }, {\n          name: 'Pc',\n          alias: 'Connector_Punctuation',\n          bmp: \"_\\u203F\\u2040\\u2054\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFF3F\"\n        }, {\n          name: 'Pd',\n          alias: 'Dash_Punctuation',\n          bmp: \"\\\\x2D\\u058A\\u05BE\\u1400\\u1806\\u2010-\\u2015\\u2E17\\u2E1A\\u2E3A\\u2E3B\\u2E40\\u301C\\u3030\\u30A0\\uFE31\\uFE32\\uFE58\\uFE63\\uFF0D\"\n        }, {\n          name: 'Pe',\n          alias: 'Close_Punctuation',\n          bmp: \"\\\\x29\\\\x5D}\\u0F3B\\u0F3D\\u169C\\u2046\\u207E\\u208E\\u2309\\u230B\\u232A\\u2769\\u276B\\u276D\\u276F\\u2771\\u2773\\u2775\\u27C6\\u27E7\\u27E9\\u27EB\\u27ED\\u27EF\\u2984\\u2986\\u2988\\u298A\\u298C\\u298E\\u2990\\u2992\\u2994\\u2996\\u2998\\u29D9\\u29DB\\u29FD\\u2E23\\u2E25\\u2E27\\u2E29\\u3009\\u300B\\u300D\\u300F\\u3011\\u3015\\u3017\\u3019\\u301B\\u301E\\u301F\\uFD3E\\uFE18\\uFE36\\uFE38\\uFE3A\\uFE3C\\uFE3E\\uFE40\\uFE42\\uFE44\\uFE48\\uFE5A\\uFE5C\\uFE5E\\uFF09\\uFF3D\\uFF5D\\uFF60\\uFF63\"\n        }, {\n          name: 'Pf',\n          alias: 'Final_Punctuation',\n          bmp: \"\\xBB\\u2019\\u201D\\u203A\\u2E03\\u2E05\\u2E0A\\u2E0D\\u2E1D\\u2E21\"\n        }, {\n          name: 'Pi',\n          alias: 'Initial_Punctuation',\n          bmp: \"\\xAB\\u2018\\u201B\\u201C\\u201F\\u2039\\u2E02\\u2E04\\u2E09\\u2E0C\\u2E1C\\u2E20\"\n        }, {\n          name: 'Po',\n          alias: 'Other_Punctuation',\n          bmp: \"!-#%-'\\\\x2A,\\\\x2E/:;\\\\x3F@\\\\x5C\\xA1\\xA7\\xB6\\xB7\\xBF\\u037E\\u0387\\u055A-\\u055F\\u0589\\u05C0\\u05C3\\u05C6\\u05F3\\u05F4\\u0609\\u060A\\u060C\\u060D\\u061B\\u061E\\u061F\\u066A-\\u066D\\u06D4\\u0700-\\u070D\\u07F7-\\u07F9\\u0830-\\u083E\\u085E\\u0964\\u0965\\u0970\\u0AF0\\u0DF4\\u0E4F\\u0E5A\\u0E5B\\u0F04-\\u0F12\\u0F14\\u0F85\\u0FD0-\\u0FD4\\u0FD9\\u0FDA\\u104A-\\u104F\\u10FB\\u1360-\\u1368\\u166D\\u166E\\u16EB-\\u16ED\\u1735\\u1736\\u17D4-\\u17D6\\u17D8-\\u17DA\\u1800-\\u1805\\u1807-\\u180A\\u1944\\u1945\\u1A1E\\u1A1F\\u1AA0-\\u1AA6\\u1AA8-\\u1AAD\\u1B5A-\\u1B60\\u1BFC-\\u1BFF\\u1C3B-\\u1C3F\\u1C7E\\u1C7F\\u1CC0-\\u1CC7\\u1CD3\\u2016\\u2017\\u2020-\\u2027\\u2030-\\u2038\\u203B-\\u203E\\u2041-\\u2043\\u2047-\\u2051\\u2053\\u2055-\\u205E\\u2CF9-\\u2CFC\\u2CFE\\u2CFF\\u2D70\\u2E00\\u2E01\\u2E06-\\u2E08\\u2E0B\\u2E0E-\\u2E16\\u2E18\\u2E19\\u2E1B\\u2E1E\\u2E1F\\u2E2A-\\u2E2E\\u2E30-\\u2E39\\u2E3C-\\u2E3F\\u2E41\\u2E43\\u2E44\\u3001-\\u3003\\u303D\\u30FB\\uA4FE\\uA4FF\\uA60D-\\uA60F\\uA673\\uA67E\\uA6F2-\\uA6F7\\uA874-\\uA877\\uA8CE\\uA8CF\\uA8F8-\\uA8FA\\uA8FC\\uA92E\\uA92F\\uA95F\\uA9C1-\\uA9CD\\uA9DE\\uA9DF\\uAA5C-\\uAA5F\\uAADE\\uAADF\\uAAF0\\uAAF1\\uABEB\\uFE10-\\uFE16\\uFE19\\uFE30\\uFE45\\uFE46\\uFE49-\\uFE4C\\uFE50-\\uFE52\\uFE54-\\uFE57\\uFE5F-\\uFE61\\uFE68\\uFE6A\\uFE6B\\uFF01-\\uFF03\\uFF05-\\uFF07\\uFF0A\\uFF0C\\uFF0E\\uFF0F\\uFF1A\\uFF1B\\uFF1F\\uFF20\\uFF3C\\uFF61\\uFF64\\uFF65\",\n          astral: \"\\uD800[\\uDD00-\\uDD02\\uDF9F\\uDFD0]|\\uD801\\uDD6F|\\uD802[\\uDC57\\uDD1F\\uDD3F\\uDE50-\\uDE58\\uDE7F\\uDEF0-\\uDEF6\\uDF39-\\uDF3F\\uDF99-\\uDF9C]|\\uD804[\\uDC47-\\uDC4D\\uDCBB\\uDCBC\\uDCBE-\\uDCC1\\uDD40-\\uDD43\\uDD74\\uDD75\\uDDC5-\\uDDC9\\uDDCD\\uDDDB\\uDDDD-\\uDDDF\\uDE38-\\uDE3D\\uDEA9]|\\uD805[\\uDC4B-\\uDC4F\\uDC5B\\uDC5D\\uDCC6\\uDDC1-\\uDDD7\\uDE41-\\uDE43\\uDE60-\\uDE6C\\uDF3C-\\uDF3E]|\\uD807[\\uDC41-\\uDC45\\uDC70\\uDC71]|\\uD809[\\uDC70-\\uDC74]|\\uD81A[\\uDE6E\\uDE6F\\uDEF5\\uDF37-\\uDF3B\\uDF44]|\\uD82F\\uDC9F|\\uD836[\\uDE87-\\uDE8B]|\\uD83A[\\uDD5E\\uDD5F]\"\n        }, {\n          name: 'Ps',\n          alias: 'Open_Punctuation',\n          bmp: \"\\\\x28\\\\x5B\\\\x7B\\u0F3A\\u0F3C\\u169B\\u201A\\u201E\\u2045\\u207D\\u208D\\u2308\\u230A\\u2329\\u2768\\u276A\\u276C\\u276E\\u2770\\u2772\\u2774\\u27C5\\u27E6\\u27E8\\u27EA\\u27EC\\u27EE\\u2983\\u2985\\u2987\\u2989\\u298B\\u298D\\u298F\\u2991\\u2993\\u2995\\u2997\\u29D8\\u29DA\\u29FC\\u2E22\\u2E24\\u2E26\\u2E28\\u2E42\\u3008\\u300A\\u300C\\u300E\\u3010\\u3014\\u3016\\u3018\\u301A\\u301D\\uFD3F\\uFE17\\uFE35\\uFE37\\uFE39\\uFE3B\\uFE3D\\uFE3F\\uFE41\\uFE43\\uFE47\\uFE59\\uFE5B\\uFE5D\\uFF08\\uFF3B\\uFF5B\\uFF5F\\uFF62\"\n        }, {\n          name: 'S',\n          alias: 'Symbol',\n          bmp: \"\\\\x24\\\\x2B<->\\\\x5E`\\\\x7C~\\xA2-\\xA6\\xA8\\xA9\\xAC\\xAE-\\xB1\\xB4\\xB8\\xD7\\xF7\\u02C2-\\u02C5\\u02D2-\\u02DF\\u02E5-\\u02EB\\u02ED\\u02EF-\\u02FF\\u0375\\u0384\\u0385\\u03F6\\u0482\\u058D-\\u058F\\u0606-\\u0608\\u060B\\u060E\\u060F\\u06DE\\u06E9\\u06FD\\u06FE\\u07F6\\u09F2\\u09F3\\u09FA\\u09FB\\u0AF1\\u0B70\\u0BF3-\\u0BFA\\u0C7F\\u0D4F\\u0D79\\u0E3F\\u0F01-\\u0F03\\u0F13\\u0F15-\\u0F17\\u0F1A-\\u0F1F\\u0F34\\u0F36\\u0F38\\u0FBE-\\u0FC5\\u0FC7-\\u0FCC\\u0FCE\\u0FCF\\u0FD5-\\u0FD8\\u109E\\u109F\\u1390-\\u1399\\u17DB\\u1940\\u19DE-\\u19FF\\u1B61-\\u1B6A\\u1B74-\\u1B7C\\u1FBD\\u1FBF-\\u1FC1\\u1FCD-\\u1FCF\\u1FDD-\\u1FDF\\u1FED-\\u1FEF\\u1FFD\\u1FFE\\u2044\\u2052\\u207A-\\u207C\\u208A-\\u208C\\u20A0-\\u20BE\\u2100\\u2101\\u2103-\\u2106\\u2108\\u2109\\u2114\\u2116-\\u2118\\u211E-\\u2123\\u2125\\u2127\\u2129\\u212E\\u213A\\u213B\\u2140-\\u2144\\u214A-\\u214D\\u214F\\u218A\\u218B\\u2190-\\u2307\\u230C-\\u2328\\u232B-\\u23FE\\u2400-\\u2426\\u2440-\\u244A\\u249C-\\u24E9\\u2500-\\u2767\\u2794-\\u27C4\\u27C7-\\u27E5\\u27F0-\\u2982\\u2999-\\u29D7\\u29DC-\\u29FB\\u29FE-\\u2B73\\u2B76-\\u2B95\\u2B98-\\u2BB9\\u2BBD-\\u2BC8\\u2BCA-\\u2BD1\\u2BEC-\\u2BEF\\u2CE5-\\u2CEA\\u2E80-\\u2E99\\u2E9B-\\u2EF3\\u2F00-\\u2FD5\\u2FF0-\\u2FFB\\u3004\\u3012\\u3013\\u3020\\u3036\\u3037\\u303E\\u303F\\u309B\\u309C\\u3190\\u3191\\u3196-\\u319F\\u31C0-\\u31E3\\u3200-\\u321E\\u322A-\\u3247\\u3250\\u3260-\\u327F\\u328A-\\u32B0\\u32C0-\\u32FE\\u3300-\\u33FF\\u4DC0-\\u4DFF\\uA490-\\uA4C6\\uA700-\\uA716\\uA720\\uA721\\uA789\\uA78A\\uA828-\\uA82B\\uA836-\\uA839\\uAA77-\\uAA79\\uAB5B\\uFB29\\uFBB2-\\uFBC1\\uFDFC\\uFDFD\\uFE62\\uFE64-\\uFE66\\uFE69\\uFF04\\uFF0B\\uFF1C-\\uFF1E\\uFF3E\\uFF40\\uFF5C\\uFF5E\\uFFE0-\\uFFE6\\uFFE8-\\uFFEE\\uFFFC\\uFFFD\",\n          astral: \"\\uD800[\\uDD37-\\uDD3F\\uDD79-\\uDD89\\uDD8C-\\uDD8E\\uDD90-\\uDD9B\\uDDA0\\uDDD0-\\uDDFC]|\\uD802[\\uDC77\\uDC78\\uDEC8]|\\uD805\\uDF3F|\\uD81A[\\uDF3C-\\uDF3F\\uDF45]|\\uD82F\\uDC9C|\\uD834[\\uDC00-\\uDCF5\\uDD00-\\uDD26\\uDD29-\\uDD64\\uDD6A-\\uDD6C\\uDD83\\uDD84\\uDD8C-\\uDDA9\\uDDAE-\\uDDE8\\uDE00-\\uDE41\\uDE45\\uDF00-\\uDF56]|\\uD835[\\uDEC1\\uDEDB\\uDEFB\\uDF15\\uDF35\\uDF4F\\uDF6F\\uDF89\\uDFA9\\uDFC3]|\\uD836[\\uDC00-\\uDDFF\\uDE37-\\uDE3A\\uDE6D-\\uDE74\\uDE76-\\uDE83\\uDE85\\uDE86]|\\uD83B[\\uDEF0\\uDEF1]|\\uD83C[\\uDC00-\\uDC2B\\uDC30-\\uDC93\\uDCA0-\\uDCAE\\uDCB1-\\uDCBF\\uDCC1-\\uDCCF\\uDCD1-\\uDCF5\\uDD10-\\uDD2E\\uDD30-\\uDD6B\\uDD70-\\uDDAC\\uDDE6-\\uDE02\\uDE10-\\uDE3B\\uDE40-\\uDE48\\uDE50\\uDE51\\uDF00-\\uDFFF]|\\uD83D[\\uDC00-\\uDED2\\uDEE0-\\uDEEC\\uDEF0-\\uDEF6\\uDF00-\\uDF73\\uDF80-\\uDFD4]|\\uD83E[\\uDC00-\\uDC0B\\uDC10-\\uDC47\\uDC50-\\uDC59\\uDC60-\\uDC87\\uDC90-\\uDCAD\\uDD10-\\uDD1E\\uDD20-\\uDD27\\uDD30\\uDD33-\\uDD3E\\uDD40-\\uDD4B\\uDD50-\\uDD5E\\uDD80-\\uDD91\\uDDC0]\"\n        }, {\n          name: 'Sc',\n          alias: 'Currency_Symbol',\n          bmp: \"\\\\x24\\xA2-\\xA5\\u058F\\u060B\\u09F2\\u09F3\\u09FB\\u0AF1\\u0BF9\\u0E3F\\u17DB\\u20A0-\\u20BE\\uA838\\uFDFC\\uFE69\\uFF04\\uFFE0\\uFFE1\\uFFE5\\uFFE6\"\n        }, {\n          name: 'Sk',\n          alias: 'Modifier_Symbol',\n          bmp: \"\\\\x5E`\\xA8\\xAF\\xB4\\xB8\\u02C2-\\u02C5\\u02D2-\\u02DF\\u02E5-\\u02EB\\u02ED\\u02EF-\\u02FF\\u0375\\u0384\\u0385\\u1FBD\\u1FBF-\\u1FC1\\u1FCD-\\u1FCF\\u1FDD-\\u1FDF\\u1FED-\\u1FEF\\u1FFD\\u1FFE\\u309B\\u309C\\uA700-\\uA716\\uA720\\uA721\\uA789\\uA78A\\uAB5B\\uFBB2-\\uFBC1\\uFF3E\\uFF40\\uFFE3\",\n          astral: \"\\uD83C[\\uDFFB-\\uDFFF]\"\n        }, {\n          name: 'Sm',\n          alias: 'Math_Symbol',\n          bmp: \"\\\\x2B<->\\\\x7C~\\xAC\\xB1\\xD7\\xF7\\u03F6\\u0606-\\u0608\\u2044\\u2052\\u207A-\\u207C\\u208A-\\u208C\\u2118\\u2140-\\u2144\\u214B\\u2190-\\u2194\\u219A\\u219B\\u21A0\\u21A3\\u21A6\\u21AE\\u21CE\\u21CF\\u21D2\\u21D4\\u21F4-\\u22FF\\u2320\\u2321\\u237C\\u239B-\\u23B3\\u23DC-\\u23E1\\u25B7\\u25C1\\u25F8-\\u25FF\\u266F\\u27C0-\\u27C4\\u27C7-\\u27E5\\u27F0-\\u27FF\\u2900-\\u2982\\u2999-\\u29D7\\u29DC-\\u29FB\\u29FE-\\u2AFF\\u2B30-\\u2B44\\u2B47-\\u2B4C\\uFB29\\uFE62\\uFE64-\\uFE66\\uFF0B\\uFF1C-\\uFF1E\\uFF5C\\uFF5E\\uFFE2\\uFFE9-\\uFFEC\",\n          astral: \"\\uD835[\\uDEC1\\uDEDB\\uDEFB\\uDF15\\uDF35\\uDF4F\\uDF6F\\uDF89\\uDFA9\\uDFC3]|\\uD83B[\\uDEF0\\uDEF1]\"\n        }, {\n          name: 'So',\n          alias: 'Other_Symbol',\n          bmp: \"\\xA6\\xA9\\xAE\\xB0\\u0482\\u058D\\u058E\\u060E\\u060F\\u06DE\\u06E9\\u06FD\\u06FE\\u07F6\\u09FA\\u0B70\\u0BF3-\\u0BF8\\u0BFA\\u0C7F\\u0D4F\\u0D79\\u0F01-\\u0F03\\u0F13\\u0F15-\\u0F17\\u0F1A-\\u0F1F\\u0F34\\u0F36\\u0F38\\u0FBE-\\u0FC5\\u0FC7-\\u0FCC\\u0FCE\\u0FCF\\u0FD5-\\u0FD8\\u109E\\u109F\\u1390-\\u1399\\u1940\\u19DE-\\u19FF\\u1B61-\\u1B6A\\u1B74-\\u1B7C\\u2100\\u2101\\u2103-\\u2106\\u2108\\u2109\\u2114\\u2116\\u2117\\u211E-\\u2123\\u2125\\u2127\\u2129\\u212E\\u213A\\u213B\\u214A\\u214C\\u214D\\u214F\\u218A\\u218B\\u2195-\\u2199\\u219C-\\u219F\\u21A1\\u21A2\\u21A4\\u21A5\\u21A7-\\u21AD\\u21AF-\\u21CD\\u21D0\\u21D1\\u21D3\\u21D5-\\u21F3\\u2300-\\u2307\\u230C-\\u231F\\u2322-\\u2328\\u232B-\\u237B\\u237D-\\u239A\\u23B4-\\u23DB\\u23E2-\\u23FE\\u2400-\\u2426\\u2440-\\u244A\\u249C-\\u24E9\\u2500-\\u25B6\\u25B8-\\u25C0\\u25C2-\\u25F7\\u2600-\\u266E\\u2670-\\u2767\\u2794-\\u27BF\\u2800-\\u28FF\\u2B00-\\u2B2F\\u2B45\\u2B46\\u2B4D-\\u2B73\\u2B76-\\u2B95\\u2B98-\\u2BB9\\u2BBD-\\u2BC8\\u2BCA-\\u2BD1\\u2BEC-\\u2BEF\\u2CE5-\\u2CEA\\u2E80-\\u2E99\\u2E9B-\\u2EF3\\u2F00-\\u2FD5\\u2FF0-\\u2FFB\\u3004\\u3012\\u3013\\u3020\\u3036\\u3037\\u303E\\u303F\\u3190\\u3191\\u3196-\\u319F\\u31C0-\\u31E3\\u3200-\\u321E\\u322A-\\u3247\\u3250\\u3260-\\u327F\\u328A-\\u32B0\\u32C0-\\u32FE\\u3300-\\u33FF\\u4DC0-\\u4DFF\\uA490-\\uA4C6\\uA828-\\uA82B\\uA836\\uA837\\uA839\\uAA77-\\uAA79\\uFDFD\\uFFE4\\uFFE8\\uFFED\\uFFEE\\uFFFC\\uFFFD\",\n          astral: \"\\uD800[\\uDD37-\\uDD3F\\uDD79-\\uDD89\\uDD8C-\\uDD8E\\uDD90-\\uDD9B\\uDDA0\\uDDD0-\\uDDFC]|\\uD802[\\uDC77\\uDC78\\uDEC8]|\\uD805\\uDF3F|\\uD81A[\\uDF3C-\\uDF3F\\uDF45]|\\uD82F\\uDC9C|\\uD834[\\uDC00-\\uDCF5\\uDD00-\\uDD26\\uDD29-\\uDD64\\uDD6A-\\uDD6C\\uDD83\\uDD84\\uDD8C-\\uDDA9\\uDDAE-\\uDDE8\\uDE00-\\uDE41\\uDE45\\uDF00-\\uDF56]|\\uD836[\\uDC00-\\uDDFF\\uDE37-\\uDE3A\\uDE6D-\\uDE74\\uDE76-\\uDE83\\uDE85\\uDE86]|\\uD83C[\\uDC00-\\uDC2B\\uDC30-\\uDC93\\uDCA0-\\uDCAE\\uDCB1-\\uDCBF\\uDCC1-\\uDCCF\\uDCD1-\\uDCF5\\uDD10-\\uDD2E\\uDD30-\\uDD6B\\uDD70-\\uDDAC\\uDDE6-\\uDE02\\uDE10-\\uDE3B\\uDE40-\\uDE48\\uDE50\\uDE51\\uDF00-\\uDFFA]|\\uD83D[\\uDC00-\\uDED2\\uDEE0-\\uDEEC\\uDEF0-\\uDEF6\\uDF00-\\uDF73\\uDF80-\\uDFD4]|\\uD83E[\\uDC00-\\uDC0B\\uDC10-\\uDC47\\uDC50-\\uDC59\\uDC60-\\uDC87\\uDC90-\\uDCAD\\uDD10-\\uDD1E\\uDD20-\\uDD27\\uDD30\\uDD33-\\uDD3E\\uDD40-\\uDD4B\\uDD50-\\uDD5E\\uDD80-\\uDD91\\uDDC0]\"\n        }, {\n          name: 'Z',\n          alias: 'Separator',\n          bmp: \" \\xA0\\u1680\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000\"\n        }, {\n          name: 'Zl',\n          alias: 'Line_Separator',\n          bmp: \"\\u2028\"\n        }, {\n          name: 'Zp',\n          alias: 'Paragraph_Separator',\n          bmp: \"\\u2029\"\n        }, {\n          name: 'Zs',\n          alias: 'Space_Separator',\n          bmp: \" \\xA0\\u1680\\u2000-\\u200A\\u202F\\u205F\\u3000\"\n        }]);\n      };\n      module.exports = exports['default'];\n    }, {}],\n    6: [function (require, module, exports) {\n      'use strict';\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      /*!\n       * XRegExp Unicode Properties 4.0.0\n       * <xregexp.com>\n       * Steven Levithan (c) 2012-2017 MIT License\n       * Unicode data by Mathias Bynens <mathiasbynens.be>\n       */\n\n      exports[\"default\"] = function (XRegExp) {\n        /**\n         * Adds properties to meet the UTS #18 Level 1 RL1.2 requirements for Unicode regex support. See\n         * <http://unicode.org/reports/tr18/#RL1.2>. Following are definitions of these properties from\n         * UAX #44 <http://unicode.org/reports/tr44/>:\n         *\n         * - Alphabetic\n         *   Characters with the Alphabetic property. Generated from: Lowercase + Uppercase + Lt + Lm +\n         *   Lo + Nl + Other_Alphabetic.\n         *\n         * - Default_Ignorable_Code_Point\n         *   For programmatic determination of default ignorable code points. New characters that should\n         *   be ignored in rendering (unless explicitly supported) will be assigned in these ranges,\n         *   permitting programs to correctly handle the default rendering of such characters when not\n         *   otherwise supported.\n         *\n         * - Lowercase\n         *   Characters with the Lowercase property. Generated from: Ll + Other_Lowercase.\n         *\n         * - Noncharacter_Code_Point\n         *   Code points permanently reserved for internal use.\n         *\n         * - Uppercase\n         *   Characters with the Uppercase property. Generated from: Lu + Other_Uppercase.\n         *\n         * - White_Space\n         *   Spaces, separator characters and other control characters which should be treated by\n         *   programming languages as \"white space\" for the purpose of parsing elements.\n         *\n         * The properties ASCII, Any, and Assigned are also included but are not defined in UAX #44. UTS\n         * #18 RL1.2 additionally requires support for Unicode scripts and general categories. These are\n         * included in XRegExp's Unicode Categories and Unicode Scripts addons.\n         *\n         * Token names are case insensitive, and any spaces, hyphens, and underscores are ignored.\n         *\n         * Uses Unicode 9.0.0.\n         *\n         * @requires XRegExp, Unicode Base\n         */\n\n        if (!XRegExp.addUnicodeData) {\n          throw new ReferenceError('Unicode Base must be loaded before Unicode Properties');\n        }\n        var unicodeData = [{\n          name: 'ASCII',\n          bmp: '\\0-\\x7F'\n        }, {\n          name: 'Alphabetic',\n          bmp: \"A-Za-z\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0345\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05B0-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0657\\u0659-\\u065F\\u066E-\\u06D3\\u06D5-\\u06DC\\u06E1-\\u06E8\\u06ED-\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710-\\u073F\\u074D-\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0817\\u081A-\\u082C\\u0840-\\u0858\\u08A0-\\u08B4\\u08B6-\\u08BD\\u08D4-\\u08DF\\u08E3-\\u08E9\\u08F0-\\u093B\\u093D-\\u094C\\u094E-\\u0950\\u0955-\\u0963\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD-\\u09C4\\u09C7\\u09C8\\u09CB\\u09CC\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09F0\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B\\u0A4C\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A70-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB\\u0ACC\\u0AD0\\u0AE0-\\u0AE3\\u0AF9\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D-\\u0B44\\u0B47\\u0B48\\u0B4B\\u0B4C\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCC\\u0BD0\\u0BD7\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4C\\u0C55\\u0C56\\u0C58-\\u0C5A\\u0C60-\\u0C63\\u0C80-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCC\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4C\\u0D4E\\u0D54-\\u0D57\\u0D5F-\\u0D63\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E46\\u0E4D\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0ECD\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F81\\u0F88-\\u0F97\\u0F99-\\u0FBC\\u1000-\\u1036\\u1038\\u103B-\\u103F\\u1050-\\u1062\\u1065-\\u1068\\u106E-\\u1086\\u108E\\u109C\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135F\\u1380-\\u138F\\u13A0-\\u13F5\\u13F8-\\u13FD\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1713\\u1720-\\u1733\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17B3\\u17B6-\\u17C8\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u1938\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A61-\\u1A74\\u1AA7\\u1B00-\\u1B33\\u1B35-\\u1B43\\u1B45-\\u1B4B\\u1B80-\\u1BA9\\u1BAC-\\u1BAF\\u1BBA-\\u1BE5\\u1BE7-\\u1BF1\\u1C00-\\u1C35\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1C80-\\u1C88\\u1CE9-\\u1CEC\\u1CEE-\\u1CF3\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1DE7-\\u1DF4\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u24B6-\\u24E9\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FD5\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA674-\\uA67B\\uA67F-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA7AE\\uA7B0-\\uA7B7\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA827\\uA840-\\uA873\\uA880-\\uA8C3\\uA8C5\\uA8F2-\\uA8F7\\uA8FB\\uA8FD\\uA90A-\\uA92A\\uA930-\\uA952\\uA960-\\uA97C\\uA980-\\uA9B2\\uA9B4-\\uA9BF\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAABE\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF5\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB65\\uAB70-\\uABEA\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC\",\n          astral: \"\\uD800[\\uDC00-\\uDC0B\\uDC0D-\\uDC26\\uDC28-\\uDC3A\\uDC3C\\uDC3D\\uDC3F-\\uDC4D\\uDC50-\\uDC5D\\uDC80-\\uDCFA\\uDD40-\\uDD74\\uDE80-\\uDE9C\\uDEA0-\\uDED0\\uDF00-\\uDF1F\\uDF30-\\uDF4A\\uDF50-\\uDF7A\\uDF80-\\uDF9D\\uDFA0-\\uDFC3\\uDFC8-\\uDFCF\\uDFD1-\\uDFD5]|\\uD801[\\uDC00-\\uDC9D\\uDCB0-\\uDCD3\\uDCD8-\\uDCFB\\uDD00-\\uDD27\\uDD30-\\uDD63\\uDE00-\\uDF36\\uDF40-\\uDF55\\uDF60-\\uDF67]|\\uD802[\\uDC00-\\uDC05\\uDC08\\uDC0A-\\uDC35\\uDC37\\uDC38\\uDC3C\\uDC3F-\\uDC55\\uDC60-\\uDC76\\uDC80-\\uDC9E\\uDCE0-\\uDCF2\\uDCF4\\uDCF5\\uDD00-\\uDD15\\uDD20-\\uDD39\\uDD80-\\uDDB7\\uDDBE\\uDDBF\\uDE00-\\uDE03\\uDE05\\uDE06\\uDE0C-\\uDE13\\uDE15-\\uDE17\\uDE19-\\uDE33\\uDE60-\\uDE7C\\uDE80-\\uDE9C\\uDEC0-\\uDEC7\\uDEC9-\\uDEE4\\uDF00-\\uDF35\\uDF40-\\uDF55\\uDF60-\\uDF72\\uDF80-\\uDF91]|\\uD803[\\uDC00-\\uDC48\\uDC80-\\uDCB2\\uDCC0-\\uDCF2]|\\uD804[\\uDC00-\\uDC45\\uDC82-\\uDCB8\\uDCD0-\\uDCE8\\uDD00-\\uDD32\\uDD50-\\uDD72\\uDD76\\uDD80-\\uDDBF\\uDDC1-\\uDDC4\\uDDDA\\uDDDC\\uDE00-\\uDE11\\uDE13-\\uDE34\\uDE37\\uDE3E\\uDE80-\\uDE86\\uDE88\\uDE8A-\\uDE8D\\uDE8F-\\uDE9D\\uDE9F-\\uDEA8\\uDEB0-\\uDEE8\\uDF00-\\uDF03\\uDF05-\\uDF0C\\uDF0F\\uDF10\\uDF13-\\uDF28\\uDF2A-\\uDF30\\uDF32\\uDF33\\uDF35-\\uDF39\\uDF3D-\\uDF44\\uDF47\\uDF48\\uDF4B\\uDF4C\\uDF50\\uDF57\\uDF5D-\\uDF63]|\\uD805[\\uDC00-\\uDC41\\uDC43-\\uDC45\\uDC47-\\uDC4A\\uDC80-\\uDCC1\\uDCC4\\uDCC5\\uDCC7\\uDD80-\\uDDB5\\uDDB8-\\uDDBE\\uDDD8-\\uDDDD\\uDE00-\\uDE3E\\uDE40\\uDE44\\uDE80-\\uDEB5\\uDF00-\\uDF19\\uDF1D-\\uDF2A]|\\uD806[\\uDCA0-\\uDCDF\\uDCFF\\uDEC0-\\uDEF8]|\\uD807[\\uDC00-\\uDC08\\uDC0A-\\uDC36\\uDC38-\\uDC3E\\uDC40\\uDC72-\\uDC8F\\uDC92-\\uDCA7\\uDCA9-\\uDCB6]|\\uD808[\\uDC00-\\uDF99]|\\uD809[\\uDC00-\\uDC6E\\uDC80-\\uDD43]|[\\uD80C\\uD81C-\\uD820\\uD840-\\uD868\\uD86A-\\uD86C\\uD86F-\\uD872][\\uDC00-\\uDFFF]|\\uD80D[\\uDC00-\\uDC2E]|\\uD811[\\uDC00-\\uDE46]|\\uD81A[\\uDC00-\\uDE38\\uDE40-\\uDE5E\\uDED0-\\uDEED\\uDF00-\\uDF36\\uDF40-\\uDF43\\uDF63-\\uDF77\\uDF7D-\\uDF8F]|\\uD81B[\\uDF00-\\uDF44\\uDF50-\\uDF7E\\uDF93-\\uDF9F\\uDFE0]|\\uD821[\\uDC00-\\uDFEC]|\\uD822[\\uDC00-\\uDEF2]|\\uD82C[\\uDC00\\uDC01]|\\uD82F[\\uDC00-\\uDC6A\\uDC70-\\uDC7C\\uDC80-\\uDC88\\uDC90-\\uDC99\\uDC9E]|\\uD835[\\uDC00-\\uDC54\\uDC56-\\uDC9C\\uDC9E\\uDC9F\\uDCA2\\uDCA5\\uDCA6\\uDCA9-\\uDCAC\\uDCAE-\\uDCB9\\uDCBB\\uDCBD-\\uDCC3\\uDCC5-\\uDD05\\uDD07-\\uDD0A\\uDD0D-\\uDD14\\uDD16-\\uDD1C\\uDD1E-\\uDD39\\uDD3B-\\uDD3E\\uDD40-\\uDD44\\uDD46\\uDD4A-\\uDD50\\uDD52-\\uDEA5\\uDEA8-\\uDEC0\\uDEC2-\\uDEDA\\uDEDC-\\uDEFA\\uDEFC-\\uDF14\\uDF16-\\uDF34\\uDF36-\\uDF4E\\uDF50-\\uDF6E\\uDF70-\\uDF88\\uDF8A-\\uDFA8\\uDFAA-\\uDFC2\\uDFC4-\\uDFCB]|\\uD838[\\uDC00-\\uDC06\\uDC08-\\uDC18\\uDC1B-\\uDC21\\uDC23\\uDC24\\uDC26-\\uDC2A]|\\uD83A[\\uDC00-\\uDCC4\\uDD00-\\uDD43\\uDD47]|\\uD83B[\\uDE00-\\uDE03\\uDE05-\\uDE1F\\uDE21\\uDE22\\uDE24\\uDE27\\uDE29-\\uDE32\\uDE34-\\uDE37\\uDE39\\uDE3B\\uDE42\\uDE47\\uDE49\\uDE4B\\uDE4D-\\uDE4F\\uDE51\\uDE52\\uDE54\\uDE57\\uDE59\\uDE5B\\uDE5D\\uDE5F\\uDE61\\uDE62\\uDE64\\uDE67-\\uDE6A\\uDE6C-\\uDE72\\uDE74-\\uDE77\\uDE79-\\uDE7C\\uDE7E\\uDE80-\\uDE89\\uDE8B-\\uDE9B\\uDEA1-\\uDEA3\\uDEA5-\\uDEA9\\uDEAB-\\uDEBB]|\\uD83C[\\uDD30-\\uDD49\\uDD50-\\uDD69\\uDD70-\\uDD89]|\\uD869[\\uDC00-\\uDED6\\uDF00-\\uDFFF]|\\uD86D[\\uDC00-\\uDF34\\uDF40-\\uDFFF]|\\uD86E[\\uDC00-\\uDC1D\\uDC20-\\uDFFF]|\\uD873[\\uDC00-\\uDEA1]|\\uD87E[\\uDC00-\\uDE1D]\"\n        }, {\n          name: 'Any',\n          isBmpLast: true,\n          bmp: \"\\0-\\uFFFF\",\n          astral: \"[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]\"\n        }, {\n          name: 'Default_Ignorable_Code_Point',\n          bmp: \"\\xAD\\u034F\\u061C\\u115F\\u1160\\u17B4\\u17B5\\u180B-\\u180E\\u200B-\\u200F\\u202A-\\u202E\\u2060-\\u206F\\u3164\\uFE00-\\uFE0F\\uFEFF\\uFFA0\\uFFF0-\\uFFF8\",\n          astral: \"\\uD82F[\\uDCA0-\\uDCA3]|\\uD834[\\uDD73-\\uDD7A]|[\\uDB40-\\uDB43][\\uDC00-\\uDFFF]\"\n        }, {\n          name: 'Lowercase',\n          bmp: \"a-z\\xAA\\xB5\\xBA\\xDF-\\xF6\\xF8-\\xFF\\u0101\\u0103\\u0105\\u0107\\u0109\\u010B\\u010D\\u010F\\u0111\\u0113\\u0115\\u0117\\u0119\\u011B\\u011D\\u011F\\u0121\\u0123\\u0125\\u0127\\u0129\\u012B\\u012D\\u012F\\u0131\\u0133\\u0135\\u0137\\u0138\\u013A\\u013C\\u013E\\u0140\\u0142\\u0144\\u0146\\u0148\\u0149\\u014B\\u014D\\u014F\\u0151\\u0153\\u0155\\u0157\\u0159\\u015B\\u015D\\u015F\\u0161\\u0163\\u0165\\u0167\\u0169\\u016B\\u016D\\u016F\\u0171\\u0173\\u0175\\u0177\\u017A\\u017C\\u017E-\\u0180\\u0183\\u0185\\u0188\\u018C\\u018D\\u0192\\u0195\\u0199-\\u019B\\u019E\\u01A1\\u01A3\\u01A5\\u01A8\\u01AA\\u01AB\\u01AD\\u01B0\\u01B4\\u01B6\\u01B9\\u01BA\\u01BD-\\u01BF\\u01C6\\u01C9\\u01CC\\u01CE\\u01D0\\u01D2\\u01D4\\u01D6\\u01D8\\u01DA\\u01DC\\u01DD\\u01DF\\u01E1\\u01E3\\u01E5\\u01E7\\u01E9\\u01EB\\u01ED\\u01EF\\u01F0\\u01F3\\u01F5\\u01F9\\u01FB\\u01FD\\u01FF\\u0201\\u0203\\u0205\\u0207\\u0209\\u020B\\u020D\\u020F\\u0211\\u0213\\u0215\\u0217\\u0219\\u021B\\u021D\\u021F\\u0221\\u0223\\u0225\\u0227\\u0229\\u022B\\u022D\\u022F\\u0231\\u0233-\\u0239\\u023C\\u023F\\u0240\\u0242\\u0247\\u0249\\u024B\\u024D\\u024F-\\u0293\\u0295-\\u02B8\\u02C0\\u02C1\\u02E0-\\u02E4\\u0345\\u0371\\u0373\\u0377\\u037A-\\u037D\\u0390\\u03AC-\\u03CE\\u03D0\\u03D1\\u03D5-\\u03D7\\u03D9\\u03DB\\u03DD\\u03DF\\u03E1\\u03E3\\u03E5\\u03E7\\u03E9\\u03EB\\u03ED\\u03EF-\\u03F3\\u03F5\\u03F8\\u03FB\\u03FC\\u0430-\\u045F\\u0461\\u0463\\u0465\\u0467\\u0469\\u046B\\u046D\\u046F\\u0471\\u0473\\u0475\\u0477\\u0479\\u047B\\u047D\\u047F\\u0481\\u048B\\u048D\\u048F\\u0491\\u0493\\u0495\\u0497\\u0499\\u049B\\u049D\\u049F\\u04A1\\u04A3\\u04A5\\u04A7\\u04A9\\u04AB\\u04AD\\u04AF\\u04B1\\u04B3\\u04B5\\u04B7\\u04B9\\u04BB\\u04BD\\u04BF\\u04C2\\u04C4\\u04C6\\u04C8\\u04CA\\u04CC\\u04CE\\u04CF\\u04D1\\u04D3\\u04D5\\u04D7\\u04D9\\u04DB\\u04DD\\u04DF\\u04E1\\u04E3\\u04E5\\u04E7\\u04E9\\u04EB\\u04ED\\u04EF\\u04F1\\u04F3\\u04F5\\u04F7\\u04F9\\u04FB\\u04FD\\u04FF\\u0501\\u0503\\u0505\\u0507\\u0509\\u050B\\u050D\\u050F\\u0511\\u0513\\u0515\\u0517\\u0519\\u051B\\u051D\\u051F\\u0521\\u0523\\u0525\\u0527\\u0529\\u052B\\u052D\\u052F\\u0561-\\u0587\\u13F8-\\u13FD\\u1C80-\\u1C88\\u1D00-\\u1DBF\\u1E01\\u1E03\\u1E05\\u1E07\\u1E09\\u1E0B\\u1E0D\\u1E0F\\u1E11\\u1E13\\u1E15\\u1E17\\u1E19\\u1E1B\\u1E1D\\u1E1F\\u1E21\\u1E23\\u1E25\\u1E27\\u1E29\\u1E2B\\u1E2D\\u1E2F\\u1E31\\u1E33\\u1E35\\u1E37\\u1E39\\u1E3B\\u1E3D\\u1E3F\\u1E41\\u1E43\\u1E45\\u1E47\\u1E49\\u1E4B\\u1E4D\\u1E4F\\u1E51\\u1E53\\u1E55\\u1E57\\u1E59\\u1E5B\\u1E5D\\u1E5F\\u1E61\\u1E63\\u1E65\\u1E67\\u1E69\\u1E6B\\u1E6D\\u1E6F\\u1E71\\u1E73\\u1E75\\u1E77\\u1E79\\u1E7B\\u1E7D\\u1E7F\\u1E81\\u1E83\\u1E85\\u1E87\\u1E89\\u1E8B\\u1E8D\\u1E8F\\u1E91\\u1E93\\u1E95-\\u1E9D\\u1E9F\\u1EA1\\u1EA3\\u1EA5\\u1EA7\\u1EA9\\u1EAB\\u1EAD\\u1EAF\\u1EB1\\u1EB3\\u1EB5\\u1EB7\\u1EB9\\u1EBB\\u1EBD\\u1EBF\\u1EC1\\u1EC3\\u1EC5\\u1EC7\\u1EC9\\u1ECB\\u1ECD\\u1ECF\\u1ED1\\u1ED3\\u1ED5\\u1ED7\\u1ED9\\u1EDB\\u1EDD\\u1EDF\\u1EE1\\u1EE3\\u1EE5\\u1EE7\\u1EE9\\u1EEB\\u1EED\\u1EEF\\u1EF1\\u1EF3\\u1EF5\\u1EF7\\u1EF9\\u1EFB\\u1EFD\\u1EFF-\\u1F07\\u1F10-\\u1F15\\u1F20-\\u1F27\\u1F30-\\u1F37\\u1F40-\\u1F45\\u1F50-\\u1F57\\u1F60-\\u1F67\\u1F70-\\u1F7D\\u1F80-\\u1F87\\u1F90-\\u1F97\\u1FA0-\\u1FA7\\u1FB0-\\u1FB4\\u1FB6\\u1FB7\\u1FBE\\u1FC2-\\u1FC4\\u1FC6\\u1FC7\\u1FD0-\\u1FD3\\u1FD6\\u1FD7\\u1FE0-\\u1FE7\\u1FF2-\\u1FF4\\u1FF6\\u1FF7\\u2071\\u207F\\u2090-\\u209C\\u210A\\u210E\\u210F\\u2113\\u212F\\u2134\\u2139\\u213C\\u213D\\u2146-\\u2149\\u214E\\u2170-\\u217F\\u2184\\u24D0-\\u24E9\\u2C30-\\u2C5E\\u2C61\\u2C65\\u2C66\\u2C68\\u2C6A\\u2C6C\\u2C71\\u2C73\\u2C74\\u2C76-\\u2C7D\\u2C81\\u2C83\\u2C85\\u2C87\\u2C89\\u2C8B\\u2C8D\\u2C8F\\u2C91\\u2C93\\u2C95\\u2C97\\u2C99\\u2C9B\\u2C9D\\u2C9F\\u2CA1\\u2CA3\\u2CA5\\u2CA7\\u2CA9\\u2CAB\\u2CAD\\u2CAF\\u2CB1\\u2CB3\\u2CB5\\u2CB7\\u2CB9\\u2CBB\\u2CBD\\u2CBF\\u2CC1\\u2CC3\\u2CC5\\u2CC7\\u2CC9\\u2CCB\\u2CCD\\u2CCF\\u2CD1\\u2CD3\\u2CD5\\u2CD7\\u2CD9\\u2CDB\\u2CDD\\u2CDF\\u2CE1\\u2CE3\\u2CE4\\u2CEC\\u2CEE\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\uA641\\uA643\\uA645\\uA647\\uA649\\uA64B\\uA64D\\uA64F\\uA651\\uA653\\uA655\\uA657\\uA659\\uA65B\\uA65D\\uA65F\\uA661\\uA663\\uA665\\uA667\\uA669\\uA66B\\uA66D\\uA681\\uA683\\uA685\\uA687\\uA689\\uA68B\\uA68D\\uA68F\\uA691\\uA693\\uA695\\uA697\\uA699\\uA69B-\\uA69D\\uA723\\uA725\\uA727\\uA729\\uA72B\\uA72D\\uA72F-\\uA731\\uA733\\uA735\\uA737\\uA739\\uA73B\\uA73D\\uA73F\\uA741\\uA743\\uA745\\uA747\\uA749\\uA74B\\uA74D\\uA74F\\uA751\\uA753\\uA755\\uA757\\uA759\\uA75B\\uA75D\\uA75F\\uA761\\uA763\\uA765\\uA767\\uA769\\uA76B\\uA76D\\uA76F-\\uA778\\uA77A\\uA77C\\uA77F\\uA781\\uA783\\uA785\\uA787\\uA78C\\uA78E\\uA791\\uA793-\\uA795\\uA797\\uA799\\uA79B\\uA79D\\uA79F\\uA7A1\\uA7A3\\uA7A5\\uA7A7\\uA7A9\\uA7B5\\uA7B7\\uA7F8-\\uA7FA\\uAB30-\\uAB5A\\uAB5C-\\uAB65\\uAB70-\\uABBF\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFF41-\\uFF5A\",\n          astral: \"\\uD801[\\uDC28-\\uDC4F\\uDCD8-\\uDCFB]|\\uD803[\\uDCC0-\\uDCF2]|\\uD806[\\uDCC0-\\uDCDF]|\\uD835[\\uDC1A-\\uDC33\\uDC4E-\\uDC54\\uDC56-\\uDC67\\uDC82-\\uDC9B\\uDCB6-\\uDCB9\\uDCBB\\uDCBD-\\uDCC3\\uDCC5-\\uDCCF\\uDCEA-\\uDD03\\uDD1E-\\uDD37\\uDD52-\\uDD6B\\uDD86-\\uDD9F\\uDDBA-\\uDDD3\\uDDEE-\\uDE07\\uDE22-\\uDE3B\\uDE56-\\uDE6F\\uDE8A-\\uDEA5\\uDEC2-\\uDEDA\\uDEDC-\\uDEE1\\uDEFC-\\uDF14\\uDF16-\\uDF1B\\uDF36-\\uDF4E\\uDF50-\\uDF55\\uDF70-\\uDF88\\uDF8A-\\uDF8F\\uDFAA-\\uDFC2\\uDFC4-\\uDFC9\\uDFCB]|\\uD83A[\\uDD22-\\uDD43]\"\n        }, {\n          name: 'Noncharacter_Code_Point',\n          bmp: \"\\uFDD0-\\uFDEF\\uFFFE\\uFFFF\",\n          astral: \"[\\uD83F\\uD87F\\uD8BF\\uD8FF\\uD93F\\uD97F\\uD9BF\\uD9FF\\uDA3F\\uDA7F\\uDABF\\uDAFF\\uDB3F\\uDB7F\\uDBBF\\uDBFF][\\uDFFE\\uDFFF]\"\n        }, {\n          name: 'Uppercase',\n          bmp: \"A-Z\\xC0-\\xD6\\xD8-\\xDE\\u0100\\u0102\\u0104\\u0106\\u0108\\u010A\\u010C\\u010E\\u0110\\u0112\\u0114\\u0116\\u0118\\u011A\\u011C\\u011E\\u0120\\u0122\\u0124\\u0126\\u0128\\u012A\\u012C\\u012E\\u0130\\u0132\\u0134\\u0136\\u0139\\u013B\\u013D\\u013F\\u0141\\u0143\\u0145\\u0147\\u014A\\u014C\\u014E\\u0150\\u0152\\u0154\\u0156\\u0158\\u015A\\u015C\\u015E\\u0160\\u0162\\u0164\\u0166\\u0168\\u016A\\u016C\\u016E\\u0170\\u0172\\u0174\\u0176\\u0178\\u0179\\u017B\\u017D\\u0181\\u0182\\u0184\\u0186\\u0187\\u0189-\\u018B\\u018E-\\u0191\\u0193\\u0194\\u0196-\\u0198\\u019C\\u019D\\u019F\\u01A0\\u01A2\\u01A4\\u01A6\\u01A7\\u01A9\\u01AC\\u01AE\\u01AF\\u01B1-\\u01B3\\u01B5\\u01B7\\u01B8\\u01BC\\u01C4\\u01C7\\u01CA\\u01CD\\u01CF\\u01D1\\u01D3\\u01D5\\u01D7\\u01D9\\u01DB\\u01DE\\u01E0\\u01E2\\u01E4\\u01E6\\u01E8\\u01EA\\u01EC\\u01EE\\u01F1\\u01F4\\u01F6-\\u01F8\\u01FA\\u01FC\\u01FE\\u0200\\u0202\\u0204\\u0206\\u0208\\u020A\\u020C\\u020E\\u0210\\u0212\\u0214\\u0216\\u0218\\u021A\\u021C\\u021E\\u0220\\u0222\\u0224\\u0226\\u0228\\u022A\\u022C\\u022E\\u0230\\u0232\\u023A\\u023B\\u023D\\u023E\\u0241\\u0243-\\u0246\\u0248\\u024A\\u024C\\u024E\\u0370\\u0372\\u0376\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E\\u038F\\u0391-\\u03A1\\u03A3-\\u03AB\\u03CF\\u03D2-\\u03D4\\u03D8\\u03DA\\u03DC\\u03DE\\u03E0\\u03E2\\u03E4\\u03E6\\u03E8\\u03EA\\u03EC\\u03EE\\u03F4\\u03F7\\u03F9\\u03FA\\u03FD-\\u042F\\u0460\\u0462\\u0464\\u0466\\u0468\\u046A\\u046C\\u046E\\u0470\\u0472\\u0474\\u0476\\u0478\\u047A\\u047C\\u047E\\u0480\\u048A\\u048C\\u048E\\u0490\\u0492\\u0494\\u0496\\u0498\\u049A\\u049C\\u049E\\u04A0\\u04A2\\u04A4\\u04A6\\u04A8\\u04AA\\u04AC\\u04AE\\u04B0\\u04B2\\u04B4\\u04B6\\u04B8\\u04BA\\u04BC\\u04BE\\u04C0\\u04C1\\u04C3\\u04C5\\u04C7\\u04C9\\u04CB\\u04CD\\u04D0\\u04D2\\u04D4\\u04D6\\u04D8\\u04DA\\u04DC\\u04DE\\u04E0\\u04E2\\u04E4\\u04E6\\u04E8\\u04EA\\u04EC\\u04EE\\u04F0\\u04F2\\u04F4\\u04F6\\u04F8\\u04FA\\u04FC\\u04FE\\u0500\\u0502\\u0504\\u0506\\u0508\\u050A\\u050C\\u050E\\u0510\\u0512\\u0514\\u0516\\u0518\\u051A\\u051C\\u051E\\u0520\\u0522\\u0524\\u0526\\u0528\\u052A\\u052C\\u052E\\u0531-\\u0556\\u10A0-\\u10C5\\u10C7\\u10CD\\u13A0-\\u13F5\\u1E00\\u1E02\\u1E04\\u1E06\\u1E08\\u1E0A\\u1E0C\\u1E0E\\u1E10\\u1E12\\u1E14\\u1E16\\u1E18\\u1E1A\\u1E1C\\u1E1E\\u1E20\\u1E22\\u1E24\\u1E26\\u1E28\\u1E2A\\u1E2C\\u1E2E\\u1E30\\u1E32\\u1E34\\u1E36\\u1E38\\u1E3A\\u1E3C\\u1E3E\\u1E40\\u1E42\\u1E44\\u1E46\\u1E48\\u1E4A\\u1E4C\\u1E4E\\u1E50\\u1E52\\u1E54\\u1E56\\u1E58\\u1E5A\\u1E5C\\u1E5E\\u1E60\\u1E62\\u1E64\\u1E66\\u1E68\\u1E6A\\u1E6C\\u1E6E\\u1E70\\u1E72\\u1E74\\u1E76\\u1E78\\u1E7A\\u1E7C\\u1E7E\\u1E80\\u1E82\\u1E84\\u1E86\\u1E88\\u1E8A\\u1E8C\\u1E8E\\u1E90\\u1E92\\u1E94\\u1E9E\\u1EA0\\u1EA2\\u1EA4\\u1EA6\\u1EA8\\u1EAA\\u1EAC\\u1EAE\\u1EB0\\u1EB2\\u1EB4\\u1EB6\\u1EB8\\u1EBA\\u1EBC\\u1EBE\\u1EC0\\u1EC2\\u1EC4\\u1EC6\\u1EC8\\u1ECA\\u1ECC\\u1ECE\\u1ED0\\u1ED2\\u1ED4\\u1ED6\\u1ED8\\u1EDA\\u1EDC\\u1EDE\\u1EE0\\u1EE2\\u1EE4\\u1EE6\\u1EE8\\u1EEA\\u1EEC\\u1EEE\\u1EF0\\u1EF2\\u1EF4\\u1EF6\\u1EF8\\u1EFA\\u1EFC\\u1EFE\\u1F08-\\u1F0F\\u1F18-\\u1F1D\\u1F28-\\u1F2F\\u1F38-\\u1F3F\\u1F48-\\u1F4D\\u1F59\\u1F5B\\u1F5D\\u1F5F\\u1F68-\\u1F6F\\u1FB8-\\u1FBB\\u1FC8-\\u1FCB\\u1FD8-\\u1FDB\\u1FE8-\\u1FEC\\u1FF8-\\u1FFB\\u2102\\u2107\\u210B-\\u210D\\u2110-\\u2112\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u2130-\\u2133\\u213E\\u213F\\u2145\\u2160-\\u216F\\u2183\\u24B6-\\u24CF\\u2C00-\\u2C2E\\u2C60\\u2C62-\\u2C64\\u2C67\\u2C69\\u2C6B\\u2C6D-\\u2C70\\u2C72\\u2C75\\u2C7E-\\u2C80\\u2C82\\u2C84\\u2C86\\u2C88\\u2C8A\\u2C8C\\u2C8E\\u2C90\\u2C92\\u2C94\\u2C96\\u2C98\\u2C9A\\u2C9C\\u2C9E\\u2CA0\\u2CA2\\u2CA4\\u2CA6\\u2CA8\\u2CAA\\u2CAC\\u2CAE\\u2CB0\\u2CB2\\u2CB4\\u2CB6\\u2CB8\\u2CBA\\u2CBC\\u2CBE\\u2CC0\\u2CC2\\u2CC4\\u2CC6\\u2CC8\\u2CCA\\u2CCC\\u2CCE\\u2CD0\\u2CD2\\u2CD4\\u2CD6\\u2CD8\\u2CDA\\u2CDC\\u2CDE\\u2CE0\\u2CE2\\u2CEB\\u2CED\\u2CF2\\uA640\\uA642\\uA644\\uA646\\uA648\\uA64A\\uA64C\\uA64E\\uA650\\uA652\\uA654\\uA656\\uA658\\uA65A\\uA65C\\uA65E\\uA660\\uA662\\uA664\\uA666\\uA668\\uA66A\\uA66C\\uA680\\uA682\\uA684\\uA686\\uA688\\uA68A\\uA68C\\uA68E\\uA690\\uA692\\uA694\\uA696\\uA698\\uA69A\\uA722\\uA724\\uA726\\uA728\\uA72A\\uA72C\\uA72E\\uA732\\uA734\\uA736\\uA738\\uA73A\\uA73C\\uA73E\\uA740\\uA742\\uA744\\uA746\\uA748\\uA74A\\uA74C\\uA74E\\uA750\\uA752\\uA754\\uA756\\uA758\\uA75A\\uA75C\\uA75E\\uA760\\uA762\\uA764\\uA766\\uA768\\uA76A\\uA76C\\uA76E\\uA779\\uA77B\\uA77D\\uA77E\\uA780\\uA782\\uA784\\uA786\\uA78B\\uA78D\\uA790\\uA792\\uA796\\uA798\\uA79A\\uA79C\\uA79E\\uA7A0\\uA7A2\\uA7A4\\uA7A6\\uA7A8\\uA7AA-\\uA7AE\\uA7B0-\\uA7B4\\uA7B6\\uFF21-\\uFF3A\",\n          astral: \"\\uD801[\\uDC00-\\uDC27\\uDCB0-\\uDCD3]|\\uD803[\\uDC80-\\uDCB2]|\\uD806[\\uDCA0-\\uDCBF]|\\uD835[\\uDC00-\\uDC19\\uDC34-\\uDC4D\\uDC68-\\uDC81\\uDC9C\\uDC9E\\uDC9F\\uDCA2\\uDCA5\\uDCA6\\uDCA9-\\uDCAC\\uDCAE-\\uDCB5\\uDCD0-\\uDCE9\\uDD04\\uDD05\\uDD07-\\uDD0A\\uDD0D-\\uDD14\\uDD16-\\uDD1C\\uDD38\\uDD39\\uDD3B-\\uDD3E\\uDD40-\\uDD44\\uDD46\\uDD4A-\\uDD50\\uDD6C-\\uDD85\\uDDA0-\\uDDB9\\uDDD4-\\uDDED\\uDE08-\\uDE21\\uDE3C-\\uDE55\\uDE70-\\uDE89\\uDEA8-\\uDEC0\\uDEE2-\\uDEFA\\uDF1C-\\uDF34\\uDF56-\\uDF6E\\uDF90-\\uDFA8\\uDFCA]|\\uD83A[\\uDD00-\\uDD21]|\\uD83C[\\uDD30-\\uDD49\\uDD50-\\uDD69\\uDD70-\\uDD89]\"\n        }, {\n          name: 'White_Space',\n          bmp: \"\\t-\\r \\x85\\xA0\\u1680\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000\"\n        }];\n\n        // Add non-generated data\n        unicodeData.push({\n          name: 'Assigned',\n          // Since this is defined as the inverse of Unicode category Cn (Unassigned), the Unicode\n          // Categories addon is required to use this property\n          inverseOf: 'Cn'\n        });\n        XRegExp.addUnicodeData(unicodeData);\n      };\n      module.exports = exports['default'];\n    }, {}],\n    7: [function (require, module, exports) {\n      'use strict';\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      /*!\n       * XRegExp Unicode Scripts 4.0.0\n       * <xregexp.com>\n       * Steven Levithan (c) 2010-2017 MIT License\n       * Unicode data by Mathias Bynens <mathiasbynens.be>\n       */\n\n      exports[\"default\"] = function (XRegExp) {\n        /**\n         * Adds support for all Unicode scripts. E.g., `\\p{Latin}`. Token names are case insensitive,\n         * and any spaces, hyphens, and underscores are ignored.\n         *\n         * Uses Unicode 9.0.0.\n         *\n         * @requires XRegExp, Unicode Base\n         */\n\n        if (!XRegExp.addUnicodeData) {\n          throw new ReferenceError('Unicode Base must be loaded before Unicode Scripts');\n        }\n        XRegExp.addUnicodeData([{\n          name: 'Adlam',\n          astral: \"\\uD83A[\\uDD00-\\uDD4A\\uDD50-\\uDD59\\uDD5E\\uDD5F]\"\n        }, {\n          name: 'Ahom',\n          astral: \"\\uD805[\\uDF00-\\uDF19\\uDF1D-\\uDF2B\\uDF30-\\uDF3F]\"\n        }, {\n          name: 'Anatolian_Hieroglyphs',\n          astral: \"\\uD811[\\uDC00-\\uDE46]\"\n        }, {\n          name: 'Arabic',\n          bmp: \"\\u0600-\\u0604\\u0606-\\u060B\\u060D-\\u061A\\u061E\\u0620-\\u063F\\u0641-\\u064A\\u0656-\\u066F\\u0671-\\u06DC\\u06DE-\\u06FF\\u0750-\\u077F\\u08A0-\\u08B4\\u08B6-\\u08BD\\u08D4-\\u08E1\\u08E3-\\u08FF\\uFB50-\\uFBC1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFD\\uFE70-\\uFE74\\uFE76-\\uFEFC\",\n          astral: \"\\uD803[\\uDE60-\\uDE7E]|\\uD83B[\\uDE00-\\uDE03\\uDE05-\\uDE1F\\uDE21\\uDE22\\uDE24\\uDE27\\uDE29-\\uDE32\\uDE34-\\uDE37\\uDE39\\uDE3B\\uDE42\\uDE47\\uDE49\\uDE4B\\uDE4D-\\uDE4F\\uDE51\\uDE52\\uDE54\\uDE57\\uDE59\\uDE5B\\uDE5D\\uDE5F\\uDE61\\uDE62\\uDE64\\uDE67-\\uDE6A\\uDE6C-\\uDE72\\uDE74-\\uDE77\\uDE79-\\uDE7C\\uDE7E\\uDE80-\\uDE89\\uDE8B-\\uDE9B\\uDEA1-\\uDEA3\\uDEA5-\\uDEA9\\uDEAB-\\uDEBB\\uDEF0\\uDEF1]\"\n        }, {\n          name: 'Armenian',\n          bmp: \"\\u0531-\\u0556\\u0559-\\u055F\\u0561-\\u0587\\u058A\\u058D-\\u058F\\uFB13-\\uFB17\"\n        }, {\n          name: 'Avestan',\n          astral: \"\\uD802[\\uDF00-\\uDF35\\uDF39-\\uDF3F]\"\n        }, {\n          name: 'Balinese',\n          bmp: \"\\u1B00-\\u1B4B\\u1B50-\\u1B7C\"\n        }, {\n          name: 'Bamum',\n          bmp: \"\\uA6A0-\\uA6F7\",\n          astral: \"\\uD81A[\\uDC00-\\uDE38]\"\n        }, {\n          name: 'Bassa_Vah',\n          astral: \"\\uD81A[\\uDED0-\\uDEED\\uDEF0-\\uDEF5]\"\n        }, {\n          name: 'Batak',\n          bmp: \"\\u1BC0-\\u1BF3\\u1BFC-\\u1BFF\"\n        }, {\n          name: 'Bengali',\n          bmp: \"\\u0980-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09FB\"\n        }, {\n          name: 'Bhaiksuki',\n          astral: \"\\uD807[\\uDC00-\\uDC08\\uDC0A-\\uDC36\\uDC38-\\uDC45\\uDC50-\\uDC6C]\"\n        }, {\n          name: 'Bopomofo',\n          bmp: \"\\u02EA\\u02EB\\u3105-\\u312D\\u31A0-\\u31BA\"\n        }, {\n          name: 'Brahmi',\n          astral: \"\\uD804[\\uDC00-\\uDC4D\\uDC52-\\uDC6F\\uDC7F]\"\n        }, {\n          name: 'Braille',\n          bmp: \"\\u2800-\\u28FF\"\n        }, {\n          name: 'Buginese',\n          bmp: \"\\u1A00-\\u1A1B\\u1A1E\\u1A1F\"\n        }, {\n          name: 'Buhid',\n          bmp: \"\\u1740-\\u1753\"\n        }, {\n          name: 'Canadian_Aboriginal',\n          bmp: \"\\u1400-\\u167F\\u18B0-\\u18F5\"\n        }, {\n          name: 'Carian',\n          astral: \"\\uD800[\\uDEA0-\\uDED0]\"\n        }, {\n          name: 'Caucasian_Albanian',\n          astral: \"\\uD801[\\uDD30-\\uDD63\\uDD6F]\"\n        }, {\n          name: 'Chakma',\n          astral: \"\\uD804[\\uDD00-\\uDD34\\uDD36-\\uDD43]\"\n        }, {\n          name: 'Cham',\n          bmp: \"\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA5C-\\uAA5F\"\n        }, {\n          name: 'Cherokee',\n          bmp: \"\\u13A0-\\u13F5\\u13F8-\\u13FD\\uAB70-\\uABBF\"\n        }, {\n          name: 'Common',\n          bmp: \"\\0-@\\\\x5B-`\\\\x7B-\\xA9\\xAB-\\xB9\\xBB-\\xBF\\xD7\\xF7\\u02B9-\\u02DF\\u02E5-\\u02E9\\u02EC-\\u02FF\\u0374\\u037E\\u0385\\u0387\\u0589\\u0605\\u060C\\u061B\\u061C\\u061F\\u0640\\u06DD\\u08E2\\u0964\\u0965\\u0E3F\\u0FD5-\\u0FD8\\u10FB\\u16EB-\\u16ED\\u1735\\u1736\\u1802\\u1803\\u1805\\u1CD3\\u1CE1\\u1CE9-\\u1CEC\\u1CEE-\\u1CF3\\u1CF5\\u1CF6\\u2000-\\u200B\\u200E-\\u2064\\u2066-\\u2070\\u2074-\\u207E\\u2080-\\u208E\\u20A0-\\u20BE\\u2100-\\u2125\\u2127-\\u2129\\u212C-\\u2131\\u2133-\\u214D\\u214F-\\u215F\\u2189-\\u218B\\u2190-\\u23FE\\u2400-\\u2426\\u2440-\\u244A\\u2460-\\u27FF\\u2900-\\u2B73\\u2B76-\\u2B95\\u2B98-\\u2BB9\\u2BBD-\\u2BC8\\u2BCA-\\u2BD1\\u2BEC-\\u2BEF\\u2E00-\\u2E44\\u2FF0-\\u2FFB\\u3000-\\u3004\\u3006\\u3008-\\u3020\\u3030-\\u3037\\u303C-\\u303F\\u309B\\u309C\\u30A0\\u30FB\\u30FC\\u3190-\\u319F\\u31C0-\\u31E3\\u3220-\\u325F\\u327F-\\u32CF\\u3358-\\u33FF\\u4DC0-\\u4DFF\\uA700-\\uA721\\uA788-\\uA78A\\uA830-\\uA839\\uA92E\\uA9CF\\uAB5B\\uFD3E\\uFD3F\\uFE10-\\uFE19\\uFE30-\\uFE52\\uFE54-\\uFE66\\uFE68-\\uFE6B\\uFEFF\\uFF01-\\uFF20\\uFF3B-\\uFF40\\uFF5B-\\uFF65\\uFF70\\uFF9E\\uFF9F\\uFFE0-\\uFFE6\\uFFE8-\\uFFEE\\uFFF9-\\uFFFD\",\n          astral: \"\\uD800[\\uDD00-\\uDD02\\uDD07-\\uDD33\\uDD37-\\uDD3F\\uDD90-\\uDD9B\\uDDD0-\\uDDFC\\uDEE1-\\uDEFB]|\\uD82F[\\uDCA0-\\uDCA3]|\\uD834[\\uDC00-\\uDCF5\\uDD00-\\uDD26\\uDD29-\\uDD66\\uDD6A-\\uDD7A\\uDD83\\uDD84\\uDD8C-\\uDDA9\\uDDAE-\\uDDE8\\uDF00-\\uDF56\\uDF60-\\uDF71]|\\uD835[\\uDC00-\\uDC54\\uDC56-\\uDC9C\\uDC9E\\uDC9F\\uDCA2\\uDCA5\\uDCA6\\uDCA9-\\uDCAC\\uDCAE-\\uDCB9\\uDCBB\\uDCBD-\\uDCC3\\uDCC5-\\uDD05\\uDD07-\\uDD0A\\uDD0D-\\uDD14\\uDD16-\\uDD1C\\uDD1E-\\uDD39\\uDD3B-\\uDD3E\\uDD40-\\uDD44\\uDD46\\uDD4A-\\uDD50\\uDD52-\\uDEA5\\uDEA8-\\uDFCB\\uDFCE-\\uDFFF]|\\uD83C[\\uDC00-\\uDC2B\\uDC30-\\uDC93\\uDCA0-\\uDCAE\\uDCB1-\\uDCBF\\uDCC1-\\uDCCF\\uDCD1-\\uDCF5\\uDD00-\\uDD0C\\uDD10-\\uDD2E\\uDD30-\\uDD6B\\uDD70-\\uDDAC\\uDDE6-\\uDDFF\\uDE01\\uDE02\\uDE10-\\uDE3B\\uDE40-\\uDE48\\uDE50\\uDE51\\uDF00-\\uDFFF]|\\uD83D[\\uDC00-\\uDED2\\uDEE0-\\uDEEC\\uDEF0-\\uDEF6\\uDF00-\\uDF73\\uDF80-\\uDFD4]|\\uD83E[\\uDC00-\\uDC0B\\uDC10-\\uDC47\\uDC50-\\uDC59\\uDC60-\\uDC87\\uDC90-\\uDCAD\\uDD10-\\uDD1E\\uDD20-\\uDD27\\uDD30\\uDD33-\\uDD3E\\uDD40-\\uDD4B\\uDD50-\\uDD5E\\uDD80-\\uDD91\\uDDC0]|\\uDB40[\\uDC01\\uDC20-\\uDC7F]\"\n        }, {\n          name: 'Coptic',\n          bmp: \"\\u03E2-\\u03EF\\u2C80-\\u2CF3\\u2CF9-\\u2CFF\"\n        }, {\n          name: 'Cuneiform',\n          astral: \"\\uD808[\\uDC00-\\uDF99]|\\uD809[\\uDC00-\\uDC6E\\uDC70-\\uDC74\\uDC80-\\uDD43]\"\n        }, {\n          name: 'Cypriot',\n          astral: \"\\uD802[\\uDC00-\\uDC05\\uDC08\\uDC0A-\\uDC35\\uDC37\\uDC38\\uDC3C\\uDC3F]\"\n        }, {\n          name: 'Cyrillic',\n          bmp: \"\\u0400-\\u0484\\u0487-\\u052F\\u1C80-\\u1C88\\u1D2B\\u1D78\\u2DE0-\\u2DFF\\uA640-\\uA69F\\uFE2E\\uFE2F\"\n        }, {\n          name: 'Deseret',\n          astral: \"\\uD801[\\uDC00-\\uDC4F]\"\n        }, {\n          name: 'Devanagari',\n          bmp: \"\\u0900-\\u0950\\u0953-\\u0963\\u0966-\\u097F\\uA8E0-\\uA8FD\"\n        }, {\n          name: 'Duployan',\n          astral: \"\\uD82F[\\uDC00-\\uDC6A\\uDC70-\\uDC7C\\uDC80-\\uDC88\\uDC90-\\uDC99\\uDC9C-\\uDC9F]\"\n        }, {\n          name: 'Egyptian_Hieroglyphs',\n          astral: \"\\uD80C[\\uDC00-\\uDFFF]|\\uD80D[\\uDC00-\\uDC2E]\"\n        }, {\n          name: 'Elbasan',\n          astral: \"\\uD801[\\uDD00-\\uDD27]\"\n        }, {\n          name: 'Ethiopic',\n          bmp: \"\\u1200-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u137C\\u1380-\\u1399\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\"\n        }, {\n          name: 'Georgian',\n          bmp: \"\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u10FF\\u2D00-\\u2D25\\u2D27\\u2D2D\"\n        }, {\n          name: 'Glagolitic',\n          bmp: \"\\u2C00-\\u2C2E\\u2C30-\\u2C5E\",\n          astral: \"\\uD838[\\uDC00-\\uDC06\\uDC08-\\uDC18\\uDC1B-\\uDC21\\uDC23\\uDC24\\uDC26-\\uDC2A]\"\n        }, {\n          name: 'Gothic',\n          astral: \"\\uD800[\\uDF30-\\uDF4A]\"\n        }, {\n          name: 'Grantha',\n          astral: \"\\uD804[\\uDF00-\\uDF03\\uDF05-\\uDF0C\\uDF0F\\uDF10\\uDF13-\\uDF28\\uDF2A-\\uDF30\\uDF32\\uDF33\\uDF35-\\uDF39\\uDF3C-\\uDF44\\uDF47\\uDF48\\uDF4B-\\uDF4D\\uDF50\\uDF57\\uDF5D-\\uDF63\\uDF66-\\uDF6C\\uDF70-\\uDF74]\"\n        }, {\n          name: 'Greek',\n          bmp: \"\\u0370-\\u0373\\u0375-\\u0377\\u037A-\\u037D\\u037F\\u0384\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03E1\\u03F0-\\u03FF\\u1D26-\\u1D2A\\u1D5D-\\u1D61\\u1D66-\\u1D6A\\u1DBF\\u1F00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FC4\\u1FC6-\\u1FD3\\u1FD6-\\u1FDB\\u1FDD-\\u1FEF\\u1FF2-\\u1FF4\\u1FF6-\\u1FFE\\u2126\\uAB65\",\n          astral: \"\\uD800[\\uDD40-\\uDD8E\\uDDA0]|\\uD834[\\uDE00-\\uDE45]\"\n        }, {\n          name: 'Gujarati',\n          bmp: \"\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AF1\\u0AF9\"\n        }, {\n          name: 'Gurmukhi',\n          bmp: \"\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\"\n        }, {\n          name: 'Han',\n          bmp: \"\\u2E80-\\u2E99\\u2E9B-\\u2EF3\\u2F00-\\u2FD5\\u3005\\u3007\\u3021-\\u3029\\u3038-\\u303B\\u3400-\\u4DB5\\u4E00-\\u9FD5\\uF900-\\uFA6D\\uFA70-\\uFAD9\",\n          astral: \"[\\uD840-\\uD868\\uD86A-\\uD86C\\uD86F-\\uD872][\\uDC00-\\uDFFF]|\\uD869[\\uDC00-\\uDED6\\uDF00-\\uDFFF]|\\uD86D[\\uDC00-\\uDF34\\uDF40-\\uDFFF]|\\uD86E[\\uDC00-\\uDC1D\\uDC20-\\uDFFF]|\\uD873[\\uDC00-\\uDEA1]|\\uD87E[\\uDC00-\\uDE1D]\"\n        }, {\n          name: 'Hangul',\n          bmp: \"\\u1100-\\u11FF\\u302E\\u302F\\u3131-\\u318E\\u3200-\\u321E\\u3260-\\u327E\\uA960-\\uA97C\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uFFA0-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC\"\n        }, {\n          name: 'Hanunoo',\n          bmp: \"\\u1720-\\u1734\"\n        }, {\n          name: 'Hatran',\n          astral: \"\\uD802[\\uDCE0-\\uDCF2\\uDCF4\\uDCF5\\uDCFB-\\uDCFF]\"\n        }, {\n          name: 'Hebrew',\n          bmp: \"\\u0591-\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F4\\uFB1D-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFB4F\"\n        }, {\n          name: 'Hiragana',\n          bmp: \"\\u3041-\\u3096\\u309D-\\u309F\",\n          astral: \"\\uD82C\\uDC01|\\uD83C\\uDE00\"\n        }, {\n          name: 'Imperial_Aramaic',\n          astral: \"\\uD802[\\uDC40-\\uDC55\\uDC57-\\uDC5F]\"\n        }, {\n          name: 'Inherited',\n          bmp: \"\\u0300-\\u036F\\u0485\\u0486\\u064B-\\u0655\\u0670\\u0951\\u0952\\u1AB0-\\u1ABE\\u1CD0-\\u1CD2\\u1CD4-\\u1CE0\\u1CE2-\\u1CE8\\u1CED\\u1CF4\\u1CF8\\u1CF9\\u1DC0-\\u1DF5\\u1DFB-\\u1DFF\\u200C\\u200D\\u20D0-\\u20F0\\u302A-\\u302D\\u3099\\u309A\\uFE00-\\uFE0F\\uFE20-\\uFE2D\",\n          astral: \"\\uD800[\\uDDFD\\uDEE0]|\\uD834[\\uDD67-\\uDD69\\uDD7B-\\uDD82\\uDD85-\\uDD8B\\uDDAA-\\uDDAD]|\\uDB40[\\uDD00-\\uDDEF]\"\n        }, {\n          name: 'Inscriptional_Pahlavi',\n          astral: \"\\uD802[\\uDF60-\\uDF72\\uDF78-\\uDF7F]\"\n        }, {\n          name: 'Inscriptional_Parthian',\n          astral: \"\\uD802[\\uDF40-\\uDF55\\uDF58-\\uDF5F]\"\n        }, {\n          name: 'Javanese',\n          bmp: \"\\uA980-\\uA9CD\\uA9D0-\\uA9D9\\uA9DE\\uA9DF\"\n        }, {\n          name: 'Kaithi',\n          astral: \"\\uD804[\\uDC80-\\uDCC1]\"\n        }, {\n          name: 'Kannada',\n          bmp: \"\\u0C80-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\"\n        }, {\n          name: 'Katakana',\n          bmp: \"\\u30A1-\\u30FA\\u30FD-\\u30FF\\u31F0-\\u31FF\\u32D0-\\u32FE\\u3300-\\u3357\\uFF66-\\uFF6F\\uFF71-\\uFF9D\",\n          astral: \"\\uD82C\\uDC00\"\n        }, {\n          name: 'Kayah_Li',\n          bmp: \"\\uA900-\\uA92D\\uA92F\"\n        }, {\n          name: 'Kharoshthi',\n          astral: \"\\uD802[\\uDE00-\\uDE03\\uDE05\\uDE06\\uDE0C-\\uDE13\\uDE15-\\uDE17\\uDE19-\\uDE33\\uDE38-\\uDE3A\\uDE3F-\\uDE47\\uDE50-\\uDE58]\"\n        }, {\n          name: 'Khmer',\n          bmp: \"\\u1780-\\u17DD\\u17E0-\\u17E9\\u17F0-\\u17F9\\u19E0-\\u19FF\"\n        }, {\n          name: 'Khojki',\n          astral: \"\\uD804[\\uDE00-\\uDE11\\uDE13-\\uDE3E]\"\n        }, {\n          name: 'Khudawadi',\n          astral: \"\\uD804[\\uDEB0-\\uDEEA\\uDEF0-\\uDEF9]\"\n        }, {\n          name: 'Lao',\n          bmp: \"\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\"\n        }, {\n          name: 'Latin',\n          bmp: \"A-Za-z\\xAA\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02B8\\u02E0-\\u02E4\\u1D00-\\u1D25\\u1D2C-\\u1D5C\\u1D62-\\u1D65\\u1D6B-\\u1D77\\u1D79-\\u1DBE\\u1E00-\\u1EFF\\u2071\\u207F\\u2090-\\u209C\\u212A\\u212B\\u2132\\u214E\\u2160-\\u2188\\u2C60-\\u2C7F\\uA722-\\uA787\\uA78B-\\uA7AE\\uA7B0-\\uA7B7\\uA7F7-\\uA7FF\\uAB30-\\uAB5A\\uAB5C-\\uAB64\\uFB00-\\uFB06\\uFF21-\\uFF3A\\uFF41-\\uFF5A\"\n        }, {\n          name: 'Lepcha',\n          bmp: \"\\u1C00-\\u1C37\\u1C3B-\\u1C49\\u1C4D-\\u1C4F\"\n        }, {\n          name: 'Limbu',\n          bmp: \"\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1940\\u1944-\\u194F\"\n        }, {\n          name: 'Linear_A',\n          astral: \"\\uD801[\\uDE00-\\uDF36\\uDF40-\\uDF55\\uDF60-\\uDF67]\"\n        }, {\n          name: 'Linear_B',\n          astral: \"\\uD800[\\uDC00-\\uDC0B\\uDC0D-\\uDC26\\uDC28-\\uDC3A\\uDC3C\\uDC3D\\uDC3F-\\uDC4D\\uDC50-\\uDC5D\\uDC80-\\uDCFA]\"\n        }, {\n          name: 'Lisu',\n          bmp: \"\\uA4D0-\\uA4FF\"\n        }, {\n          name: 'Lycian',\n          astral: \"\\uD800[\\uDE80-\\uDE9C]\"\n        }, {\n          name: 'Lydian',\n          astral: \"\\uD802[\\uDD20-\\uDD39\\uDD3F]\"\n        }, {\n          name: 'Mahajani',\n          astral: \"\\uD804[\\uDD50-\\uDD76]\"\n        }, {\n          name: 'Malayalam',\n          bmp: \"\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4F\\u0D54-\\u0D63\\u0D66-\\u0D7F\"\n        }, {\n          name: 'Mandaic',\n          bmp: \"\\u0840-\\u085B\\u085E\"\n        }, {\n          name: 'Manichaean',\n          astral: \"\\uD802[\\uDEC0-\\uDEE6\\uDEEB-\\uDEF6]\"\n        }, {\n          name: 'Marchen',\n          astral: \"\\uD807[\\uDC70-\\uDC8F\\uDC92-\\uDCA7\\uDCA9-\\uDCB6]\"\n        }, {\n          name: 'Meetei_Mayek',\n          bmp: \"\\uAAE0-\\uAAF6\\uABC0-\\uABED\\uABF0-\\uABF9\"\n        }, {\n          name: 'Mende_Kikakui',\n          astral: \"\\uD83A[\\uDC00-\\uDCC4\\uDCC7-\\uDCD6]\"\n        }, {\n          name: 'Meroitic_Cursive',\n          astral: \"\\uD802[\\uDDA0-\\uDDB7\\uDDBC-\\uDDCF\\uDDD2-\\uDDFF]\"\n        }, {\n          name: 'Meroitic_Hieroglyphs',\n          astral: \"\\uD802[\\uDD80-\\uDD9F]\"\n        }, {\n          name: 'Miao',\n          astral: \"\\uD81B[\\uDF00-\\uDF44\\uDF50-\\uDF7E\\uDF8F-\\uDF9F]\"\n        }, {\n          name: 'Modi',\n          astral: \"\\uD805[\\uDE00-\\uDE44\\uDE50-\\uDE59]\"\n        }, {\n          name: 'Mongolian',\n          bmp: \"\\u1800\\u1801\\u1804\\u1806-\\u180E\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\",\n          astral: \"\\uD805[\\uDE60-\\uDE6C]\"\n        }, {\n          name: 'Mro',\n          astral: \"\\uD81A[\\uDE40-\\uDE5E\\uDE60-\\uDE69\\uDE6E\\uDE6F]\"\n        }, {\n          name: 'Multani',\n          astral: \"\\uD804[\\uDE80-\\uDE86\\uDE88\\uDE8A-\\uDE8D\\uDE8F-\\uDE9D\\uDE9F-\\uDEA9]\"\n        }, {\n          name: 'Myanmar',\n          bmp: \"\\u1000-\\u109F\\uA9E0-\\uA9FE\\uAA60-\\uAA7F\"\n        }, {\n          name: 'Nabataean',\n          astral: \"\\uD802[\\uDC80-\\uDC9E\\uDCA7-\\uDCAF]\"\n        }, {\n          name: 'New_Tai_Lue',\n          bmp: \"\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19DA\\u19DE\\u19DF\"\n        }, {\n          name: 'Newa',\n          astral: \"\\uD805[\\uDC00-\\uDC59\\uDC5B\\uDC5D]\"\n        }, {\n          name: 'Nko',\n          bmp: \"\\u07C0-\\u07FA\"\n        }, {\n          name: 'Ogham',\n          bmp: \"\\u1680-\\u169C\"\n        }, {\n          name: 'Ol_Chiki',\n          bmp: \"\\u1C50-\\u1C7F\"\n        }, {\n          name: 'Old_Hungarian',\n          astral: \"\\uD803[\\uDC80-\\uDCB2\\uDCC0-\\uDCF2\\uDCFA-\\uDCFF]\"\n        }, {\n          name: 'Old_Italic',\n          astral: \"\\uD800[\\uDF00-\\uDF23]\"\n        }, {\n          name: 'Old_North_Arabian',\n          astral: \"\\uD802[\\uDE80-\\uDE9F]\"\n        }, {\n          name: 'Old_Permic',\n          astral: \"\\uD800[\\uDF50-\\uDF7A]\"\n        }, {\n          name: 'Old_Persian',\n          astral: \"\\uD800[\\uDFA0-\\uDFC3\\uDFC8-\\uDFD5]\"\n        }, {\n          name: 'Old_South_Arabian',\n          astral: \"\\uD802[\\uDE60-\\uDE7F]\"\n        }, {\n          name: 'Old_Turkic',\n          astral: \"\\uD803[\\uDC00-\\uDC48]\"\n        }, {\n          name: 'Oriya',\n          bmp: \"\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B77\"\n        }, {\n          name: 'Osage',\n          astral: \"\\uD801[\\uDCB0-\\uDCD3\\uDCD8-\\uDCFB]\"\n        }, {\n          name: 'Osmanya',\n          astral: \"\\uD801[\\uDC80-\\uDC9D\\uDCA0-\\uDCA9]\"\n        }, {\n          name: 'Pahawh_Hmong',\n          astral: \"\\uD81A[\\uDF00-\\uDF45\\uDF50-\\uDF59\\uDF5B-\\uDF61\\uDF63-\\uDF77\\uDF7D-\\uDF8F]\"\n        }, {\n          name: 'Palmyrene',\n          astral: \"\\uD802[\\uDC60-\\uDC7F]\"\n        }, {\n          name: 'Pau_Cin_Hau',\n          astral: \"\\uD806[\\uDEC0-\\uDEF8]\"\n        }, {\n          name: 'Phags_Pa',\n          bmp: \"\\uA840-\\uA877\"\n        }, {\n          name: 'Phoenician',\n          astral: \"\\uD802[\\uDD00-\\uDD1B\\uDD1F]\"\n        }, {\n          name: 'Psalter_Pahlavi',\n          astral: \"\\uD802[\\uDF80-\\uDF91\\uDF99-\\uDF9C\\uDFA9-\\uDFAF]\"\n        }, {\n          name: 'Rejang',\n          bmp: \"\\uA930-\\uA953\\uA95F\"\n        }, {\n          name: 'Runic',\n          bmp: \"\\u16A0-\\u16EA\\u16EE-\\u16F8\"\n        }, {\n          name: 'Samaritan',\n          bmp: \"\\u0800-\\u082D\\u0830-\\u083E\"\n        }, {\n          name: 'Saurashtra',\n          bmp: \"\\uA880-\\uA8C5\\uA8CE-\\uA8D9\"\n        }, {\n          name: 'Sharada',\n          astral: \"\\uD804[\\uDD80-\\uDDCD\\uDDD0-\\uDDDF]\"\n        }, {\n          name: 'Shavian',\n          astral: \"\\uD801[\\uDC50-\\uDC7F]\"\n        }, {\n          name: 'Siddham',\n          astral: \"\\uD805[\\uDD80-\\uDDB5\\uDDB8-\\uDDDD]\"\n        }, {\n          name: 'SignWriting',\n          astral: \"\\uD836[\\uDC00-\\uDE8B\\uDE9B-\\uDE9F\\uDEA1-\\uDEAF]\"\n        }, {\n          name: 'Sinhala',\n          bmp: \"\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2-\\u0DF4\",\n          astral: \"\\uD804[\\uDDE1-\\uDDF4]\"\n        }, {\n          name: 'Sora_Sompeng',\n          astral: \"\\uD804[\\uDCD0-\\uDCE8\\uDCF0-\\uDCF9]\"\n        }, {\n          name: 'Sundanese',\n          bmp: \"\\u1B80-\\u1BBF\\u1CC0-\\u1CC7\"\n        }, {\n          name: 'Syloti_Nagri',\n          bmp: \"\\uA800-\\uA82B\"\n        }, {\n          name: 'Syriac',\n          bmp: \"\\u0700-\\u070D\\u070F-\\u074A\\u074D-\\u074F\"\n        }, {\n          name: 'Tagalog',\n          bmp: \"\\u1700-\\u170C\\u170E-\\u1714\"\n        }, {\n          name: 'Tagbanwa',\n          bmp: \"\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\"\n        }, {\n          name: 'Tai_Le',\n          bmp: \"\\u1950-\\u196D\\u1970-\\u1974\"\n        }, {\n          name: 'Tai_Tham',\n          bmp: \"\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA0-\\u1AAD\"\n        }, {\n          name: 'Tai_Viet',\n          bmp: \"\\uAA80-\\uAAC2\\uAADB-\\uAADF\"\n        }, {\n          name: 'Takri',\n          astral: \"\\uD805[\\uDE80-\\uDEB7\\uDEC0-\\uDEC9]\"\n        }, {\n          name: 'Tamil',\n          bmp: \"\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BFA\"\n        }, {\n          name: 'Tangut',\n          astral: \"\\uD81B\\uDFE0|[\\uD81C-\\uD820][\\uDC00-\\uDFFF]|\\uD821[\\uDC00-\\uDFEC]|\\uD822[\\uDC00-\\uDEF2]\"\n        }, {\n          name: 'Telugu',\n          bmp: \"\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58-\\u0C5A\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C78-\\u0C7F\"\n        }, {\n          name: 'Thaana',\n          bmp: \"\\u0780-\\u07B1\"\n        }, {\n          name: 'Thai',\n          bmp: \"\\u0E01-\\u0E3A\\u0E40-\\u0E5B\"\n        }, {\n          name: 'Tibetan',\n          bmp: \"\\u0F00-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F97\\u0F99-\\u0FBC\\u0FBE-\\u0FCC\\u0FCE-\\u0FD4\\u0FD9\\u0FDA\"\n        }, {\n          name: 'Tifinagh',\n          bmp: \"\\u2D30-\\u2D67\\u2D6F\\u2D70\\u2D7F\"\n        }, {\n          name: 'Tirhuta',\n          astral: \"\\uD805[\\uDC80-\\uDCC7\\uDCD0-\\uDCD9]\"\n        }, {\n          name: 'Ugaritic',\n          astral: \"\\uD800[\\uDF80-\\uDF9D\\uDF9F]\"\n        }, {\n          name: 'Vai',\n          bmp: \"\\uA500-\\uA62B\"\n        }, {\n          name: 'Warang_Citi',\n          astral: \"\\uD806[\\uDCA0-\\uDCF2\\uDCFF]\"\n        }, {\n          name: 'Yi',\n          bmp: \"\\uA000-\\uA48C\\uA490-\\uA4C6\"\n        }]);\n      };\n      module.exports = exports['default'];\n    }, {}],\n    8: [function (require, module, exports) {\n      'use strict';\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      var _xregexp = require('./xregexp');\n      var _xregexp2 = _interopRequireDefault(_xregexp);\n      var _build = require('./addons/build');\n      var _build2 = _interopRequireDefault(_build);\n      var _matchrecursive = require('./addons/matchrecursive');\n      var _matchrecursive2 = _interopRequireDefault(_matchrecursive);\n      var _unicodeBase = require('./addons/unicode-base');\n      var _unicodeBase2 = _interopRequireDefault(_unicodeBase);\n      var _unicodeBlocks = require('./addons/unicode-blocks');\n      var _unicodeBlocks2 = _interopRequireDefault(_unicodeBlocks);\n      var _unicodeCategories = require('./addons/unicode-categories');\n      var _unicodeCategories2 = _interopRequireDefault(_unicodeCategories);\n      var _unicodeProperties = require('./addons/unicode-properties');\n      var _unicodeProperties2 = _interopRequireDefault(_unicodeProperties);\n      var _unicodeScripts = require('./addons/unicode-scripts');\n      var _unicodeScripts2 = _interopRequireDefault(_unicodeScripts);\n      function _interopRequireDefault(obj) {\n        return obj && obj.__esModule ? obj : {\n          \"default\": obj\n        };\n      }\n      (0, _build2[\"default\"])(_xregexp2[\"default\"]);\n      (0, _matchrecursive2[\"default\"])(_xregexp2[\"default\"]);\n      (0, _unicodeBase2[\"default\"])(_xregexp2[\"default\"]);\n      (0, _unicodeBlocks2[\"default\"])(_xregexp2[\"default\"]);\n      (0, _unicodeCategories2[\"default\"])(_xregexp2[\"default\"]);\n      (0, _unicodeProperties2[\"default\"])(_xregexp2[\"default\"]);\n      (0, _unicodeScripts2[\"default\"])(_xregexp2[\"default\"]);\n      exports[\"default\"] = _xregexp2[\"default\"];\n      module.exports = exports['default'];\n    }, {\n      \"./addons/build\": 1,\n      \"./addons/matchrecursive\": 2,\n      \"./addons/unicode-base\": 3,\n      \"./addons/unicode-blocks\": 4,\n      \"./addons/unicode-categories\": 5,\n      \"./addons/unicode-properties\": 6,\n      \"./addons/unicode-scripts\": 7,\n      \"./xregexp\": 9\n    }],\n    9: [function (require, module, exports) {\n      'use strict';\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      /*!\n       * XRegExp 4.0.0\n       * <xregexp.com>\n       * Steven Levithan (c) 2007-2017 MIT License\n       */\n\n      /**\n       * XRegExp provides augmented, extensible regular expressions. You get additional regex syntax and\n       * flags, beyond what browsers support natively. XRegExp is also a regex utility belt with tools to\n       * make your client-side grepping simpler and more powerful, while freeing you from related\n       * cross-browser inconsistencies.\n       */\n\n      // ==--------------------------==\n      // Private stuff\n      // ==--------------------------==\n\n      // Property name used for extended regex instance data\n      var REGEX_DATA = 'xregexp';\n      // Optional features that can be installed and uninstalled\n      var features = {\n        astral: false\n      };\n      // Native methods to use and restore ('native' is an ES3 reserved keyword)\n      var nativ = {\n        exec: RegExp.prototype.exec,\n        test: RegExp.prototype.test,\n        match: String.prototype.match,\n        replace: String.prototype.replace,\n        split: String.prototype.split\n      };\n      // Storage for fixed/extended native methods\n      var fixed = {};\n      // Storage for regexes cached by `XRegExp.cache`\n      var regexCache = {};\n      // Storage for pattern details cached by the `XRegExp` constructor\n      var patternCache = {};\n      // Storage for regex syntax tokens added internally or by `XRegExp.addToken`\n      var tokens = [];\n      // Token scopes\n      var defaultScope = 'default';\n      var classScope = 'class';\n      // Regexes that match native regex syntax, including octals\n      var nativeTokens = {\n        // Any native multicharacter token in default scope, or any single character\n        'default': /\\\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9]\\d*|x[\\dA-Fa-f]{2}|u(?:[\\dA-Fa-f]{4}|{[\\dA-Fa-f]+})|c[A-Za-z]|[\\s\\S])|\\(\\?(?:[:=!]|<[=!])|[?*+]\\?|{\\d+(?:,\\d*)?}\\??|[\\s\\S]/,\n        // Any native multicharacter token in character class scope, or any single character\n        'class': /\\\\(?:[0-3][0-7]{0,2}|[4-7][0-7]?|x[\\dA-Fa-f]{2}|u(?:[\\dA-Fa-f]{4}|{[\\dA-Fa-f]+})|c[A-Za-z]|[\\s\\S])|[\\s\\S]/\n      };\n      // Any backreference or dollar-prefixed character in replacement strings\n      var replacementToken = /\\$(?:{([\\w$]+)}|<([\\w$]+)>|(\\d\\d?|[\\s\\S]))/g;\n      // Check for correct `exec` handling of nonparticipating capturing groups\n      var correctExecNpcg = nativ.exec.call(/()??/, '')[1] === undefined;\n      // Check for ES6 `flags` prop support\n      var hasFlagsProp = /x/.flags !== undefined;\n      // Shortcut to `Object.prototype.toString`\n      var toString = {}.toString;\n      function hasNativeFlag(flag) {\n        // Can't check based on the presence of properties/getters since browsers might support such\n        // properties even when they don't support the corresponding flag in regex construction (tested\n        // in Chrome 48, where `'unicode' in /x/` is true but trying to construct a regex with flag `u`\n        // throws an error)\n        var isSupported = true;\n        try {\n          // Can't use regex literals for testing even in a `try` because regex literals with\n          // unsupported flags cause a compilation error in IE\n          new RegExp('', flag);\n        } catch (exception) {\n          isSupported = false;\n        }\n        return isSupported;\n      }\n      // Check for ES6 `u` flag support\n      var hasNativeU = hasNativeFlag('u');\n      // Check for ES6 `y` flag support\n      var hasNativeY = hasNativeFlag('y');\n      // Tracker for known flags, including addon flags\n      var registeredFlags = {\n        g: true,\n        i: true,\n        m: true,\n        u: hasNativeU,\n        y: hasNativeY\n      };\n\n      /**\n       * Attaches extended data and `XRegExp.prototype` properties to a regex object.\n       *\n       * @private\n       * @param {RegExp} regex Regex to augment.\n       * @param {Array} captureNames Array with capture names, or `null`.\n       * @param {String} xSource XRegExp pattern used to generate `regex`, or `null` if N/A.\n       * @param {String} xFlags XRegExp flags used to generate `regex`, or `null` if N/A.\n       * @param {Boolean} [isInternalOnly=false] Whether the regex will be used only for internal\n       *   operations, and never exposed to users. For internal-only regexes, we can improve perf by\n       *   skipping some operations like attaching `XRegExp.prototype` properties.\n       * @returns {RegExp} Augmented regex.\n       */\n      function augment(regex, captureNames, xSource, xFlags, isInternalOnly) {\n        var p = void 0;\n        regex[REGEX_DATA] = {\n          captureNames: captureNames\n        };\n        if (isInternalOnly) {\n          return regex;\n        }\n\n        // Can't auto-inherit these since the XRegExp constructor returns a nonprimitive value\n        if (regex.__proto__) {\n          regex.__proto__ = XRegExp.prototype;\n        } else {\n          for (p in XRegExp.prototype) {\n            // An `XRegExp.prototype.hasOwnProperty(p)` check wouldn't be worth it here, since this\n            // is performance sensitive, and enumerable `Object.prototype` or `RegExp.prototype`\n            // extensions exist on `regex.prototype` anyway\n            regex[p] = XRegExp.prototype[p];\n          }\n        }\n        regex[REGEX_DATA].source = xSource;\n        // Emulate the ES6 `flags` prop by ensuring flags are in alphabetical order\n        regex[REGEX_DATA].flags = xFlags ? xFlags.split('').sort().join('') : xFlags;\n        return regex;\n      }\n\n      /**\n       * Removes any duplicate characters from the provided string.\n       *\n       * @private\n       * @param {String} str String to remove duplicate characters from.\n       * @returns {String} String with any duplicate characters removed.\n       */\n      function clipDuplicates(str) {\n        return nativ.replace.call(str, /([\\s\\S])(?=[\\s\\S]*\\1)/g, '');\n      }\n\n      /**\n       * Copies a regex object while preserving extended data and augmenting with `XRegExp.prototype`\n       * properties. The copy has a fresh `lastIndex` property (set to zero). Allows adding and removing\n       * flags g and y while copying the regex.\n       *\n       * @private\n       * @param {RegExp} regex Regex to copy.\n       * @param {Object} [options] Options object with optional properties:\n       *   - `addG` {Boolean} Add flag g while copying the regex.\n       *   - `addY` {Boolean} Add flag y while copying the regex.\n       *   - `removeG` {Boolean} Remove flag g while copying the regex.\n       *   - `removeY` {Boolean} Remove flag y while copying the regex.\n       *   - `isInternalOnly` {Boolean} Whether the copied regex will be used only for internal\n       *     operations, and never exposed to users. For internal-only regexes, we can improve perf by\n       *     skipping some operations like attaching `XRegExp.prototype` properties.\n       *   - `source` {String} Overrides `<regex>.source`, for special cases.\n       * @returns {RegExp} Copy of the provided regex, possibly with modified flags.\n       */\n      function copyRegex(regex, options) {\n        if (!XRegExp.isRegExp(regex)) {\n          throw new TypeError('Type RegExp expected');\n        }\n        var xData = regex[REGEX_DATA] || {};\n        var flags = getNativeFlags(regex);\n        var flagsToAdd = '';\n        var flagsToRemove = '';\n        var xregexpSource = null;\n        var xregexpFlags = null;\n        options = options || {};\n        if (options.removeG) {\n          flagsToRemove += 'g';\n        }\n        if (options.removeY) {\n          flagsToRemove += 'y';\n        }\n        if (flagsToRemove) {\n          flags = nativ.replace.call(flags, new RegExp('[' + flagsToRemove + ']+', 'g'), '');\n        }\n        if (options.addG) {\n          flagsToAdd += 'g';\n        }\n        if (options.addY) {\n          flagsToAdd += 'y';\n        }\n        if (flagsToAdd) {\n          flags = clipDuplicates(flags + flagsToAdd);\n        }\n        if (!options.isInternalOnly) {\n          if (xData.source !== undefined) {\n            xregexpSource = xData.source;\n          }\n          // null or undefined; don't want to add to `flags` if the previous value was null, since\n          // that indicates we're not tracking original precompilation flags\n          if (xData.flags != null) {\n            // Flags are only added for non-internal regexes by `XRegExp.globalize`. Flags are never\n            // removed for non-internal regexes, so don't need to handle it\n            xregexpFlags = flagsToAdd ? clipDuplicates(xData.flags + flagsToAdd) : xData.flags;\n          }\n        }\n\n        // Augment with `XRegExp.prototype` properties, but use the native `RegExp` constructor to avoid\n        // searching for special tokens. That would be wrong for regexes constructed by `RegExp`, and\n        // unnecessary for regexes constructed by `XRegExp` because the regex has already undergone the\n        // translation to native regex syntax\n        regex = augment(new RegExp(options.source || regex.source, flags), hasNamedCapture(regex) ? xData.captureNames.slice(0) : null, xregexpSource, xregexpFlags, options.isInternalOnly);\n        return regex;\n      }\n\n      /**\n       * Converts hexadecimal to decimal.\n       *\n       * @private\n       * @param {String} hex\n       * @returns {Number}\n       */\n      function dec(hex) {\n        return parseInt(hex, 16);\n      }\n\n      /**\n       * Returns a pattern that can be used in a native RegExp in place of an ignorable token such as an\n       * inline comment or whitespace with flag x. This is used directly as a token handler function\n       * passed to `XRegExp.addToken`.\n       *\n       * @private\n       * @param {String} match Match arg of `XRegExp.addToken` handler\n       * @param {String} scope Scope arg of `XRegExp.addToken` handler\n       * @param {String} flags Flags arg of `XRegExp.addToken` handler\n       * @returns {String} Either '' or '(?:)', depending on which is needed in the context of the match.\n       */\n      function getContextualTokenSeparator(match, scope, flags) {\n        if (\n        // No need to separate tokens if at the beginning or end of a group\n        match.input[match.index - 1] === '(' || match.input[match.index + match[0].length] === ')' ||\n        // Avoid separating tokens when the following token is a quantifier\n        isQuantifierNext(match.input, match.index + match[0].length, flags)) {\n          return '';\n        }\n        // Keep tokens separated. This avoids e.g. inadvertedly changing `\\1 1` or `\\1(?#)1` to `\\11`.\n        // This also ensures all tokens remain as discrete atoms, e.g. it avoids converting the syntax\n        // error `(? :` into `(?:`.\n        return '(?:)';\n      }\n\n      /**\n       * Returns native `RegExp` flags used by a regex object.\n       *\n       * @private\n       * @param {RegExp} regex Regex to check.\n       * @returns {String} Native flags in use.\n       */\n      function getNativeFlags(regex) {\n        return hasFlagsProp ? regex.flags :\n        // Explicitly using `RegExp.prototype.toString` (rather than e.g. `String` or concatenation\n        // with an empty string) allows this to continue working predictably when\n        // `XRegExp.proptotype.toString` is overridden\n        nativ.exec.call(/\\/([a-z]*)$/i, RegExp.prototype.toString.call(regex))[1];\n      }\n\n      /**\n       * Determines whether a regex has extended instance data used to track capture names.\n       *\n       * @private\n       * @param {RegExp} regex Regex to check.\n       * @returns {Boolean} Whether the regex uses named capture.\n       */\n      function hasNamedCapture(regex) {\n        return !!(regex[REGEX_DATA] && regex[REGEX_DATA].captureNames);\n      }\n\n      /**\n       * Converts decimal to hexadecimal.\n       *\n       * @private\n       * @param {Number|String} dec\n       * @returns {String}\n       */\n      function hex(dec) {\n        return parseInt(dec, 10).toString(16);\n      }\n\n      /**\n       * Checks whether the next nonignorable token after the specified position is a quantifier.\n       *\n       * @private\n       * @param {String} pattern Pattern to search within.\n       * @param {Number} pos Index in `pattern` to search at.\n       * @param {String} flags Flags used by the pattern.\n       * @returns {Boolean} Whether the next nonignorable token is a quantifier.\n       */\n      function isQuantifierNext(pattern, pos, flags) {\n        var inlineCommentPattern = '\\\\(\\\\?#[^)]*\\\\)';\n        var lineCommentPattern = '#[^#\\\\n]*';\n        var quantifierPattern = '[?*+]|{\\\\d+(?:,\\\\d*)?}';\n        return nativ.test.call(flags.indexOf('x') !== -1 ?\n        // Ignore any leading whitespace, line comments, and inline comments\n        /^(?:\\s|#[^#\\n]*|\\(\\?#[^)]*\\))*(?:[?*+]|{\\d+(?:,\\d*)?})/ :\n        // Ignore any leading inline comments\n        /^(?:\\(\\?#[^)]*\\))*(?:[?*+]|{\\d+(?:,\\d*)?})/, pattern.slice(pos));\n      }\n\n      /**\n       * Determines whether a value is of the specified type, by resolving its internal [[Class]].\n       *\n       * @private\n       * @param {*} value Object to check.\n       * @param {String} type Type to check for, in TitleCase.\n       * @returns {Boolean} Whether the object matches the type.\n       */\n      function isType(value, type) {\n        return toString.call(value) === '[object ' + type + ']';\n      }\n\n      /**\n       * Adds leading zeros if shorter than four characters. Used for fixed-length hexadecimal values.\n       *\n       * @private\n       * @param {String} str\n       * @returns {String}\n       */\n      function pad4(str) {\n        while (str.length < 4) {\n          str = '0' + str;\n        }\n        return str;\n      }\n\n      /**\n       * Checks for flag-related errors, and strips/applies flags in a leading mode modifier. Offloads\n       * the flag preparation logic from the `XRegExp` constructor.\n       *\n       * @private\n       * @param {String} pattern Regex pattern, possibly with a leading mode modifier.\n       * @param {String} flags Any combination of flags.\n       * @returns {Object} Object with properties `pattern` and `flags`.\n       */\n      function prepareFlags(pattern, flags) {\n        var i = void 0;\n\n        // Recent browsers throw on duplicate flags, so copy this behavior for nonnative flags\n        if (clipDuplicates(flags) !== flags) {\n          throw new SyntaxError('Invalid duplicate regex flag ' + flags);\n        }\n\n        // Strip and apply a leading mode modifier with any combination of flags except g or y\n        pattern = nativ.replace.call(pattern, /^\\(\\?([\\w$]+)\\)/, function ($0, $1) {\n          if (nativ.test.call(/[gy]/, $1)) {\n            throw new SyntaxError('Cannot use flag g or y in mode modifier ' + $0);\n          }\n          // Allow duplicate flags within the mode modifier\n          flags = clipDuplicates(flags + $1);\n          return '';\n        });\n\n        // Throw on unknown native or nonnative flags\n        for (i = 0; i < flags.length; ++i) {\n          if (!registeredFlags[flags[i]]) {\n            throw new SyntaxError('Unknown regex flag ' + flags[i]);\n          }\n        }\n        return {\n          pattern: pattern,\n          flags: flags\n        };\n      }\n\n      /**\n       * Prepares an options object from the given value.\n       *\n       * @private\n       * @param {String|Object} value Value to convert to an options object.\n       * @returns {Object} Options object.\n       */\n      function prepareOptions(value) {\n        var options = {};\n        if (isType(value, 'String')) {\n          XRegExp.forEach(value, /[^\\s,]+/, function (match) {\n            options[match] = true;\n          });\n          return options;\n        }\n        return value;\n      }\n\n      /**\n       * Registers a flag so it doesn't throw an 'unknown flag' error.\n       *\n       * @private\n       * @param {String} flag Single-character flag to register.\n       */\n      function registerFlag(flag) {\n        if (!/^[\\w$]$/.test(flag)) {\n          throw new Error('Flag must be a single character A-Za-z0-9_$');\n        }\n        registeredFlags[flag] = true;\n      }\n\n      /**\n       * Runs built-in and custom regex syntax tokens in reverse insertion order at the specified\n       * position, until a match is found.\n       *\n       * @private\n       * @param {String} pattern Original pattern from which an XRegExp object is being built.\n       * @param {String} flags Flags being used to construct the regex.\n       * @param {Number} pos Position to search for tokens within `pattern`.\n       * @param {Number} scope Regex scope to apply: 'default' or 'class'.\n       * @param {Object} context Context object to use for token handler functions.\n       * @returns {Object} Object with properties `matchLength`, `output`, and `reparse`; or `null`.\n       */\n      function runTokens(pattern, flags, pos, scope, context) {\n        var i = tokens.length;\n        var leadChar = pattern[pos];\n        var result = null;\n        var match = void 0;\n        var t = void 0;\n\n        // Run in reverse insertion order\n        while (i--) {\n          t = tokens[i];\n          if (t.leadChar && t.leadChar !== leadChar || t.scope !== scope && t.scope !== 'all' || t.flag && !(flags.indexOf(t.flag) !== -1)) {\n            continue;\n          }\n          match = XRegExp.exec(pattern, t.regex, pos, 'sticky');\n          if (match) {\n            result = {\n              matchLength: match[0].length,\n              output: t.handler.call(context, match, scope, flags),\n              reparse: t.reparse\n            };\n            // Finished with token tests\n            break;\n          }\n        }\n        return result;\n      }\n\n      /**\n       * Enables or disables implicit astral mode opt-in. When enabled, flag A is automatically added to\n       * all new regexes created by XRegExp. This causes an error to be thrown when creating regexes if\n       * the Unicode Base addon is not available, since flag A is registered by that addon.\n       *\n       * @private\n       * @param {Boolean} on `true` to enable; `false` to disable.\n       */\n      function setAstral(on) {\n        features.astral = on;\n      }\n\n      /**\n       * Returns the object, or throws an error if it is `null` or `undefined`. This is used to follow\n       * the ES5 abstract operation `ToObject`.\n       *\n       * @private\n       * @param {*} value Object to check and return.\n       * @returns {*} The provided object.\n       */\n      function toObject(value) {\n        // null or undefined\n        if (value == null) {\n          throw new TypeError('Cannot convert null or undefined to object');\n        }\n        return value;\n      }\n\n      // ==--------------------------==\n      // Constructor\n      // ==--------------------------==\n\n      /**\n       * Creates an extended regular expression object for matching text with a pattern. Differs from a\n       * native regular expression in that additional syntax and flags are supported. The returned object\n       * is in fact a native `RegExp` and works with all native methods.\n       *\n       * @class XRegExp\n       * @constructor\n       * @param {String|RegExp} pattern Regex pattern string, or an existing regex object to copy.\n       * @param {String} [flags] Any combination of flags.\n       *   Native flags:\n       *     - `g` - global\n       *     - `i` - ignore case\n       *     - `m` - multiline anchors\n       *     - `u` - unicode (ES6)\n       *     - `y` - sticky (Firefox 3+, ES6)\n       *   Additional XRegExp flags:\n       *     - `n` - explicit capture\n       *     - `s` - dot matches all (aka singleline)\n       *     - `x` - free-spacing and line comments (aka extended)\n       *     - `A` - astral (requires the Unicode Base addon)\n       *   Flags cannot be provided when constructing one `RegExp` from another.\n       * @returns {RegExp} Extended regular expression object.\n       * @example\n       *\n       * // With named capture and flag x\n       * XRegExp(`(?<year>  [0-9]{4} ) -?  # year\n       *          (?<month> [0-9]{2} ) -?  # month\n       *          (?<day>   [0-9]{2} )     # day`, 'x');\n       *\n       * // Providing a regex object copies it. Native regexes are recompiled using native (not XRegExp)\n       * // syntax. Copies maintain extended data, are augmented with `XRegExp.prototype` properties, and\n       * // have fresh `lastIndex` properties (set to zero).\n       * XRegExp(/regex/);\n       */\n      function XRegExp(pattern, flags) {\n        if (XRegExp.isRegExp(pattern)) {\n          if (flags !== undefined) {\n            throw new TypeError('Cannot supply flags when copying a RegExp');\n          }\n          return copyRegex(pattern);\n        }\n\n        // Copy the argument behavior of `RegExp`\n        pattern = pattern === undefined ? '' : String(pattern);\n        flags = flags === undefined ? '' : String(flags);\n        if (XRegExp.isInstalled('astral') && !(flags.indexOf('A') !== -1)) {\n          // This causes an error to be thrown if the Unicode Base addon is not available\n          flags += 'A';\n        }\n        if (!patternCache[pattern]) {\n          patternCache[pattern] = {};\n        }\n        if (!patternCache[pattern][flags]) {\n          var context = {\n            hasNamedCapture: false,\n            captureNames: []\n          };\n          var scope = defaultScope;\n          var output = '';\n          var pos = 0;\n          var result = void 0;\n\n          // Check for flag-related errors, and strip/apply flags in a leading mode modifier\n          var applied = prepareFlags(pattern, flags);\n          var appliedPattern = applied.pattern;\n          var appliedFlags = applied.flags;\n\n          // Use XRegExp's tokens to translate the pattern to a native regex pattern.\n          // `appliedPattern.length` may change on each iteration if tokens use `reparse`\n          while (pos < appliedPattern.length) {\n            do {\n              // Check for custom tokens at the current position\n              result = runTokens(appliedPattern, appliedFlags, pos, scope, context);\n              // If the matched token used the `reparse` option, splice its output into the\n              // pattern before running tokens again at the same position\n              if (result && result.reparse) {\n                appliedPattern = appliedPattern.slice(0, pos) + result.output + appliedPattern.slice(pos + result.matchLength);\n              }\n            } while (result && result.reparse);\n            if (result) {\n              output += result.output;\n              pos += result.matchLength || 1;\n            } else {\n              // Get the native token at the current position\n              var token = XRegExp.exec(appliedPattern, nativeTokens[scope], pos, 'sticky')[0];\n              output += token;\n              pos += token.length;\n              if (token === '[' && scope === defaultScope) {\n                scope = classScope;\n              } else if (token === ']' && scope === classScope) {\n                scope = defaultScope;\n              }\n            }\n          }\n          patternCache[pattern][flags] = {\n            // Use basic cleanup to collapse repeated empty groups like `(?:)(?:)` to `(?:)`. Empty\n            // groups are sometimes inserted during regex transpilation in order to keep tokens\n            // separated. However, more than one empty group in a row is never needed.\n            pattern: nativ.replace.call(output, /(?:\\(\\?:\\))+/g, '(?:)'),\n            // Strip all but native flags\n            flags: nativ.replace.call(appliedFlags, /[^gimuy]+/g, ''),\n            // `context.captureNames` has an item for each capturing group, even if unnamed\n            captures: context.hasNamedCapture ? context.captureNames : null\n          };\n        }\n        var generated = patternCache[pattern][flags];\n        return augment(new RegExp(generated.pattern, generated.flags), generated.captures, pattern, flags);\n      }\n\n      // Add `RegExp.prototype` to the prototype chain\n      XRegExp.prototype = /(?:)/;\n\n      // ==--------------------------==\n      // Public properties\n      // ==--------------------------==\n\n      /**\n       * The XRegExp version number as a string containing three dot-separated parts. For example,\n       * '2.0.0-beta-3'.\n       *\n       * @static\n       * @memberOf XRegExp\n       * @type String\n       */\n      XRegExp.version = '4.0.0';\n\n      // ==--------------------------==\n      // Public methods\n      // ==--------------------------==\n\n      // Intentionally undocumented; used in tests and addons\n      XRegExp._clipDuplicates = clipDuplicates;\n      XRegExp._hasNativeFlag = hasNativeFlag;\n      XRegExp._dec = dec;\n      XRegExp._hex = hex;\n      XRegExp._pad4 = pad4;\n\n      /**\n       * Extends XRegExp syntax and allows custom flags. This is used internally and can be used to\n       * create XRegExp addons. If more than one token can match the same string, the last added wins.\n       *\n       * @memberOf XRegExp\n       * @param {RegExp} regex Regex object that matches the new token.\n       * @param {Function} handler Function that returns a new pattern string (using native regex syntax)\n       *   to replace the matched token within all future XRegExp regexes. Has access to persistent\n       *   properties of the regex being built, through `this`. Invoked with three arguments:\n       *   - The match array, with named backreference properties.\n       *   - The regex scope where the match was found: 'default' or 'class'.\n       *   - The flags used by the regex, including any flags in a leading mode modifier.\n       *   The handler function becomes part of the XRegExp construction process, so be careful not to\n       *   construct XRegExps within the function or you will trigger infinite recursion.\n       * @param {Object} [options] Options object with optional properties:\n       *   - `scope` {String} Scope where the token applies: 'default', 'class', or 'all'.\n       *   - `flag` {String} Single-character flag that triggers the token. This also registers the\n       *     flag, which prevents XRegExp from throwing an 'unknown flag' error when the flag is used.\n       *   - `optionalFlags` {String} Any custom flags checked for within the token `handler` that are\n       *     not required to trigger the token. This registers the flags, to prevent XRegExp from\n       *     throwing an 'unknown flag' error when any of the flags are used.\n       *   - `reparse` {Boolean} Whether the `handler` function's output should not be treated as\n       *     final, and instead be reparseable by other tokens (including the current token). Allows\n       *     token chaining or deferring.\n       *   - `leadChar` {String} Single character that occurs at the beginning of any successful match\n       *     of the token (not always applicable). This doesn't change the behavior of the token unless\n       *     you provide an erroneous value. However, providing it can increase the token's performance\n       *     since the token can be skipped at any positions where this character doesn't appear.\n       * @example\n       *\n       * // Basic usage: Add \\a for the ALERT control code\n       * XRegExp.addToken(\n       *   /\\\\a/,\n       *   () => '\\\\x07',\n       *   {scope: 'all'}\n       * );\n       * XRegExp('\\\\a[\\\\a-\\\\n]+').test('\\x07\\n\\x07'); // -> true\n       *\n       * // Add the U (ungreedy) flag from PCRE and RE2, which reverses greedy and lazy quantifiers.\n       * // Since `scope` is not specified, it uses 'default' (i.e., transformations apply outside of\n       * // character classes only)\n       * XRegExp.addToken(\n       *   /([?*+]|{\\d+(?:,\\d*)?})(\\??)/,\n       *   (match) => `${match[1]}${match[2] ? '' : '?'}`,\n       *   {flag: 'U'}\n       * );\n       * XRegExp('a+', 'U').exec('aaa')[0]; // -> 'a'\n       * XRegExp('a+?', 'U').exec('aaa')[0]; // -> 'aaa'\n       */\n      XRegExp.addToken = function (regex, handler, options) {\n        options = options || {};\n        var optionalFlags = options.optionalFlags;\n        var i = void 0;\n        if (options.flag) {\n          registerFlag(options.flag);\n        }\n        if (optionalFlags) {\n          optionalFlags = nativ.split.call(optionalFlags, '');\n          for (i = 0; i < optionalFlags.length; ++i) {\n            registerFlag(optionalFlags[i]);\n          }\n        }\n\n        // Add to the private list of syntax tokens\n        tokens.push({\n          regex: copyRegex(regex, {\n            addG: true,\n            addY: hasNativeY,\n            isInternalOnly: true\n          }),\n          handler: handler,\n          scope: options.scope || defaultScope,\n          flag: options.flag,\n          reparse: options.reparse,\n          leadChar: options.leadChar\n        });\n\n        // Reset the pattern cache used by the `XRegExp` constructor, since the same pattern and flags\n        // might now produce different results\n        XRegExp.cache.flush('patterns');\n      };\n\n      /**\n       * Caches and returns the result of calling `XRegExp(pattern, flags)`. On any subsequent call with\n       * the same pattern and flag combination, the cached copy of the regex is returned.\n       *\n       * @memberOf XRegExp\n       * @param {String} pattern Regex pattern string.\n       * @param {String} [flags] Any combination of XRegExp flags.\n       * @returns {RegExp} Cached XRegExp object.\n       * @example\n       *\n       * while (match = XRegExp.cache('.', 'gs').exec(str)) {\n       *   // The regex is compiled once only\n       * }\n       */\n      XRegExp.cache = function (pattern, flags) {\n        if (!regexCache[pattern]) {\n          regexCache[pattern] = {};\n        }\n        return regexCache[pattern][flags] || (regexCache[pattern][flags] = XRegExp(pattern, flags));\n      };\n\n      // Intentionally undocumented; used in tests\n      XRegExp.cache.flush = function (cacheName) {\n        if (cacheName === 'patterns') {\n          // Flush the pattern cache used by the `XRegExp` constructor\n          patternCache = {};\n        } else {\n          // Flush the regex cache populated by `XRegExp.cache`\n          regexCache = {};\n        }\n      };\n\n      /**\n       * Escapes any regular expression metacharacters, for use when matching literal strings. The result\n       * can safely be used at any point within a regex that uses any flags.\n       *\n       * @memberOf XRegExp\n       * @param {String} str String to escape.\n       * @returns {String} String with regex metacharacters escaped.\n       * @example\n       *\n       * XRegExp.escape('Escaped? <.>');\n       * // -> 'Escaped\\?\\ <\\.>'\n       */\n      XRegExp.escape = function (str) {\n        return nativ.replace.call(toObject(str), /[-\\[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&');\n      };\n\n      /**\n       * Executes a regex search in a specified string. Returns a match array or `null`. If the provided\n       * regex uses named capture, named backreference properties are included on the match array.\n       * Optional `pos` and `sticky` arguments specify the search start position, and whether the match\n       * must start at the specified position only. The `lastIndex` property of the provided regex is not\n       * used, but is updated for compatibility. Also fixes browser bugs compared to the native\n       * `RegExp.prototype.exec` and can be used reliably cross-browser.\n       *\n       * @memberOf XRegExp\n       * @param {String} str String to search.\n       * @param {RegExp} regex Regex to search with.\n       * @param {Number} [pos=0] Zero-based index at which to start the search.\n       * @param {Boolean|String} [sticky=false] Whether the match must start at the specified position\n       *   only. The string `'sticky'` is accepted as an alternative to `true`.\n       * @returns {Array} Match array with named backreference properties, or `null`.\n       * @example\n       *\n       * // Basic use, with named backreference\n       * let match = XRegExp.exec('U+2620', XRegExp('U\\\\+(?<hex>[0-9A-F]{4})'));\n       * match.hex; // -> '2620'\n       *\n       * // With pos and sticky, in a loop\n       * let pos = 2, result = [], match;\n       * while (match = XRegExp.exec('<1><2><3><4>5<6>', /<(\\d)>/, pos, 'sticky')) {\n       *   result.push(match[1]);\n       *   pos = match.index + match[0].length;\n       * }\n       * // result -> ['2', '3', '4']\n       */\n      XRegExp.exec = function (str, regex, pos, sticky) {\n        var cacheKey = 'g';\n        var addY = false;\n        var fakeY = false;\n        var match = void 0;\n        addY = hasNativeY && !!(sticky || regex.sticky && sticky !== false);\n        if (addY) {\n          cacheKey += 'y';\n        } else if (sticky) {\n          // Simulate sticky matching by appending an empty capture to the original regex. The\n          // resulting regex will succeed no matter what at the current index (set with `lastIndex`),\n          // and will not search the rest of the subject string. We'll know that the original regex\n          // has failed if that last capture is `''` rather than `undefined` (i.e., if that last\n          // capture participated in the match).\n          fakeY = true;\n          cacheKey += 'FakeY';\n        }\n        regex[REGEX_DATA] = regex[REGEX_DATA] || {};\n\n        // Shares cached copies with `XRegExp.match`/`replace`\n        var r2 = regex[REGEX_DATA][cacheKey] || (regex[REGEX_DATA][cacheKey] = copyRegex(regex, {\n          addG: true,\n          addY: addY,\n          source: fakeY ? regex.source + '|()' : undefined,\n          removeY: sticky === false,\n          isInternalOnly: true\n        }));\n        pos = pos || 0;\n        r2.lastIndex = pos;\n\n        // Fixed `exec` required for `lastIndex` fix, named backreferences, etc.\n        match = fixed.exec.call(r2, str);\n\n        // Get rid of the capture added by the pseudo-sticky matcher if needed. An empty string means\n        // the original regexp failed (see above).\n        if (fakeY && match && match.pop() === '') {\n          match = null;\n        }\n        if (regex.global) {\n          regex.lastIndex = match ? r2.lastIndex : 0;\n        }\n        return match;\n      };\n\n      /**\n       * Executes a provided function once per regex match. Searches always start at the beginning of the\n       * string and continue until the end, regardless of the state of the regex's `global` property and\n       * initial `lastIndex`.\n       *\n       * @memberOf XRegExp\n       * @param {String} str String to search.\n       * @param {RegExp} regex Regex to search with.\n       * @param {Function} callback Function to execute for each match. Invoked with four arguments:\n       *   - The match array, with named backreference properties.\n       *   - The zero-based match index.\n       *   - The string being traversed.\n       *   - The regex object being used to traverse the string.\n       * @example\n       *\n       * // Extracts every other digit from a string\n       * const evens = [];\n       * XRegExp.forEach('1a2345', /\\d/, (match, i) => {\n       *   if (i % 2) evens.push(+match[0]);\n       * });\n       * // evens -> [2, 4]\n       */\n      XRegExp.forEach = function (str, regex, callback) {\n        var pos = 0;\n        var i = -1;\n        var match = void 0;\n        while (match = XRegExp.exec(str, regex, pos)) {\n          // Because `regex` is provided to `callback`, the function could use the deprecated/\n          // nonstandard `RegExp.prototype.compile` to mutate the regex. However, since `XRegExp.exec`\n          // doesn't use `lastIndex` to set the search position, this can't lead to an infinite loop,\n          // at least. Actually, because of the way `XRegExp.exec` caches globalized versions of\n          // regexes, mutating the regex will not have any effect on the iteration or matched strings,\n          // which is a nice side effect that brings extra safety.\n          callback(match, ++i, str, regex);\n          pos = match.index + (match[0].length || 1);\n        }\n      };\n\n      /**\n       * Copies a regex object and adds flag `g`. The copy maintains extended data, is augmented with\n       * `XRegExp.prototype` properties, and has a fresh `lastIndex` property (set to zero). Native\n       * regexes are not recompiled using XRegExp syntax.\n       *\n       * @memberOf XRegExp\n       * @param {RegExp} regex Regex to globalize.\n       * @returns {RegExp} Copy of the provided regex with flag `g` added.\n       * @example\n       *\n       * const globalCopy = XRegExp.globalize(/regex/);\n       * globalCopy.global; // -> true\n       */\n      XRegExp.globalize = function (regex) {\n        return copyRegex(regex, {\n          addG: true\n        });\n      };\n\n      /**\n       * Installs optional features according to the specified options. Can be undone using\n       * `XRegExp.uninstall`.\n       *\n       * @memberOf XRegExp\n       * @param {Object|String} options Options object or string.\n       * @example\n       *\n       * // With an options object\n       * XRegExp.install({\n       *   // Enables support for astral code points in Unicode addons (implicitly sets flag A)\n       *   astral: true\n       * });\n       *\n       * // With an options string\n       * XRegExp.install('astral');\n       */\n      XRegExp.install = function (options) {\n        options = prepareOptions(options);\n        if (!features.astral && options.astral) {\n          setAstral(true);\n        }\n      };\n\n      /**\n       * Checks whether an individual optional feature is installed.\n       *\n       * @memberOf XRegExp\n       * @param {String} feature Name of the feature to check. One of:\n       *   - `astral`\n       * @returns {Boolean} Whether the feature is installed.\n       * @example\n       *\n       * XRegExp.isInstalled('astral');\n       */\n      XRegExp.isInstalled = function (feature) {\n        return !!features[feature];\n      };\n\n      /**\n       * Returns `true` if an object is a regex; `false` if it isn't. This works correctly for regexes\n       * created in another frame, when `instanceof` and `constructor` checks would fail.\n       *\n       * @memberOf XRegExp\n       * @param {*} value Object to check.\n       * @returns {Boolean} Whether the object is a `RegExp` object.\n       * @example\n       *\n       * XRegExp.isRegExp('string'); // -> false\n       * XRegExp.isRegExp(/regex/i); // -> true\n       * XRegExp.isRegExp(RegExp('^', 'm')); // -> true\n       * XRegExp.isRegExp(XRegExp('(?s).')); // -> true\n       */\n      XRegExp.isRegExp = function (value) {\n        return toString.call(value) === '[object RegExp]';\n      }; // isType(value, 'RegExp');\n\n      /**\n       * Returns the first matched string, or in global mode, an array containing all matched strings.\n       * This is essentially a more convenient re-implementation of `String.prototype.match` that gives\n       * the result types you actually want (string instead of `exec`-style array in match-first mode,\n       * and an empty array instead of `null` when no matches are found in match-all mode). It also lets\n       * you override flag g and ignore `lastIndex`, and fixes browser bugs.\n       *\n       * @memberOf XRegExp\n       * @param {String} str String to search.\n       * @param {RegExp} regex Regex to search with.\n       * @param {String} [scope='one'] Use 'one' to return the first match as a string. Use 'all' to\n       *   return an array of all matched strings. If not explicitly specified and `regex` uses flag g,\n       *   `scope` is 'all'.\n       * @returns {String|Array} In match-first mode: First match as a string, or `null`. In match-all\n       *   mode: Array of all matched strings, or an empty array.\n       * @example\n       *\n       * // Match first\n       * XRegExp.match('abc', /\\w/); // -> 'a'\n       * XRegExp.match('abc', /\\w/g, 'one'); // -> 'a'\n       * XRegExp.match('abc', /x/g, 'one'); // -> null\n       *\n       * // Match all\n       * XRegExp.match('abc', /\\w/g); // -> ['a', 'b', 'c']\n       * XRegExp.match('abc', /\\w/, 'all'); // -> ['a', 'b', 'c']\n       * XRegExp.match('abc', /x/, 'all'); // -> []\n       */\n      XRegExp.match = function (str, regex, scope) {\n        var global = regex.global && scope !== 'one' || scope === 'all';\n        var cacheKey = (global ? 'g' : '') + (regex.sticky ? 'y' : '') || 'noGY';\n        regex[REGEX_DATA] = regex[REGEX_DATA] || {};\n\n        // Shares cached copies with `XRegExp.exec`/`replace`\n        var r2 = regex[REGEX_DATA][cacheKey] || (regex[REGEX_DATA][cacheKey] = copyRegex(regex, {\n          addG: !!global,\n          removeG: scope === 'one',\n          isInternalOnly: true\n        }));\n        var result = nativ.match.call(toObject(str), r2);\n        if (regex.global) {\n          regex.lastIndex = scope === 'one' && result ?\n          // Can't use `r2.lastIndex` since `r2` is nonglobal in this case\n          result.index + result[0].length : 0;\n        }\n        return global ? result || [] : result && result[0];\n      };\n\n      /**\n       * Retrieves the matches from searching a string using a chain of regexes that successively search\n       * within previous matches. The provided `chain` array can contain regexes and or objects with\n       * `regex` and `backref` properties. When a backreference is specified, the named or numbered\n       * backreference is passed forward to the next regex or returned.\n       *\n       * @memberOf XRegExp\n       * @param {String} str String to search.\n       * @param {Array} chain Regexes that each search for matches within preceding results.\n       * @returns {Array} Matches by the last regex in the chain, or an empty array.\n       * @example\n       *\n       * // Basic usage; matches numbers within <b> tags\n       * XRegExp.matchChain('1 <b>2</b> 3 <b>4 a 56</b>', [\n       *   XRegExp('(?is)<b>.*?</b>'),\n       *   /\\d+/\n       * ]);\n       * // -> ['2', '4', '56']\n       *\n       * // Passing forward and returning specific backreferences\n       * html = '<a href=\"http://xregexp.com/api/\">XRegExp</a>\\\n       *         <a href=\"http://www.google.com/\">Google</a>';\n       * XRegExp.matchChain(html, [\n       *   {regex: /<a href=\"([^\"]+)\">/i, backref: 1},\n       *   {regex: XRegExp('(?i)^https?://(?<domain>[^/?#]+)'), backref: 'domain'}\n       * ]);\n       * // -> ['xregexp.com', 'www.google.com']\n       */\n      XRegExp.matchChain = function (str, chain) {\n        return function recurseChain(values, level) {\n          var item = chain[level].regex ? chain[level] : {\n            regex: chain[level]\n          };\n          var matches = [];\n          function addMatch(match) {\n            if (item.backref) {\n              // Safari 4.0.5 (but not 5.0.5+) inappropriately uses sparse arrays to hold the\n              // `undefined`s for backreferences to nonparticipating capturing groups. In such\n              // cases, a `hasOwnProperty` or `in` check on its own would inappropriately throw\n              // the exception, so also check if the backreference is a number that is within the\n              // bounds of the array.\n              if (!(match.hasOwnProperty(item.backref) || +item.backref < match.length)) {\n                throw new ReferenceError('Backreference to undefined group: ' + item.backref);\n              }\n              matches.push(match[item.backref] || '');\n            } else {\n              matches.push(match[0]);\n            }\n          }\n          for (var i = 0; i < values.length; ++i) {\n            XRegExp.forEach(values[i], item.regex, addMatch);\n          }\n          return level === chain.length - 1 || !matches.length ? matches : recurseChain(matches, level + 1);\n        }([str], 0);\n      };\n\n      /**\n       * Returns a new string with one or all matches of a pattern replaced. The pattern can be a string\n       * or regex, and the replacement can be a string or a function to be called for each match. To\n       * perform a global search and replace, use the optional `scope` argument or include flag g if using\n       * a regex. Replacement strings can use `${n}` or `$<n>` for named and numbered backreferences.\n       * Replacement functions can use named backreferences via `arguments[0].name`. Also fixes browser\n       * bugs compared to the native `String.prototype.replace` and can be used reliably cross-browser.\n       *\n       * @memberOf XRegExp\n       * @param {String} str String to search.\n       * @param {RegExp|String} search Search pattern to be replaced.\n       * @param {String|Function} replacement Replacement string or a function invoked to create it.\n       *   Replacement strings can include special replacement syntax:\n       *     - $$ - Inserts a literal $ character.\n       *     - $&, $0 - Inserts the matched substring.\n       *     - $` - Inserts the string that precedes the matched substring (left context).\n       *     - $' - Inserts the string that follows the matched substring (right context).\n       *     - $n, $nn - Where n/nn are digits referencing an existent capturing group, inserts\n       *       backreference n/nn.\n       *     - ${n}, $<n> - Where n is a name or any number of digits that reference an existent capturing\n       *       group, inserts backreference n.\n       *   Replacement functions are invoked with three or more arguments:\n       *     - The matched substring (corresponds to $& above). Named backreferences are accessible as\n       *       properties of this first argument.\n       *     - 0..n arguments, one for each backreference (corresponding to $1, $2, etc. above).\n       *     - The zero-based index of the match within the total search string.\n       *     - The total string being searched.\n       * @param {String} [scope='one'] Use 'one' to replace the first match only, or 'all'. If not\n       *   explicitly specified and using a regex with flag g, `scope` is 'all'.\n       * @returns {String} New string with one or all matches replaced.\n       * @example\n       *\n       * // Regex search, using named backreferences in replacement string\n       * const name = XRegExp('(?<first>\\\\w+) (?<last>\\\\w+)');\n       * XRegExp.replace('John Smith', name, '$<last>, $<first>');\n       * // -> 'Smith, John'\n       *\n       * // Regex search, using named backreferences in replacement function\n       * XRegExp.replace('John Smith', name, (match) => `${match.last}, ${match.first}`);\n       * // -> 'Smith, John'\n       *\n       * // String search, with replace-all\n       * XRegExp.replace('RegExp builds RegExps', 'RegExp', 'XRegExp', 'all');\n       * // -> 'XRegExp builds XRegExps'\n       */\n      XRegExp.replace = function (str, search, replacement, scope) {\n        var isRegex = XRegExp.isRegExp(search);\n        var global = search.global && scope !== 'one' || scope === 'all';\n        var cacheKey = (global ? 'g' : '') + (search.sticky ? 'y' : '') || 'noGY';\n        var s2 = search;\n        if (isRegex) {\n          search[REGEX_DATA] = search[REGEX_DATA] || {};\n\n          // Shares cached copies with `XRegExp.exec`/`match`. Since a copy is used, `search`'s\n          // `lastIndex` isn't updated *during* replacement iterations\n          s2 = search[REGEX_DATA][cacheKey] || (search[REGEX_DATA][cacheKey] = copyRegex(search, {\n            addG: !!global,\n            removeG: scope === 'one',\n            isInternalOnly: true\n          }));\n        } else if (global) {\n          s2 = new RegExp(XRegExp.escape(String(search)), 'g');\n        }\n\n        // Fixed `replace` required for named backreferences, etc.\n        var result = fixed.replace.call(toObject(str), s2, replacement);\n        if (isRegex && search.global) {\n          // Fixes IE, Safari bug (last tested IE 9, Safari 5.1)\n          search.lastIndex = 0;\n        }\n        return result;\n      };\n\n      /**\n       * Performs batch processing of string replacements. Used like `XRegExp.replace`, but accepts an\n       * array of replacement details. Later replacements operate on the output of earlier replacements.\n       * Replacement details are accepted as an array with a regex or string to search for, the\n       * replacement string or function, and an optional scope of 'one' or 'all'. Uses the XRegExp\n       * replacement text syntax, which supports named backreference properties via `${name}` or\n       * `$<name>`.\n       *\n       * @memberOf XRegExp\n       * @param {String} str String to search.\n       * @param {Array} replacements Array of replacement detail arrays.\n       * @returns {String} New string with all replacements.\n       * @example\n       *\n       * str = XRegExp.replaceEach(str, [\n       *   [XRegExp('(?<name>a)'), 'z${name}'],\n       *   [/b/gi, 'y'],\n       *   [/c/g, 'x', 'one'], // scope 'one' overrides /g\n       *   [/d/, 'w', 'all'],  // scope 'all' overrides lack of /g\n       *   ['e', 'v', 'all'],  // scope 'all' allows replace-all for strings\n       *   [/f/g, ($0) => $0.toUpperCase()]\n       * ]);\n       */\n      XRegExp.replaceEach = function (str, replacements) {\n        var i = void 0;\n        var r = void 0;\n        for (i = 0; i < replacements.length; ++i) {\n          r = replacements[i];\n          str = XRegExp.replace(str, r[0], r[1], r[2]);\n        }\n        return str;\n      };\n\n      /**\n       * Splits a string into an array of strings using a regex or string separator. Matches of the\n       * separator are not included in the result array. However, if `separator` is a regex that contains\n       * capturing groups, backreferences are spliced into the result each time `separator` is matched.\n       * Fixes browser bugs compared to the native `String.prototype.split` and can be used reliably\n       * cross-browser.\n       *\n       * @memberOf XRegExp\n       * @param {String} str String to split.\n       * @param {RegExp|String} separator Regex or string to use for separating the string.\n       * @param {Number} [limit] Maximum number of items to include in the result array.\n       * @returns {Array} Array of substrings.\n       * @example\n       *\n       * // Basic use\n       * XRegExp.split('a b c', ' ');\n       * // -> ['a', 'b', 'c']\n       *\n       * // With limit\n       * XRegExp.split('a b c', ' ', 2);\n       * // -> ['a', 'b']\n       *\n       * // Backreferences in result array\n       * XRegExp.split('..word1..', /([a-z]+)(\\d+)/i);\n       * // -> ['..', 'word', '1', '..']\n       */\n      XRegExp.split = function (str, separator, limit) {\n        return fixed.split.call(toObject(str), separator, limit);\n      };\n\n      /**\n       * Executes a regex search in a specified string. Returns `true` or `false`. Optional `pos` and\n       * `sticky` arguments specify the search start position, and whether the match must start at the\n       * specified position only. The `lastIndex` property of the provided regex is not used, but is\n       * updated for compatibility. Also fixes browser bugs compared to the native\n       * `RegExp.prototype.test` and can be used reliably cross-browser.\n       *\n       * @memberOf XRegExp\n       * @param {String} str String to search.\n       * @param {RegExp} regex Regex to search with.\n       * @param {Number} [pos=0] Zero-based index at which to start the search.\n       * @param {Boolean|String} [sticky=false] Whether the match must start at the specified position\n       *   only. The string `'sticky'` is accepted as an alternative to `true`.\n       * @returns {Boolean} Whether the regex matched the provided value.\n       * @example\n       *\n       * // Basic use\n       * XRegExp.test('abc', /c/); // -> true\n       *\n       * // With pos and sticky\n       * XRegExp.test('abc', /c/, 0, 'sticky'); // -> false\n       * XRegExp.test('abc', /c/, 2, 'sticky'); // -> true\n       */\n      // Do this the easy way :-)\n      XRegExp.test = function (str, regex, pos, sticky) {\n        return !!XRegExp.exec(str, regex, pos, sticky);\n      };\n\n      /**\n       * Uninstalls optional features according to the specified options. All optional features start out\n       * uninstalled, so this is used to undo the actions of `XRegExp.install`.\n       *\n       * @memberOf XRegExp\n       * @param {Object|String} options Options object or string.\n       * @example\n       *\n       * // With an options object\n       * XRegExp.uninstall({\n       *   // Disables support for astral code points in Unicode addons\n       *   astral: true\n       * });\n       *\n       * // With an options string\n       * XRegExp.uninstall('astral');\n       */\n      XRegExp.uninstall = function (options) {\n        options = prepareOptions(options);\n        if (features.astral && options.astral) {\n          setAstral(false);\n        }\n      };\n\n      /**\n       * Returns an XRegExp object that is the union of the given patterns. Patterns can be provided as\n       * regex objects or strings. Metacharacters are escaped in patterns provided as strings.\n       * Backreferences in provided regex objects are automatically renumbered to work correctly within\n       * the larger combined pattern. Native flags used by provided regexes are ignored in favor of the\n       * `flags` argument.\n       *\n       * @memberOf XRegExp\n       * @param {Array} patterns Regexes and strings to combine.\n       * @param {String} [flags] Any combination of XRegExp flags.\n       * @param {Object} [options] Options object with optional properties:\n       *   - `conjunction` {String} Type of conjunction to use: 'or' (default) or 'none'.\n       * @returns {RegExp} Union of the provided regexes and strings.\n       * @example\n       *\n       * XRegExp.union(['a+b*c', /(dogs)\\1/, /(cats)\\1/], 'i');\n       * // -> /a\\+b\\*c|(dogs)\\1|(cats)\\2/i\n       *\n       * XRegExp.union([/man/, /bear/, /pig/], 'i', {conjunction: 'none'});\n       * // -> /manbearpig/i\n       */\n      XRegExp.union = function (patterns, flags, options) {\n        options = options || {};\n        var conjunction = options.conjunction || 'or';\n        var numCaptures = 0;\n        var numPriorCaptures = void 0;\n        var captureNames = void 0;\n        function rewrite(match, paren, backref) {\n          var name = captureNames[numCaptures - numPriorCaptures];\n\n          // Capturing group\n          if (paren) {\n            ++numCaptures;\n            // If the current capture has a name, preserve the name\n            if (name) {\n              return '(?<' + name + '>';\n            }\n            // Backreference\n          } else if (backref) {\n            // Rewrite the backreference\n            return '\\\\' + (+backref + numPriorCaptures);\n          }\n          return match;\n        }\n        if (!(isType(patterns, 'Array') && patterns.length)) {\n          throw new TypeError('Must provide a nonempty array of patterns to merge');\n        }\n        var parts = /(\\()(?!\\?)|\\\\([1-9]\\d*)|\\\\[\\s\\S]|\\[(?:[^\\\\\\]]|\\\\[\\s\\S])*\\]/g;\n        var output = [];\n        var pattern = void 0;\n        for (var i = 0; i < patterns.length; ++i) {\n          pattern = patterns[i];\n          if (XRegExp.isRegExp(pattern)) {\n            numPriorCaptures = numCaptures;\n            captureNames = pattern[REGEX_DATA] && pattern[REGEX_DATA].captureNames || [];\n\n            // Rewrite backreferences. Passing to XRegExp dies on octals and ensures patterns are\n            // independently valid; helps keep this simple. Named captures are put back\n            output.push(nativ.replace.call(XRegExp(pattern.source).source, parts, rewrite));\n          } else {\n            output.push(XRegExp.escape(pattern));\n          }\n        }\n        var separator = conjunction === 'none' ? '' : '|';\n        return XRegExp(output.join(separator), flags);\n      };\n\n      // ==--------------------------==\n      // Fixed/extended native methods\n      // ==--------------------------==\n\n      /**\n       * Adds named capture support (with backreferences returned as `result.name`), and fixes browser\n       * bugs in the native `RegExp.prototype.exec`. Use via `XRegExp.exec`.\n       *\n       * @memberOf RegExp\n       * @param {String} str String to search.\n       * @returns {Array} Match array with named backreference properties, or `null`.\n       */\n      fixed.exec = function (str) {\n        var origLastIndex = this.lastIndex;\n        var match = nativ.exec.apply(this, arguments);\n        if (match) {\n          // Fix browsers whose `exec` methods don't return `undefined` for nonparticipating capturing\n          // groups. This fixes IE 5.5-8, but not IE 9's quirks mode or emulation of older IEs. IE 9\n          // in standards mode follows the spec.\n          if (!correctExecNpcg && match.length > 1 && match.indexOf('') !== -1) {\n            var r2 = copyRegex(this, {\n              removeG: true,\n              isInternalOnly: true\n            });\n            // Using `str.slice(match.index)` rather than `match[0]` in case lookahead allowed\n            // matching due to characters outside the match\n            nativ.replace.call(String(str).slice(match.index), r2, function () {\n              for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n                args[_key] = arguments[_key];\n              }\n              var len = args.length;\n              // Skip index 0 and the last 2\n              for (var i = 1; i < len - 2; ++i) {\n                if (args[i] === undefined) {\n                  match[i] = undefined;\n                }\n              }\n            });\n          }\n\n          // Attach named capture properties\n          if (this[REGEX_DATA] && this[REGEX_DATA].captureNames) {\n            // Skip index 0\n            for (var i = 1; i < match.length; ++i) {\n              var name = this[REGEX_DATA].captureNames[i - 1];\n              if (name) {\n                match[name] = match[i];\n              }\n            }\n          }\n\n          // Fix browsers that increment `lastIndex` after zero-length matches\n          if (this.global && !match[0].length && this.lastIndex > match.index) {\n            this.lastIndex = match.index;\n          }\n        }\n        if (!this.global) {\n          // Fixes IE, Opera bug (last tested IE 9, Opera 11.6)\n          this.lastIndex = origLastIndex;\n        }\n        return match;\n      };\n\n      /**\n       * Fixes browser bugs in the native `RegExp.prototype.test`.\n       *\n       * @memberOf RegExp\n       * @param {String} str String to search.\n       * @returns {Boolean} Whether the regex matched the provided value.\n       */\n      fixed.test = function (str) {\n        // Do this the easy way :-)\n        return !!fixed.exec.call(this, str);\n      };\n\n      /**\n       * Adds named capture support (with backreferences returned as `result.name`), and fixes browser\n       * bugs in the native `String.prototype.match`.\n       *\n       * @memberOf String\n       * @param {RegExp|*} regex Regex to search with. If not a regex object, it is passed to `RegExp`.\n       * @returns {Array} If `regex` uses flag g, an array of match strings or `null`. Without flag g,\n       *   the result of calling `regex.exec(this)`.\n       */\n      fixed.match = function (regex) {\n        if (!XRegExp.isRegExp(regex)) {\n          // Use the native `RegExp` rather than `XRegExp`\n          regex = new RegExp(regex);\n        } else if (regex.global) {\n          var result = nativ.match.apply(this, arguments);\n          // Fixes IE bug\n          regex.lastIndex = 0;\n          return result;\n        }\n        return fixed.exec.call(regex, toObject(this));\n      };\n\n      /**\n       * Adds support for `${n}` (or `$<n>`) tokens for named and numbered backreferences in replacement\n       * text, and provides named backreferences to replacement functions as `arguments[0].name`. Also\n       * fixes browser bugs in replacement text syntax when performing a replacement using a nonregex\n       * search value, and the value of a replacement regex's `lastIndex` property during replacement\n       * iterations and upon completion. Note that this doesn't support SpiderMonkey's proprietary third\n       * (`flags`) argument. Use via `XRegExp.replace`.\n       *\n       * @memberOf String\n       * @param {RegExp|String} search Search pattern to be replaced.\n       * @param {String|Function} replacement Replacement string or a function invoked to create it.\n       * @returns {String} New string with one or all matches replaced.\n       */\n      fixed.replace = function (search, replacement) {\n        var isRegex = XRegExp.isRegExp(search);\n        var origLastIndex = void 0;\n        var captureNames = void 0;\n        var result = void 0;\n        if (isRegex) {\n          if (search[REGEX_DATA]) {\n            captureNames = search[REGEX_DATA].captureNames;\n          }\n          // Only needed if `search` is nonglobal\n          origLastIndex = search.lastIndex;\n        } else {\n          search += ''; // Type-convert\n        }\n\n        // Don't use `typeof`; some older browsers return 'function' for regex objects\n        if (isType(replacement, 'Function')) {\n          // Stringifying `this` fixes a bug in IE < 9 where the last argument in replacement\n          // functions isn't type-converted to a string\n          result = nativ.replace.call(String(this), search, function () {\n            for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n              args[_key2] = arguments[_key2];\n            }\n            if (captureNames) {\n              // Change the `args[0]` string primitive to a `String` object that can store\n              // properties. This really does need to use `String` as a constructor\n              args[0] = new String(args[0]);\n              // Store named backreferences on the first argument\n              for (var i = 0; i < captureNames.length; ++i) {\n                if (captureNames[i]) {\n                  args[0][captureNames[i]] = args[i + 1];\n                }\n              }\n            }\n            // Update `lastIndex` before calling `replacement`. Fixes IE, Chrome, Firefox, Safari\n            // bug (last tested IE 9, Chrome 17, Firefox 11, Safari 5.1)\n            if (isRegex && search.global) {\n              search.lastIndex = args[args.length - 2] + args[0].length;\n            }\n            // ES6 specs the context for replacement functions as `undefined`\n            return replacement.apply(undefined, args);\n          });\n        } else {\n          // Ensure that the last value of `args` will be a string when given nonstring `this`,\n          // while still throwing on null or undefined context\n          result = nativ.replace.call(this == null ? this : String(this), search, function () {\n            for (var _len3 = arguments.length, args = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n              args[_key3] = arguments[_key3];\n            }\n            return nativ.replace.call(String(replacement), replacementToken, replacer);\n            function replacer($0, bracketed, angled, dollarToken) {\n              bracketed = bracketed || angled;\n              // Named or numbered backreference with curly or angled braces\n              if (bracketed) {\n                // XRegExp behavior for `${n}` or `$<n>`:\n                // 1. Backreference to numbered capture, if `n` is an integer. Use `0` for the\n                //    entire match. Any number of leading zeros may be used.\n                // 2. Backreference to named capture `n`, if it exists and is not an integer\n                //    overridden by numbered capture. In practice, this does not overlap with\n                //    numbered capture since XRegExp does not allow named capture to use a bare\n                //    integer as the name.\n                // 3. If the name or number does not refer to an existing capturing group, it's\n                //    an error.\n                var n = +bracketed; // Type-convert; drop leading zeros\n                if (n <= args.length - 3) {\n                  return args[n] || '';\n                }\n                // Groups with the same name is an error, else would need `lastIndexOf`\n                n = captureNames ? captureNames.indexOf(bracketed) : -1;\n                if (n < 0) {\n                  throw new SyntaxError('Backreference to undefined group ' + $0);\n                }\n                return args[n + 1] || '';\n              }\n              // Else, special variable or numbered backreference without curly braces\n              if (dollarToken === '$') {\n                // $$\n                return '$';\n              }\n              if (dollarToken === '&' || +dollarToken === 0) {\n                // $&, $0 (not followed by 1-9), $00\n                return args[0];\n              }\n              if (dollarToken === '`') {\n                // $` (left context)\n                return args[args.length - 1].slice(0, args[args.length - 2]);\n              }\n              if (dollarToken === \"'\") {\n                // $' (right context)\n                return args[args.length - 1].slice(args[args.length - 2] + args[0].length);\n              }\n              // Else, numbered backreference without braces\n              dollarToken = +dollarToken; // Type-convert; drop leading zero\n              // XRegExp behavior for `$n` and `$nn`:\n              // - Backrefs end after 1 or 2 digits. Use `${..}` or `$<..>` for more digits.\n              // - `$1` is an error if no capturing groups.\n              // - `$10` is an error if less than 10 capturing groups. Use `${1}0` or `$<1>0`\n              //   instead.\n              // - `$01` is `$1` if at least one capturing group, else it's an error.\n              // - `$0` (not followed by 1-9) and `$00` are the entire match.\n              // Native behavior, for comparison:\n              // - Backrefs end after 1 or 2 digits. Cannot reference capturing group 100+.\n              // - `$1` is a literal `$1` if no capturing groups.\n              // - `$10` is `$1` followed by a literal `0` if less than 10 capturing groups.\n              // - `$01` is `$1` if at least one capturing group, else it's a literal `$01`.\n              // - `$0` is a literal `$0`.\n              if (!isNaN(dollarToken)) {\n                if (dollarToken > args.length - 3) {\n                  throw new SyntaxError('Backreference to undefined group ' + $0);\n                }\n                return args[dollarToken] || '';\n              }\n              // `$` followed by an unsupported char is an error, unlike native JS\n              throw new SyntaxError('Invalid token ' + $0);\n            }\n          });\n        }\n        if (isRegex) {\n          if (search.global) {\n            // Fixes IE, Safari bug (last tested IE 9, Safari 5.1)\n            search.lastIndex = 0;\n          } else {\n            // Fixes IE, Opera bug (last tested IE 9, Opera 11.6)\n            search.lastIndex = origLastIndex;\n          }\n        }\n        return result;\n      };\n\n      /**\n       * Fixes browser bugs in the native `String.prototype.split`. Use via `XRegExp.split`.\n       *\n       * @memberOf String\n       * @param {RegExp|String} separator Regex or string to use for separating the string.\n       * @param {Number} [limit] Maximum number of items to include in the result array.\n       * @returns {Array} Array of substrings.\n       */\n      fixed.split = function (separator, limit) {\n        if (!XRegExp.isRegExp(separator)) {\n          // Browsers handle nonregex split correctly, so use the faster native method\n          return nativ.split.apply(this, arguments);\n        }\n        var str = String(this);\n        var output = [];\n        var origLastIndex = separator.lastIndex;\n        var lastLastIndex = 0;\n        var lastLength = void 0;\n\n        // Values for `limit`, per the spec:\n        // If undefined: pow(2,32) - 1\n        // If 0, Infinity, or NaN: 0\n        // If positive number: limit = floor(limit); if (limit >= pow(2,32)) limit -= pow(2,32);\n        // If negative number: pow(2,32) - floor(abs(limit))\n        // If other: Type-convert, then use the above rules\n        // This line fails in very strange ways for some values of `limit` in Opera 10.5-10.63, unless\n        // Opera Dragonfly is open (go figure). It works in at least Opera 9.5-10.1 and 11+\n        limit = (limit === undefined ? -1 : limit) >>> 0;\n        XRegExp.forEach(str, separator, function (match) {\n          // This condition is not the same as `if (match[0].length)`\n          if (match.index + match[0].length > lastLastIndex) {\n            output.push(str.slice(lastLastIndex, match.index));\n            if (match.length > 1 && match.index < str.length) {\n              Array.prototype.push.apply(output, match.slice(1));\n            }\n            lastLength = match[0].length;\n            lastLastIndex = match.index + lastLength;\n          }\n        });\n        if (lastLastIndex === str.length) {\n          if (!nativ.test.call(separator, '') || lastLength) {\n            output.push('');\n          }\n        } else {\n          output.push(str.slice(lastLastIndex));\n        }\n        separator.lastIndex = origLastIndex;\n        return output.length > limit ? output.slice(0, limit) : output;\n      };\n\n      // ==--------------------------==\n      // Built-in syntax/flag tokens\n      // ==--------------------------==\n\n      /*\n       * Letter escapes that natively match literal characters: `\\a`, `\\A`, etc. These should be\n       * SyntaxErrors but are allowed in web reality. XRegExp makes them errors for cross-browser\n       * consistency and to reserve their syntax, but lets them be superseded by addons.\n       */\n      XRegExp.addToken(/\\\\([ABCE-RTUVXYZaeg-mopqyz]|c(?![A-Za-z])|u(?![\\dA-Fa-f]{4}|{[\\dA-Fa-f]+})|x(?![\\dA-Fa-f]{2}))/, function (match, scope) {\n        // \\B is allowed in default scope only\n        if (match[1] === 'B' && scope === defaultScope) {\n          return match[0];\n        }\n        throw new SyntaxError('Invalid escape ' + match[0]);\n      }, {\n        scope: 'all',\n        leadChar: '\\\\'\n      });\n\n      /*\n       * Unicode code point escape with curly braces: `\\u{N..}`. `N..` is any one or more digit\n       * hexadecimal number from 0-10FFFF, and can include leading zeros. Requires the native ES6 `u` flag\n       * to support code points greater than U+FFFF. Avoids converting code points above U+FFFF to\n       * surrogate pairs (which could be done without flag `u`), since that could lead to broken behavior\n       * if you follow a `\\u{N..}` token that references a code point above U+FFFF with a quantifier, or\n       * if you use the same in a character class.\n       */\n      XRegExp.addToken(/\\\\u{([\\dA-Fa-f]+)}/, function (match, scope, flags) {\n        var code = dec(match[1]);\n        if (code > 0x10FFFF) {\n          throw new SyntaxError('Invalid Unicode code point ' + match[0]);\n        }\n        if (code <= 0xFFFF) {\n          // Converting to \\uNNNN avoids needing to escape the literal character and keep it\n          // separate from preceding tokens\n          return \"\\\\u\" + pad4(hex(code));\n        }\n        // If `code` is between 0xFFFF and 0x10FFFF, require and defer to native handling\n        if (hasNativeU && flags.indexOf('u') !== -1) {\n          return match[0];\n        }\n        throw new SyntaxError(\"Cannot use Unicode code point above \\\\u{FFFF} without flag u\");\n      }, {\n        scope: 'all',\n        leadChar: '\\\\'\n      });\n\n      /*\n       * Empty character class: `[]` or `[^]`. This fixes a critical cross-browser syntax inconsistency.\n       * Unless this is standardized (per the ES spec), regex syntax can't be accurately parsed because\n       * character class endings can't be determined.\n       */\n      XRegExp.addToken(/\\[(\\^?)\\]/,\n      // For cross-browser compatibility with ES3, convert [] to \\b\\B and [^] to [\\s\\S].\n      // (?!) should work like \\b\\B, but is unreliable in some versions of Firefox\n      /* eslint-disable no-confusing-arrow */\n      function (match) {\n        return match[1] ? '[\\\\s\\\\S]' : '\\\\b\\\\B';\n      }, /* eslint-enable no-confusing-arrow */\n      {\n        leadChar: '['\n      });\n\n      /*\n       * Comment pattern: `(?# )`. Inline comments are an alternative to the line comments allowed in\n       * free-spacing mode (flag x).\n       */\n      XRegExp.addToken(/\\(\\?#[^)]*\\)/, getContextualTokenSeparator, {\n        leadChar: '('\n      });\n\n      /*\n       * Whitespace and line comments, in free-spacing mode (aka extended mode, flag x) only.\n       */\n      XRegExp.addToken(/\\s+|#[^\\n]*\\n?/, getContextualTokenSeparator, {\n        flag: 'x'\n      });\n\n      /*\n       * Dot, in dotall mode (aka singleline mode, flag s) only.\n       */\n      XRegExp.addToken(/\\./, function () {\n        return '[\\\\s\\\\S]';\n      }, {\n        flag: 's',\n        leadChar: '.'\n      });\n\n      /*\n       * Named backreference: `\\k<name>`. Backreference names can use the characters A-Z, a-z, 0-9, _,\n       * and $ only. Also allows numbered backreferences as `\\k<n>`.\n       */\n      XRegExp.addToken(/\\\\k<([\\w$]+)>/, function (match) {\n        // Groups with the same name is an error, else would need `lastIndexOf`\n        var index = isNaN(match[1]) ? this.captureNames.indexOf(match[1]) + 1 : +match[1];\n        var endIndex = match.index + match[0].length;\n        if (!index || index > this.captureNames.length) {\n          throw new SyntaxError('Backreference to undefined group ' + match[0]);\n        }\n        // Keep backreferences separate from subsequent literal numbers. This avoids e.g.\n        // inadvertedly changing `(?<n>)\\k<n>1` to `()\\11`.\n        return '\\\\' + index + (endIndex === match.input.length || isNaN(match.input[endIndex]) ? '' : '(?:)');\n      }, {\n        leadChar: '\\\\'\n      });\n\n      /*\n       * Numbered backreference or octal, plus any following digits: `\\0`, `\\11`, etc. Octals except `\\0`\n       * not followed by 0-9 and backreferences to unopened capture groups throw an error. Other matches\n       * are returned unaltered. IE < 9 doesn't support backreferences above `\\99` in regex syntax.\n       */\n      XRegExp.addToken(/\\\\(\\d+)/, function (match, scope) {\n        if (!(scope === defaultScope && /^[1-9]/.test(match[1]) && +match[1] <= this.captureNames.length) && match[1] !== '0') {\n          throw new SyntaxError('Cannot use octal escape or backreference to undefined group ' + match[0]);\n        }\n        return match[0];\n      }, {\n        scope: 'all',\n        leadChar: '\\\\'\n      });\n\n      /*\n       * Named capturing group; match the opening delimiter only: `(?<name>`. Capture names can use the\n       * characters A-Z, a-z, 0-9, _, and $ only. Names can't be integers. Supports Python-style\n       * `(?P<name>` as an alternate syntax to avoid issues in some older versions of Opera which natively\n       * supported the Python-style syntax. Otherwise, XRegExp might treat numbered backreferences to\n       * Python-style named capture as octals.\n       */\n      XRegExp.addToken(/\\(\\?P?<([\\w$]+)>/, function (match) {\n        // Disallow bare integers as names because named backreferences are added to match arrays\n        // and therefore numeric properties may lead to incorrect lookups\n        if (!isNaN(match[1])) {\n          throw new SyntaxError('Cannot use integer as capture name ' + match[0]);\n        }\n        if (match[1] === 'length' || match[1] === '__proto__') {\n          throw new SyntaxError('Cannot use reserved word as capture name ' + match[0]);\n        }\n        if (this.captureNames.indexOf(match[1]) !== -1) {\n          throw new SyntaxError('Cannot use same name for multiple groups ' + match[0]);\n        }\n        this.captureNames.push(match[1]);\n        this.hasNamedCapture = true;\n        return '(';\n      }, {\n        leadChar: '('\n      });\n\n      /*\n       * Capturing group; match the opening parenthesis only. Required for support of named capturing\n       * groups. Also adds explicit capture mode (flag n).\n       */\n      XRegExp.addToken(/\\((?!\\?)/, function (match, scope, flags) {\n        if (flags.indexOf('n') !== -1) {\n          return '(?:';\n        }\n        this.captureNames.push(null);\n        return '(';\n      }, {\n        optionalFlags: 'n',\n        leadChar: '('\n      });\n      exports[\"default\"] = XRegExp;\n      module.exports = exports['default'];\n    }, {}]\n  }, {}, [8])(8);\n});"},function(e,t,n){e.exports=function(e){n(84)(e),n(91)(e),n(95)(e),n(101)(e),n(114)(e),n(117)(e),n(119)(e),n(123)(e),n(128)(e),n(130)(e),n(134)(e),n(135)(e),n(136)(e),n(137)(e),n(138)(e),n(141)(e)}},function(e,t,n){e.exports=function(e){n(85)(e),n(87)(e),n(89)(e)}},function(e,t,n){e.exports=function(e){e.component("agreementRecord",{bindings:{record:"<"},template:n(86)(),controller:["$scope","$translate","AgreementService",function(e,t,n){var a=this;a.$onInit=function(){if(angular.isDefined(a.record)){a.record.read={};for(var r=0;r<a.record.agreements.length;++r){var i=a.record.agreements[r];i.forceRead&&(a.record.read[i.id.formNumber]=!1)}}a.markRead=function(t){e.$applyAsync(function(){a.record.read[t]=!0,function(e,t){if(!angular.isUndefined(a.record.errors))for(var n=0;n<a.record.errors.length;++n){var r=a.record.errors[n];if(r.formNumber===e&&r.type===t){a.record.errors.splice(n,1);break}}}(t,"unread")})},a.getErrorText=function(e){for(var r={id:{formNumber:e.formNumber}},i=0;i<a.record.agreements.length;++i){var o=a.record.agreements[i];o.id.formNumber===e.formNumber&&(r=o)}var s=n.getAgreementTitle(r);return t.instant("agreement.error."+e.type+"."+r.fileType,{agreementName:s})},a.isCollapsed=function(e){return 4210!==e.id.formNumber&&(4354!==e.id.formNumber&&a.record.collapsed)},a.isHideTitle=function(e){return 4210===e.id.formNumber||4435===e.id.formNumber||9911===e.id.formNumber}}}]})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<div id="agreements"><am-agreement agreement="agreement" hide-title="$ctrl.isHideTitle(agreement)" collapse="$ctrl.isCollapsed(agreement)" ng-repeat="agreement in $ctrl.record.agreements"></am-agreement><div ng-if="::$ctrl.record.declinable"><div class="form-group"><div class="row"><div class="col-xs-12 col-6"><p><input type="radio" ng-model="$ctrl.record.declined" name="agreed" ng-value="false" i-check required><span>&nbsp; {{\'word.doAgree\' | translate}}</span></p></div><div class="col-xs-12 col-6"><p><input type="radio" ng-model="$ctrl.record.declined" name="agreed" ng-value="true" i-check required><span>&nbsp; {{\'word.dontAgree\' | translate}}</span></p></div></div></div></div><signature-block ng-if="!$ctrl.record.signatureExempt &amp;&amp; (!$ctrl.record.declinable || $ctrl.record.declined === false)" document-signature="$ctrl.record.signature" signature-format="$ctrl.record.signatureFormat" signature-warning="$ctrl.record.signatureWarning" no-signature-header="$ctrl.record.noSignatureHeader" no-signature-text="$ctrl.record.noSignatureText"></signature-block><div class="alert alert-danger" ng-if="$ctrl.record.errors.length &gt; 0"><p ng-repeat="error in $ctrl.record.errors">{{$ctrl.getErrorText(error)}}</p></div></div>'}},function(e,t,n){e.exports=function(e){e.component("agreementRecordPage",{bindings:{record:"<",callback:"<",submitText:"@?"},template:n(88)(),controller:["$translate","AgreementService",function(e,t){var n=this;n.$onInit=function(){n.submitText=n.submitText||e.instant("word.continue"),n.submit=function(){n.submitting=!0,t.record(n.record).then(n.callback).finally(function(){n.submitting=!1})},n.isSubmitDisabled=function(){return n.submitting}}}]})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<div page-structure><agreement-record record="$ctrl.record"></agreement-record></div><div page-buttons><div class="col-xs-12 col-sm-6 col-md-6 col-lg-6"></div><div class="col-xs-12 col-sm-6 col-md-6 col-lg-6"><div class="panel-btn-right"><p><am-button on-click="$ctrl.submit()" is-disabled="$ctrl.isSubmitDisabled()" btn-type="primary" btn-text="{{$ctrl.submitText}}"></am-button></p></div></div></div>'}},function(e,t,n){e.exports=function(e){e.component("amAgreement",{bindings:{agreement:"<",hideTitle:"<?",hideHr:"<?",showDescription:"<?",collapse:"<?",fullPage:"<?"},require:{$agreementRecord:"^?agreementRecord"},template:n(90)(),controller:["$timeout","$translate","$window","AgreementService","UserAgentService",function(e,t,n,a,r){var i=this,o=function(){angular.isDefined(i.$agreementRecord)&&null!==i.$agreementRecord&&i.$agreementRecord.markRead(i.agreement.id.formNumber)};i.$onInit=function(){i.hideTitle=i.hideTitle||!1,i.hideHr=i.hideHr||!1,i.showDescription=i.showDescription||!1,i.fullPage=i.fullPage||!1,i.collapse=i.collapse||!1,i.collapse&&(i.hideHr=!0),i.isFirefoxIos=r.isFirefoxIos(),i.updateCollapseChevron=function(){e(function(){var e=$('div[name="agreement_'+i.agreement.id.formNumber+'"] a');$(e).hasClass("collapsed")?$(e).find("i").removeClass("fa-chevron-down").addClass("fa-chevron-right"):$(e).find("i").removeClass("fa-chevron-right").addClass("fa-chevron-down")},100)},i.getVersionText=function(){var e=i.agreement.id.formNumber;return 0!==i.agreement.id.fileId&&(e+=" / "+i.agreement.id.fileId),e},i.getAgreementTitle=function(){return a.getAgreementTitle(i.agreement)},i.getAgreementDescription=function(){if(i.showDescription){var e="agreementForm.description."+i.agreement.id.formNumber,n=t.instant(e);return n===e?"":n}},i.getDynamicAgreementTemplate=function(){var e=i.agreement.id.formNumber;return 2137===e?"referral-fee-disclosure-contents.component":6112===e?"fa-client-default-fee-contents.component":""};if(-1!==["3203","3204","3212","3213","3215","3206","3205","3214","3208","3211","3207"].indexOf(i.agreement.id.formNumber)&&(i.alert="agreement.alert.customerAgreement"),"HTML"===i.agreement.fileType){var s=window.atob(i.agreement.fileContent).split("").map(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join("");i.text=window.decodeURIComponent(s)}else if("PDF"===i.agreement.fileType)i.downloadPdf=function(){i.isFirefoxIos?n.open("/aces/Agreement/AgreementVersion/"+i.agreement.id.formNumber+"/"+i.agreement.id.fileId,"_blank"):a.downloadPdfAgreement(i.agreement),o()};else if("DYNAMIC"!==i.agreement.fileType)throw"Unsupported Agreement Format!!!"},i.$postLink=function(){"HTML"===i.agreement.fileType&&(i.fullPage?o():e(function(){$("div[name=agreement_"+i.agreement.id.formNumber+"] .agreement").on("scroll",function(){$(this).scrollTop()+$(this).innerHeight()>=$(this)[0].scrollHeight-10&&o()})},250))}}]})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<div name="agreement_{{$ctrl.agreement.id.formNumber}}" ng-if="::$ctrl.agreement.fileType === \'HTML\'" ng-class="{ \'panel margin-bottom-0\' : $ctrl.collapse }"><h4><span ng-if="::(!$ctrl.collapse &amp;&amp; !$ctrl.hideTitle)">{{$ctrl.getAgreementTitle()}}</span><a class="collapsed" ng-if="::$ctrl.collapse" ng-click="$ctrl.updateCollapseChevron()" href="javascript:void(0);" data-toggle="collapse" data-parent="#agreements" data-target="#collapse{{$ctrl.agreement.id.formNumber}}"><i class="fas fa-chevron-right"></i><span>&nbsp;{{$ctrl.getAgreementTitle()}}</span></a><span class="text-small text-gray" ng-if="::!$ctrl.hideTitle">&nbsp;{{::$ctrl.getVersionText()}}</span></h4><div class="alert alert-warning" ng-if="$ctrl.alert"><p>{{$ctrl.alert | translate}}</p></div><p ng-repeat="(infoKey, infoValue) in $ctrl.agreement.agreementInformation">{{ \'agreement.\' + infoKey | translate}}: {{infoValue}}</p><br ng-if="::!$ctrl.collapse"><div class="{{ $ctrl.fullPage ? \'\' : \'agreement\' }}" ng-if="::!$ctrl.collapse"><p ng-bind-html="$ctrl.text | renderHTML"></p><ng-include ng-if="::$ctrl.agreement.agreementContent" src="$ctrl.getDynamicAgreementTemplate()"></ng-include></div><div class="panel-collapse collapse" ng-if="::$ctrl.collapse" id="collapse{{$ctrl.agreement.id.formNumber}}"><div class="panel-body"><div class="{{ $ctrl.fullPage ? \'\' : \'agreement\' }}"><p ng-bind-html="$ctrl.text | renderHTML"></p><ng-include ng-if="::$ctrl.agreement.agreementContent" src="$ctrl.getDynamicAgreementTemplate()"></ng-include></div></div></div></div><div name="agreement_{{$ctrl.agreement.id.formNumber}}" ng-if="::$ctrl.agreement.fileType === \'PDF\'" ng-class="{ \'panel margin-bottom-0\' : $ctrl.collapse }"><h4><span ng-if="::!$ctrl.collapse">{{$ctrl.getAgreementTitle()}}</span><a class="collapsed" ng-if="::$ctrl.collapse" href="javascript:void(0);" ng-click="$ctrl.downloadPdf()"><i class="far fa-file-pdf"></i><span>&nbsp;{{$ctrl.getAgreementTitle()}}</span></a><span class="text-small text-gray">&nbsp;{{::$ctrl.getVersionText()}}</span></h4><p ng-if="::$ctrl.showDescription">{{::$ctrl.getAgreementDescription()}}</p><br ng-if="::!$ctrl.collapse"><a class="btn btn-default" ng-if="::!$ctrl.collapse" href="javascript:void(0);" ng-click="$ctrl.downloadPdf()"><i class="fa fa-arrow-down margin-right-10">{{ \'word.downloadForm\' | translate}}</i></a></div><div name="agreement_{{$ctrl.agreement.id.formNumber}}" ng-if="::$ctrl.agreement.fileType === \'DYNAMIC\'"><h4>{{$ctrl.getAgreementTitle()}}<span class="text-small text-gray">&nbsp;{{::$ctrl.getVersionText()}}</span></h4><br><div class="agreement"><ng-include src="$ctrl.getDynamicAgreementTemplate()"></ng-include></div></div><hr ng-if="::!$ctrl.hideHr">'}},function(e,t,n){e.exports=function(e){n(92)(e),n(93)(e)}},function(e,t){e.exports=function(e){e.component("currencyImage",{bindings:{currencyType:"<",source:"<?"},template:'<img width="{{::$ctrl.getImageWidth()}}" height="{{::$ctrl.getImageHeight()}}" ng-if="$ctrl.currencyType && $ctrl.currencyType !== \'\'" ng-src="{{$ctrl.getCurrencyImage()}}" alt="" border="0" />',controller:function(){var e=this;e.$onInit=function(){e.getImageWidth=function(){return"WISE"===e.source?24:16},e.getImageHeight=function(){return 16},e.getCurrencyImage=function(){return"WISE"===e.source?"https://wise.com/public-resources/assets/flags/rectangle/"+e.currencyType.toLowerCase()+".png":"/images/web/flags-currency/"+e.currencyType+".svg"}}}})}},function(e,t,n){e.exports=function(e){e.component("moneyAmount",{bindings:{inputModel:"=ngModel",rules:"<",fieldPrefix:"@?",isRequired:"&?",isDisabled:"&?",changeListener:"&?",currencySource:"<?"},template:n(94),controller:["IS_MOBILE","$translate","$element","$rootScope",function(e,t,n,a){var r=this;r.$onInit=function(){r.isRequired=r.isRequired||function(){return!1},r.isDisabled=r.isDisabled||function(){return!1},r.inputModel=r.inputModel||{},1===r.rules.allowedCurrencyTypes.length?r.inputModel.currencyType=r.rules.allowedCurrencyTypes[0]:angular.isDefined(r.inputModel.currencyType)&&null!==r.inputModel.currencyType&&!r.rules.allowedCurrencyTypes.includes(r.inputModel.currencyType)&&(r.inputModel.currencyType=r.rules.allowedCurrencyTypes[0]),r.getInputName=function(e){return r.fieldPrefix&&""!==r.fieldPrefix?r.fieldPrefix+"_"+e:e},r.getInputType=function(){return e?"number":"text"},r.getAmountInputMask=function(){return r.rules.decimalAmountAllowed?"'alias': 'transferAmount'":"'alias': 'transferQuantity'"},r.onChange=function(e){r.changeListener&&r.changeListener({$field:e})},r.selectCurrency=function(e){r.inputModel.currencyType=e,r.onChange("currencyType")},r.getCurrencyChoice=function(){return angular.isDefined(r.inputModel.currencyType)&&null!==r.inputModel.currencyType&&""!==r.inputModel.currencyType?r.inputModel.currencyType:t.instant("word.currency")},r.$postLink=function(){e||a.$applyAsync(function(){var e=n.find("input");e.on("keyup",function(){a.$applyAsync(function(){r.inputModel.amount=e.val()})}),$(e).inputmask()})}}}]})}},function(e,t){e.exports='<div class="input-group">\n    <input name="{{::$ctrl.getInputName(\'amount\')}}" type="{{::$ctrl.getInputType()}}" ng-model="$ctrl.inputModel.amount" am-input-errors data-input-error-owner=".input-group" class="form-control" data-inputmask="{{$ctrl.getAmountInputMask()}}" ng-required="$ctrl.isRequired()" ng-disabled="$ctrl.isDisabled()" ng-change="$ctrl.onChange(\'amount\')" />\n    \n    <div ng-if="$ctrl.rules.allowedCurrencyTypes.length === 1" class="input-group-append">\n        <div class="input-group-text">\n            <currency-image currency-type="$ctrl.inputModel.currencyType" source="$ctrl.currencySource"></currency-image>&nbsp;{{$ctrl.getCurrencyChoice()}}\n        </div>\n    </div>\n    \n    <div ng-if="$ctrl.rules.allowedCurrencyTypes.length > 1" class="input-group-append">\n        <button class="btn btn-outline-secondary dropdown-toggle" type="button" data-toggle="dropdown">\n            <currency-image currency-type="$ctrl.inputModel.currencyType" source="$ctrl.currencySource"></currency-image>&nbsp;{{$ctrl.getCurrencyChoice()}}\n        </button>\n        <div class="dropdown-menu">\n            <a ng-repeat="currencyType in $ctrl.rules.allowedCurrencyTypes" href="javascript:void(0)" ng-click="$ctrl.selectCurrency(currencyType)" class="dropdown-item">\n                <currency-image currency-type="currencyType" source="$ctrl.currencySource"></currency-image>&nbsp;{{currencyType}}\n            </a>\n        </div>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){n(96)(e),n(97)(e),n(98)(e),n(99)(e),n(100)(e)}},function(e,t){e.exports=function(e){e.component("amDateRangePicker",{bindings:{fromDate:"=",toDate:"=",minDate:"<?",maxDate:"<?",datesDisabled:"<?",daysOfWeekDisabled:"@?",onDateRangeChange:"&?",restrictedRange:"<?",disableRestrictedRangeError:"<?",enableJanuaryFirst:"<?",enableJanuaryFirstStarting:"@?",maxViewMode:"<?"},template:["$element","$attrs",function(e,t){var n="";if("INLINE"===t.type)n+='<div class="input-group input-daterange" ng-form="$ctrl.dateRangeForm">',n+='<input class="form-control" name="fromDate" type="text" style="text-align:left;" placeholder="{{\'word.fromDate\' | translate}}" autocomplete="new-from-date" onkeydown="return false" onpaste="return false" ng-model="$ctrl.fromDate"'+(t.hasOwnProperty("required")?" required":"")+"/>",n+='<div class="input-group-addon"></div>',n+='<input class="form-control" name="toDate" type="text" style="text-align:left;" placeholder="{{\'word.toDate\' | translate}}" autocomplete="new-to-date" onkeydown="return false" onpaste="return false" ng-model="$ctrl.toDate"'+(t.hasOwnProperty("required")?" required":"")+"/>",n+="</div>";else{var a="PARTIAL"===t.type?"col-sm-5 col-md-5 col-lg-5":"col-sm-6 col-md-6 col-lg-4",r="PARTIAL"===t.type?"col-sm-7 col-md-7 col-lg-7":"col-sm-6 col-md-6 col-lg-4";n+='<div class="input-daterange" ng-form="$ctrl.dateRangeForm">',n+='<div class="form-group">',n+='<div class="row">',n+='<div class="col-xs-12 '+a+'">',n+="<label class=\"control-label\">{{'word.fromDate' | translate}}</label>",n+="</div>",n+='<div class="col-xs-12 '+r+'">',n+='<input class="form-control" name="fromDate" type="text" style="text-align:left;" autocomplete="new-from-date" onkeydown="return false" onpaste="return false" ng-model="$ctrl.fromDate"'+(t.hasOwnProperty("required")?" required":"")+"/>",n+="</div>",n+="</div>",n+="</div>",n+='<div class="form-group">',n+='<div class="row">',n+='<div class="col-xs-12 '+a+'">',n+="<label class=\"control-label\">{{'word.toDate' | translate}}</label>",n+="</div>",n+='<div class="col-xs-12 '+r+'">',n+='<input class="form-control" name="toDate" type="text" style="text-align:left;" autocomplete="new-to-date" onkeydown="return false" onpaste="return false" ng-model="$ctrl.toDate"'+(t.hasOwnProperty("required")?" required":"")+"/>",n+="</div>",n+="</div>",n+="</div>",n+="</div>"}return n+='<div class="alert alert-danger" ng-if="$ctrl.dateRangeForm.$error.restrictedDateRange">',n+='<p translate="field.error.restrictedDateRange" translate-values="{numOfDays: $ctrl.restrictedRange}">',n+="</p>",n+="</div>"}],controller:["$element","$filter","$timeout","PluginService","LanguageService",function(e,t,n,a,r){var i=this,o=function(e){var t=e.split("-");return new Date(t[0],t[1]-1,t[2])},s=function(){var e=o(i.fromDate),t=o(i.toDate),n=Math.abs(t.getTime()-e.getTime());return Math.ceil(n/864e5)},l=function(){return!i.fromDate||!i.toDate||angular.copy(i.fromDate).replace(/-/g,"")<=angular.copy(i.toDate).replace(/-/g,"")},c=function(){e.find(":input").each(function(){var e=$(this).attr("name");$(this).datepicker("setEndDate",i.maxDate),$(this).datepicker("setStartDate",i.minDate),$(this).datepicker("update",i[e])})};i.$onChanges=function(e){e.minDate&&!e.minDate.isFirstChange()&&e.minDate.previousValue!=e.minDate.currentValue&&c()},i.$onInit=function(){i.disableRestrictedRangeError=i.disableRestrictedRangeError||!1,l()||(i.fromDate=i.toDate),a.load("datePicker").finally(function(){n(function(){e.find("div:first").datepicker({daysOfWeekDisabled:i.daysOfWeekDisabled||[0,6],datesDisabled:i.datesDisabled,maxViewMode:i.maxViewMode,autoclose:!0,format:"yyyy-mm-dd",startDate:i.minDate,endDate:i.maxDate,orientation:"bottom",rtl:r.isRtl(),beforeShowDay:function(e){if(!i.enableJanuaryFirst&&1===e.getDate()&&0===e.getMonth()&&(!i.enableJanuaryFirstStarting||e.getFullYear()<i.enableJanuaryFirstStarting))return!1}}).on("changeDate",function(a){var r=$(a.target).attr("name");if(i[r]=t("date")(a.date,"yyyy-MM-dd"),l()||("fromDate"===r?i.toDate=i.fromDate:"toDate"===r&&(i.fromDate=i.toDate)),i.isAutoOpened=!1,"fromDate"===r&&i.fromDate&&i.toDate&&i.restrictedRange&&s()>i.restrictedRange){var o=new Date(i.fromDate+"T00:00:00Z");o.setDate(o.getDate()+i.restrictedRange),i.toDate="";var u=e.find("input[name=toDate]");$(u).datepicker("setDate",o),$(u).datepicker("show"),i.isAutoOpened=!0}n(function(){c(),!i.isAutoOpened&&i.fromDate&&i.toDate&&angular.isFunction(i.onDateRangeChange)&&i.onDateRangeChange(),!i.disableRestrictedRangeError&&i.restrictedRange&&i.fromDate&&i.toDate&&i.dateRangeForm.$setValidity("restrictedDateRange",s()<=i.restrictedRange)})}),n(function(){c()})})})}}]})}},function(e,t){e.exports=function(e){e.component("amFormEmail",{bindings:{emailModel:"=ngModel",inputName:"@name",isRequired:"&?",serverErrors:"<?"},require:{parentForm:"^^form"},template:function(){return'<am-form-input data-private name="{{$ctrl.inputName}}" ng-model="$ctrl.emailModel" type="text" change-listener="$ctrl.onChange()" model-listener="$ctrl.onModelChange()" label-text="{{\'entity.label.emailAddress\' | translate}}" is-required="$ctrl.isRequired()" server-errors="$ctrl.serverErrors"></am-form-input>'},controller:function(){var e=this,t=function(t){var n;n=angular.isDefined(e.emailModel)&&null!==e.emailModel&&""!==e.emailModel?new RegExp("^[A-Z0-9][A-Z0-9._%+-]{0,63}@(?:(?=[A-Z0-9-]{1,63}[.])[A-Z0-9]+(?:-[A-Z0-9]+)*[.]){1,8}[A-Z]{2,63}$").test(e.emailModel.toUpperCase()):!e.isRequired(),e.parentForm[e.inputName].$setValidity(t,n)};this.$onInit=function(){angular.isUndefined(this.isRequired)&&(this.isRequired=function(){return!1}),this.onChange=function(){t("invalid_format")},this.onModelChange=function(){t("silent")}},this.$onChanges=function(n){n.emailModel&&(t("invalid_format"),e.parentForm[e.inputName].$setDirty())},this.$postLink=function(){e.emailModel&&e.emailModel.length>0&&(t("invalid_format"),e.parentForm[e.inputName].$setDirty())}}})}},function(e,t){e.exports=function(e){e.component("amFormError",{bindings:{name:"@",model:"<?ngModel",errorPrefix:"@?"},require:{parentForm:"^^?form"},template:["$attrs",function(e){var t='<input name="{{$ctrl.name}}" type="text"';return e.ngModel&&(t+=' ng-model="$ctrl.model"'),t+=' am-input-errors error-prefix="{{$ctrl.errorPrefix}}" style="display: none;" />'}],controller:function(){var e=this;e.$onInit=function(){e.errorPrefix=e.errorPrefix||"field.error."},e.$onChanges=function(t){if(t.model&&t.model.currentValue!==t.model.previousValue&&null!==e.parentForm&&angular.isDefined(e.parentForm)&&angular.isDefined(e.parentForm[e.name])){var n=e.parentForm[e.name].$viewChangeListeners;if(angular.isDefined(n)&&n.length>0)for(var a=0;a<n.length;++a)n[a]()}}}})}},function(e,t){e.exports=function(e){e.component("amFormInputConfirm",{bindings:{labelText:"@",confirmModel:"<",mismatchError:"@",preLoad:"<?",inputModel:"=?ngModel",inputName:"@?name",inputType:"@?type",phText:"@?",inputMask:"<?",inputPrefix:"<?"},require:{parentForm:"^^form"},template:["$element","$attrs",function(e,t){var n='<am-form-input name="{{$ctrl.inputName}}" ng-model="$ctrl.inputModel" type="{{$ctrl.inputType}}" label-text="{{$ctrl.labelText}}" change-listener="$ctrl.onInputChange()" model-listener="$ctrl.onModelChange()" ph-text="{{$ctrl.phText}}" input-mask="$ctrl.inputMask" required';return t.inputPrefix&&(n+=' input-prefix="$ctrl.inputPrefix"'),n+="></am-form-input>"}],controller:function(){var e=this;this.$onInit=function(){this.inputType=this.inputType||"text",this.preLoad&&angular.isDefined(this.confirmModel)&&this.confirmModel.length&&(this.inputModel=this.confirmModel),this.onInputChange=function(){var t=angular.isUndefined(e.inputModel)||e.confirmModel===e.inputModel;e.parentForm[e.inputName].$setValidity(e.mismatchError,t)},e.onModelChange=function(){e.parentForm[e.inputName].$setValidity("silent",e.confirmModel===e.inputModel)}},this.$onChanges=function(t){if(t.confirmModel){var n=t.confirmModel.currentValue;if(angular.isUndefined(e.parentForm)||angular.isUndefined(e.parentForm[e.inputName]))return;var a=angular.isUndefined(e.inputModel)||n===e.inputModel;""!==e.inputModel&&e.parentForm[e.inputName].$setValidity(e.mismatchError,a),e.parentForm[e.inputName].$setValidity("silent",a)}}}})}},function(e,t){e.exports=function(e){e.component("amFormSignature",{bindings:{signature:"<",inputName:"@name",phText:"@?",inputNlCode:"@?",serverErrors:"<?",signatureLanguage:"<?"},template:function(){var e="";return e+='<loading-overlay ng-if="$ctrl.isLoading"></loading-overlay>',e+='<div class="form-group">',e+='<div class="row">',e+='<div class="col-xs-12 col-sm-4 col-md-4 col-lg-4 text-break">',e+="<label class=\"control-label\"> {{ $ctrl.translations['word.signature'] }}: </label> &nbsp;{{$ctrl.signature.expectedSignature}}",e+="</div>",e+='<div class="col-xs-12 col-sm-8 col-md-8 col-lg-8">',e+='<am-input ng-model="$ctrl.signature.suppliedSignature" name="{{$ctrl.inputName}}" type="text" ph-text="{{$ctrl.phText}}" input-nl-code="{{$ctrl.inputNlCode}}" server-errors="$ctrl.serverErrors" required></am-input>',e+="</div>",e+="</div>",e+="</div>",e},controller:["LanguageService","$translate","$rootScope",function(e,t,n){var a=this;a.$onInit=function(){a.currentLanguage="";var e=a.signatureLanguage;angular.isDefined(a.signatureLanguage)||(e=t.use(),a.languageListener=n.$on("$translateChangeSuccess",function(e,t){t.language!==a.currentLanguage&&a.translate(t.language)})),a.translate(e)},a.$onDestroy=function(){angular.isDefined(a.languageListener)&&a.languageListener()},a.translate=function(t){a.isLoading=!0,e.translateKeys(["word.signature"],t).then(function(e){a.currentLanguage=t,a.translations=e.data,a.isLoading=!1})}}]})}},function(e,t,n){e.exports=function(e){n(102)(e),n(107)(e),n(108)(e),n(109)(e),n(110)(e),n(111)(e),n(112)(e),n(113)(e)}},function(e,t,n){e.exports=function(e){n(103)(e),n(104)(e),n(106)(e)}},function(e,t){e.exports=function(e){e.component("amButton",{bindings:{btnText:"@?",btnType:"@?",btnIcon:"@?",btnSize:"@?",btnClass:"@?",noResize:"<?",onClick:"&?",isDisabled:"&?",tooltipText:"@?",tooltipSide:"@?",tooltipContainer:"@?"},template:function(){var e="";return e+='<a role="button" aria-label="{{$ctrl.tooltipText}}" href="javascript:void(0);" class="{{$ctrl.getClasses()}}" ng-click="!$ctrl.isDisabled() && $ctrl.onClick()" ng-class="{ \'disabled\' : $ctrl.isDisabled() }">',e+='<i ng-if="::$ctrl.btnIcon" am-tooltip="{{::$ctrl.tooltipText.length > 0}}" class="{{$ctrl.btnIcon}}" data-toggle="tooltip" data-placement="{{::$ctrl.tooltipSide}}" data-container="{{::$ctrl.tooltipContainer}}" data-original-title="{{$ctrl.tooltipText}}"></i>',e+="{{::$ctrl.btnIcon && $ctrl.btnText ? '&nbsp;' : ''}}{{$ctrl.btnText}}",e+="</a>",e},controller:["LanguageService","ACTIVE_CONTEXT","ApplicationContext",function(e,t,n){var a=this;a.$onInit=function(){a.isStandalone=t===n.STANDALONE,this.isDisabled=this.isDisabled||function(){return!1},this.onClick=this.onClick||angular.noop,this.tooltipSide=this.tooltipSide||"left",this.tooltipText=this.tooltipText||"",this.tooltipContainer=this.tooltipContainer||!1,this.getClasses=function(){return"primary"===this.btnType?this.classes="btn btn-primary":"success"===this.btnType?a.isStandalone?this.classes="btn btn-success":this.classes="btn btn-primary":"info"===this.btnType?this.classes="btn btn-info":"icon"===this.btnType?"small"===this.btnSize?this.classes="btn-icon-sm":this.classes="btn-icon":"danger"===this.btnType?this.classes="btn btn-danger":this.classes="btn btn-default",this.classes+=" white-space-normal","icon"!==this.btnType&&("small"==this.btnSize?this.classes+=" btn-sm":"large"==this.btnSize&&(this.classes+=" btn-lg")),this.noResize&&(this.classes+=" no-resize"),this.btnClass&&(this.classes+=" "+this.btnClass),this.classes}},a.$onChanges=function(t){t.btnIcon&&angular.isDefined(a.btnIcon)&&a.btnIcon.length>0&&(a.btnIcon.startsWith("far ")||a.btnIcon.startsWith("fas ")||a.btnIcon.startsWith("fab ")||(a.btnIcon="fa "+a.btnIcon),e.isRtl()&&(a.btnIcon.endsWith("-left")?a.btnIcon=a.btnIcon.replace("-left","-right"):a.btnIcon.endsWith("-right")&&(a.btnIcon=a.btnIcon.replace("-right","-left"))))}}]})}},function(e,t,n){e.exports=function(e){var t=function(e){return e};e.component("buttonList",{bindings:{buttons:"<"},template:n(105)(),controller:["$translate",function(e){var n=this,a=function(e,n,a){return n=n||t,a=a||t,angular.isString(e)?n(e):angular.isFunction(e)?a(e()):""};n.$onInit=function(){n.getButtonText=function(t){return a(t.label,e.instant)},n.getButtonIcon=function(e){return a(e.btnIcon)}}}]})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<div class="row"><div class="col-xs-12 col-sm-4 col-md-4 col-lg-4 order-2 order-sm-1"><div class="panel-btn-left"><p><am-button ng-repeat="button in $ctrl.buttons|filter:{ \'alignment\' : \'left\'}" btn-type="{{button.btnType}}" on-click="button.fn()" is-disabled="button.isDisabled &amp;&amp; button.isDisabled()" btn-text="{{$ctrl.getButtonText(button)}}" btn-icon="{{$ctrl.getButtonIcon(button)}}" btn-class="{{button.btnClass}}" btn-size="{{button.btnSize}}" google-places-btn="{{button.googlePlacesBtn}}"></am-button></p></div></div><div class="col-xs-12 col-sm-8 col-md-8 col-lg-8 order-1 order-sm-2"><div class="panel-btn-right"><p><am-button ng-repeat="button in $ctrl.buttons|filter:{ \'alignment\' : \'right\'}" btn-type="{{button.btnType}}" on-click="button.fn()" is-disabled="button.isDisabled &amp;&amp; button.isDisabled()" btn-text="{{$ctrl.getButtonText(button)}}" btn-icon="{{$ctrl.getButtonIcon(button)}}" btn-class="{{button.btnClass}}" btn-size="{{button.btnSize}}" google-places-btn="{{button.googlePlacesBtn}}"></am-button></p></div></div></div>'}},function(e,t){e.exports=function(e){e.component("buttonPanel",{bindings:{buttons:"<"},template:'<section class="panel panel-btns"><div class="panel-body"><button-list buttons="$ctrl.buttons"></button-list></div></section>'})}},function(e,t){e.exports=function(e){e.component("amDatePicker",{bindings:{inputName:"@?name",selectedDate:"=",minDate:"<?",maxDate:"<?",datesDisabled:"<?",daysOfWeekDisabled:"@?",modelListener:"&?",isRequired:"<?",phText:"@?",defaultViewDate:"<?",enableJanuaryFirst:"<?",enableJanuaryFirstStarting:"@?",maxViewMode:"<?",isDisabled:"&?"},template:function(){return'<input name="{{$ctrl.inputName}}" class="form-control" type="text" autocomplete="new-date" onkeydown="return false" onpaste="return false" ng-model="$ctrl.selectedDate" ng-disabled="$ctrl.isDisabled()" placeholder="{{$ctrl.getPhText()}}" ng-required="$ctrl.isRequired" am-input-errors />'},controller:["$element","$filter","$translate","$timeout","PluginService","LanguageService",function(e,t,n,a,r,i){var o=this;o.$onInit=function(){(function(){if(!o.selectedDate)return!0;var e=-1!==o.selectedDate.indexOf("-")?o.selectedDate.replace(/-/g,""):o.selectedDate,t=void 0,n=void 0;return!o.minDate&&!o.maxDate||(o.minDate?o.maxDate?(t=-1!==o.minDate.indexOf("-")?o.minDate.replace(/-/g,""):o.minDate,n=-1!==o.maxDate.indexOf("-")?o.maxDate.replace(/-/g,""):o.maxDate,e>=t&&e<=n):e>=(t=-1!==o.minDate.indexOf("-")?o.minDate.replace(/-/g,""):o.minDate):e<=(n=-1!==o.maxDate.indexOf("-")?o.maxDate.replace(/-/g,""):o.maxDate))})()||(o.selectedDate=void 0),o.isDisabled=o.isDisabled||function(){return!1},o.getPhText=function(){return o.phText?o.phText:o.isRequired?n.instant("word.required"):n.instant("word.optional")},r.load("datePicker").finally(function(){a(function(){e.datepicker({daysOfWeekDisabled:o.daysOfWeekDisabled||[0,6],datesDisabled:o.datesDisabled,maxViewMode:o.maxViewMode,autoclose:!0,format:"yyyy-mm-dd",startDate:o.minDate,endDate:o.maxDate,orientation:"bottom",defaultViewDate:o.defaultViewDate,rtl:i.isRtl(),beforeShowDay:function(e){if(!o.enableJanuaryFirst&&1===e.getDate()&&0===e.getMonth()&&(!o.enableJanuaryFirstStarting||e.getFullYear()<o.enableJanuaryFirstStarting))return!1}}).on("changeDate",function(e){o.selectedDate=t("date")(e.date,"yyyy-MM-dd"),o.modelListener&&a(function(){o.modelListener()})}),e.datepicker("update",o.selectedDate)})})}}]})}},function(e,t){e.exports=function(e){e.component("amFileInput",{require:{ngModelCtrl:"ngModel",parentForm:"^^?form"},bindings:{amInputModel:"=ngModel",labelText:"@?",inputName:"@?name",isRequired:"&?",multiple:"<?",allowedExtensions:"<?",maxSize:"<?",rules:"<?",showRules:"<?",modelListener:"&?",serverErrors:"<?"},template:["$attrs",function(e){var t="";return t+='<label class="btn btn-default" for="{{$ctrl.inputName}}"><i class="fa fa-upload"></i> {{$ctrl.labelText}}</label>',t+='<input name="{{$ctrl.inputName}}" id="{{$ctrl.inputName}}" am-input-errors type="file" '+(e.multiple?"multiple":"")+' ng-required="$ctrl.isRequired()" ng-hide="true" />',t+='<div ng-if="$ctrl.amInputModel.length > 0" class="alert alert-gray">',t+='    <p ng-repeat="selectedFile in $ctrl.amInputModel">{{selectedFile.name}}</p>',t+="</div>",t+='<div ng-if="$ctrl.showRules">',t+='    <span class="text-small" translate="file.upload.rules" translate-values="$ctrl.getRuleValues()"></span>',t+="</div>"}],controller:["$translate","$element","ErrorService",function(e,t,n){var a=this;a.$onInit=function(){a.inputName=a.inputName||"fileInput",a.labelText=a.labelText||e.instant(a.multiple?"file.multiple.label":"file.single.label"),a.isRequired=a.isRequired||function(){return!1},a.rules=a.rules||{},a.rules.allowedExtensions=a.rules.allowedExtensions||a.allowedExtensions||[],a.rules.maxSize=a.rules.maxSize||a.maxSize||0,a.selectedFiles=[],a.getRuleValues=function(){return{allowedExtensions:a.rules.allowedExtensions.join(", "),maxMbSize:Math.floor(a.rules.maxSize/1024/1024)}},this.ngModelCtrl.$validators.invalid_file_extension=function(e,t){var n=e||t;if(a.rules.allowedExtensions.length>0&&angular.isDefined(n))for(var r=0;r<n.length;++r)if(n[r]&&n[r].name){var i=n[r].name.split(".").pop().toLowerCase();if(-1===a.rules.allowedExtensions.indexOf(i))return!1}return!0},this.ngModelCtrl.$validators.max_file_size=function(e,t){var n=e||t;if(a.rules.maxSize&&angular.isDefined(n))for(var r=0;r<n.length;++r)if(n[r]&&n[r].size&&n[r].size>a.rules.maxSize)return!1;return!0},this.ngModelCtrl.$viewChangeListeners.push(function(){a.amInputModel=a.ngModelCtrl.$viewValue,a.modelListener&&a.modelListener()})},a.$postLink=function(){if($(t.find("input[type=file]")).bind("change",function(){a.ngModelCtrl.$setViewValue(void 0),a.ngModelCtrl.$setViewValue(this.files)}),null!==a.parentForm&&angular.isDefined(a.parentForm)){var e=a.parentForm[a.inputName];e&&n.setErrorSuppression(e,{required:["invalid_file_extension","max_file_size"]})}}}]})}},function(e,t){e.exports=function(e){e.component("amRangeEntry",{bindings:{amInputModel:"=ngModel",inputName:"@?name",minPhText:"@?",maxPhText:"@?",modelListener:"&?",isMinRequired:"&?",isMaxRequired:"&?",isMinDisabled:"&?",isMaxDisabled:"&?",maxInputAlias:"@?",minInputAlias:"@?"},template:function(){var e="";return e+='<div am-input-errors class="row">',e+='<div class="col-xs-5 col-sm-5 col-md-5 col-lg-5">',e+='<am-input name="{{$ctrl.inputName + \'_minimum\'}}" ng-model="$ctrl.amInputModel.minimum" ph-text="{{$ctrl.minPhText}}" is-required="$ctrl.isMinRequired()" is-disabled="$ctrl.isMinDisabled()" input-mask-alias="{{$ctrl.minInputAlias}}" model-listener="$ctrl.onModelChange()"></am-input>',e+="</div>",e+='<div class="col-xs-2 col-sm-2 col-md-2 col-lg-2">',e+='<span class="em-dash">-</span>',e+="</div>",e+='<div class="col-xs-5 col-sm-5 col-md-5 col-lg-5">',e+='<am-input name="{{$ctrl.inputName + \'_maximum\'}}" ng-model="$ctrl.amInputModel.maximum" ph-text="{{$ctrl.maxPhText}}" is-required="$ctrl.isMaxRequired()" is-disabled="$ctrl.isMaxDisabled()" input-mask-alias="{{$ctrl.maxInputAlias}}" model-listener="$ctrl.onModelChange()"></am-input>',e+="</div>",e+="</div>",e},controller:function(){var e=this;e.$onInit=function(){e.isMinRequired=e.isMinRequired||function(){return!1},e.isMaxRequired=e.isMaxRequired||function(){return!1},e.isMinDisabled=e.isMinDisabled||function(){return!1},e.isMaxDisabled=e.isMaxDisabled||function(){return!1},e.minInputAlias=e.minInputAlias||"",e.maxInputAlias=e.maxInputAlias||"",e.onModelChange=function(){e.modelListener&&e.modelListener()}}}})}},function(e,t){e.exports=function(e){e.component("amSwitch",{require:{ngModelCtrl:"ngModel"},bindings:{inputName:"@?name",amInputModel:"=ngModel",isDisabled:"&?",isRequired:"&?",onText:"@?",offText:"@?",modelListener:"&?",ariaLabelledBy:"<?",serverErrors:"<?"},template:function(){var e="";return e+='<div am-input-errors role="radiogroup" aria-labelledby="{{$ctrl.ariaLabelledBy}}" tabindex="0" class="btn-switch" ng-class="{ \'disabled\' : $ctrl.isDisabled() } ">',e+='<a href="javascript:void(0);" role="radio" aria-checked="{{$ctrl.amInputModel === true}}" class="btn" ng-click="$ctrl.setModel(true)" ng-class="{ \'active\' : $ctrl.amInputModel === true }">{{$ctrl.getOnText()}}</a>',e+='<a href="javascript:void(0);" role="radio" aria-checked="{{$ctrl.amInputModel === false}}" class="btn" ng-click="$ctrl.setModel(false)" ng-class="{ \'active\' : $ctrl.amInputModel === false }">{{$ctrl.getOffText()}}</a>',e+="</div>",e},controller:["$translate","$element",function(e,t){var n=this;n.$onInit=function(){n.isDisabled=n.isDisabled||function(){return!1},n.isRequired||(n.isRequired=function(){return angular.isUndefined(n.amInputModel)||t.attr("required")}),n.getOnText=function(){return n.onText?n.onText:e.instant("word.yes")},n.getOffText=function(){return n.offText?n.offText:e.instant("word.no")},n.setModel=function(e){n.isDisabled()||(n.amInputModel=e,n.onModelChange())},n.ngModelCtrl.$render=function(){var e;angular.isDefined(n.ngModelCtrl.$viewValue)&&(n.amInputModel=!0===(e=n.ngModelCtrl.$viewValue)||"true"===e)},n.onModelChange=function(){n.ngModelCtrl.$setViewValue(n.amInputModel),n.modelListener&&n.modelListener()}}}]})}},function(e,t){e.exports=function(e){e.component("amTextarea",{require:{ngModelCtrl:"ngModel",parentForm:"^^?form"},bindings:{inputName:"@?name",amInputModel:"=ngModel",phText:"@?",isDisabled:"&?",isRequired:"&?",modelListener:"&?",noTrim:"<?",inputNlCode:"@?",maxlength:"@?"},template:["$element","$attrs",function(t,n){var a=t.prop("attributes"),r=e.extractInputAttributes(a,{name:!0,"ph-text":!0,"is-required":!0,"is-disabled":!0,"input-nl-code":!0,maxlength:!0});return"true"===n.noTrim&&(r+='ng-trim="false" '),'<textarea name="{{$ctrl.inputName}}" '+r+' ng-model="$ctrl.amInputModel" am-input-errors placeholder="{{$ctrl.getPhText()}}" ng-required="$ctrl.isRequired()" ng-disabled="$ctrl.isDisabled()" ng-class="::{ \'form-control\' : true }" ng-change="$ctrl.onModelChange()"></textarea>'}],controller:["$element","$translate","NL_PATTERNS",function(e,t,n){var a=this;this.$onInit=function(){a.amInputModel&&angular.isFunction(a.amInputModel.replace)&&(a.amInputModel=a.amInputModel.replace(new RegExp("&lt;","g"),"<"),a.amInputModel=a.amInputModel.replace(new RegExp("&gt;","g"),">"),a.amInputModel=a.amInputModel.replace(new RegExp("&quot;","g"),'"'),a.amInputModel=a.amInputModel.replace(new RegExp("&amp;","g"),"&")),this.isDisabled=this.isDisabled||function(){return!1},this.isRequired=this.isRequired||function(){return e.attr("required")},this.getPhText=function(){return a.phText?a.phText:a.isRequired()?t.instant("word.required"):t.instant("word.optional")},this.onModelChange=function(){if(a.inputNlCode&&a.parentForm){var e=("JAPANESE_KATAKANA"==a.inputNlCode?n[a.inputNlCode]:"ENGLISH"!==a.inputNlCode?new XRegExp("^["+n[a.inputNlCode]+",\\s\\d]*$"):new XRegExp("^[\\x00-\\x7F]*$")).test(a.amInputModel);a.parentForm[a.inputName].$setValidity("invalid_language",e)}a.ngModelCtrl.$setViewValue(a.amInputModel),a.modelListener&&a.modelListener()}},this.$onChanges=function(t){t.maxlength&&(angular.isDefined(t.maxlength.currentValue)?e.find("textarea").attr("maxlength",t.maxlength.currentValue):e.find("textarea").removeAttr("maxlength"))}}]})}},function(e,t){e.exports=function(e){e.component("amTime",{require:{ngModelCtrl:"ngModel"},bindings:{inputName:"@?name",amInputModel:"=ngModel",isDisabled:"&?",isRequired:"&?",phText:"@?",modelListener:"&?"},template:["$element","$attrs",function(t,n){var a=t.prop("attributes"),r="";return r+='<input name="{{$ctrl.inputName}}" '+e.extractInputAttributes(a,{name:!0,"ph-text":!0,"is-required":!0,"is-disabled":!0,"model-listener":!0,"server-errors":!0})+'  ng-model="$ctrl.amInputModel" am-input-errors type="time" ng-required="$ctrl.isRequired()" ng-disabled="$ctrl.isDisabled()" ng-class="{ \'form-control\' : true, \'disabled\' : $ctrl.isDisabled()  }" placeholder="{{$ctrl.getPhText()}}" ng-change="$ctrl.onModelChange()"/>'}],controller:["$translate","$element",function(e,t){var n=this;n.$onInit=function(){n.isDisabled=n.isDisabled||function(){return!1},n.isRequired||(n.isRequired=function(){return angular.isUndefined(n.amInputModel)||t.attr("required")}),n.getPhText=function(){return n.phText?n.phText:n.isRequired?e.instant("word.required"):e.instant("word.optional")},n.ngModelCtrl.$render=function(){angular.isDefined(n.ngModelCtrl.$viewValue)&&n.ngModelCtrl.$viewValue instanceof Date&&(n.amInputModel=n.ngModelCtrl.$viewValue)},n.onModelChange=function(){n.ngModelCtrl.$setViewValue(n.amInputModel),n.modelListener&&n.modelListener()}}}]})}},function(e,t){e.exports=function(e){e.component("amTimeRangeEntry",{bindings:{amInputModel:"=ngModel",inputName:"@?name",fromPhText:"@?",toPhText:"@?",modelListener:"&?",isFromRequired:"&?",isToRequired:"&?",isFromDisabled:"&?",isToDisabled:"&?",fromDatalist:"@?",toDatalist:"@?"},template:["$element","$attrs",function(e,t){var n="";t.fromDatalist&&(n+='list="'+t.fromDatalist+'" ');var a="";t.toDatalist&&(a+='list="'+t.toDatalist+'" ');var r="";return r+='<div am-input-errors class="input-group">',r+='<div class="input-group-addon">From:</div>',r+='<am-time name="{{$ctrl.inputName + \'_from\'}}" ng-model="$ctrl.amInputModel.from" ph-text="{{$ctrl.fromPhText}}" '+n+' is-required="$ctrl.isFromRequired()" is-disabled="$ctrl.isFromDisabled()" model-listener="$ctrl.onModelChange()" data-input-error-owner=".input-group"></am-time>',r+='<div class="input-group-addon">To:</div>',r+='<am-time name="{{$ctrl.inputName + \'_to\'}}" ng-model="$ctrl.amInputModel.to" ph-text="{{$ctrl.toPhText}}" '+a+' is-required="$ctrl.isToRequired()" is-disabled="$ctrl.isToDisabled()" model-listener="$ctrl.onModelChange()" data-input-error-owner=".input-group"></am-time>',r+="</div>"}],controller:function(){var e=this;e.$onInit=function(){e.isFromRequired=e.isFromRequired||function(){return!1},e.isToRequired=e.isToRequired||function(){return!1},e.isFromDisabled=e.isFromDisabled||function(){return!1},e.isToDisabled=e.isToDisabled||function(){return!1},e.onModelChange=function(){e.modelListener&&e.modelListener()}}}})}},function(e,t,n){e.exports=function(e){n(115)(e)}},function(e,t,n){e.exports=function(e){e.component("languageList",{template:n(116),controller:["LanguageService",function(e){var t=this;t.$onInit=function(){t.getCurrentLanguage=e.getCurrentLanguage,t.getLanguageDisplay=e.getLanguageDisplay,t.getAvailableLanguages=e.getAvailableLanguages,t.updateLanguage=e.updateLanguage}}]})}},function(e,t){e.exports='<div class="row">\n    <div class="col">\n        <a href="javascript:void(0);" class="dropdown-item lang-ltr" persistent-dropdown-closer ng-if="languageOption !== $ctrl.getCurrentLanguage()" ng-repeat="languageOption in $ctrl.getAvailableLanguages()" ng-click="$ctrl.updateLanguage(languageOption)">\n            {{$ctrl.getLanguageDisplay(languageOption)}}\n        </a>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){n(118)(e)}},function(e,t){e.exports=function(e){e.component("loadingSpinner",{template:'<br><p><i class="fa fa-2x fa-spin fa-spinner"></i></p><br>',controller:angular.noop})}},function(e,t,n){e.exports=function(e){n(120)(e),n(121)(e),n(122)(e)}},function(e,t){e.exports=function(e){e.component("amFormAddress",{bindings:{addressModel:"=ngModel",rules:"<?",countries:"<?",fieldPrefix:"@?",inputNlCode:"@?",isRequired:"&?",isDisabled:"&?",onlyCountryRequired:"<?",noPostalCode:"<?",modelListener:"<?"},require:{parentForm:"^^?form"},template:function(){var e="";return e+='<am-form-switch ng-if="$ctrl.verifySuspicionsAddress()" name="{{$ctrl.getFieldName(\'verifySuspiciousAddress\')}}" id="{{$ctrl.getFieldName(\'verifySuspiciousAddress\')}}" ng-model="$ctrl.addressModel.verifySuspiciousAddress" model-listener="$ctrl.onChange(\'verifySuspiciousAddress\')" label-text="{{ $ctrl.getSuspiciousAddressLabelText() }}" is-required="$ctrl.isFieldRequired(\'verifySuspiciousAddress\')" full-width></am-form-switch>',e+='<am-form-country-select name="{{$ctrl.getFieldName(\'country\')}}" ng-model="$ctrl.addressModel.country" countries="$ctrl.rules.allowedCountries" label-text="{{\'address.label.country\' | translate}}" empty-option-text="{{\'address.field.country\' | translate}}" is-required="$ctrl.isFieldRequired(\'country\')" model-listener="$ctrl.onChange(\'country\')" is-disabled="$ctrl.isDisabled()"></am-form-country-select>',e+='<am-form-input name="{{$ctrl.getFieldName(\'street1\')}}" maxlength="{{$ctrl.rules.streetOneRules.maxLength}}" ng-model="$ctrl.addressModel.street1" input-nl-code="{{$ctrl.inputNlCode}}" label-text="{{\'address.label.street1\' | translate}}" is-required="$ctrl.isFieldRequired(\'street1\')" model-listener="$ctrl.onChange(\'street1\')" is-disabled="$ctrl.isDisabled()" input-mask="disabled"></am-form-input>',e+='<am-form-input name="{{$ctrl.getFieldName(\'street2\')}}" maxlength="{{$ctrl.rules.streetTwoRules.maxLength}}" ng-model="$ctrl.addressModel.street2" input-nl-code="{{$ctrl.inputNlCode}}" label-text="{{\'address.label.street2\' | translate}}" model-listener="$ctrl.onChange(\'street2\')" is-disabled="$ctrl.isDisabled()"></am-form-input>',e+='<am-form-input name="{{$ctrl.getFieldName(\'city\')}}" maxlength="{{$ctrl.rules.cityRules.maxLength}}" ng-model="$ctrl.addressModel.city" input-nl-code="{{$ctrl.inputNlCode}}" label-text="{{\'address.label.city\' | translate}}" is-required="$ctrl.isFieldRequired(\'city\')" model-listener="$ctrl.onChange(\'city\')" is-disabled="$ctrl.isDisabled()"></am-form-input>',e+='<am-form-state-select name="{{$ctrl.getFieldName(\'state\')}}" ng-model="$ctrl.addressModel.state" country-model="$ctrl.addressModel.country" country-rules="$ctrl.rules.countryRules" google-state-info="$ctrl.addressModel.googleStateInfo" label-text="{{\'address.label.state\' | translate}}" empty-option-text="{{\'address.field.state\' | translate}}" is-required="$ctrl.isFieldRequired(\'state\')" model-listener="$ctrl.onChange(\'state\')" is-disabled="$ctrl.isDisabled()"></am-form-state-select>',e+='<am-form-input ng-if="$ctrl.rules.countryRules[$ctrl.addressModel.country.alpha3].postalCodeRules" name="{{$ctrl.getFieldName(\'postalCode\')}}" maxlength="10" ng-model="$ctrl.addressModel.postalCode" input-nl-code="{{$ctrl.inputNlCode}}" label-text="{{\'address.label.postalCode\' | translate}}" is-required="$ctrl.isFieldRequired(\'postalCode\')" model-listener="$ctrl.onChange(\'postalCode\')" is-disabled="$ctrl.isDisabled()"></am-form-input>',e},controller:["$translate",function(e){var t=this,n=function(){if(angular.isUndefined(t.addressModel.country))return!1;var e=t.rules.countryRules[t.addressModel.country.alpha3].postalCodeRules;return angular.isDefined(e)&&e.required};t.$onInit=function(){angular.isUndefined(t.rules)&&(t.rules={allowedCountries:t.countries},t.rules.countryRules={},t.countries.forEach(function(e){var n={};t.noPostalCode||(n.postalCodeRules={required:!0}),t.rules.countryRules[e.alpha3]=n})),t.isRequired=t.isRequired||function(){return!1},t.isDisabled=t.isDisabled||function(){return!1},t.isFieldRequired=function(e){return!("postalCode"===e&&!n())&&(!!t.isRequired()||("country"===e?t.onlyCountryRequired:"verifySuspiciousAddress"===e))},t.getFieldName=function(e){return t.fieldPrefix?t.fieldPrefix+e.charAt(0).toUpperCase()+e.substring(1):e},t.onChange=function(e){"country"!==e||n()||delete t.addressModel.postalCode,t.modelListener&&t.modelListener(e)},t.verifySuspicionsAddress=function(){return t.suspiciousAddress&&angular.isUndefined(t.addressModel.verifySuspiciousAddress)},t.getSuspiciousAddressLabelText=function(){return"mailing"===t.fieldPrefix||"employer"===t.fieldPrefix?e.instant("address.label.verifySuspicious."+t.fieldPrefix):e.instant("address.label.verifySuspicious.primary")}}}]})}},function(e,t){e.exports=function(e){e.component("amCountrySelect",{require:{ngModelCtrl:"ngModel"},bindings:{countryModel:"=ngModel",countries:"<",topCountries:"<?",inputName:"@?name",hideIpCountry:"<?",hideEmptyOption:"@?",emptyOptionText:"@?",isDisabled:"&?",isRequired:"&?",modelListener:"&?",serverErrors:"<?"},template:["$attrs",function(e){var t="";return angular.isDefined(e.hideEmptyOption)&&(t+='hide-empty-option="{{$ctrl.hideEmptyOption}}"'),'<am-select name="{{$ctrl.inputName}}" ng-model="$ctrl.countryModel" model-listener="$ctrl.onModelChange()" options="$ctrl.sortedCountries" option-key="$ctrl.countryOptionKey" '+t+' empty-option-text="{{$ctrl.emptyOptionText}}" is-disabled="$ctrl.isDisabled()" is-required="$ctrl.isRequired()" server-errors="$ctrl.serverErrors"></am-select>'}],controller:["orderByTranslatedFilter","filterFilter","CountryService",function(e,t,n){var a=this,r=void 0,i=function(t,n){var a=e(t,"country.","alpha3");return e(n,"country.","alpha3").concat(a)};a.$onInit=function(){r=angular.copy(a.countries),a.topCountries=a.topCountries||[],a.sortedCountries=i(a.countries,a.topCountries),a.isDisabled=a.isDisabled||function(){return!1},a.isRequired=a.isRequired||function(){return!1},a.countryOptionKey=function(e){return"country."+e.alpha3},a.onModelChange=function(){a.ngModelCtrl.$setViewValue(a.countryModel),a.modelListener&&a.modelListener()},n.fetchIpCountry().then(function(e){var n=e;angular.isDefined(n)&&!a.hideIpCountry&&a.sortedCountries.length>1&&t(a.sortedCountries,{alpha3:n.alpha3}).length>0&&a.sortedCountries.unshift(n)})},a.$doCheck=function(){angular.isDefined(a.sortedCountries)&&(angular.equals(r,a.countries)||(a.sortedCountries=i(a.countries,a.topCountries),r=angular.copy(a.countries)))}}]})}},function(e,t){e.exports=function(e){e.component("amFormStateSelect",{require:{parentForm:"^^form",ngModelCtrl:"ngModel"},bindings:{inputName:"@?name",stateModel:"=ngModel",countryModel:"<",countryRules:"<?",googleStateInfo:"<?",labelText:"@",emptyOptionText:"@?",isRequired:"&?",isDisabled:"&?",serverErrors:"<?",modelListener:"&?"},template:'<am-form-select name="{{$ctrl.inputName}}" ng-model="$ctrl.stateModel" options="$ctrl.states" label-text="{{$ctrl.labelText}}" model-listener="$ctrl.onModelChange()" option-key="$ctrl.stateOptionKey" empty-option-text="{{$ctrl.emptyOptionText}}" no-translate="true" is-required="$ctrl.isRequired()" is-disabled="$ctrl.isDisabled()" server-errors="$ctrl.serverErrors"></am-form-select>',controller:["orderByFilter","StateService","GooglePlacesService","filterFilter",function(e,t,n,a){var r=this,i=[{dbName:"N/A"}];this.$onInit=function(){this.activeStateRequest=null,this.isRequired=this.isRequired||function(){return!1},this.isDisabled=this.isDisabled||function(){return!1},angular.isUndefined(this.stateModel)?(this.states=i,this.stateModel=i[0]):this.states=[this.stateModel],this.stateOptionKey=function(e){return e.dbName},this.onModelChange=function(){angular.isDefined(r.preFetchState)&&r.preFetchState!==r.stateModel&&(r.preFetchState=void 0,r.parentForm[r.inputName]&&r.parentForm[r.inputName].$setPristine()),r.ngModelCtrl.$setViewValue(r.stateModel),r.modelListener&&r.modelListener()}};this.$onChanges=function(o){if(o.countryModel){var s=o.countryModel.currentValue;angular.isDefined(this.activeStateRequest)&&null!==this.activeStateRequest&&this.activeStateRequest.cancel(),angular.isUndefined(s)||null===s?this.states=i:(angular.isUndefined(r.stateModel)&&(r.stateModel=i[0]),angular.isDefined(this.states)?r.preFetchState=r.stateModel:r.preFetchState=i[0],this.activeStateRequest=t.fetchStates(s.alpha3),this.activeStateRequest.promise.then(function(t){if(!angular.isUndefined(t)){var n=t.data;if(angular.isDefined(n.states)&&n.states.length){if(angular.isDefined(r.stateModel)&&null!==r.stateModel)for(var a=0;a<n.states.length;++a)if(n.states[a].countryAlpha3===r.stateModel.countryAlpha3){if(n.states[a].isoCode===r.stateModel.isoCode){r.stateModel=n.states[a];break}if(angular.isDefined(r.stateModel.google)&&(n.states[a].dbCode===r.stateModel.google.name||n.states[a].dbName===r.stateModel.google.name)){r.stateModel=n.states[a];break}}r.states=function(e,t){if(r.countryRules&&r.countryRules[t]){var n=r.countryRules[t];if(n.ineligibleStates&&n.ineligibleStates.length>0)return e.filter(function(e){return!n.ineligibleStates.includes(e.isoCode)})}return e}(n.states,s.alpha3),r.states=e(r.states,"dbName")}else r.states=i}},function(e){r.activeStateRequest.aborted||(r.states=i)}).finally(function(){r.activeStateRequest=null}))}else if(o.googleStateInfo){s=o.googleStateInfo.currentValue;if(angular.isDefined(r.activeStateCodeLookupRequest)&&null!==r.activeStateCodeLookupRequest&&this.activeStateCodeLookupRequest.cancel(),angular.isDefined(s)&&angular.isDefined(s.google)&&angular.isDefined(r.countryModel)&&angular.isDefined(r.states)&&r.states.length>0&&r.states[0].countryAlpha3===r.countryModel.alpha3){var l=a(r.states,function(e){return e.dbCode===s.google.name||e.dbName===s.google.name});if(1==l.length)return void(r.stateModel=l[0]);r.activeStateCodeLookupRequest=n.getStateDbCodeFromGoogleResponse(s.google.response),r.activeStateCodeLookupRequest.promise.then(function(e){var t=e.data.stateCode||"";if(t.length>0){var n=a(r.states,function(e){return e.dbCode===t});if(1==n.length)return void(r.stateModel=n[0])}r.stateModel=i[0]},function(e){}).finally(function(){r.activeStateCodeLookupRequest=null})}}},this.$onDestroy=function(){angular.isDefined(this.activeStateRequest)&&null!==this.activeStateRequest&&this.activeStateRequest.cancel(),angular.isDefined(r.activeStateCodeLookupRequest)&&null!==r.activeStateCodeLookupRequest&&this.activeStateCodeLookupRequest.cancel()}}]})}},function(e,t,n){e.exports=function(e){n(124)(e),n(126)(e),n(127)(e)}},function(e,t,n){e.exports=function(e){e.component("amPage",{template:n(125)(),controller:["ACTIVE_CONTEXT","AM_BRANCH","AM_BAR_TYPE","NATIVE_LOGIN_MESSAGE","ApplicationContext","DynamicTranslationService","PageService",function(e,t,n,a,r,i,o){var s=this,l=function(){var e=o.getPageLoadingText();return i.getDisplayText(e)};s.$onInit=function(){s.isPageLoading=o.isPageLoading,s.getPageLoadingText=l,s.hasPageLoadingText=function(){return""!==l()},s.getPageSource=o.getPagePath,s.hasHeader=("CORE"===t||"TWS_TRADING_PERMISSION"===t||"LOGIN_TASK"===t)&&""===n&&"T"!==a,s.finishPageContent=o.onPartialLoad,s.isAmDependency=e===r.AM_DEPENDENCY,s.isFullWrapper=function(){return"Support"===o.getCurrentPage().id}}}]})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<div class="page-content" id="amPageContent"><loading-overlay loading-template="candyStripe" ng-if="$ctrl.isPageLoading() &amp;&amp; !$ctrl.hasPageLoadingText()"></loading-overlay><loading-overlay loading-template="fullPage" loading-text="{{$ctrl.getPageLoadingText()}}" ng-if="$ctrl.isPageLoading() &amp;&amp; $ctrl.hasPageLoadingText()"></loading-overlay><div ng-if="::$ctrl.isAmDependency"><am-page-header ng-if="::$ctrl.hasHeader"></am-page-header><am-page-breadcrumbs></am-page-breadcrumbs></div><div ng-show="!$ctrl.isPageLoading()" ng-class="{ \'wrapper-full\' : $ctrl.isFullWrapper(), \'wrapper\' : !$ctrl.isFullWrapper() }"><div class="container"><component-include path="$ctrl.getPageSource()" onload="$ctrl.finishPageContent()" suppress-child-notifications="true"></component-include></div></div></div>'}},function(e,t){e.exports=function(e){e.component("amPageBreadcrumbs",{template:function(){var e="";return e+='<section ng-show="$ctrl.getBreadcrumbs().length > 1" class="breadcrumb-container">',e+='    <div class="container">',e+='        <div class="row">',e+='            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">',e+='                <ol class="breadcrumb">',e+='                    <li ng-repeat="bc in $ctrl.getBreadcrumbs()" ng-class="{ \'active\' : $last }">',e+='                        <a ng-hide="$last" ng-click="$ctrl.onBreadcrumbClicked($index)" href="javascript:void(0);">',e+="                            {{$ctrl.getBreadcrumbTitle(bc)}}",e+="                        </a>",e+='                        <span ng-show="$last">',e+="                            {{$ctrl.getBreadcrumbTitle(bc)}}",e+="                        </span>",e+="                    </li>",e+="                </ol>",e+="            </div>",e+="        </div>",e+="    </div>",e+="</section>",e},controller:["PageService","NavigationService",function(e,t){var n=this;n.$onInit=function(){n.getBreadcrumbTitle=e.getPageTitle,n.getBreadcrumbs=e.getBreadcrumbs,n.onBreadcrumbClicked=function(e){var a=n.getBreadcrumbs()[e];t.navigateToBreadcrumb(a)}}}]})}},function(e,t){e.exports=function(e){e.component("amPageHeader",{template:function(){var e="";return e+='<section ng-if="!$ctrl.isHideHeader()" class="page-head">',e+='    <div class="container">',e+='        <div class="row">',e+='            <div class="col-xs-7 col-sm-10 col-md-10 col-lg-10">',e+="                <h3>",e+='                    <i ng-if="$ctrl.getCurrentPage().icon.length" class="fa {{$ctrl.getCurrentPage().icon}} margin-right-10"></i>',e+="                    {{$ctrl.getPageTitle($ctrl.getCurrentPage())}}",e+='                    <span class="hidden-sm hidden-md hidden-lg"><br /></span>',e+='                    <span class="account-numbers">',e+='                        <a href="javascript:void(0);" class="btn btn-primary" ng-click="$ctrl.openPicker()" ng-repeat="account in $ctrl.getPickerSelections() track by $index" ng-class="{ \'disabled\' : !$ctrl.isPickerAvailable() }">{{account}}</a>',e+='                        <a href="javascript:void(0);" class="btn btn-secondary" ng-click="$ctrl.openPicker()" ng-if="$ctrl.displayPickerEdit()">{{\'word.addOrEdit\' | translate}} </a>',e+="                    </span>",e+="                    <span ng-if=\"$ctrl.hasEscrowSelection\" class=\"ml-10 text-sm fw-normal\" translate=\"escrowAccount.info\" translate-values=\"{'faqLinkStart': '<a href=&quot;https://ibkr.info/article/4675&quot; target=&quot;_blank&quot;>', 'faqLinkEnd': '</a>'}\"  ></span>",e+="                </h3>",e+="            </div>",e+='            <div class="col-xs-5 col-sm-2 col-md-2 col-lg-2">',e+='                <span class="btn-group-right">',e+='                    <am-button ng-if="$ctrl.isPrintSupported()" on-click="$ctrl.print()" btn-type="icon" btn-icon="fa-print" tooltip-text="{{\'word.print\' | translate}}"></am-button>',e+='                    <am-help ng-if="$ctrl.isHelpSupported()"></am-help>',e+="                </span>",e+="            </div>",e+="        </div>",e+="    </div>",e+="</section>",e},controller:["$translate","UserPlatformService","PageService","PickerService","AM_BRANCH",function(e,t,n,a,r){var i=this;i.$onInit=function(){i.getPageTitle=n.getPageTitle,i.getCurrentPage=n.getCurrentPage,i.print=n.print,i.isHelpSupported=function(){return!0!==n.getCurrentPage().pageData.hideHelp&&"LOGIN_TASK"!==r},i.isPrintSupported=function(){return(t.isWeb()||t.isDesktopTws())&&"LOGIN_TASK"!==r&&!0!==n.getCurrentPage().pageData.hidePrint},i.isHideHeader=function(){return t.isSimplifiedPlatform()||!0===n.getCurrentPage().pageData.hideHeader},i.isPickerAvailable=n.isPickerAvailable,i.openPicker=function(){if(n.isPickerAvailable()){var e=n.getPickerSource();a.getCurrentSource()!==e&&n.resetPicker(),a.openPicker()}},i.displayPickerEdit=function(){return n.isPickerAvailable()&&n.isPickerSupported()&&n.getActivePickerSelections().length>0&&!n.getCurrentPage().pageData.hidePickerSelections},i.getPickerSelections=function(){var t=[];if(i.hasEscrowSelection=!1,n.isPickerSupported()&&n.getActivePickerSelections().length>0&&!n.getCurrentPage().pageData.hidePickerSelections){var r=n.getActivePickerSelections();if(r.length>3){var o=e.instant("picker.account.selection.count.label",{count:r.length});return t.push(o),t}for(var s=0;s<r.length;++s){var l=r[s],c=a.getEntryDisplay(l);l.isEscrow&&(i.hasEscrowSelection=!0),t.push(c)}}return t}}}]})}},function(e,t,n){e.exports=function(e){n(129)(e)}},function(e,t){e.exports=function(e){e.component("questionnaireQuestion",{require:{parentForm:"^^form",formServerErrorsCtrl:"^^formServerErrors"},bindings:{question:"=ngModel"},templateUrl:e.WEBAPP_ROOT+"/components/questionnaire/questionnaireQuestionForm.html",controller:["$filter",function(e){var t=this;t.$onInit=function(){t.clearError=function(){t.formServerErrorsCtrl.getServerErrors()&&t.formServerErrorsCtrl.getServerErrors()["questionResponse_"+t.question.questionId]&&delete t.formServerErrorsCtrl.getServerErrors()["questionResponse_"+t.question.questionId]},t.getServerErrors=function(){return t.formServerErrorsCtrl.getServerErrors()||{}}}}]})}},function(e,t,n){e.exports=function(e){n(131)(e),n(133)(e)}},function(e,t,n){e.exports=function(e){e.component("amDynamicSequence",{bindings:{sequenceSource:"@",cancelFn:"&?",completeFn:"&?"},template:n(132)(),controller:["$filter","$anchorScroll","ACTIVE_CONTEXT","ApplicationContext","DynamicSequenceService","PageService",function(e,t,n,a,r,i){var o=this;o.$onInit=function(){var s=i.getCurrentPage().pageData||{},l=s.sequenceFunctions||{};o.cancelFn=o.cancelFn||l.cancelFn||void 0,o.completeFn=o.completeFn||l.completeFn||void 0,o.getSequencePage=r.getSequencePage,o.getSequenceButtonData=r.getSequenceButtonData,o.getSequenceErrors=function(){return r.getSequenceData().errors},o.isStandalone=n===a.STANDALONE,o.canCancel=function(){return 0===r.getSequenceData().stepIndex&&o.cancelFn},o.canComplete=function(){return r.getSequenceData().complete&&o.completeFn};var c=function(t){var n=e("filter")(o.getSequenceButtonData().extraButtons,{alignment:t});return angular.isDefined(n)&&n.length>0},u=function(){return o.canCancel()||angular.isDefined(o.getSequenceButtonData().backBtn)||c("left")},d=function(){return o.canComplete()||angular.isDefined(o.getSequenceButtonData().continueBtn)||c("right")};o.getLeftBtnColumns=function(){return o.isStandalone?u()?d()?"col-xs-4 col-sm-4 col-md-4 col-lg-2 order-2 order-sm-1":"col-xs-12 col-sm-12 col-md-12 col-lg-12 order-2 order-sm-1":"hide":"col-xs-12 col-sm-6 col-md-6 col-lg-6 order-2 order-sm-1"},o.getRightBtnColumns=function(){return o.isStandalone?d()?u()?"col-xs-8 col-sm-8 col-md-8 col-lg-10 order-1 order-sm-2":"col-xs-12 col-sm-12 col-md-12 col-lg-12 order-1 order-sm-2":"hide":"col-xs-12 col-sm-6 col-md-6 col-lg-6 order-1 order-sm-2"},o.hasButtons=function(){var e=o.getSequenceButtonData();return!angular.isUndefined(e)&&(!!e.isEnabled&&(!!o.canCancel()||(!!o.canComplete()||(!!(angular.isDefined(e.extraButtons)&&e.extraButtons.length>0)||(angular.isDefined(e.backBtn)||angular.isDefined(e.continueBtn))))))},o.finishSequenceContent=function(){t(),i.onPartialLoad()};var p=o.sequenceSource||s.sequenceSource||void 0;s.sequenceType&&(s.sequenceType.length>0&&"/"!==s.sequenceType.charAt(0)&&(p+="/"),p+=s.sequenceType),i.isPageLoading()?i.setOnPageLoad(function(){return r.initializeSequence(p,s.sequenceParameters)}):r.initializeSequence(p,s.sequenceParameters)},o.$onDestroy=r.destroySequence}]})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<div ng-form="$ctrl.sequenceForm" form-server-errors="$ctrl.getSequenceErrors()"><component-include path="$ctrl.getSequencePage()" onload="$ctrl.finishSequenceContent()"></component-include></div><div ng-if="$ctrl.hasButtons()" page-buttons><div ng-class="$ctrl.getLeftBtnColumns()"><div class="panel-btn-left"><p><am-button ng-if="$ctrl.canCancel()" on-click="$ctrl.cancelFn()" btn-text="{{\'word.cancel\' | translate}}"></am-button><am-button ng-if="$ctrl.getSequenceButtonData().backBtn" on-click="$ctrl.getSequenceButtonData().backBtn.onClick()" btn-text="{{$ctrl.getSequenceButtonData().backBtn.btnText || (\'word.back\' | translate)}}" btn-class="{{$ctrl.getSequenceButtonData().backBtn.btnClass}}"></am-button><am-button ng-repeat="extraButton in $ctrl.getSequenceButtonData().extraButtons|filter:{\'alignment\':\'left\'}" on-click="extraButton.onClick()" btn-type="{{extraButton.btnType || \'default\'}}" btn-text="{{extraButton.btnText}}" btn-class="{{extraButton.btnClass}}"></am-button></p></div></div><div ng-class="$ctrl.getRightBtnColumns()"><div class="panel-btn-right"><p><am-button ng-if="$ctrl.canComplete()" on-click="$ctrl.completeFn()" btn-type="primary" btn-text="{{\'word.finish\' | translate }}"></am-button><am-button ng-if="!$ctrl.canComplete()" ng-repeat="extraButton in $ctrl.getSequenceButtonData().extraButtons|filter:{\'alignment\':\'right\'}" on-click="extraButton.onClick()" btn-type="{{extraButton.btnType || \'default\'}}" is-disabled="extraButton.isDisabled()" btn-text="{{extraButton.btnText}}" btn-icon="{{extraButton.btnIcon || \'\'}}" btn-class="{{extraButton.btnClass}}"></am-button><am-button ng-if="$ctrl.getSequenceButtonData().continueBtn" google-places-btn="{{$ctrl.getSequenceButtonData().continueBtn.googlePlacesBtn}}" on-click="$ctrl.getSequenceButtonData().continueBtn.onClick()" is-disabled="$ctrl.getSequenceButtonData().continueBtn.isDisabled()" btn-type="{{$ctrl.getSequenceButtonData().continueBtn.btnType || \'primary\'}}" btn-text="{{$ctrl.getSequenceButtonData().continueBtn.btnText || (\'word.continue\' | translate)}}" btn-icon="{{$ctrl.getSequenceButtonData().continueBtn.btnIcon || \'\'}}" btn-class="{{$ctrl.getSequenceButtonData().continueBtn.btnClass}}"></am-button></p></div></div></div>'}},function(e,t){e.exports=function(e){e.component("sequenceProgressBar",{templateUrl:e.WEBAPP_ROOT+"/components/sequence/sequenceProgressBar.html",controller:["DynamicSequenceService","$translate",function(e,t){var n=this;n.$onInit=function(){n.getProgressValue=function(){return Math.floor((100*e.getSequenceData().stepIndex+1)/e.getSequenceData().totalSteps)},n.getScreenReaderProgressLabel=function(){return n.getProgressValue()+"% "+t.instant("word.complete")}}}]})}},function(e,t){e.exports=function(e){e.component("amMoreInformation",{bindings:{helpId:"@",subId:"@?"},template:function(){return'<a href="javascript:void(0);" ng-click="$ctrl.showInfo()"><i class="fa fa-info-circle"></i>&nbsp;{{\'word.moreInformation\' | translate}}</a>'},controller:["HelpService",function(e){var t=this;t.$onInit=function(){t.showInfo=function(){e.openHelpModal(t.helpId,t.subId)}}}]})}},function(e,t){e.exports=function(e){e.component("amNotes",{transclude:!0,bindings:{notes:"<",severity:"@",keyPrefix:"@",disableBulletedList:"<?"},template:function(){var e="";return e='<div ng-if="::$ctrl.relevantNotes.length">',e+='<div ng-if="::$ctrl.severity === \'CRITICAL\'" class="text-center">',e+="<br />",e+='<i class="fa fa-2x fa-exclamation-triangle text-gray"></i>',e+='<h5 ng-repeat="note in ::$ctrl.relevantNotes" ng-bind-html="note | amNote | renderHTML"></h5>',e+="</div>",e+='<div ng-if="::$ctrl.severity === \'MEDIUM\'" class="alert alert-warning">',e+='<ul ng-if="::$ctrl.relevantNotes.length > 1 && !$ctrl.disableBulletedList"><li ng-repeat="note in ::$ctrl.relevantNotes" ng-bind-html="note | amNote | renderHTML"></li></ul>',e+='<p ng-if="::$ctrl.relevantNotes.length > 1 && $ctrl.disableBulletedList" ng-repeat="note in ::$ctrl.relevantNotes" ng-bind-html="note | amNote | renderHTML"></p>',e+='<p ng-if="::$ctrl.relevantNotes.length === 1" ng-bind-html="$ctrl.relevantNotes[0] | amNote | renderHTML"></p>',e+="<ng-transclude></ng-transclude>",e+="</div>",e+="<div ng-if=\"::$ctrl.severity !== 'CRITICAL' && $ctrl.severity !== 'MEDIUM'\" class=\"alert alert-gray\">",e+='<ul ng-if="::$ctrl.relevantNotes.length > 1 && !$ctrl.disableBulletedList"><li ng-class="$ctrl.getTextClass(note)" ng-repeat="note in ::$ctrl.relevantNotes" ng-bind-html="note | amNote | renderHTML"></li></ul>',e+='<p ng-if="::$ctrl.relevantNotes.length > 1 && $ctrl.disableBulletedList" ng-class="$ctrl.getTextClass(note)" ng-repeat="note in ::$ctrl.relevantNotes" ng-bind-html="note | amNote | renderHTML"></p>',e+='<span ng-class="$ctrl.getTextClass($ctrl.relevantNotes[0])" ng-if="::$ctrl.relevantNotes.length === 1" ng-bind-html="$ctrl.relevantNotes[0] | amNote | renderHTML"></span>',e+="</div>",e+="</div>",e},controller:["UserPlatformService",function(e){var t=this;t.$onInit=function(){t.disableBulletedList=t.disableBulletedList||!1,t.getTextClass=function(t){return e.isSimplifiedPlatform()&&"LOW"===t.severity?"text-sm":""},t.relevantNotes=[];for(var n=0;n<t.notes.length;++n)t.notes[n].severity===t.severity&&t.relevantNotes.push(t.notes[n])}}]})}},function(e,t){function n(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}e.exports=function(e){e.component("componentInclude",{bindings:{path:"<",onload:"&?",suppressChildNotifications:"<?"},require:{$parentInclude:"^^?componentInclude"},template:"<div></div>",controller:["$rootScope","$q","$element","$compile","$timeout","$templateRequest",function(e,t,a,r,i,o){var s=this;s.$onInit=function(){s.onload=s.onload||angular.noop,s.suppressChildNotifications=s.suppressChildNotifications||!1,s.contentElement=$(a.find("div"))[0],s.includeScope=void 0,s.cleanScope=function(){angular.isDefined(s.includeScope)&&s.includeScope.$destroy()},s.notifyLoad=function(e){var t=[s.path].concat(n(e));s.onload({$loadPath:t}),angular.isDefined(s.$parentInclude)&&null!==s.$parentInclude&&!s.$parentInclude.suppressChildNotifications&&s.$parentInclude.notifyLoad(t)}},s.$onChanges=function(n){if(!angular.isUndefined(n)&&!angular.isUndefined(n.path)){var a=n.path.currentValue;angular.isString(a)&&""!==a?function(e){if(e.endsWith(".component")){var n=e.substring(0,e.length-".component".length),a=t.defer();return a.resolve("<"+n+"></"+n+">"),a.promise}return o(e)}(a).then(function(t){s.cleanScope(),s.includeScope=e.$new(),$(s.contentElement).html(t),r(s.contentElement)(s.includeScope)}).catch(function(e){$(s.contentElement).html(""),console.warn("Component load failed ["+a+"]: "+e)}).finally(function(){i(function(){(s.suppressChildNotifications||0===$(s.contentElement).find("component-include").length)&&s.notifyLoad([])})}):$(s.contentElement).html("")}},s.$onDestroy=s.cleanScope}]})}},function(e,t){e.exports=function(e){e.component("loadIframe",{bindings:{frameName:"@?name",url:"<",method:"@",params:"<?",pageFrame:"<?",frameHeight:"<?",autoHeight:"<?",loadCallback:"&?"},template:function(){var e="";return e+='<div ng-style="{{::$ctrl.containerStyle}}">',e+='   <div class="embed-responsive" ng-class="{ \'frame-full-page\' : $ctrl.pageFrame }"></div>',e+="</div>",e},controller:["$timeout","$element","$scope","PageService",function(e,t,n,a){var r=this;r.$onInit=function(){r.frameName=r.frameName||"amIframe",r.frameId=Date.now(),this.checkSize=function(e){e[0].style.height=e[0].contentWindow.document.body.scrollHeight+"px"},this.containerStyle={},angular.isDefined(this.frameHeight)&&this.frameHeight>0&&(this.containerStyle.height=this.frameHeight+"px")},r.$postLink=function(){this.pageFrame&&a.resizeContent();var i=angular.element("<iframe></iframe>");$(i).attr("id",r.frameId),$(i).attr("name",r.frameName),$(i).addClass("embed-responsive-item"),$(t.find(".embed-responsive")).append(i);if(r.loadCallback){e(function t(){!function(){try{var e=i[0].contentDocument,t=angular.isUndefined(e)||"complete"===e.readyState,n=void 0;angular.isDefined(i[0].contentWindow)&&(n=i[0].contentWindow.document);var a=angular.isUndefined(n)||"complete"===n.readyState;return t&&a}catch(e){return!0}}()?e(t,250):n.$applyAsync(function(){r.loadCallback()})},250)}if(r.autoHeight)if(i.is(":visible"))r.checkSize(i);else var o=n.$watch(function(){return i.is(":visible")},function(){i.is(":visible")&&(r.checkSize(i),o())});var s=angular.element("<form></form>");$("body").append(s);var l=r.params;if(angular.isDefined(l))for(var c in l){var u=angular.element("<input />");u.attr("type","hidden"),u.attr("name",c),u.attr("value",l[c]),s.append(u)}s.attr("id",r.frameId+"_form"),s.attr("method",r.method),s.attr("action",r.url),s.attr("target",r.frameName),n.$applyAsync(function(){s.submit()})},r.$onDestroy=function(){$("#"+r.frameId).attr("src",$("#"+r.frameId).attr("src")),$("#"+r.frameId+"_form").remove()}}]})}},function(e,t,n){e.exports=function(e){n(139)(e)}},function(e,t,n){e.exports=function(e){e.component("signatureBlock",{bindings:{documentSignature:"<",serverErrors:"<?",noSignatureText:"<?",signatureLanguage:"<?",signatureWarning:"<?"},template:n(140)(),controller:["LanguageService","ResourceService","$translate","$rootScope",function(t,n,a,r){var i=this,o=function(){i.signatureFormat=i.documentSignature.signatureSubmissionData.formIdentifier.formNumber,i.isLoading=!0,n.create(e.AM_SERVER_PATH+"/SignatureSubstitution",{documentSignature:i.documentSignature}).then(function(e){i.databaseSignaturesEnabled=e.data.enabled,i.databaseSignaturesEnabled&&(i.signatureBlockHtml=e.data.signatureBlockHtml,i.documentSignature.signatureSubmissionData=e.data.signatureSubmissionData)}).finally(function(){i.isLoading=!1,i.translate()})};i.$onInit=function(){i.signatureWarning=i.signatureWarning||"default",i.noSignatureWarning="default"===i.signatureWarning,i.currentLanguage="",angular.isDefined(i.signatureLanguage)||(i.languageListener=r.$on("$translateChangeSuccess",function(e,t){t.language!==i.currentLanguage&&i.translate(t.language)})),angular.isDefined(i.documentSignature)&&o()},i.$onChanges=function(e){e.documentSignature&&angular.isUndefined(e.documentSignature.previousValue)&&angular.isDefined(e.documentSignature.currentValue)&&o()},i.$onDestroy=function(){angular.isDefined(i.languageListener)&&i.languageListener()},i.getAffiliateName=function(){var e=i.documentSignature.affiliateName;return void 0!=e&&""!==e||(e="Interactive Brokers"),e},i.translate=function(e){angular.isUndefined(e)&&(e=angular.isDefined(i.signatureLanguage)?i.signatureLanguage:a.use());i.isLoading=!0;var n=[{key:"signature.text."+i.signatureFormat,prop:{affiliateName:i.getAffiliateName(),ulStart:"<ul>",ulEnd:"</ul>",liStart:"<li>",liEnd:"</li>",breakTag:"<br/>"}},{key:"signature.warning."+i.signatureWarning,prop:{affiliateName:i.getAffiliateName()}},{key:"signature.operatorBehalfOf",prop:{accountTitle:i.documentSignature.accountTitle}}];angular.forEach(["word.signature","word.username","word.accountTitle","word.dated","signature.forBenefitOf","signature.warning.title","word.signHere","signature.oneOf"],function(e){n.push({key:e})}),t.translateKeysWithParams(n,e).then(function(t){i.translations=t.data,i.currentLanguage=e,i.isLoading=!1})}}]})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<loading-overlay ng-if="$ctrl.isLoading"></loading-overlay><div ng-if="$ctrl.databaseSignaturesEnabled" ng-bind-html="$ctrl.signatureBlockHtml | renderHTML"></div><div class="row" ng-if="!$ctrl.databaseSignaturesEnabled"><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"><h4 ng-if="$ctrl.signatureFormat === 7504">{{$ctrl.translations[\'word.signature\']}}</h4><h4 ng-if="$ctrl.documentSignature.documentId !== 0">{{$ctrl.translations[\'signature.operatorBehalfOf\']}}</h4><p ng-if="!$ctrl.noSignatureText" ng-class="{ \'text-sm\' : $ctrl.signatureFormat === 7500 }" ng-bind-html="$ctrl.translations[\'signature.text.\' + $ctrl.signatureFormat] | renderHTML"></p><br><am-field-value ng-if="$ctrl.documentSignature.accountTitle.length &gt; 0" label-text="{{$ctrl.translations[\'word.accountTitle\']}}" value-text="{{$ctrl.documentSignature.accountTitle}}"></am-field-value><am-field-value ng-if="$ctrl.documentSignature.date" label-text="{{$ctrl.translations[\'word.dated\']}}" value-text="{{$ctrl.documentSignature.date}}"></am-field-value><am-field-value ng-if="$ctrl.documentSignature.forBenefitOf.length &gt; 0" label-text="{{$ctrl.translations[\'signature.forBenefitOf\']}}" value-text="{{$ctrl.documentSignature.forBenefitOf}}"></am-field-value><br ng-if="!$ctrl.noSignatureWarning"><div class="alert alert-warning" ng-if="!$ctrl.noSignatureWarning"><p><strong>{{$ctrl.translations[\'signature.warning.title\']}}</strong></p><p>{{$ctrl.translations[\'signature.warning.\' + $ctrl.signatureWarning]}}</p></div><div ng-if="$ctrl.signatureFormat === 7529"><br><p>{{\'signature.note.paxos\' | translate}}</p></div><br></div></div><div ng-form="signatureForm"><div ng-if="$ctrl.documentSignature.signatureSubmissionData.signatures.length === 1 || $ctrl.documentSignature.requirement !== \'ANY_HOLDER\'"><am-form-signature signature="signature" name="{{\'signature_\' + $index}}" input-nl-code="{{$ctrl.documentSignature.inputLanguage}}" ph-text="{{ $ctrl.translations[\'word.signHere\'] }}" server-errors="$ctrl.serverErrors" signature-language="$ctrl.signatureLanguage" ng-repeat="signature in $ctrl.documentSignature.signatureSubmissionData.signatures track by $index"></am-form-signature></div><div class="form-group" ng-if="$ctrl.documentSignature.signatureSubmissionData.signatures.length &gt; 1 &amp;&amp; $ctrl.documentSignature.requirement === \'ANY_HOLDER\'"><div class="row"><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"><label class="control-label">{{$ctrl.translations[\'signature.oneOf\']}}:&nbsp;</label><span ng-repeat="signature in $ctrl.documentSignature.signatureSubmissionData.signatures">{{signature.expectedSignature + (!$last ? \', \' : \'\')}}</span><br><am-input ng-model="$ctrl.documentSignature.signatureSubmissionData.signatures[0].suppliedSignature" name="signature_0" type="text" ph-text="{{ $ctrl.translations[\'word.signHere\'] }}" input-nl-code="{{$ctrl.documentSignature.inputLanguage}}" server-errors="$ctrl.serverErrors" required></am-input></div></div></div></div>'}},function(e,t){e.exports=function(e){e.component("tablePreferenceConfig",{bindings:{preference:"<",preferenceName:"@",preferenceKeyPrefix:"@"},template:['<li ng-if="$ctrl.hasTablePreference()" persistent-dropdown-parent>','   <am-button btn-type="icon" btn-icon="fa-cog" tooltip-text="{{ \'word.configure\' | translate}}"></am-button>','   <div class="dropdown-menu dropdown-content dropdown-right">',"       <p class=\"title\">{{'tablePreferences.title' | translate}}</p>",'       <div class="btn-selectors">','           <p ng-repeat="column in $ctrl.preference">','               <a ng-if="!column.forced" ng-click="!column.disabled && $ctrl.toggleColumn(column)" href="javascript:void(0);" class="btn btn-default" ng-class="{ \'active\' : column.displayEnabled, \'disabled\' : column.disabled }">',"                   {{$ctrl.preferenceKeyPrefix + column.name | translate}}","               </a>","           </p>","       </div>",'       <div class="btn-applicators">',"           <p>",'               <am-button on-click="$ctrl.applyColumns()" btn-type="info" btn-text="{{ \'word.apply\' | translate}}" persistent-dropdown-closer></am-button>',"           </p>","       </div>","   </div>","</li>"].join(""),controller:["PreferenceService",function(e){var t=this;t.$onInit=function(){t.toggleColumn=function(e){e.displayEnabled=!e.displayEnabled},t.applyColumns=function(){for(var n in t.preference){if(t.preference.hasOwnProperty(n))(r=t.preference[n]).enabled=r.displayEnabled}var a=angular.copy(t.preference);for(var n in a){var r;if(a.hasOwnProperty(n))delete(r=a[n]).displayEnabled,delete r.forced}e.updatePreference(t.preferenceName,a)},t.hasTablePreference=function(){var e=t.preference;for(var n in e)if(e.hasOwnProperty(n)&&!e[n].forced)return!0;return!1}},t.$onChanges=function(e){if(e.preference){var t=e.preference.currentValue;if(angular.isDefined(t))for(var n in t)if(t.hasOwnProperty(n)){var a=t[n];a.displayEnabled=a.enabled}}}}]})}},function(e,t,n){e.exports=function(e,t){n(143)(e),n(144)(e),n(145)(e),n(146)(e),n(147)(e),n(148)(e),n(149)(e),n(150)(e)}},function(e,t,n){var a=n(9);e.exports=function(e){e.constant("AM_UUID",a.uuid())}},function(e,t){e.exports=function(e){e.constant("ApplicationContext",Object.freeze({STANDALONE:"STANDALONE",AM_DEPENDENCY:"AM_DEPENDENCY",WEBSITE:"WEBSITE",PAXOS:"PAXOS"}))}},function(e,t){e.exports=function(e){e.constant("BreadcrumbAction",Object.freeze({NONE:"NONE",CLEAR:"CLEAR",REPLACE:"REPLACE",NAVIGATE:"NAVIGATE",CLOSEST_PARENT:"CLOSEST_PARENT"}))}},function(e,t){e.exports=function(e){Inputmask.extendAliases({latin:{placeholder:"",definitions:{o:{validator:"[\0-]"}}},dateValue:{mask:"9{4}-9{2}-9{2}"},quantity:{alias:"numeric",groupSeparator:",",autoGroup:!0,rightAlign:!1,autoUnmask:!0,digits:0},quantityPositive:{alias:"quantity",allowMinus:!1,min:0},quantityNegative:{alias:"quantity",allowPlus:!1,max:0},amount:{alias:"quantity",digits:2},amountPositive:{alias:"amount",allowMinus:!1,min:0},amountNegative:{alias:"amount",allowPlus:!1,max:0},am_percentage:{alias:"percentage",rightAlign:!1,autoUnmask:!0},am_emailtoken:{mask:"9{5}",placeholder:""},simplePercentage:{alias:"quantityPositive",max:100},capitalize:{mask:"a{1,+}",placeholder:"",definitions:{a:{validator:"[0-9a-zA-Z. ]",casing:"upper"}}}})}},function(e,t){e.exports=function(e){var t=!1;try{var n=document.createElement("input");n.type="date",t="date"===n.type}catch(e){}e.constant("IS_DATE_SUPPORTED",t)}},function(e,t){e.exports=function(e){var t=navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i);e.constant("IS_MOBILE",null!==t)}},function(e,t){e.exports=function(e){e.constant("NavigationAction",Object.freeze({NONE:"NONE",REDIRECT:"REDIRECT",POPUP:"POPUP",MODAL:"MODAL",NATIVE_MOBILE_APP:"NATIVE_MOBILE_APP"}))}},function(e,t){e.exports=function(e){e.constant("NL_PATTERNS",Object.freeze({CHINESE_SIMPLIFIED:"\\p{Han}\\p{P}\\p{Latin}",CHINESE_TRADITIONAL:"\\p{Han}\\p{P}\\p{Latin}",HEBREW:"\\p{Hebrew}\\p{P}\\p{Latin}",ARABIC:"\\p{Arabic}\\p{P}\\p{Latin}",RUSSIAN:"\\p{Cyrillic}\\p{P}\\p{Latin}",MACEDONIAN:"\\p{Cyrillic}\\p{P}\\p{Latin}",BULGARIAN:"\\p{Cyrillic}\\p{P}\\p{Latin}",THAI:"\\p{Thai}\\p{P}\\p{Latin}",KOREAN:"\\p{Hangul}\\p{P}\\p{Latin}",KHMER:"\\p{Khmer}\\p{P}\\p{Latin}",JAPANESE:"\\p{Han}\\p{Hiragana}\\p{Katakana}\\p{P}\\p{Latin}",JAPANESE_KATAKANA:/^[\uff61-\uff9f\s]+$/,PORTUGUESE:"\\p{P}\\p{Latin}",GERMAN:"\\p{P}\\p{Latin}",SPANISH:"\\p{P}\\p{Latin}"}))}},function(e,t,n){e.exports=function(e){n(152)(e),n(167)(e),n(177)(e),n(181)(e),n(182)(e),n(183)(e),n(184)(e),n(185)(e),n(186)(e),n(187)(e),n(188)(e),n(189)(e),n(190)(e),n(191)(e)}},function(e,t,n){e.exports=function(e){n(153)(e),n(154)(e),n(155)(e),n(156)(e),n(157)(e),n(158)(e),n(159)(e),n(160)(e),n(161)(e),n(162)(e),n(163)(e),n(164)(e),n(165)(e),n(166)(e)}},function(e,t){e.exports=function(e){e.directive("alignForm",function(){return{restrict:"A",controller:["$attrs",function(e){this.alignment=e.alignForm}]}})}},function(e,t){e.exports=function(e){e.directive("amFormButton",["FormInputService",function(t){var n={"label-text":!0};return{restrict:"E",require:"^^?wideForm",template:function(a,r){var i=a.prop("attributes"),o="<am-button "+e.extractInputAttributes(i,n)+"></am-button>";return t.html({label:r.labelText,labelDesc:r.labelDesc,input:o,inputDesc:r.inputDesc})},link:function(e,n,a,r){t.size(n,{wide:null!==r&&"disabled"!==r.config})}}}])}},function(e,t){e.exports=function(e){e.directive("amFormDate",["FormInputService",function(t){var n={"label-text":!0};return{restrict:"E",require:["ng-model","^^?wideForm"],template:function(a,r){var i=a.prop("attributes"),o="<am-date "+e.extractInputAttributes(i,n)+' ng-model="'+r.ngModel+'"></am-date>';return t.html({label:r.labelText,labelDesc:r.labelDesc,input:o,inputDesc:r.inputDesc})},link:function(e,n,a,r){t.size(n,{wide:null!==r[1]&&"disabled"!==r[1].config})}}}])}},function(e,t){e.exports=function(e){e.directive("amFormICheck",function(){var t={"label-text":!0};return{restrict:"E",require:"ng-model",template:function(n,a){var r=n.prop("attributes"),i=e.extractInputAttributes(r,t),o="";return o+='<div class="form-group"><div class="row">',o+='<div class="col-xs-2 col-sm-1 col-md-1 col-lg-1"><p class="text-center">',o+='<input i-check ng-model="'+a.ngModel+'" '+i+" />",o+="</p></div>",o+='<div class="col-xs-10 col-sm-11 col-md-11 col-lg-11"><p>'+a.labelText+"</p></div>",o+="</div></div>",o}}})}},function(e,t){e.exports=function(e){e.directive("amFormInput",["FormInputService","UserPlatformService","ModalService",function(t,n,a){var r={"label-text":!0,"hook-enter":!0};return{restrict:"E",require:["ng-model","^^?wideForm"],template:function(i,o){var s=i.prop("attributes"),l="";l+="<am-input "+e.extractInputAttributes(s,r)+' ng-model="'+o.ngModel+'"></am-input>';var c="";if(o.helpText){var u="";n.isSimplifiedPlatform()&&!a.isModalOpen()&&(u='on-click="showTooltipInModal()" '),c+='<am-button btn-type="icon" '+u+'btn-icon="fas fa-info-circle" tooltip-side="top" tooltip-text="'+o.helpText+'"></am-button>'}return t.html({label:o.labelText,labelDesc:o.labelDesc,input:l,inputDesc:o.inputDesc,icon:c})},link:function(e,n,r,i){var o={wide:null!==i[1]&&"disabled"!==i[1].config,icon:angular.isDefined(r.helpText)};t.size(n,o),r.inputSuffix&&n.find("input").attr("data-input-error-owner",".input-group"),e.showTooltipInModal=function(){return a.openInfoModal({modalData:{infoContent:"<p>"+r.helpText+"</p>"}})}}}}])}},function(e,t){e.exports=function(e){e.directive("amFormInputRtl",["FormInputService",function(t){var n={"label-text":!0,"hook-enter":!0};return{restrict:"E",require:["ng-model","^^?wideForm"],template:function(t,a){var r=t.prop("attributes"),i="<div class=\"form-group\" ng-style=\"{'direction' : 'rtl'}\">";return i+='<div class="row">',i+='<div class="form-input-container"></div>',i+='<div class="form-input-container">',i+="<am-input "+e.extractInputAttributes(r,n)+' ng-model="'+a.ngModel+'"></am-input>',i+="</div>",i+='<div class="form-label-container">',i+='<label class="control-label">'+a.labelText+"</label>",i+="</div>",i+="</div>",i+="</div>"},link:function(e,n,a,r){t.size(n,{wide:null!==r[1]&&"disabled"!==r[1].config})}}}])}},function(e,t){e.exports=function(e){e.directive("amFormLabel",["UserPlatformService","FormInputService",function(e,t){return{restrict:"E",require:["^^?wideForm","^^?alignForm"],template:function(e,n){var a="";n.valueClass?a+='<label class="'+n.valueClass+'">':a+="<label>",n.valueIcon&&(a+='<i class="fa '+n.valueIcon+'"></i>&nbsp;'),n.valueIsHtml?a+='<span ng-bind-html="'+n.valueText+' | renderHTML"></span></label>':a+=n.valueText+"</label>";var r={label:n.labelText,input:a};return n.valueAlign&&(r.inputClasses="text-"+n.valueAlign),n.valueNgClass&&(r.inputNgClasses=n.valueNgClass),n.labelDesc&&(r.labelDesc=n.labelDesc),t.html(r)},link:function(n,a,r,i){var o,s=null!==i[0]&&"disabled"!==i[0].config||angular.isDefined(r.fullWidth);o=!(!angular.isUndefined(r.singleLine)||!e.isSimplifiedPlatform())||angular.isDefined(r.singleLine)&&"false"!==r.singleLine,t.size(a,{wide:s,singleLine:o}),null!==i[1]&&angular.isDefined(i[1])&&t.align(a,{alignment:i[1].alignment,singleLine:o})}}}])}},function(e,t){e.exports=function(e){e.directive("amFormPrivateLabel",["FormInputService",function(e){return{restrict:"E",require:"^^?wideForm",scope:{inputName:"@?name",labelText:"<",valueText:"<"},template:function(t,n){var a="";n.valueClass?a+='<label class="'+n.valueClass+'">':a+="<label>",n.valueIcon&&(a+='<i class="fa '+n.valueIcon+'"></i>&nbsp;'),n.valueIsHtml?a+='<span ng-bind-html="{{ $ctrl.getValueText() | renderHTML }}"></span></label>':a+="{{ $ctrl.getValueText() }}",a+='<span class="margin-left-5 margin-right-5">&nbsp;</span>',a+='<am-button btn-type="icon" btn-icon="{{ $ctrl.display ? \'fa-eye\' : \'fa-eye-slash\' }}" on-click="$ctrl.toggle()"></am-button>',a+="</label>";var r={label:"{{ $ctrl.labelText }}",input:a+='<am-form-error ng-if="$ctrl.inputName.length > 0" name="{{$ctrl.inputName}}"></am-form-error>'};return n.valueAlign&&(r.inputClasses="text-"+n.valueAlign),e.html(r)},link:function(t,n,a,r){var i=null!==r&&"disabled"!==r.config||angular.isDefined(a.fullWidth),o=angular.isDefined(a.singleLine);e.size(n,{wide:i,singleLine:o})},bindToController:!0,controllerAs:"$ctrl",controller:["amFieldMaskFilter",function(e){var t=this;t.$onInit=function(){t.inputName=t.inputName||"",t.labelText=t.labelText||"",t.valueText=t.valueText||"",t.display=!1,t.toggle=function(){t.display=!t.display},t.getValueText=function(){var n;if(angular.isString(t.valueText))n={maskValue:t.valueText,finalText:"{{value}}"};else if(angular.isObject(t.valueText))n=t.valueText;else if(angular.isFunction(t.valueText)){var a=t.valueText();n=angular.isObject(a)?a:{maskValue:a,finalText:"{{value}}"}}return t.display?n.finalText.replace("{{value}}",n.maskValue):n.finalText.replace("{{value}}",angular.isUndefined(n.maskValue)||""===n.maskValue?n.maskValue:e(n.maskValue))}}}]}}])}},function(e,t){e.exports=function(e){e.directive("amFormRangeEntry",["FormInputService",function(t){var n={"label-text":!0};return{restrict:"E",require:["ng-model","^^?wideForm"],template:function(a,r){var i=a.prop("attributes"),o=e.extractInputAttributes(i,n),s='<am-range-entry ng-model="'+r.ngModel+'" '+o+'"></am-range-entry>';return t.html({label:r.labelText,labelDesc:r.labelDesc,input:s,inputDesc:r.inputDesc})},link:function(e,n,a,r){t.size(n,{wide:null!==r[1]&&"disabled"!==r[1].config})}}}])}},function(e,t){e.exports=function(e){e.directive("amFormSelect",["FormInputService",function(t){var n={"label-text":!0,"chosen-select":!0};return{restrict:"E",require:["ng-model","^^?wideForm"],template:function(a,r){var i=a.prop("attributes"),o="<am-select "+e.extractInputAttributes(i,n)+' ng-model="'+r.ngModel+'"></am-select>';return t.html({label:r.labelText,labelDesc:r.labelDesc,input:o,inputDesc:r.inputDesc,name:r.name})},link:function(e,n,a,r){t.size(n,{wide:null!==r[1]&&"disabled"!==r[1].config})}}}])}},function(e,t){e.exports=function(e){e.directive("amFormSwitch",["FormInputService",function(t){var n={"label-text":!0};return{restrict:"E",require:["ng-model","^^?wideForm"],template:function(a,r){var i=a.prop("attributes"),o=e.extractInputAttributes(i,n),s='<am-switch ng-model="'+r.ngModel+'" '+o+'"></am-switch>';return t.html({label:r.labelText,labelDesc:r.labelDesc,input:s,inputDesc:r.inputDesc})},link:function(e,n,a,r){var i=null!==r[1]&&"disabled"!==r[1].config,o=angular.isDefined(a.fullWidth);t.size(n,{wide:i,twoLines:o})}}}])}},function(e,t){e.exports=function(e){e.directive("amFormTextarea",["FormInputService",function(t){var n={"label-text":!0};return{restrict:"E",require:["ng-model","^^?wideForm"],template:function(a,r){var i=a.prop("attributes"),o="<am-textarea "+e.extractInputAttributes(i,n)+' ng-model="'+r.ngModel+'"></am-textarea>';return t.html({label:r.labelText,labelDesc:r.labelDesc,input:o,inputDesc:r.inputDesc})},link:function(e,n,a,r){t.size(n,{wide:null!==r[1]&&"disabled"!==r[1].config})}}}])}},function(e,t){e.exports=function(e){e.directive("genericFormData",["FormInputService",function(e){return{restrict:"E",transclude:!0,require:"^^?wideForm",template:function(t,n){var a="<ng-transclude></ng-transclude>";if(n.name){var r='name="'+n.name+'"';n.ngModel&&(r+=' ng-model="'+n.ngModel+'"'),n.errorPrefix&&(r+=' error-prefix="'+n.errorPrefix+'"'),a+="<am-form-error "+r+"></am-form-error>"}return e.html({label:n.labelText,labelAlign:n.labelAlign,input:a})},link:function(t,n,a,r){e.size(n,{twoLines:angular.isDefined(a.twoLines)&&"false"!==a.twoLines,wide:null!==r&&"disabled"!==r.config})}}}])}},function(e,t){e.exports=function(e){e.directive("wideForm",function(){return{restrict:"A",require:["^^?wideForm","wideForm"],compile:function(e,t){return{pre:function(e,t,n,a){var r=n.wideForm;a[1].config="inherit"!==r?r:null!==a[0]?a[0].config:""}}},controller:angular.noop}})}},function(e,t,n){e.exports=function(e){e.extractInputAttributes=function(e,t){var n="";for(var a in e)if(e.hasOwnProperty(a)){var r=e[a];if(angular.isUndefined(r.name))continue;if(r.name.length>2&&"ng-"===r.name.substr(0,3))continue;if(angular.isDefined(t)&&t[r.name])continue;n+=r.name+'="'+r.value+'" '}return n},n(168)(e),n(169)(e),n(170)(e),n(171)(e),n(172)(e),n(173)(e),n(174)(e),n(175)(e),n(176)(e)}},function(e,t){e.exports=function(e){e.directive("amDate",["IS_DATE_SUPPORTED","$filter","ErrorService",function(t,n,a){var r={name:!0,"is-disabled":!0,"is-required":!0,"min-date":!0,"max-date":!0,"server-errors":!0,type:!0,"model-listener":!0};return{restrict:"E",require:"ng-model",scope:{inputName:"@?name",isDisabled:"&?",isRequired:"&?",minDate:"<?",maxDate:"<?",modelListener:"&?",serverErrors:"<?"},template:function(n,a){var i=n.prop("attributes"),o=e.extractInputAttributes(i,r);return t?'<input name="{{inputName}}" am-input-errors '+o+' type="date" min="{{getMinDate()}}" max="{{getMaxDate()}}" ng-model="amInputModel" ng-class="{ \'form-control\' : true }" ng-disabled="isDisabled()" ng-required="isRequired()" />':'<input name="{{inputName}}" am-input-errors '+o+' type="text" placeholder="yyyy-mm-dd" data-inputmask="\'alias\': \'dateValue\'" ng-model="amInputModel" ng-class="{ \'form-control\' : true }" ng-disabled="isDisabled()" ng-required="isRequired()" />'},link:function(e,r,i,o){var s=new Date;i.isDisabled||(e.isDisabled=function(){return!1}),i.isRequired||(e.isRequired=function(){return r.attr("required")}),e.getMinDate=function(){return e.minDate?"today"===e.minDate?n("date")(s,"yyyy-MM-dd"):e.minDate:""},e.getMaxDate=function(){return e.maxDate?"today"===e.maxDate?n("date")(s,"yyyy-MM-dd"):e.maxDate:""};o.$render=function(){if(t)if(angular.isUndefined(o.$viewValue)||null==o.$viewValue)e.amInputModel=o.$viewValue;else{var n=o.$viewValue.split("-");3==n.length?e.amInputModel=new Date(n[0],n[1]-1,n[2]):e.amInputModel=null}else e.amInputModel=o.$viewValue},e.$watch("amInputModel",function(a,r){if(t)a=n("date")(a,"yyyy-MM-dd");else if(e.formElement)if(e.isRequired()||!angular.isUndefined(a)&&null!==a&&0!==a.length){var i=!angular.isUndefined(a)&&a.length>0&&-1==a.indexOf("_");e.formElement.$setValidity("silent",i),i?e.formElement.$setValidity("date",function(e){if(angular.isUndefined(e)||-1!=e.indexOf("_"))return!1;var t=e.split("-");if(3!=t.length)return!1;var n=t[1];if(n<1||n>12)return!1;var a=t[2],r=t[0],i=31;4==n||6==n||9==n||11==n?i=30:2==n&&(i=r%4!=0||r%100==0&&r%400!=0?28:29);return!(a<1||a>i)}(a)):e.formElement.$setValidity("date",!0)}else e.formElement.$setValidity("silent",!0),e.formElement.$setValidity("date",!0);o.$setViewValue(a),e.modelListener&&e.modelListener()});var l=a.getElementKey(e.inputName),c=e[l];if(c&&c.$validators){var u=c.$validators,d=[];u.min&&(u.minimum_date=u.min,delete u.min,d.push("minimum_date")),u.max&&(u.maximum_date=u.max,delete u.max,d.push("maximum_date")),a.setErrorSuppression(c,{required:d})}t||$(r.find("input")).inputmask()}}}])}},function(e,t){e.exports=function(e){e.directive("amDateTimePicker",["$timeout","PluginService",function(e,t){return{restrict:"A",require:"ngModel",link:function(n,a,r,i){i&&(i.$render=function(){a.val(i.$viewValue||"")},t.load("dateTimePicker").finally(function(){e(function(){a.datetimepicker({format:"yyyy-mm-dd hh:ii",autoclose:!0,minuteStep:30}),a.on("dp.change",function(){n.$apply(function(){var e=a.val();i.$setViewValue(e)})})})}))}}}])}},function(e,t){e.exports=function(e){e.directive("amInput",["$translate","NL_PATTERNS","LanguageService",function(e,t,n){return{restrict:"E",require:["ng-model","^^?form"],scope:{inputName:"@?name",inputType:"@?type",phText:"@?",changeListener:"&?",focusListener:"&?",modelListener:"&?",inputNlCode:"@?",isDisabled:"&?",isRequired:"&?",inputPrefix:"<?",inputMask:"<?",inputMaskAlias:"@?",obfuscate:"<?",inputSuffix:"<?",noTrim:"<?",forceLtr:"<?",serverErrors:"<?"},template:function(e,t){var n="true"===t.noTrim,a="";t.inputSuffix&&(a+='<div ng-class="getSuffixGroupClass()">');var r="";t.inputPrefix&&(a+="<label>{{inputPrefix}}</label>",r='ng-style="inputStyle()" ');var i="ng-class=\"{'form-control' : true}\"";(t.inputNlCode||t.forceLtr)&&(i='ng-class="getDirectionClass()"');var o=" ";return(t.obfuscate||"true"===t.obfuscate)&&(o+='obfuscate-input="'+t.unmaskLength+'"'),a+='<input name="{{inputName}}" type="{{::inputType}}" ng-model="amInputModel" am-input-errors placeholder="{{getPhText()}}" ng-required="isRequired()" ng-disabled="isDisabled()" ng-trim="'+!n+'" '+i+" "+r+o+"/>",t.inputSuffix&&(a+='<span ng-if="hasSuffix()" class="input-group-addon">{{inputSuffix}}</span>',a+="</div>"),a},link:function(a,r,i,o){var s=o[0],l=o[1];(i.isDisabled||(a.isDisabled=function(){return!1}),i.isRequired||(a.isRequired=function(){return r.attr("required")}),a.hasSuffix=function(){return a.inputSuffix&&a.inputSuffix.length>0},a.getSuffixGroupClass=function(){return a.hasSuffix()?"input-group":""},a.getDirectionClass=function(){return n.isRtlInput(a.inputNlCode)&&!i.forceLtr?"form-control direction-rtl":i.forceLtr&&n.isRtl()?"form-control direction-ltr text-left":"form-control"},a.inputStyle=function(){var e=$(r.parent()),t=$(r.find("label"));return{width:e.width()-t.width()-1+"px",display:"inline"}},a.isNativeInput=!a.inputMask&&a.inputNlCode&&a.inputNlCode.length>0&&"ENGLISH"!==a.inputNlCode,"disabled"===i.inputMask?a.inputMask="disabled":a.inputMask||a.inputMaskAlias&&""!==a.inputMaskAlias||a.isNativeInput||(a.inputMaskAlias="latin"),a.inputMaskAlias&&""!==a.inputMaskAlias)&&(a.inputMask="'alias' : '"+a.inputMaskAlias+"'",i.maxlength&&""!==i.maxlength&&(null!==new Inputmask(a.inputMaskAlias).opts.mask?a.inputMask+=", 'repeat' : "+i.maxlength:a.inputMask+=", 'mask' : 'o{1,"+i.maxlength+"}'"));a.getPhText=function(){return a.phText?a.phText:a.isRequired()?e.instant("word.required"):e.instant("word.optional")},s.$render=function(){var e=s.$viewValue;e&&angular.isFunction(e.replace)&&(e=(e=(e=(e=e.replace(new RegExp("&lt;","g"),"<")).replace(new RegExp("&gt;","g"),">")).replace(new RegExp("&quot;","g"),'"')).replace(new RegExp("&amp;","g"),"&")),a.amInputModel=e},a.$watch("amInputModel",function(e,t){s.$setViewValue(e),a.modelListener&&a.modelListener()}),"disabled"!==a.inputMask&&a.$watch("inputMask",function(e,t){if(!angular.isUndefined(e)&&""!==e){var n=$(r.find("input"));angular.isUndefined(n.attr("data-inputmask"))&&n.on("keyup",function(){a.$apply(function(){a.amInputModel=n.val()})}),n.attr("data-inputmask",e),n.inputmask()}});var c=a.isNativeInput&&l;(c||a.changeListener)&&r.change(function(e){a.$applyAsync(function(){var n;c&&(n="JAPANESE_KATAKANA"==a.inputNlCode?t[a.inputNlCode]:new XRegExp("^["+t[a.inputNlCode]+",\\s\\d]*$"),l[a.inputName].$setValidity("invalid_language",n.test(e.target.value)));a.changeListener&&a.changeListener()})}),a.focusListener&&r.focusin(function(e){a.$applyAsync(function(){a.focusListener()})})}}}])}},function(e,t){e.exports=function(e){e.directive("amSelect",["$parse","$translate","LanguageService",function(t,n,a){var r={name:!0,options:!0,"option-key":!0,"enable-single-option":!0,"hide-empty-option":!0,"model-listener":!0,"is-disabled":!0,"is-required":!0,"empty-option-text":!0,"no-translate":!0,"server-errors":!0,"track-by-id":!0};return{restrict:"E",require:"ng-model",scope:{inputName:"@?name",options:"<",optionKey:"<?",enableSingleOption:"@?",hideEmptyOption:"@?",modelListener:"&?",isDisabled:"&?",isRequired:"&?",emptyOptionText:"@?",noTranslate:"@?",serverErrors:"<?",inputNlCode:"@?",trackById:"@?"},template:function(t,n){var a=t.prop("attributes"),i=e.extractInputAttributes(a,r),o="";n.inputNlCode&&(o='ng-style="getDirection()"');var s="";n.trackById&&(s=" track by option."+n.trackById);var l='<select id="{{inputName}}" name="{{inputName}}" '+i+' ng-model="amInputModel" am-input-errors ng-options="getOptionDisplay(option) for option in options'+s+'" ng-required="isRequired()" ng-disabled="isDisabled()" ng-class="::{ \'form-control\' : true }"'+o+">";return n.hideEmptyOption||(l+='<option value="">{{getEmptyOptionText()}}</option>'),l+="</select>"},link:function(e,r,i,o){e.isDisabled=function(){return!(!angular.isDefined(e.options)||1!==e.options.length||e.enableSingleOption)||!!i.isDisabled&&t(i.isDisabled)(e.$parent)},e.getDirection=function(){return a.isRtlInput(e.inputNlCode)?{direction:"rtl"}:""},i.isRequired||(e.isRequired=function(){return r.attr("required")}),e.getEmptyOptionText=function(){return e.emptyOptionText&&0!==e.emptyOptionText.length?e.emptyOptionText:n.instant("word.chooseOne")},e.getOptionDisplay=function(t){return null===t||angular.isUndefined(t)?e.getEmptyOptionText():i.noTranslate?e.getOptionKey(t):n.instant(e.getOptionKey(t))},e.getOptionKey=function(t){return!e.optionKey||null===t||angular.isUndefined(t)?t:angular.isFunction(e.optionKey)?e.optionKey(t):angular.isString(t)?e.optionKey+t:t[e.optionKey]},o.$render=function(){if(angular.isUndefined(o.$viewValue)||angular.isUndefined(e.options))e.amInputModel=o.$viewValue;else for(var t=0;t<e.options.length;++t){if(angular.equals(e.options[t],o.$viewValue)){e.amInputModel=e.options[t];break}if(angular.isDefined(e.trackById)&&angular.equals(e.options[t][e.trackById],o.$viewValue[e.trackById])){e.amInputModel=e.options[t];break}}},e.$watch("amInputModel",function(t,n){o.$setViewValue(t),e.modelListener&&e.modelListener({$newValue:t,$oldValue:n})}),e.$watchCollection("options",function(t,n){angular.isUndefined(t)||null==t||(1!=t.length||e.enableSingleOption?e.hideEmptyOption&&(angular.isUndefined(e.amInputModel)||null==e.amInputModel)&&(e.amInputModel=t[0]):e.amInputModel=t[0])})}}}])}},function(e,t){e.exports=function(e){e.directive("chosenSelect",["$timeout","$rootScope","PluginService","LanguageService",function(e,t,n,a){return{restrict:"A",require:"ng-model",link:function(r,i,o,s){if(a.isRtl())return!1;var l;if((l=$(i).is("select")?$(i):$(i.find("select"))).length){var c=t.$on("$translateChangeSuccess",function(e,t){r.$applyAsync(function(){l.trigger("chosen:updated")})});l.attr("data-input-error-owner",".chosen-container"),o.options&&r.$watchCollection(o.options,function(e,t){r.$applyAsync(function(){l.trigger("chosen:updated")})}),s.$render=function(){angular.isUndefined(s.$viewValue)&&r.$applyAsync(function(){l.trigger("chosen:updated")})},r.$on("$destroy",c),n.load("chosen").finally(function(){e(function(){l.chosen({width:"100%",search_contains:!0})})})}else console.warn("Detected chosenSelect on invalid element")}}}])}},function(e,t){e.exports=function(e){e.directive("iCheck",["$timeout","WHITE_BRANDING_DETAILS","APPLICATION_THEME","PluginService",function(e,t,n,a){return{restrict:"A",require:"ng-model",link:function(r,i,o,s){a.load("iCheck").finally(function(){e(function(){var e,a=o.value;return e=o.checkType?o.checkType:"IMPACT"===n.get()?"square-orange":t.isBranded()?"square-grey":"square-blue",o.$observe("disabled",function(e){$(i).iCheck("update")}),r.$watch(o.ngModel,function(e){$(i).iCheck("update")}),$(i).iCheck({checkboxClass:"icheckbox_"+e,radioClass:"iradio_"+e,increaseArea:"20%"}).on("ifCreated",function(e){$(i).parent().css("position","relative")}).on("ifChanged",function(e){if("checkbox"===$(i).attr("type")&&o.ngModel&&r.$apply(function(){return s.$setViewValue(e.target.checked)}),"radio"===$(i).attr("type")&&o.ngModel)return r.$apply(function(){return s.$setViewValue(a)})})})})}}}])}},function(e,t){e.exports=function(e){e.directive("icheckToggle",function(){return{restrict:"A",link:function(e,t){function n(){var e=t.find("input");e.length>0&&$(e).iCheck("toggle")}t.on("click",function(){n()}),t.on("keypress",function(e){32!==e.which&&13!==e.which||(e.preventDefault(),n())})}}})}},function(e,t,n){function a(e){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(e){e.directive("obfuscateInput",["amFieldMaskFilter",function(e){return{require:"ngModel",link:function(t,n,r,i){n.bind("blur",function(){i.$render()}),n.bind("focus",function(){i.$render()}),i.$render=function(){if(n.is(":focus"))n.val(i.$viewValue);else{var t="undefined"===a(i.$viewValue)||""===i.$viewValue?i.$viewValue:e(i.$viewValue,r.obfuscateInput);n.val(t)}}}}}])}},function(e,t){e.exports=function(e){e.directive("popover",["$interpolate","$document","IS_MOBILE",function(e,t,n){var a={mouseenter:"mouseleave",click:"click",focus:"blur",none:""};return{restrict:"A",link:function(r,i,o,s){if(!o.popover)return angular.noop;var l,c=!angular.isDefined(o.popoverAnimation)||"true"===o.popoverAnimation,u=(o.popoverDisable,"true"===o.popoverHtml),d="true"===o.popoverIsOpen,p=o.popoverPlacement||"right",g=parseInt(o.popoverDelay,10),f=parseInt(o.popoverCloseDelay,10);l=angular.isUndefined(o.popoverTrigger)||n&&"mouseenter"===o.popoverTrigger?"click":o.popoverTrigger;var m=o.popoverTitle||"",v=o.popoverCloseFn||void 0,h=u?function(){return e(o.popover)()}:o.popover,b=void 0;if($(i).popover({animation:c,content:h,delay:{show:isNaN(g)?0:g,hide:isNaN(f)?0:f},html:u,placement:function(){return n?"bottom":p},title:m,trigger:"manual",container:$(i)}),o.$observe("popoverDisable",function(e){e?$(i).popover("disable"):$(i).popover("enable")}),d){$(i).popover("show");setTimeout(function e(){0===$("loading-overlay").length?$(i).popover("update"):setTimeout(e,250)},250)}function y(e){"SHOWN"!==b||i[0].contains(e.target)||$(i).popover("hide")}$(i).on("shown.bs.popover",function(){b="SHOWN",$(":focus").blur()}).on("hidden.bs.popover",function(){b="HIDDEN"}),function(e,n){"click"===n?($(e).on("click",function(t){$(e).popover("toggle")}),t.on("click",y)):$(e).on(n,function(e){var t=this;$(this).popover("show"),$(".popover").on(a[n],function(e){$(t).popover("hide")})}).on(a[n],function(e){var t=this;setTimeout(function(){$(".popover:hover").length||$(t).popover("hide")},100)})}(i,l),$(i).parent().on("click",".popover .close",function(){$(i).popover("hide"),angular.isDefined(v)&&v.length>0&&r.$eval(v)}),r.$on("$destroy",function(){$(i).popover("dispose"),t.off("click",y)})}}}])}},function(e,t,n){e.exports=function(e){n(178)(e),n(179)(e),n(180)(e)}},function(e,t){e.exports=function(e){e.directive("amFormCountrySelect",["FormInputService",function(t){var n={"label-text":!0,vertical:!0};return{restrict:"E",require:["ng-model","^^?wideForm"],template:function(a,r){var i=a.prop("attributes"),o="<am-country-select "+e.extractInputAttributes(i,n)+' ng-model="'+r.ngModel+'"></am-country-select>';if("true"===r.vertical){var s='<div class="form-group">';return s+='<label class="control-label">'+r.labelText+"</label>",s+=o,s+="</div>"}return t.html({label:r.labelText,input:o})},link:function(e,n,a,r){t.size(n,{wide:null!==r[1]&&"disabled"!==r[1].config})}}}])}},function(e,t){e.exports=function(e){e.directive("googlePlaces",["JsService","$q","$timeout","LanguageService","filterFilter","GooglePlacesService","amAddressFilter",function(e,t,n,a,r,i,o){return{restrict:"A",require:["^amFormAddress","^^?form"],link:function(s,l,c,u){var d=this;if(c.googlePlaces){s.addressFormCtrl=u[0];u[1];var p=s.addressFormCtrl.$postLink;s.addressFormCtrl.$postLink=function(){"function"==typeof p&&p(),n(function(){d.initReferences();var n=s.addressFormCtrl.getFieldName("street1"),r=document.querySelector('input[name="'+n+'"]'),l=a.getCurrentLanguage();d.disableBrowserAutocomplete(),d.initTamperingListener(),s.addressFormCtrl.addressModel.googlePlacesEnabled=!0,i.getApiKey().then(function(n){var a=n.key||"",c=e.injectJavascript("googlePlaces","https://maps.googleapis.com/maps/api/js?libraries=places&v=weekly&key="+a+"&callback=angular.noop&language="+l);t.all([c]).then(function(e){var t=d.getIsoCode();s.addressFormCtrl.autocomplete=new google.maps.places.Autocomplete(r,{componentRestrictions:{country:[t.toLowerCase()]},fields:["address_components","geometry","place_id","formatted_address"],types:["address"]}),s.addressFormCtrl.autocomplete.addListener("place_changed",function(){d.fillInAddress(s)});var n=s.addressFormCtrl.onChange;s.addressFormCtrl.onChange=function(e){if(n(e),"country"===e){var t=d.getIsoCode();s.addressFormCtrl.autocomplete.setComponentRestrictions({country:[t]})}else if("verifySuspiciousAddress"===e)if(s.addressFormCtrl.addressModel.verifySuspiciousAddress){delete s.addressFormCtrl.suspiciousAddress;var a=o(s.addressFormCtrl.addressModel);i.confirmSuspiciousAddress(a)}else{s.fields.street1.focus()}}}).catch(function(e){})},function(e){})},100)},d.initReferences=function(){s.ngModelCtrls={},s.fields={};for(var e=["street1","street2","city","postalCode"],t=0;t<e.length;t++){var n=e[t],a=s.addressFormCtrl.getFieldName(n),r=angular.element(l).find("am-input[name*='"+a+"']").find("input"),i=r.controller("ngModel");s.ngModelCtrls[n]=i,s.fields[n]=r}e=["state","country"];for(t=0;t<e.length;t++){n=e[t],a=s.addressFormCtrl.getFieldName(n);var o=angular.element(l).find("am-select[name*='"+a+"']").find("select");i=o.controller("ngModel");s.ngModelCtrls[n]=i,s.fields[n]=o}},d.disableBrowserAutocomplete=function(){for(var e=["street1","street2","city","postalCode"],t=0;t<e.length;t++){var n=e[t],a=s.fields[n];a.attr("autocomplete","new-password"),a.focus(function(){$(this).attr("autocomplete","new-password")})}},d.initTamperingListener=function(){for(var e=["street1","street2","city","postalCode","state","country"],t=0;t<e.length;t++){var n=e[t];s.fields[n].change(function(){s.addressFormCtrl.isTampered=!0})}},d.getIsoCode=function(){if(angular.isDefined(s.addressFormCtrl.addressModel.country)){var e=s.addressFormCtrl.addressModel.country;if(angular.isDefined(e.isoCode))return e.isoCode.toLowerCase()}return"us"},d.usesNativeInput=function(){return angular.isDefined(s.addressFormCtrl.inputNlCode)&&"ENGLISH"!=s.addressFormCtrl.inputNlCode},d.anglicizeValue=function(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\x00-\x7F]/g,function(e){var t=e.charCodeAt(0);return d.ext_ascii_map[t]||e})},d.ext_ascii_map={198:"AE",199:"C",208:"Eth",215:"x",216:"O",222:"th",223:"ss",230:"ae",231:"c",240:"eth",254:"th",65296:"0",65297:"1",65298:"2",65299:"3",65300:"4",65301:"5",65302:"6",65303:"7",65304:"8",65305:"9"},d.fillInAddress=function(e){var t=e.addressFormCtrl.autocomplete.getPlace();if(null!=t){var a="",s="",l="",c="",u="",p="",g="",f="",m="",v="",h="",b="",y="",D="",E="",x="",A="";if(t.address_components)for(var C=0;C<t.address_components.length;C++){var T=t.address_components[C];switch(T.types[0]){case"street_number":h=T.long_name;break;case"route":b=T.short_name;break;case"postal_code":s=T.long_name+s;break;case"postal_code_suffix":s=s+"-"+T.long_name;break;case"locality":p=T.long_name;break;case"postal_town":g=T.long_name;break;case"neighborhood":f=T.long_name;break;case"sublocality_level_1":y=T.long_name;break;case"sublocality_level_2":D=T.long_name;break;case"sublocality_level_3":E=T.long_name;break;case"sublocality_level_4":x=T.long_name;break;case"premise":A+=T.short_name;break;case"administrative_area_level_1":l=T.short_name;break;case"administrative_area_level_2":c=T.short_name;break;case"administrative_area_level_3":u=T.short_name;break;case"country":m=T.long_name,v=T.short_name}}if(0==p.length&&(p=g),0==p.length&&(p=y),0==p.length&&(p=f),0==l.length&&(l=c),0==l.length&&(l=u),0!=b.length&&(a=b),0!=h.length){a=["United States","Canada","United Kingdom","Australia","France","Ireland","New Zealand","Singapore","South Africa"].includes(m)?$.trim(h+" "+a):$.trim(a+" "+h)}else 0!=E.length&&(a=$.trim(a+" "+E)),0!=x.length&&(a=0!=a.length?a+"-"+$.trim(x):$.trim(x)),0!=A.length&&(a=0!=a.length?a+"-"+$.trim(A):$.trim(A)),0!=D.length&&(a=$.trim(a+" "+D));l=l.replace(/'/g,"");var S=d.usesNativeInput();S||(a=d.anglicizeValue(a)),angular.isDefined(e.ngModelCtrls.street1)&&(e.ngModelCtrls.street1.$setViewValue(a),e.ngModelCtrls.street1.$render()),S||(p=d.anglicizeValue(p)),angular.isDefined(e.ngModelCtrls.city)&&(e.ngModelCtrls.city.$setViewValue(p),e.ngModelCtrls.city.$render()),0!=s.length&&angular.isDefined(e.ngModelCtrls.postalCode)&&(e.ngModelCtrls.postalCode.$setViewValue(s),e.ngModelCtrls.postalCode.$render());var I=r(e.addressFormCtrl.rules.allowedCountries,{isoCode:v})[0];angular.isDefined(I)&&angular.isDefined(e.ngModelCtrls.country)&&(e.ngModelCtrls.country.$setViewValue(I),e.ngModelCtrls.country.$render(),n(function(){e.$apply(function(){e.addressFormCtrl.addressModel.googleStateInfo={google:{name:l,response:t},countryAlpha3:I.alpha3}});var n=o(e.addressFormCtrl.addressModel),a={status:"OK",results:[t]};i.setCachedGoogleResponse(n,a),e.addressFormCtrl.addressModel.googleResponse=JSON.stringify(t)},200));var w=e.fields.street2;angular.isDefined(e.ngModelCtrls.street2)&&(e.ngModelCtrls.street2.$setViewValue(""),e.ngModelCtrls.street2.$render()),w.focus(),e.addressFormCtrl.isTampered=!1}}}}}}])}},function(e,t){e.exports=function(e){e.directive("googlePlacesBtn",["$q","GooglePlacesService","amAddressFilter","$timeout","$anchorScroll","$location",function(e,t,n,a,r,i){return{restrict:"A",require:["am-button","^^?am-modal","^^?am-page"],link:function(o,s,l,c){var u=this;if("true"===l.googlePlacesBtn){var d=c[0],p=c[1],g=c[2],f=d.$postLink;d.$postLink=function(){"function"==typeof f&&f(),t.isGoogleApiLoaded().then(function(t){if(t){var n=d.onClick;d.onClick=function(){var t=null!=g,a=[],r=[];if(null!=p)r=angular.element(window.document).find("am-modal").find("am-form-address[google-places='true']");else if(t){r=angular.element(window.document).find("am-page").find("am-form-address[google-places='true']")}r.length&&(delete u.hasSuspiciousAddress,angular.forEach(r,function(t){var n=angular.element(t).controller("amFormAddress");if(n.isTampered){var r=e.defer();a.push(r.promise),u.runTamperedAddressVerification(n,r)}})),e.all(a).then(function(e){u.hasSuspiciousAddress||n()})}}})},u.runTamperedAddressVerification=function(e,o){var s=n(e.addressModel);t.geocode(s).then(function(n){var l=n.status,c=n.results;if("OK"===l&&0!=c.length){var d=c[0];e.addressModel.googleResponse=JSON.stringify(d),1==d.partial_match&&(t.isSuspiciousAddressConfirmed(s)||(e.suspiciousAddress=!0,u.hasSuspiciousAddress=!0))}else"ZERO_RESULTS"===l&&(t.isSuspiciousAddressConfirmed(s)||(e.suspiciousAddress=!0,u.hasSuspiciousAddress=!0));e.suspiciousAddress&&(delete e.addressModel.verifySuspiciousAddress,a(function(){if(e.parentForm){var t=e.getFieldName("verifySuspiciousAddress"),n=e.parentForm[t],a=angular.isDefined(e.addressModel.verifySuspiciousAddress);a||n.$setDirty(),n.$setValidity("required",a),r.yOffset=150,i.hash(t),r()}})),o.resolve(n)})}}}}}])}},function(e,t){e.exports=function(e){e.directive("amFieldValue",function(){return{restrict:"E",template:function(e,t){var n="";return n+="<p>",n+="<strong>"+t.labelText+":</strong>&nbsp;"+t.valueText,n+="</p>",n}}})}},function(e,t){e.exports=function(e){e.directive("amHelp",["AmInterfaceService","HelpService","PageService","ACTIVE_CONTEXT","ApplicationContext",function(e,t,n,a,r){var i=function(e,a,r){a.show().bind("click",function(){e.$apply(function(){var e=null;e=angular.isDefined(r.helpId)?r.helpId:angular.isFunction(n.getCurrentPage().helpId)?n.getCurrentPage().helpId():n.getCurrentPage().helpId,t.openHelpModal(e,r.subId)})})};return{restrict:"E",template:'<am-button btn-type="icon" tooltip-text="{{\'word.help\' | translate}}" btn-icon="fa-question-circle"></am-button>',compile:function(){return{pre:function(e,t){t.hide()},post:function(t,n,o){a==r.AM_DEPENDENCY?e.onUserReady().then(function(){var a;a=e.getUser(),angular.isDefined(a)&&a.helpAllowed&&i(t,n,o)}):i(t,n,o)}}}}}])}},function(e,t){e.exports=function(e){var t=function(e,t,n,a){if(angular.isDefined(n)){var r=e.getErrorSuppression(t)||{};if(angular.isDefined(r[n])&&r[n].find(function(e){return t.$error[e]}))return;a||t.$setDirty(),t.$setValidity(n,a)}};e.directive("amInputErrors",["$translate","$compile","ErrorService",function(e,n,a){return{restrict:"A",require:["^^?form","^^?formServerErrors","?ng-model"],scope:!1,link:function(e,r,i,o){var s=o[0],l=o[1],c=o[2];if(s){var u=void 0;if(e.inputName?u=e.inputName:e.$ctrl&&e.$ctrl.inputName?u=e.$ctrl.inputName:i.name&&(u=i.name),!angular.isUndefined(u)){var d=a.getElementKey(u);e[d]=s[u]||{$name:u,$error:{},$setDirty:angular.noop,$noInput:!0,$setValidity:function(t,n){n?delete e[d].$error[t]:e[d].$error[t]=!0}},e.getErrorText=function(e){var t=i.errorPrefix||"field.error.";return a.getErrorText(t,e)};var p="hasErrors_"+d;e[p]=function(){return function(e){if(!e.$noInput){var t=angular.element(e);if(!e.$dirty&&!t.attr("disabled"))return!1}var n=Object.keys(e.$error).length;return 0!==n&&(n>1||!e.$error.silent)}(e[d])};var g="getServerErrors_"+d;if(e.serverErrors?e[g]=function(){return e.serverErrors}:e.$ctrl&&e.$ctrl.serverErrors?e[g]=function(){return e.$ctrl.serverErrors}:null!==l&&angular.isFunction(l.getServerErrors)&&(e[g]=l.getServerErrors),e[g]){var f=void 0,m=function(){t(a,e[d],f,!0);var n=e[g]();n&&delete n[e[d].$name]};!function(e){if(e.modelListener){var t=e.modelListener;e.modelListener=function(){m(),t.apply(void 0,arguments)}}else null!==c&&angular.isDefined(c)?c.$viewChangeListeners.push(m):e.modelListener=m}(e.$ctrl||e),e.$watch(g+"()",function(n,r){t(a,e[d],f,!0),f=n?n[e[d].$name]:void 0,t(a,e[d],f,!1)})}var v=e.$watch(p+"()",function(t,a){if(!0===t){var i=function(e,t){var n='<div class="alert alert-danger" ng-if="'+e+'()">';return n+='<p ng-if="errorValue && errorKey !== \'silent\'" ng-repeat="(errorKey, errorValue) in '+t+'.$error">',n+='<span ng-bind-html="getErrorText(errorKey) | renderHTML"></span>',n+="</p>",n+="</div>"}(p,d);(function(e){var t=e.attr("data-input-error-owner");if(!t)return e;var n=e.siblings(t);if(n.length)return $(n[0]);var a=e.parents(t);return a.length?$(a[0]):e})(r).after(n(i)(e)),v()}})}}}}}]).directive("formServerErrors",function(){return{restrict:"A",require:["form"],scope:{method:"&formServerErrors"},controller:["$scope",function(e){var t=this;t.$onInit=function(){t.getServerErrors=e.method}}]}})}},function(e,t){e.exports=function(e){e.directive("amTooltip",["IS_MOBILE","$timeout","LanguageService",function(e,t,n){return{restrict:"A",link:function(a,r,i){var o={trigger:"manual"};i.placement&&n.isRtl()&&("left"===i.placement?o.placement="right":"right"===i.placement&&(o.placement="left")),"false"===i.amTooltip||e&&"true"!==i.mobileEnabled||(t(function(){r.tooltip(o)},100),r.on("mouseleave",function(){$(this).tooltip("hide")}),r.on("mouseenter",function(){$(this).tooltip("show")}),r.on("click",function(){$(this).tooltip("hide")}))}}}])}},function(e,t){e.exports=function(e){e.directive("hookEnter",function(){return function(e,t,n){t.bind("keydown keypress",function(t){13===t.which&&(e.$apply(function(){e.$eval(n.hookEnter)}),t.preventDefault())})}})}},function(e,t){e.exports=function(e){e.directive("loadingOverlay",["UserPlatformService",function(e){return{restrict:"E",template:function(t,n){var a=n.loadingTemplate;e.isSimplifiedPlatform()&&(angular.isUndefined(a)||"candyStripe"===a)&&(a="notchSpinner");var r="";if("candyStripe"===a)r+='<div class="load-bar">',r+='<div class="progress">',r+='<div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="45" aria-valuemin="0" aria-valuemax="100"></div>',r+="</div>",r+="</div>",r+='<div class="refresh-block">',n.loadingText&&(r+=n.loadingText),r+="</div>";else if("fullPage"===a)r+='<div class="load-screen">',r+='<div class="load-bar">',r+='<div class="progress">',r+='<div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="45" aria-valuemin="0" aria-valuemax="100"></div>',r+="</div>",r+="</div>",n.loadingText&&(r+="<p>"+n.loadingText+"</p>"),r+="</div>";else if("notchSpinner"===a){r+='<div class="refresh-block">',r+='<span class="refresh-loader">';var i="fa fa-circle-notch fa-spin fa-2x";e.isImpact()&&(i+=" text-orange"),r+='<i class="'+i+'"></i>',r+="</span>",r+="</div>"}else r+='<div class="refresh-block">',r+='<span class="refresh-loader">',r+='<i class="fa fa-spinner fa-spin fa-2x"></i>',n.loadingText&&(r+="<br />"+n.loadingText),r+="</span>",r+="</div>";return r}}}])}},function(e,t){e.exports=function(e){e.directive("onFinishRender",function(){return{restrict:"A",link:function(e,t,n){e.$last&&t.ready(function(){e.$eval(n.onFinishRender)})}}})}},function(e,t){e.exports=function(e){e.directive("pageButtons",["ApplicationContext","UserPlatformService","ACTIVE_CONTEXT",function(e,t,n){var a;a=n===e.STANDALONE?"container":"panel-body";var r="panel panel-btns";t.isSimplifiedPlatform()&&(r+=" bt-0");var i='<section class="'+r+'">';return i+='<div class="'+a+'">',i+='<div ng-transclude class="row">',i+="</div>",i+="</div>",i+="<br>",{require:"div",restrict:"A",replace:!0,transclude:!0,template:i+="</section>"}}])}},function(e,t){e.exports=function(e){e.directive("pageStructure",["ACTIVE_CONTEXT","UserPlatformService","ApplicationContext",function(e,t,n){return{restrict:"A",compile:function(a,r){var i=r.pageStructure;e===n.STANDALONE&&(angular.isUndefined(i)||""===i)&&(i="fullPanel");var o=e===n.AM_DEPENDENCY||e===n.PAXOS||"true"===r.outerSection,s="panel";(t.isSimplifiedPlatform()||"true"===r.noBorder)&&(s+=" b-0");var l='<section class="'+s+'">',c="panel-body";"true"!==r.noPadding&&(c+=" panel-padding"),l+='<div class="'+c+'">';var u="";return"innerContent"===i?(u='<div class="row">',u+='<div class="col-xs-12 col-sm-12 col-md-12 col-lg-10 offset-lg-1"></div>',u+="</div>"):"fullPanel"===i?(o&&(u+=l),u+='<div class="row">',u+='<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"></div>',u+="</div>",o&&(u+="</div></section>")):(o&&(u+=l),u+='<div class="row">',u+='<div class="col-xs-12 col-sm-12 col-md-12 col-lg-10 offset-lg-1"></div>',u+="</div>",o&&(u+="</div></section>")),{pre:function(e,t){t.wrap(u)}}}}}])}},function(e,t){e.exports=function(e){e.directive("persistentDropdownCloser",function(){return{link:function(e,t,n){angular.element(t).addClass("persistent-dropdown-closer")}}})}},function(e,t){e.exports=function(e){e.directive("persistentDropdownParent",function(){return{link:function(e,t,n){angular.element(t).addClass("persistent-dropdown")}}})}},function(e,t,n){e.exports=function(e){n(193)(e),n(195)(e),n(196)(e),n(197)(e)}},function(e,t,n){e.exports=function(e){e.component("errorList",{bindings:{errors:"<",errorHeading:"<?"},template:n(194)()})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<div class="row"><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"><p ng-if="::$ctrl.errorHeading.length">{{::$ctrl.errorHeading}}</p><p ng-if="::$ctrl.errors.length === 1" ng-bind-html="::$ctrl.errors[0] | renderHTML"></p><ul ng-if="::$ctrl.errors.length &gt; 1"><li ng-bind-html="error | renderHTML" ng-repeat="error in $ctrl.errors track by $index"></li></ul></div></div>'}},function(e,t){e.exports=function(e){e.directive("largeError",function(){return{restrict:"E",transclude:!0,template:function(e,t){var n="";return n+="<br>",n+='<div align="center">',n+='<i class="fa fa-'+((t.size&&null!==t.size&&""!==t.size?t.size:"4")+"x")+' fa-exclamation-triangle text-danger"></i>',n+="</div>",n+="<br>",n+="<ng-transclude></ng-transclude>",n}}})}},function(e,t){e.exports=function(e){e.directive("largeWarning",function(){return{restrict:"E",transclude:!0,template:function(e,t){var n="";return n+="<br>",n+='<div align="center">',n+='<i class="fa fa-'+((t.size&&null!==t.size&&""!==t.size?t.size:"4")+"x")+' fa-exclamation-triangle text-gray"></i>',n+="</div>",n+="<br>",n+="<ng-transclude></ng-transclude>",n}}})}},function(e,t){e.exports=function(e){e.controller("PageRestrictedErrorController",["$translate","PageService",function(e,t){var n=this;n.$onInit=function(){var a=t.getCurrentPage().pageData.restriction||"notAccessible",r=["page.error."+t.getCurrentPage().id+"."+a,"page.error."+a,"page.error.notAccessible"];n.errorKey="";for(var i=0;i<r.length&&""===n.errorKey;++i){var o=r[i];e.instant(o,{lineBreak:"<br>"})!==o&&(n.errorKey=o)}}}])}},function(e,t,n){e.exports=function(e){n(199)(e),n(201)(e),n(202)(e),n(203)(e),n(204)(e),n(205)(e),n(206)(e),n(207)(e),n(208)(e),n(209)(e),n(210)(e),n(211)(e)}},function(e,t,n){e.exports=function(e){n(200)(e)}},function(e,t){e.exports=function(e){e.filter("amAddress",["$translate",function(e){return function(t,n,a){var r="";if(angular.isUndefined(t)||null==t)return r;var i="long"===n,o="twoLine"===n;if(!angular.isUndefined(t.street1)&&t.street1.length&&(r+=t.street1,i&&(r+="<br />")),!angular.isUndefined(t.street2)&&t.street2.length&&(r+=(r.length>0?" ":"")+t.street2,i&&(r+="<br />")),i){var s="";!angular.isUndefined(t.city)&&t.city.length&&(s=t.city),angular.isUndefined(t.state)||angular.isUndefined(t.state.dbName)||!t.state.dbName.length||(s+=(s.length>0?", ":"")+t.state.dbName),!angular.isUndefined(t.postalCode)&&t.postalCode.length&&(s+=(s.length>0?" ":"")+t.postalCode),s.length&&(r+=s+"<br />"),angular.isUndefined(t.country)||angular.isUndefined(t.country.alpha3)||!t.country.alpha3.length||(r+=e.instant("country."+t.country.alpha3,{},void 0,a))}else if(o){var l="";!angular.isUndefined(t.city)&&t.city.length&&(l=t.city),angular.isUndefined(t.state)||angular.isUndefined(t.state.dbName)||!t.state.dbName.length||(l+=(l.length>0?", ":"")+t.state.dbName),!angular.isUndefined(t.postalCode)&&t.postalCode.length&&(l+=(l.length>0?" ":"")+t.postalCode),angular.isUndefined(t.country)||angular.isUndefined(t.country.alpha3)||!t.country.alpha3.length||(l+=(l.length>0?", ":"")+e.instant("country."+t.country.alpha3,{},void 0,a)),r.length&&(r+="<br />"),r+=l}else!angular.isUndefined(t.city)&&t.city.length&&(r+=(r.length>0?", ":"")+t.city),angular.isUndefined(t.state)||angular.isUndefined(t.state.dbName)||!t.state.dbName.length||(r+=(r.length>0?", ":"")+t.state.dbName),!angular.isUndefined(t.postalCode)&&t.postalCode.length&&(r+=(r.length>0?" ":"")+t.postalCode),angular.isUndefined(t.country)||angular.isUndefined(t.country.alpha3)||!t.country.alpha3.length||(r+=(r.length>0?", ":"")+e.instant("country."+t.country.alpha3,{},void 0,a));return r}}])}},function(e,t){e.exports=function(e){e.filter("amContains",["$parse",function(e){return function(t,n){return t=angular.isObject(t)?function(e){return angular.isObject(e)?Object.keys(e).map(function(t){return angular.extend(e[t])}):e}(t):t,!(!angular.isArray(t)||angular.isUndefined(n))&&t.some(function(t){return angular.isString(t)&&angular.isObject(t)||angular.isFunction(n)?e(n)(t):t===n})}}])}},function(e,t){function n(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw o}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}e.exports=function(e){e.filter("amCredentialType",function(){function e(e,t){var a,r="",i=n(e);try{for(i.s();!(a=i.n()).done;){var o=a.value;if(o.type===t){r=o.credential;break}}}catch(e){i.e(e)}finally{i.f()}return r}return function(t,n){if(!angular.isArray(t)||0===t.length)return"";angular.isUndefined(n)&&(n="ALIAS");var a="";return""===(a=e(t,n))&&"ALIAS"!==n&&(a=e(t,"ALIAS")),""===a&&"EMAIL_ADDRESS"!==n&&(a=e(t,"EMAIL_ADDRESS")),""===a&&"USERNAME"!==n&&(a=e(t,"USERNAME")),""===a&&(a=t[0].credential),a}})}},function(e,t){e.exports=function(e){e.filter("amNote",["DynamicTranslationService",function(e){return function(t){return e.getDisplayText(t.text)}}])}},function(e,t){e.exports=function(e){e.filter("amFieldMask",function(){return function(e,t){if(angular.isUndefined(e))return"";var n;if(n=angular.isDefined(t)?t:4,e.length<n)return"****";for(var a="",r=0;r<e.length-n;++r)a+="*";return a+=e.substring(e.length-n,e.length)}})}},function(e,t){e.exports=function(e){e.filter("amMoneyAmount",["$translate","currencyFilter",function(e,t){return function(n){return"ALL"===n.currencyType?e.instant("currency.ALL"):"UNKNOWN"===n.currencyType?t(n.amount,""):t(n.amount,n.currencyType+" ")}}])}},function(e,t){e.exports=function(e){e.filter("htmlToPlainText",function(){return function(e){return angular.isUndefined(e)?"":String(e).replace(/<[^>]+>/gm,"")}})}},function(e,t){e.exports=function(e){e.filter("objectLength",function(){return function(e){return angular.isObject(e)?Object.keys(e).length:0}})}},function(e,t){e.exports=function(e){e.filter("orderByTranslated",["$translate","$filter",function(e,t){return function(n,a,r){var i=[];angular.forEach(n,function(t){var n=r?t[r]:t;i.push({label:e.instant(a+n),item:t})});var o=[];return angular.forEach(t("orderBy")(i,"label"),function(e){o.push(e.item)}),o}}])}},function(e,t){e.exports=function(e){e.filter("renderHTML",["$sce",function(e){return function(t){return e.trustAsHtml(t)}}])}},function(e,t){e.exports=function(e){e.filter("renderURL",["$sce",function(e){return function(t){return e.trustAsResourceUrl(t)}}])}},function(e,t){e.exports=function(e){e.filter("urlEncode",["$window",function(e){return e.encodeURIComponent}])}},function(e,t,n){e.exports=function(e){n(213)(e)}},function(e,t){e.exports=function(e){e.factory("amResponseInterceptor",["$q","$injector","USER_SESSION_ID","AM_UUID","ACTIVE_CONTEXT",function(e,t,n,a,r){var i=/.*\.html?$/g,o=/.*\.php.*$/g,s=/^(.*\/template|template)\/page\/.*\.html$/g,l=/.*\.component$/g,c={request:function(s){if(s.url.match(l)){var c=e.defer();s.timeout=c.promise,c.resolve()}else if(!s.url.match(i)&&!s.url.match(o)){s.headers=s.headers||{},s.headers.SessionId=n.get(),s.headers.AM_UUID=a,s.headers.ACTIVE_CONTEXT=r;var u=t.get("PageService");if(angular.isDefined(u)&&angular.isFunction(u.getActivePickerSelections)){var d=u.getActivePickerSelections();d.length>0&&(s.headers.AccountHash=d[0].id)}}return s},response:function(e){return e},responseError:function(t){if(-1===t.status&&t.config.url.match(l)){var n=t.config.url.substring(0,t.config.url.length-10);return t.data="<"+n+"></"+n+">",t}return t.config.url.match(s)?(t.data='<fail-page-content url="'+t.config.url+'"></fail-page-content>',t):e.reject(t)}};return c}])}},function(e,t,n){e.exports=function(e){n(215)(e),n(216)(e),n(219)(e),n(223)(e)}},function(e,t){e.exports=function(e){e.component("amModal",{template:['<div id="amModal" class="modal" ng-class="::{ \'fade\' : $ctrl.isFadeSupported }" tabindex="-1" role="dialog" style="display: hidden;">','   <div id="amModalDialog" role="document">','       <div id="amModalContent">','           <div id="amModalHeader" class="modal-header">','               <button type="button" class="close" data-dismiss="modal" data-bs-dismiss="modal" aria-label="Close">','                   <span aria-hidden="true">&times;</span>',"               </button>",'               <h4 class="modal-title" aria-level="2">','                   <i id="amModalIcon" aria-hidden="true"></i>','                   <span id="amModalTitle"></span>',"               </h4>","           </div>",'           <div id="amModalBody" class="modal-body"></div>','           <div id="amModalFooter" class="modal-footer"></div>',"       </div>","   </div>","</div>"].join(""),controller:["IS_MOBILE",function(e){var t=this;t.$onInit=function(){t.isFadeSupported=!e}}]})}},function(e,t,n){e.exports=function(e){n(217)(e),n(218)(e)}},function(e,t){e.exports=function(e){e.component("agreementTaskModal",{templateUrl:e.WEBAPP_ROOT+"/modals/agreement/agreementTaskModal.html",controller:["AgreementService","ResourceService","ModalService","AmInterfaceService","FormInputService","$timeout",function(t,n,a,r,i,o){var s=this,l=a.getModalData().agreementTask;s.$onInit=function(){s.errors={},s.getErrors=function(){return s.errors},s.isAuthorizeDisabled=function(){return!s.agreementForm||!s.agreementForm.$valid||s.isLoading},s.submit=function(){var c=a.getModalButtons();a.setModalButtons([i.getLoadingButton()]),t.record(s.agreementRecord).then(function(t){t.registrationTask=l,s.isLoading=!0,n.update(e.AM_SERVER_PATH+"/AgreementTask",t).then(function(e){for(var t=r.getPendingItems(),n=0;n<t.length;++n){var i=t[n];if(i.id===String(l.taskNumber)&&i.task.formNumber===l.formNumber){i.completed=!0,o(function(){r.finishPendingItem(i)},4e3);break}}a.closeModal(!0)}).catch(function(e){s.errors=e.data.errors,s.errors.declined?a.setModalButtons([{label:"word.ok",alignment:"right",btnType:"default",fn:a.closeModal}]):a.setModalButtons(c)}).finally(function(){s.isLoading=!1})}).catch(function(e){return a.setModalButtons(c)})},s.isFetching=!0,n.fetch(e.AM_SERVER_PATH+"/AgreementTask",{registrationTask:l}).then(function(e){s.agreementRecord=e.data.record}).finally(function(){s.isFetching=!1;var e=s.agreementRecord.declinable?"word.submit":"word.doAgree";a.setModalButtons([{label:e,alignment:"right",btnType:"primary",fn:s.submit,isDisabled:s.isAuthorizeDisabled}])})}}]})}},function(e,t){e.exports=function(e){e.component("viewAgreementModal",{templateUrl:e.WEBAPP_ROOT+"/modals/agreement/viewAgreementModal.html",controller:["ResourceService","ModalService",function(t,n){var a=this;a.$onInit=function(){a.isInProgress=!0,a.agreements=[];var r=n.getModalData().formDetails,i="/Agreement/";"number"==typeof r?i=i+"Form/"+r:"string"==typeof r&&(i+=r),t.fetch(e.AM_SERVER_PATH+i).then(function(e){a.agreements=e.data.agreements},function(e){a.errors=e.data.errors}).finally(function(){a.isInProgress=!1})}}]})}},function(e,t,n){e.exports=function(e){n(220)(e),n(221)(e),n(222)(e)}},function(e,t){e.exports=function(e){e.component("confirmModal",{templateUrl:e.WEBAPP_ROOT+"/modals/generic/confirmModal.html",controller:["$q","$translate","ModalService",function(e,t,n){var a=this,r=function(){return a.isLoading},i=function(){a.isLoading=!0,a.confirmFn().then(function(){n.setModalResult("SUCCESS")},function(e){n.setModalResult("ERROR"),a.errors=e}).finally(function(){a.noSuccessScreen&&"SUCCESS"===a.getConfirmState()?n.closeModal():(o(),a.isLoading=!1)})},o=function(){var e=[];"PENDING"===a.getConfirmState()?(e.push({label:a.noBtnKey,alignment:"left",fn:n.closeModal,btnType:"default",isDisabled:r}),e.push({label:a.yesBtnKey,alignment:"right",fn:i,btnType:a.yesBtnType,isDisabled:r})):e.push({label:a.closeBtnKey,alignment:"right",fn:n.closeModal,btnType:"default"}),n.setModalButtons(e)};this.$onInit=function(){this.isLoading=!1,this.pendingText=n.getModalData().pendingText,this.confirmFn=n.getModalData().confirmFn||function(){return e(function(e){e()})},this.successText=n.getModalData().successText||t.instant("word.success"),this.errorText=n.getModalData().errorText||t.instant("internal.error.request_submit"),this.noSuccessScreen=n.getModalData().noSuccessScreen||!1,this.noBtnKey=n.getModalData().noBtnKey||"word.no",this.yesBtnKey=n.getModalData().yesBtnKey||"word.yes",this.yesBtnType=n.getModalData().yesBtnType||"default",this.closeBtnKey=n.getModalData().closeBtnKey||"word.close",this.errors=[],this.getConfirmState=function(){return angular.isUndefined(n.getModalResult())?"PENDING":n.getModalResult()},o()}}]})}},function(e,t){e.exports=function(e){e.component("errorModal",{template:'<error-list errors="$ctrl.errors" error-heading="$ctrl.errorHeading"></error-list>',controller:["ModalService",function(e){this.$onInit=function(){this.errors=e.getModalData().errors,this.errorHeading=e.getModalData().errorHeading}}]})}},function(e,t){e.exports=function(e){e.component("infoModal",{templateUrl:e.WEBAPP_ROOT+"/modals/generic/infoModal.html",controller:["ModalService",function(e){var t=this;t.$onInit=function(){t.infoContent=e.getModalData().infoContent}}]})}},function(e,t,n){e.exports=function(e){n(224)(e)}},function(e,t){e.exports=function(e){e.component("helpModal",{template:'<loading-overlay ng-if="$ctrl.loading"></loading-overlay><load-iframe url="$ctrl.helpUrl" frame-height="300" load-callback="$ctrl.onLoaded()"></load-iframe>',controller:["ModalService",function(e){var t=this;t.$onInit=function(){t.loading=!0,t.helpUrl=e.getModalData().helpUrl,t.onLoaded=function(){t.loading=!1}}}]})}},function(e,t,n){e.exports=function(e){n(226)(e),n(228)(e),n(238)(e)}},function(e,t,n){e.exports=function(e){n(227)(e)}},function(e,t){e.exports=function(e){e.controller("AgreementStepController",["CONTENT_HOST","DynamicSequenceService","AgreementService","ScreenshotService",function(e,t,n,a){var r=this;r.$onInit=function(){r.agreementRecord=t.getSequenceData(),r.agreements=r.agreementRecord.agreements,r.signature=r.agreementRecord.signature,r.signatureExempt=r.agreementRecord.signatureExempt,r.signatureWarning=r.agreementRecord.signatureWarning,r.noSignatureHeader=r.agreementRecord.noSignatureHeader,r.noSignatureText=r.agreementRecord.noSignatureText,r.collapsed=r.agreementRecord.collapsed,r.accountId=r.agreementRecord.accountId,r.ibEntity=r.agreementRecord.ibEntity,r.agreementRecord.declined=t.getSequenceData().declined,r.agreementData=t.getSequenceData().agreementData||{},r.getSequenceData=t.getSequenceData,r.contentHost=e,r.stepIndex=t.getSequenceData().stepIndex,t.configureButtons({canGoBack:r.stepIndex>0,continueBtn:{onClick:function(){if(n.validate(r.agreementRecord)){r.agreementData.declined=r.agreementRecord.declined,"boolean"==typeof r.agreementData.declined&&r.agreementData.declined||"string"==typeof r.agreementData.declined&&"true"===r.agreementData.declined?delete r.agreementData.signatureSubmissionData:r.signatureExempt||(r.agreementData.signatureSubmissionData=r.signature.signatureSubmissionData);for(var e=!1,i=0;i<r.agreementRecord.agreements.length;i++){var o=r.agreementRecord.agreements[i];if(6112===o.id.formNumber)if(null===document.getElementById("fee-configuration")){var s=o.agreementContent;if(angular.isDefined(s)&&angular.isDefined(s.feesConfiguration)&&null!==s.feesConfiguration)return void t.triggerInternalError("request_submit")}else{e=!0;var l=t.getSequenceButtonData();t.configureButtons({extraButtons:[{alignment:"right",btnType:"primary",isDisabled:function(){return!0},btnIcon:"fa-spin fa-spinner"}]});var c=document.getElementById("fee-configuration");a.elementScreenshot(c).then(function(e){r.agreementData.feeSchedule=e,t.configureButtons(l),t.stepForward(r.agreementData)})}}e||t.stepForward(r.agreementData)}}}})}}])}},function(e,t,n){e.exports=function(e){n(229)(e),n(230)(e),n(231)(e),n(232)(e),n(233)(e),n(234)(e),n(235)(e),n(237)(e)}},function(e,t){e.exports=function(e){e.controller("GenericCompletionStepController",["$translate","AmInterfaceService","DynamicSequenceService","NavigationService",function(e,t,n,a){var r=this;r.$onInit=function(){if(r.getSequenceData=n.getSequenceData,angular.isDefined(r.getSequenceData().request))for(var i=r.getSequenceData().request,o=t.getPendingItems(),s=0;s<o.length;++s){var l=o[s];if(l.id===String(i.id)){t.finishPendingItem(l);break}}n.configureButtons({canGoBack:!1,continueBtn:{onClick:a.navigateToPrevBreadcrumb,btnText:e.instant("word.ok")}})}}])}},function(e,t){e.exports=function(e){e.controller("DummyStepController",["PageService","DynamicSequenceService",function(e,t){var n=this;n.$onInit=function(){n.direction=t.getSequenceData().direction,e.setOnPageLoad(function(){"BACKWARD"===n.direction?t.stepBack():"FORWARD"===n.direction&&t.stepForward()})}}])}},function(e,t){e.exports=function(e){e.controller("GenericErrorStepController",["$translate","DynamicSequenceService","PageService","NativeAppCommunicationService",function(e,t,n,a){var r=this;r.$onInit=function(){r.getSequenceData=t.getSequenceData,"T"===(n.getCurrentPage().serverParams||{}).nativeAppRedirect?t.configureButtons({canGoBack:!1,continueBtn:{onClick:a.closeWebView,btnText:e.instant("resume.login")}}):t.configureButtons({canGoBack:!1})}}])}},function(e,t){e.exports=function(e){e.component("genericLoadingStep",{template:function(){return"<div page-structure></div>"},controller:["DynamicSequenceService","PageService",function(e,t){this.$onInit=function(){t.setOnPageLoad(e.stepForward)}}]})}},function(e,t){e.exports=function(e){e.controller("GenericNoActionStepController",["DynamicSequenceService",function(e){var t=this;t.$onInit=function(){t.getSequenceData=e.getSequenceData,e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{onClick:e.stepForward}})}}])}},function(e,t){e.exports=function(e){e.controller("GenericNoChangeStepController",["DynamicSequenceService",function(e){var t=this;t.$onInit=function(){t.getSequenceData=e.getSequenceData,e.configureButtons({canGoBack:t.getSequenceData().stepIndex>0})}}])}},function(e,t,n){e.exports=function(e){e.component("genericRequestRejectionStep",{template:n(236),controller:["$translate","DynamicSequenceService","DynamicTranslationService","NavigationService",function(e,t,n,a){var r=this;r.$onInit=function(){r.getSequenceData=t.getSequenceData,r.rejectionCodes=t.getSequenceData().rejectionCodes||[];var i=t.getSequenceData().translatedRejectionCodes||[];i.length>0?r.messages=function(e){for(var t=[],a=0;a<e.length;a++){var r=e[a],i=n.getDisplayText(r);angular.isUndefined(i)||""===i||t.push(i)}return t}(i):r.rejectionCodes.length>0?r.messages=function(){for(var t=[],n=0;n<r.rejectionCodes.length;n++){var a="sequence.request.rejected.message."+r.rejectionCodes[n],i=e.instant(a);i!==a&&t.push(i)}return t}():r.messages=[],t.configureButtons({continueBtn:{onClick:a.navigateToPrevBreadcrumb,btnText:e.instant("word.ok")}})}}]})}},function(e,t){e.exports='<div page-structure>\r\n    \x3c!-- Heading --\x3e\r\n    <div align="center">\r\n        <i class="fa fa-2x fa-exclamation-triangle text-warning"></i>\r\n    </div>\r\n    <h3 class="text-center text-dark" translate="sequence.request.rejected.text"></h3>\r\n    <h6 class="text-center">{{\'word.referenceNumber\' | translate}}: {{::$ctrl.getSequenceData().request.id}}</h6>\r\n    <div class="alert alert-warning" ng-if="$ctrl.rejectionCodes.length === $ctrl.messages.length">\r\n        <p ng-if="$ctrl.messages.length === 1">{{$ctrl.messages[0]}}</p>\r\n        <ul class="paralist" ng-if="$ctrl.messages.length > 1">\r\n        \t<li ng-repeat="message in $ctrl.messages">{{ message }}</li>\r\n        </ul>\r\n    </div>\r\n    <div class="alert alert-warning" ng-if="$ctrl.rejectionCodes.length !== $ctrl.messages.length">\r\n    \t<p>{{ \'internal.error.request_process\' | translate }}</p>\r\n    </div>\r\n</div>'},function(e,t){e.exports=function(e){e.controller("GenericReviewStepController",["DynamicSequenceService",function(e){var t=this;t.$onInit=function(){t.getSequenceData=e.getSequenceData,e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{onClick:e.stepForward}})}}])}},function(e,t,n){e.exports=function(e){n(239)(e)}},function(e,t,n){e.exports=function(e){e.component("sequenceWarning",{template:n(240),controller:["ModalService",function(e){e.setModalButtons([{label:"sequence.warning.leavePage",alignment:"left",fn:function(){e.closeModal(1)}},{label:"sequence.warning.stayOnPage",alignment:"right",btnType:"primary",fn:function(){e.closeModal(0)}}])}]})}},function(e,t){e.exports="<div class=\"row\">\r\n\t<div class=\"col-xs-12 col-sm-12 col-md-12 col-lg-12\">\r\n\t\t<p>{{ 'sequence.warning.text' | translate }}</p>\r\n        <br>\r\n        <p>{{'sequence.warning.instr' | translate }}</p>\r\n\t</div>\r\n</div>"},function(e,t,n){e.exports=function(e,t){n(242)(e),n(244)(e),n(246)(e),n(248)(e),n(250)(e),n(254)(e),n(257)(e),n(259)(e),n(261)(e),n(262)(e),n(263)(e),n(264)(e),n(265)(e),n(266)(e),n(267)(e),n(268)(e),n(269)(e),n(270)(e),n(271)(e),n(272)(e),n(273)(e),n(274)(e),n(275)(e),n(276)(e),n(277)(e),n(278)(e),n(279)(e),n(280)(e,t),n(281)(e,t),n(282)(e),n(283)(e),n(284)(e),n(285)(e),n(286)(e),n(287)(e),n(288)(e),n(289)(e),n(290)(e),n(291)(e),n(292)(e),e.factory("SessionService",n(293)),e.factory("StateHistoryService",n(294)),e.factory("StateLocationService",n(295)),e.factory("PickerHistoryService",n(296))}},function(e,t,n){e.exports=function(e){n(243)(e)}},function(e,t){e.exports=function(e){function t(e,t,n,a,r){var i={getAgreementTitle:function(e){var n="form.title."+e.id.formNumber,a=t.instant(n);return a!==n?a:e.agreementTitle},openAgreementModal:function(e){var a="form.title."+e.formNumber,r=t.instant("form.title."+e.formNumber);r===a&&(r=e.formName),""===r&&(r=t.instant("agreement.modal.title"));var i={title:r,templateUrl:"agreement-task-modal.component",dialogClass:"modal-lg",modalData:{agreementTask:e}};return n.openModal(i)},viewAgreement:function(e){if(angular.isUndefined(e))return!1;var a={title:t.instant("modal.title.Terms&Conditions"),templateUrl:"view-agreement-modal.component",dialogClass:"modal-lg",modalData:{formDetails:e}};return n.openModal(a)},downloadPdfAgreement:function(e){var n=(e.agreementTitle||t.instant("form.title."+e.id.formNumber))+".pdf",a=r.decodeBase64(e.fileContent);r.download(n,a,"application/pdf")},validate:function(e){if(angular.isUndefined(e.read))return!0;for(var t in e.errors=[],e.read)e.read.hasOwnProperty(t)&&(e.read[t]||e.errors.push({type:"unread",formNumber:parseInt(t)}));return 0===e.errors.length},record:function(t){if(!i.validate(t))return(r=e.defer()).reject(t.errors),r.promise;var n={};n.agreements=t.agreements.map(function(e){return e.id});var r,o={};return t.agreements.map(function(e){o[e.id.formNumber]=e.agreementSubstitutions}),n.agreementSubstitutions=o,n.declined=t.declined,t.signatureExempt||(n.signatureSubmissionData=t.signature.signatureSubmissionData),t.screenshotRequired?a.screenshot(t.screenshotType).then(function(e){return n.screenshot=e,n.screenshotType=t.screenshotType,n}):((r=e.defer()).resolve(n),r.promise)}};return i}e.factory("AgreementService",t),t.$inject=["$q","$translate","ModalService","ScreenshotService","FileDownloadService"]}},function(e,t,n){e.exports=function(e){n(245)(e)}},function(e,t){e.exports=function(e){e.factory("DateTimeService",["LanguageService","$translate",function(e,t){var n=function(){return e.getCurrentLanguage().replace(/_/g,"-")},a={weekday:"long",year:"numeric",month:"long",day:"numeric"},r={toLocaleDate:function(e,t,a){return-1===e.indexOf("T")&&(e+=" 00:00:00",angular.isDefined(t)&&null!==t&&angular.isDefined(t.timeZone)&&console.warn("timeZone option supplied for date/time with no time information")),angular.isDefined(t)&&null!==t&&"timeZoneName"in t?r.getDateWithTimeZone(t,e,a||n()):new Date(e).toLocaleString(a||n(),t)},getDateWithTimeZone:function(e,t,n){var a=r.getLocaleSpecificTimeZone(new Date(t),n,e);delete e.timeZoneName;var i=new Date(t).toLocaleString(n,e);return r.getFormattedDate(i,a)},getFormattedDate:function(e,n){return n?t.instant("localeSpecificDate.format",{date:e,timeZone:n}):e},getLocaleSpecificTimeZone:function(e,t,n){var a=new Intl.DateTimeFormat(t,n).formatToParts(e);return angular.isDefined(a)&&null!==a?a.find(function(e){return e&&"timeZoneName"===e.type}).value:null},toLocaleTime:function(e,t,a){return new Date(e).toLocaleTimeString(a||n(),t)},toLongLocaleDate:function(e,t,n){return r.toLocaleDate(e,angular.extend({},a,t||{}),n)},toLongLocaleTime:function(e,t,n){return r.toLocaleTime(e,angular.extend({},a,t||{}),n)},getUserTimeZone:function(){return r.getLocaleSpecificTimeZone(new Date,"en",{timeZoneName:"short"})}};return r}])}},function(e,t,n){e.exports=function(e){n(247)(e)}},function(e,t){e.exports=function(e){e.factory("EnvironmentService",["$window",function(e){var t={isIaces:function(){return"proxy.prod.ibkr-int.com"===e.location.host},isExternalQa:function(){return"qa.interactivebrokers.com"===e.location.host},getWebsiteUrl:function(e){return t.isIaces()?"https://www.interactivebrokers.com"+e:e}};return t}])}},function(e,t,n){e.exports=function(e){n(249)(e)}},function(e,t){e.exports=function(e){e.factory("FormInputService",["ModalService",function(e){var t={html:function(e){var t=e.label||"",n=e.labelAlign||"",a=e.input||"",r=e.icon||"",i=e.inputClasses||"",o=e.inputNgClasses||"",s=e.name||"",l="top"!==n?'<div class="form-group">':"";l+='<div class="row'+(r.length>0?" align-items-center":"")+'">';var c='<div class="form-label-container"><label '+(s?'for="'+s+'"':"")+' class="control-label">'+t+"</label>";angular.isDefined(e.labelDesc)&&e.labelDesc.length>0&&(c+='<br><span class="text-secondary">'+e.labelDesc+"</span>"),c+="</div>";var u='<div class="form-input-container '+i+'" ng-class="'+o+'">'+a;(angular.isDefined(e.inputDesc)&&e.inputDesc.length>0&&(u+='<span class="text-secondary">'+e.inputDesc+"</span>"),l+=c+(u+="</div>"),r.length>0)&&(l+='<div class="form-icon-container">'+r+"</div>");return l+="</div>",l+="top"!==n?"</div>":"<br>"},size:function(t,n){var a,r,i,o,s,l=n.wide||e.isModalOpen(),c=n.twoLines?2:n.singleLine?1:0;2===c?t.find(".form-label-container").addClass("col-xs-12 col-sm-12 col-md-12 col-lg-12"):(a=1===c?"col-xs-6":"col-xs-12",t.find(".form-label-container").addClass(a+" col-sm-6 col-md-6 col-lg-4"));r=n.icon?1===c?"col-xs-4":"col-xs-10":1===c?"col-xs-6":"col-xs-12",i=n.icon?2===c?"col-sm-11":"col-sm-5":2===c?"col-sm-12":"col-sm-6",o=n.icon?2===c?"col-md-11":"col-md-5":2===c?"col-md-12":"col-md-6",s=l?n.icon?2===c?"col-lg-10":"col-lg-6":2===c?"col-lg-12":"col-lg-8":2===c?"col-lg-8":"col-lg-4",t.find(".form-input-container").addClass(r+" "+i+" "+o+" "+s),n.icon&&t.find(".form-icon-container").addClass("col-xs-2 col-sm-1 col-md-1 col-lg-2")},align:function(e,t){"right"===(t.alignment||"")&&(t.singleLine?e.find(".form-input-container").addClass("text-right"):e.find(".form-input-container").addClass("text-sm-right"))},getLoadingButton:function(e){return{alignment:(e=e||{}).alignment||"right",btnType:e.btnType||"primary",isDisabled:e.isDisabled||function(){return!0},btnIcon:"fa-spin fa-spinner"}}};return t}])}},function(e,t,n){e.exports=function(e){n(251)(e),n(252)(e),n(253)(e)}},function(e,t){e.exports=function(e){e.factory("CountryService",["$q","ResourceService",function(t,n){var a=e.AM_SERVER_PATH+"/IpCountry",r=e.AM_SERVER_PATH+"/ProhibitedCountry",i={},o=void 0,s=void 0;return i.fetchIpCountry=function(){return o?o.promise:(o=t.defer(),n.fetch(a).then(function(e){o.resolve(e.data.ipCountry)},function(e){o.reject(e.data.errors)}),o.promise)},i.fetchProhibitedCountries=function(){return s?s.promise:(s=t.defer(),n.fetch(r).then(function(e){s.resolve(e.data)},function(e){s.reject(e.data)}),s.promise)},i.isGreaterChinaCountry=function(e){return angular.isDefined(e)&&angular.isDefined(e.alpha3)&&("HKG"===e.alpha3||"MAC"===e.alpha3||"TWN"===e.alpha3)},i}])}},function(e,t){e.exports=function(e){function t(t){var n={fetchStates:function(n){return t.fetch(e.AM_SERVER_PATH+"/States/"+n,{},!0)}};return n}e.factory("StateService",t),t.$inject=["ResourceService"]}},function(e,t){function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(e){e.factory("GooglePlacesService",["ResourceService","$q","$timeout",function(t,a,r){var i=e.AM_SERVER_PATH+"/GooglePlacesUtil",o={},s=void 0,l=void 0,c={},u={};return o.getCachedGoogleResponse=function(e){return c[e]},o.setCachedGoogleResponse=function(e,t){c[e]=t},o.getStateDbCodeFromGoogleResponse=function(e){var n={googleResponse:e};return t.create(i+"/GetStateCode",n,!0)},o.isSuspiciousAddressConfirmed=function(e){return u[e]},o.confirmSuspiciousAddress=function(e){u[e]=!0},o.getApiKey=function(){var e=a.defer();return angular.isDefined(s)?e.resolve({key:s}):t.fetch(i+"/ApiKey").then(function(t){s=t.data.key,e.resolve(t.data)},function(t){e.reject(t.data)}),e.promise},o.getGeocoder=function(){return angular.isUndefined(l)&&(l=new google.maps.Geocoder),l},o.geocode=function(e){var t=a.defer(),n=o.getCachedGoogleResponse(e);return angular.isDefined(n)?t.resolve(n):o.getGeocoder().geocode({address:e},function(n,a){var r={status:a,results:n};o.setCachedGoogleResponse(e,r),t.resolve(r)}),t.promise},o.isGoogleApiLoaded=function(){var e=a.defer(),t="object"===("undefined"==typeof google?"undefined":n(google))&&"object"===n(google.maps);return t?e.resolve(t):r(function(){(t="object"===("undefined"==typeof google?"undefined":n(google))&&"object"===n(google.maps))?e.resolve(t):r(function(){(t="object"===("undefined"==typeof google?"undefined":n(google))&&"object"===n(google.maps))?e.resolve(t):e.resolve(!1)},1e3)},1e3),e.promise},o}])}},function(e,t,n){e.exports=function(e){n(255)(e)}},function(e,t,n){e.exports=function(e){e.factory("PluginService",["$q","JsService","CssService","EnvironmentService",function(e,t,a,r){var i={},o={},s=n(256)(r);return i.load=function(n){if(angular.isDefined(o[n]))return o[n];for(var r=s[n]||{},i=[],l=(r.js||{}).files||[],c=0;c<l.length;++c)i.push(t.injectJavascript("js_"+n+"_"+c,l[c]));var u=(r.css||{}).files||[];for(c=0;c<u.length;++c){var d=angular.isObject(u[c])?u[c]:{url:u[c]};d.id=d.id||"css_"+n+"_"+c,i.push(a.inject(d))}if(0===i.length)throw"Invalid plugin name: "+n;return o[n]=e.all(i),o[n]},i}])}},function(e,t){e.exports=function(e){var t=e.getWebsiteUrl;return{chosen:{js:{files:[t("/scripts/common/js/am/chosen.v1.4.2.js")]},css:{files:[{url:t("/css/chosen-1.4.2/chosen.css"),prepend:!0}]}},iCheck:{js:{files:[t("/scripts/common/js/2015/icheck.v1.0.2.js")]},css:{files:[t("/css/icheck-1.0.2/icheck.css")]}},dateTimePicker:{js:{files:[t("/scripts/common/js/2015/bootstrap-datetimepicker.min.js")]},css:{files:[t("/css/bootstrap-datetimepicker/bootstrap-datetimepicker.min.css")]}},datePicker:{js:{files:[t("/scripts/common/js/2015/datepicker.v1.7.1.js")]},css:{files:[t("/css/datepicker-1.7.1/datepicker.min.css")]}}}}},function(e,t,n){e.exports=function(e){n(258)(e)}},function(e,t){e.exports=function(e){e.factory("TelemetryService",["$window","ResourceService","LanguageService",function(t,n,a){var r={},i=void 0,o={},s=[];return r.onReady=function(){return angular.isDefined(i)?i:i=n.fetch(e.AM_SERVER_PATH+"/AmTelemetry/Config").then(function(e){if((o=e.data).cesAllowed)return r.fetchCesConfig()})},r.logTelemetry=function(t,a){r.onReady().then(n.create(e.AM_SERVER_PATH+"/AmTelemetry",{currentPage:t,navigateToPage:a}))},r.fetchCesConfig=function(){return n.create(o.root+"/ces/config",{lang:a.getCurrentLanguage(),device:o.device},!1,{headers:{"X-XYZAB":t.getCookie("XYZAB_AM.LOGIN"),"X-SERVICE":"AM.LOGIN"}}).then(function(e){return s=e.data,e})},r.getConfig=function(){return o},r.showCes=function(e){if(o.cesAllowed&&angular.isDefined(t.onebar)&&angular.isFunction(t.onebar.openCESDialog)){for(var n=void 0,a=0;a<s.length;++a)if(s[a].ccid===e){n=s[a];break}angular.isUndefined(n)||t.onebar.openCESDialog(n)}},r}])}},function(e,t,n){e.exports=function(e){n(260)(e)}},function(e,t){e.exports=function(e){e.factory("ibTranslationInterpolationFactory",["$translateDefaultInterpolation","WHITE_BRANDING_DETAILS",function(e,t){var n={setLocale:function(e){return e},getInterpolationIdentifier:function(){return"ib"},interpolate:function(n,a,r,i,o){return(a=a||{})._wbTitle=t.getTitle(),e.interpolate(n,a,r,i,o)}};return n}])}},function(e,t){e.exports=function(e){function t(t){var n={fetch:function(n,a){return a=a||!1,t.fetch(e.AM_SERVER_PATH+"/AlphaTestCheck",{functionality:n,checkEmail:a})}};return n}e.factory("AlphaTestService",t),t.$inject=["ResourceService"]}},function(e,t){e.exports=function(e){function t(e){var t=function(t){if(angular.isUndefined(e.amHooks))return angular.noop;var n=e.amHooks[t];return angular.isFunction(n)?n:angular.noop},n={tickle:function(){return t("tickle")()},onUserReady:function(){return t("onUserReady")()},getUser:function(){return t("getUser")()},getPendingItems:function(){var e=t("getPendingItems")();return angular.isArray(e)?e:[]},fetchPendingItems:function(){return t("fetchPendingItems")()},getActivePendingItem:function(){return t("getActivePendingItem")()},finishPendingItem:function(e){return t("finishPendingItem")(e)},hasPendingItemNotifications:function(){return t("pendingItemNotifications")()},finishPendingRequest:function(e){return t("finishPendingRequest")(e)},navigateToPendingItem:function(e){return t("navigateToPendingItem")(e)},logout:function(e){return t("logout")(e)},navigateToPendingItems:function(){return t("navigateToPendingItems")()},isLoginTaskActive:function(){return t("isLoginTaskActive")()},getActiveLoginTask:function(){return t("getActiveLoginTask")()},declineLoginTask:function(){return t("declineLoginTask")()}};return n}e.factory("AmInterfaceService",t),t.$inject=["$window"]}},function(e,t){e.exports=function(e){e.factory("ClipboardService",function(){var e={copyText:function(e){var t=document.createElement("span");t.appendChild(document.createTextNode(e)),t.id="tmpCopyToClipboard",angular.element(document.body.append(t));var n=document.createRange();n.selectNode(t),window.getSelection().removeAllRanges(),window.getSelection().addRange(n);var a=document.execCommand("copy");return window.getSelection().removeAllRanges(),t.remove(),a}};return e})}},function(e,t){e.exports=function(e){function t(t){var n={notifyLoad:function(e){var n=new CustomEvent("contentLoaded",{detail:e});t.dispatchEvent(n),t[e.componentId+"Submit"]=e.submit},triggerEvent:function(e,n,a){var r=new CustomEvent(e,{detail:{componentName:n,eventData:a}});t.dispatchEvent(r)}};return n.loadDynamic=e.loadDynamicComponent,n}e.factory("ComponentService",t),t.$inject=["$window"]}},function(e,t){e.exports=function(e){function t(e){var t={},n={};return t.inject=function(t){var a=t.id,r=t.url;if(angular.isDefined(n[a]))return n[a].promise;var i=e.defer();n[a]=i;var o=document.getElementById(a);if(angular.isDefined(o)&&null!==o&&"LINK"===o.nodeName)return i.resolve(),i.promise;var s=function(e,t,n){var a=document.createElement("link");return a.id=e,a.rel="stylesheet",a.type="text/css",a.media=n||"screen",a.href=t,a}(a,r,t.media);if(s.onload=i.resolve,angular.isObject(t.before)){var l=document.getElementById(t.before.id);if(angular.isDefined(l)&&null!==l)return l.parentNode.insertBefore(s,l),i.promise}return t.prepend?angular.element("head").prepend(s):angular.element("head").append(s),i.promise},t.injectStylesheet=function(e,n,a){return t.inject({id:e,url:n,prepend:a})},t.remove=function(e){var t=document.getElementById(e);null===t||angular.isUndefined(t)||(t.remove(),n[e]=void 0)},t}e.factory("CssService",t),t.$inject=["$q"]}},function(e,t){e.exports=function(e){function t(t,n,a,r,i,o){var s={openTicket:function(s,l){var c={redirectToApp:"webtkt"};if(0!==(s=s||0)&&(c.view="ticket-"+s),r===i.STANDALONE){a.setIsPageLoading(!0);var u={},d="";n.fetch(e.AM_SERVER_PATH+"/Support/Config").then(function(e){for(var t in u=e.data.supportParams,c)c.hasOwnProperty(t)&&(u[t]=c[t]);d=e.data.supportUrl}).finally(function(){var e=[];for(var t in u)e.push(encodeURIComponent(t)+"="+encodeURIComponent(u[t]));var n=e.join("&");o.open(d+"?"+n,"upload","menubar=no,toolbar=no,location=no,resizable=yes,status=yes"),a.setIsPageLoading(!1)})}else angular.isUndefined(l)||null===l||""===l||(c.autoSelect=l),t.menuNavigate("Support",{},c)}};return s}e.factory("CsTicketService",t),t.$inject=["NavigationService","ResourceService","PageService","ACTIVE_CONTEXT","ApplicationContext","$window"]}},function(e,t){e.exports=function(e){function t(t,n,a,r,i,o,s,l,c,u){var d={},p={},g="",f="",m=!1,v={},h=function(e){return!v.hasUnsavedChanges(e.id)||function(){c.showUnsavedChanges(e)}},b=function(e){return p=e.data,d={},o.setPageLoadingText(p.pageLoadingText),g!==p.page?(g=p.page,e):(g="",t(function(){return g=p.page},100),e)},y=function(e){var a="";if(angular.isDefined(p)&&(a=p.id),null!==(p=e.data)&&angular.isDefined(p)){if(angular.isDefined(p.errors)&&angular.isDefined(p.errors.internal))return v.triggerInternalError(),n.reject(e);if(angular.isDefined(p.errors)&&angular.isDefined(p.errors.restricted))return v.triggerRestrictedError(),n.reject(e);if(403===e.status)return v.triggerForbiddenError(),n.reject(e);if(e.status>=500&&e.status<=511)return v.triggerInternalError("request_submit"),n.reject(e);g!==p.page?g=p.page:a!==p.id&&(g="",t(function(){return g=p.page},100))}return o.onPartialLoadFailed(),n.reject(e)},D=function(e,t){return o.setIsPageLoading(!0),r.update(f,e).then(b,y).then(function(e){return e.data.stepIndex>0&&(m=!1),e},function(e){if(e.data&&e.data.errors){if(angular.isFunction(t)){var a=t(e);return angular.isDefined(a)?a:e}if(angular.isDefined(e.data.errors.customErrors))return n.reject(e)}})};return v.getSequencePage=function(){return g},v.getSequenceSource=function(){return f},v.getSequenceData=function(){return p},v.getSequenceButtonData=function(){return d},v.isSequenceActive=function(){return""!==f},v.getDefaultBackFn=function(){var e=o.getBreadcrumbs();return p.stepIndex>0?v.stepBack:(e||[]).length>1?i.navigateToPrevBreadcrumb:void 0},v.configureButtons=function(e){if(d=e,angular.isUndefined(d.backBtn)&&d.canGoBack){var t=v.getDefaultBackFn();angular.isDefined(t)&&(d.backBtn={btnText:a.instant("word.back"),onClick:t})}d.isEnabled=!0},v.initializeSequence=function(e,t){return f=e,m=!0,i.setNavigationValidator(h),o.setIsPageLoading(!0),r.create(f,t).then(b,y)},v.destroySequence=function(){f="",g="",p={},i.setNavigationValidator(void 0),o.setPageLoadingText(void 0)},v.restartSequence=function(e){return v.initializeSequence(f,e)},v.triggerInternalError=function(t){angular.isDefined(t)&&(p.errors.internal=t),g=e.WEBAPP_ROOT+"/sequences/error/internalSequenceError.html",p.complete=!0},v.triggerForbiddenError=function(){g=e.WEBAPP_ROOT+"/sequences/error/forbiddenSequenceError.html",p.complete=!0},v.triggerRestrictedError=function(){g=e.WEBAPP_ROOT+"/sequences/error/restrictedSequenceError.html",p.complete=!0},v.stepForward=function(e,t){return p.screenshotRequired&&angular.isDefined(p.screenshotType)?v.stepForwardScreenshot(p.screenshotType,e,t):D(e,t)},v.stepBack=function(){return o.setIsPageLoading(!0),r.delete(f).then(b,y)},v.stepForwardScreenshot=function(e,t,n){t=t||{};var a=v.getSequenceButtonData();return v.configureButtons({extraButtons:[u.getLoadingButton()]}),l.screenshot(e).then(function(r){return v.configureButtons(a),t.screenshot=r,t.screenshotType=e,D(t,n)})},v.hasUnsavedChanges=function(e){if(v.isSequenceActive()){if(angular.isUndefined(p.stepIndex))return!1;if(p.exitWarning){var t=o.getCurrentPage().pageData.sequenceLinkedPageIds,n=angular.isUndefined(t)||0===t.length||angular.isUndefined(e)||-1!==t.indexOf(e);return 0===p.stepIndex&&m?!n:!p.complete||!n}return!1}return!1},v}e.factory("DynamicSequenceService",t),t.$inject=["$timeout","$q","$translate","ResourceService","NavigationService","PageService","ModalService","ScreenshotService","NavigationGuardService","FormInputService"]}},function(e,t){e.exports=function(e){function t(e){var t={};return t.getDisplayText=function(t){return angular.isUndefined(t)?"":function t(n){if(angular.isUndefined(n)||null==n)return"";if(""===n.key)return n.displayText;for(var a={},r=Object.keys(n.substitutions),i=0;i<r.length;++i){var o=r[i],s=n.substitutions[o];a[o]=t(s)}var l=e.instant(n.key,a);return l!==n.key||angular.isUndefined(n.displayText)||0===n.displayText.length?l:n.displayText}(t)},t}e.factory("DynamicTranslationService",t),t.$inject=["$translate"]}},function(e,t){e.exports=function(e){function t(t){var n={sendEmailToken:function(n){var a=e.AM_SERVER_PATH+"/User/EmailToken";return angular.isDefined(n)&&(a+="/"+n),t.create(a)}};return n}e.factory("EmailTokenService",t),t.$inject=["ResourceService"]}},function(e,t){e.exports=function(e){function t(e){var t={getErrorText:function(t,n){var a={},r=t+n;if(-1!==n.indexOf("|")){var i=n.split("|");a=JSON.parse(i[1]),r=t+i[0]}var o=e.instant(r,a);return o!==r?o:e.instant("field.error."+n)},getFormServerErrors:function(e){return angular.isDefined(e)&&null!==e&&angular.isFunction(e.getServerErrors)?e.getServerErrors():{}},getElementKey:function(e){return("formElement_"+e).replace(/[^A-Za-z0-9_]/g,"")},setErrorSuppression:function(e,t){return e.$_suppressionMap=t},getErrorSuppression:function(e){return e.$_suppressionMap}};return t}e.factory("ErrorService",t),t.$inject=["$translate"]}},function(e,t){e.exports=function(e){function t(e,t,n){var a=function(e,t){var n=document.createElement("a");n.setAttribute("download",t),n.setAttribute("href",e),n.setAttribute("target","_blank"),document.body.appendChild(n),n.click(),document.body.removeChild(n)},r=function(e,t){var n='<iframe src="'+e+'" frameborder="0" style="border:0; top:0px; left:0px bottom:0px; right:0px; width:100%; height:100%;" allowfullscreen></iframe>';t.document.open(),t.document.write(n),t.document.close()},i={fetchFile:function(t,n,a,r){var i={method:r||"GET",url:n,responseType:a};return"PUT"===r||"POST"===r?i.data=t:i.params=t,e(i)},getFileNameFromHeaders:function(e){if(!e)return"";var t=e("Content-Disposition"),n=t.indexOf("=");return t.substring(n+1)},processDownload:function(e,o){var s=e.fileName,l=e.fileContent,c=e.contentType,u=e.fileFormat;l="PDF"===u||"ZIP"===u||"EXCEL"===u?i.decodeBase64(l):i.b64DecodeUnicode(l);var d=new Blob([l],{type:c});if(n.isMicrosoft())t.navigator.msSaveOrOpenBlob(d,s);else if(t.URL||t.webkitURL){var p=(t.URL||t.webkitURL).createObjectURL(d);o?r(p,o):a(p,s)}else{var g=new FileReader;g.onload=function(){o?r(g.result,o):a(g.result,s)},g.readAsDataURL(d)}},b64DecodeUnicode:function(e){return decodeURIComponent(atob(e).split("").map(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join(""))},decodeBase64:function(e){for(var t=window.atob(e),n=t.length,a=new Uint8Array(n),r=0;r<n;r++)a[r]=t.charCodeAt(r);return a},download:function(e,r,i){var o=new Blob([r],{type:i});if(n.isMicrosoft())t.navigator.msSaveOrOpenBlob(o,e);else if(n.isChromeWin10()){var s=new FileReader;s.onload=function(){a(s.result,e)},s.readAsDataURL(o)}else{var l=(t.URL||t.webkitURL).createObjectURL(o);n.isIos()?t.open(l,"_blank"):a(l,e)}}};return i}e.factory("FileDownloadService",t),t.$inject=["$http","$window","UserAgentService"]}},function(e,t){e.exports=function(e){function t(e,t,n,a){var r={uploadFileToUrl:function(e,n){var a={method:"POST",url:n,data:e,transformRequest:angular.identity,headers:{"Content-Type":void 0}};return t(a).then(function(e){return e})},serialize:function(t){var r=e.defer(),i=new FileReader;return i.onload=function(e){a.$applyAsync(function(){var a=e.target.result;r.resolve({name:t.name,data:n.btoa(a)})})},i.readAsBinaryString(t),r.promise}};return r}e.factory("FileUploadService",t),t.$inject=["$q","$http","$window","$rootScope"]}},function(e,t){e.exports=function(e){function t(e,t){var n={openHelpModal:function(n,a){var r="https://www.ibkrguides.com/help/"+n.toLowerCase();return angular.isDefined(a)&&(r+="_"+a.toLowerCase()),r+=".htm",t.openInfoModal({title:e.instant("word.help"),templateUrl:"help-modal.component",modalData:{helpUrl:r}})},getBaseUrl:function(){return"https://www.ibkrguides.com"}};return n}e.factory("HelpService",t),t.$inject=["$translate","ModalService"]}},function(e,t){e.exports=function(e){function t(e){var t={},n={};return t.injectJavascript=function(t,a){if(angular.isDefined(n[t]))return n[t].promise;var r=e.defer();n[t]=r;var i=document.getElementById(t);if(angular.isDefined(i)&&null!==i&&"SCRIPT"===i.nodeName)return r.resolve(),r.promise;var o,s=document.createElement("script");return s.id=t,s.src=a+"?_="+((o=new Date).getFullYear()+("0"+(o.getMonth()+1)).slice(-2)+("0"+o.getDate()).slice(-2)+("0"+o.getHours()).slice(-2)),s.onload=r.resolve,s.type="text/javascript",document.getElementsByTagName("head")[0].appendChild(s),r.promise},t}e.factory("JsService",t),t.$inject=["$q"]}},function(e,t){e.exports=function(e){function t(t,n,a,r,i,o,s,l){var c=i,u=[],d={},p={},g=void 0,f=e.AM_SERVER_PATH+"/Language",m={},v=function(e){return"ONE"!==a&&(t.$app=t.$app||{},t.$app.option=t.$app.option||{},t.$app.option.language=e),s.update(f,{lang:e})};return m.setResource=function(e){f=e},m.onReady=function(){return angular.isUndefined(g)?m.loadLanguages():g},m.loadLanguages=function(){return g=s.fetch(f).then(function(e){u=e.data.languages,d=e.data.displayValues,p=e.data.fullIdValues},angular.noop)},m.updateLanguage=function(a){if(m.isRtl()===m.isRtl(a)||r!==o.AM_DEPENDENCY){n.use(a),c=a;var i=$("load-iframe[page-frame]");if(i){var s=i.find("iframe");s.length>0&&s[0].contentWindow&&angular.isFunction(s[0].contentWindow.changeLang)&&s[0].contentWindow.changeLang(a)}return v(a)}l.openConfirmModal({title:n.instant("language.changeTitle"),icon:"fa-exclamation-triangle",modalData:{pendingText:n.instant("language.pageReload"),confirmFn:function(){return v(a)},noSuccessScreen:!0}}).then(function(n){"SUCCESS"===n&&(t.location.href=e.AM_SERVER_PATH+"/Reload")})},m.getCurrentLanguage=function(){return c},m.getLanguageDisplay=function(e){return d[e]},m.getFullIdValue=function(e){return p[e]},m.getAvailableLanguages=function(){return u},m.isRtl=function(e){return"he"===(e=e||c)||"ar"===e},m.isChineseInput=function(e){return"CHINESE_TRADITIONAL"===e||"CHINESE_SIMPLIFIED"===e},m.isRtlInput=function(e){return"HEBREW"===e||"ARABIC"===e},m.translateKeys=function(e,t){var n=[];return angular.forEach(e,function(e){n.push({key:e})}),m.translateKeysWithParams(n,t)},m.translateKeysWithParams=function(t,n){var a={language:n,keyswithparam:t};return s.create(e.AM_SERVER_PATH+"/Translations",a)},m}e.factory("LanguageService",t),t.$inject=["$window","$translate","AM_BAR_TYPE","ACTIVE_CONTEXT","LOGIN_LANGUAGE","ApplicationContext","ResourceService","ModalService"]}},function(e,t){e.exports=function(e){e.factory("MenuService",["DynamicTranslationService","ResourceService",function(t,n){var a=[],r={},i=void 0,o=function e(t,n){for(var a=0;a<t.length;++a){if(t[a].id===n)return t[a];var r=e(t[a].subItems,n);if(!angular.isUndefined(r))return r}},s={};return s.onReady=function(){return angular.isUndefined(i)?i=n.fetch(e.AM_SERVER_PATH+"/Menu").then(function(e){a=e.data.groups},angular.noop):i},s.getMenuGroups=function(){return a},s.getMenuEntry=function(e){for(var t=0;t<a.length;++t){var n=o(a[t].groupMenuEntries,e);if(!angular.isUndefined(n))return n}},s.isActive=function(e){return e.id===r.id||e.id===r.parent},s.setActiveEntry=function(e){r=e},s.getDisplayText=function(e){return t.getDisplayText(e.text)},s.findHome=function(e){if(e.home)return e;for(var t=0;t<e.subItems.length;++t){var n=s.findHome(e.subItems[t]);if(angular.isDefined(n))return n}},s}])}},function(e,t){e.exports=function(e){e.factory("MessageHandlerService",["$window",function(e){var t={};return{getMessageHandlers:function(){return t},register:function(e,n){t[e]=n},unregister:function(e){angular.isDefined(e)&&delete t[e]}}}])}},function(e,t){e.exports=function(e){function t(e,t,n,a,r,i,o){var s={},l=[],c={},u=void 0,d=void 0;return s.openModal=function(o){if(!o.title)throw new Error("title is required");if(!o.templateUrl)throw new Error("templateUrl is required");var p=n.$new();if(!$("#amModal").length)return $("body").append(t("<am-modal></am-modal>")(p)),i(angular.noop,0,!0).then(function(){return s.openModal(o)});var g=$("#amModal");l=o.buttons||[{label:"word.close",alignment:"right",fn:s.closeModal,btnClass:"btn-default"}],p.$getModalButtons=s.getModalButtons,c=angular.isObject(o.modalData)?o.modalData:{},$(g).trigger("hidden.bs.modal"),$(g).one("hidden.bs.modal",function(){p.$destroy(),s.isModalOpen()||void 0===d||d.resolve(u)}),s.isModalOpen()||(d=e.defer()),$(g).one("shown.bs.modal",function(){$("body").hasClass("modal-open")||$("html").hasClass("modal-open")||$("body").addClass("modal-open")}),angular.isUndefined(o.noClose)&&(o.noClose=!1),o.noClose?$("#amModalHeader > .close").hide():$("#amModalHeader > .close").show(),$("#amModalBody").removeClass(),$("#amModalBody").addClass("modal-body "+(o.bodyClass||"")),$("#amModalDialog").removeClass(),$("#amModalDialog").addClass("modal-dialog "+(o.dialogClass||"modal-lg")),$("#amModalContent").removeClass(),$("#amModalContent").addClass("modal-content "+(o.contentClass||"")),$("#amModalIcon").removeClass(),o.icon?($("#amModalIcon").addClass("margin-right-10 fa "+o.icon),$("#amModalIcon").show()):$("#amModalIcon").hide(),$("#amModalTitle").html(o.title),$("#amModalBody").html('<i class="fa fa-spin fa-spinner"></i>'),$("#amModalFooter").html('<button-list buttons="$getModalButtons()"></button-list>'),$("#amModalFooter").hide(),angular.isUndefined(o.backdrop)&&(o.backdrop=!0);var f=$.fn.modal,m=angular.isDefined(f)?f.Constructor:void 0;(angular.isDefined(m)?m.VERSION:"4").startsWith("5")?new bootstrap.Modal(document.getElementById("amModal"),{keyboard:!1}).show():$("html").hasClass("modal-open")?i(function(){$(g).modal({show:!0,keyboard:!1})},100):$(g).modal({show:!0,keyboard:!1});var v,h=$(g).data("bs.modal");if(angular.isDefined(h)){var b=h.options||h._config||void 0;angular.isDefined(b)&&(b.backdrop=o.backdrop)}if(angular.isString(o.templateUrl)&&o.templateUrl.endsWith(".component")){var y=o.templateUrl.substring(0,o.templateUrl.length-10),D=e.defer();D.resolve("<"+y+"></"+y+">"),v=D.promise}else v=r(o.templateUrl);return v.then(function(e){if(o.controller){var t={$scope:p},n=a(o.controller,t);o.controllerAs?t.$scope[o.controllerAs]=n:t.$scope.$ctrl=n,g.contents().data("$ngControllerController",n)}var r='<div class="row"><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">';r+=e,r+="</div></div>",$("#amModalBody").html(r),o.hideFooter||$("#amModalFooter").show()},function(){$("#amModalBody").html("")}).finally(function(){t(g)(p)}),u=void 0,d.promise},s.openInfoModal=function(e){return e.contentClass="modal-info",e.templateUrl=e.templateUrl||"info-modal.component",e.title=e.title||o.instant("word.info"),s.openModal(e)},s.openWarningModal=function(e){return e.contentClass="modal-warning",e.dialogClass=e.dialogClass||"modal-lg",e.icon=e.icon||"fa-exclamation-triangle",e.title=e.title||o.instant("word.warning"),s.openModal(e)},s.openErrorModal=function(e){return e.contentClass="modal-danger",e.icon=e.icon||"fa-exclamation-triangle",e.templateUrl=e.templateUrl||"error-modal.component",e.title=e.title||o.instant("word.error"),s.openModal(e)},s.openConfirmModal=function(e){return e.dialogClass=e.dialogClass||"modal-lg",e.templateUrl="confirm-modal.component",s.openModal(e)},s.isModalOpen=function(){var e=$("#amModal").data("bs.modal");return!!angular.isObject(e)&&(e.isShown||e._isShown)},s.closeModal=function(e){angular.isDefined(e)&&s.setModalResult(e),$("#amModal").modal("hide")},s.setModalResult=function(e){u=e},s.getModalResult=function(){return u},s.getModalButtons=function(){return l},s.setModalButtons=function(e){l=e},s.getModalData=function(){return c},s.hideFooter=function(){$("#amModalFooter").hide()},s.addBodyClass=function(e){$("#amModalBody").addClass(e)},s.setTitle=function(e){$("#amModalTitle").html(e)},s.preventModalClose=function(){$("#amModalHeader > .close").hide();var e=$("#amModal").data("bs.modal");if(angular.isDefined(e)){var t=e.options||e._config||void 0;angular.isDefined(t)&&(t.backdrop="static")}},s.getDefaultCloseButton=function(e){var t=angular.isDefined(e)?angular.copy(e):{};return t.alignment=t.alignment||"left",t.label=t.label||"word.cancel",t.btnType=t.btnType||"default",t.fn=s.closeModal,t},s}e.factory("ModalService",t),t.$inject=["$q","$compile","$rootScope","$controller","$templateRequest","$timeout","$translate"]}},function(e,t){e.exports=function(e){e.factory("NavigationGuardService",["$q","$translate","ModalService","NavigationService",function(e,t,n,a){return{showUnsavedChanges:function(r){var i={title:t.instant("sequence.warning.title"),templateUrl:"sequence-warning.component"};n.openWarningModal(i).then(function(e){return 1===e&&(a.setNavigationValidator(void 0),"ARCHIVED"===r.stateAction?window.history.back():a.navigate(r)),e},function(t){return e.reject(t)})}}}])}},function(e,t){e.exports=function(e,t){function n(n,a,r,i,o,s,l,c,u,d,p,g,f,m,v,h,b){var y=void 0,D={setNavigationValidator:function(e){y=e},getNavigationValidator:function(){return y},navigate:function(e){if(angular.isDefined(y)){var i=y(e);if(!0!==i)return angular.isFunction(i)&&i(),!1}var s=new t(e),l=new t(d.getCurrentPage());g===f.AM_DEPENDENCY&&v.logTelemetry(l.id,s.id);var c=$("load-iframe[page-frame]");if(c)try{var p=c.find("iframe");p.length>0&&p[0].contentWindow&&angular.isFunction(p[0].contentWindow.amNavEvent)&&p[0].contentWindow.amNavEvent(s)}catch(e){}if(s.navigateAction===o.NONE)return d.onNavigate(s),n.$broadcast("$navigationSuccess",l,s),!0;if(s.navigateAction===o.REDIRECT){var m=Object.keys(s.serverParams),h=m.length,D=s.path;if(h>0){D+="?";for(var E=0;E<m.length;++E){var x=m[E];E>0&&(D+="&"),D+=x,D+="=",D+=s.serverParams[x]}}return a.location.href=D,!0}if(s.navigateAction===o.POPUP)return a.open(s.path,s.pageData.windowName||"_blank",s.pageData.windowFeatures),!0;if(s.navigateAction===o.MODAL){var A={title:r.instant("page.title."+s.id),templateUrl:s.path,modalData:s.pageData};return u.openModal(A)}return s.navigateAction===o.NATIVE_MOBILE_APP&&b.sendToNativeApp(s.pageData.action,s.pageData.data)},menuNavigate:function(e,n,a,r){var i=p.getMenuEntry(e);if(!i)return!1;var o=new t(i);return o.icon="",o.breadcrumb=s.CLEAR,o.menu=i,angular.isDefined(n)&&(o.pageData=n),angular.isDefined(a)&&(o.serverParams=a),angular.isDefined(r)&&(o.title=r),D.navigate(o)},navigateToBreadcrumb:function(e){var n;return(n=angular.isObject(e)?new t(e):{id:e}).breadcrumb=s.NAVIGATE,D.navigate(n)},navigateHome:function(){var e=p.getMenuGroups();if(0===e.length)return D.navigateToInitialPage();for(var t=void 0,n=0;n<e.length&&angular.isUndefined(t);++n)for(var a=e[n].groupMenuEntries,r=0;r<a.length&&angular.isUndefined(t);++r)t=p.findHome(a[r]);if(angular.isDefined(t))return D.menuNavigate(t.id);var i=e[0].groupMenuEntries[0];return i.subItems.length>0&&(i=i.subItems[0]),D.menuNavigate(i.id)},navigateToPrevBreadcrumb:function(){var e=d.getBreadcrumbs(),t=e.length;if(1===t)return D.navigateHome();var n=e[t-2];return D.navigateToBreadcrumb(n)},navigateToInitialPage:function(){if(angular.isUndefined(l.id))return!1;var e=p.getMenuEntry(l.id),n=new t(l);return n.icon="",n.menu=e,n.breadcrumb=s.CLEAR,angular.isDefined(l.serverParams)&&delete l.serverParams,D.navigate(n)},specialActionNavigation:function(t,n){var a="",r=t.indexOf("action=");-1!==r&&-1!==(r=(a=t.substring(r+7)).indexOf("&"))&&(a=a.substring(0,r));var i={breadcrumb:s.CLEAR};return"promontory"===a?n&&(i.id="PROMONTORY_CONFIG",i.path="template/page/promontory/fdicPromontorySequence.html",i.serverParams={autoSelect:n},i.serverPath=e.AM_SERVER_PATH+"/ManageAccount"):"paperForms"===a?(i.id="Support",i.path="template/page/support/paperForms.html"):"transactionDetail"===a?(i.id="transactionDetail",i.path="transaction-redirect-modal.component",i.navigateAction=o.MODAL):(i.id="REDIRECT",i.navigateAction=o.REDIRECT,i.path=t),!!i.id&&D.navigate(i)}};return D}e.factory("NavigationService",n),n.$inject=["$rootScope","$window","$translate","CONTENT_HOST","NavigationAction","BreadcrumbAction","INITIAL_PAGE","IS_MOBILE","ModalService","PageService","MenuService","ACTIVE_CONTEXT","ApplicationContext","ResourceService","TelemetryService","SESSION_ID","NativeAppCommunicationService"]}},function(e,t){e.exports=function(e,t){function n(n,a,r,i,o,s,l,c,u,d,p,g){var f=null,m=!1,v=void 0,h=void 0,b=[],y=!1,D=!1,E=[],x=new t({}),A="",C={},T=function(){A=""},S=function(){m=!0,T();var e=x.path;a(function(){A=e},100),angular.isDefined(i.onebar)&&angular.isFunction(i.onebar.onAmEvent)&&i.onebar.onAmEvent({kind:"NAVIGATION",payload:{id:x.id,accounts:b}})},I=function(e){var t=e.map(p.toParsableString);u.update(x.serverPath+"/Picker",{selectedEntries:t}).then(function(t){C.setActivePickerSelections(e),S(),p.closePicker()})};return C.isPageLoading=function(){return m},C.setIsPageLoading=function(e){!e&&angular.isDefined(v)&&console.warn("["+x.id+"] Detected possibly avoided page load function"),m=e},C.getActivePickerSelections=function(){return b},C.setActivePickerSelections=function(e){b=e,g.set(b)},C.isPickerAvailable=function(){return y},C.isPickerSupported=function(){return D},C.getPickerSource=function(){return x.serverPath+"/Picker/Data"},C.getCurrentPage=function(){return x},C.getPagePath=function(){return A},C.getBreadcrumbs=function(){return E},C.setOnPageLoad=function(e){m?v=e:console.warn("["+x.id+"] Detected invalid timing for setting page load function")},C.resetPicker=function(){p.setOnPickerUpdate(I),p.loadPicker(C.getPickerSource())},C.print=function(){window.print()},C.resizeContent=function(){a(function(){var e,t=$(window).height();if(""!==s){var a=$(".am-app-header");t-=angular.isDefined(a)&&a.length>0?$(a).outerHeight():0}if("ONE"===s)e=parseFloat($("body").css("padding-top"));else if(o===l.STANDALONE&&$(".main-wrapper").length>0){var r=$(".main-wrapper");e=parseFloat(r.css("padding-top"))+parseFloat(r.css("padding-bottom"))}else e=$("#amHeader").outerHeight();t-=e;var i=void 0;""===s&&(i=$("#amMenu"));var c,u=angular.isDefined(i)&&i.length>0?$(i).outerHeight():0;if(t-=u,"ONE"===s)c=parseFloat($("body").css("padding-bottom"));else{var d=$("footer");c=angular.isDefined(d)&&d.length>0?$(d).outerHeight():0}t-=c,$(".page-content").css("min-height",t+"px"),""===s&&$("#amContents").css("margin-top",e+u+"px");var p=$("load-iframe[page-frame]");if(p){var g=$(".breadcrumb-container"),f=t-(angular.isDefined(g)&&g.length>0?$(g).outerHeight():0);if(""===s){var m=$(".page-head");f-=angular.isDefined(m)&&m.length>0?$(m).outerHeight():0}if(o===l.STANDALONE&&$("#applicationForm > section").length>0){var v=$("#applicationForm > section");f-=parseFloat($(v).css("padding-top"))+parseFloat($(v).css("padding-bottom"))}$(p.find(".embed-responsive")).css("height",f+"px")}$("am-input[input-prefix]")&&n.$applyAsync()},100)},C.onPartialLoad=function(){if(!angular.isUndefined(v)){var e=v;return v=void 0,void e()}m=!1},C.onPartialLoadFailed=function(){m=!1},C.triggerUnauthorized=function(t){A=e.WEBAPP_ROOT+"/errors/pageRestrictedError.html",x.pageData.hideHelp=!0,x.pageData.restriction=t},C.triggerInternalError=function(){A=e.WEBAPP_ROOT+"/errors/pageInternalError.html",x.pageData.hideHelp=!0},C.onNavigate=function(e){if(e!==x){if(T(),angular.isDefined(v)&&console.warn("["+x.id+"] Skipping unexecuted page load function"),v=void 0,e.breadcrumb===c.NONE)E.push(e);else if(e.breadcrumb===c.CLEAR)E=[e];else if(e.breadcrumb===c.REPLACE)E[E.length-1]=e;else if(e.breadcrumb===c.NAVIGATE){for(var t=void 0,a=0;a<E.length;++a){if(E[a].equals(e)){t=E[a];break}E[a].id===e.id&&(t=E[a])}if(!angular.isUndefined(t)){var r=E.indexOf(t),i=E.slice();E=[];for(a=0;a<=r;++a)E.push(i[a]);e=t}}else if(e.breadcrumb===c.CLOSEST_PARENT){var o=angular.isFunction(e.breadcrumbParent)?e.breadcrumbParent:function(t){return t.id===e.breadcrumbParent},s=void 0;for(a=E.length-1;a>=0;--a)if(o(E[a])){s=E[a];break}if(angular.isDefined(s)){r=E.indexOf(s);E.splice(r+1)}E.push(e)}"clear"===e.menu?d.setActiveEntry({}):""!==e.menu&&d.setActiveEntry(e.menu);var l=x.skipFetch===e.skipFetch&&x.serverPath===e.serverPath&&angular.equals(x.serverParams,e.serverParams);if(x=e,null!==f&&f.cancel(),l&&null===f)S();else{if(e.breadcrumb===c.CLEAR&&(b=[]),e.skipFetch)return y=!1,p.closePicker(),void S();var h=angular.copy(x.serverParams)||{};if(angular.isDefined(h.autoSelect))delete x.serverParams.autoSelect;else{var A=g.get()||[];A.length>0&&(h.autoSelect=A,h.noPickerClear="T")}m=!0;var I=f=u.create(x.serverPath+"/PageInfo",h,!0);I.promise.then(function(e){var t=e.data.picker;if(!(D=angular.isDefined(t)&&null!==t))return y=!1,p.closePicker(),void S();y=t.available,C.setActivePickerSelections(t.activeSelections),t.available&&!t.required?S():t.available?t.required&&(p.openPicker(),m=!1):(p.closePicker(),S()),C.resetPicker()},function(e){if(!I.aborted&&(D=!1,y=!1,p.closePicker(),m=!1,!angular.isUndefined(e)&&!angular.isUndefined(e.data)&&null!==e.data)){var t=e.data.errors;angular.isDefined(t)&&angular.isDefined(t.restricted)&&C.triggerUnauthorized(t.restricted)}}).finally(function(){I.aborted||(f=null,n.$broadcast("pageLoaded",C))})}}},C.getDefaultPageTitle=function(e){return e=e||x||{},r.instant("page.title."+e.id)},C.getPageTitle=function(e){return angular.isUndefined(e.title)||""===e.title?C.getDefaultPageTitle(e):angular.isFunction(e.title)?e.title():e.title},C.hideHelp=function(){C.getCurrentPage().pageData.hideHelp=!0},C.getPageLoadingText=function(){return h},C.setPageLoadingText=function(e){h=e},C}e.factory("PageService",n),n.$inject=["$rootScope","$timeout","$translate","$window","ACTIVE_CONTEXT","AM_BAR_TYPE","ApplicationContext","BreadcrumbAction","ResourceService","MenuService","PickerService","PickerHistoryService"]}},function(e,t){e.exports=function(e){function t(e,t){var n=void 0,a=void 0,r=e.defer(),i={$pickerItemControl:void 0,$pickerSlider:null,initialize:function(e){i.$pickerItemControl=e,r.resolve()},onReady:function(){return r.promise},setOnPickerClose:function(e){n=e},setOnPickerUpdate:function(e){a=e},openPicker:function(){null!==i.$pickerSlider&&i.$pickerSlider.open()},closePicker:function(){angular.isFunction(n)?n():null!==i.$pickerSlider&&i.$pickerSlider.close()},updatePicker:function(e){angular.isFunction(a)&&a(e)},loadPicker:function(e){if(!angular.isUndefined(i.$pickerItemControl))return i.$pickerItemControl.source(e)},getCurrentSource:function(){return i.$pickerItemControl.getItemSource()},getEntryList:function(e,t){for(var n="",a=0;a<e.length&&a<t;++a){var r=e[a];i.isDummyEntry(r)||(n+=(n.length?", ":"")+i.getEntryDisplay(r))}return e.length>t&&(n+=", ..."),n},getEntryDisplay:function(e){return angular.isUndefined(e.parent)?e.accountVan:"PARTITION"===e.parent.pickerCustomerType&&e.accountId===e.parent.accountId?t.instant("picker.primaryPartition"):e.accountVan},isDummyEntry:function(e){return"PARTITION"===e.pickerCustomerType||("GROUP"===e.pickerCustomerType||("HOUSEHOLD"===e.pickerCustomerType||("STL_GROUP"===e.pickerCustomerType||!(!angular.isDefined(e.parent)||"APPLICANT"!==e.parent.pickerCustomerType))))},toParsableString:function(e){var t=e.id;return angular.isDefined(e.mtParent)&&(t+="T"+e.mtParent.id),t}};return i}e.factory("PickerService",t),t.$inject=["$q","$translate"]}},function(e,t){e.exports=function(e){function t(t){var n={updatePreference:function(n,a){return t.update(e.AM_SERVER_PATH+"/Preferences/"+n,a)},fetchPreference:function(n){return t.fetch(e.AM_SERVER_PATH+"/Preferences/"+n)}};return n}e.factory("PreferenceService",t),t.$inject=["ResourceService"]}},function(e,t){e.exports=function(e){var t=function(e,t){this.aborted=!1,this.promise=e,this.cancel=function(){this.aborted=!0,t.resolve()}};function n(e,n){var a={},r=function(e){return null===e||angular.isUndefined(e)?{}:e};return a.fetch=function(a,i,o,s){if((s=s||{}).params=r(i),!o)return e.get(a,s);var l=n.defer();return s.timeout=l.promise,new t(e.get(a,s),l)},a.update=function(a,i,o,s){if(s=s||{},i=r(i),!o)return e.put(a,i,s);var l=n.defer();return s.timeout=l.promise,new t(e.put(a,i,s),l)},a.create=function(a,i,o,s){if(s=s||{},i=r(i),!o)return e.post(a,i,s);var l=n.defer();return s.timeout=l.promise,new t(e.post(a,i,s),l)},a.delete=function(a,i,o,s){if((s=s||{}).params=r(i),!o)return e.delete(a,s);var l=n.defer();return s.timeout=l.promise,new t(e.delete(a,s),l)},a}e.factory("ResourceService",n),n.$inject=["$http","$q"]}},function(e,t){e.exports=function(e){function t(e,t,n,a,r,i,o,s){var l=!1,c=function(e){var a=t.defer(),r={width:e.scrollWidth,height:e.scrollHeight};return htmlToImage.toPng(e,r).then(function(t){var i;-1==(i=window.navigator.userAgent.toLowerCase()).indexOf("safari")||i.indexOf("chrome")>-1?a.resolve(t):n(function(){htmlToImage.toPng(e,r).then(function(e){a.resolve(e)}).catch(function(e){a.reject(e)})},1e3)}).catch(function(e){a.reject(e)}),a.promise},u={onLoad:function(){return s.fetch("REGAM-20787").then(function(e){var n=[];return n.push(a.injectJavascript("jspdf",o.getWebsiteUrl("/scripts/common/js/2015/jspdf.min.js"))),e&&e.data&&e.data.isEnabled?(l=!0,n.push(a.injectJavascript("html-to-image",o.getWebsiteUrl("/scripts/common/js/html-to-image-1.9.0/html-to-image.js")))):n.push(a.injectJavascript("html2canvas",o.getWebsiteUrl("/scripts/common/js/2015/html2canvas.min.js"))),t.all(n)})},screenshot:function(e){return u.onLoad().then(function(){var n=t.defer();switch(e){case"PNG":u.getPngScreenshot(n.resolve);break;default:u.getScreenshot(n.resolve)}return n.promise})},getScreenshot:function(t){htmlFrag=angular.element(e[0].documentElement);var n=$(htmlFrag).clone(!0);$("am-input > input",n).each(function(){$(this).attr("value",$(this).val())}),$("input[type='checkbox']",n).each(function(){$(this).is(":checked")?$(this).attr("checked",!0):$(this).removeAttr("checked")}),$("input[type='radio']",n).each(function(){var e=$(this).attr("name"),t=$(this).val();$("input[type='radio'][name='"+e+"'][value='"+t+"']",htmlFrag).is(":checked")?$(this).attr("checked",!0):$(this).removeAttr("checked")}),$("select",n).each(function(){$(this).attr("name");var e=$(this).val();void 0!==e&&$("option[value='"+e+"']",this).attr("selected",!0),$("option[value!='"+e+"']",this).removeAttr("selected")}),$("textarea",n).each(function(){var e=$(this).attr("name"),t=$("textarea[name='"+e+"']",htmlFrag).val();$(this).html(t)}),t('<html style="-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;pointer-events:none">'+$(n).html()+"</html>")},getPngScreenshot:function(e){var t,n=void 0;if(r.isModalOpen())t=l?document.getElementById("amModal"):document.getElementById("amModalDialog"),n=r.getModalButtons(),r.setModalButtons([i.getLoadingButton()]);else{for(var a,o=["amPageContent","app-contents"],s=0;s<o.length&&!(a=document.getElementById(o[s]));s++);t=a||document.body}var u=$(".agreement");u.css("overflow-y","hidden"),l?c(t).then(function(t){u.css("overflow-y",""),r.isModalOpen()&&r.setModalButtons(n),e(t)}).catch(function(e){console.error("Failed to create screenshot using html-to-image!!!!",e)}):html2canvas(t).then(function(t){u.css("overflow-y",""),r.isModalOpen()&&r.setModalButtons(n),e(t.toDataURL("image/png",1))})},elementScreenshot:function(e){return u.onLoad().then(function(){var n=t.defer();return l?c(e).then(function(e){n.resolve(e)}).catch(function(e){console.error("Failed to create screenshot using html-to-image!!!!",e)}):html2canvas(e).then(function(e){n.resolve(e.toDataURL("image/png",1))}),n.promise})}};return u}e.factory("ScreenshotService",t),t.$inject=["$document","$q","$timeout","JsService","ModalService","FormInputService","EnvironmentService","AlphaTestService"]}},function(e,t){e.exports=function(e){function t(e,t,n){var a={};return a.triggerStandaloneComponent=function(t,n){var a=e.defer(),r=document.getElementById(t.id);r&&r.remove();var i=document.createElement("div");for(attribute in t){var o=attribute.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()}),s=t[attribute]||"";"id"===o?i.setAttribute(o,s):i.setAttribute("data-"+o,s)}var l=document.createElement("script");return l.src=n,l.type="text/javascript",l.onload=a.resolve,i.appendChild(l),document.body.appendChild(i),a.promise},a.initialize=function(e){var a=t.$new(),r=angular.element(e);return n(r)(a),a},a}e.factory("StandaloneComponentService",t),t.$inject=["$q","$rootScope","$compile"]}},function(e,t){e.exports=function(e){function t(e,t,n,a){var r=function(){var e=$("load-iframe[page-frame]");if(e){var t=e.find("iframe");if(t.length>0&&t[0].contentWindow)return t[0].contentWindow}},i={};return i.changeColor=function(e){n.set(e),$("html").attr("data-theme",e.toLowerCase());var a=r();a&&angular.isFunction(a.schemaChange)&&a.schemaChange(function(e){var n=t.get();return"IBKR"!==n?"GLOBAL_TRADER"===n?"globaltrader":n.toLowerCase():e.toLowerCase()}(e))},i.changeSize=function(e){a.set(e),$("html").attr("data-size-mode",e.toLowerCase());var t=r();t&&angular.isFunction(t.changeWidth)&&t.changeWidth(e.toLowerCase())},i.changeColor(n.get()),i}e.factory("ThemeService",t),t.$inject=["$q","APPLICATION_THEME","COLOR_THEME","SIZE_THEME"]}},function(e,t){e.exports=function(e){e.provider("translateMultiLoader",function(){var e=[],t={};function n(t){var n=e.some(function(e){return e.name===t});return n}function a(t,n){e.push({name:t,options:n})}this.addLoader=function(e,t){return n(e)||a(e,t),this},this.translations=function(e,n){return t[e]=angular.extend({},t[e],n),this},this.$get=["$q","$injector",function(r,i){var o=function(n){var a=r.defer(),o=[];o.push(function(){var e=r.defer();e.resolve(t[n.key])}());for(var s=0;s<e.length;s++){var l=e[s],c=i.get(l.name)(angular.extend(n,l.options));o.push(c)}return r.all(o).then(function(e){for(var t,n=0;n<e.length;n++)t=angular.extend({},t,e[n]);a.resolve(t)},function(){a.reject(n.key)}),a.promise};return o.addLoader=function(e,t){return n(e)||a(e,t),o},o}]})}},function(e,t){e.exports=function(e){e.factory("UserAgentService",["$window",function(e){var t=e.navigator.userAgent,n=t.match(/Edge/g),a=t.match(/.NET/g),r=t.match(/MSIE/g),i=t.match("FxiOS"),o=t.match("CriOS"),s=t.match(/Chrome/)||o,l=s&&t.match(/Windows NT 10.0/),c=e.navigator.vendor&&e.navigator.vendor.indexOf("Apple")>-1,u=c&&t.match(/(iPod|iPhone|iPad)/),d={isMicrosoft:function(){return n||a||r},isApple:function(){return c||i},isIos:function(){return u||o||i},isFirefoxIos:function(){return i},isSafariIos:function(){return u},isChromeIos:function(){return o},isChromeWin10:function(){return l},isChrome:function(){return s}};return d}])}},function(e,t){e.exports=function(e){e.factory("UserPlatformService",["USER_PLATFORM",function(e){var t={isImpact:function(){return"IMPACT"===e.get()},isGlobalTrader:function(){return"GLOBAL_TRADER"===e.get()},isIbkrMobile:function(){return"IBKR_MOBILE"===e.get()},isWeb:function(){return"WEB"===e.get()},isDesktopTws:function(){return"DESKTOP_TWS"===e.get()},isSimplifiedPlatform:function(){return t.isImpact()||t.isGlobalTrader()},isNativeMobileApplication:function(){return t.isIbkrMobile()||t.isSimplifiedPlatform()}};return t}])}},function(e,t){e.exports=function(e){function t(e){var t={sendToNativeApp:function(t,n){if(angular.isUndefined(t)||null===t)return console.warn("action can not be undefined"),!1;if(!angular.isFunction(e.sendToNativeApp))return!1;var a={action:t};return angular.isDefined(n)&&(a.data=n),e.sendToNativeApp(a),!0},closeWebView:function(){t.sendToNativeApp("close_webview")}};return t}e.factory("NativeAppCommunicationService",t),t.$inject=["$window"]}},function(e,t){e.exports=function(e){function t(e,t,n,a){return{sendToWebApp:function(r){if(!angular.isUndefined(r)&&null!==r){var i=t.length>0;if("ping"===r.action&&i)a.sendToNativeApp("pong");else if("back"===r.action){var o={id:"NativeMobileApp",navigateAction:n.NATIVE_MOBILE_APP,pageData:{action:r.action,data:{exit:!0}}};e.navigate(o)||a.sendToNativeApp(r.action,{exit:!1})}else console.warn("unsupported action -> "+r.action)}}}}e.factory("NativeAppCommunicationProvider",t),t.$inject=["NavigationService","SESSION_ID","NavigationAction","NativeAppCommunicationService"]}},function(e,t){e.exports=function(){var e=window.sessionStorage,t=function(t,n){var a=void 0===n?null:JSON.stringify(n);e.setItem(t,a)},n=function(t){return JSON.parse(e.getItem(t))};return{setItem:t,getItem:n,clear:function(){for(var n=0;n<Object.keys(e).length;n++){var a=Object.keys(e)[n];t(a,null)}},stateHistory:function(e){if(!e)return n("stateHistory");t("stateHistory",e)},pickerHistory:function(e){if(!e)return n("pickerHisotry");t("pickerHisotry",e)}}}},function(e,t){var n=["SessionService",function(e){this.enabled=!1;return{set:function(t,n){var a=e.stateHistory()||{};a[t]=n,angular.isDefined(n)&&n.id,e.stateHistory(a)},get:function(t){var n=e.stateHistory(),a=n?n[t]:void 0;return angular.isDefined(a)&&a.id,a},setEnabled:function(e){this.enabled=e},isEnabled:function(){return this.enabled}}}];e.exports=n},function(e,t,n){var a=n(9),r=["$location","StateHistoryService","PickerHistoryService","NavigationService","BreadcrumbAction","PageService","MenuService","ModalService",function(e,t,n,r,i,o,s,l){var c=[];return{locationChange:function(n,a,u){if("locationChange"!==c.pop()){var d=t.get(e.hash());if(d){c.push("stateChange"),l.isModalOpen()&&l.closeModal(),d.stateAction="ARCHIVED";var p=(o.getBreadcrumbs()||[]).some(function(e){return e.id===d.id});if(d.breadcrumb=p?i.NAVIGATE:i.CLEAR,!r.navigate(d))return window.history.forward(),c.pop(),void c.push("locationChange");if(d.menu){var g=s.getMenuEntry(d.menu.id);s.setActiveEntry(g)}}else t.isEnabled()&&window.history.back()}},stateChange:function(r,s){if("stateChange"!==c.pop()&&!r.equals(s)){var l=new PageEntry(s);if(s.skipFetch&&s.breadcrumb!==i.CLEAR&&!r.skipFetch&&(l.skipFetch=!1,l.serverPath=r.serverPath,l.menu=r.menu,l.serverParams=r.serverParams||{}),l.breadcrumb===i.REPLACE||"REPLACE"===l.stateAction)t.set(e.hash(),l);else{var u=a.uuid();t.set(u,l),c.push("locationChange"),e.hash(u)}n.set(o.getActivePickerSelections()),t.setEnabled(!0)}}}}];e.exports=r},function(e,t){var n=["$location","SessionService","PickerService",function(e,t,n){return{get:function(){var n=t.pickerHistory(),a=e.hash(),r=n?n[a]:[];return JSON.stringify(r),r},set:function(a){var r=(a||[]).map(n.toParsableString),i=t.pickerHistory()||{},o=e.hash();JSON.stringify(r),i[o]=r||[],t.pickerHistory(i)}}}];e.exports=n},function(e,t,n){"use strict";var a=angular.module("ibmarketing.datamanipulation",[]);a.WEBAPP_ROOT="/datamanipulation.webapp",a.DEFAULT_SERVER_PATH="/AccountManagement",n(298)(a),n(300)(a),n(305)(a)},function(e,t,n){e.exports=function(e){n(299)(e)}},function(e,t){e.exports=function(e){e.component("amItemManipulator",{bindings:{manipulatorId:"@",itemTemplate:"@",itemSource:"@?",deferredLoad:"<?"},template:["$attrs",function(e){var t="",n=e.itemTemplate;if(n.endsWith("component")){var a=n.substring(0,n.length-10);t="<"+a+"></"+a+">"}else t='<ng-include src="$itemManipulator.itemTemplate"></ng-include>';return t}],controllerAs:"$itemManipulator",controller:["$timeout","$translate","ResourceService",function(t,n,a){var r=this,i=null,o=function(e,t){for(var n=0;n<e.length;++n)e[n](t)},s=function(e){return null!==i&&i.cancel(),r.loadInProgress=!0,(i=a.fetch(r.itemSource,e,!0)).promise.then(function(e){var t=e.data;return o(r.itemHooks.load,t),r.manipulator=t.manipulator,r.services=r.manipulator.services,r.entries=t.entries,{manipulator:r.manipulator,entries:r.entries}}).catch(angular.noop).finally(function(){r.loadInProgress=!1,r.deferredLoad&&(r.deferredLoad.resolve({manipulator:r.manipulator,entries:r.entries}),r.deferredLoad=void 0)})},l=function(e){var n=t(function(){r.loadInProgress=!0},1e3);return null!==i&&i.cancel(),(i=a.update(r.itemSource,e,!0)).promise.then(function(e){var t=e.data;return o(r.itemHooks.update,t),r.manipulator=t.manipulator,r.services=r.manipulator.services,r.entries=t.entries,r.entries}).catch(angular.noop).finally(function(){r.loadInProgress=!1,t.cancel(n)})},c=function(e){null!==i&&i.cancel();var t={};return angular.isDefined(e)&&(t.serviceId=e),(i=a.delete(r.itemSource,t,!0)).promise.then(function(e){var t=e.data;return o(r.itemHooks.reset,t),r.manipulator=t.manipulator,r.services=r.manipulator.services,r.entries=t.entries,r.entries}).catch(angular.noop)};r.$onInit=function(){r.loadInProgress=!1,r.itemSource=r.itemSource||e.DEFAULT_SERVER_PATH+"/"+r.manipulatorId+"/Data",r.itemHooks={load:[],update:[],reset:[]},r.itemControl={load:s,reset:c,customUpdate:function(e,t){return r.customServiceUpdate(e,t)},source:function(e,t){return r.itemSource=e,s(t)},getItemSource:function(){return r.itemSource},getEntries:function(){return r.entries},isLoadInProgress:function(){return r.loadInProgress},setLoadInProgress:function(e){r.loadInProgress=e}},r.manipulator={},r.services={},r.entries=[],r.toggleFilter=function(e,t){e.enabled=!e.enabled,t&&r.updateFilters()},r.clearFilter=function(e,t){for(var n=0;n<e.options.length;++n){var a=e.options[n];e.options[n]={enabled:!1,id:a.id}}t&&r.updateFilters()},r.updateFilters=function(){var e={},t=r.getFilterService().filters;for(var n in t)if(t.hasOwnProperty(n))for(var a=t[n],i=0;i<a.options.length;++i){var o=a.options[i];"FREEFORM"===a.type?o.enabled=angular.isDefined(o.filterText)&&o.filterText.length>0:"RANGE"===a.type&&(o.enabled=angular.isDefined(o.start)&&o.start.length>0||angular.isDefined(o.end)&&o.end.length>0);var s=void 0;o.enabled&&(s="FREEFORM"===a.type?o.filterText:"RANGE"!==a.type||{start:o.start,end:o.end}),angular.isDefined(s)&&(e[a.id]||(e[a.id]={}),e[a.id][o.id]=s)}return l({serviceId:r.getFilterService().id,serviceRequest:e})},r.toggleSort=function(e,t){t=t||"SORTER","NEUTRAL"===e.state||"ASCENDING"===e.state?e.state="DESCENDING":e.state="ASCENDING";for(var n=r.services[t].sorters,a=0;a<n.length;++a)n[a].id!==e.id&&(n[a].state="NEUTRAL");return r.updateSorters(t)},r.updateSorters=function(e){e=e||"SORTER";for(var t={},n=r.services[e].sorters,a=0;a<n.length;++a)"NEUTRAL"!==n[a].state&&(t[n[a].id]=n[a].state);return l({serviceId:e,serviceRequest:t})},r.nextDataPage=function(e){var t={page:"next",pageSize:r.services[e].pageSize};return l({serviceId:e,serviceRequest:t})},r.prevDataPage=function(e){var t={page:"prev",pageSize:r.services[e].pageSize};return l({serviceId:e,serviceRequest:t})},r.updateDataPage=function(e){var t={page:r.services[e].currentPage,pageSize:r.services[e].pageSize};return l({serviceId:e,serviceRequest:t})},r.getSizeText=function(e){return e>-1?n.instant("data.page.resultSize",{size:e}):n.instant("allRows")},r.customServiceUpdate=function(e,t){return l({serviceId:e,serviceRequest:t})},r.getFilterService=function(){return angular.isDefined(r.services)?r.services.FILTER:void 0}},r.$onDestroy=function(){null!==i&&i.cancel()}}]})}},function(e,t,n){e.exports=function(e){n(301)(e),n(302)(e),n(304)(e)}},function(e,t){e.exports=function(e){e.component("accordionFilters",{require:{$itemManipulator:"^^amItemManipulator"},bindings:{filterKeyPrefix:"@",optionKeyPrefixMap:"<"},templateUrl:e.WEBAPP_ROOT+"/components/filters/accordion.html",controller:function(){var e=this;e.$onInit=function(){e.isAccordionFilter=function(e){return"MULTIPLE"===e.type}}}})}},function(e,t,n){function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw o}}}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}e.exports=function(e){e.component("dropdownFilters",{require:{$itemManipulator:"^^amItemManipulator"},bindings:{filterKeyPrefix:"@",optionKeyPrefixMap:"<",filterGrouping:"<"},template:n(303),controller:["$translate",function(e){var t=this,n=function(e){var n=e.manipulator.services.FILTER;for(filterName in t.dropdownFilters=[],t.anyFilterEnabled=!1,n.filters)if(n.filters.hasOwnProperty(filterName)){var a=n.filters[filterName];t.isAccordionFilter(a)&&t.dropdownFilters.push(a),t.anyFilterEnabled=t.anyFilterEnabled||a.enabled}r()},r=function(){for(var e={},n=0;n<t.dropdownFilters.length;n++){for(var a=t.dropdownFilters[n],r={},i=0;i<t.dropdownFilters[n].options.length;i++){var o=t.dropdownFilters[n].options[i];r[o.id]=o.enabled}e[a.id]=r}for(var s in t.groupedFilterElements)if(t.groupedFilterElements.hasOwnProperty(s))for(i=0;i<t.groupedFilterElements[s].length;i++){var l=t.groupedFilterElements[s][i];void 0!=e[s][l.id]&&(l.enabled=e[s][l.id])}};t.$onInit=function(){t.dropdownFilters=[],t.isAccordionFilter=function(e){return"MULTIPLE"===e.type&&e.options.length>1||"RANGE"===e.type&&1===e.options.length},t.resetFilters=function(){for(var e=0;e<t.dropdownFilters.length;++e){var n=t.dropdownFilters[e];t.$itemManipulator.clearFilter(n)}t.$itemManipulator.updateFilters()},t.getGroupElementText=function(n,a){return"BASE_OPTION"===a.type?e.instant(t.optionKeyPrefixMap[n]+a.id):"GROUP_OPTION"===a.type?"&nbsp;&nbsp;&nbsp;&nbsp;"+e.instant(t.optionKeyPrefixMap[n]+a.id):"GROUP"===a.type?a.text:void 0},t.toggleGroupElement=function(e,n){n.enabled=!n.enabled,"BASE_OPTION"===n.type||"GROUP_OPTION"===n.type?t.toggleFilterOption(e,n.id):"GROUP"===n.type&&t.toggleFilterGroup(e,n)},t.toggleFilterOption=function(e,n){for(var a=0;a<t.dropdownFilters.length;a++){var r=t.dropdownFilters[a];if(r.id===e)for(var i=0;i<r.options.length;i++){if(r.options[i].id===n)return void t.$itemManipulator.toggleFilter(t.dropdownFilters[a].options[i],!1)}}},t.toggleFilterGroup=function(e,n){for(var a=0;a<t.dropdownFilters.length;a++){var i=t.dropdownFilters[a];if(i.id===e)for(var o=0;o<i.options.length;o++){var s=i.options[o];n.optionIds.includes(s.id)&&(t.dropdownFilters[a].options[o].enabled=n.enabled)}}r()},t.getGroupedFilterElements=function(){for(var e in t.groupedFilterElements={},t.filterGrouping)if(t.filterGrouping.hasOwnProperty(e)){var n,r=[],i=a(t.filterGrouping[e]);try{for(i.s();!(n=i.n()).done;)if(entry=n.value,"OPTION"==entry.type)element={},element.type="BASE_OPTION",element.id=entry.id,element.enabled=!1,r.push(element);else if("GROUP"==entry.type){group={},group.type="GROUP",group.text=entry.text(),group.enabled=!1,group.optionIds=[],r.push(group);var o,s=a(entry.options);try{for(s.s();!(o=s.n()).done;)option=o.value,groupElement={},groupElement.type="GROUP_OPTION",groupElement.id=option.id,groupElement.enabled=!1,r.push(groupElement),group.optionIds.push(option.id)}catch(e){s.e(e)}finally{s.f()}}}catch(e){i.e(e)}finally{i.f()}t.groupedFilterElements[e]=r}},t.getGroupedFilterElements(),t.$itemManipulator.itemHooks.load.push(n),t.$itemManipulator.itemHooks.update.push(n),t.$itemManipulator.itemHooks.reset.push(n)}}]})}},function(e,t){e.exports='<li ng-if="$ctrl.dropdownFilters.length > 0" persistent-dropdown-parent>\r\n    <am-button btn-type="icon" btn-icon="fa-filter" tooltip-text="{{\'word.filter\' | translate}}" btn-class="{{$ctrl.anyFilterEnabled ? \'active\' : \'\'}}"></am-button>\r\n    \r\n    <div class="dropdown-menu dropdown-content dropdown-right">\r\n        <p class="title">{{\'dropdownFilters.title\' | translate}}</p>\r\n        \r\n        <div ng-show="$ctrl.dropdownFilters.length === 1" class="btn-selectors">\r\n            <p ng-repeat="filterOption in $ctrl.dropdownFilters[0].options">\r\n                <a ng-click="$ctrl.$itemManipulator.toggleFilter(filterOption, false)" href="javascript:void(0);" class="btn btn-default" ng-class="{ \'active\' : filterOption.enabled }">\r\n                    {{$ctrl.optionKeyPrefixMap[$ctrl.dropdownFilters[0].id] + filterOption.id | translate}}\r\n                </a>\r\n            </p>\r\n        </div>\r\n        \r\n        <div ng-show="$ctrl.dropdownFilters.length > 1">\r\n            <div class="accordion accordion-filter" id="{{$ctrl.$itemManipulator.manipulatorId + \'_accordion\'}}" role="tablist" aria-multiselectable="true">\r\n                <div class="accordion-item" ng-repeat="filter in $ctrl.dropdownFilters">\r\n                    <h2 class="accordion-header"  ng-class="{ \'active\' : filter.enabled, \'disabled\' : (filter.options.length <= 1 && filter.type === \'MULTIPLE\') }" role="tab">\r\n                        <a class="accordion-button collapsed" href="javascript:void(0);" role="button" data-toggle="collapse" data-parent="{{\'#\' + $ctrl.$itemManipulator.manipulatorId + \'_accordion\'}}" data-target="{{\'#\' + filter.id}}" ng-class="{ \'filter-active\' : filter.enabled }" aria-controls="{{filter.id}}">\r\n                            &nbsp;{{$ctrl.filterKeyPrefix + filter.id | translate}}\r\n                        </a>\r\n                    </h2>\r\n                    <div ng-if="filter.type !== \'RANGE\'" id="{{filter.id}}" class="accordion-collapse collapse" role="tabpanel">\r\n                        <div class="accordion-body">\r\n                             <div class="table-responsive">\r\n                                 <table width="100%" cellpadding="0" cellspacing="0" border="0" class="table table-hover">\r\n                                     <tbody ng-if="$ctrl.filterGrouping[filter.id] === undefined">\r\n                                         <tr ng-click="$ctrl.$itemManipulator.toggleFilter(option, false)" ng-repeat="option in filter.options" ng-class="{ \'active\' : option.enabled }">\r\n                                             <td width="100%" align="left" valign="middle">\r\n                                                 {{$ctrl.optionKeyPrefixMap[filter.id] + option.id | translate}}\r\n                                             </td>\r\n                                         </tr>\r\n                                     </tbody>\r\n                                     <tbody ng-if="$ctrl.filterGrouping[filter.id] !== undefined">\r\n                                         <tr ng-repeat="element in $ctrl.groupedFilterElements[filter.id]" ng-class="{ \'active\' : element.enabled }">\r\n                                             <td width="100%" align="left" valign="middle" ng-click="$ctrl.toggleGroupElement(filter.id, element)">\r\n                                                 <span ng-bind-html="$ctrl.getGroupElementText(filter.id, element) | renderHTML"></span>\r\n                                             </td>\r\n                                         </tr>\r\n                                     </tbody>\r\n                                 </table>\r\n                             </div>\r\n                         </div>\r\n                    </div>\r\n                    <div ng-if="filter.type === \'RANGE\'" id="{{filter.id}}" class="accordion-collapse collapse" role="tabpanel">\r\n                         <div class="accordion-body">\r\n                             <div class="table-responsive">\r\n                                 <table width="100%" cellpadding="0" cellspacing="0" border="0" class="table table-hover">\r\n                                     <tbody>\r\n                                         <tr ng-click="$ctrl.$itemManipulator.toggleFilter(option, false)" ng-repeat="option in filter.options" ng-class="{ \'active\' : option.enabled }">\r\n                                             <td width="100%" align="left" valign="middle">\r\n                                                 <am-date-picker name="startDate" selected-date="option.start" min-date="\'2001-01-01\'" max-date="\'2050-01-01\'"></am-date-picker>\r\n                                                 <am-date-picker name="endDate" selected-date="option.end" min-date="\'2001-01-01\'" max-date="\'2050-01-01\'"></am-date-picker>\r\n                                             </td>\r\n                                         </tr>\r\n                                     </tbody>\r\n                                 </table>\r\n                             </div>\r\n                         </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        \r\n        <div class="btn-applicators">\r\n            <div class="row">\r\n                <div class="col-6">\r\n                    <p>\r\n                        <am-button on-click="$ctrl.resetFilters()" btn-text="{{\'word.reset\' | translate}}" persistent-dropdown-closer></am-button>\r\n                    </p>\r\n                </div>\r\n                <div class="col-6">\r\n                    <p>\r\n                        <am-button on-click="$ctrl.$itemManipulator.updateFilters()" btn-type="info" btn-text="{{\'word.apply\' | translate}}" persistent-dropdown-closer></am-button>\r\n                    </p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</li>'},function(e,t){e.exports=function(e){e.component("freeformTextFilter",{require:{$itemManipulator:"^^amItemManipulator"},bindings:{filterId:"@",placeholderKeyPrefix:"@?"},templateUrl:e.WEBAPP_ROOT+"/components/filters/freeformText.html",controller:["$timeout",function(e){var t=this;t.$onInit=function(){t.triggeredFilter="",angular.isUndefined(t.placeholderKeyPrefix)&&(t.placeholderKeyPrefix="data.filter.option.placeholder."),t.getFilter=function(){var e=t.$itemManipulator.getFilterService();return angular.isDefined(e)?e.filters[t.filterId]:void 0},t.triggerFilter=function(e){t.triggeredFilter=e.id,t.$itemManipulator.updateFilters()},t.checkFocus=function(){""!==t.triggeredFilter&&e(function(){$("input[name='filter_"+t.triggeredFilter+"']").focus(),t.triggeredFilter=""},100)}}}]})}},function(e,t,n){e.exports=function(e){n(306)(e)}},function(e,t,n){e.exports=function(e){e.component("paginationControls",{require:{$itemManipulator:"^^amItemManipulator"},bindings:{serviceId:"@?",spacing:"<?"},template:n(307)(),controller:function(){var e=this;e.$onInit=function(){e.serviceId=e.serviceId||"PAGINATION",angular.isUndefined(e.spacing)&&(e.spacing=!0),e.initialChange=!1,e.onSizeChange=function(){e.initialChange?e.$itemManipulator.updateDataPage(e.serviceId):e.initialChange=!0}}}})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<br ng-if="::$ctrl.spacing"><div class="form-pagination" ng-if="$ctrl.$itemManipulator.services[$ctrl.serviceId].hasPageControls"><div class="row"><div class="col-xs-12 col-sm-4 col-md-4 col-lg-4"><am-select ng-if="$ctrl.$itemManipulator.services[$ctrl.serviceId].availableSizes.length &gt; 1" name="pageSize" ng-model="$ctrl.$itemManipulator.services[$ctrl.serviceId].pageSize" options="$ctrl.$itemManipulator.services[$ctrl.serviceId].availableSizes" option-key="$ctrl.$itemManipulator.getSizeText" hide-empty-option="true" model-listener="$ctrl.onSizeChange()"></am-select></div><div class="col-xs-12 col-sm-8 col-md-8 col-lg-8"><p ng-if="$ctrl.$itemManipulator.services[$ctrl.serviceId].pageSize &gt; -1 &amp;&amp; $ctrl.$itemManipulator.services[$ctrl.serviceId].totalPages &gt; 1"><span>{{\'word.page\' | translate}}</span><input class="form-control input-sm margin-left-5 margin-right-5" hook-enter="$ctrl.$itemManipulator.updateDataPage($ctrl.serviceId)" type="text" style="width: 40px; text-align: center" ng-model="$ctrl.$itemManipulator.services[$ctrl.serviceId].currentPage"><span>{{\'data.page.of\' | translate}}</span><span>{{$ctrl.$itemManipulator.services[$ctrl.serviceId].totalPages}}</span><am-button class="margin-left-10" on-click="$ctrl.$itemManipulator.prevDataPage($ctrl.serviceId)" btn-size="small" btn-icon="fa-chevron-left"></am-button><am-button on-click="$ctrl.$itemManipulator.nextDataPage($ctrl.serviceId)" btn-size="small" btn-icon="fa-chevron-right"></am-button></p></div></div></div>'}},function(e,t,n){e.exports=function(e){return{name:"withdrawalDocUpload",options:{template:n(981),require:{parentForm:"^^form"},bindings:{attachmentData:"="},controller:["$translate","FileUploadService",function(e,t){var n=this;n.$onInit=function(){n.fileRules={allowedExtensions:["pdf","png","jpg","jpeg"],maxSize:26214400},n.attachmentData=n.attachmentData||{},n.uploadDocuments=function(){n.attachmentData.operatorAttachment=[];var e=n.operatorAttachment;if(e&&e.length>0&&e[0]){var a=n.attachmentData.operatorAttachment;t.serialize(e[0]).then(function(e){return a.push(e)})}}}}]}}}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2},t.isValid=function(e){return e&&void 0!==e.bit&&e.bit>=0&&e.bit<4},t.from=function(e,n){if(t.isValid(e))return e;try{return function(e){if("string"!=typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+e)}}(e)}catch(e){return n}}},function(e,t){e.exports=Object.freeze({DOCUMENT_VERIFIED:"DOCUMENT_VERIFIED",DOCUMENT_REJECTED:"DOCUMENT_REJECTED",DOCUMENT_FAILED_PROCESSING:"DOCUMENT_FAILED_PROCESSING",NO_PENDING_DOCUMENTS:"NO_PENDING_DOCUMENTS",MODULE_REAL_TIME_ACCOUNT_OPENING:"realTimeAccountOpening",MODULE_DOCUMENT_UPLOAD:"documentUpload"})},function(e,t){e.exports=function(e){e.config(["$animateProvider","$httpProvider","$injector","$controllerProvider","$compileProvider","$filterProvider","$provide","$translateProvider","$translatePartialLoaderProvider","$windowProvider","translateMultiLoaderProvider",function(t,n,a,r,i,o,s,l,c,u,d){t.classNameFilter(/am-animate/),e.registerCtrl=function(t,n){return r.has(t)||r.register(t,n),e},e.registerDirective=function(t,n){return a.has(t+"Directive")||i.directive(t,n),e},e.registerFactory=function(t,n){return a.has(t)||s.factory(t,n),e},e.registerFilter=function(t,n){return a.has(t+"Filter")||o.register(t,n),e},e.registerConstant=function(t,n){return a.has(t)||s.constant(t,n),e},e.registerComponent=function(t,n){return a.has(t+"Component")||i.component(t,n),e},i.debugInfoEnabled(!1),i.commentDirectivesEnabled(!1),i.cssClassDirectivesEnabled(!1);var p=u.$get();l.useLoader("translateMultiLoader"),d.addLoader("$translatePartialLoader",{urlTemplate:function(e,t){var n=e+"_"+t+".json";return e.endsWith("Acct_Mgmt")&&(n+="?cb="+CACHE_FACTOR),n}}),l.preferredLanguage(p.AM_LOGIN_LANGUAGE||"en"),l.fallbackLanguage("en"),l.useSanitizeValueStrategy(function(e){return e}),c.addPart(AM_APP_ROOT+"/resources/i18n/Acct_Mgmt");var g={};$.ajaxSetup({beforeSend:function(){if("script"!==this.dataType)return!0;var e=this.url.split("?")[0],t=g[e];return g[e]=!0,!t}})}])}},function(e,t,n){e.exports=function(e){n(314)(e),n(316)(e),n(318)(e),n(320)(e),n(322)(e),n(323)(e),n(325)(e),n(327)(e),n(329)(e),n(331)(e),n(333)(e),n(335)(e),n(337)(e),n(338)(e),n(340)(e),n(342)(e),n(344)(e),n(346)(e),n(348)(e),n(350)(e),n(352)(e),n(354)(e),n(355)(e),n(357)(e),n(359)(e),n(361)(e),n(363)(e),n(365)(e),n(367)(e),n(369)(e)}},function(e,t,n){e.exports=function(e){e.component("masterActionCompletionBranch",{template:n(315),controller:["UserService",function(e){var t=this;t.$onInit=function(){t.logout=e.logout}}]})}},function(e,t){e.exports='<div page-structure>\n    <div align="center">\n        <i class="fa fa-4x fa-check-circle text-success"></i>\n    </div>\n    <h1 class="text-center text-success">{{\'branch.masterActionCompletion.title\' | translate}}</h1>\n    <h3 class="text-center text-dark">{{\'branch.masterActionCompletion.desc\' | translate}}</h3>\n    <br>\n    <div align="center">\n        <am-button btn-type="primary" btn-text="{{\'word.logout\' | translate}}" on-click="$ctrl.logout()"></am-button>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){function t(e,t){var n=this;n.$onInit=function(){n.currentYear=(new Date).getFullYear(),n.footerVisible=""===e,t.onReady().finally(function(){n.whiteBranded=t.getUser().whiteBranded,n.loaded=!0})}}e.component("amFooter",{template:n(317),controller:t}),t.$inject=["AM_BAR_TYPE","UserService"]}},function(e,t){e.exports='<footer ng-if="$ctrl.loaded && !$ctrl.whiteBranded && $ctrl.footerVisible" class="ibkr-am-footer noprint">\r\n    <div class="container">\r\n        <div class="row">\r\n            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\r\n                <p><a href="https://www.ibkr.com" target="_blank">&copy; {{::$ctrl.currentYear}} Interactive Brokers LLC</a></p>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</footer>'},function(e,t,n){e.exports=function(e){e.component("amHeader",{template:n(319),controller:["AM_BRANCH","CONTENT_HOST","SESSION_ID","NATIVE_LOGIN_MESSAGE","UserPlatformService","BreadcrumbAction","MenuService","NavigationAction","NavigationService","UserService",function(e,t,n,a,r,i,o,s,l,c){var u=this;u.$onInit=function(){u.getUser=c.getUser,u.contentHost=t,u.getDisplayText=o.getDisplayText,u.isSimplifiedPlatform=r.isSimplifiedPlatform(),u.shouldHideNavBar=u.isSimplifiedPlatform||"T"===a,u.getUserTitle=function(){return u.getUser().operator?u.getUser().operatorTitle:u.getUser().title},c.onReady().then(function(){u.feedbackEmail=c.getUser().feedbackEmail,u.isNotificationEligible=(u.getUser().pendingItemNotifications||u.getUser().messageCenterNotifications)&&"PENDING_APPROVAL"!==e,c.getUser().menuEligible&&o.onReady().then(function(){u.supportMenu=o.getMenuEntry("UserSupport");var e=o.getMenuGroups();e.length>0&&(u.menuGroup=e[0])})}),u.isMenuActive=o.isActive,u.menuClick=function(e){!e.parent&&e.subItems.length||(l.menuNavigate(e.id),$(".navbar-toggler").is(":visible")&&!$(".navbar-toggler").hasClass("collapsed")&&$(".navbar-toggler").trigger("click"))},u.goHome=function(){"CORE"===e&&l.navigateHome()},u.getIbkrModeLogo=function(){if(angular.isUndefined(c.getUser().ibkrMode))return"";var e="https://"+t+"/images/web/logos/";return"pro"===c.getUser().ibkrMode?e+="ibkr-pro-square-text-black.svg":e+="ibkr-lite-square-text-black.svg",e},u.getLogoStyle=function(){return u.getUser().isStandalonePa()?"STANDALONE_PA":u.getUser().whiteBranded?"WHITE_BRANDED":"IBKR"},u.optionClick=function(e){var t=new PageEntry(e);t.icon="",t.breadcrumb=i.CLEAR,t.menu="clear",l.navigate(t)}}}]})}},function(e,t){e.exports='<div class="ibkr-am-header" ng-class="{ \'wb-am-header\' : $ctrl.getLogoStyle() === \'WHITE_BRANDED\' }">\r\n    <nav id="amHeader" ng-hide="$ctrl.shouldHideNavBar" class="navbar navbar-inverse navbar-expand-lg navbar-top d-none d-lg-block">\r\n        <div class="container">\r\n            <div class="navbar-collapse collapse">\r\n            \t\x3c!-- \r\n            \t\tLeft Menu \r\n            \t--\x3e\r\n                <ul class="navbar-nav mr-auto align-items-center">\r\n                    <li class="nav-text" translate="user.greeting" translate-values="{ \'displayName\' : $ctrl.getUserTitle() }"></li>\r\n                </ul>\r\n                \x3c!-- \r\n                \tRight Menu\r\n                --\x3e\r\n                <ul class="navbar-nav ml-auto align-items-center">\r\n                    \x3c!-- \r\n                    \tDesktop Support Menu \r\n                    --\x3e\r\n                    <li ng-if="::$ctrl.supportMenu" persistent-dropdown-parent class="nav-item dropdown">\r\n                        <a href="javascript:void(0)" persistent-dropdown-closer class="nav-link nav-support dropdown-toggle" id="nav-support" aria-haspopup="true" aria-expanded="false">\r\n                            <span>{{\'user.menu.UserSupport\' | translate}}</span>\r\n                        </a>\r\n                        <div class="dropdown-menu dropdown-support" aria-labelledby="nav-support">\r\n                            <div class="row">\r\n                                <div class="col">\r\n                                    <a href="javascript:void(0);" persistent-dropdown-closer class="dropdown-item" ng-repeat="supportItem in ::$ctrl.supportMenu.subItems" ng-click="$ctrl.menuClick(supportItem)">\r\n                                        <i class="fa {{supportItem.icon}}"></i>\r\n                                        {{\'user.menu.\' + supportItem.id | translate}}\r\n                                    </a>\r\n                                    <a ng-if="::$ctrl.feedbackEmail.length > 0" href="{{::\'mailto:\' + $ctrl.feedbackEmail}}" persistent-dropdown-closer class="dropdown-item">\r\n                                        <i class="fa fa-envelope"></i>\r\n                                        {{\'word.feedback\' | translate}}\r\n                                    </a>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </li>\r\n                    \x3c!-- \r\n                    \tDesktop Notifications \r\n                    --\x3e\r\n                    <li ng-if="::$ctrl.isNotificationEligible" class="nav-item dropdown" persistent-dropdown-parent>\r\n                        <a href="javascript:void(0)" persistent-dropdown-closer class="nav-link nav-notifications dropdown-toggle" id="nav-notifications" aria-haspopup="true" aria-expanded="false">\r\n                            <notification-badge></notification-badge>\r\n                        </a>\r\n                        <div class="dropdown-menu dropdown-notifications" aria-labelledby="nav-notifications">\r\n                            <notification-list></notification-list>\r\n                        </div>\r\n                    </li>\r\n                    \x3c!-- \r\n                    \tDesktop User Menu \r\n                    --\x3e\r\n                    <li ng-if="$ctrl.getUser().options.length > 0" class="nav-item dropdown" persistent-dropdown-parent>\r\n                        <a href="javascript:void(0)" persistent-dropdown-closer class="nav-link nav-notifications dropdown-toggle" id="nav-user" aria-haspopup="true" aria-expanded="false">\r\n                            <i class="fa fa-user"></i>\r\n                        </a>\r\n                        <div class="dropdown-menu dropdown-user" aria-labelledby="nav-user">\r\n                            <div class="row">\r\n                                <div class="col">\r\n                                    <p>\r\n                                        <span class="ibkr-user">{{$ctrl.getUserTitle()}}</span>\r\n                                        <span ng-if="$ctrl.getUser().ibkrMode !== \'\'" class="ibkr-plan">\r\n                                            <img ng-src="{{$ctrl.getIbkrModeLogo()}}" />\r\n                                        </span>\r\n                                    </p>\r\n                                    \r\n                                    <a ng-if="option.icon.length > 0" href="javascript:void(0)" class="dropdown-item" ng-click="$ctrl.optionClick(option)" ng-repeat="option in ::$ctrl.getUser().options">\r\n                                        <i class="fa {{option.icon}}"></i>\r\n                                        {{\'user.options.\' + option.id | translate}}\r\n                                    </a>\r\n                                        \r\n                                    <div ng-if="option.icon.length === 0" class="btn-logout" ng-repeat="option in ::$ctrl.getUser().options">\r\n                                        <am-button btn-text="{{\'user.options.\' + option.id | translate}}" btn-type="primary" on-click="$ctrl.optionClick(option)"></am-button>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </li>\r\n                    \x3c!-- \r\n                    \tDesktop Language \r\n                    --\x3e\r\n                    <li class="nav-item dropdown" persistent-dropdown-parent>\r\n                        <a href="javascript:void(0)" persistent-dropdown-closer class="nav-link nav-notifications dropdown-toggle" id="nav-language" aria-haspopup="true" aria-expanded="false">\r\n                            <img ng-src="{{\'https://\' + $ctrl.contentHost + \'/images/web/icons/icon-language.svg\'}}" />\r\n                        </a>\r\n                        <div class="dropdown-menu dropdown-language" aria-labelledby="nav-language">\r\n                            <language-list></language-list>\r\n                        </div>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    </nav>\r\n    \r\n    <nav id="amMenu" ng-hide="$ctrl.shouldHideNavBar" class="navbar navbar-inverse navbar-expand-lg navbar-bottom">\r\n        <div class="container">\r\n            \x3c!-- \r\n            \tLogo \r\n            --\x3e\r\n            <ng-switch on="$ctrl.getLogoStyle()">\r\n                <a ng-switch-when="IBKR" href="javascript:void(0)" class="navbar-brand brand-logo" ng-click="$ctrl.goHome()"></a>\r\n                <a ng-switch-when="STANDALONE_PA" href="javascript:void(0)" class="navbar-brand pa-logo-black"></a>\r\n                <a ng-switch-when="WHITE_BRANDED" href="javascript:void(0)" class="navbar-brand wb-logo">\r\n                    <img ng-src="https://{{::$ctrl.contentHost}}/{{::$ctrl.getUser().logo}}" />\r\n                </a>\r\n            </ng-switch>\r\n            \x3c!-- \r\n            \tMobile Hamburger\r\n            --\x3e\r\n            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#ibkr-am-nav-bottom" aria-controls="ibkr-am-nav-bottom" aria-expanded="false" aria-label="Toggle Navigation">\r\n                <span class="navbar-toggler-icon">\r\n                    <i class="fas fa-bars"></i>\r\n                </span>\r\n            </button>\r\n            \x3c!-- \r\n            \tMobile IBKR Mode\r\n            --\x3e\r\n            <div ng-if="$ctrl.getUser().ibkrMode !== \'\'" class="ibkr-plan-mobile hidden-md hidden-lg">\r\n                <img ng-src="{{$ctrl.getIbkrModeLogo()}}" />\r\n            </div>\r\n            \x3c!-- \r\n            \tMobile Notifications \r\n            --\x3e\r\n            <div ng-if="::$ctrl.isNotificationEligible" class="nav-item-mobile dropdown hidden-md hidden-lg" persistent-dropdown-parent>\r\n                <a href="javascript:void(0)" persistent-dropdown-closer class="nav-link nav-notifications-mobile dropdown-toggle" id="nav-notifications-mobile" aria-haspopup="true" aria-expanded="false">\r\n                    <notification-badge></notification-badge>\r\n                </a>\r\n                <div class="dropdown-menu dropdown-notifications-mobile" aria-labelledby="nav-notifications-mobile">\r\n                    <notification-list></notification-list>\r\n                </div>\r\n            </div>\r\n            \r\n            <div class="navbar-collapse collapse" id="ibkr-am-nav-bottom">\r\n                <ul class="navbar-nav ml-auto align-items-center">\r\n                    \x3c!-- \r\n                    \tMenu Items \r\n                    --\x3e\r\n                    <li id="menu_{{menuEntry.id}}" persistent-dropdown-parent class="nav-item" ng-class="{ \'dropdown\': (menuEntry.subItems.length > 0), \'hidden-md hidden-lg\' : (menuEntry.id === \'UserSupport\') }" ng-repeat="menuEntry in $ctrl.menuGroup.groupMenuEntries">\r\n                        <a href="javascript:void(0)" persistent-dropdown-closer class="nav-link" ng-class="{ \'active\': $ctrl.isMenuActive(menuEntry), \'dropdown-toggle\' : (menuEntry.subItems.length > 0) }" ng-click="$ctrl.menuClick(menuEntry)" id="nav-{{menuEntry.id}}" aria-haspopup="true" aria-expanded="false">\r\n                            {{$ctrl.getDisplayText(menuEntry)}}\r\n                        </a>\r\n                        \r\n                        <div class="dropdown-menu" ng-if="menuEntry.subItems.length > 0" aria-labelledby="nav-{{menuEntry.id}}">\r\n                            <div class="row">\r\n                                <div class="col">\r\n                                    <a href="javascript:void(0)" persistent-dropdown-closer class="dropdown-item" translate="{{$ctrl.getDisplayText(subMenu)}}" ng-click="$ctrl.menuClick(subMenu)" ng-repeat="subMenu in menuEntry.subItems"></a>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </li>\r\n                    \x3c!-- \r\n                    \tMobile Language \r\n                    --\x3e\r\n                    <li id="menu__Language" persistent-dropdown-parent class="nav-item dropdown hidden-md hidden-lg">\r\n                        <a href="javascript:void(0)" persistent-dropdown-closer class="nav-link dropdown-toggle" id="nav-language" aria-haspopup="true" aria-expanded="false">\r\n                            {{\'word.language\' | translate}}\r\n                        </a>\r\n                        <div class="dropdown-menu" aria-labelledby="nav-language">\r\n                            <language-list></language-list>\r\n                        </div>\r\n                    </li>\r\n                    \x3c!-- \r\n                    \tMobile User Menu\r\n                    --\x3e\r\n                    <li class="nav-item hidden-md hidden-lg" ng-class="{ \'nav-item-logout\' : (option.icon.length === 0) }" ng-repeat="option in $ctrl.getUser().options">\r\n                        <a ng-if="option.icon.length > 0" href="javascript:void(0)" class="nav-link" ng-click="$ctrl.optionClick(option)">\r\n                            {{\'user.options.\' + option.id | translate}}\r\n                        </a>\r\n                        \r\n                        <am-button ng-if="option.icon.length === 0" btn-text="{{\'user.options.\' + option.id | translate}}" btn-type="primary" btn-class="nav-link nav-btn-logout" on-click="$ctrl.optionClick(option)"></am-button>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    </nav>\r\n</div>'},function(e,t,n){e.exports=function(e){e.component("notificationBadge",{template:n(321),controller:"NotificationController"})}},function(e,t){e.exports='<i class="fa fa-bell"></i>\n<span ng-show="$ctrl.isLoading()" class="badge bg-gray">\n    <i class="fa fa-circle-notch fa-spin fa-fw"></i>\n</span>\n<span ng-show="!$ctrl.isLoading() && $ctrl.getNotificationCount() > 0" class="badge bg-red">{{$ctrl.getNotificationCount()}}</span>\n'},function(e,t){e.exports=function(e){e.controller("NotificationController",["BreadcrumbAction","CsTicketService","UserService","NavigationService","PendingItemService",function(e,t,n,a,r){var i=this;i.$onInit=function(){i.getUser=n.getUser,i.getCorporateActionCount=n.getCorporateActionCount,i.getMessageCount=n.getMessageCount,i.getPendingItemCount=function(){return r.getPendingItems().length},i.getNotificationCount=function(){return i.getPendingItemCount()+i.getCorporateActionCount()+i.getMessageCount()},i.getBadgeClass=function(e){return e>0?"bg-red":"bg-gray"},i.isLoadingNotifications=n.isLoadingNotifications,i.isLoadingPendingItems=r.isLoadingPendingItems,i.isLoading=function(){return i.isLoadingNotifications()||i.isLoadingPendingItems()},i.viewMessages=t.openTicket,i.viewCorporateActions=t.openTicket,i.viewPendingItems=function(){var t={id:"PendingItems",path:"template/page/notification/pendingItems.html",menu:"clear",breadcrumb:e.CLEAR,skipFetch:!0};a.navigate(t)}}}])}},function(e,t,n){e.exports=function(e){e.component("notificationList",{template:n(324),controller:"NotificationController"})}},function(e,t){e.exports='<div class="row">\n    <div class="col">\n        <p ng-show="$ctrl.isLoading()">\n            <i class="fa fa-circle-notch fa-spin fa-fw"></i>&nbsp;{{\'user.notifications.loading\' | translate}}\n        </p>\n        <p ng-show="!$ctrl.isLoading()" translate="user.notifications.total" translate-values="{ count : $ctrl.getNotificationCount() }"></p>\n    </div>\n</div>\n<a ng-if="$ctrl.getUser().pendingItemNotifications" href="javascript:void(0);" persistent-dropdown-closer ng-click="$ctrl.viewPendingItems()" class="dropdown-item">\n    <i class="fa fa-thumbtack"></i>\n    <strong>{{\'page.title.PendingItems\' | translate}}</strong>\n    <span ng-show="$ctrl.isLoadingPendingItems()" class="badge bg-gray">\n        <i class="fa fa-circle-notch fa-spin fa-fw"></i>\n    </span>\n    <span ng-show="!$ctrl.isLoadingPendingItems()" class="badge" ng-class="$ctrl.getBadgeClass($ctrl.getPendingItemCount())">\n        {{$ctrl.getPendingItemCount()}}\n    </span>\n</a>\n<a ng-if="$ctrl.getUser().messageCenterNotifications" href="javascript:void(0);" persistent-dropdown-closer ng-click="$ctrl.viewCorporateActions()" class="dropdown-item">\n    <i class="fa fa-rss"></i>\n    <strong>{{\'page.title.CorporateActions\' | translate}}</strong>\n    <span ng-show="$ctrl.isLoadingNotifications()" class="badge bg-gray">\n        <i class="fa fa-circle-notch fa-spin fa-fw"></i>\n    </span>\n    <span ng-show="!$ctrl.isLoadingNotifications()" class="badge" ng-class="$ctrl.getBadgeClass($ctrl.getCorporateActionCount())">\n        {{$ctrl.getCorporateActionCount()}}\n    </span>\n</a>\n<a ng-if="$ctrl.getUser().messageCenterNotifications" href="javascript:void(0);" persistent-dropdown-closer ng-click="$ctrl.viewMessages()" class="dropdown-item">\n    <i class="fa fa-envelope"></i>\n    <strong>{{\'page.title.Messages\' | translate}}</strong>\n    <span ng-show="$ctrl.isLoadingNotifications()" class="badge bg-gray">\n        <i class="fa fa-circle-notch fa-spin fa-fw"></i>\n    </span>\n    <span ng-show="!$ctrl.isLoadingNotifications()" class="badge" ng-class="$ctrl.getBadgeClass($ctrl.getMessageCount())">\n        {{$ctrl.getMessageCount()}}\n    </span>\n</a>'},function(e,t,n){e.exports=function(e){e.component("ndClientSimplifiedWitholdingTable",{bindings:{fatcaW8ImyWithholdingStatement:"=ngModel",rules:"<"},template:n(326),controller:function(){var e=this;e.$onInit=function(){for(var t in e.fatcaW8ImyWithholdingStatement.rows){var n=e.fatcaW8ImyWithholdingStatement.rows[t];angular.isUndefined(n.DIVIDEND)&&(n.DIVIDEND=parseFloat(15)),angular.isUndefined(n.INTEREST)&&(n.INTEREST=parseFloat(15)),angular.isUndefined(n.OTHER_SOURCES)&&(n.OTHER_SOURCES=parseFloat(15)),angular.isUndefined(n.ECI)&&(n.ECI=parseFloat(37))}},e.hasFootnote=function(e){return-1!=["DIVIDEND","INTEREST","ECI"].indexOf(e)},e.getFootnoteIndex=function(t){for(var n=0,a=0;a<e.rules.allowedFatcaIncomeTypes.length;a++){var r=e.rules.allowedFatcaIncomeTypes[a];if(e.hasFootnote(r)&&n++,t===r)return n}return n},e.disableInput=function(t,n){if("FATCA"===n){var a=e.fatcaW8ImyWithholdingStatement.rows[t],r=a[n];if(angular.isDefined(r)){var i=parseFloat(r);return i==parseFloat(0)}}return!1},e.getPercentageMask=function(e,t){var n=100,a=0;return"FATCA"===t?n=0:"ECI"===t&&(n=37),"QI_NON_TREATY"===e?-1!=["DIVIDEND","INTEREST","OTHER_SOURCES"].indexOf(t)&&(n=30,a=30):"US_PAYESS"===e?-1!=["DIVIDEND","INTEREST","OTHER_SOURCES"].indexOf(t)?(n=30,a=0):"OTHER_INTEREST"===t&&(n=0,a=0):"QI_TREATY"===e&&-1!=["DIVIDEND","INTEREST","OTHER_SOURCES","OTHER_INTEREST"].indexOf(t)&&(n=30,a=0),"OTHER_INTEREST"===t&&-1==["QI_TREATY","US_PAYESS"].indexOf(e)&&(n=30,a=30),"'alias': 'am_percentage', 'digits': '2', 'max': '"+n+"', 'min': '"+a+"'"}}})}},function(e,t){e.exports='\r\n<h6 class="subtitle" translate="{{ (\'ndBrokerClientWithholding.heading\') }}"></h6>\r\n<div class="table-responsive">\r\n\t<table width="100%" cellpadding="0" cellspacing="0" border="0" class="table table-condensed table-bordered">\r\n\t\t<thead>\r\n\t\t\t<tr>\r\n\t\t\t\t<th align="center" valign="bottom" ng-repeat="type in $ctrl.rules.allowedFatcaIncomeTypes">{{\'fatcaIncomeType.\' + type | translate}}\r\n\t\t\t\t\r\n\t\t\t\t<sup ng-if="$ctrl.hasFootnote(type)">{{$ctrl.getFootnoteIndex(type)}}</sup>\r\n\t\t\t\t</th>\r\n\t\t\t</tr>\r\n\t\t</thead>\r\n\t\t<tbody>\r\n\t\t\t<tr class="valign-top" ng-repeat="(poolType, values) in $ctrl.fatcaW8ImyWithholdingStatement.rows" >\r\n\t\t\t\t<td align="left" valign="middle" ng-repeat="type in $ctrl.rules.allowedFatcaIncomeTypes" >\r\n\t\t\t\t\t<am-input name="{{poolType + \'_\' + type}}" type="text" ng-model="values[type]" ph-text=" " input-mask="$ctrl.getPercentageMask(poolType, type)" is-disabled="$ctrl.disableInput(poolType, type)"></am-input>\r\n\t\t\t\t</td>\r\n\t\t\t</tr>\r\n\t\t</tbody>\r\n\t</table>\r\n</div>\r\n<p translate="{{ (\'ndBrokerClientWithholding.instruction\') }}" translate-values="{breakTag: \'<br/>\'}" ></p>\r\n<ol>\r\n\t<li ng-repeat="type in $ctrl.rules.allowedFatcaIncomeTypes | filter: $ctrl.hasFootnote" translate="{{ (\'ndBrokerClientWithholding.\'+type+\'.footnote\') }}"></li>\t   \r\n</ol>'},function(e,t,n){e.exports=function(e){e.component("amBarPageHeader",{template:n(328)})}},function(e,t){e.exports='<div id="amAppHeader" class="ib-bar-spacing am-app-header">\r\n    <am-page-header></am-page-header>\r\n</div>'},function(e,t,n){e.exports=function(e){e.component("clientFeeRemediationAgreement",{template:n(330),controller:["$translate","PendingItemService","ResourceService","FileDownloadService","ModalService",function(t,n,a,r,i){var o=this;o.$onInit=function(){var s;o.pendingItem=n.getActivePendingItem(),o.isLoading=o.pendingItem.restSupported,o.pendingItem.restSupported?(s=o.pendingItem.accountId,a.fetch(e.SERVER_PATH+"/ClientFeeRemediationDetails",{masterAccountId:s}).then(function(e){o.clientDetails=e.data.clientDetails},function(e){o.errors=e.data.errors,o.clientDetails=[]}).finally(function(){o.isLoading=!1})):o.clientDetails=o.pendingItem.clientDetails,o.downloadAgreement=function(n){o.isLoading=!0,a.create(e.SERVER_PATH+"/DownloadFeeRemediationAgreement",{accountId:n}).then(function(e){var t={fileName:n+"_fee.pdf",fileContent:e.data.content,contentType:"application/pdf",fileFormat:"PDF"};r.processDownload(t)},function(e){var n={modalData:{errors:[t.instant("internal.error.request_process")]}};i.openErrorModal(n)}).finally(function(){o.isLoading=!1})},o.sendEmail=function(n){o.isLoading=!0,a.create(e.SERVER_PATH+"/ClientFeeRemediationNotification",{accountId:n}).then(function(e){var n={title:t.instant("clientFeeRemediation.label.notificationSent"),templateUrl:"account-email-confirmation-modal.component",dialogClass:"modal-md",modalData:{accountId:e.data.accountId,email:e.data.email}};i.openModal(n)},function(e){var n={modalData:{errors:[t.instant("email.message.error",{accountId:e.data.accountId,email:e.data.email})]}};i.openErrorModal(n)}).finally(function(){o.isLoading=!1})},o.uploadAgreement=function(e){var n={title:t.instant("form.title."+e.formNumber),templateUrl:"document-upload-modal.component",dialogClass:"modal-lg",modalData:{documentTask:e}};i.openModal(n).then(function(t){"SUCCESS"===t&&(e.documentStatus="RECEIVED_PROCESSING")})}}}]})}},function(e,t){e.exports='<div page-structure>\n    <loading-overlay ng-if="$ctrl.isLoading"></loading-overlay>\n    <h4>{{ \'clientFeeRemediation.header\' | translate }}</h4>\n    <p>{{ \'clientFeeRemediation.message1\' | translate }}</p>\n    <br>\n    <h6 class="subtitle">{{ \'clientFeeRemediation.method.electronic\' | translate }}</h6>\n    <p translate="clientFeeRemediation.message.electronic" translate-values="{startStrongTag: \'<strong>\', endStrongTag: \'</strong>\', emailIcon: \'<i class=&quot;fa fa-envelope&quot;></i>\', breakTag: \'<br>\'}"></p>\n    <h6 class="subtitle">{{ \'clientFeeRemediation.method.paper\' | translate }}</h6>\n    <p translate="clientFeeRemediation.message.paper" translate-values="{startStrongTag: \'<strong>\', endStrongTag: \'</strong>\'}"></p>\n    <h6 class="subtitle">{{ \'clientFeeRemediation.method.login\' | translate }}</h6>\n    <p translate="clientFeeRemediation.message.login"></p>\n    <br>\n    <div class="alert alert-info">\n        <p>{{ \'clientFeeRemediation.note\' | translate }}</p>\n    </div>\n    <br>\n    <div class="table-responsive">\n        <table width="100%" cellpadding="0" cellspacing="0" border="0" class="table tablesorter">\n            <thead>\n                <tr>\n                    <td align="center">{{ \'clientFeeRemediation.label.accountId\' | translate }}</td>\n                    <td align="center">{{ \'clientFeeRemediation.label.accountTitle\' | translate }}</td>\n                    <td align="center">&nbsp;</td>\n                    <td align="center">&nbsp;</td>\n                    <td align="center">{{ \'word.status\' | translate }}</td>\n                    <td align="center">{{ \'clientFeeRemediation.label.notification\' | translate }}</td>\n                </tr>\n            </thead>\n            <tbody>\n                <tr ng-repeat="clientDetail in $ctrl.clientDetails">\n                    <td align="center">{{ clientDetail.accountId }}</td>\n                    <td align="center">{{ clientDetail.accountTitle }}</td>\n                    <td align="center">\n                        <am-button btn-icon="fa-print" btn-text="{{ \'clientFeeRemediation.label.download\' | translate}}" on-click="$ctrl.downloadAgreement(clientDetail.accountId)" ></am-button>\n                    </td>\n                    <td align="center">\n                        <am-button ng-if="clientDetail.documentTask" on-click="$ctrl.uploadAgreement(clientDetail.documentTask)" btn-icon="fa-upload" btn-type="primary" btn-text="{{ \'clientFeeRemediation.label.upload\' | translate}}"></am-button>\n                    </td>\n                    <td align="center">\n                        <span ng-if="clientDetail.documentTask">{{ \'documentStatus.\' + clientDetail.documentTask.documentStatus | translate }}</span>\n                        <span ng-if="!clientDetail.documentTask">{{ \'word.notApplicable\' | translate }}</span>\n                    </td>\n                    <td align="center">\n                        <am-button ng-if="clientDetail.mobileVerified" on-click="$ctrl.sendEmail(clientDetail.accountId)" btn-icon="fa-envelope" btn-type="icon" tooltip-text="{{ \'clientFeeRemediation.label.emailNotification\' | translate}}"></am-button>\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("semiElectronicClientAgreement",{template:n(332),controller:["$translate","ResourceService","FileDownloadService","PendingItemService","ModalService",function(t,n,a,r,i){var o=this;o.$onInit=function(){o.pendingItem=r.getActivePendingItem(),o.isLoading=o.pendingItem.restSupported,o.errors={},o.pendingItem.restSupported&&n.fetch(e.SERVER_PATH+"/SemiElectronicClientDetails",{masterAccountId:o.pendingItem.accountId}).then(function(e){o.pendingItem.clientDetails=e.data.clientDetails},function(e){o.errors=e.data.errors}).finally(function(){o.isLoading=!1}),o.downloadApplication=function(r){o.isLoading=!0,n.fetch(e.SERVER_PATH+"/DownloadSemiElectronicClientAgreement",{accountId:r}).then(function(e){var t={fileName:r+"_application.pdf",fileContent:e.data.content,contentType:"application/pdf",fileFormat:"PDF"};a.processDownload(t)},function(e){var n={modalData:{errors:[t.instant("internal.error.request_process")]}};i.openErrorModal(n)}).finally(function(){o.isLoading=!1})},o.downloadDisclosures=function(r){o.isLoading=!0,n.fetch(e.SERVER_PATH+"/DownloadSemiElectronicClientDisclosure",{accountId:r}).then(function(e){var t={fileName:r+"_disclosures.zip",fileContent:e.data.content,contentType:"application/zip",fileFormat:"ZIP"};a.processDownload(t)},function(e){var n={modalData:{errors:[t.instant("internal.error.request_process")]}};i.openErrorModal(n)}).finally(function(){o.isLoading=!1})},o.sendEmail=function(a){o.isLoading=!0,n.create(e.SERVER_PATH+"/SemiElectronicClientEmailNotification",{accountId:a}).then(function(e){var n={title:t.instant("advisorClientAgreement.label.notificationSent"),templateUrl:"account-email-confirmation-modal.component",dialogClass:"modal-md",modalData:{accountId:e.data.accountId,email:e.data.email}};i.openModal(n)},function(e){var n={modalData:{errors:[t.instant("email.message.error",{accountId:e.data.accountId,email:e.data.email})]}};i.openErrorModal(n)}).finally(function(){o.isLoading=!1})},o.upload=function(e){var n={title:t.instant("form.title."+e.formNumber),templateUrl:"document-upload-modal.component",dialogClass:"modal-lg",modalData:{documentTask:e}};i.openModal(n).then(function(t){"SUCCESS"===t&&(e.documentStatus="RECEIVED_PROCESSING")})}}}]})}},function(e,t){e.exports='<div page-structure>\n    <loading-overlay ng-if="$ctrl.isLoading"></loading-overlay>\n    <h4>{{ \'advisorClientAgreement.header\' | translate }}</h4>\n    <div ng-if="$ctrl.pendingItem.masterType === \'ADVISOR_CLIENT_REVIEW\'">  \t\n    \t<p translate="advisorClientAgreement.ADVISOR_CLIENT_REVIEW.message"></p>\n    \t<br><br>\n     \t<div class="alert alert-info">\n\t        <p translate="advisorClientAgreement.ADVISOR_CLIENT_REVIEW.completion" translate-values="{startTagEmail: \'<a href=&quot;mailto:advisorservices_US@interactivebrokers.com&quot; target=&quot;_blank&quot;>\', endTag: \'</a>\'}"></p>\n\t    </div>\n    </div>\n\n    <div ng-if="$ctrl.pendingItem.masterType !== \'ADVISOR_CLIENT_REVIEW\'">\n        <p>{{ \'advisorClientAgreement.message\' | translate }}</p>\n        <p>\n        \t<strong>{{ \'advisorClientAgreement.message1\' | translate }}</strong>\n    \t</p>\n\t    <h6 class="subtitle">{{ \'advisorClientAgreement.method.online\' | translate }}</h6>\n\t    <p translate="advisorClientAgreement.online.message" translate-values="{startStrongTag: \'<strong>\', endStrongTag: \'</strong>\', emailIcon: \'<i class=&quot;fa fa-envelope&quot;></i>\'}"></p>\n\t    <h6 class="subtitle">{{ \'advisorClientAgreement.method.paper\' | translate }}</h6>\n\t    <p translate="advisorClientAgreement.paper.message" translate-values="{startStrongTag: \'<strong>\', endStrongTag: \'</strong>\'}"></p>\n\t    <h6 class="subtitle">{{ \'advisorClientAgreement.method.login\' | translate }}</h6>\n\t    <p translate="advisorClientAgreement.login.message"></p>\n\t\t<br>\n\t    <div class="alert alert-info">\n\t        <p ng-if="$ctrl.pendingItem.masterType !== \'BROKER\'" translate="advisorClientAgreement.completion" translate-values="{startTagUS: \'<a href=&quot;mailto:advisorservices_US@interactivebrokers.com&quot; target=&quot;_blank&quot;>\', startTagEurope: \'<a href=&quot;mailto:proserve@interactivebrokers.com&quot; target=&quot;_blank&quot;>\', endTag: \'</a>\'}"></p>\n\t        <p ng-if="$ctrl.pendingItem.masterType === \'BROKER\'" translate="advisorClientAgreement.BROKER.completion" translate-values="{startTagEmail: \'<a href=&quot;mailto:proserve@interactivebrokers.com&quot; target=&quot;_blank&quot;>\', endTag: \'</a>\'}"></p>\n\t    </div>\n    </div>\n\t<div class="table-responsive">\n\t\t<table width="100%" cellpadding="0" cellspacing="0" border="0" class="table tablesorter">\n\t\t\t<thead>\n    \t\t\t<tr>\n    \t\t\t\t<td align="center">{{ \'advisorClientAgreement.label.accountId\' | translate }}</td>\n    \t\t\t\t<td align="center">{{ \'advisorClientAgreement.label.accountTitle\' | translate }}</td>\n    \t\t\t\t<td align="center">&nbsp;</td>\n    \t\t\t\t<td align="center">&nbsp;</td>\n    \t\t\t\t<td align="center">{{ \'word.status\' | translate }}</td>\n\t\t\t\t\t<td align="center" ng-if="$ctrl.pendingItem.masterType !== \'ADVISOR_CLIENT_REVIEW\'">{{ \'advisorClientAgreement.label.notification\' | translate }}</td>\n    \t\t\t</tr>\n    \t\t</thead>\n    \t\t<tbody>\n    \t\t\t<tr ng-repeat="clientDetail in $ctrl.pendingItem.clientDetails">\n    \t\t\t\t<td align="center">{{ clientDetail.accountId }}</td>\n    \t\t\t\t<td align="center">{{ clientDetail.accountTitle }}</td>\n    \t\t\t\t<td align="left">\n    \t\t\t\t\t<am-button btn-icon="fa-print" btn-text="{{ \'advisorClientAgreement.label.agreements\' | translate}}" on-click="$ctrl.downloadApplication(clientDetail.accountId)" ></am-button>\n\t\t\t\t\t\t<am-button ng-if="clientDetail.agreements.length > 0" btn-icon="fa-download" btn-text="{{ \'advisorClientAgreement.label.documents\' | translate}}" on-click="$ctrl.downloadDisclosures(clientDetail.accountId)" ></am-button>\n    \t\t\t\t</td>\n    \t\t\t\t<td align="center">\n    \t\t\t\t\t<am-button ng-if="clientDetail.documentTask" on-click="$ctrl.upload(clientDetail.documentTask)" btn-icon="fa-upload" btn-type="primary" btn-text="{{ \'word.upload\' | translate}}"></am-button>\n    \t\t\t\t</td>\n    \t\t\t\t<td align="center">\n    \t\t\t\t\t<span ng-if="clientDetail.documentTask">{{ \'documentStatus.\' + clientDetail.documentTask.documentStatus | translate }}</span>\n    \t\t\t\t\t<span ng-if="!clientDetail.documentTask">{{ \'word.notApplicable\' | translate }}</span>\n    \t\t\t\t</td>\n    \t\t\t\t<td align="center" ng-if="$ctrl.pendingItem.masterType !== \'ADVISOR_CLIENT_REVIEW\'">\n    \t\t\t\t\t<am-button ng-if="clientDetail.mobileVerified" on-click="$ctrl.sendEmail(clientDetail.accountId)" btn-icon="fa-envelope" btn-type="icon" tooltip-text="{{ \'advisorClientAgreement.label.emailNotification\' | translate}}"></am-button>\n    \t\t\t\t</td>\n    \t\t\t</tr>\n    \t\t</tbody>\n\t\t</table>\n\t</div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("pendingItemsDisplay",{bindings:{item:"<",displayOptions:"<?"},template:n(334),controller:["PendingItemService","ModalService",function(e,t){var n=this;n.$onInit=function(){n.getItemText=e.getPendingItemText,n.viewItem=e.navigateToPendingItem,n.displayOptions=n.displayOptions||{},n.getDateSizing=function(){return n.displayOptions.hideDate?"hidden":"col-xs-12 col-sm-12 col-md-2 col-lg-1"},n.getItemSizing=function(){return"col-xs-12 col-sm-12 "+(n.displayOptions.hideDate?"col-md-9":"col-md-7")+" "+(t.isModalOpen()?"col-lg-7":n.displayOptions.hideDate?"col-lg-10":"col-lg-9")},n.getButtonSizing=function(){return"col-xs-12 col-sm-12 col-md-3 col-lg-2"},n.getTypeBreakClass=function(){return n.displayOptions.hideType?"hidden":t.isModalOpen()?"":"hidden-sm hidden-md hidden-lg"},n.getTypeSlashClass=function(){return t.isModalOpen()||n.displayOptions.hideType?"hidden":"text-gray margin-left-10 margin-right-10 hidden-xs"},n.getViewButtonSize=function(){return t.isModalOpen()?"small":""}}}]})}},function(e,t){e.exports='<div class="row pi-overview">\n   <div ng-class="$ctrl.getDateSizing()">\n      <p class="text-gray">{{$ctrl.item.date ? $ctrl.item.date : \'---\'}}</p>\n   </div>\n   <div ng-class="$ctrl.getItemSizing()">\n      \x3c!-- Transfer Retail Request --\x3e\n      <p\n         ng-if="::$ctrl.item.type === \'RETAIL_REQUEST\' && $ctrl.item.pendingRequestType === \'TRANSFER_REQUEST\'">\n         <strong>{{$ctrl.getItemText($ctrl.item)}}</strong> <span\n            class="hidden-sm hidden-md hidden-lg"> <br />\n         </span>\n      </p>\n\n      \x3c!-- Instruction Retail Request --\x3e\n      <p\n         ng-if="::$ctrl.item.type === \'RETAIL_REQUEST\' && $ctrl.item.pendingRequestType === \'INSTRUCTION_REQUEST\'">\n         <strong>{{$ctrl.getItemText($ctrl.item)}}</strong> <span\n            class="hidden-sm hidden-md hidden-lg"> <br />\n         </span>\n      </p>\n\n      \x3c!-- Bank Amount Confirmation --\x3e\n      <p\n         ng-if="::$ctrl.item.type === \'RETAIL_REQUEST\' && $ctrl.item.pendingRequestType === \'INSTRUCTION_AMOUNTS\'">\n         <strong>{{$ctrl.getItemText($ctrl.item)}}</strong> <span\n            class="hidden-sm hidden-md hidden-lg"> <br />\n         </span>\n      </p>\n\n      \x3c!-- Recurring Transfer Request --\x3e\n      <p\n         ng-if="::$ctrl.item.type === \'RETAIL_REQUEST\' && $ctrl.item.pendingRequestType === \'RECURRING_TRANSFER_REQUEST\'">\n         <strong>{{$ctrl.getItemText($ctrl.item)}}</strong> <span\n            class="hidden-sm hidden-md hidden-lg"> <br />\n         </span>\n      </p>\n\n      \x3c!-- Add User Request --\x3e\n      <p\n         ng-if="::$ctrl.item.type === \'RETAIL_REQUEST\' && $ctrl.item.pendingRequestType === \'ADD_USER_REQUEST\'">\n         <strong>{{$ctrl.getItemText($ctrl.item)}}</strong> <span\n            class="hidden-sm hidden-md hidden-lg"> <br />\n         </span> <span class="text-gray margin-left-10 margin-right-10 hidden-xs">/</span>\n         <span class="text-gray"> <em>{{::$ctrl.item.request.profile.credential}}</em>\n         </span>\n      </p>\n\n      \x3c!-- Modify User Request --\x3e\n      <p\n         ng-if="::$ctrl.item.type === \'RETAIL_REQUEST\' && $ctrl.item.pendingRequestType === \'MODIFY_USER_REQUEST\'">\n         <strong>{{$ctrl.getItemText($ctrl.item)}}</strong> <span\n            class="hidden-sm hidden-md hidden-lg"> <br />\n         </span> <span class="text-gray margin-left-10 margin-right-10 hidden-xs">/</span>\n         <span class="text-gray"> <em>{{::$ctrl.item.request.profile.credential}}</em>\n         </span>\n      </p>\n\n      \x3c!-- Authorizer Configuration Request --\x3e\n      <p\n         ng-if="::$ctrl.item.type === \'RETAIL_REQUEST\' && $ctrl.item.pendingRequestType === \'MODIFY_AUTHORIZER_CONFIG\'">\n         <strong>{{$ctrl.getItemText($ctrl.item)}}</strong> <span\n            class="hidden-sm hidden-md hidden-lg"> <br />\n         </span> <span class="text-gray margin-left-10 margin-right-10 hidden-xs">/</span>\n         <span class="text-gray"> <em>{{::$ctrl.item.request.accountId}}</em>\n         </span>\n      </p>\n\n      \x3c!-- Email Change Request --\x3e\n      <p\n         ng-if="::$ctrl.item.type === \'RETAIL_REQUEST\' && $ctrl.item.pendingRequestType === \'EMAIL_CHANGE\'">\n         <strong>{{$ctrl.getItemText($ctrl.item)}}</strong> <span\n            class="hidden-sm hidden-md hidden-lg"> <br />\n         </span> <span class="text-gray margin-left-10 margin-right-10 hidden-xs">/</span>\n         <span class="text-gray"> <em>{{::$ctrl.item.request.newEmailAddress}}</em>\n         </span>\n      </p>\n\n      \x3c!-- Duplicate Account Request --\x3e\n      <p\n         ng-if="::$ctrl.item.type === \'RETAIL_REQUEST\' && $ctrl.item.pendingRequestType === \'DUPLICATE_ACCOUNT\'">\n         <strong>{{$ctrl.getItemText($ctrl.item)}}</strong> <span\n            class="hidden-sm hidden-md hidden-lg"> <br />\n         </span> <span class="text-gray margin-left-10 margin-right-10 hidden-xs">/</span>\n         <span class="text-gray"> <em>{{$ctrl.item.request.accountId}}</em>\n         </span>\n      </p>\n      \n      \x3c!-- TBSZ Account Approval Request --\x3e\n      <p\n         ng-if="::$ctrl.item.type === \'RETAIL_REQUEST\' && $ctrl.item.pendingRequestType === \'TBSZ_PARTITION_APPROVAL\'">\n         <strong>{{$ctrl.getItemText($ctrl.item)}}</strong> <span\n            class="hidden-sm hidden-md hidden-lg"> <br />\n         </span> <span class="text-gray margin-left-10 margin-right-10 hidden-xs">/</span>\n         <span class="text-gray"> <em>{{$ctrl.item.request.accountId}}</em>\n         </span>\n      </p>\n\n      \x3c!-- PENDING DOCUMENT TASK --\x3e\n      <p ng-if="::$ctrl.item.type === \'REGISTRATION_TASK\' && $ctrl.item.pendingTaskType === \'DOCUMENT\'">\n          <span ng-if="!$ctrl.displayOptions.hideType">\n              <strong ng-if="$ctrl.item.task.formNumber === 9415">{{\'hongKongInvestorCategory.pendingitem.title\' | translate }}</strong>\n              <strong ng-if="$ctrl.item.task.formNumber !== 9415">{{\'pendingTaskType.\' + $ctrl.item.pendingTaskType | translate }}</strong>\n              <span ng-class="$ctrl.getTypeBreakClass()"><br></span>\n              <span ng-class="$ctrl.getTypeSlashClass()">/</span>\n              <span class="text-gray"><em>{{$ctrl.getItemText($ctrl.item)}}</em></span>\n          </span>\n          <strong ng-if="$ctrl.displayOptions.hideType">{{$ctrl.getItemText($ctrl.item)}}</strong>\n          <span class="hidden-sm hidden-md hidden-lg"><br></span>\n          <span class="text-gray margin-left-10 margin-right-10 hidden-xs">/</span>\n          <span class="text-gray"><em>{{\'documentStatus.\' + $ctrl.item.task.documentStatus | translate}}</em></span>\n      </p>\n      \n      \x3c!-- PENDING COMPLIANCE TASK --\x3e\n      <p ng-if="::$ctrl.item.type === \'REGISTRATION_TASK\' && $ctrl.item.pendingTaskType === \'COMPLIANCE\'">\n          <strong>{{$ctrl.getItemText($ctrl.item)}}</strong>\n          <span class="hidden-sm hidden-md hidden-lg"><br></span>\n          <span class="text-gray margin-left-10 margin-right-10 hidden-xs">/</span>\n          <span class="text-gray"><em>{{\'registrationTaskState.\' + $ctrl.item.task.state | translate}}</em></span>\n      </p>\n\n      \x3c!-- PENDING EMPLOYER LETTER --\x3e\n      <p ng-if="::$ctrl.item.type === \'REGISTRATION_TASK\' && $ctrl.item.pendingTaskType === \'EMPLOYER_LETTER\'">\n          <span ng-if="!$ctrl.displayOptions.hideType">\n              <strong>{{\'pendingTaskType.\' + $ctrl.item.pendingTaskType | translate }}</strong>\n              <span ng-class="$ctrl.getTypeBreakClass()"><br></span>\n              <span ng-class="$ctrl.getTypeSlashClass()">/</span>\n              <span class="text-gray"><em>{{$ctrl.getItemText($ctrl.item)}}</em></span>\n          </span>\n          <strong ng-if="$ctrl.displayOptions.hideType">{{$ctrl.getItemText($ctrl.item)}}</strong>\n      </p>\n\n      \x3c!-- PENDING AGREEMENT TASK --\x3e\n      <p\n         ng-if="::$ctrl.item.type === \'REGISTRATION_TASK\' && $ctrl.item.pendingTaskType === \'AGREEMENT\'">\n         <strong>{{$ctrl.getItemText($ctrl.item)}}</strong> <span\n            class="hidden-sm hidden-md hidden-lg"> <br />\n         </span> <span class="text-gray margin-left-10 margin-right-10 hidden-xs">/</span>\n         <span class="text-gray"> <em>{{::$ctrl.item.accountId}}</em>\n         </span>\n      </p>\n      \n      \x3c!-- PENDING AGREEMENT TASK - REST --\x3e\n      <p\n         ng-if="::$ctrl.item.type === \'TRADING_AGREEMENT\'">\n         <strong>{{$ctrl.getItemText($ctrl.item)}}</strong> <span\n            class="hidden-sm hidden-md hidden-lg"> <br />\n         </span> <span class="text-gray margin-left-10 margin-right-10 hidden-xs">/</span>\n         <span class="text-gray"> <em>{{::$ctrl.item.accountId}}</em>\n         </span>\n      </p>\n\n      \x3c!-- PENDING QUESTIONNAIRE TASK --\x3e\n      <p\n         ng-if="::$ctrl.item.type === \'REGISTRATION_TASK\' && $ctrl.item.pendingTaskType === \'QUESTIONNAIRE\'">\n         <strong>{{$ctrl.getItemText($ctrl.item)}}</strong>\n      </p>\n\n      \x3c!-- PENDING QUESTIONNAIRE TASK --\x3e\n      <p\n         ng-if="::$ctrl.item.type === \'REGISTRATION_TASK\' && $ctrl.item.pendingTaskType === \'FACEKOM\'">\n         <strong>{{$ctrl.getItemText($ctrl.item)}}</strong>\n      </p>\n\n      \x3c!-- PENDING DEPOSIT TASK --\x3e\n      <p\n         ng-if="::$ctrl.item.type === \'REGISTRATION_TASK\' && $ctrl.item.pendingTaskType === \'DEPOSIT\'">\n         <strong>{{$ctrl.getItemText($ctrl.item)}}</strong> <span\n            class="hidden-sm hidden-md hidden-lg"><br /></span> <span\n            class="text-gray margin-left-10 margin-right-10 hidden-xs">/</span>\n         <span class="text-gray"><em>{{::$ctrl.item.accountId}}</em></span>\n      </p>\n\n      \x3c!-- PENDING EXAM TASK --\x3e\n      <p\n         ng-if="::$ctrl.item.type === \'REGISTRATION_TASK\' && $ctrl.item.pendingTaskType === \'EXAM\'">\n         <strong>{{$ctrl.getItemText($ctrl.item)}}</strong> <span\n            class="hidden-sm hidden-md hidden-lg"> <br />\n         </span> <span class="text-gray margin-left-10 margin-right-10 hidden-xs">/</span>\n         <span class="text-gray"> <em>{{::$ctrl.item.accountId}}</em>\n         </span>\n      </p>\n\n      \x3c!-- PENDING REOPEN INVITATION --\x3e\n      <p\n         ng-if="::$ctrl.item.type === \'REGISTRATION_TASK\' && $ctrl.item.pendingTaskType === \'REOPEN_INVITATION\'">\n         <strong>{{$ctrl.getItemText($ctrl.item)}}</strong> <span\n            class="hidden-sm hidden-md hidden-lg"> <br />\n         </span> <span class="text-gray margin-left-10 margin-right-10 hidden-xs">/</span>\n         <span class="text-gray"> <em>{{::$ctrl.item.accountId}}</em>\n         </span>\n      </p>\n\n      \x3c!-- PENDING WEALTH MANAGER LINKAGE REQUEST --\x3e\n      <p\n         ng-if="::$ctrl.item.type === \'PENDING_WEALTH_MANAGER_LINKAGE_REQUEST\'">\n         <strong>{{$ctrl.getItemText($ctrl.item)}}</strong> <span\n            class="hidden-sm hidden-md hidden-lg"> <br />\n         </span> <span class="text-gray margin-left-10 margin-right-10 hidden-xs">/</span>\n         <span class="text-gray"> <em>{{::$ctrl.item.wmAccountTitle}}</em>\n         </span>\n      </p>\n\n      \x3c!-- CLIENT LINK/CREATE NEW ACCT  --\x3e\n      <p ng-if="::$ctrl.item.type === \'CLIENT_LINKAGE_REQUEST\'">\n         <strong>{{$ctrl.getItemText($ctrl.item)}}</strong> <span\n            class="hidden-sm hidden-md hidden-lg"> <br />\n         </span> <span class="text-gray margin-left-10 margin-right-10 hidden-xs">/</span>\n         <span class="text-gray"> <em>{{$ctrl.item.clientAccountIds}}</em>\n         </span>\n      </p>\n\n      \x3c!-- COMPLETE ADDITIONAL APPLICATION --\x3e\n      <p ng-if="::$ctrl.item.type === \'COMPLETE_ADDITIONAL_APPLICATION\'">\n         <strong>{{$ctrl.getItemText($ctrl.item)}}</strong> <span\n            class="hidden-sm hidden-md hidden-lg"> <br />\n         </span> <span class="text-gray margin-left-10 margin-right-10 hidden-xs">/</span>\n         <span class="text-gray"> <em>{{::$ctrl.item.accountId}}</em>\n         </span>\n      </p>\n\n      \x3c!-- INVESTOR CATEGORY --\x3e\n      <p ng-if="::$ctrl.item.type === \'INVESTOR_CATEGORY\'">\n         <strong>{{$ctrl.getItemText($ctrl.item)}}</strong> <span\n            class="hidden-sm hidden-md hidden-lg"> <br />\n         </span> <span class="text-gray margin-left-10 margin-right-10 hidden-xs">/</span>\n         <span class="text-gray"> <em>{{::$ctrl.item.accountId}}</em>\n         </span>\n      </p>\n\n      \x3c!-- Market Data Agreement --\x3e\n      <p ng-if="::$ctrl.item.type === \'MARKET_DATA_AGREEMENT\'">\n         <strong>{{$ctrl.getItemText($ctrl.item)}}</strong> <span\n            class="hidden-sm hidden-md hidden-lg"> <br />\n         </span> <span class="text-gray margin-left-10 margin-right-10 hidden-xs">/</span>\n         <span class="text-gray"> <em>{{::$ctrl.item.accountId}}</em>\n         </span>\n      </p>\n\n      \x3c!-- Research Subscription Agreement --\x3e\n      <p ng-if="::$ctrl.item.type === \'RESEARCH_SUBSCRIPTION_AGREEMENT\'">\n         <strong>{{$ctrl.getItemText($ctrl.item)}}</strong> <span\n            class="hidden-sm hidden-md hidden-lg"> <br />\n         </span> <span class="text-gray margin-left-10 margin-right-10 hidden-xs">/</span>\n         <span class="text-gray"> <em>{{::$ctrl.item.accountId}}</em>\n         </span>\n      </p>\n\n      \x3c!-- Fee Change Request --\x3e\n      <p ng-if="::$ctrl.item.type === \'FEE_CHANGE_APPROVAL\'">\n         <strong>{{$ctrl.getItemText($ctrl.item)}}</strong> <span\n            class="hidden-sm hidden-md hidden-lg"> <br />\n         </span> <span class="text-gray margin-left-10 margin-right-10 hidden-xs">/</span>\n         <span class="text-gray"> <em>{{::$ctrl.item.accountId}}</em>\n         </span>\n      </p>\n\n      \x3c!-- Hfcip Transfer Request --\x3e\n      <p ng-if="::$ctrl.item.type === \'HFCIP_TRANSFER_APPROVAL\'">\n         <strong>{{$ctrl.getItemText($ctrl.item)}}</strong> <span\n            class="hidden-sm hidden-md hidden-lg"> <br />\n         </span> <span class="text-gray margin-left-10 margin-right-10 hidden-xs">/</span>\n         <span class="text-gray"> <em>{{::$ctrl.item.accountId}}</em>\n         </span>\n      </p>\n\n      \x3c!-- Trading Exchanges --\x3e\n      <p ng-if="::$ctrl.item.type === \'TRADING_EXCHANGES\'">\n         <strong>{{$ctrl.getItemText($ctrl.item)}}</strong> <span\n            class="hidden-sm hidden-md hidden-lg"> <br />\n         </span> <span class="text-gray margin-left-10 margin-right-10 hidden-xs">/</span>\n         <span class="text-gray"> <em>{{::$ctrl.item.accountId}}</em>\n         </span>\n      </p>\n\n      \x3c!-- Capability Tutorial --\x3e\n      <p ng-if="::$ctrl.item.type === \'TUTORIAL\'">\n         <strong>{{$ctrl.getItemText($ctrl.item)}}</strong> <span\n            class="hidden-sm hidden-md hidden-lg"> <br />\n         </span> <span class="text-gray margin-left-10 margin-right-10 hidden-xs">/</span>\n         <span class="text-gray"> <em>{{::$ctrl.item.accountId}}</em>\n         </span>\n      </p>\n\n      \x3c!-- Account Questionnaires --\x3e\n      <p ng-if="::$ctrl.item.type === \'QUESTIONNAIRE\'">\n         <strong>{{$ctrl.getItemText($ctrl.item)}}</strong> <span\n            class="hidden-sm hidden-md hidden-lg"> <br />\n         </span> <span class="text-gray margin-left-10 margin-right-10 hidden-xs">/</span>\n         <span class="text-gray"> <em>{{::$ctrl.item.accountId}}</em>\n         </span>\n      </p>\n\n      \x3c!-- Entity Questionnaires --\x3e\n      <p ng-if="::$ctrl.item.type === \'ENTITY_QUESTIONNAIRE\'">\n         <strong>{{$ctrl.getItemText($ctrl.item)}}</strong> <span\n            class="hidden-sm hidden-md hidden-lg"> <br />\n         </span> <span class="text-gray margin-left-10 margin-right-10 hidden-xs">/</span>\n         <span class="text-gray"> <em>{{::$ctrl.item.accountId}}</em>\n         </span>\n      </p>\n\n      \x3c!-- Semi Electronic Client Agreements --\x3e\n      <p ng-if="::$ctrl.item.type === \'SEMI_ELECTRONIC_CLIENT_AGREEMENT\'">\n         <strong>{{$ctrl.getItemText($ctrl.item)}}</strong> <span\n            class="hidden-sm hidden-md hidden-lg"> <br />\n         </span> <span class="text-gray margin-left-10 margin-right-10 hidden-xs">/</span>\n         <span class="text-gray"> <em>{{::$ctrl.item.accountId}}</em>\n         </span>\n      </p>\n\n      \x3c!-- ASIC obligations --\x3e\n      <p ng-if="::$ctrl.item.type === \'PENDING_OBLIGATION\'">\n         <strong>{{$ctrl.getItemText($ctrl.item)}}</strong> <span\n            class="hidden-sm hidden-md hidden-lg"> <br />\n         </span> <span class="text-gray margin-left-10 margin-right-10 hidden-xs">/</span>\n         <span class="text-gray"> <em>{{::$ctrl.item.accountId}}</em>\n         </span>\n      </p>\n\n      \x3c!-- Client Fee Remediation --\x3e\n      <p ng-if="::$ctrl.item.type === \'CLIENT_FEE_REMEDIATION\'">\n         <strong>{{$ctrl.getItemText($ctrl.item)}}</strong> <span\n            class="hidden-sm hidden-md hidden-lg"> <br />\n         </span> <span class="text-gray margin-left-10 margin-right-10 hidden-xs">/</span>\n         <span class="text-gray"> <em>{{::$ctrl.item.accountId}}</em>\n         </span>\n      </p>\n   </div>\n   <div ng-if="$ctrl.item.actions.length > 0" ng-class="$ctrl.getButtonSizing()">\n      <div class="pi-buttons">\n         <am-button on-click="$ctrl.viewItem($ctrl.item)" btn-size="{{$ctrl.getViewButtonSize()}}" is-disabled="$ctrl.item.completed" btn-text="{{($ctrl.item.completed? (\'word.verb.complete\' | translate):(\'word.view\' | translate)) }}"></am-button>\n      </div>\n   </div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("amPicker",{template:'<div id="amPicker"><am-item-manipulator item-template="picker-account-data.component" manipulator-id="Picker"></am-item-manipulator></div>',controller:["PickerService","LanguageService",function(e,t){this.$onInit=function(){var n=window!=window.top;e.$pickerSlider=new $.picker({animationDuration:n?0:400,closeCb:e.closePicker,isRtl:t.isRtl})}}]}),e.controller("PickerAccountDataController",["$timeout","$translate","$window","filterFilter","PageService","PickerService","LanguageService",function(e,t,n,a,r,i,o){var s=this,l=function(){s.pickerError=""};s.showFAQ=function(){var e=o.getCurrentLanguage();"zh_CN"===e||"zh_TW"===e?n.open("https://www.interactivebrokers.com.hk/cn/index.php?f=46352&article=35812801","faq"):n.open("https://www.interactivebrokers.com.hk/en/index.php?f=46352&article=35812801","faq")};var c=function(e,t){!t||s.pickerRules.isMultiSelect||!angular.isUndefined(e.parent)&&"APPLICANT"===e.parent.pickerCustomerType||(s.selectedEntries={}),t?s.selectedEntries[e.id]={entry:e,selected:"full"}:delete s.selectedEntries[e.id]},u=function(e){s.selectedEntries[e.id]={entry:e,selected:"partial"}},d=function(e){for(var t=!1,n=!1,a=e.length>0,r=0;r<e.length;++r){var i=e[r];if(i.isIsolatedSelection||(t=!0),s.isEntryDisabled(i)||(n=!0),0!==i.subEntries.length){var o=void 0,l=!1;if(i.subEntries.length>1)for(var d=0;d<i.subEntries.length;++d){var p=s.isEntrySelected(i.subEntries[d]);p||(a=!1),angular.isUndefined(o)||p===o||(l=!0),o=p}else l=(o=s.isEntrySelected(i.subEntries[0]))&&!s.pickerRules.isMultiSelect;l?u(i):c(i,o)}else s.isEntrySelected(i)||i.isIsolatedSelection||(a=!1)}s.allSelected=a,s.selectAllAllowed=s.pickerRules.isMultiSelect&&t&&n},p=function(e){for(var t=e.SORTER,n=[],r=s.getColumnOrderingPreference(),i=0;i<r.length;++i){var o=r[i],l=a(t.sorters,{id:o})[0];angular.isDefined(l)&&n.push(l)}t.sorters=n},g=function(e){var t=s.$itemManipulator.services.SORTER;return a(t.sorters,{id:e})[0]},f=function(e){l(),function(e){var t=s.isEntrySelected(e);c(e,!t)}(e);for(var t=s.isEntrySelected(e),n=0;n<e.subEntries.length;++n)c(e.subEntries[n],t);d(s.$itemManipulator.itemControl.getEntries())};this.$onInit=function(){i.initialize(this.$itemManipulator.itemControl),this.filterOptionMapping={},this.filterOptionMapping.customerType="customerType.",this.filterOptionMapping.accountStatus="account.state.",this.pickerError="",this.selectedEntries={},this.pickerRules={},this.pickerPreferences={},this.allSelected=!1,this.isDummyEntry=i.isDummyEntry,this.isPageLoading=r.isPageLoading,this.getEntryDisplay=function(e){var t=s.getColumnOrderingPreference();return"accountVan"===t[0]?i.getEntryDisplay(e):e[t[0]]},this.$itemManipulator.itemHooks.load.push(function(e){l(),s.pickerRules=e.manipulator.rules,s.pickerPreferences=e.manipulator.preferences,s.selectedEntries={};for(var t=0;t<e.manipulator.selected.length;++t)c(e.manipulator.selected[t],!0);p(e.manipulator.services),d(e.entries)}),this.$itemManipulator.itemHooks.update.push(function(e){l(),p(e.manipulator.services),d(e.entries)}),this.$itemManipulator.itemHooks.reset.push(function(e){p(e.manipulator.services)}),this.getTablePreference=function(){return s.pickerPreferences.pickerColumns},this.getColumnOrderingPreference=function(){return s.pickerPreferences.pickerColumnOrdering},this.isColumnEnabled=function(e){var t=this.getTablePreference();return!angular.isUndefined(t)&&!angular.isUndefined(t[e])&&t[e].enabled},this.numEnabledColumns=function(){var e=0,t=this.getTablePreference();for(var n in t)t.hasOwnProperty(n)&&t[n].enabled&&++e;return e},this.toggleSort=function(e){var t=g(e);angular.isDefined(t)&&this.$itemManipulator.toggleSort(t)},this.getSortClass=function(e){var t=g(e);if(angular.isUndefined(t))return"";var n="header";return"DESCENDING"===t.state?n+=" headerSortDown":"ASCENDING"===t.state&&(n+=" headerSortUp"),n},this.switchTiers=function(e,t){var n={tierDirection:e,tierEntryId:t.id};this.$itemManipulator.itemControl.customUpdate("MULTITIER",n)},this.toggleSelectAll=function(){s.allSelected=!s.allSelected;for(var e=0;e<s.$itemManipulator.itemControl.getEntries().length;++e){var t=s.$itemManipulator.itemControl.getEntries()[e];t.isIsolatedSelection?c(t,!1):this.canBeSelected(t)&&c(t,s.allSelected);for(var n=0;n<t.subEntries.length;++n)c(t.subEntries[n],s.allSelected)}d(s.$itemManipulator.itemControl.getEntries())},this.entryClicked=function(e){this.isEntryDisabled(e)||(this.canBeSelected(e)?f(e):this.specialAction(e))},this.entryIconClicked=function(e){this.isEntryDisabled(e)||(this.canBeSelected(e)?f(e):this.pickerRules.isMultiSelect&&e.subEntries.length>0?f(e):this.specialAction(e))},this.specialAction=function(e){this.isEntryDisabled(e)||(e.subEntries.length?function(e){angular.isUndefined(e.showSubEntries)&&(e.showSubEntries=!1),e.showSubEntries=!e.showSubEntries}(e):e.isMultiTiered&&this.switchTiers("down",e))},this.isEntrySelected=function(e){return!angular.isUndefined(this.selectedEntries[e.id])&&"full"===this.selectedEntries[e.id].selected},this.isEntryPartiallySelected=function(e){return!angular.isUndefined(this.selectedEntries[e.id])&&"partial"===this.selectedEntries[e.id].selected},this.isEntryDisabled=function(e){var t=this.isSelectionActive();if(e.isIsolatedSelection)return!this.isEntrySelected(e)&&!this.isEntryPartiallySelected(e)&&t;if(this.pickerRules.isMultiSelect&&t&&this.pickerRules.maxSelections<=Object.keys(this.selectedEntries).length)return this.pickerError="maximumReached",!this.isEntrySelected(e);if(t)for(var n in this.selectedEntries)if(this.selectedEntries.hasOwnProperty(n)){var a=this.selectedEntries[n];if(a.entry.isIsolatedSelection)return!(!angular.isUndefined(e.parent)&&this.pickerRules.isMultiSelect)||a.entry.id!==e.parent.id}return!1},this.canBeSelected=function(e){return!e.isTierAccessEntry&&("APPLICANT"===e.pickerCustomerType||(!e.isSubEntry||"APPLICANT"!==e.parent.pickerCustomerType)&&0===e.subEntries.length)},this.isSelectionActive=function(){return!angular.equals({},this.selectedEntries)},this.showSelectedAccounts=function(){if(!s.isSelectionActive())return!1;var e=s.$itemManipulator.getFilterService();return angular.isDefined(e)&&angular.isDefined(e.filters.pickerText)},this.pickerSubmit=function(){if(s.pickerRules.allowNoSelection||0!==Object.keys(this.selectedEntries).length)if(s.pickerRules.isMultiSelect&&this.pickerRules.maxSelections<Object.keys(this.selectedEntries).length)this.pickerError="maximumExceeded";else{var e=[];for(var t in this.selectedEntries)if(this.selectedEntries.hasOwnProperty(t)){var n=this.selectedEntries[t].entry;i.isDummyEntry(n)||e.push(n)}i.updatePicker(e)}else this.pickerError="noSelection"},this.pickerReset=function(){l(),this.selectedEntries={},this.allSelected=!1,this.$itemManipulator.itemControl.reset()},s.isPickerClosable=function(){return""!==r.getPagePath()}}}]),e.component("pickerAccountData",{require:{$itemManipulator:"^^amItemManipulator"},template:n(336),controller:"PickerAccountDataController"}),e.directive("pickerEntryIcon",function(){return{restrict:"E",template:function(e,t){var n="";return n+='<i ng-if="!$ctrl.isEntryDisabled('+t.pickerEntry+") && !"+t.pickerEntry+'.isTierAccessEntry" class="fa-lg" ',n+='ng-class="{',n+=" 'far fa-circle' : !$ctrl.isEntryPartiallySelected("+t.pickerEntry+") && !$ctrl.isEntrySelected("+t.pickerEntry+") && !$ctrl.pickerRules.isMultiSelect, ",n+=" 'far fa-check-circle' : $ctrl.isEntrySelected("+t.pickerEntry+") && !$ctrl.pickerRules.isMultiSelect, ",n+=" 'fa fa-circle' : $ctrl.isEntryPartiallySelected("+t.pickerEntry+") && !$ctrl.pickerRules.isMultiSelect, ",n+=" 'far fa-square' : !$ctrl.isEntryPartiallySelected("+t.pickerEntry+") && !$ctrl.isEntrySelected("+t.pickerEntry+") && $ctrl.pickerRules.isMultiSelect, ",n+=" 'fa fa-check' : $ctrl.isEntrySelected("+t.pickerEntry+") && $ctrl.pickerRules.isMultiSelect, ",n+=" 'far fa-minus-square' : $ctrl.isEntryPartiallySelected("+t.pickerEntry+") && $ctrl.pickerRules.isMultiSelect ",n+=' }"></i>',n}}}),e.directive("pickerActionIcon",function(){return{restrict:"E",template:function(e,t){var n="";return n+='<i class="fa fa-lg pull-right text-gray margin-top-5" ',n+='ng-class="{',n+=" 'fa-chevron-right' : "+t.pickerEntry+".subEntries.length > 0 && !"+t.pickerEntry+".showSubEntries, ",n+=" 'fa-chevron-down' : "+t.pickerEntry+".subEntries.length > 0 && "+t.pickerEntry+".showSubEntries, ",n+=" 'fa-sitemap' : "+t.pickerEntry+".isMultiTiered ",n+=' }"></i>',n}}}),e.component("amFormPicker",{require:{ngModelCtrl:"ngModel"},bindings:{pickerSelections:"=ngModel",labelText:"@",buttonText:"@?",pickerSource:"@",modelListener:"&?",maxEntryCount:"<?",forceReload:"<?",name:"@?"},template:function(){var e="";return e+='<div class="form-group">',e+='<div class="row">',e+='<div class="col-xs-12 col-sm-12 col-md-6 col-lg-4">',e+='<label class="control-label">{{$ctrl.labelText}}</label>',e+="</div>",e+='<div class="col-xs-12 col-sm-12 col-md-6 col-lg-4">',e+='<picker-selection-label picker-selections="$ctrl.pickerSelections"></picker-selection-label>',e+='<am-picker-button ng-model="$ctrl.pickerSelections" model-listener="$ctrl.onModelChange()" picker-source="{{ $ctrl.pickerSource }}" button-text="{{ $ctrl.buttonText }}" force-reload="$ctrl.forceReload" name="{{$ctrl.name}}"></am-picker-button>',e+="</div>",e+="</div>",e+="</div>",e},controller:["PickerService",function(e){var t=this;this.$onInit=function(){this.maxEntryCount=this.maxEntryCount||100,this.onModelChange=function(){t.ngModelCtrl.$setViewValue(t.pickerSelections)},this.ngModelCtrl.$viewChangeListeners.push(function(){t.modelListener&&t.modelListener()})}}]}),e.component("amPickerButton",{require:{ngModelCtrl:"ngModel"},bindings:{pickerSelections:"=ngModel",modelListener:"&?",isDisabled:"&?",buttonText:"@?",pickerSource:"@",forceReload:"<?",classes:"<?",name:"@?"},template:function(){var e="";return e+='<button  ng-disabled="$ctrl.isDisabled()" class="btn btn-default" ng-class="$ctrl.classes" type="button" ng-click="!$ctrl.isDisabled() && $ctrl.showPicker()">{{$ctrl.getButtonText()}}</button>',e+='<am-form-error name="{{$ctrl.name}}"></am-form-error>',e},controller:["$translate","ResourceService","PickerService",function(e,t,n){var a=this;this.$onInit=function(){this.isDisabled=this.isDisabled||function(){return!1},this.classes=this.classes||{},this.getButtonText=function(){return this.buttonText||e.instant("picker.addEdit")},this.forceReload||(this.forceReload=!1);var r=[];if(angular.isArray(this.pickerSelections))for(var i=0;i<this.pickerSelections.length;++i)angular.isObject(this.pickerSelections[i])?r.push(this.pickerSelections[i]):r.push({accountId:this.pickerSelections[i],accountVan:this.pickerSelections[i]});this.pickerSelections=r,this.pickerUpdateHook=function(e){a.pickerSelections=e,a.ngModelCtrl.$setViewValue(e),n.closePicker()},this.ngModelCtrl.$viewChangeListeners.push(function(){a.modelListener&&a.modelListener()}),this.showPicker=function(){n.setOnPickerUpdate(this.pickerUpdateHook),(this.forceReload||n.getCurrentSource()!==this.pickerSource)&&(n.$pickerItemControl.setLoadInProgress(!0),t.update(this.pickerSource,{serviceId:"PickerInitializationService",serviceRequest:{selectedEntries:a.pickerSelections}}).then(function(e){n.loadPicker(a.pickerSource)})),n.openPicker()}}}]}),e.component("pickerSelectionLabel",{bindings:{pickerSelections:"<",maxSelectionCount:"<?"},template:function(){var e="";return e+='<label class="control-label">{{$ctrl.getPickerSelectionText()}}</label>',e+='<br ng-if="$ctrl.pickerSelections.length" />',e},controller:["PickerService",function(e){var t=this;t.$onInit=function(){angular.isUndefined(t.maxSelectionCount)&&(t.maxSelectionCount=100),t.getPickerSelectionText=function(){if(t.pickerSelections)return e.getEntryList(t.pickerSelections,t.maxSelectionCount)}}}]})}},function(e,t){e.exports='<div class="sb-slidebar sb-right sb-style-overlay noprint">\n    <div class="account-panel">\n        <div class="row">\n            <div class="col">\n                <div class="account-panel-header">\n                    <div class="row align-items-center">\n                        <div class="col-10 col-sm-9">\n                            <h5>{{\'picker.header\' | translate}}</h5>\n                        </div>\n                        <div class="col-2 col-sm-3">\n                            <div ng-show="$ctrl.isPickerClosable()" class="btn-close">\n                                <a href="javascript:void(0);" target="_self" class="btn-icon sb-close">\n                                    <i class="fas fa-times fa-lg"></i>\n                                </a>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                \n                <div class="account-panel-filters">\n                    <div class="row align-items-center">\n                        <div class="col-8 col-sm-9">\n                            <freeform-text-filter filter-id="pickerText" placeholder-key-prefix="data.filter.option.placeholder."></freeform-text-filter>\n                        </div>\n                        <div class="col-4 col-sm-3">\n                            <div class="btn-group-right">\n                                <ul class="btn-icons">\n                                    <dropdown-filters filter-key-prefix="data.filter.name." option-key-prefix-map="$ctrl.filterOptionMapping"></dropdown-filters>\n                                    <table-preference-config preference="$ctrl.getTablePreference()" preference-name="pickerColumns" preference-key-prefix="picker.preference.columns."></table-preference-config>\n                                </ul>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                \n                <div class="account-panel-content">\n                    <div class="account-panel-table">\n                    \n                        <div ng-if="$ctrl.$itemManipulator.manipulator.warnings.length > 0">\n                            <p ng-repeat="warning in $ctrl.$itemManipulator.manipulator.warnings">\n                                <span ng-switch="warning">\n                                    <span ng-switch-when="ipo.warning.faClientPicker" translate="ipo.warning.faClientPicker" translate-compile translate-values="{linkStart: \'<a href=&quot;javascript:void(0);&quot; ng-click=&quot;$ctrl.showFAQ()&quot;>\', linkEnd: \'</a>\', lineBreak: \'<br>\'}"></span>\n                                    <span ng-switch-default>{{ warning | translate }}</span>\n                                </span>\n                            </p>\n                            <br>\n                        </div>\n                        <div ng-if="$ctrl.$itemManipulator.services[\'MULTITIER\'].entryMaster" class="alert alert-warning">\n                            <p translate="picker.instructions.multiTier" translate-values="{ tierMaster: $ctrl.$itemManipulator.services[\'MULTITIER\'].entryMaster.accountId }"></p>\n                        </div>\n                    \n                        <div class="table-responsive">\n                            <table width="100%" cellpadding="0" cellspacing="0" border="0" class="table table-hover tablesorter" id="tableAccounts">\n                                <thead>\n                                    <tr>\n                                        <th width="" align="center" valign="middle" class="sorter-false">&nbsp;</th>\n                                        <th width="" align="center" valign="middle" class="sorter-false">\n                                            <a ng-if="$ctrl.selectAllAllowed" ng-click="$ctrl.toggleSelectAll()" href="javascript:void(0)">\n                                                <i class="far fa-lg" ng-class="{ \'fa-check-square\' : $ctrl.allSelected, \'fa-square\' : !$ctrl.allSelected }"></i>\n                                            </a>\n                                        </th>\n                                        <th ng-if="$ctrl.isColumnEnabled(column)" ng-click="$ctrl.toggleSort(column)" align="left" valign="middle" class="{{$ctrl.getSortClass(column)}}" ng-repeat="column in $ctrl.$itemManipulator.manipulator.preferences.pickerColumnOrdering">\n                                            {{\'data.sorter.name.\' + column | translate}}\n                                        </th>\n                                    </tr>\n                                </thead>\n                                \n                                <tbody ng-repeat="pickerEntry in $ctrl.$itemManipulator.entries">\n                                    <tr ng-class="{ \'active\' : $ctrl.isEntrySelected(pickerEntry), \'disabled\' : $ctrl.isEntryDisabled(pickerEntry) }">                            \n                                        <td ng-click="$ctrl.specialAction(pickerEntry)" align="center" valign="middle">\n                                            <picker-action-icon picker-entry="pickerEntry"></picker-action-icon>\n                                        </td>\n                                        \n                                        <td ng-click="$ctrl.entryIconClicked(pickerEntry)" align="center" valign="middle">\n                                            <picker-entry-icon picker-entry="pickerEntry"></picker-entry-icon>\n                                        </td>\n                                        \n                                        <td ng-click="$ctrl.entryClicked(pickerEntry)" ng-if="$ctrl.isColumnEnabled(columnName)" align="left" valign="middle" ng-repeat="columnName in $ctrl.getColumnOrderingPreference()">\n                                            <ng-switch on="pickerEntry.pickerCustomerType">\n                                                <any ng-switch-when="GROUP|HOUSEHOLD|STL_GROUP" ng-switch-when-separator="|">\n                                                    <ng-switch on="columnName">\n                                                        <span ng-switch-when="accountVan">{{$ctrl.getEntryDisplay(pickerEntry)}}</span>\n                                                        <span ng-switch-when="customerType">{{\'customerType.\' + pickerEntry.pickerCustomerType | translate}}</span>\n                                                        <span ng-switch-default>&nbsp;</span>\n                                                    </ng-switch>\n                                                </any>\n                                                <any ng-switch-default>\n                                                    <ng-switch on="columnName">\n                                                        <span ng-switch-when="accountVan">{{$ctrl.getEntryDisplay(pickerEntry)}}</span>\n                                                        <span ng-switch-when="customerType">{{\'customerType.\' + pickerEntry.pickerCustomerType | translate}}</span>\n                                                        <span ng-switch-when="accountAlias">{{pickerEntry.accountAlias}}</span>\n                                                        <span ng-switch-when="accountTitle">{{pickerEntry.accountTitle}}</span>\n                                                        <span ng-switch-when="status">{{\'account.state.\' + pickerEntry.accountStatus | translate}}</span>\n                                                        <span ng-switch-default>{{pickerEntry[columnName]}}</span>\n                                                    </ng-switch>\n                                                </any>\n                                            </ng-switch>\n                                        </td>\n                                    </tr>\n                                    <tr ng-if="pickerEntry.showSubEntries" ng-repeat="subEntry in pickerEntry.subEntries" class="gray" ng-class="{ \'active\' : $ctrl.isEntrySelected(subEntry), \'disabled\' : $ctrl.isEntryDisabled(subEntry) }">\n                                        <td colspan="2">&nbsp;</td>\n                                        <td ng-click="$ctrl.entryClicked(subEntry)" align="left" valign="middle" class="pl-0 pr-0">\n                                            <picker-entry-icon ng-if="$ctrl.canBeSelected(subEntry)" picker-entry="subEntry" class="pr-5"></picker-entry-icon>{{$ctrl.getEntryDisplay(subEntry)}}\n                                        </td>\n                                        \n                                        <td ng-if="$ctrl.isColumnEnabled(columnName) && columnName !== \'accountVan\'" align="left" valign="middle" ng-repeat="columnName in $ctrl.getColumnOrderingPreference()">\n                                            <ng-switch on="pickerEntry.pickerCustomerType">\n                                                <any ng-switch-when="GROUP|HOUSEHOLD|STL_GROUP" ng-switch-when-separator="|">\n                                                    <ng-switch on="columnName">\n                                                        <span ng-switch-when="accountAlias">{{subEntry.accountAlias}}</span>\n                                                        <span ng-switch-when="status">{{\'account.state.\' + subEntry.accountStatus | translate}}</span>\n                                                        <span ng-switch-default>&nbsp;</span>\n                                                    </ng-switch>\n                                                </any>\n                                                <any ng-switch-default>\n                                                    <span ng-switch-default>&nbsp;</span>\n                                                </any>\n                                            </ng-switch>\n                                        </td>\n                                    </tr>\n                                </tbody>\n                            </table>\n                        </div>\n                    </div>\n                    \n                    <pagination-controls spacing="false"></pagination-controls>\n                    \n                    <div ng-if="$ctrl.pickerError.length">\n                        <br>\n                        <div class="alert alert-danger">\n                            <p>{{\'picker.error.\' + $ctrl.pickerError | translate}}</p>\n                        </div>\n                    </div>\n                    \n                    <br ng-if="!$ctrl.showSelectedAccounts()">\n                    <div ng-if="$ctrl.showSelectedAccounts()" class="account-panel-list">\n                        <p class="title">{{\'selectedAccounts\' | translate}}</p>\n                        <ul>\n                            <li ng-if="selectedEntry.selected === \'full\' && !$ctrl.isDummyEntry(selectedEntry.entry)" ng-repeat="selectedEntry in $ctrl.selectedEntries">\n                                {{$ctrl.getEntryDisplay(selectedEntry.entry)}}\n                            </li>\n                        </ul>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    \n    <div class="panel-btns">\n        <div class="row">\n            <div class="col-12 col-sm-8 order-2 order-sm-1">\n                <div class="panel-btn-left">\n                    <p>\n                        <span ng-if="$ctrl.$itemManipulator.services[\'MULTITIER\'].entryMaster">\n                            <am-button on-click="$ctrl.switchTiers(\'up\', $ctrl.$itemManipulator.services[\'MULTITIER\'].entryMaster)" btn-text="{{\'word.back\' | translate}}"></am-button>\n                        </span>\n                        <am-button on-click="$ctrl.pickerReset()" btn-text="{{\'word.reset\' | translate}}"></am-button>\n                    </p>\n                </div>\n            </div>\n            <div class="col-12 col-sm-4 order-1 order-sm-2">\n                <div class="panel-btn-right">\n                    <p>\n                        <am-button on-click="$ctrl.pickerSubmit()" btn-type="primary" btn-text="{{\'word.continue\' | translate}}" btn-class="btn-continue"></am-button>\n                    </p>\n                </div>\n            </div>\n        </div>\n    </div>\n    \n    <loading-overlay ng-if="$ctrl.$itemManipulator.itemControl.isLoadInProgress() || $ctrl.isPageLoading()"></loading-overlay>\n</div>'},function(e,t){e.exports=function(e){e.component("closeAccountSurveySequence",{template:'<am-dynamic-sequence sequence-source="/AccountManagement/CloseAccountSurvey/Sequence"></am-dynamic-sequence>',controller:function(){this.$onInit=function(){}}})}},function(e,t,n){e.exports=function(e){e.component("impactManageAccount",{template:n(339),controller:["$q","ResourceService","PageService","EntityService","AmConfigurationService",function(t,n,a,r,i){var o=this,s=function(){return t.resolve("restricted")},l=function(){var a=[];return a.push(n.fetch(e.SERVER_PATH+"/AccountEntity/Data").then(function(e){o.accountEntities=e.data.entries||[]}).catch(s).finally(function(){o.accountEntityFetched=!0})),a.push((o.financialInfoFetched=!1,n.fetch(e.SERVER_PATH+"/FinancialInfo").then(function(e){o.financialInfo=e.data.financialInfo,o.financialInfoConfigurable=e.data.configurable}).catch(s).finally(function(){o.financialInfoFetched=!0}))),a.push((o.tradingExchangeProfileFetched=!1,n.fetch(e.SERVER_PATH+"/TradingPermissionProfile").then(function(e){o.selections=e.data.selections,o.isTradingExchangeProfileConfigurable=e.data.configurable}).catch(s).finally(function(){o.tradingExchangeProfileFetched=!0}))),a.push(o.fetchAccountConfiguration()),a.push(o.fetchReportSetting()),t.all(a)};o.$onInit=function(){o.cancelLoading=!1,o.fetchAccountConfiguration=function(){return n.fetch(e.SERVER_PATH+"/AccountConfiguration").then(function(e){o.accountConfig=e.data})},o.fetchReportSetting=function(){return n.fetch(e.SERVER_PATH+"/Reporting/Settings").then(function(e){o.reportSetting=e.data.reportSettings}).catch(s)},o.editAccountEntity=function(e){e.editable&&r.editEntity(e)},a.setOnPageLoad(function(){l().finally(function(){o.cancelLoading||i.processPageRedirect()})})}}]})}},function(e,t){e.exports='<script src="/AccountManagement/script/lib/manageaccount/amManageAccount.js"><\/script>\n\n<section class="panel">\n\t<div class="panel-body">\n\t\t<div class="row">\n\t\t\t<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n\t\t\t\t\x3c!-- \n\t\t\t\t\tAccount Entities\n\t\t\t\t--\x3e\n\t\t\t\t<div class="link-set">\n\t\t\t\t\t<div class="link-row link-icon link-hover" ng-if="$ctrl.accountEntityFetched && $ctrl.accountEntities.length > 0" ng-repeat="accountEntity in $ctrl.accountEntities" ng-click="$ctrl.editAccountEntity(accountEntity)">\n\t\t\t\t\t\t<div class="link-text">\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t<span class="link-label">{{accountEntity | amEntityName}}</span>\n\t\t\t\t\t\t\t\t<span class="link-sublabel" ng-repeat="type in accountEntity.associationTypes">{{\'association.type.\' + type | translate }}{{!$last ? \', \' : \'\'}}</span>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="btn-group-right">\n\t\t\t\t\t\t\t<ul class="btn-icons">\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<am-button btn-type="icon" btn-icon="fas fa-angle-right"></am-button>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t\x3c!-- \n\t\t\t\t\t\tFinancial Info\n\t\t\t\t\t--\x3e\n\t        \t\t<financial-info-panel ng-if="$ctrl.financialInfoFetched && $ctrl.financialInfo" financial-info="$ctrl.financialInfo" configurable="$ctrl.financialInfoConfigurable"></financial-info-panel>\n\t        \t\t\x3c!-- \n\t        \t\t\tTrading Permission Profile\n\t        \t\t--\x3e\n        \t\t\t<trading-exchange-profile-panel ng-if="$ctrl.tradingExchangeProfileFetched && $ctrl.selections && $ctrl.isTradingExchangeProfileConfigurable" selections="$ctrl.selections" configurable="$ctrl.isTradingExchangeProfileConfigurable"></trading-exchange-profile-panel>\n\t        \t\t\x3c!-- \n\t        \t\t\tREPORTING \n\t        \t\t--\x3e\n\t        \t\t<reporting-configuration-panel ng-if="$ctrl.reportSetting" report-settings="$ctrl.reportSetting" refresh-settings="$ctrl.fetchReportSetting()"></reporting-configuration-panel>\n\t\t\t\t\t\x3c!-- \n\t\t\t\t\t\tAccount Configuration \n\t\t\t\t\t--\x3e\n        \t\t\t<account-configuration-panel ng-if="$ctrl.accountConfig" account-config="$ctrl.accountConfig" refresh-configurations="$ctrl.fetchAccountConfiguration()" refresh-all="$ctrl.fetchAccountConfiguration(\'T\')"></account-configuration-panel>\n        \t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</section>'},function(e,t,n){e.exports=function(e){e.component("impactUserSetting",{template:n(341),controller:"SettingsController"})}},function(e,t){e.exports='<section class="panel">\n\t<div class="panel-body">\n\t\t<div class="row">\n\t\t\t<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n\t\t\t\t<div class="link-set">\n\t\t\t\t\t<div class="link-row link-icon link-hover" ng-repeat="setting in $ctrl.settings" ng-click="$ctrl.settingClick(setting)">\n\t\t\t\t\t\t<div class="link-text">\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t<span class="link-label">{{ \'settings.\' + setting.groupId + \'.\' + setting.id | translate}}</span>\n\t\t\t\t\t\t\t\t<span class="link-sublabel" ng-bind-html="::setting.value | renderHTML"></span>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="btn-group-right">\n\t\t\t\t\t\t\t<ul class="btn-icons">\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<am-button btn-type="icon" btn-icon="fas fa-angle-right"></am-button>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</section>'},function(e,t,n){e.exports=function(e){e.component("financialInfoSettings",{template:n(343),controller:["$q","ResourceService","PageService","AmConfigurationService",function(e,t,n,a){var r=this;this.$onInit=function(){this.fetchFinancialInfo=function(){return r.financialInfoFetched=!1,t.fetch(AM_APP_ROOT+"/FinancialInfo").then(function(e){r.financialInfo=e.data.financialInfo,r.financialInfoConfigurable=e.data.configurable})},this.cancelLoading=!1,n.setOnPageLoad(function(){e.resolve(r.fetchFinancialInfo()).finally(function(){r.cancelLoading||(r.financialInfoFetched=!0,a.processPageRedirect())})})},this.$onDestroy=function(){this.cancelLoading=!0}}]})}},function(e,t){e.exports='<div class="row" >\t\n\t\x3c!-- Financial Info Details --\x3e\n\t <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n\t\t<financial-info-panel ng-if="$ctrl.financialInfoFetched && $ctrl.financialInfo" financial-info="$ctrl.financialInfo" configurable="$ctrl.financialInfoConfigurable"></financial-info-panel>        \n\t </div>  \n</div>'},function(e,t,n){e.exports=function(e){e.component("profileSettings",{template:n(345),controller:["$q","$translate","ResourceService","PageService","AmConfigurationService","ModalService","NavigationService",function(e,t,n,a,r,i,o){var s=this;s.addEntity=function(){s.accountEntityConfig.allowedAssociationsForEntityCreation;var e={title:t.instant("page.title.AddAccountEntity"),templateUrl:"account-entity-type-selection-modal.component",modalData:{allowedEntityTypes:["INDIVIDUAL","LEGAL_ENTITY"],allowedAssociationTypes:s.allowedAssociationTypes}};i.openModal(e).then(function(e){if(e&&e.associationType&&e.entityType){var t={id:"AddAccountEntity",path:"/entity.webapp/sequences/trustownershipentities/trustOwnershipEntitySequence.html",pageData:{sequenceType:"/AddProfileEntity/"+e.entityType+"/"+e.associationType},skipFetch:!0};o.navigate(t)}})},this.$onInit=function(){this.fetchAccountEntityConfig=function(){return s.accountEntityFetched=!1,n.fetch(AM_APP_ROOT+"/AccountEntity").then(function(e){s.accountEntityConfig=e.data,s.allowedAssociationTypes=s.accountEntityConfig.allowedAssociationsForEntityCreation||[]})},this.cancelLoading=!1,a.setOnPageLoad(function(){e.resolve(s.fetchAccountEntityConfig()).finally(function(){s.accountEntityFetched=!0,s.cancelLoading||r.processPageRedirect()})})},this.$onDestroy=function(){this.cancelLoading=!0}}]})}},function(e,t){e.exports='<div class="row" >\n    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n        \x3c!-- ACCOUNT PROFILE --\x3e\n        <section ng-if="$ctrl.accountEntityFetched" class="panel">\n            <div class="panel-heading">\n                <span class="heading">{{\'manageAccount.header.profile\' | translate}}</span>\n                <span class="btn-group-right">\n                    <am-button ng-if="$ctrl.allowedAssociationTypes.length > 0" btn-type="icon" on-click="$ctrl.addEntity()" btn-icon="fa-plus" tooltip-text="{{\'word.add\' | translate}}"></am-button>\n                    <am-help ng-if="!$ctrl.accountEntityConfig.employeeTrack" sub-id="AccountProfile"></am-help>\n                </span>\n            </div>\n            <div class="panel-body panel-padding">\n                <am-item-manipulator ng-if="::$ctrl.accountEntityConfig" item-template="account-entity-data.component" manipulator-id="AccountEntity"></am-item-manipulator>\n                <p ng-if="::!$ctrl.accountEntityConfig">{{\'page.error.AccountEntity.notAccessible\' | translate}}</p>\n            </div>\n        </section>\n    </div>  \n</div>'},function(e,t,n){e.exports=function(e){e.component("reportingSettings",{bindings:{reportSettings:"<",refreshSettings:"&"},template:n(347),controller:["$filter","NavigationService","NavigationAction",function(e,t,n){var a=this;a.$onInit=function(){a.isReportingLoading=!1,a.configure=function(r){var i;"FLEX_WEB_SERVICES"===r.key?i={id:"FlexWebService",title:e("translate")("page.title.FlexWebService"),path:"template/modal/reporting/settings/flexwebservice.html",skipFetch:!0,navigateAction:n.MODAL}:"THIRD_PARTY_SERVICES"===r.key?i={id:"ThirdPartyServices",title:e("translate")("page.title.ThirdPartyServices"),path:"template/modal/reporting/settings/thirdpartyservices.html",skipFetch:!0,navigateAction:n.MODAL}:"DATA_FEEDS"===r.key?i={id:"DataFeeds",title:e("translate")("page.title.DataFeeds"),path:"template/modal/reporting/settings/dataFeeds.html",skipFetch:!0,navigateAction:n.MODAL}:"TRADER_ID"===r.key?i={id:"TraderId",title:e("translate")("page.title.TraderId"),path:"template/modal/reporting/settings/traderid.html",skipFetch:!0,navigateAction:n.MODAL}:"FTP"===r.key?i={id:"FTP",title:e("translate")("page.title.FTP"),path:"template/modal/reporting/settings/ftp.html",skipFetch:!0,navigateAction:n.MODAL}:"PGP_KEY"===r.key?i={id:"PgpKey",title:e("translate")("page.title.PgpKey"),path:"template/modal/reporting/settings/pgpKey.html",skipFetch:!0,navigateAction:n.MODAL}:"MNB_LOGIN"===r.key?i={id:"MnbLogin",title:e("translate")("page.title.MnbLogin"),path:"template/modal/reporting/settings/mnbLogin.html",skipFetch:!0,navigateAction:n.MODAL}:"SMS_ALERTS"===r.key&&(i={id:"SmsAlerts",title:e("translate")("page.title.SmsAlerts"),path:"template/page/reporting/settings/smsAlerts.html",skipFetch:!0}),t.navigate(i).then(function(e){a.isReportingLoading=!0,a.refreshSettings().finally(function(){a.isReportingLoading=!1})})}}}]})}},function(e,t){e.exports='<loading-overlay ng-show="$ctrl.isReportingLoading"></loading-overlay>  \r\n <div ng-repeat="option in $ctrl.reportSettings">\r\n    <div class="link-row link-hover"  ng-click="$ctrl.configure(option)" >\r\n        <span class="link-label w-100" >\r\n            <span ng-if="option.disabled !== \'true\'">\r\n                <a href="javascript:void(0)">{{\'manageAccount.reporting.\' + option.key | translate}}</a>\r\n            </span>        \r\n            <span class="pull-right" ng-if="option.value==\'true\' && option.key !== \'THIRD_PARTY_SERVICES\'">\r\n                {{\'word.enabled\' | translate}}\r\n            </span>\r\n            <span class="pull-right" ng-if="option.key === \'MNB_LOGIN\'|| option.key === \'FTP\' || option.key === \'PGP_KEY\' || (option.value !=\'false\' && option.key === \'THIRD_PARTY_SERVICES\')">\r\n                {{option.value}}        \r\n            </span>\r\n        </span>\r\n    </div>      \r\n    <hr class="m-0 p-0">    \r\n</div>\r\n\r\n\r\n\r\n'},function(e,t,n){e.exports=function(e){e.component("userAccessRightsSettings",{bindings:{userList:"<",configurable:"<"},template:n(349),controller:["NavigationService",function(e){var t=this;t.$onInit=function(){t.configure=function(){e.navigate({id:"UarConfig",path:"template/page/uar/uarConfig.html",skipFetch:!0})}}}]})}},function(e,t){e.exports='<div >\r\n    <span ng-if="!$ctrl.configurable">\r\n        <h6>{{\'manageAccount.header.accessRights\' | translate}} </h6>\r\n    </span>            \r\n    <h6 ng-if="$ctrl.configurable" class="link-title">{{\'manageAccount.header.uar\' | translate}}</h6>\r\n    <div class="link-container">\r\n        <div class="link-row link-hover" ng-click="$ctrl.configure(option)">\r\n            <div class="link-text">\r\n                <p>\r\n                      <span class="link-label">{{\'manageAccount.header.accessRights\' | translate}}</span>\r\n                </p>\r\n            </div>\r\n        </div>    \r\n    </div>    \r\n</div>    \r\n'},function(e,t,n){e.exports=function(e){e.component("unifiedSettings",{template:n(351),controller:["$q","$translate","CONTENT_HOST","NavigationAction","amEntityNameFilter","ModalService","ResourceService","PageService","NavigationService","AmConfigurationService",function(e,t,n,a,r,i,o,s,l,c){var u=this;u.getImageName=function(e){return"AdditionalAccount"===e.id?"settings-icon-open-account.svg":"TradingPermissions"===e.id?"settings-icon-trading-permissions.svg":"MarketData"===e.id?"settings-icon-market-data.svg":"Profile"===e.id?"settings-icon-profile.svg":"FriendReferral"===e.id?"settings-icon-refer-a-friend.svg":"Password"===e.id?"settings-icon-password.svg":"DebitCard"===e.id?"settings-icon-debit-card.svg":"SYEP"===e.id?"settings-icon-syep.svg":"MpSearchConfig"===e.id?"settings-icon-marketplace.svg":"WhiteBranding"===e.id?"settings-icon-white-branding.svg":"UarConfig"===e.id?"settings-icon-user-access.svg":""};var d=function(){return e.resolve("restricted")};this.fetchPrimaryEntities=function(){return u.accountEntityFetched=!1,o.fetch(AM_APP_ROOT+"/AccountEntity/PrimaryEntities").then(function(e){u.primaryEntities=e.data.primaryEntities}).catch(d).finally(function(){u.accountEntityFetched=!0})},this.viewAccountEntity=function(e){var t={title:r(e),templateUrl:"account-entity-modal.component",dialogClass:"modal-lg",modalData:{accountEntity:e}};i.openModal(t)},this.$onInit=function(){this.contentHost=n,u.getSettingName=function(e){if(angular.isUndefined(e)||angular.isUndefined(e.pageEntry))return"";var n=e.pageEntry;return""===n.title||angular.isUndefined(n.title)?t.instant("page.title."+n.id):n.title},this.fetchSettings=function(){return o.fetch(AM_APP_ROOT+"/UnifiedSettings/Settings").then(function(e){u.unifiedSettings=e.data.unifiedSettings||{},u.hasUserSettings=angular.isDefined(u.unifiedSettings.userSettingsPartition)&&u.unifiedSettings.userSettingsPartition.filter(function(e){return e.settings.length>0}).length>0,u.primaryAccountSettings=e.data.unifiedSettings.primaryAccountSettings||[],u.primaryUserSettings=e.data.unifiedSettings.primaryUserSettings||[]}).catch(d).finally(function(){u.settingsFetched=!0})},this.settingClick=function(e,t){if(t&&(e.pageEntry.pageData=e.pageEntry.pageData||{},e.pageEntry.pageData.hidePickerSelections=!0,s.getActivePickerSelections().length>0)){var n=s.getActivePickerSelections()[0];s.getCurrentPage().serverParams.noPickerClear="T",s.getCurrentPage().serverParams.autoSelect=n.id}e.pageEntry.navigateAction===a.MODAL?l.navigate(e.pageEntry).then(function(e){e&&u.fetchSettings()}):l.navigate(e.pageEntry)},this.profileClick=function(e){for(var t=0;t<e.length;t++)if("Profile"===e[t].id){u.settingClick(e[t],!1);break}},this.fetchReportSetting=function(){return o.fetch(AM_APP_ROOT+"/Reporting/Settings").then(function(e){u.reportSetting=e.data.reportSettings}).catch(d)},this.openFeesReview=function(){var e={title:t.instant("clientFees.heading"),templateUrl:"fees-review-modal.component",dialogClass:"modal-lg"};i.openInfoModal(e)},this.cancelLoading=!1;s.setOnPageLoad(function(){var t;(t=[],t.push(u.fetchPrimaryEntities()),t.push(u.fetchReportSetting()),t.push(u.fetchSettings()),e.all(t)).finally(function(){u.cancelLoading||c.processPageRedirect()})})},this.$onDestroy=function(){this.cancelLoading=!0}}]})}},function(e,t){e.exports=' <script src="/AccountManagement/script/lib/taxForms/amTaxForm.js"><\/script>\r\n <div class="wrapper" ng-if="$ctrl.settingsFetched">\r\n    <div class="row">\r\n        <div class="col-12 col-sm-12 col-md-12" ng-class="{ \'col-lg-6\' : $ctrl.hasUserSettings, \'col-lg-12\' : !$ctrl.hasUserSettings }">         \r\n            <section class="panel settings-icons d-block d-lg-none">\r\n                <div class="panel-body">\r\n                    <div class="row">\r\n                        <div class="col">\r\n                            <div class="settings-icons">\r\n                                <div class="row">\r\n                                    <div class="col-6 col-sm-3" ng-repeat="primarySetting in $ctrl.primaryAccountSettings | limitTo:4">\r\n                                        <div class="btn-setting" ng-click="$ctrl.settingClick(primarySetting, false)">\r\n                                            <div class="setting-icon">\r\n                                                <img ng-src="{{\'https://\' + $ctrl.contentHost + \'/images/am/\' + $ctrl.getImageName(primarySetting)}}" border="0" />\r\n                                            </div>\r\n                                            <div class="setting-text">\r\n                                                <h6>{{\'settings.primary.\' + primarySetting.id + \'.label\' | translate}}</h6>\r\n                                                <p>{{\'settings.primary.\' + primarySetting.id +\'.description\' | translate}}</p>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class="col-6 col-sm-3" ng-repeat="primarySetting in $ctrl.primaryUserSettings">\r\n                                        <div class="btn-setting" ng-click="$ctrl.settingClick(primarySetting, true)">\r\n                                            <div class="setting-icon">\r\n                                                <img ng-src="{{\'https://\' + $ctrl.contentHost + \'/images/am/\' + $ctrl.getImageName(primarySetting)}}" border="0" />\r\n                                            </div>\r\n                                            <div class="setting-text">\r\n                                                <h6>{{\'settings.primary.\' + primarySetting.id + \'.label\' | translate}}</h6>\r\n                                                <p>{{\'settings.primary.\' + primarySetting.id +\'.description\' | translate}}</p>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <section class="panel settings-account" ng-class="{ \'br-0\' : !$ctrl.hasUserSettings }">\r\n                <div class="panel-body panel-padding">\r\n                    <div class="row">\r\n                        <div class="col-12 col-sm-12 col-md-12 col-lg-12">\r\n                            <h6 ng-if="$ctrl.hasUserSettings" class="setting-title">\r\n                                <span>{{\'user.menu.ManageAccount\'| translate}}</span>\r\n                                <span class="btn-group-right"><am-help sub-id="AccountSetting"></am-help></span>\r\n                            </h6>\r\n                            <div class="settings-icons d-none d-lg-block">\r\n                                <div class="row">\r\n                                    <div class="col-6 col-sm-3 col-lg-6" ng-repeat="primarySetting in $ctrl.primaryAccountSettings | limitTo:4">\r\n                                        <div class="btn-setting" ng-click="$ctrl.settingClick(primarySetting, false)">\r\n                                            <div class="setting-icon">\r\n                                                <img ng-src="{{\'https://\' + $ctrl.contentHost + \'/images/am/\' + $ctrl.getImageName(primarySetting)}}" border="0" />\r\n                                            </div>\r\n                                            <div class="setting-text">\r\n                                                <h6>{{\'settings.primary.\' + primarySetting.id + \'.label\' | translate}}</h6>\r\n                                                <p>{{\'settings.primary.\' + primarySetting.id +\'.description\' | translate}}</p>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>    \r\n                            <div class="row">        \r\n                                <div class="col-12" ng-repeat="group in $ctrl.unifiedSettings.accountSettingsPartition" ng-if="group.settings !== undefined && (group.settings.length > 0 ||  group.groupId === \'REPORTING_CONFIGURATION\' || group.groupId === \'ACCOUNT_PROFILE\')"> \r\n                                    <h6 ng-if="group.groupId === \'ALL_CLIENT_CONFIGURATION\'" class="link-title pb-2">{{\'settings.group.clientSetting\' | translate}}</h6>\r\n                                    <h6 ng-if="group.groupId !== \'ALL_CLIENT_CONFIGURATION\' && group.groupId !== \'CLIENT_SPECIFIC_CONFIGURATION\'" class="link-title">{{\'settings.group.\' + group.groupId | translate}}</h6>\r\n                                    <div ng-if="group.groupId === \'ALL_CLIENT_CONFIGURATION\' || group.groupId === \'CLIENT_SPECIFIC_CONFIGURATION\'">\r\n                                        <h6  class="link-title text-secondary">{{\'settings.group.\' + group.groupId | translate}}</h6>\r\n                                        <hr class="m-0 p-0">\r\n                                    </div>    \r\n                                    <div class="link-container">\r\n                                        \x3c!--  Merge Account Profile Configurations with Additional Account Details  --\x3e\r\n                                        <div ng-if="group.groupId === \'ACCOUNT_PROFILE\'">\r\n                                            <div class="link-row" ng-if="::$ctrl.unifiedSettings.customerType"><span class="w-100"><span class="link-label">{{\'accountConfig.label.customerType\' | translate}}</span><span class="link-sublabel pull-right">{{$ctrl.unifiedSettings.customerType | translate}}</span></span></div>\r\n                                            <hr class="m-0 p-0" ng-if="::$ctrl.unifiedSettings.customerType">    \r\n                                            <div class="link-row" ng-if="::$ctrl.unifiedSettings.jointAccountType"><span class="w-100"><span class="link-label">{{\'accountConfig.label.jointAccountType\' | translate}}</span><span class="link-sublabel pull-right">{{\'jointType.\' + $ctrl.unifiedSettings.jointAccountType | translate}}</span></span></div>\r\n                                            <hr class="m-0 p-0" ng-if="::$ctrl.unifiedSettings.jointAccountType">\r\n                                            <div class="link-row" ng-if="::$ctrl.unifiedSettings.legalResidence"><span class="w-100"><span class="link-label">{{\'accountConfig.label.legalResidence\' | translate}}</span><span class="link-sublabel pull-right">{{::$ctrl.unifiedSettings.legalResidence}}</span></span></div>\r\n                                            <hr class="m-0 p-0" ng-if="::$ctrl.unifiedSettings.legalResidence" >\r\n                                                    \r\n                                            <div ng-if="$ctrl.accountEntityFetched && !$ctrl.unifiedSettings.ndBrokerClient && $ctrl.primaryEntities.length > 0" >    \r\n                                                <div ng-repeat="primaryEntity in $ctrl.primaryEntities">\r\n                                                    <div class="link-row">\r\n                                                        <div class="link-text">\r\n                                                            <p class="col-6 m-0 p-0">        \r\n                                                                <a href="javascript:void(0)" ng-click="$ctrl.profileClick(group.settings)">{{\'word.profile\'| translate}}</a>\r\n                                                            </p>\r\n                                                            <div class="col-6 m-0 p-0 text-right">\r\n                                                                <p class="link-sublabel"><a href="javascript:void(0)" ng-click="$ctrl.viewAccountEntity(primaryEntity)">{{primaryEntity | amEntityName}}</a></p>\r\n                                                                <p class="link-sublabel" ng-repeat="type in primaryEntity.associationTypes"> {{\'association.type.\' + type | translate }}{{!$last ? \', \' : \'\'}} </p>\r\n                                                            </div>    \r\n                                                        </div>\r\n                                                    </div>    \r\n                                                    <hr class="m-0 p-0">\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div ng-repeat="setting in group.settings">\r\n                                            <div ng-if="setting.id != \'Profile\'" class="link-row link-hover" ng-click="$ctrl.settingClick(setting, false)">    \r\n                                                <span class="link-label w-100">\r\n                                                      <span><a href="javascript:void(0)" >{{ ::$ctrl.getSettingName(setting) }}</a></span>\r\n                                                      <span class="pull-right" ng-if="setting.value !== \'\'">{{setting.value}}</span>\r\n                                                </span>\r\n                                            </div>    \r\n                                            <hr class="m-0 p-0">\r\n                                        </div>\r\n                                        \x3c!--  Merge Reporting Settings with Reporting Configuration --\x3e\r\n                                        <div ng-if="group.groupId === \'REPORTING_CONFIGURATION\' && $ctrl.reportSetting.length > 0">\r\n                                            <reporting-settings report-settings="$ctrl.reportSetting" refresh-settings="$ctrl.fetchReportSetting()"></reporting-settings>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n        </div>\r\n        <div ng-if="$ctrl.hasUserSettings" class="col-12 col-sm-12 col-md-12 col-lg-6">\r\n            <section class="panel settings-user" >\r\n                <div class="panel-body panel-padding">    \r\n                    <div class="row">\r\n                        <div class="col-12 col-sm-12 col-md-12 col-lg-12">\r\n                            <h6 class="setting-title">\r\n                                <span>{{\'user.menu.Settings\'| translate}}</span>\r\n                                <span class="btn-group-right"><am-help sub-id="UserSetting"></am-help></span>\r\n                            </h6>\r\n                            <div class="settings-icons d-none d-lg-block">    \r\n                            <div ng-repeat="primarySetting in $ctrl.primaryUserSettings" >\r\n                                <div class="row">\r\n                                    <div class="col-6 col-sm-3 col-lg-6" >\r\n                                        <div class="btn-setting" ng-click="$ctrl.settingClick(primarySetting, true)">\r\n                                            <div class="setting-icon">\r\n                                                <img ng-src="{{\'https://\' + $ctrl.contentHost + \'/images/am/\' + $ctrl.getImageName(primarySetting)}}" border="0" />\r\n                                            </div>\r\n                                            <div class="setting-text">\r\n                                                <h6>{{\'settings.primary.\' + primarySetting.id + \'.label\' | translate}}</h6>\r\n                                                <p>{{\'settings.primary.\' + primarySetting.id +\'.description\' | translate}}</p>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>                                    \r\n                                </div>\r\n                            </div>    \r\n                            </div>    \r\n                            <div class="row">\r\n                                <div class="col-12" ng-repeat="group in $ctrl.unifiedSettings.userSettingsPartition" ng-if="group.settings !== undefined && group.settings.length > 0"> \r\n                                    <h6 class="link-title">{{\'settings.group.\' + group.groupId | translate}}</h6>\r\n                                    <div class="link-container">                                                \r\n                                        <div ng-repeat="setting in group.settings">    \r\n                                            <div class="link-row link-hover" ng-click="$ctrl.settingClick(setting, true)">\r\n                                                <span class="link-label w-100">\r\n                                                    <span ><a href="javascript:void(0)" >{{\'settings.\' + group.groupId + \'.\' + setting.id | translate}}</a></span>\r\n                                                    <span class="pull-right" ng-if="setting.value !== \'\'" ng-bind-html="setting.value | renderHTML"></span>\r\n                                                </span>\r\n                                            </div>\r\n                                            <hr class="m-0 p-0">\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div ng-if="::$ctrl.unifiedSettings.advisorInformation">\r\n                                <div class="row">\r\n                                    <div class="col-12">\r\n                                        <h6 class="link-title text-secondary">{{\'settings.group.additionalInfo\' | translate}}</h6>\r\n                                        <br><h6  class="link-title pb-2">{{\'settings.group.advisorInfo\' | translate}}</h6>\r\n                                        <hr class="m-0 p-0">\r\n                                        <div class="link-container">\r\n                                            <div class="link-row" ng-if="::$ctrl.unifiedSettings.advisorInformation.advisorName"><span class="w-100"><span class="link-label">{{\'word.name\' | translate}}</span><span class="link-sublabel pull-right">{{::$ctrl.unifiedSettings.advisorInformation.advisorName}}</span></span></div>\r\n                                            <hr class="m-0 p-0" ng-if="::$ctrl.unifiedSettings.advisorInformation.advisorName">\r\n\r\n                                            <div class="link-row" ng-if="::$ctrl.unifiedSettings.advisorInformation.firmName"><span class="w-100"><span class="link-label">{{\'settings.additionalInfo.firmName\' | translate}}</span><span class="link-sublabel pull-right">{{::$ctrl.unifiedSettings.advisorInformation.firmName}}</span></span></div>\r\n                                            <hr class="m-0 p-0" ng-if="::$ctrl.unifiedSettings.advisorInformation.firmName">\r\n\r\n                                            <div ng-if="::$ctrl.unifiedSettings.advisorInformation.advisorAddress" >\r\n                                                <div class="link-row">\r\n                                                    <div class="link-text">\r\n                                                        <p class="col-6 m-0 p-0">{{\'word.address\' | translate}}</p>\r\n                                                        <div class="col-6 m-0 p-0 text-right">\r\n                                                            <p class="link-sublabel" ng-bind-html="::$ctrl.unifiedSettings.advisorInformation.advisorAddress | amAddress:\'twoLine\' | renderHTML"></p>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                                <hr class="m-0 p-0">\r\n                                            </div>\r\n\r\n                                            <div ng-if="::$ctrl.unifiedSettings.advisorInformation.phoneNumbers.length" ng-repeat="phoneNumber in ::$ctrl.unifiedSettings.advisorInformation.phoneNumbers">\r\n                                                <div class="link-row"><span class="w-100"><span class="link-label">{{\'entity.label.phoneNumber\' | translate:{ phoneType: (\'phoneNumber.type.\' + phoneNumber.type | translate)} }}</span><span class="link-sublabel pull-right">{{phoneNumber.phoneNumber}}</span></span></div>\r\n                                                <hr class="m-0 p-0">\r\n                                            </div>\r\n\r\n                                            <div class="link-row">\r\n                                                <div class="link-text">\r\n                                                    <p class="col-6 m-0 p-0">{{\'word.registration\' | translate}}</p>\r\n                                                    <div class="col-6 m-0 p-0 text-right">\r\n                                                        <p class="link-sublabel" ng-if="::$ctrl.unifiedSettings.advisorInformation.registered">{{\'settings.additionalInfo.advisorRegistered\' | translate}}</p>\r\n                                                        <p class="link-sublabel" ng-if="!$ctrl.unifiedSettings.advisorInformation.registered">{{\'settings.additionalInfo.advisorNotRegistered\' | translate}}</p>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                            <hr class="m-0 p-0">\r\n\r\n                                            <div class="link-row link-hover" ng-if="::$ctrl.unifiedSettings.advisorInformation.displayClientFees" ng-click="$ctrl.openFeesReview()">\r\n                                                <span class="link-label w-100">\r\n                                                    <span>{{\'clientFees.heading\' | translate}}</span>\r\n                                                    <span class="pull-right"><a href="javascript:void(0)" >{{\'clientFees.viewFees\' | translate}}</a></span>\r\n                                                </span>\r\n                                            </div>\r\n                                            <hr class="m-0 p-0">\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>    \r\n                </div>\r\n            </section>\r\n        </div>\r\n    </div>\r\n</div>'},function(e,t,n){e.exports=function(e){e.component("messageCenterNotificationSetting",{template:n(353),controller:["CONTENT_HOST","PageService",function(e,t){var n=this;n.$onInit=function(){n.url="https://"+e+"/cstoolsws/ibtools/redirect?",n.messageCenterNotificationsParams=t.getCurrentPage().pageData,n.messageCenterNotificationsParams.redirectToApp="webtkt_preferences",n.onFrameLoad=function(){t.setIsPageLoading(!1)},t.setOnPageLoad(function(){})}}]})}},function(e,t){e.exports='<div>\n\t<load-iframe name="messageCenterFrame" url="$ctrl.url" params="$ctrl.messageCenterNotificationsParams" method="POST" load-callback="$ctrl.onFrameLoad()" page-frame="true"></load-iframe>\n</div>'},function(e,t){e.exports=function(e){e.component("userResearchDashboard",{template:'<div id="userResearchContainer"></div>',controller:["$q","$scope","JsService","PageService",function(e,t,n,a){var r=this;r.$onInit=function(){r.studyId=a.getCurrentPage().serverParams.studyId},r.$postLink=function(){t.$applyAsync(function(){var t=n.injectJavascript("userResearch","/user.research.dashboard/umd1/index.js");e.all([t]).then(function(e){window.__userResearchDashboardMount(document.querySelector("#userResearchContainer"),{study_id:r.studyId})}).catch(function(e){})})}}]})}},function(e,t,n){e.exports=function(e){e.component("documentsCenter",{template:n(356),controller:["PageService","$q",function(e,t){var n=this;n.$onInit=function(){n.downloadableItemsLoad=t.defer(),e.setOnPageLoad(function(){n.downloadableItemsLoad.promise.finally(function(){e.setIsPageLoading(!1)})})}}]})}},function(e,t){e.exports='<div page-structure="fullPanel">\n\t<am-item-manipulator item-template="documents-center-data.component" manipulator-id="DocumentsCenter" deferred-load="$ctrl.downloadableItemsLoad"></am-item-manipulator>\n</div>\t'},function(e,t,n){e.exports=function(e){e.component("documentsCenterData",{template:n(358),require:{$itemManipulator:"^^amItemManipulator"},controller:["$translate","FileDownloadService","ModalService",function(e,t,n){var a=this;a.$onInit=function(){a.$itemManipulator.itemControl.load(),a.selectedItemsMap={},a.selectedItems=[],a.selectItem=function(e){if(a.selectedItemsMap[e.formNumber])a.selectedItems.push(e);else for(var t=a.selectedItems.length;t--;){if(a.selectedItems[t].formNumber===e.formNumber){a.selectedItems.splice(t,1);break}}},a.disableDownloadButton=function(){return 0===a.selectedItems.length||a.$itemManipulator.loadInProgress},a.download=function(){a.$itemManipulator.loadInProgress=!0,t.fetchFile({selectedItems:a.selectedItems},AM_APP_ROOT+"/DocumentsCenter","arraybuffer","POST").then(function(a){var r=t.getFileNameFromHeaders(a.headers),i=a.data;i?22==i.byteLength?n.openInfoModal({title:e.instant("word.attention"),modalData:{infoContent:e.instant("documentsCenter.noresults")}}):t.download(r,i,"application/zip"):n.openErrorModal({title:e.instant("crm.registrationtasks.clientDocumentsZip.errorTitle"),modalData:{errors:[e.instant("crm.registrationtasks.clientDocumentsZip.errorMessage")]}})},function(t){var a=(new TextDecoder).decode(t.data);angular.isDefined(a)&&n.openErrorModal({title:e.instant("crm.registrationtasks.clientDocumentsZip.errorTitle"),modalData:{errors:[a]}})}).finally(function(){a.$itemManipulator.loadInProgress=!1})}}}]})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.$itemManipulator.loadInProgress"></loading-overlay>\n<div ng-if="$ctrl.$itemManipulator.entries.length">\n\t<div class="row" ng-cloak>\n\t\t<div class="col-xs-7 col-sm-10 col-md-10 col-lg-10">\n\t\t\t<h5>{{ \'documentsCenter.heading\' | translate }}</h5>\n\t\t\t<p>{{ \'documentsCenter.info\' | translate }}</p>\n\t\t</div>\n        <div class="col-xs-5 col-sm-2 col-md-2 col-lg-2">\n            <span class="btn-group-right">\n            \t<am-button on-click="$ctrl.download()" btn-type="primary" btn-icon="fa-download" tooltip-text="{{\'word.download\' | translate}}" btn-text="{{\'word.download\' | translate}}" is-disabled="$ctrl.disableDownloadButton()"></am-button>\n            </span>\n            <div class="clearfix"></div>\n            <br>\n        </div>\n    </div>\n\t<div class="row">\n\t\t<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n\t\t\t<div class="table-responsive">\n\t\t\t\t<table width="100%" cellpadding="0" cellspacing="0" border="0" class="table table-hover tablesorter">\n\t\t\t\t\t<thead>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th width="5%">&nbsp;</th>\n\t\t\t\t\t\t\t<th ng-click="$ctrl.$itemManipulator.toggleSort(sorter)"\n\t\t\t\t\t\t\t\talign="left" valign="middle" class="header"\n\t\t\t\t\t\t\t\tng-class="{ \'headerSortDown\' : sorter.state == \'DESCENDING\', \'headerSortUp\' : sorter.state == \'ASCENDING\' }"\n\t\t\t\t\t\t\t\tng-repeat="sorter in $ctrl.$itemManipulator.services[\'SORTER\'].sorters"\n\t\t\t\t\t\t\t\tng-bind-html="\'documentsCenter.table.columns.\' + sorter.id | translate:{breakTag:(\'<br>\')} | renderHTML">\n\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</thead>\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t \n\t\t\t\t\t\t<tr ng-repeat="entry in $ctrl.$itemManipulator.entries">\n\t\t\t\t\t\t\t<td align="center">\n                            \t<input ng-model="$ctrl.selectedItemsMap[entry.formNumber]" ng-change="$ctrl.selectItem(entry)" type="checkbox" i-check  check-type = "square-blue"/>\n                        \t</td>\n\t\t\t\t\t\t\t<td align="left" valign="middle">{{entry.title}}</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n    <pagination-controls></pagination-controls>\n</div>\n\n<div page-structure="innerContent" ng-if="!$ctrl.$itemManipulator.entries.length">\n\t<div class="alert-no-results">\n\t\t<p class="text-center">{{\'documentsCenter.noresults\' | translate}}</p>\n\t</div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("dividendTaxVouchers",{template:n(360),controller:["$translate","CsTicketService","ModalService","NavigationService","DividendTaxVouchersService",function(e,t,n,a,r){var i=this;i.$onInit=function(){i.selectedYear=null,i.selectedCountry=null,i.invalidSelection=!1,i.showMoreInfo=!1;var o={AUT:null,SWE:null,CHE:"86697959",NOR:null,FRA:"35783245",ESP:"86697760"};i.nextStep=function(){i.selectedCountry||(i.invalidSelection=!0);var e=i.countryFeeList.find(function(e){return e.alpha3==i.selectedCountry});if(i.selectedYear&&e&&e.active)(new Date).getFullYear()===i.selectedYear?l(e,!0):c(e);else if(e&&!e.active){var t=o[i.selectedCountry];t?s(t):l(e)}},i.toggleMoreInfo=function(){i.showMoreInfo=!0};var s=function(t){return n.openInfoModal({title:e.instant("word.help"),templateUrl:"help-modal.component",buttons:[{label:"word.close",alignment:"left",fn:n.closeModal}],modalData:{helpUrl:function(e){return"/lib/cstools/faq/#/content/"+e+"?isEmbedded=true"}(t)}})},l=function(a,r){return n.openInfoModal({title:e.instant("word.help"),templateUrl:"dividend-tax-vouchers-modal.component",buttons:[{label:"word.close",alignment:"left",fn:n.closeModal},{label:"dividendTaxVouchers.label.openTicket",btnType:"primary",alignment:"right",fn:function(){n.closeModal(),t.openTicket()}}],modalData:{text:"dividendTaxVouchers.modal.desc.submitTicket",values:{strongStart:"<strong>",strongEnd:"</strong>",countryLiteral:a.country,lineBreak:"<br>"},feeText:"dividendTaxVouchers.modal.desc.feeText."+a.currency,feeValues:{strongStart:"<strong>",strongEnd:"</strong>"},countryCode:a.countryCode,isCurrentYear:r}})},c=function(t){var n={id:"dividendTaxVouchersSelection",path:"dividend-tax-vouchers-selection.component",title:e.instant("dividendTaxVouchers.label.requestDividendTaxVoucher"),skipFetch:!0,pageData:{selectedYear:i.selectedYear,selectedCountry:t}};a.navigate(n)};r.isCustomerEligible().then(function(e){i.isEligible=e.data.isEligible,i.countryFeeList=e.data.countries,i.countries=i.countryFeeList.map(function(e){return e.alpha3}),i.availableYears=e.data.years}).catch(function(){i.isEligible=!1})}}]})}},function(e,t){e.exports='<section class="panel" ng-if="$ctrl.isEligible">\n    <div class="panel-heading head-border">\n        <span class="heading">{{\n            \'dividendTaxVouchers.label.dividendTaxVouchers\' | translate }}</span>\n        \x3c!-- <span class="btn-group-right">\n            <am-help sub-id="DividendTaxVouchers"></am-help>\n        </span> --\x3e\n    </div>\n    <div class="panel-body panel-padding">\n\n        <div class="row">\n            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n                <p ng-if="!$ctrl.showMoreInfo">{{ \'dividendTaxVouchers.desc.info\' | translate }}<a href="javascript:void(0);" target="_self" ng-click="$ctrl.toggleMoreInfo()" translate="word.moreInfo"></a></p>\n                <p ng-if="$ctrl.showMoreInfo" translate="dividendTaxVouchers.desc.moreInfo"></p>\n            </div>\n        </div>\n        <div class="row" ng-if="$ctrl.invalidSelection">\n            <div class="col-xs-12 col-sm-12 col-md-8 col-lg-8">\n                <div class="alert alert-warning">\n                    <p>{{ \'dividendTaxVouchers.warnings.invalidSelection\' |\n                        translate }}</p>\n                </div>\n            </div>\n        </div>\n\n        <div class="row">\n            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n                <br>\n                <am-form-select name="year" ng-model="$ctrl.selectedYear"\n                    label-text="{{\'dividendTaxVouchers.label.selectYear\' | translate }}"\n                    options="$ctrl.availableYears"> </am-form-select>\n\n                <am-form-select name="country" ng-model="$ctrl.selectedCountry"\n                    label-text="{{\'dividendTaxVouchers.label.selectCountry\' | translate }}"\n                    options="$ctrl.countries" option-key="\'country.\'">\n                </am-form-select>\n            </div>\n        </div>\n\n\n        <div class="row">\n            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 btn-group-left">\n                <am-button btn-type="primary"\n                    btn-text="{{\'dividendTaxVouchers.label.requestDividendTaxVoucher\' | translate }}"\n                    on-click="$ctrl.nextStep()"></am-button>\n            </div>\n        </div>\n    </div>\n</section>'},function(e,t,n){e.exports=function(e){e.component("dividendTaxVouchersSelection",{template:n(362),controller:["PageService",function(e){var t=this;t.$onInit=function(){var n=e.getCurrentPage().pageData||{};t.country=n.selectedCountry,t.year=n.selectedYear}}]})}},function(e,t){e.exports='<am-item-manipulator item-template="dividend-tax-vouchers-display.component" manipulator-id="DividendTaxVoucher"></am-item-manipulator>'},function(e,t,n){e.exports=function(e){e.component("dividendTaxVouchersDisplay",{template:n(364),require:{$itemManipulator:"^^amItemManipulator",DividendTaxVouchersSelectionCtrl:"^^dividendTaxVouchersSelection"},controller:["$translate","NavigationService","$filter","ModalService","DividendTaxVouchersService","FileDownloadService","PageService",function(e,t,n,a,r,i,o){var s=this;function l(e){return e.conid+"-"+e.voucher.divAmount}s.filterOptionMapping={},s.selection=new Map,s.noSelection=!1,s.requestAllChecked=!1;var c=function(e){for(var t=0;t<e.entries.length;++t)if("NEW"===e.entries[t].voucher.requestState&&e.entries[t].requestable){var n=l(e.entries[t]);s.selection.has(n)&&(e.entries[t].selected=!0)}};s.getTermsOfServiceText=function(){if(0!==s.DividendTaxVouchersSelectionCtrl.country.fee){var t="dividendTaxVouchers.desc.terms."+s.DividendTaxVouchersSelectionCtrl.country.countryCode;e.instant(t)===t&&(t="dividendTaxVouchers.desc.terms.generic");var n={strongStart:"<strong>",strongEnd:"</strong>",currency:s.DividendTaxVouchersSelectionCtrl.country.currency,feeAmount:s.DividendTaxVouchersSelectionCtrl.country.fee};return e.instant(t,n)}return e.instant("dividendTaxVouchers.desc.terms.nofee")},s.isFilterEnabled=function(){var e=s.$itemManipulator.getFilterService();return!angular.isUndefined(e)&&!angular.isUndefined(e.filters.statusFilter)&&e.filters.statusFilter.enabled},s.$onInit=function(){s.getSorter=function(e){var t=s.$itemManipulator.services.SORTER.sorters;for(key in t)if(t[key].id==e)return t[key];return null};var e={year:s.DividendTaxVouchersSelectionCtrl.year,countryCode:s.DividendTaxVouchersSelectionCtrl.country.countryCode};s.$itemManipulator.itemControl.load(e),s.$itemManipulator.itemHooks.update.push(c),s.filterOptionMapping.statusFilter="dividendTaxVouchers.state.label."},s.updateSelected=function(e){e.selected?s.selection.set(l(e),e):s.selection.delete(l(e))},s.toggleRequestAll=function(){s.requestAllChecked=!s.requestAllChecked,s.$itemManipulator.itemControl.getEntries().forEach(function(e){"NEW"===e.voucher.requestState&&e.requestable&&(s.requestAllChecked&&!e.selected?(s.selection.set(l(e),e),e.selected=s.requestAllChecked):!s.requestAllChecked&&e.selected&&(s.selection.delete(l(e)),e.selected=s.requestAllChecked))})},s.hasCompleteRequestState=function(){return s.$itemManipulator.itemControl.getEntries().reduce(function(e,t){return e||"COMPLETE"===t.voucher.requestState},!1)},s.hasNewRequestState=function(){return s.$itemManipulator.itemControl.getEntries().reduce(function(e,t){return e||"NEW"===t.voucher.requestState},!1)},s.hasInProgressOrCompleteRequestState=function(){return s.$itemManipulator.itemControl.getEntries().reduce(function(e,t){return e||"COMPLETE"===t.voucher.requestState||"IN_PROGRESS"===t.voucher.requestState},!1)},s.canSelectAll=function(){return-1==s.$itemManipulator.services.PAGINATION.pageSize||!s.$itemManipulator.services.PAGINATION.hasPageControls},s.navigateToDividendTaxVouchersConfirmation=function(){if(s.selection.size){var n={id:"dividendTaxVouchersConfirmation",path:"dividend-tax-vouchers-confirmation.component",title:e.instant("dividendTaxVouchers.label.confirmation"),pageData:{selection:Array.from(s.selection.values()),fee:s.DividendTaxVouchersSelectionCtrl.country.fee,currency:s.DividendTaxVouchersSelectionCtrl.country.currency,termsOfServiceText:s.getTermsOfServiceText()},skipFetch:!0};t.navigate(n)}else s.noSelection=!0},s.downloadTaxVoucher=function(e,t){r.downloadTaxVoucher(e,t).then(function(e){i.processDownload(e.data,void 0)}).catch(function(){s.showDownloadErrorModal()})},s.downloadAllTaxVouchers=function(){var e={year:s.DividendTaxVouchersSelectionCtrl.year,countryCode:s.DividendTaxVouchersSelectionCtrl.country.countryCode,requestList:s.$itemManipulator.itemControl.getEntries().filter(function(e){return"COMPLETE"===e.voucher.requestState}).map(function(e){var t=e.voucher;return{requestId:t.requestId,filePath:t.filePath}})};r.downloadAllTaxVouchers(e).then(function(e){i.processDownload(e.data,void 0)}).catch(function(){s.showDownloadErrorModal()})},s.showWarning=function(){var e={templateUrl:"dividend-tax-vouchers-modal.component",dialogClass:"modal-sm",modalData:{text:"dividendTaxVouchers.modal.desc.fee",values:{currency:s.DividendTaxVouchersSelectionCtrl.country.currency,feeAmount:s.DividendTaxVouchersSelectionCtrl.country.fee}}};a.openWarningModal(e)},s.openRejectedStatusInfoModal=function(){a.openWarningModal({templateUrl:"dividend-tax-vouchers-modal.component",dialogClass:"modal-sm",modalData:{text:"dividendTaxVouchers.modal.desc.rejectedStatus"}})},s.showDownloadErrorModal=function(){a.openErrorModal({templateUrl:"dividend-tax-vouchers-modal.component",dialogClass:"modal-sm",modalData:{text:"dividendTaxVouchers.errors.download"}})},s.navigateToTaxReports=function(){var e=o.getBreadcrumbs()[0];t.navigateToBreadcrumb(e)}}]}),e.filter("absoluteValue",function(){return function(e){return Math.abs(e)}})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.$itemManipulator.loadInProgress"></loading-overlay>\n\n<div class="container">\n    <div ng-if="$ctrl.$itemManipulator.entries.length">\n        <div class="row">\n            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n                <h6>{{\'dividendTaxVouchers.label.dividendsTaxWithheld\' |\n                    translate}}</h6>\n            </div>\n        </div>\n        <div class="row">\n            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n                <p class="text-muted">{{\'dividendTaxVouchers.desc.selectDividends\'\n                    | translate}}</p>\n            </div>\n        </div>\n        <div class="row">\n            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n                <p>\n                    <strong>{{\'dividendTaxVouchers.label.termsOfService\' |\n                        translate}}</strong> - <span ng-bind-html="$ctrl.getTermsOfServiceText() | renderHTML"></span>\n                </p>\n            </div>\n        </div>\n        <div class="row">\n            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n                <p class="text-bold">{{\'dividendTaxVouchers.desc.processingTime\'\n                    | translate}}</p>\n            </div>\n        </div>\n        <div class="row" ng-if="$ctrl.hasInProgressOrCompleteRequestState">\n            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n                <p>{{\'dividendTaxVouchers.desc.download\'\n                    | translate}}</p>\n            </div>\n        </div>\n        <div class="row" ng-if="$ctrl.noSelection">\n            <div class="alert alert-warning">\n                <p>{{\'dividendTaxVouchers.warnings.noSelection\' | translate}}</p>\n            </div>\n\n        </div>\n    </div>\n\n    <div class="row mb-2">\n        <div class="col">\n            <span class="btn-group-right">\n                <div class="form-inline" ng-if="$ctrl.$itemManipulator.entries.length">\n                    <div class="input-group mr-2">\n                        <freeform-text-filter filter-id="dividendTaxVoucherSearchText" placeholder-key-prefix="{{\'dividendTaxVouchers.label.\'}}"></freeform-text-filter>\n                    </div>\n                </div>\n                <ul class="btn-icons mr-2">\n                    <dropdown-filters filter-key-prefix="data.filter.name."\n                        option-key-prefix-map="$ctrl.filterOptionMapping"></dropdown-filters>\n                </ul>\n                <button class="btn btn-default"\n                    ng-if="$ctrl.hasCompleteRequestState()"\n                    ng-click="$ctrl.downloadAllTaxVouchers()"\n                    btn-text="{{\'taxReports.label.downloadAll.title\' | translate }}">\n                    {{\'taxReports.label.downloadAll.title\' | translate }} <i\n                        class="fa fa-long-arrow-down"></i>\n                </button>\n                <button class="btn btn-default" ng-if="$ctrl.hasNewRequestState() && $ctrl.canSelectAll()"\n                    ng-click="$ctrl.toggleRequestAll()"\n                    btn-text="{{\'dividendTaxVoucher.requestAll.title\' | translate }}">\n                    {{\'dividendTaxVouchers.label.requestAll\' | translate }} <i\n                        class="fa fa-long-arrow-down"></i>\n                </button>\n            </span>\n        </div>\n    </div>\n\n    <div ng-if="$ctrl.$itemManipulator.entries.length">\n        <div class="row">\n            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n                <div class="table-responsive table-scroll table-sticky"\n                    style="height: calc(100vh - 610px);">\n                    <table width="100%" cellpadding="0" cellspacing="0" border="0"\n                        class="table table-bordered tablesorter"\n                        id="table-dividend-tax-vouchers">\n                        <thead>\n                            <tr>\n                                <th align="center" valign="middle">{{\'dividendTaxVouchers.label.isin\'\n                                    | translate}}</th>\n                                <th align="center" valign="middle">{{\'dividendTaxVouchers.label.symbol\'\n                                    | translate}}</th>\n                                <th align="center" valign="middle" class="header"\n                                    ng-click="$ctrl.$itemManipulator.toggleSort($ctrl.getSorter(\'securityDesc\'))"\n                                    ng-class="{ \'headerSortDown\' : $ctrl.getSorter(\'securityDesc\').state == \'DESCENDING\',\n                                                    \'headerSortUp\' : $ctrl.getSorter(\'securityDesc\').state == \'ASCENDING\' }">\n                                    {{\'dividendTaxVouchers.label.securityDescription\' | translate}}\n                                </th>\n                                <th align="center" valign="middle" class="header"\n                                    ng-click="$ctrl.$itemManipulator.toggleSort($ctrl.getSorter(\'exDate\'))"\n                                    ng-class="{ \'headerSortDown\' : $ctrl.getSorter(\'exDate\').state == \'DESCENDING\',\n                                                    \'headerSortUp\' : $ctrl.getSorter(\'exDate\').state == \'ASCENDING\' }">\n                                    {{\'dividendTaxVouchers.label.exDividendDate\' | translate}}</th>\n                                <th align="center" valign="middle" class="header"\n                                    ng-click="$ctrl.$itemManipulator.toggleSort($ctrl.getSorter(\'payDate\'))"\n                                    ng-class="{ \'headerSortDown\' : $ctrl.getSorter(\'payDate\').state == \'DESCENDING\',\n                                                    \'headerSortUp\' : $ctrl.getSorter(\'payDate\').state == \'ASCENDING\' }">\n                                    {{\'dividendTaxVouchers.label.paidDate\' | translate}}</th>\n                                <th align="center" valign="middle" class="header"\n                                    ng-click="$ctrl.$itemManipulator.toggleSort($ctrl.getSorter(\'divAmount\'))"\n                                    ng-class="{ \'headerSortDown\' : $ctrl.getSorter(\'divAmount\').state == \'DESCENDING\',\n                                                    \'headerSortUp\' : $ctrl.getSorter(\'divAmount\').state == \'ASCENDING\' }">\n                                    {{\'dividendTaxVouchers.label.dividendPaid\' | translate}}</th>\n                                <th align="center" valign="middle" class="header"\n                                    ng-click="$ctrl.$itemManipulator.toggleSort($ctrl.getSorter(\'withheldAmount\'))"\n                                    ng-class="{ \'headerSortDown\' : $ctrl.getSorter(\'withheldAmount\').state == \'DESCENDING\',\n                                                    \'headerSortUp\' : $ctrl.getSorter(\'withheldAmount\').state == \'ASCENDING\' }">\n                                    {{\'dividendTaxVouchers.label.taxWithheld\' | translate}}</th>\n                                <th align="center" valign="middle" class="header"\n                                    ng-click="$ctrl.$itemManipulator.toggleSort($ctrl.getSorter(\'currency\'))"\n                                    ng-class="{ \'headerSortDown\' : $ctrl.getSorter(\'currency\').state == \'DESCENDING\',\n                                                    \'headerSortUp\' : $ctrl.getSorter(\'currency\').state == \'ASCENDING\' }">\n                                    {{\'word.currency\' | translate}}</th>\n                                <th>{{\'word.status\' | translate}}</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            <tr\n                                ng-repeat="dividendWitholding in $ctrl.$itemManipulator.entries">\n                                <td align="center" valign="middle">{{::\n                                    dividendWitholding.isin }}</td>\n                                <td align="center" valign="middle">{{::\n                                    dividendWitholding.symbol }}</td>\n                                <td align="center" valign="middle">{{::\n                                    dividendWitholding.securityDesc }}</td>\n                                <td align="center" valign="middle">{{::\n                                    dividendWitholding.exDate }}</td>\n                                <td align="center" valign="middle">{{::\n                                    dividendWitholding.payDate }}</td>\n                                <td align="right" valign="middle">{{::\n                                    dividendWitholding.voucher.divAmount | number: 2}}</td>\n                                <td align="right" valign="middle">{{::\n                                    dividendWitholding.voucher.withHeldAmount | absoluteValue |\n                                    number: 2 }}</td>\n                                <td align="center" valign="middle">{{::\n                                    dividendWitholding.currency }}</td>\n                                <td align="center" valign="middle">\n                                    <div class="d-flex align-items-center">\n                                        <div style="flex: 80%;">\n                                            <span\n                                                ng-if="dividendWitholding.voucher.requestState == \'NEW\' && !dividendWitholding.requestable">\n                                                {{\'word.unavailable\' | translate}} </span> <span\n                                                ng-if="dividendWitholding.voucher.requestState == \'NEW\' && dividendWitholding.requestable">{{\'word.request\'\n                                                | translate}}</span> <span\n                                                ng-if="dividendWitholding.voucher.requestState == \'IN_PROGRESS\'">\n                                                {{\'dividendTaxVouchers.state.label.IN_PROGRESS\' |\n                                                translate}} </span> <span\n                                                ng-if="dividendWitholding.voucher.requestState == \'COMPLETE\'">\n                                                {{\'word.download\' | translate}}</span> <span\n                                                ng-if="dividendWitholding.voucher.requestState == \'REJECTED\'">\n                                                {{\'dividendTaxVouchers.state.label.REJECTED\' | translate}}</span>\n                                        </div>\n                                        <div style="flex: 20%;">\n                                            <span\n                                                ng-if="dividendWitholding.voucher.requestState == \'NEW\' && !dividendWitholding.requestable"><a\n                                                href="javascript:void(0);" ng-click="$ctrl.showWarning()"><i\n                                                    class="fas fa-circle-info tooltips"\n                                                    data-bs-toggle="tooltip"></i></a></span> <span\n                                                ng-if="dividendWitholding.voucher.requestState == \'NEW\' && dividendWitholding.requestable">\n                                                <input type="checkbox" class="iCheck-square-blue"\n                                                ng-model="dividendWitholding.selected"\n                                                ng-change="$ctrl.updateSelected(dividendWitholding)" />\n                                            </span> <span\n                                                ng-if="dividendWitholding.voucher.requestState == \'IN_PROGRESS\'">\n                                                <i class="fas fa-history text-blue"></i>\n                                            </span> <span\n                                                ng-if="dividendWitholding.voucher.requestState == \'COMPLETE\'">\n                                                <a href="javascript:void(0);"\n                                                ng-click="$ctrl.downloadTaxVoucher(dividendWitholding.voucher.requestId, dividendWitholding.voucher.filePath)"><i\n                                                    class="fas fa-download tooltips" data-bs-toggle="tooltip"></i></a>\n                                            </span> <span\n                                                ng-if="dividendWitholding.voucher.requestState == \'REJECTED\'">\n                                                <a href="javascript:void(0);"\n                                                ng-click="$ctrl.openRejectedStatusInfoModal()"><i\n                                                    class="fas fa-solid fa-triangle-exclamation tooltips"\n                                                    data-bs-toggle="tooltip"></i></a>\n                                            </span>\n                                        </div>\n                                    </div>\n                                </td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n                <pagination-controls></pagination-controls>\n                <br>\n            </div>\n        </div>\n        <div class="row">\n            <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">\n                <div class="btn-group-left">\n                    <am-button btn-type="primary"\n                        btn-text="{{\'word.back\' |\n                    translate}}"\n                        on-click="$ctrl.navigateToTaxReports()"></am-button>\n                </div>\n            </div>\n            <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6"\n                ng-if="$ctrl.hasNewRequestState()">\n                <div class="btn-group-right">\n                    <am-button btn-type="primary"\n                        btn-text="{{\'word.continue\' | translate}}"\n                        on-click="$ctrl.navigateToDividendTaxVouchersConfirmation()"></am-button>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n<div page-structure="innerContent"\n    ng-if="!$ctrl.$itemManipulator.loadInProgress && !$ctrl.$itemManipulator.entries.length && !$ctrl.isFilterEnabled()">\n\n    <div class="alert alert-gray">\n        <p class="text-center">{{\'dividendTaxVouchers.warnings.noRecords\'\n            | translate}}</p>\n    </div>\n\n    <div class="btn-group-left">\n        <am-button btn-type="primary"\n            btn-text="{{\'word.back\' |\n                    translate}}"\n            on-click="$ctrl.navigateToTaxReports()"></am-button>\n    </div>\n\n</div>\n\n<div page-structure="innerContent"\n    ng-if="!$ctrl.$itemManipulator.loadInProgress && !$ctrl.$itemManipulator.entries.length && $ctrl.isFilterEnabled()">\n    <br />\n    <div class="alert alert-gray">\n        <p class="text-center">{{\'dividendTaxVouchers.warnings.noRecordsFilter\'\n            | translate}}</p>\n    </div>\n</div>\n'},function(e,t,n){e.exports=function(e){e.component("dividendTaxVouchersTable",{template:n(366),bindings:{selection:"<"}})}},function(e,t){e.exports='\n<div class="row">\n    <div class="col-xs-12 col-sm-12 col-md-9 col-lg-9"\n        style="max-height: 350px; overflow: auto;">\n        <div class="table-responsive table-sticky">\n            <table width="100%" cellpadding="0" cellspacing="0" border="0"\n                class="table table-condensed table-bordered">\n                <thead>\n                    <tr>\n                        <th align="center" valign="middle">{{\'dividendTaxVouchers.label.isin\'\n                            | translate}}</th>\n                        <th align="center" valign="middle">{{\'dividendTaxVouchers.label.symbol\'\n                            | translate}}</th>\n                        <th align="center" valign="middle">{{\'dividendTaxVouchers.label.securityDescription\'\n                            | translate}}</th>\n                        <th align="center" valign="middle">{{\'dividendTaxVouchers.label.country\'\n                            | translate}}</th>\n                        <th align="center" valign="middle">{{\'dividendTaxVouchers.label.exDividendDate\'\n                            | translate}}</th>\n                        <th align="center" valign="middle">{{\'dividendTaxVouchers.label.paidDate\'\n                            | translate}}</th>\n                        <th align="center" valign="middle">{{\'dividendTaxVouchers.label.dividendPaid\'\n                            | translate}}</th>\n                        <th align="center" valign="middle">{{\'dividendTaxVouchers.label.taxWithheld\'\n                            | translate}}</th>\n                        <th align="center" valign="middle">{{\'word.currency\' |\n                            translate}}</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    <tr ng-repeat="dividendWitholding in $ctrl.selection">\n                        <td align="center" valign="middle">{{::dividendWitholding.isin\n                            }}</td>\n                        <td align="center" valign="middle">{{::\n                            dividendWitholding.symbol }}</td>\n                        <td align="center" valign="middle">{{::\n                            dividendWitholding.securityDesc }}</td>\n                        <td align="center" valign="middle">{{::\n                            dividendWitholding.country }}</td>\n                        <td align="center" valign="middle">{{::\n                            dividendWitholding.exDate }}</td>\n                        <td align="center" valign="middle">{{::\n                            dividendWitholding.payDate }}</td>\n                        <td align="right" valign="middle">{{::\n                            dividendWitholding.voucher.divAmount | number: 2}}</td>\n                        <td align="right" valign="middle">{{::\n                            dividendWitholding.voucher.withHeldAmount | absoluteValue |\n                            number: 2 }}</td>\n                        <td align="center" valign="middle">{{::\n                            dividendWitholding.currency }}</td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("dividendTaxVouchersConfirmation",{template:n(368),controller:["PageService","DividendTaxVouchersService","ModalService","NavigationService","$translate","BreadcrumbAction",function(e,t,n,a,r,i){var o=this;o.acknowledged=!1,o.showWarning=!1,o.$onInit=function(){var t=e.getCurrentPage().pageData||{};o.selection=t.selection,o.fee=t.fee,o.currency=t.currency,o.termsOfServiceText=t.termsOfServiceText,o.totalFeeAmount=o.selection.reduce(function(e,t){return e+t.voucher.fee},0)},o.submitDividendTaxVoucherRequest=function(){if(0===o.fee&&(o.acknowledged=!0),o.acknowledged)return t.submitTaxVoucherRequest(o.currency,o.acknowledged,o.selection).then(function(){o.navigateToDividendTaxVoucherReview()}).catch(function(e){o.error=e.data.errors.error,"creditCheck"===o.error?(o.accountId=e.data.accountId,o.openInsufficientFundsModal()):o.openSubmitErrorModal()});o.showWarning=!0},o.openInsufficientFundsModal=function(){var e={templateUrl:"dividend-tax-vouchers-modal.component",modalData:{text:"dividendTaxVouchers.modal.desc.insufficientFunds",values:{accountId:o.accountId,lineBreak:"<br>",currency:o.currency,feeAmount:o.fee}},title:"{{'dividendTaxVouchers.modal.label.insufficientFunds' | translate}}",buttons:[{label:"word.cancel",alignment:"right",btnType:"primary",fn:function(){n.closeModal(),o.navigateToTaxReports()}}]};n.openWarningModal(e)},o.openSubmitErrorModal=function(){var e={templateUrl:"dividend-tax-vouchers-modal.component",dialogClass:"modal-sm",modalData:{text:"dividendTaxVouchers.errors.submit"},buttons:[{label:"word.cancel",alignment:"right",btnType:"primary",fn:function(){n.closeModal(),o.navigateToTaxReports()}}]};n.openErrorModal(e)},o.navigateToDividendTaxVoucherReview=function(){var e={id:"dividendTaxVouchersReview",path:"dividend-tax-vouchers-review.component",title:"Review",pageData:{selection:o.selection},skipFetch:!0,breadcrumb:i.REPLACE};a.navigate(e)},o.navigateToTaxReports=function(){var t=e.getBreadcrumbs()[0];a.navigateToBreadcrumb(t)},o.navigateToDividendTaxVouchersSelectionPage=function(){var t=e.getBreadcrumbs()[1];a.navigateToBreadcrumb(t)}}]})}},function(e,t){e.exports='<div class="container">\n    <div class="row mb-3">\n        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n            <p>{{\'dividendTaxVouchers.desc.confirmation\' | translate}}</p>\n        </div>\n    </div>\n    <dividend-tax-vouchers-table selection="$ctrl.selection" />\n    <br>\n    <div class="row">\n        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n            <p>\n                <strong>{{\'dividendTaxVouchers.label.termsOfService\' |\n                        translate}}</strong> - <span ng-bind-html="$ctrl.termsOfServiceText | renderHTML"></span>\n            </p>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n            <p translate="dividendTaxVouchers.desc.total"\n                translate-values="{strongStart : \'<strong>\', strongEnd : \'</strong>\', currency: $ctrl.currency, totalFeeAmount: $ctrl.totalFeeAmount}"></p>\n\n        </div>\n    </div>\n    <div class="row" ng-if="$ctrl.fee !== 0">\n        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n            <span><input type="checkbox" class="iCheck-square-blue"\n                ng-model="$ctrl.acknowledged" /> &nbsp;\n                {{\'dividendTaxVouchers.desc.disclaimer\' | translate}}</span>\n        </div>\n    </div>\n    <br>\n    <div class="row">\n        <div ng-if="$ctrl.showWarning" class="alert alert-warning">\n            <p>{{\'dividendTaxVouchers.warnings.checkBox\' | translate}}</p>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n            <div class="btn-group-left">\n                <am-button btn-type="primary"\n                    btn-text="{{\'word.back\' |\n                    translate}}"\n                    on-click="$ctrl.navigateToDividendTaxVouchersSelectionPage()"></am-button>\n                <am-button btn-type="primary"\n                    btn-text="{{\'word.continue\' |\n                    translate}}"\n                    on-click="$ctrl.submitDividendTaxVoucherRequest()"></am-button>\n            </div>\n        </div>\n    </div>\n\n</div>\n'},function(e,t,n){e.exports=function(e){e.component("dividendTaxVouchersReview",{template:n(370),controller:["PageService","NavigationService",function(e,t){var n=this;n.$onInit=function(){var t=e.getCurrentPage().pageData||{};n.selection=t.selection},n.navigateToTaxReports=function(){var n=e.getBreadcrumbs()[0];t.navigateToBreadcrumb(n)}}]})}},function(e,t){e.exports='<div class="container">\n    <div class="row mb-3">\n        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n            <i am-tooltip class="fa fa-check-circle text-success"\n                style="display: inline;"></i> &nbsp;\n            <h6 style="display: inline;">{{\'dividendTaxVouchers.label.submitted\'\n                | translate}}</h6>\n        </div>\n    </div>\n    <div class="row mb-2">\n        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n            <p>{{\'dividendTaxVouchers.desc.submitted\' | translate}}</p>\n            <p>{{\'dividendTaxVouchers.desc.status\' | translate}}</p>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n            <p>\n                <strong>{{\'dividendTaxVouchers.label.dividendsTaxWithheld\'\n                    | translate}}</strong>\n            </p>\n        </div>\n    </div>\n    <dividend-tax-vouchers-table selection="$ctrl.selection" />\n    <br>\n    <div class="row">\n        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n            <div class="btn-group-left">\n                <am-button btn-type="primary"\n                    btn-text="{{\'word.done\' |\n                    translate}}"\n                    on-click="$ctrl.navigateToTaxReports()"></am-button>\n            </div>\n        </div>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){n(372)(e)}},function(e,t){e.exports=function(e){e.controller("SettingsController",["NavigationAction","ResourceService","PageService","NavigationService","AmConfigurationService",function(e,t,n,a,r){var i=this;i.$onInit=function(){i.fetchSettings=function(){t.fetch(AM_APP_ROOT+"/Settings").then(function(e){angular.isDefined(e.data.partitions)?i.settingsPartitions=e.data.partitions:i.settings=e.data}).finally(function(){r.processPageRedirect()})},i.settingClick=function(t){t.pageEntry.navigateAction===e.MODAL?a.navigate(t.pageEntry).then(function(e){e&&i.fetchSettings()}):a.navigate(t.pageEntry)},n.setOnPageLoad(i.fetchSettings)}}])}},function(e,t,n){e.exports=function(e){n(374)(e)}},function(e,t){e.exports=function(e){e.directive("failPageContent",function(){return{restrict:"E",scope:{url:"@"},controller:["PageService",function(e){e.onPartialLoadFailed()}]}})}},function(e,t,n){e.exports=function(e){n(376)(e),n(377)(e),n(379)(e),n(381)(e),n(383)(e)}},function(e,t){e.exports=function(e){e.component("ssoExpiredModal",{template:'<p translate="ssoExpired.message"></p>',controller:["ModalService","UserService","NavigationService",function(e,t,n){this.$onInit=function(){e.setModalButtons([{alignment:"right",label:"word.ok",fn:function(){n.setNavigationValidator(void 0),t.logout({sso:!0})},btnType:"primary"}])}}]})}},function(e,t,n){e.exports=function(e){e.component("documentUploadModal",{template:n(378),controller:["$scope","ModalService","JsService",function(e,t,n){var a=this,r=function(e){e.form===a.documentTask.formNumber&&(a.submissionState="SUCCESS",o())},i=function(){t.closeModal(a.submissionState)},o=function(){var e=[];"SUCCESS"===a.submissionState&&e.push({label:"word.close",alignment:"right",fn:i}),t.setModalButtons(e)};a.$onInit=function(){a.documentTask=t.getModalData().documentTask||{},o()},a.$postLink=function(){e.$applyAsync(function(){var e="/upload/";angular.isDefined(window.sessionStorage.getItem("use.du.alpha"))&&null!==window.sessionStorage.getItem("use.du.alpha")&&(e+=window.sessionStorage.getItem("use.du.alpha")),n.injectJavascript("duInit",e+"document.upload.initializer.js").then(function(e){window.documentUploadInitializer.mount(a.documentTask,r)})})}}]})}},function(e,t){e.exports='<div ng-if="::$ctrl.documentTask.uploadable">\n\t<div id="doc">{{\'documentSubmission.loadingComponent\' | translate}} ...</div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("policyHolderAccountUploadModal",{template:n(380),controller:["ModalService","FileUploadService",function(t,n){var a=this;a.$onInit=function(){a.isError=!1,a.isUploadInProgress=!1,r()};var r=function(){var e=[];e.push({label:"word.cancel",alignment:"left",fn:a.cancelUpload}),e.push({label:"word.submit",alignment:"right",fn:a.loadDataFromUploadFile,btnType:"primary"}),t.setModalButtons(e)};a.cancelUpload=function(){t.closeModal()},a.loadDataFromUploadFile=function(){if(angular.isDefined(a.csvFile)&&a.csvFile.length>0){a.isUploadInProgress=!0;var r=a.csvFile[0],i=new FormData;i.append("document",r),(a.activePolicyHolderAcctUploadRequest=n.uploadFileToUrl(i,e.SERVER_PATH+"/PolicyHolderAccountUpload")).then(function(e){a.rows=e.data.rows,a.errors=e.data.csvError,a.errors?a.isError=!0:a.isError=!1},function(e){a.multiPartFormErrors=e.data.errors,a.isError=!0}).finally(function(){a.activePolicyHolderAcctUploadRequest=null,a.isError||t.closeModal(a.rows),a.isUploadInProgress=!1})}else a.errors=[{error:"fileNotFound"}],a.isError=!0},a.$onDestroy=function(){angular.isDefined(a.activePolicyHolderAcctUploadRequest)&&null!==a.activePolicyHolderAcctUploadRequest&&a.activePolicyHolderAcctUploadRequest.cancel()}}]})}},function(e,t){e.exports='<div class="form-group">\n    <div class="row">\n        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n            <p>{{\'policyHolder.numbers.csv.upload\' | translate}}</p>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n            <label class="control-label">{{\'partial.upload.browseFile\' | translate}}</label>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n            <am-file-input name="documentFile" ng-model="$ctrl.csvFile" is-required="true" multiple="false"></am-file-input>\n        </div>\n    </div>\n    <div class="row" ng-if="$ctrl.isError">\n        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n            <div class="alert alert-danger">\n                <div ng-repeat="errors in $ctrl.errors">\n                    <p>\n                        <span ng-if="errors.line">{{errors.line}} : </span>\n                        <span ng-if="errors.columnNumber" translate="{{ \'partial.upload.error.lineDetail\' }}" translate-values="{columnNumber : errors.columnNumber, lineNumber : errors.lineNumber}"></span>\n                        <span ng-if ="errors.error" >{{\'partial.upload.error.\' + errors.error | translate}}.</span>\n                    </p>\n                </div>\n                <div ng-if="$ctrl.multiPartFormErrors && $ctrl.multiPartFormErrors.documentFile">\n                    <p>\n                        <span >{{\'field.error.\' + $ctrl.multiPartFormErrors.documentFile | translate}}.</span>\n                    </p>\n                </div>\n                <p>{{ \'partial.upload.error.errorMsg\' | translate }}</p>\n            </div>\n        </div>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("accountEmailConfirmationModal",{template:n(382),controller:["ModalService",function(e){var t=this;t.$onInit=function(){t.accountId=e.getModalData().accountId||"",t.email=e.getModalData().email||""}}]})}},function(e,t){e.exports='<div align="center">\n\t<i class="fa fa-4x fa-check-circle text-success"></i>\n</div>\n<br>\n<div class="alert alert-success text-center">\n\t<p translate="email.message.sent" translate-values="{accountId: $ctrl.accountId, email: $ctrl.email}"></p>\n</div>'},function(e,t){e.exports=function(e){e.component("dividendTaxVouchersModal",{template:"<div><p translate={{$ctrl.text}} translate-compile translate-values={{$ctrl.values}}></p><p ng-if=\"$ctrl.countryCode !== 'AT' && $ctrl.isCurrentYear \" translate={{$ctrl.feeText}} translate-compile translate-values={{$ctrl.feeValues}}></p></div>",controller:["ModalService","$translate",function(e,t){var n=this;n.$onInit=function(){n.text=e.getModalData().text,n.values=e.getModalData().values,n.feeText=e.getModalData().feeText,n.feeValues=e.getModalData().feeValues,n.countryCode=e.getModalData().countryCode,n.isCurrentYear=e.getModalData().isCurrentYear}}]})}},function(e,t,n){e.exports=function(e){n(385)(e),n(386)(e),n(387)(e),n(388)(e),n(389)(e)}},function(e,t){e.exports=function(e){e.factory("AmConfigurationService",["$q","NavigationAction","ResourceService","PageService","NavigationService",function(e,t,n,a,r){var i={processPageRedirect:function(){var e=a.getCurrentPage().pageData.configId;if(angular.isUndefined(e))a.setIsPageLoading(!1);else{delete a.getCurrentPage().pageData.configId;var n=a.getCurrentPage().pageData.configData;i.redirectToConfig(e,n).then(function(e){angular.isDefined(e)&&e.navigateAction===t.MODAL&&a.setIsPageLoading(!1)})}},redirectToConfig:function(e,t){return i.getConfigPageEntry(e,t).then(function(e){return r.navigate(e),e}).catch(function(e){a.triggerUnauthorized()})},getConfigPageEntry:function(t,a){var r=e.defer();if(angular.isUndefined(t))return r.reject(void 0),r.promise;var i=[];return angular.isObject(t)?i.push(t):i.push({id:t}),n.create(AM_APP_ROOT+"/AmConfiguration",{configs:i}).then(function(e){var t=e.data.configs[i[0].id];if(angular.isUndefined(t))r.reject(t);else if(t.accessible){var n=t.pageEntry;angular.isUndefined(n)?r.reject(t):(angular.isDefined(a)&&(n.pageData=angular.merge(n.pageData||{},a)),r.resolve(n))}else r.reject(t)}).catch(function(e){r.reject(void 0)}),r.promise}};return i}])}},function(e,t){e.exports=function(e){e.factory("AmCsToolsService",["SIZE_THEME","PickerService","ResourceService",function(e,t,n){var a={showPicker:function(e){e=e||{},t.setOnPickerUpdate(function(n){(e.callback||function(e){console.warn("No callback specified: "+e.map(function(e){return e.accountId}))})(n),t.closePicker()});var a=[],r=[];if(angular.isArray(e.accounts))for(var i=0;i<e.accounts.length;++i){var o=e.accounts[i];if(angular.isObject(o)){var s=o.accountId;angular.isUndefined(s)?console.warn("Account is missing account ID: "+o):(r.push(s),o.autoSelect&&a.push({accountId:s}))}else console.warn("Invalid account data supplied: "+o)}t.$pickerItemControl.setLoadInProgress(!0),n.update("/AccountManagement/Support/PickerData",{serviceId:"PickerInitializationService",serviceRequest:{selectedEntries:a,allAccounts:r}}).then(function(e){t.loadPicker("/AccountManagement/Support/PickerData")}),t.openPicker()},getSizeMode:function(){return e.get().toLowerCase()}};return a}])}},function(e,t){e.exports=function(e){e.factory("amResponseInterceptor",["$q","$window","$injector","UserPlatformService","SESSION_ID","AM_UUID","ACTIVE_CONTEXT","NavigationAction",function(e,t,n,a,r,i,o,s){var l=/.*\.html?$/g,c=/.*\.php.*$/g,u=/^(.*\/template|template)\/page\/.*\.html$/g,d=/.*\.component$/g,p={};return p.request=function(t){if(t.url.match(d)){var a=e.defer();t.timeout=a.promise,a.resolve()}else if(!t.url.match(l)&&!t.url.match(c)){t.headers=t.headers||{},t.headers.SessionId=r,t.headers.AM_UUID=i,t.headers.ACTIVE_CONTEXT=o;var s=n.get("PageService");if(angular.isDefined(s)&&angular.isFunction(s.getActivePickerSelections)){var u=s.getActivePickerSelections();u.length>0&&(t.headers.AccountHash=u[0].id)}}return t},p.response=function(e){if(angular.isDefined(e.config)&&angular.isDefined(e.config.url)){var t=n.get("UserService");angular.isDefined(t.getUser().username)&&angular.isDefined(e.data)&&angular.isDefined(e.data.expireSeconds)&&(e.config.url.startsWith(AM_APP_ROOT)?t.setExpireSeconds(e.data.expireSeconds):t.tickle())}return e},p.responseError=function(r){if(angular.isDefined(r.headers().exp))return angular.isFunction(t.sendToNativeApp)&&a.isSimplifiedPlatform()?t.sendToNativeApp({action:"close_webview"}):(n.get("NavigationService").setNavigationValidator(void 0),n.get("NavigationService").navigate({path:AM_APP_ROOT+"/Expire",navigateAction:s.REDIRECT,serverParams:{lang:n.get("LanguageService").getCurrentLanguage()}})),e.reject(r);if(-1===r.status&&r.config.url.match(d)){var i=r.config.url.substring(0,r.config.url.length-10);return r.data="<"+i+"></"+i+">",r}return r.config.url.match(u)?(r.data='<fail-page-content url="'+r.config.url+'"></fail-page-content>',r):e.reject(r)},p}])}},function(e,t){e.exports=function(e){e.factory("DividendTaxVouchersService",["$http","FileDownloadService",function(e,t){var n={isCustomerEligible:function(){return e({method:"GET",url:AM_APP_ROOT+"/DividendTaxVoucher/Eligible"})},submitTaxVoucherRequest:function(t,n,a){return e({method:"POST",url:AM_APP_ROOT+"/DividendTaxVoucher",data:{currency:t,acknowledged:n,data:a}})},downloadTaxVoucher:function(e,n){var a={requestId:e,filePath:n},r=AM_APP_ROOT+"/DividendTaxVoucher/Download";return t.fetchFile(a,r)},downloadAllTaxVouchers:function(t){return e({method:"POST",url:AM_APP_ROOT+"/DividendTaxVoucher/DownloadAll",data:t})}};return n}])}},function(e,t){e.exports=function(e){e.factory("AccountAdminBeanService",["$translate","ResourceService",function(e,t){var n={},a={},r=void 0;return n.getAccountAdminBean=function(){return r=t.fetch(AM_APP_ROOT+"/AccountAdminBean").then(function(e){a=e.data},angular.noop)},n.onReady=function(){return angular.isUndefined(r)?n.getAccountAdminBean():r},n.isDefined=function(){return!angular.isUndefined(r)},n.getCurrentAccountAdminBean=function(){return a},n.getLastTab=function(){return angular.isUndefined(r)?"accounts":a.lastTab},n.setLastTab=function(e){angular.isUndefined(r)||(a.lastTab=e)},n}])}},function(e,t,n){e.exports=function(e){n(391)(e),n(392)(e),n(393)(e),n(396)(e)}},function(e,t,n){e.exports=function(e){n(3)(e,"configureVirtualFxPage",{template:"<configure-virtual-fx-main></configure-virtual-fx-main>"},function(){return[n.e(8).then(n.t.bind(null,405,7))]})}},function(e,t,n){e.exports=function(e){n(3)(e,"configureIrishInterestWithholdingStatusPage",{template:"<configure-irish-interest-withholding-status></configure-irish-interest-withholding-status>"},function(){return[n.e(35).then(n.t.bind(null,406,7))]})}},function(e,t,n){e.exports=function(e){n(394)(e)}},function(e,t,n){e.exports=function(e){e.component("amLoginTaskSummaryPage",{template:n(395),controller:["NavigationAction","PageService","NativeAppCommunicationService","NavigationService","$http","$translate","SessionService","ResourceService","BreadcrumbAction",function(e,t,n,a,r,i,o,s,l){var c=this;c.toggleSkipLoginTask=function(e){-1!==c.skippedTasks.indexOf(e)?c.skippedTasks.splice(c.skippedTasks.indexOf(e),1):c.skippedTasks.push(e),o.setItem("skippedTasks",c.skippedTasks)},c.toggleDeclineLoginTask=function(e){-1!==c.declinedTasks.indexOf(e)?c.declinedTasks.splice(c.declinedTasks.indexOf(e),1):c.declinedTasks.push(e),o.setItem("declinedTasks",c.declinedTasks)},c.completeLoginTask=function(e){-1!==c.skippedTasks.indexOf(e)&&c.skippedTasks.splice(c.skippedTasks.indexOf(e),1),s.create("/AccountManagement/LoginTaskSummary/updateCurrentLoginTaskIndex",{selectedLoginTaskId:e}).then(function(e){return a.navigate({id:"AM_LOGIN_TASK",path:"template/page/branch/amLoginTask.html",skipFetch:!0})})},c.isLoginTaskCompleted=function(e){return-1!==c.completedTasks.indexOf(e)},c.isLoginTaskSkipped=function(e){return-1!==c.skippedTasks.indexOf(e)||-1!==c.skippedByTaskStepTasks.indexOf(e)},c.isLoginTaskSkippedByTaskStep=function(e){return-1!==c.skippedByTaskStepTasks.indexOf(e)},c.isLoginTaskDeclined=function(e){return-1!==c.declinedTasks.indexOf(e)||-1!==c.declinedByTaskStepTasks.indexOf(e)},c.isLoginTaskDeclinedByTaskStep=function(e){return-1!==c.declinedByTaskStepTasks.indexOf(e)},c.shouldDisableContinueButton=function(){if(!c.loaded)return!0;for(var e=0;e<c.loginTasks.length;e++){var t=c.loginTasks[e].id;if(!c.isLoginTaskCompleted(t)&&!c.isLoginTaskSkipped(t)&&!c.isLoginTaskDeclined(t))return!0}return!1},c.getContinueButtonText=function(){return c.hasPostLoginTask?i.instant("word.continue"):"T"===c.serverParams.nativeAppRedirect?i.instant("resume.login"):c.portalLogin?i.instant("loginTask.proceedToPortal"):i.instant("loginTask.proceedToAm")},c.getLoginTaskTitle=function(e){if("FORM_LOGIN_TASK"===e.type){var t="login.tasks."+e.form+".title";return i.instant(t)!==t?i.instant(t):i.instant("form.title."+e.task.formNumber)}if("LOGIN_MESSAGE"===e.type){t="login.tasks."+e.messageType+".title";return i.instant(t)!==t?i.instant(t):i.instant("loginMessageType."+e.messageType)}if("ACORS_LOGIN_TASK"===e.type)return i.instant("login.tasks."+e.acorsTaskType+".title")},c.goToAm=function(){var t={path:"/AccountManagement/LoginTaskBranch",navigateAction:e.REDIRECT};a.navigate(t)},c.getContinueButtonAction=function(){s.create("/AccountManagement/LoginTaskSummary/skipOrDeclineLoginTasks",{skippedTasks:c.skippedTasks,declinedTasks:c.declinedTasks,completedTasks:c.completedTasks,skippedByTaskStepTasks:c.skippedByTaskStepTasks,declinedByTaskStepTasks:c.declinedByTaskStepTasks}).then(function(e){c.hasPostLoginTask?s.create("/AccountManagement/LoginTaskSummary/updateCurrentLoginTaskIndex",{selectedLoginTaskId:c.firstPostLoginTaskId}).then(function(e){var t={id:"AM_LOGIN_TASK",path:"template/page/branch/amLoginTask.html",breadcrumb:l.CLEAR,skipFetch:!0};return a.navigate(t)}):"T"===c.serverParams.nativeAppRedirect?n.closeWebView():c.goToAm()})},c.getLoginTaskType=function(e){return"FORM_LOGIN_TASK"===e.type?e.form:"LOGIN_MESSAGE"===e.type?e.messageType:"ACORS_LOGIN_TASK"===e.type?e.acorsTaskType:void 0},c.$onInit=function(){var e=t.getCurrentPage().pageData;e.hideHeader=!0,c.loginTasks=[],c.loaded=!1,s.fetch("/AccountManagement/LoginTaskSummary").then(function(e){var t=e.data;c.loginTasks=t.loginTasks||[],c.hasPostLoginTask=t.hasPostLoginTask||!1,c.firstPostLoginTaskId=t.firstPostLoginTaskId||0,c.portalLogin=t.portalLogin||!1}).finally(function(){c.loaded=!0}),c.serverParams=t.getCurrentPage().serverParams||{},"T"===c.serverParams.clearSessionStorage&&(o.setItem("completedTasks",[]),o.setItem("skippedTasks",[]),o.setItem("skippedByTaskStepTasks",[]),o.setItem("declinedTasks",[]),o.setItem("declinedByTaskStepTasks",[])),c.completedTasks=o.getItem("completedTasks")||[],c.skippedTasks=o.getItem("skippedTasks")||[],c.skippedByTaskStepTasks=o.getItem("skippedByTaskStepTasks")||[],c.declinedTasks=o.getItem("declinedTasks")||[],c.declinedByTaskStepTasks=o.getItem("declinedByTaskStepTasks")||[],null!==e.taskId&&null!==e.action&&("completed"===e.action?(c.completedTasks.push(e.taskId),o.setItem("completedTasks",c.completedTasks)):"skipped"===e.action?(c.skippedByTaskStepTasks.push(e.taskId),o.setItem("skippedByTaskStepTasks",c.skippedByTaskStepTasks)):"declined"===e.action&&(c.declinedByTaskStepTasks.push(e.taskId),o.setItem("declinedByTaskStepTasks",c.declinedByTaskStepTasks)))}}]})}},function(e,t){e.exports='<div page-structure no-border="true">\r\n    <div class="row">\r\n        <div class="col-12">\r\n            <h6 class="text-success">\r\n                {{\'login.tasks.title\' | translate}}\r\n            </h6>\r\n            <h3 aria-level="2">\r\n                {{\'login.tasks.header\' | translate}}\r\n            </h3>\r\n            <p>{{\'login.tasks.description\' | translate}}</p>\r\n            <hr>\r\n        </div>\r\n    </div>\r\n    <div ng-repeat="loginTask in $ctrl.loginTasks">\r\n        <div class="row">\r\n            <div class="col-1 {{($ctrl.isLoginTaskSkipped(loginTask.id) || $ctrl.isLoginTaskDeclined(loginTask.id)) ? \'tile disabled\' : \'\'}}">\r\n                <i class="{{$ctrl.isLoginTaskCompleted(loginTask.id) ? \'fas fa-2x fa-check-circle text-success\' : \'far fa-2x fa-circle\' }}"></i>\r\n            </div>\r\n            <div class="col-xs-11 col-sm-11 col-md-11 col-lg-7">\r\n                <h6 ng-if="$ctrl.isLoginTaskCompleted(loginTask.id)"\r\n                    class="text-success">\r\n                    {{\'word.completed\' | translate}}\r\n                </h6>\r\n                <h6 ng-if="!$ctrl.isLoginTaskCompleted(loginTask.id) && !loginTask.skippable && !loginTask.declinable"\r\n                    class="text-danger">\r\n                    {{\'login.tasks.requiredToContinue\' | translate}}\r\n                </h6>\r\n                <div class="{{($ctrl.isLoginTaskSkipped(loginTask.id) || $ctrl.isLoginTaskDeclined(loginTask.id) || $ctrl.isLoginTaskCompleted(loginTask.id)) ? \'tile disabled\' : \'\'}}">\r\n                    <h6>\r\n                        {{$ctrl.getLoginTaskTitle(loginTask)}}\r\n                    </h6>\r\n                    <p ng-if="loginTask.type !== \'FORM_LOGIN_TASK\'">\r\n                        {{\'login.tasks.\' + $ctrl.getLoginTaskType(loginTask) +\r\n                    \'.description\' | translate}}\r\n                    </p>\r\n                </div>\r\n            </div>\r\n            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-4">\r\n                <div ng-if="!$ctrl.isLoginTaskCompleted(loginTask.id)">\r\n                    <am-button\r\n                            btn-text="{{\'word.verb.complete\' | translate}}"\r\n                            btn-type="primary"\r\n                            on-click="$ctrl.completeLoginTask(loginTask.id)"\r\n                            is-disabled="$ctrl.isLoginTaskSkipped(loginTask.id) || $ctrl.isLoginTaskDeclined(loginTask.id)"></am-button>\r\n\r\n                    <am-button\r\n                            btn-text="{{\'word.verb.later\' | translate}}"\r\n                            btn-type="secondary"\r\n                            on-click="$ctrl.toggleSkipLoginTask(loginTask.id)"\r\n                            is-disabled="$ctrl.isLoginTaskSkippedByTaskStep(loginTask.id) || $ctrl.isLoginTaskDeclined(loginTask.id)"\r\n                            ng-if="loginTask.skippable && !$ctrl.isLoginTaskSkipped(loginTask.id)"></am-button>\r\n\r\n                    <am-button\r\n                            btn-text="{{\'word.verb.later\' | translate}}"\r\n                            btn-type="success"\r\n                            on-click="$ctrl.toggleSkipLoginTask(loginTask.id)"\r\n                            btn-icon="fa-check"\r\n                            is-disabled="$ctrl.isLoginTaskSkippedByTaskStep(loginTask.id) || $ctrl.isLoginTaskDeclined(loginTask.id)"\r\n                            ng-if="loginTask.skippable && $ctrl.isLoginTaskSkipped(loginTask.id)"></am-button>\r\n\r\n                    <am-button\r\n                            btn-text="{{\'word.decline\' | translate}}"\r\n                            btn-type="secondar"\r\n                            on-click="$ctrl.toggleDeclineLoginTask(loginTask.id)"\r\n                            is-disabled="$ctrl.isLoginTaskDeclinedByTaskStep(loginTask.id) || $ctrl.isLoginTaskSkipped(loginTask.id)"\r\n                            ng-if="loginTask.declinable && !$ctrl.isLoginTaskDeclined(loginTask.id)"></am-button>\r\n\r\n                    <am-button\r\n                            btn-text="{{\'word.decline\' | translate}}"\r\n                            btn-type="danger"\r\n                            on-click="$ctrl.toggleDeclineLoginTask(loginTask.id)"\r\n                            btn-icon="fa-xmark"\r\n                            is-disabled="$ctrl.isLoginTaskDeclinedByTaskStep(loginTask.id) || $ctrl.isLoginTaskSkipped(loginTask.id)"\r\n                            ng-if="loginTask.declinable && $ctrl.isLoginTaskDeclined(loginTask.id)"></am-button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <hr>\r\n    </div>\r\n    <div class="row">\r\n        <div class="col-12">\r\n            <div class="float-right">\r\n                <am-button\r\n                        btn-text="{{ $ctrl.getContinueButtonText() }}"\r\n                        btn-type="primary"\r\n                        on-click="$ctrl.getContinueButtonAction()"\r\n                        is-disabled="$ctrl.shouldDisableContinueButton()"></am-button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'},function(e,t,n){e.exports=function(e){n(3)(e,"withholdingStatementDashboardPage",{template:"<withholding-statement-dashboard></withholding-statement-dashboard>"},function(){return[n.e(36).then(n.t.bind(null,407,7))]})}},function(e,t){e.exports={typeOrder:function(e){return"PERCENTAGE_NET_LIQUIDATION"===e?1:"FLAT_FEE"===e?2:"PERCENTAGE_PNL"===e?3:"INVOICING"===e?4:"TRADE_UNIT"===e?5:"HFCIP"===e?6:7}}},function(e,t){e.exports=function(e){for(var t=e.split("-"),n=t[0],a=1;a<t.length;++a)n+=t[a].substring(0,1).toUpperCase()+t[a].substring(1);return n}},function(e,t){e.exports=function(e){function t(e,t,n,a,r){var i=this,o=function(){var t={registrationInfo:i.registrationInfo,leiErrorExplanations:i.leiErrorExplanations};i.collectEmirInfo()&&(t.emirInfo=i.emirInfo),e.stepForward(t).catch(function(e){e.data&&e.data.errors&&Object.keys(e.data.errors).length>0&&(i.leiErrorExplanations=e.data.leiErrorExplanations||[],i.leiErrorExplanations.length>0&&l())})},s=function(){t.closeModal(),o()},l=function(){var e={contentClass:"modal-gray",title:n.instant("word.attention"),templateUrl:"lei-error-explanation-modal.component",modalData:{leiErrorExplanations:i.leiErrorExplanations||[],lei:i.registrationInfo.lei}};r(function(){t.openModal(e).then(function(e){angular.isUndefined(e)?i.leiErrorExplanations=[]:(i.leiErrorExplanations=e.leiErrorExplanations||[],c())})},500)},c=function(){if(i.collectEmirInfo())if(i.emirInfo.electsReporting){if(angular.isDefined(i.emirInfo.category)&&-1!=["FC_MINUS","FC_PLUS"].indexOf(i.emirInfo.category)&&angular.isDefined(i.emirInfo.subCategories)&&(i.emirInfo.subCategories.indexOf("ALTERNATIVE_INVESTMENT_FUND")>=0||i.emirInfo.subCategories.indexOf("UCITS")>=0)){var e={templateUrl:"fund-manager-warning.component",title:n.instant("word.warning"),modalData:{warning:n.instant("emir.fundManager.warning",{breakTag:"<br>"})},buttons:[{label:"word.no",alignment:"left",fn:t.closeModal},{label:"word.yes",alignment:"right",btnType:"primary",fn:function(){s()}}]};return void t.openWarningModal(e)}}else if(angular.isDefined(i.emirInfo.electsReporting)&&!i.emirInfo.electsReporting&&!i.noReportingWarned){i.noReportingWarned=!0;e={templateUrl:"error-modal.component",title:n.instant("word.warning"),buttons:[{label:"word.cancel",alignment:"left",fn:t.closeModal},{label:"emir.doNotDelegate",alignment:"right",btnType:"primary",fn:function(){s()}}],modalData:{errors:[n.instant("emir.noDelegatedReporting.warning",{strongStart:"<strong>",strongEnd:"</strong>",breakTag:"<br>"})]}};return void t.openWarningModal(e)}o()};i.$onInit=function(){i.rules=e.getSequenceData().rules,i.registrationInfo=e.getSequenceData().registrationInfo||{},i.hasPendingLeiValidation=e.getSequenceData().hasPendingLeiValidation,i.emirElectionType=e.getSequenceData().emirElectionType,i.emirInfo=e.getSequenceData().emirInfo||{},i.leiErrorExplanations=e.getSequenceData().leiErrorExplanations||[],i.noReportingWarned=!1,null==i.emirInfo.electsReporting&&(i.emirInfo.electsReporting=void 0),i.getErrors=function(){return e.getSequenceData().errors},e.configureButtons(i.applyButtons)},i.getLeiInputMask=function(){return"'alias': 'latin', 'mask': '*{20}'"},i.applyButtons={canGoBack:!0,continueBtn:{onClick:c}},i.collectEmirInfo=function(){return angular.isDefined(i.rules.emirInfoRules)}}e.controller("EmirExistingLeiDetails",t),t.$inject=["DynamicSequenceService","ModalService","$translate","$filter","$timeout"]}},function(e,t){e.exports={ComponentLoadEvent:function(e,t){this.componentId=e,this.loaded=t,this.submit=void 0}}},function(e,t,n){var a=n(310),r=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],i=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];t.getBlocksCount=function(e,t){switch(t){case a.L:return r[4*(e-1)+0];case a.M:return r[4*(e-1)+1];case a.Q:return r[4*(e-1)+2];case a.H:return r[4*(e-1)+3];default:return}},t.getTotalCodewordsCount=function(e,t){switch(t){case a.L:return i[4*(e-1)+0];case a.M:return i[4*(e-1)+1];case a.Q:return i[4*(e-1)+2];case a.H:return i[4*(e-1)+3];default:return}}},function(e,t){t.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}},function(e,t){var n="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+",a="(?:(?![A-Z0-9 $%*+\\-./:]|"+(n=n.replace(/u/g,"\\u"))+")(?:.|[\r\n]))+";t.KANJI=new RegExp(n,"g"),t.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),t.BYTE=new RegExp(a,"g"),t.NUMERIC=new RegExp("[0-9]+","g"),t.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");var r=new RegExp("^"+n+"$"),i=new RegExp("^[0-9]+$"),o=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");t.testKanji=function(e){return r.test(e)},t.testNumeric=function(e){return i.test(e)},t.testAlphanumeric=function(e){return o.test(e)}},function(e,t){function n(e){if("string"!=typeof e)throw new Error("Color should be defined as hex string");var t=e.slice().replace("#","").split("");if(t.length<3||5===t.length||t.length>8)throw new Error("Invalid hex color: "+e);3!==t.length&&4!==t.length||(t=Array.prototype.concat.apply([],t.map(function(e){return[e,e]}))),6===t.length&&t.push("F","F");var n=parseInt(t.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:255&n,hex:"#"+t.slice(0,6).join("")}}t.getOptions=function(e){e||(e={}),e.color||(e.color={});var t=void 0===e.margin||null===e.margin||e.margin<0?4:e.margin,a=e.width&&e.width>=21?e.width:void 0,r=e.scale||4;return{width:a,scale:a?4:r,margin:t,color:{dark:n(e.color.dark||"#000000ff"),light:n(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}},t.getScale=function(e,t){return t.width&&t.width>=e+2*t.margin?t.width/(e+2*t.margin):t.scale},t.getImageWidth=function(e,n){var a=t.getScale(e,n);return Math.floor((e+2*n.margin)*a)},t.qrToImageData=function(e,n,a){for(var r=n.modules.size,i=n.modules.data,o=t.getScale(r,a),s=Math.floor((r+2*a.margin)*o),l=a.margin*o,c=[a.color.light,a.color.dark],u=0;u<s;u++)for(var d=0;d<s;d++){var p=4*(u*s+d),g=a.color.light;if(u>=l&&d>=l&&u<s-l&&d<s-l)g=c[i[Math.floor((u-l)/o)*r+Math.floor((d-l)/o)]?1:0];e[p++]=g.r,e[p++]=g.g,e[p++]=g.b,e[p]=g.a}}},,,,function(e,t,n){"use strict";n(13),n(409),n(64),n(297),n(547),n(672),n(867),n(911),n(1336),n(1695),n(1724),n(1763),n(1833),n(1842),n(1861),n(1900);var a=["ngAnimate","pascalprecht.translate","ibmarketing.authentication","ibmarketing.clientfees","ibmarketing.common","ibmarketing.datamanipulation","ibmarketing.dataservices","ibmarketing.entity","ibmarketing.entityownership","ibmarketing.funding","ibmarketing.investmentconfig","ibmarketing.ipo","ibmarketing.linkage","ibmarketing.marketplace","ibmarketing.nsdl","ibmarketing.platformfeatures","ibmarketing.questionnaire","ibmarketing.referral"],r=angular.module("amApp",a);r.SERVER_PATH="/AccountManagement",n(312)(r),n(313)(r),n(371)(r),n(373)(r),n(375)(r),n(1909)(r),n(384)(r),n(390)(r),r.config(["$animateProvider","$windowProvider","$translatePartialLoaderProvider",function(e,t,n){e.classNameFilter(/am-animate/),t.$get().AM_LOCAL_WEBAPPS?n.addPart("/common.webapp/i18n/ibcust_Countries_v1"):n.addPart(AM_APP_ROOT+"/resources/i18n/ibcust_Countries_v1"),n.addPart(AM_APP_ROOT+"/resources/i18n/ibcust_MDAnnotations_v1")}]),r.run(["$rootScope","$window","$compile","$translate","$q","$timeout","APPLICATION_THEME","SESSION_ID","AM_BRANCH","AM_BAR_TYPE","NavigationService","UserService","LanguageService","MenuService","PageService","PendingItemService","PickerService","StateLocationService","DynamicSequenceService","ThemeService","LoginTaskService","AmCsToolsService","TelemetryService",function(e,t,n,a,r,i,o,s,l,c,u,d,p,g,f,m,v,h,b,y,D,E,x){var A;e.AM_LOADING_TEXT=t.AM_LOADING_TEXT,e.isAmLoaded=!1,A=0===s.length?[a.onReady()]:"LOGIN_TASK"===l?[a.onReady(),d.onReady(),p.onReady(),v.onReady()]:[a.onReady(),d.onReady(),p.onReady(),v.onReady(),g.onReady()],r.all(A).finally(function(){!function t(){$(".page-content").length?(d.getUser().pendingItemNotifications&&""===c&&m.fetchPendingItems(),x.onReady(),u.navigateToInitialPage(),f.resizeContent(),e.isAmLoaded=!0,e.$broadcast("amLoaded",!0)):i(t,500)}()});var C=t.getCookie("XYZAB_AM.LOGIN");!function e(){t.getCookie("XYZAB_AM.LOGIN")!==C?d.showSsoExpiration():i(e,5e3)}(),t.amHooks={tickle:d.tickle,onUserReady:d.onReady,getUser:d.getUser,removeNotification:d.removeNotification,fetchAnonKey:d.fetchAnonKey,pendingItemNotifications:d.getUser().pendingItemNotifications,navigateAction:u.specialActionNavigation,getPendingItems:m.getPendingItems,getActivePendingItem:m.getActivePendingItem,fetchPendingItems:m.fetchPendingItems,finishPendingItem:m.finishPendingItem,finishPendingRequest:m.finishPendingRequest,navigateToPendingItem:m.navigateToPendingItem,navigateToPendingItems:m.navigateToPendingItems,logout:d.logout,isLoginTaskActive:D.isActive,getActiveLoginTask:D.getActiveTask,declineLoginTask:D.decline,csShowPicker:E.showPicker,csGetSizeMode:E.getSizeMode,setPageTitle:function(t){e.$applyAsync(function(){angular.isDefined(f.getCurrentPage())&&(f.getCurrentPage().title=t)})}},t.onbeforeunload=function(t){var n={};if(e.$broadcast("$onbeforeunload",n).defaultPrevented)return n.message},e.$on("$onbeforeunload",function(e,n){var r=u.getNavigationValidator();angular.isUndefined(t.onebar)||angular.isUndefined(r)||!0===r({})?n.message=void 0:(n.message=a.instant("sequence.warning.text"),e.preventDefault())}),angular.isDefined(t.Vue)&&new Vue({watch:{"$media.theme":function(e){y.changeColor(e.toUpperCase())},"$media.wideMode":function(e){y.changeSize(e?"WIDE":"STANDARD")}}}),ENABLE_BACK_FUNCTIONALITY;var T=ENABLE_BACK_FUNCTIONALITY||window.sessionStorage.getItem("enable.stateless.navigation");T&&(e.$on("$locationChangeSuccess",function(e,t,n){h.locationChange(e,t,n)}),e.$on("$navigationSuccess",function(e,t,n){h.stateChange(t,n)}))}])},function(e,t,n){"use strict";var a=angular.module("ibmarketing.clientfees",[]);a.WEBAPP_ROOT="/clientfees.webapp",a.DEFAULT_SERVER_PATH="/AccountManagement",n(410)(a)},function(e,t,n){e.exports=function(e){n(411)(e),n(501)(e),n(503)(e),n(506)(e),n(523)(e),n(527)(e),n(544)(e)}},function(e,t,n){e.exports=function(e){n(412)(e),n(417)(e),n(419)(e),n(422)(e),n(427)(e),n(432)(e),n(439)(e),n(452)(e),n(455)(e),n(462)(e),n(475)(e),n(480)(e),n(483)(e),n(486)(e),n(498)(e)}},function(e,t,n){e.exports=function(e){n(413)(e),n(415)(e)}},function(e,t,n){e.exports=function(e){e.component("feesConfigurationChangeApproval",{bindings:{feesConfiguration:"<"},template:n(414)(),controller:["CONTENT_HOST","ClientFeesService",function(e,t){var n=this;n.$onInit=function(){n.tradeUnitFee=void 0,n.invoicingFee=void 0,n.hfcipFee=void 0,n.getFeeTypeDescription=t.getFeeTypeDescription,n.getTradeUnitLink=function(){var t="https://"+e+"/en/index.php?f=14528";return{feeLink:'<a href="'+t+'" target="_blank">'+t+"</a>"}},n.ibFeeFilter=function(e){return"TRADE_UNIT"!==e.type&&t.isFeeTypeCalculatedByIb(e.type)},n.isFeeCalculatedByIb=!1;for(var a=0;a<n.feesConfiguration.fees.length;++a){var r=n.feesConfiguration.fees[a];t.isFeeTypeCalculatedByIb(r.type)&&(n.isFeeCalculatedByIb=!0),"INVOICING"===r.type?n.invoicingFee=r:"HFCIP"===r.type?n.hfcipFee=r:"TRADE_UNIT"===r.type&&(n.tradeUnitFee=r)}if(n.clientChargeConfig="","ADVISOR"===n.feesConfiguration.type&&angular.isDefined(n.feesConfiguration.charges)){var i=n.feesConfiguration.charges.chargeCommissions,o=n.feesConfiguration.charges.chargeOtherFees;n.clientChargeConfig=i&&o?"NONE":i&&!o?"OTHER":!i&&o?"COMMISSIONS":"ALL"}}}]})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<div class="form-review" id="fee-configuration"><div ng-switch="::$ctrl.feesConfiguration.strategyType"><div ng-switch-when="NO_FEE"><h4>{{\'feesConfigurationType.\' + $ctrl.feesConfiguration.type | translate}}</h4><p translate="feeApproval.strategyType.NO_FEE" translate-values="{ masterAccountTitle : $ctrl.feesConfiguration.masterAccountTitle }"></p></div><div ng-switch-when="DIRECT_BILLING"><h4>{{\'feesConfigurationType.\' + $ctrl.feesConfiguration.type | translate}}</h4><p translate="feeApproval.strategyType.DIRECT_BILLING" translate-values="{ masterAccountTitle : $ctrl.feesConfiguration.masterAccountTitle }"></p></div><div ng-switch-default><div ng-if="::$ctrl.isFeeCalculatedByIb"><h4>{{\'feesConfigurationType.\' + $ctrl.feesConfiguration.type | translate}}</h4><p translate="feeApproval.feesCalculatedByIb" translate-values="{ masterAccountTitle : $ctrl.feesConfiguration.masterAccountTitle }"></p><div ng-repeat="fee in ::$ctrl.feesConfiguration.fees | filter:$ctrl.ibFeeFilter | sortFees"><h6 class="subtitle">{{\'feeType.\' + fee.type | translate}} {{$ctrl.getFeeTypeDescription($ctrl.feesConfiguration, fee.type) | translate}}</h6><net-liquidation-fee-review ng-if="::fee.type === \'PERCENTAGE_NET_LIQUIDATION\'" fee="::fee"></net-liquidation-fee-review><flat-fee-review ng-if="::fee.type === \'FLAT_FEE\'" fee="::fee"></flat-fee-review><percentage-pnl-fee-review ng-if="::fee.type === \'PERCENTAGE_PNL\'" fee="::fee"></percentage-pnl-fee-review></div><div ng-if="::$ctrl.tradeUnitFee"><h6 class="subtitle">{{\'feeType.TRADE_UNIT\' | translate}}</h6><p translate="feeApproval.notes.tradeUnit" translate-values="$ctrl.getTradeUnitLink()"></p><br><trade-unit-fee-review fee="::$ctrl.tradeUnitFee"></trade-unit-fee-review></div></div><div ng-if="::$ctrl.invoicingFee"><h4>{{\'feeType.INVOICING\' | translate}}</h4><p ng-if="::$ctrl.invoicingFee.limit &gt; 0 &amp;&amp; $ctrl.invoicingFee.nlvCap === 0"><span translate="feeApproval.invoicing.limitNoNlvCap" translate-values="{ masterAccountTitle : $ctrl.feesConfiguration.masterAccountTitle, strongStart : \'&lt;strong&gt;\', strongEnd : \'&lt;/strong&gt;\', invoiceMaxFee : ($ctrl.invoicingFee.limit | currency:$ctrl.invoicingFee.currencyType + \' \'), frequencyUnit : (\'feeFrequency.unit.\' + $ctrl.invoicingFee.frequency | translate | lowercase) }"></span></p><p ng-if="::$ctrl.invoicingFee.limit === 0 &amp;&amp; $ctrl.invoicingFee.nlvCap &gt; 0"><span translate="feeApproval.invoicing.nlvCapGeneral" translate-values="{ masterAccountTitle : $ctrl.feesConfiguration.masterAccountTitle }"></span><span>&nbsp;</span><span translate="feeApproval.invoicing.noLimitNlvCap" translate-values="{ masterAccountTitle : $ctrl.feesConfiguration.masterAccountTitle, strongStart : \'&lt;strong&gt;\', strongEnd : \'&lt;/strong&gt;\', nlvMaxFee : $ctrl.invoicingFee.nlvCap }"></span><span>&nbsp;</span><span translate="feeApproval.invoicing.nlvCapCalulation" translate-values="{ strongStart : \'&lt;strong&gt;\', strongEnd: \'&lt;/strong&gt;\', nlvMaxFee : $ctrl.invoicingFee.nlvCap, frequencyUnit : (\'feeFrequency.unit.\' + $ctrl.invoicingFee.frequency | translate | lowercase) }"></span><span>&nbsp;</span><span translate="feeApproval.invoicing.nlvCapSum" translate-values="{ frequencyUnit : (\'feeFrequency.unit.\' + $ctrl.invoicingFee.frequency | translate | lowercase) }"></span><span>&nbsp;</span><span translate="feeApproval.invoicing.latestAccounts" translate-values="{ strongStart : \'&lt;strong&gt;\', strongEnd: \'&lt;/strong&gt;\', nlvMaxFee : $ctrl.invoicingFee.nlvCap, frequencyUnit : (\'feeFrequency.unit.plural.\' + $ctrl.invoicingFee.frequency | translate | lowercase) }"></span></p><p ng-if="::$ctrl.invoicingFee.limit &gt; 0 &amp;&amp; $ctrl.invoicingFee.nlvCap &gt; 0"><span translate="feeApproval.invoicing.nlvCapGeneral" translate-values="{ masterAccountTitle : $ctrl.feesConfiguration.masterAccountTitle }"></span><span>&nbsp;</span><span translate="feeApproval.invoicing.limitNlvCap" translate-values="{ masterAccountTitle : $ctrl.feesConfiguration.masterAccountTitle, strongStart : \'&lt;strong&gt;\', strongEnd : \'&lt;/strong&gt;\', nlvMaxFee : $ctrl.invoicingFee.nlvCap, invoiceMaxFee : ($ctrl.invoicingFee.limit | currency:$ctrl.invoicingFee.currencyType + \' \'), frequencyUnit : (\'feeFrequency.unit.\' + $ctrl.invoicingFee.frequency | translate | lowercase) }"></span><span>&nbsp;</span><span translate="feeApproval.invoicing.nlvCapCalulation" translate-values="{ strongStart : \'&lt;strong&gt;\', strongEnd: \'&lt;/strong&gt;\', nlvMaxFee : $ctrl.invoicingFee.nlvCap, frequencyUnit : (\'feeFrequency.unit.\' + $ctrl.invoicingFee.frequency | translate | lowercase) }"></span><span>&nbsp;</span><span translate="feeApproval.invoicing.nlvCapSum" translate-values="{ frequencyUnit : (\'feeFrequency.unit.\' + $ctrl.invoicingFee.frequency | translate | lowercase) }"></span><span>&nbsp;</span><span translate="feeApproval.invoicing.limitNlvCapLower" translate-values="{ masterAccountTitle : $ctrl.feesConfiguration.masterAccountTitle }"></span></p></div><div ng-if="::$ctrl.hfcipFee"><h4>{{\'feeType.HFCIP\' | translate}}</h4><br><hfcip-fee-review fee="::$ctrl.hfcipFee"></hfcip-fee-review></div></div></div><div ng-if="::$ctrl.clientChargeConfig !== \'\'"><h4>{{\'feeApproval.additionalCharges\' | translate}}</h4><p translate="{{\'feeApproval.charges.\' + $ctrl.clientChargeConfig}}" translate-values="{ masterAccountTitle : $ctrl.feesConfiguration.masterAccountTitle }"></p></div><div ng-if="::$ctrl.feesConfiguration.type === \'ADVISOR\' &amp;&amp; $ctrl.feesConfiguration.effectiveFrom"><br><am-form-label label-text="{{\'fee.label.advisor.feesEffectiveFrom\' | translate}}" value-text="{{$ctrl.feesConfiguration.effectiveFrom}}"></am-form-label></div></div>'}},function(e,t,n){e.exports=function(e){e.component("feesProfileChangeApproval",{bindings:{feesProfile:"<"},template:n(416)(),controller:["CONTENT_HOST",function(e){var t=this;t.$onInit=function(){t.getFeeCapLink=function(){var t="https://"+e+"/en/index.php?f=14529#capslimitations";return{feeLink:'<a href="'+t+'" target="_blank">'+t+"</a>"}}}}]})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<fees-configuration-change-approval fees-configuration="$ctrl.feesProfile.feesConfiguration"></fees-configuration-change-approval><br><associated-mmc-fees-review associated-mmc-fees="$ctrl.feesProfile.associatedMmcFees"></associated-mmc-fees-review><div class="alert alert-info" ng-if="::$ctrl.feesProfile.approvalNotes"><p ng-repeat="note in $ctrl.feesProfile.approvalNotes" translate="{{\'feeApproval.notes.\'+note}}" translate-values="$ctrl.getFeeCapLink()">       </p></div>'}},function(e,t,n){e.exports=function(e){n(418)(e)}},function(e,t){e.exports=function(e){e.component("semielectronicFeesConfiguration",{template:function(){var e="";return e+='<loading-overlay loading-template="candyStripe" ng-if="$ctrl.isPageLoading()"></loading-overlay>',e+='<ng-include src="$ctrl.getPageSource()" onload="$ctrl.finishPageContent()"></ng-include>',e},controller:["PageService","NavigationService",function(t,n){var a=this;a.$onInit=function(){a.isPageLoading=t.isPageLoading,a.getPageSource=t.getPagePath,a.finishPageContent=t.onPartialLoad;var r={id:"SemiElectronicFees",path:e.WEBAPP_ROOT+"/sequences/feesconfiguration/semiElectronicFeesSequence.html"};n.navigate(r)}}]})}},function(e,t,n){e.exports=function(e){n(420)(e)}},function(e,t,n){e.exports=function(e){e.component("feesConfigurationReview",{bindings:{feesConfiguration:"<"},template:n(421)(),controller:["ClientFeesService",function(e){var t=this;t.$onInit=function(){t.getFeeTypeDescription=e.getFeeTypeDescription}}]})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<div ng-switch="$ctrl.feesConfiguration.strategyType"><div ng-switch-when="NO_FEE"><p translate="feesStrategyType.review.NO_FEE" translate-values="{ \'feesConfigurationType\' : (\'feesConfigurationType.\' + $ctrl.feesConfiguration.type | translate) }"></p></div><div ng-switch-when="DIRECT_BILLING"><p>{{\'feesStrategyType.review.DIRECT_BILLING\' | translate}}</p></div><div ng-switch-default><h6 class="subtitle" ng-if="$ctrl.feesConfiguration.type === \'BROKER\'">{{\'feesStrategyType.\' + $ctrl.feesConfiguration.strategyType | translate}}</h6><div ng-repeat="fee in $ctrl.feesConfiguration.fees | sortFees"><h6 class="subtitle">{{\'feeType.\' + fee.type | translate}} {{$ctrl.getFeeTypeDescription($ctrl.feesConfiguration, fee.type) | translate}}</h6><net-liquidation-fee-review ng-if="::fee.type === \'PERCENTAGE_NET_LIQUIDATION\'" fee="::fee"></net-liquidation-fee-review><flat-fee-review ng-if="::fee.type === \'FLAT_FEE\'" fee="::fee"></flat-fee-review><percentage-pnl-fee-review ng-if="::fee.type === \'PERCENTAGE_PNL\'" fee="::fee"></percentage-pnl-fee-review><trade-unit-fee-review ng-if="::fee.type === \'TRADE_UNIT\'" fee="::fee"></trade-unit-fee-review><interest-rate-fee-review ng-if="::fee.type === \'INTEREST_RATE\'" fee="::fee"></interest-rate-fee-review><invoicing-fee-review ng-if="::fee.type === \'INVOICING\'" fee="::fee"></invoicing-fee-review><hfcip-fee-review ng-if="::fee.type === \'HFCIP\'" fee="::fee"></hfcip-fee-review></div></div></div><div ng-if="$ctrl.feesConfiguration.type === \'ADVISOR\' &amp;&amp; $ctrl.feesConfiguration.charges"><br><h4>{{\'fee.heading.chargeToAdvisor\' | translate}}</h4><am-form-label label-text="{{\'fee.label.advisor.chargeCommissions\' | translate}}" value-text="{{($ctrl.feesConfiguration.charges.chargeCommissions ? \'word.yes\' : \'word.no\') | translate}}"></am-form-label><am-form-label label-text="{{\'fee.label.advisor.chargeOther\' | translate}}" value-text="{{($ctrl.feesConfiguration.charges.chargeOtherFees ? \'word.yes\' : \'word.no\') | translate}}"></am-form-label></div><div ng-if="$ctrl.feesConfiguration.type === \'ADVISOR\' &amp;&amp; $ctrl.feesConfiguration.effectiveFrom"><br><am-form-label label-text="{{\'fee.label.advisor.feesEffectiveFrom\' | translate}}" value-text="{{$ctrl.feesConfiguration.effectiveFrom}}"></am-form-label></div>'}},function(e,t,n){e.exports=function(e){n(423)(e),n(425)(e)}},function(e,t,n){e.exports=function(e){e.component("flatFeeForm",{bindings:{fee:"=ngModel",rules:"<"},template:n(424)(),controller:function(){var e=this;e.$onInit=function(){angular.isUndefined(e.fee)&&(e.fee={type:"FLAT_FEE"})}}})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<am-form-select name="{{$ctrl.fee.type + \'_frequency\'}}" ng-model="$ctrl.fee.frequency" options="$ctrl.rules.allowedFrequencies" label-text="{{\'fee.label.frequency\' | translate}}" option-key="\'feeFrequency.\'" required></am-form-select><am-form-input name="{{$ctrl.fee.type + \'_amount\'}}" ng-model="$ctrl.fee.amount" label-text="{{\'fee.label.amount\' | translate}}" input-mask-alias="feesAmount" required></am-form-input>'}},function(e,t,n){e.exports=function(e){e.component("flatFeeReview",{bindings:{fee:"<"},template:n(426)(),controller:function(){var e=this;e.$onInit=function(){"UNKNOWN"===e.fee.currencyType&&(e.fee.currencyType="")}}})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<div class="form-review"><am-form-label label-text="{{\'fee.label.frequency\' | translate}}" value-text="{{::\'feeFrequency.\' + $ctrl.fee.frequency | translate}}"></am-form-label><am-form-label label-text="{{\'fee.label.amount\' | translate}}" value-text="{{::$ctrl.fee.amount | currency:$ctrl.fee.currencyType + \' \'}}"></am-form-label></div>'}},function(e,t,n){e.exports=function(e){n(428)(e),n(430)(e)}},function(e,t,n){e.exports=function(e){e.component("hfcipFeeForm",{bindings:{fee:"=ngModel",rules:"<"},require:{formServerErrors:"^^?formServerErrors"},template:n(429)(),controller:["orderByFilter","ErrorService",function(e,t){var n=this;n.$onInit=function(){angular.isUndefined(n.fee)&&(n.fee={type:"HFCIP"}),angular.isUndefined(n.fee.fundFees)&&(n.fee.fundFees=[]),n.fundMapping={};for(var e=0;e<n.fee.fundFees.length;++e){var a=n.fee.fundFees[e];a.enabled=!0,n.fundMapping[a.identifier.fundAccountId]=a}for(e=0;e<n.rules.allowedFunds.length;++e){var r=n.rules.allowedFunds[e];angular.isUndefined(n.fundMapping[r.fundAccountId])&&(n.fundMapping[r.fundAccountId]={identifier:r})}n.onEnableChange=function(e){if(e.enabled)n.fee.fundFees.push(e);else{var t=n.fee.fundFees.indexOf(e);n.fee.fundFees.splice(t,1)}},n.getServerErrors=function(){return t.getFormServerErrors(n.formServerErrors)}}}]})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<div class="form-group"><div class="table-responsive"><table class="table table-condensed table-bordered" width="100%" cellspacing="0" cellpadding="0"><thead><tr><th align="center" valign="middle">{{\'fee.label.hfcip.fundName\' | translate}}</th><th align="center" valign="middle">{{\'fee.label.hfcip.nlv\' | translate}}</th><th align="center" valign="middle">{{\'fee.label.hfcip.pnl\' | translate}}</th><th width="15%" align="center" valign="middle">{{\'fee.label.frequency\' | translate}}</th></tr></thead><tbody ng-repeat="fund in ::$ctrl.rules.allowedFunds | orderBy:\'fundName\'"><tr class="valign-top"><td align="left"><p><input type="checkbox" ng-model="$ctrl.fundMapping[fund.fundAccountId].enabled" i-check ng-change="$ctrl.onEnableChange($ctrl.fundMapping[fund.fundAccountId])"><span>&nbsp; {{::fund.fundName}}</span></p></td><td><am-input name="{{fund.fundAccountId + \'_percentOfEquity\'}}" ng-model="$ctrl.fundMapping[fund.fundAccountId].percentOfEquity" type="text" ph-text="{{\' \'}}" is-disabled="!$ctrl.fundMapping[fund.fundAccountId].enabled" input-mask-alias="feesPercentage"></am-input></td><td><am-input name="{{fund.fundAccountId + \'_percentOfPnl\'}}" ng-model="$ctrl.fundMapping[fund.fundAccountId].percentOfPnl" type="text" ph-text="{{\' \'}}" is-disabled="!$ctrl.fundMapping[fund.fundAccountId].enabled" input-mask-alias="feesPercentage"></am-input></td><td><am-select name="{{fund.fundAccountId + \'_frequency\'}}" ng-model="$ctrl.fundMapping[fund.fundAccountId].frequency" hide-empty-option="true" options="$ctrl.rules.allowedFundFrequencies" option-key="\'feeFrequency.\'" is-required="true" is-disabled="!$ctrl.fundMapping[fund.fundAccountId].enabled"></am-select></td></tr><tr ng-if="$ctrl.getServerErrors()[fund.fundAccountId] &amp;&amp; $ctrl.fundMapping[fund.fundAccountId].enabled"><td class="alert alert-danger" colspan="4"><p>{{\'fee.error.HFCIP.\' + $ctrl.getServerErrors()[fund.fundAccountId] | translate}}</p></td></tr></tbody></table></div></div>'}},function(e,t,n){e.exports=function(e){e.component("hfcipFeeReview",{bindings:{fee:"<"},template:n(431)()})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<div class="form-review" ng-repeat="fundFee in $ctrl.fee.fundFees"><am-form-label label-text="{{\'fee.label.hfcip.fundName\' | translate}}" value-text="{{::fundFee.identifier.fundName}}"></am-form-label><am-form-label ng-if="fundFee.percentOfEquity &amp;&amp; fundFee.percentOfEquity &gt; 0" label-text="{{\'fee.label.hfcip.nlv\' | translate}}" value-text="{{fundFee.percentOfEquity + \' %\'}}"></am-form-label><am-form-label ng-if="fundFee.percentOfPnl &amp;&amp; fundFee.percentOfPnl &gt; 0" label-text="{{\'fee.label.hfcip.pnl\' | translate}}" value-text="{{fundFee.percentOfPnl + \' %\'}}"></am-form-label><am-form-label label-text="{{\'fee.label.frequency\' | translate}}" value-text="{{\'feeFrequency.\' + fundFee.frequency | translate}}"></am-form-label><hr ng-if="!$last"></div>'}},function(e,t,n){e.exports=function(e){n(433)(e),n(435)(e),n(437)(e)}},function(e,t,n){e.exports=function(e){e.component("interestRateFeeCurrencyForm",{bindings:{configByCurrency:"=ngModel",rules:"<"},template:n(434)(),controller:["orderByFilter",function(e){var t=this;t.$onInit=function(){t.allowedCurrencyTypes=e(t.rules.allowedCurrencyTypes),angular.isUndefined(t.configByCurrency)&&(t.configByCurrency={}),t.toggleCurrencySelection=function(e){t.configByCurrency[e]=!t.configByCurrency[e]}}}]})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<div class="form-group"><div class="row"><div class="col-xs-12 col-sm-6 col-md-4 col-lg-4" ng-repeat="currencyType in ::$ctrl.allowedCurrencyTypes"><div class="btn-selectors"><p><a class="btn btn-default" href="javascript:void(0)" ng-class="{ \'active\' : $ctrl.configByCurrency[currencyType] }" ng-click="$ctrl.toggleCurrencySelection(currencyType)">{{currencyType}}</a></p></div></div></div></div>'}},function(e,t,n){e.exports=function(e){e.component("interestRateFeeForm",{bindings:{fee:"=ngModel",rules:"<"},template:n(436)(),controller:["orderByFilter",function(e){var t=this,n=function(e){t.ratesByCurrency[e].creditMarkdown=0,t.ratesByCurrency[e].shortCreditMarkdown=0,t.ratesByCurrency[e].shortCfdCreditMarkdown=0,t.ratesByCurrency[e].shortIndexCfdCreditMarkdown=0,t.ratesByCurrency[e].longFxCfdMarkdown=0};t.$onInit=function(){angular.isUndefined(t.fee)&&(t.fee={type:"INTEREST_RATE"}),angular.isUndefined(t.fee.interestRates)&&(t.fee.interestRates=[]),t.rules.allowedCurrencyTypes=e(t.rules.allowedCurrencyTypes),t.ratesByCurrency={};for(var a=0;a<t.rules.allowedCurrencyTypes.length;++a){var r=t.rules.allowedCurrencyTypes[a];t.ratesByCurrency[r]={currencyType:r,noCreditInterest:!0}}for(a=0;a<t.fee.interestRates.length;++a){var i=t.fee.interestRates[a];angular.isDefined(t.ratesByCurrency[i.currencyType])&&(t.ratesByCurrency[i.currencyType]=i)}t.fee.interestRates=[];for(a=0;a<t.rules.allowedCurrencyTypes.length;++a){r=t.rules.allowedCurrencyTypes[a];angular.isDefined(t.ratesByCurrency[r])&&(t.ratesByCurrency[r].noCreditInterest&&n(r),t.fee.interestRates.push(t.ratesByCurrency[r]))}t.onCreditInterestChange=function(e){t.ratesByCurrency[e].noCreditInterest?n(e):(t.ratesByCurrency[e].creditMarkdown=void 0,t.ratesByCurrency[e].shortCreditMarkdown=void 0,t.ratesByCurrency[e].shortCfdCreditMarkdown=void 0,t.ratesByCurrency[e].shortIndexCfdCreditMarkdown=void 0,t.ratesByCurrency[e].longFxCfdMarkdown=void 0)},t.onDebitMarkupChange=function(e){var n=t.ratesByCurrency[e].debitMarkup;n<=1?t.ratesByCurrency[e].ibDebitMarkup=0:n>1&&n<=t.rules.allowedMaxDebitMarkup?t.ratesByCurrency[e].ibDebitMarkup=+(Math.round((n-1)/4+"e+4")+"e-4"):(t.ratesByCurrency[e].ibDebitMarkup=0,t.ratesByCurrency[e].debitMarkup=0)}}}]})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<div class="table-responsive"><table class="table table-condensed table-bordered" width="100%" cellpadding="0" cellspacing="0" border="0"><thead><tr><th align="center" valign="bottom">{{\'fee.label.interestRate.currency\' | translate}}</th><th align="center" valign="bottom">{{\'fee.label.interestRate.noCreditInterest\' | translate}}</th><th align="center" valign="bottom">{{\'fee.label.interestRate.creditMarkdown\' | translate}}</th><th align="center" valign="bottom">{{\'fee.label.interestRate.debitMarkup\' | translate}}</th><th align="center" valign="bottom">{{\'fee.label.interestRate.ibDebitMarkup\' | translate}}</th><th align="center" valign="bottom">{{\'fee.label.interestRate.shortCreditMarkdown\' | translate}}</th><th align="center" valign="bottom">{{\'fee.label.interestRate.shortCfdCreditMarkdown\' | translate}}</th><th align="center" valign="bottom">{{\'fee.label.interestRate.longCfdDebitMarkup\' | translate}}</th><th align="center" valign="bottom">{{\'fee.label.interestRate.shortIndexCfdCreditMarkdown\' | translate}}</th><th align="center" valign="bottom">{{\'fee.label.interestRate.longIndexCfdDebitMarkup\' | translate}}</th><th align="center" valign="bottom">{{\'fee.label.interestRate.shortFxCfdMarkup\' | translate}}</th><th align="center" valign="bottom">{{\'fee.label.interestRate.longFxCfdMarkdown\' | translate}}</th><th align="center" valign="bottom">{{\'fee.label.interestRate.fixedBorrowMarkup\' | translate}}</th><th align="center" valign="bottom">{{\'fee.label.interestRate.variableBorrowMarkup\' | translate}}</th></tr></thead><tbody><tr ng-repeat="currencyType in ::$ctrl.rules.allowedCurrencyTypes"><td align="left" valign="middle">{{::currencyType}}</td><td align="center" valign="middle"><input type="checkbox" i-check ng-model="$ctrl.ratesByCurrency[currencyType].noCreditInterest" ng-change="$ctrl.onCreditInterestChange(currencyType)"></td><td align="left" valign="middle"><am-input name="INTEREST_RATE_{{::currencyType}}_creditMarkdown" ng-model="$ctrl.ratesByCurrency[currencyType].creditMarkdown" is-disabled="$ctrl.ratesByCurrency[currencyType].noCreditInterest" ph-text=" "></am-input></td><td align="left" valign="middle"><am-input name="INTEREST_RATE_{{::currencyType}}_debitMarkup" ng-model="$ctrl.ratesByCurrency[currencyType].debitMarkup" model-listener="$ctrl.onDebitMarkupChange(currencyType)" ph-text=" "></am-input></td><td align="left" valign="middle"><am-input name="INTEREST_RATE_{{::currencyType}}_ibDebitMarkup" ng-model="$ctrl.ratesByCurrency[currencyType].ibDebitMarkup" is-disabled="true" ph-text=" "></am-input></td><td align="left" valign="middle"><am-input name="INTEREST_RATE_{{::currencyType}}_shortCreditMarkdown" ng-model="$ctrl.ratesByCurrency[currencyType].shortCreditMarkdown" is-disabled="$ctrl.ratesByCurrency[currencyType].noCreditInterest" ph-text=" "></am-input></td><td align="left" valign="middle"><am-input name="INTEREST_RATE_{{::currencyType}}_shortCfdCreditMarkdown" ng-model="$ctrl.ratesByCurrency[currencyType].shortCfdCreditMarkdown" is-disabled="$ctrl.ratesByCurrency[currencyType].noCreditInterest" ph-text=" "></am-input></td><td align="left" valign="middle"><am-input name="INTEREST_RATE_{{::currencyType}}_longCfdDebitMarkup" ng-model="$ctrl.ratesByCurrency[currencyType].longCfdDebitMarkup" ph-text=" "></am-input></td><td align="left" valign="middle"><am-input name="INTEREST_RATE_{{::currencyType}}_shortIndexCfdCreditMarkdown" ng-model="$ctrl.ratesByCurrency[currencyType].shortIndexCfdCreditMarkdown" is-disabled="$ctrl.ratesByCurrency[currencyType].noCreditInterest" ph-text=" "></am-input></td><td align="left" valign="middle"><am-input name="INTEREST_RATE_{{::currencyType}}_longIndexCfdDebitMarkup" ng-model="$ctrl.ratesByCurrency[currencyType].longIndexCfdDebitMarkup" ph-text=" "></am-input></td><td align="left" valign="middle"><am-input name="INTEREST_RATE_{{::currencyType}}_shortFxCfdMarkup" ng-model="$ctrl.ratesByCurrency[currencyType].shortFxCfdMarkup" ph-text=" "></am-input></td><td align="left" valign="middle"><am-input name="INTEREST_RATE_{{::currencyType}}_longFxCfdMarkdown" ng-model="$ctrl.ratesByCurrency[currencyType].longFxCfdMarkdown" is-disabled="$ctrl.ratesByCurrency[currencyType].noCreditInterest" ph-text=" ">     </am-input></td><td align="left" valign="middle"><am-input name="INTEREST_RATE_{{::currencyType}}_fixedBorrowMarkup" ng-model="$ctrl.ratesByCurrency[currencyType].fixedBorrowMarkup" ph-text=" "></am-input></td><td align="left" valign="middle"><am-input name="INTEREST_RATE_{{::currencyType}}_variableBorrowMarkup" ng-model="$ctrl.ratesByCurrency[currencyType].variableBorrowMarkup" ph-text=" "></am-input></td></tr></tbody></table></div>'}},function(e,t,n){e.exports=function(e){e.component("interestRateFeeReview",{bindings:{fee:"<"},template:n(438)()})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<div class="form-review"><div class="table-responsive"><table class="table table-condensed table-bordered" width="100%" cellpadding="0" cellspacing="0" border="0"><thead><tr><th align="center" valign="bottom">{{\'fee.label.interestRate.currency\' | translate}}</th><th align="center" valign="bottom">{{\'fee.label.interestRate.noCreditInterest\' | translate}}</th><th align="center" valign="bottom">{{\'fee.label.interestRate.creditMarkdown\' | translate}}</th><th align="center" valign="bottom">{{\'fee.label.interestRate.debitMarkup\' | translate}}</th><th align="center" valign="bottom">{{\'fee.label.interestRate.ibDebitMarkup\' | translate}}</th><th align="center" valign="bottom">{{\'fee.label.interestRate.shortCreditMarkdown\' | translate}}</th><th align="center" valign="bottom">{{\'fee.label.interestRate.shortCfdCreditMarkdown\' | translate}}</th><th align="center" valign="bottom">{{\'fee.label.interestRate.longCfdDebitMarkup\' | translate}}</th><th align="center" valign="bottom">{{\'fee.label.interestRate.shortIndexCfdCreditMarkdown\' | translate}}</th><th align="center" valign="bottom">{{\'fee.label.interestRate.longIndexCfdDebitMarkup\' | translate}}</th><th align="center" valign="bottom">{{\'fee.label.interestRate.shortFxCfdMarkup\' | translate}}</th><th align="center" valign="bottom">{{\'fee.label.interestRate.longFxCfdMarkdown\' | translate}}</th><th align="center" valign="bottom">{{\'fee.label.interestRate.fixedBorrowMarkup\' | translate}}</th><th align="center" valign="bottom">{{\'fee.label.interestRate.variableBorrowMarkup\' | translate}}</th></tr></thead><tbody><tr ng-repeat="interestRate in ::$ctrl.fee.interestRates"><td align="left" valign="middle">{{::interestRate.currencyType}}</td><td align="center" valign="middle"><input type="checkbox" disabled i-check ng-model="interestRate.noCreditInterest"></td><td align="left" valign="middle">{{::interestRate.creditMarkdown + \' %\'}}</td><td align="left" valign="middle">{{::interestRate.debitMarkup + \' %\'}}</td><td align="left" valign="middle">{{::interestRate.ibDebitMarkup + \' %\'}}</td><td align="left" valign="middle">{{::interestRate.shortCreditMarkdown + \' %\'}}</td><td align="left" valign="middle">{{::interestRate.shortCfdCreditMarkdown + \' %\'}}</td><td align="left" valign="middle">{{::interestRate.longCfdDebitMarkup + \' %\'}}</td><td align="left" valign="middle">{{::interestRate.shortIndexCfdCreditMarkdown + \' %\'}}</td><td align="left" valign="middle">{{::interestRate.longIndexCfdDebitMarkup + \' %\'}}</td><td align="left" valign="middle">{{::interestRate.shortFxCfdMarkup + \' %\'}}</td><td align="left" valign="middle">{{::interestRate.longFxCfdMarkdown + \' %\'}}</td><td align="left" valign="middle">{{::interestRate.fixedBorrowMarkup + \' %\'}}</td><td align="left" valign="middle">{{::interestRate.variableBorrowMarkup + \' %\'}}</td></tr></tbody></table></div></div>'}},function(e,t,n){e.exports=function(e){n(440)(e),n(441)(e),n(443)(e),n(445)(e),n(447)(e),n(448)(e),n(450)(e)}},function(e,t){e.exports=function(e){e.component("invoicingConfigNotes",{bindings:{invoicingType:"<"},template:function(){var e="";return e+='<ul class="paralist" ng-if="::$ctrl.invoicingType === \'INVOICE\'">',e+='   <li translate="invoice.configure.note.1"></li>',e+='   <li translate="invoice.configure.note.2"></li>',e+='   <li translate="invoice.configure.note.3"></li>',e+="   <li translate=\"invoice.configure.note.4\" translate-values=\"{ strongStart: '<strong>', strongEnd: '</strong>' }\"></li>",e+="</ul>",e+='<ul class="paralist" ng-if="::$ctrl.invoicingType === \'REIMBURSEMENT\'">',e+='   <li translate="reimbursement.configure.note.1"></li>',e+='   <li translate="reimbursement.configure.note.2"></li>',e+='   <li translate="reimbursement.configure.note.3"></li>',e+="</ul>",e+="<hr/>",e}})}},function(e,t,n){e.exports=function(e){e.component("invoicingData",{require:{$itemManipulator:"^^amItemManipulator"},template:n(442)(),controller:["$q","$translate","ClientInvoicingService","FileDownloadService","ModalService","NavigationService",function(t,n,a,r,i,o){var s=this,l=function(){s.$itemManipulator.itemControl.load().then(function(){angular.isDefined(s.$itemManipulator.manipulator)&&(s.invoicingType=s.$itemManipulator.manipulator.invoicingType,s.hasInvoiceConfigurableClients=s.$itemManipulator.manipulator.hasInvoiceConfigurableClients,s.allowedDownloadPeriods=s.$itemManipulator.manipulator.allowedDownloadPeriods,s.isRestDownloadEnabled=s.$itemManipulator.manipulator.isRestDownloadEnabled||!1)})};s.$onInit=function(){s.loadInProgress=!1,s.invoicingType="UNKNOWN",s.uploadInvoice=function(){a.uploadInvoice(s.invoicingType).finally(function(){"SUCCESS"===i.getModalResult()&&l()})},s.createInvoice=a.createInvoice,s.viewInvoice=a.viewInvoice,s.editInvoice=a.editInvoice,s.cancelInvoice=function(e,t){a.cancelInvoice(e,t).finally(function(){"SUCCESS"===i.getModalResult()&&l()})},s.downloadInvoices=function(){if(s.isRestDownloadEnabled){var t={title:n.instant("modal.title.download."+s.invoicingType),templateUrl:"invoicing-download-modal.component",dialogClass:"modal-sm",modalData:{invoicingType:s.invoicingType,allowedDownloadPeriods:s.allowedDownloadPeriods}};return i.openModal(t)}s.loadInProgress=!0,r.fetchFile("",e.DEFAULT_SERVER_PATH+"/ClientInvoicingSummary/Export","arraybuffer","POST").then(function(e){var t=r.getFileNameFromHeaders(e.headers);r.download(t,e.data,e.headers("Content-Type"))}).finally(function(){s.loadInProgress=!1})},s.configureFees=function(){var e={id:"ClientFees",title:n.instant("page.title.ClientFees"),path:"template/page/fees/viewClientFees.html",skipFetch:!1};o.navigate(e)},t.all([l(),a.onReady()]).finally(function(){s.loadInProgress=!1})}}]})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<loading-overlay ng-if="$ctrl.$itemManipulator.loadInProgress || $ctrl.loadInProgress"></loading-overlay><section class="panel"><div class="panel-heading" ng-if="$ctrl.hasInvoiceConfigurableClients"><span class="heading" translate="invoicing.summary.heading.{{$ctrl.invoicingType}}"></span><span class="btn-group-right" ng-if="$ctrl.hasInvoiceConfigurableClients"><am-button btn-type="icon" on-click="$ctrl.uploadInvoice()" btn-icon="fa-upload" tooltip-text="{{\'word.upload\' | translate}}"></am-button><am-button btn-type="icon" on-click="$ctrl.createInvoice($ctrl.invoicingType)" btn-icon="fa-plus" tooltip-text="{{\'word.create\' | translate}}"></am-button><am-button btn-type="icon" on-click="$ctrl.downloadInvoices()" btn-icon="fa-download" tooltip-text="{{\'invoicing.label.download.\' + $ctrl.invoicingType | translate}}"></am-button></span></div><div class="panel-body panel-padding"><div class="row"><div class="col-12 col-lg-10 col-lg-offset-1"><div class="text-center" ng-if="!$ctrl.hasInvoiceConfigurableClients"><i class="fa fa-2x fa-exclamation-triangle text-gray"></i><h5 translate="invoicing.summary.noclients.text" translate-values="{ linkStart: \'&lt;a href=javascript:void(0); ng-click=$ctrl.configureFees()&gt;\', linkEnd: \'&lt;/a&gt;\'}" translate-compile></h5></div><div class="alert alert-no-results-lg" ng-if="$ctrl.hasInvoiceConfigurableClients &amp;&amp; $ctrl.$itemManipulator.entries.length === 0"><p translate="invoicing.summary.nodata.text.{{$ctrl.invoicingType}}" translate-values="{lineBreak : \'&lt;br/&gt;\', plusIcon : \'&lt;strong&gt;&lt;i class=fa&amp;nbsp;fa-plus aria-hidden=true&gt;&lt;/i&gt;&lt;/strong&gt;\', uploadIcon : \'&lt;strong&gt;&lt;i class=fa&amp;nbsp;fa-upload aria-hidden=true&gt;&lt;/i&gt;&lt;/strong&gt;\'}" translate-compile></p></div><div ng-if="$ctrl.$itemManipulator.entries.length &gt; 0"><h6 class="subtitle" translate="invoicing.label.pending"></h6><div class="form-bordered"><div class="row" ng-repeat="invoice in $ctrl.$itemManipulator.entries"><div class="col-xs-2 col-1"><p class="text-center"><am-button btn-type="icon" on-click="$ctrl.viewInvoice(invoice)" btn-icon="fa-info-circle" tooltip-text="{{\'word.info\' | translate}}"></am-button></p></div><div class="col-xs-7 col-9"><invoicing-details-row-display invoice="invoice"></invoicing-details-row-display></div><div class="col-xs-3 col-2"><p><span class="btn-group-right"><am-button btn-type="icon" on-click="$ctrl.editInvoice(invoice.id, invoice.type)" btn-icon="fa-pencil-alt" tooltip-text="{{\'word.edit\' | translate}}"></am-button><am-button btn-type="icon" on-click="$ctrl.cancelInvoice(invoice.id, invoice.type)" btn-icon="fa-times" tooltip-text="{{\'word.cancel\' | translate}}"></am-button></span></p></div></div></div></div><pagination-controls></pagination-controls></div></div></div></section>'}},function(e,t,n){e.exports=function(e){e.component("invoicingDetailsForm",{require:{parentForm:"^^form",formServerErrors:"^^?formServerErrors"},bindings:{invoice:"=ngModel",rules:"<"},template:n(444)(),controller:["$filter","$translate","currencyFilter","ClientInvoicingService","ResourceService","ErrorService",function(t,n,a,r,i,o){var s=this,l={};s.$onInit=function(){s.invoicingRules=null,s.masters=[],s.clients=[],s.allowedCurrencies=[],s.getClientAccountIdLabel=r.getAccountDisplayValue,s.masterAccountUpdate=function(){s.clients=function(){var e=[];if(c)return e.push(s.invoice.clientAccountId),e;var t=s.invoice.masterAccountId,n=!!t,a=s.rules.accountRules;for(var r in a){var i=a[r],o=i.clientAccountId;-1===e.indexOf(o)&&(n?i.masterAccountId===t&&e.push(o):e.push(o))}return e}(),s.updateInvoicingRules();var e=s.getServerErrors().clientAccountId;1===s.clients.length&&s.masters.length>1&&e&&s.parentForm.clientAccountId.$setValidity(e,!0)},s.clientAccountUpdate=function(){s.masters=function(){var e=[];if(n)return e.push(s.invoice.masterAccountId),e;var t=s.invoice.clientAccountId,a=!!t,r=s.rules.accountRules;for(var i in r){var o=r[i],l=o.masterAccountId;-1===e.indexOf(l)&&(a?o.clientAccountId===t&&e.push(l):e.push(l))}return e}(),s.updateInvoicingRules()},s.updateInvoicingRules=function(){var e=r.getAccountInvoicingRule(s.rules.accountRules,s.invoice.clientAccountId,s.invoice.masterAccountId);e&&(s.invoicingRules=e.invoicingRules,s.invoicingRules&&(s.allowedCurrencies=t("orderByTranslated")(s.invoicingRules.allowedCurrencies,"currency.")))},s.updateExchRate=function(){var t=s.invoice.moneyAmount.currencyType;t&&s.invoicingRules&&(l[t]?s.exchRate=l[t]:i.fetch(e.DEFAULT_SERVER_PATH+"/ClientInvoicing/ExchRate/",{from:s.invoicingRules.limits.currency,to:t}).then(function(e){s.exchRate=e.data.exchRate,l[t]=s.exchRate}))},s.getInvoicingFeeLimitMessage=function(){if(s.invoicingRules)return r.getInvoicingFeeLimitMessage(s.invoicingRules.limits.feeLimit,s.exchRate)},s.getLimitText=function(e){if(!e||!e.amount)return"-";var t=e.amount*(e.currencyType!==s.invoice.moneyAmount.currencyType?s.exchRate:1),n=function(e){var t=""+e,n=t.length,a=t.indexOf(".");return-1!==a?n-a-1:0}(t);return n>3&&(n=3),a(t,s.invoice.moneyAmount.currencyType+" ",n)},s.getServerErrors=function(){return o.getFormServerErrors(s.formServerErrors)};var n=!!s.invoice.masterAccountId,c=!!s.invoice.clientAccountId;n&&c&&(s.masters.push(s.invoice.masterAccountId),s.clients.push(s.invoice.clientAccountId),s.updateInvoicingRules())}}]})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<am-form-select name="masterAccountId" ng-model="$ctrl.invoice.masterAccountId" model-listener="$ctrl.masterAccountUpdate()" options="$ctrl.masters" vertical="false" label-text="{{\'invoicing.label.masterAccount\' | translate}}" empty-option-text="{{\'word.chooseOne\' | translate}}" required server-errors="$ctrl.getServerErrors()"></am-form-select><am-form-select name="clientAccountId" ng-model="$ctrl.invoice.clientAccountId" model-listener="$ctrl.clientAccountUpdate()" options="$ctrl.clients" vertical="false" label-text="{{\'invoicing.label.clientAccount\' | translate}}" empty-option-text="{{\'word.chooseOne\' | translate}}" required option-key="$ctrl.getClientAccountIdLabel" server-errors="$ctrl.getServerErrors()"></am-form-select><am-form-select ng-if="$ctrl.invoicingRules.allowedCurrencies" name="currency" ng-model="$ctrl.invoice.moneyAmount.currencyType" options="$ctrl.allowedCurrencies" label-text="{{\'transfer.label.currency\' | translate}}" empty-option-text="{{\'transfer.field.currency\' | translate}}" option-key="\'currency.\'" model-listener="$ctrl.updateExchRate()" required server-errors="$ctrl.getServerErrors()"></am-form-select><div ng-if="$ctrl.invoicingRules"><div ng-if="::$ctrl.invoice.type === \'INVOICE\'"><am-form-label ng-if="$ctrl.invoicingRules.limits.feeLimit" label-text="{{\'invoice.label.limit\' | translate}}" value-text="{{$ctrl.getInvoicingFeeLimitMessage()}}"></am-form-label><am-form-label ng-if="$ctrl.invoicingRules.limits.invoicingLimit" label-text="{{\'invoice.label.availableFees\' | translate}}" value-text="{{$ctrl.getLimitText($ctrl.invoicingRules.limits.invoicingLimit)}}"></am-form-label><am-form-label ng-if="$ctrl.invoicingRules.requestedAmount.amount &gt; 0" label-text="{{\'invoice.label.requestedFees\' | translate}}" value-text="{{$ctrl.getLimitText($ctrl.invoicingRules.requestedAmount)}}"></am-form-label></div><div ng-if="::$ctrl.invoice.type === \'REIMBURSEMENT\'"><am-form-label ng-if="$ctrl.invoicingRules.limits.reimbursementLimit" label-text="{{\'reimbursement.label.availableReimbursement\' | translate}}" value-text="{{$ctrl.getLimitText($ctrl.invoicingRules.limits.reimbursementLimit)}}"></am-form-label><am-form-label ng-if="$ctrl.invoicingRules.requestedAmount.amount &gt; 0" label-text="{{\'reimbursement.label.requestedReimbursement\' | translate}}" value-text="{{$ctrl.getLimitText($ctrl.invoicingRules.requestedAmount)}}"></am-form-label></div></div><am-form-input name="amount" input-mask-alias="transferAmount" ng-model="$ctrl.invoice.moneyAmount.amount" type="text" label-text="{{(\'invoicing.configure.label.\' + $ctrl.invoice.type) | translate:{currency : $ctrl.invoice.moneyAmount.currencyType} }}" required server-errors="$ctrl.getServerErrors()"></am-form-input><am-form-input name="model" ng-model="$ctrl.invoice.model" type="text" label-text="{{\'invoicing.label.model\' | translate}}" maxlength="20" server-errors="$ctrl.getServerErrors()"></am-form-input><am-form-input name="memo" ng-model="$ctrl.invoice.memo" type="text" label-text="{{\'invoicing.label.memo\' | translate}}" maxlength="90" server-errors="$ctrl.getServerErrors()"></am-form-input>'}},function(e,t,n){e.exports=function(e){e.component("invoicingDetailsReview",{bindings:{invoice:"<"},template:n(446)(),controller:["ClientInvoicingService",function(e){var t=this;t.$onInit=function(){t.getAccountDisplayValue=e.getAccountDisplayValue}}]})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<am-form-label label-text="{{\'invoicing.label.masterAccount\' | translate}}" value-text="{{::$ctrl.invoice.masterAccountId}}"></am-form-label><am-form-label label-text="{{\'invoicing.label.clientAccount\' | translate}}" value-text="{{::$ctrl.getAccountDisplayValue($ctrl.invoice.clientAccountId)}}"></am-form-label><am-form-label label-text="{{\'invoicing.label.amount.\' + $ctrl.invoice.type | translate}}" value-text="{{::$ctrl.invoice.moneyAmount | amMoneyAmount}}"></am-form-label><am-form-label ng-if="$ctrl.invoice.model.length &gt; 0 &amp;&amp; $ctrl.invoice.model !== \'core\'" label-text="{{\'invoicing.label.model\' | translate}}" value-text="{{::$ctrl.invoice.model}}"></am-form-label><am-form-label ng-if="::$ctrl.invoice.memo.length &gt; 0" label-text="{{\'invoicing.label.memo\' | translate}}" value-text="{{::$ctrl.invoice.memo}}"></am-form-label>'}},function(e,t){e.exports=function(e){e.component("invoicingDetailsRowDisplay",{bindings:{invoice:"<"},template:function(){var e="";return e+="<p>",e+="   <span translate=\"invoicing.label.invoicing\" translate-values=\"{'strongStart' : '<strong>', 'strongEnd' : '</strong>', 'masterAccountId' : $ctrl.invoice.masterAccountId, 'clientAccountId' : $ctrl.getAccountDisplayValue($ctrl.invoice.clientAccountId)}\"></span>",e+='   <span class="hidden-sm hidden-md hidden-lg"><br></span>',e+='   <span class="pipe hidden-xs">|</span>',e+="   {{'invoicing.type.' + $ctrl.invoice.type | translate}}",e+='   <span class="hidden-sm hidden-md hidden-lg"><br></span>',e+='   <span ng-if="$ctrl.invoice.moneyAmount.amount !== -1">',e+='       <span class="pipe hidden-xs">|</span>',e+='       <strong translate="invoicing.label.fee">:</strong> {{::$ctrl.invoice.moneyAmount | amMoneyAmount}}',e+="   </span>",e+="</p>",e},controller:["ClientInvoicingService",function(e){var t=this;t.$onInit=function(){t.getAccountDisplayValue=e.getAccountDisplayValue}}]})}},function(e,t,n){e.exports=function(e){e.component("invoicingFeeForm",{bindings:{fee:"=ngModel",rules:"<"},template:n(449)(),controller:function(){var e=this;e.$onInit=function(){angular.isUndefined(e.fee)&&(e.fee={type:"INVOICING"}),e.rules.feeLimitAllowed||delete e.fee.limit,e.rules.nlvCapAllowed||delete e.fee.nlvCap}}})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<am-form-select name="{{$ctrl.fee.type + \'_frequency\'}}" ng-model="$ctrl.fee.frequency" options="$ctrl.rules.allowedFrequencies" label-text="{{\'fee.label.frequency\' | translate}}" option-key="\'feeFrequency.\'" required></am-form-select><am-form-input ng-if="::$ctrl.rules.feeLimitAllowed" name="{{$ctrl.fee.type + \'_limit\'}}" ng-model="$ctrl.fee.limit" label-text="{{\'fee.label.invoiceLimit\' | translate}}" ph-text="{{\' \'}}" input-mask-alias="feesAmount"></am-form-input><am-form-input ng-if="::$ctrl.rules.nlvCapAllowed" name="{{$ctrl.fee.type + \'_nlvCap\'}}" ng-model="$ctrl.fee.nlvCap" label-text="{{\'fee.label.invoiceCap\' | translate}}" ph-text="{{\' \'}}" input-mask-alias="feesPercentage"></am-form-input>'}},function(e,t,n){e.exports=function(e){e.component("invoicingFeeReview",{bindings:{fee:"<"},template:n(451)(),controller:function(){var e=this;e.$onInit=function(){"UNKNOWN"===e.fee.currencyType&&(e.fee.currencyType="")}}})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<div class="form-review"><am-form-label label-text="{{\'fee.label.frequency\' | translate}}" value-text="{{::\'feeFrequency.\' + $ctrl.fee.frequency | translate}}"></am-form-label><am-form-label ng-if="::$ctrl.fee.limit &gt; 0" label-text="{{\'fee.label.invoiceLimit\' | translate}}" value-text="{{::$ctrl.fee.limit | currency:$ctrl.fee.currencyType + \' \'}}"></am-form-label><am-form-label ng-if="::$ctrl.fee.nlvCap &gt; 0" label-text="{{\'fee.label.invoiceCap\' | translate}}" value-text="{{::$ctrl.fee.nlvCap + \' %\'}}"></am-form-label></div>'}},function(e,t,n){e.exports=function(e){n(453)(e)}},function(e,t,n){e.exports=function(e){e.component("associatedMmcFeesReview",{bindings:{associatedMmcFees:"<"},template:n(454)()})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<div ng-repeat="mmcFee in $ctrl.associatedMmcFees"><h4 translate="clientFeesProfile.heading.associatedMmcFees" translate-values="{ mmcAccountVan : mmcFee.mmcAccountVan  }"></h4><div class="alert alert-gray"><h5 class="no-margin" translate="clientFeesProfile.subHeading.associatedMmcFees" translate-values="{ masterAccountTitle : mmcFee.wmConfiguration.masterAccountTitle, masterAccountId : mmcFee.wmConfiguration.masterAccountId }"></h5><fees-configuration-review fees-configuration="mmcFee.wmConfiguration"></fees-configuration-review><br><h5 translate="clientFeesProfile.subHeading.associatedMmcFees" translate-values="{ masterAccountTitle : mmcFee.mmConfiguration.masterAccountTitle, masterAccountId : mmcFee.mmConfiguration.masterAccountId }"></h5><fees-configuration-review fees-configuration="mmcFee.mmConfiguration"></fees-configuration-review></div><br ng-if="!$last"></div>'}},function(e,t,n){e.exports=function(e){n(456)(e),n(458)(e),n(460)(e)}},function(e,t,n){e.exports=function(e){e.component("netLiquidationFeeForm",{bindings:{fee:"=ngModel",rules:"<",isDisabled:"&?"},template:n(457)(),controller:function(){var e=this;e.$onInit=function(){angular.isUndefined(e.fee)&&(e.fee={type:"PERCENTAGE_NET_LIQUIDATION"}),e.isDisabled=e.isDisabled||function(){return!1}}}})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<am-form-select name="{{$ctrl.fee.type + \'_liquidationFeeType\'}}" ng-model="$ctrl.fee.liquidationFeeType" options="$ctrl.rules.allowedNetLiquidationFeeTypes" label-text="{{\'fee.label.netLiquidation.type\' | translate}}" option-key="\'netLiquidationFeeType.\'" is-required="true" is-disabled="$ctrl.isDisabled()"></am-form-select><am-form-select ng-if="$ctrl.fee.liquidationFeeType" name="{{$ctrl.fee.type + \'_frequency\'}}" ng-model="$ctrl.fee.frequency" options="$ctrl.rules.allowedFrequencies" label-text="{{\'fee.label.frequency\' | translate}}" option-key="\'feeFrequency.\'" is-required="true"></am-form-select><div ng-if="$ctrl.fee.liquidationFeeType === \'PERCENTAGE\'"><am-form-input name="{{$ctrl.fee.type + \'_percentage\'}}" ng-model="$ctrl.fee.percentage" label-text="{{\'fee.label.percentage\' | translate}}" input-mask-alias="feesPercentage" is-required="true" is-disabled="$ctrl.isDisabled()"></am-form-input></div><div ng-if="$ctrl.fee.liquidationFeeType === \'BLENDED\'"><net-liquidation-fee-nav-range-form fee="$ctrl.fee" rules="$ctrl.rules"></net-liquidation-fee-nav-range-form></div>'}},function(e,t,n){e.exports=function(e){e.component("netLiquidationFeeNavRangeForm",{require:{parentForm:"^^?form"},bindings:{fee:"<",rules:"<"},template:n(459)(),controller:["$translate",function(e){var t=this;t.$onInit=function(){angular.isUndefined(t.fee.navRanges)&&(t.fee.navRanges=[]);for(var n=0;n<t.fee.navRanges.length;++n){var a=t.fee.navRanges[n];a.navRange.minimum===a.navRange.maximum&&delete a.navRange.maximum}t.getNavRangeLabel=function(t){return e.instant("fee.label.netLiquidation.navRange",{index:t+1})},t.isMaxDisabled=function(e){return e===t.fee.navRanges.length-1},t.onRangeChange=function(e){if(!angular.isUndefined(t.parentForm)){var n=t.fee.navRanges[e];""===n.navRange.minimum&&delete n.navRange.minimum,""===n.navRange.maximum&&delete n.navRange.maximum;var a=parseFloat(n.navRange.minimum),r=parseFloat(n.navRange.maximum),i=isNaN(a)||isNaN(r)||a<=r,o=t.parentForm["navRange"+e];o.$setDirty(),o.$setValidity("invalid_range",i),i&&e<t.fee.navRanges.length-1&&(isNaN(r)?delete t.fee.navRanges[e+1].navRange.minimum:t.fee.navRanges[e+1].navRange.minimum=(r+.01).toFixed(2))}},t.addNavRange=function(){t.fee.navRanges.push({navRange:{}})},t.removeNavRange=function(e){e==t.fee.navRanges.length-1&&delete t.fee.navRanges[e-1].navRange.maximum,t.fee.navRanges.splice(e,1)},0===t.fee.navRanges.length&&(t.addNavRange(),t.addNavRange(),t.fee.navRanges[0].navRange.minimum=0)}}]})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<div ng-repeat="navRange in $ctrl.fee.navRanges track by $index"><am-form-range-entry name="{{\'navRange\' + $index}}" ng-model="navRange.navRange" label-text="{{$ctrl.getNavRangeLabel($index)}}&lt;br /&gt;&lt;span class=\'text-small\'&gt;{{\'fee.label.navRange.noMaximum\' | translate}}&lt;/span&gt;" is-min-required="true" min-ph-text="{{\'fee.placeholder.navRange.minimum\' | translate}}" max-ph-text="{{\'fee.placeholder.navRange.maximum\' | translate}}" model-listener="$ctrl.onRangeChange($index)" is-min-disabled="true" is-max-disabled="$ctrl.isMaxDisabled($index)" max-input-alias="feesAmount"></am-form-range-entry><am-form-input name="{{\'navRange\' + $index + \'_percentage\'}}" ng-model="navRange.percentage" label-text="{{\'fee.label.amountPercent\' | translate}}&lt;br /&gt;&lt;span class=\'text-small\'&gt;{{\'fee.label.navRange.noFee\' | translate}}&lt;/span&gt;" input-mask-alias="feesPercentage"></am-form-input><div class="form-group"><div class="row"><div class="col-xs-12 col-sm-6 col-md-6 col-lg-4"></div><div class="col-xs-12 col-sm-6 col-md-6 col-lg-4"><am-button ng-if="$last &amp;&amp; $ctrl.fee.navRanges.length &gt; 2" on-click="$ctrl.removeNavRange($index)" btn-icon="fa-times" btn-text="{{\'word.remove\' | translate}}"></am-button><am-button ng-if="$last &amp;&amp; $ctrl.fee.navRanges.length &lt; $ctrl.rules.maxNavRanges" btn-type="primary" btn-icon="fa-plus" on-click="$ctrl.addNavRange()" btn-text="{{\'word.add\' | translate}}"></am-button></div></div></div><hr ng-if="!$last"></div>'}},function(e,t,n){e.exports=function(e){e.component("netLiquidationFeeReview",{bindings:{fee:"<"},template:n(461)(),controller:["$translate","currencyFilter",function(e,t){var n=this;n.$onInit=function(){"UNKNOWN"===n.fee.currencyType&&(n.fee.currencyType=""),n.getRangeLabel=function(t){return e.instant("fee.label.netLiquidation.navRange",{index:t+1})},n.getRangeValue=function(e){var a=e.navRange,r="";return a.minimum===a.maximum?r+=t(a.minimum,n.fee.currencyType+" ")+"+":r+=t(a.minimum,n.fee.currencyType+" ")+" - "+t(a.maximum,""),r+=" ("+e.percentage+"%)"}}}]})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<div class="form-review"><am-form-label label-text="{{\'fee.label.netLiquidation.type\' | translate}}" value-text="{{\'netLiquidationFeeType.\' + $ctrl.fee.liquidationFeeType | translate}}"></am-form-label><am-form-label label-text="{{\'fee.label.frequency\' | translate}}" value-text="{{\'feeFrequency.\' + $ctrl.fee.frequency | translate}}"></am-form-label><am-form-label ng-if="::$ctrl.fee.liquidationFeeType === \'PERCENTAGE\'" label-text="{{\'fee.label.amount\' | translate}}" value-text="{{::$ctrl.fee.percentage + \' %\'}}"></am-form-label><am-form-label ng-if="::$ctrl.fee.liquidationFeeType === \'BLENDED\'" ng-repeat="navRangePercentage in ::$ctrl.fee.navRanges track by $index" label-text="{{$ctrl.getRangeLabel($index)}}" value-text="{{$ctrl.getRangeValue(navRangePercentage)}}"></am-form-label></div>'}},function(e,t,n){e.exports=function(e){n(463)(e),n(465)(e),n(467)(e),n(469)(e),n(471)(e),n(473)(e)}},function(e,t,n){e.exports=function(e){e.component("highWaterMarkConfigForm",{bindings:{highWaterMarkConfig:"=ngModel",rules:"<",frequency:"<"},template:n(464)(),controller:["orderByFilter",function(e){var t=this;t.$onInit=function(){angular.isUndefined(t.highWaterMarkConfig)&&(t.highWaterMarkConfig={prorated:!0}),angular.isUndefined(t.highWaterMarkConfig.losses)&&(t.highWaterMarkConfig.losses=[]);for(var n=Object.keys(t.rules.allowedLossQuarters),a=[],r=0;r<n.length;++r)a.push(parseInt(n[r]));t.allowedQuarterLossYears=e(a,function(e){return-e}),t.highWaterMarkConfig.previousLosses=t.highWaterMarkConfig.losses.length>0,t.getAllowedLossYears=function(){return"YEARLY"===t.frequency?t.rules.allowedLossYears:t.allowedQuarterLossYears},t.onPreviousLossChange=function(){t.highWaterMarkConfig.previousLosses?0===t.highWaterMarkConfig.losses.length&&t.addLoss():t.highWaterMarkConfig.losses=[]},t.onPerpetualChange=function(){t.highWaterMarkConfig.perpetual&&(t.highWaterMarkConfig.period=0)},t.removeLoss=function(e){t.highWaterMarkConfig.losses.splice(e,1)},t.addLoss=function(){t.highWaterMarkConfig.losses.push({})}},t.$onChanges=function(e){e.frequency&&angular.isDefined(t.highWaterMarkConfig)&&angular.isString(e.frequency.previousValue)&&(t.highWaterMarkConfig.losses=[],t.highWaterMarkConfig.previousLosses&&t.addLoss())}}]})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<am-form-input ng-if="!$ctrl.highWaterMarkConfig.perpetual" name="period" ng-model="$ctrl.highWaterMarkConfig.period" label-text="{{\'fee.label.highWaterMark.period\' | translate:{ \'frequencyUnit\' : (\'feeFrequency.unit.plural.\' + $ctrl.frequency | translate) } }}" input-mask-alias="feesAmount" required></am-form-input><div class="form-group"><div class="row"><div class="col-xs-12 col-sm-6 col-md-6 col-lg-4"><label class="control-label" ng-if="$ctrl.highWaterMarkConfig.perpetual">{{\'fee.label.highWaterMark.period\' | translate:{ \'frequencyUnit\' : (\'feeFrequency.unit.plural.\' + $ctrl.frequency | translate) } }}</label></div><div class="col-xs-12 col-sm-6 col-md-6 col-lg-4"><input type="checkbox" ng-model="$ctrl.highWaterMarkConfig.perpetual" i-check ng-change="$ctrl.onPerpetualChange()"><span> {{\'fee.label.highWaterMark.perpetual\' | translate}}</span><am-button btn-type="icon" tooltip-text="{{\'fee.label.highWaterMark.perpetualDesc\' | translate}}" tooltip-side="right" btn-icon="fa-question-circle"></am-button></div></div></div><am-form-switch name="prorated" ng-model="$ctrl.highWaterMarkConfig.prorated" label-text="{{\'fee.label.highWaterMark.prorated\' | translate}}" required></am-form-switch><am-form-switch ng-model="$ctrl.highWaterMarkConfig.previousLosses" label-text="{{\'fee.label.highWaterMark.configureLosses\' | translate}}" model-listener="$ctrl.onPreviousLossChange()" required></am-form-switch><div ng-if="$ctrl.highWaterMarkConfig.previousLosses"><div ng-repeat="loss in $ctrl.highWaterMarkConfig.losses track by $index"><h6>{{\'fee.label.highWaterMark.previousLoss\' | translate}}</h6><am-form-input name="{{\'loss\' + $index + \'_amount\'}}" ng-model="loss.amount" label-text="{{\'fee.label.amount\' | translate}}" input-mask-alias="feesAmount" required></am-form-input><am-form-select name="{{\'loss\' + $index + \'_lossYear\'}}" ng-model="loss.lossYear" label-text="{{\'fee.label.highWaterMark.year\' | translate}}" options="$ctrl.getAllowedLossYears()" no-translate="true" required></am-form-select><am-form-select ng-if="$ctrl.frequency === \'QUARTERLY\' &amp;&amp; loss.lossYear" name="{{\'loss\' + $index + \'_lossQuarter\'}}" ng-model="loss.lossQuarter" label-text="{{\'fee.label.highWaterMark.quarter\' | translate}}" options="$ctrl.rules.allowedLossQuarters[loss.lossYear]" no-translate="true" hide-empty-option="true" required></am-form-select><div class="form-group"><div class="row"><div class="col-xs-12 col-sm-6 col-md-6 col-lg-4"></div><div class="col-xs-12 col-sm-6 col-md-6 col-lg-4"><am-button ng-if="$ctrl.highWaterMarkConfig.losses.length &gt; 1" on-click="$ctrl.removeLoss($index)" btn-icon="fa-times" btn-text="{{\'word.remove\' | translate}}"></am-button><am-button ng-if="$last" btn-type="primary" btn-icon="fa-plus" on-click="$ctrl.addLoss()" btn-text="{{\'word.add\' | translate}}"></am-button></div></div></div><hr ng-if="!$last"></div></div>'}},function(e,t,n){e.exports=function(e){e.component("highWaterMarkConfigReview",{bindings:{highWaterMarkConfig:"<",currency:"<",frequency:"<"},template:n(466)(),controller:["$translate",function(e){var t=this;t.$onInit=function(){"UNKNOWN"===t.currency&&(t.currency=""),t.getLookBackText=function(){return e.instant("fee.label.highWaterMark.period",{frequencyUnit:e.instant("feeFrequency.unit.plural."+t.frequency)})},t.getLookBackPeriodText=function(){return t.highWaterMarkConfig.perpetual?e.instant("fee.label.highWaterMark.perpetual"):t.highWaterMarkConfig.period},t.getExpirationText=function(e){var n=e.lossYear;if("YEARLY"===t.frequency)return n;var a=e.lossQuarter;return"Q1"===a?n+"-03-31":"Q2"===a?n+"-06-30":"Q3"===a?n+"-09-30":"Q4"===a?n+"-12-31":n}}}]})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<am-form-label label-text="{{$ctrl.getLookBackText()}}" value-text="{{$ctrl.getLookBackPeriodText()}}"></am-form-label><am-form-label label-text="{{\'fee.label.highWaterMark.prorated\' | translate}}" value-text="{{($ctrl.highWaterMarkConfig.prorated ? \'word.yes\' : \'word.no\') | translate}}"></am-form-label><div ng-if="::$ctrl.highWaterMarkConfig.losses.length &gt; 0"><div class="form-group"><div class="row"><div class="col-xs-12 col-sm-6 col-md-6 col-lg-4"><label class="control-label">{{\'fee.label.highWaterMark.losses\' | translate}}</label></div><div class="col-xs-12 col-sm-6 col-md-6 col-lg-4"><label><span ng-repeat="loss in ::$ctrl.highWaterMarkConfig.losses">{{::loss.amount | currency:$ctrl.currency + \' \'}} ({{::$ctrl.getExpirationText(loss)}})<br ng-if="!$last"></span></label></div></div></div></div>'}},function(e,t,n){e.exports=function(e){e.component("percentagePnlFeeForm",{bindings:{fee:"=ngModel",rules:"<"},template:n(468)(),controller:function(){var e=this;e.$onInit=function(){angular.isUndefined(e.fee)&&(e.fee={type:"PERCENTAGE_PNL"}),e.fee.highWaterMark=angular.isDefined(e.fee.highWaterMarkConfig),e.fee.performanceThreshold=angular.isDefined(e.fee.performanceThresholdConfig),e.onHwmChange=function(){e.fee.highWaterMark||delete e.fee.highWaterMarkConfig},e.onThresholdChange=function(){e.fee.performanceThreshold||delete e.fee.performanceThresholdConfig}}}})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<am-form-select name="{{$ctrl.fee.type + \'_frequency\'}}" ng-model="$ctrl.fee.frequency" options="$ctrl.rules.allowedFrequencies" label-text="{{\'fee.label.frequency\' | translate}}" option-key="\'feeFrequency.\'" required></am-form-select><am-form-input name="{{$ctrl.fee.type + \'_percentage\'}}" ng-model="$ctrl.fee.percentage" label-text="{{\'fee.label.percentage\' | translate}}" input-mask-alias="feesPercentage" required></am-form-input><div ng-if="::$ctrl.rules.performanceThresholdConfigRules"><am-form-switch ng-model="$ctrl.fee.performanceThreshold" label-text="{{\'fee.label.pnl.configurePerformanceThreshold\' | translate}}" model-listener="$ctrl.onThresholdChange()"></am-form-switch><performance-threshold-config-form ng-if="$ctrl.fee.performanceThreshold" ng-model="$ctrl.fee.performanceThresholdConfig" rules="::$ctrl.rules.performanceThresholdConfigRules"></performance-threshold-config-form></div><div ng-if="::$ctrl.rules.highWaterMarkRules" ng-show="$ctrl.fee.frequency"><am-form-switch ng-model="$ctrl.fee.highWaterMark" label-text="{{\'fee.label.pnl.configureHighWaterMark\' | translate}}" model-listener="$ctrl.onHwmChange()"></am-form-switch><high-water-mark-config-form ng-if="$ctrl.fee.highWaterMark" ng-model="$ctrl.fee.highWaterMarkConfig" rules="::$ctrl.rules.highWaterMarkRules" frequency="$ctrl.fee.frequency"></high-water-mark-config-form></div>'}},function(e,t,n){e.exports=function(e){e.component("percentagePnlFeeReview",{bindings:{fee:"<"},template:n(470)(),controller:["$translate",function(e){var t=this;t.$onInit=function(){t.getFrequencyText=function(){var n=e.instant("feeFrequency."+t.fee.frequency);return n+=" ",n+=e.instant("feeFrequency.desc."+t.fee.frequency)}}}]})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<div class="form-review"><am-form-label label-text="{{\'fee.label.frequency\' | translate}}" value-text="{{$ctrl.getFrequencyText()}}"></am-form-label><am-form-label label-text="{{\'fee.label.percentage\' | translate}}" value-text="{{::$ctrl.fee.percentage + \' %\'}}"></am-form-label><div ng-if="::$ctrl.fee.highWaterMarkConfig"><h6 class="subtitle">{{\'fee.label.highWaterMark.heading\' | translate}}</h6><high-water-mark-config-review high-water-mark-config="::$ctrl.fee.highWaterMarkConfig" currency="::$ctrl.fee.currencyType" frequency="::$ctrl.fee.frequency"></high-water-mark-config-review></div><div ng-if="::$ctrl.fee.performanceThresholdConfig"><h6 class="subtitle">{{\'fee.label.performanceFeeConfig.heading\' | translate}}</h6><performance-threshold-config-review performance-threshold-config="::$ctrl.fee.performanceThresholdConfig"></performance-threshold-config-review></div></div>'}},function(e,t,n){e.exports=function(e){e.component("performanceThresholdConfigForm",{bindings:{performanceThresholdConfig:"=ngModel",rules:"<"},template:n(472)(),controller:function(){var e=this;e.$onInit=function(){angular.isUndefined(e.performanceThresholdConfig)&&(e.performanceThresholdConfig={})}}})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<am-form-select name="thresholdType" ng-model="$ctrl.performanceThresholdConfig.type" options="$ctrl.rules.allowedTypes" option-key="\'performanceThresholdType.\'" label-text="{{\'fee.label.performanceFeeConfig.type\' | translate}}" is-required="true"></am-form-select><am-form-input ng-if="$ctrl.performanceThresholdConfig.type === \'PERCENTAGE\'" name="thresholdPercentage" type="text" ng-model="$ctrl.performanceThresholdConfig.percentage" label-text="{{\'fee.label.performanceFeeConfig.percentage\' | translate}}" input-mask-alias="feesPercentage" is-required="true"></am-form-input><am-form-select ng-if="$ctrl.performanceThresholdConfig.type === \'BENCHMARK\'" name="thresholdBenchmark" ng-model="$ctrl.performanceThresholdConfig.benchmark" options="$ctrl.rules.allowedBenchmarks" option-key="\'description\'" label-text="{{\'fee.label.performanceFeeConfig.benchmark\' | translate}}" is-required="true"></am-form-select>'}},function(e,t,n){e.exports=function(e){e.component("performanceThresholdConfigReview",{bindings:{performanceThresholdConfig:"<"},template:n(474)()})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<am-form-label label-text="{{\'fee.label.performanceFeeConfig.type\' | translate}}" value-text="{{\'performanceThresholdType.\' + $ctrl.performanceThresholdConfig.type | translate}}"></am-form-label><am-form-label ng-if="::$ctrl.performanceThresholdConfig.type === \'PERCENTAGE\'" label-text="{{\'fee.label.performanceFeeConfig.percentage\' | translate}}" value-text="{{$ctrl.performanceThresholdConfig.percentage + \' %\'}}"></am-form-label><am-form-label ng-if="::$ctrl.performanceThresholdConfig.type === \'BENCHMARK\'" label-text="{{\'fee.label.performanceFeeConfig.benchmark\' | translate}}" value-text="{{$ctrl.performanceThresholdConfig.benchmark.description}}"></am-form-label>'}},function(e,t,n){e.exports=function(e){n(476)(e),n(478)(e)}},function(e,t,n){e.exports=function(e){e.component("feesProfileReview",{bindings:{feesProfile:"<"},template:n(477)()})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<h4 translate="clientFeesProfile.heading.configuration" translate-values="{ feeConfigurationType : (\'feesConfigurationType.\' + $ctrl.feesProfile.feesConfiguration.type | translate), clientAccountId : $ctrl.feesProfile.feesConfiguration.clientAccountId  }"></h4><fees-configuration-review fees-configuration="$ctrl.feesProfile.feesConfiguration"></fees-configuration-review><br><associated-mmc-fees-review associated-mmc-fees="$ctrl.feesProfile.associatedMmcFees"></associated-mmc-fees-review>'}},function(e,t,n){e.exports=function(e){e.component("pendingFeesProfile",{bindings:{feesProfile:"<",cancelListener:"&?",disableCancel:"<?"},template:n(479)(),controller:["$q","$translate","ModalService","ResourceService","ClientFeesService",function(e,t,n,a,r){var i=this;i.$onInit=function(){i.openForm=function(){r.openFeesApprovalModal(i.feesProfile)},i.cancelRequest=function(){var e={title:t.instant("clientFeesConfiguration.cancelPending.title"),modalData:{pendingText:t.instant("clientFeesConfiguration.cancelPending.desc"),errorText:t.instant("clientFeesConfiguration.cancelPending.error"),noSuccessScreen:!0,confirmFn:function(){return r.cancelFeesProfile(i.feesProfile)}}};n.openConfirmModal(e).then(function(e){"SUCCESS"===e&&i.cancelListener&&i.cancelListener()})}}}]})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<div class="row" ng-if="$ctrl.feesProfile.profileState !== \'ACTIVE\'"><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"><div class="alert alert-warning text-center"><p translate="{{\'feesProfileState.\' + $ctrl.feesProfile.profileState}}" translate-values="{ \'lineBreak\' : \'&lt;br&gt;\' }"></p><br><am-button ng-if="::!$ctrl.disableCancel" btn-text="{{\'word.cancel\' | translate}}" on-click="$ctrl.cancelRequest()"></am-button><am-button ng-if="$ctrl.feesProfile.profileState === \'PENDING_APPROVAL\'" btn-text="{{\'clientFeesConfiguration.openPrintableForm\' | translate}}" on-click="$ctrl.openForm()" btn-type="primary"></am-button></div></div></div>'}},function(e,t,n){e.exports=function(e){n(481)(e)}},function(e,t,n){e.exports=function(e){e.component("feesChangeRequestReview",{bindings:{feesChangeRequest:"<"},template:n(482)()})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<h4 translate="clientFeesProfile.heading.configuration" translate-values="{ feeConfigurationType : (\'feesConfigurationType.\' + $ctrl.feesChangeRequest.feesConfiguration.type | translate), clientAccountId : $ctrl.feesChangeRequest.feesConfiguration.clientAccountId  }"></h4><fees-configuration-review fees-configuration="$ctrl.feesChangeRequest.feesConfiguration"></fees-configuration-review><br><associated-mmc-fees-review associated-mmc-fees="$ctrl.feesChangeRequest.associatedMmcFees"></associated-mmc-fees-review>'}},function(e,t,n){e.exports=function(e){n(484)(e)}},function(e,t,n){e.exports=function(e){e.component("feesTemplateReview",{bindings:{feesTemplate:"<"},template:n(485)()})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<am-form-label label-text="{{\'feesTemplate.label.templateName\' | translate}}" value-text="{{::$ctrl.feesTemplate.identifier.templateName}}"></am-form-label><fees-configuration-review fees-configuration="::$ctrl.feesTemplate.configuration"></fees-configuration-review>'}},function(e,t,n){e.exports=function(e){n(487)(e),n(489)(e),n(490)(e),n(492)(e),n(494)(e),n(496)(e)}},function(e,t,n){e.exports=function(e){e.component("tradeUnitAssetCodesForm",{bindings:{configByCode:"<",displayAsset:"<"},template:n(488)(),controller:["ClientFeesService",function(e){var t=this;t.$onInit=function(){t.groupsEligibleForSelectAll=["CURRENCY","EXCHANGE"],t.selectAllCurrency={};for(var n=0;n<t.groupsEligibleForSelectAll.length;++n){var a=t.groupsEligibleForSelectAll[n];if(t.displayAsset[a])for(var r=t.displayAsset[a].sortedRegions,i=0;i<r.length;++i){for(var o=r[i],s=!0,l=t.displayAsset[a][o],c=0;c<l.length;++c)t.configByCode[l[c].definition.code]||(s=!1);t.selectAllCurrency[a+"_"+o]=s}}t.getTradeUnitGroupText=e.getTradeUnitGroupText,t.getTradeUnitConfigName=function(t){return e.getTradeUnitConfigName(t,"MINI_CONTRACTS"===t.unitType||"MICRO_CONTRACTS"===t.unitType)},t.getConfigRowCount=function(e){for(var t=[],n=0;n<e.length/3;++n)t.push(n);return t},t.getConfigRow=function(e,t){for(var n=[],a=3*t;a<3*(t+1)&&a<e.length;++a)n.push(e[a]);return n},t.canSelectAll=function(e,n){var a=t.displayAsset[e][n];return t.groupsEligibleForSelectAll.includes(e)&&a&&a.length>6},t.toggleSelectAll=function(e,n){for(var a=t.displayAsset[e][n],r=0;r<a.length;++r)t.configByCode[a[r].definition.code]=t.selectAllCurrency[e+"_"+n]},t.toggleConfig=function(e,n,a){t.configByCode[e.definition.code]=!t.configByCode[e.definition.code],t.selectAllCurrency[n+"_"+a]&&!t.configByCode[e.definition.code]&&(t.selectAllCurrency[n+"_"+a]=t.configByCode[e.definition.code])}}}]})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<div ng-repeat="group in ::$ctrl.displayAsset.sortedGroupNames"><h6 class="subtitle">{{$ctrl.getTradeUnitGroupText(group)}}</h6><div ng-repeat="region in ::$ctrl.displayAsset[group].sortedRegions"><h6 ng-if="::region !== \'NONE\'">{{\'tradeUnitRegion.\' + region | translate}}</h6><div ng-if="$ctrl.canSelectAll(group, region)"><p><input ng-model="$ctrl.selectAllCurrency[group + \'_\' + region]" type="checkbox" ng-change="$ctrl.toggleSelectAll(group, region)" i-check><strong>&nbsp;{{ \'word.selectAll\' | translate}}</strong></p></div><div class="row" ng-repeat="rowIndex in ::$ctrl.getConfigRowCount($ctrl.displayAsset[group][region])"><div class="col-xs-12 col-sm-4 col-md-4 col-lg-4" ng-repeat="config in ::$ctrl.getConfigRow($ctrl.displayAsset[group][region], rowIndex)"><div class="btn-selectors"><p><a class="btn btn-default" href="javascript:void(0)" ng-class="{ \'active\' : $ctrl.configByCode[config.definition.code] }" ng-click="$ctrl.toggleConfig(config, group, region)">{{::$ctrl.getTradeUnitConfigName(config.definition)}}</a></p></div></div></div></div><br ng-if="!$last"></div>'}},function(e,t){e.exports=function(e){e.component("tradeUnitAssetForm",{bindings:{displayAsset:"<",rulesPerCode:"<"},require:{formServerErrors:"^^?formServerErrors"},controller:["$scope","$compile","$element","ClientFeesService","ErrorService",function(e,t,n,a,r){var i=this,o=function(e,t){var n=e.fixedAmounts[t];return!(!angular.isDefined(n.amount)||""===n.amount)||!(!angular.isDefined(n.breakpoint)||""===n.breakpoint)},s=function(e,t){var n=e.fixedAmounts[t],a=angular.isDefined(n.amount)&&""!==n.amount,r=angular.isDefined(n.breakpoint)&&""!==n.breakpoint;if(a||r)e.configurationType="FIXED_AMOUNT";else{for(var i=t+1;i<e.fixedAmounts.length;++i){var s=e.fixedAmounts[i];delete s.amount,delete s.breakpoint}(function(e){for(var t=0;t<e.fixedAmounts.length;++t)if(o(e,t))return!0;return!1})(e)||delete e.configurationType}};i.$onInit=function(){i.getTradeUnitConfigName=a.getTradeUnitConfigName,i.getTradeUnitTypeText=a.getTradeUnitTypeText,i.getTradeUnitGroupText=a.getTradeUnitGroupText,i.onTicketChargeChange=function(e){i.rulesPerCode[e.definition.code].maximumAllowed&&(angular.isUndefined(e.amount.amount)||""===e.amount.amount)?delete e.amount.type:e.amount.type="TICKET_CHARGE"},i.isTicketChargeDisabled=function(e){return angular.isDefined(e.amount.type)&&"TICKET_CHARGE"!==e.amount.type},i.onMinimumChange=function(e){angular.isUndefined(e.amount.minimum)||""===e.amount.minimum?delete e.amount.type:e.amount.type="MIN_MAX"},i.isMinimumDisabled=function(e){return!i.rulesPerCode[e.definition.code].maximumAllowed||angular.isDefined(e.amount.type)&&"MIN_MAX"!==e.amount.type},i.onMaximumChange=function(e){(angular.isUndefined(e.amount.maximumType)||"NONE"===e.amount.maximumType)&&(e.amount.maximumType=i.rulesPerCode[e.definition.code].allowedMaximumTypes[0])},i.isMaximumDisabled=function(e){return!i.rulesPerCode[e.definition.code].maximumAllowed},i.onFixedMarkupChange=function(e){angular.isUndefined(e.markup)||""===e.markup?delete e.configurationType:e.configurationType="FIXED_MARKUP"},i.isFixedMarkupDisabled=function(e){var t=i.rulesPerCode[e.definition.code];return!(t.tradeUnitConfigurationRules.FIXED_MARKUP&&!t.amountOnly)||angular.isDefined(e.configurationType)&&"FIXED_MARKUP"!==e.configurationType},i.onPercentMarkupChange=function(e){angular.isUndefined(e.percentage)||""===e.percentage?delete e.configurationType:e.configurationType="PERCENT_MARKUP"},i.isPercentMarkupDisabled=function(e){var t=i.rulesPerCode[e.definition.code];return!(t.tradeUnitConfigurationRules.PERCENT_MARKUP&&!t.amountOnly)||angular.isDefined(e.configurationType)&&"PERCENT_MARKUP"!==e.configurationType},i.onFixedAmountChange=function(e,t){angular.isUndefined(e.fixedAmounts)||e.fixedAmounts.length<t||s(e,t)},i.onFixedBreakpointChange=function(e,t){angular.isUndefined(e.fixedAmounts)||e.fixedAmounts.length<t||s(e,t)},i.isFixedAmountDisabled=function(e,t){var n=i.rulesPerCode[e.definition.code];return!(n.tradeUnitConfigurationRules.FIXED_AMOUNT&&!n.amountOnly)||(!(!angular.isDefined(e.configurationType)||"FIXED_AMOUNT"===e.configurationType)||0!==t&&!o(e,t-1))},i.isPlusCostDisabled=function(e){return angular.isUndefined(e.configurationType)||"FIXED_AMOUNT"!==e.configurationType},i.getServerErrors=function(){return r.getFormServerErrors(i.formServerErrors)}},i.$postLink=function(){for(var a=i.displayAsset,r=0,o=0;o<a.sortedGroupNames.length&&0===r;++o)for(var s=a[b=a.sortedGroupNames[o]].sortedRegions,l=0;l<s.length&&0===r;++l)for(var c=s[l],u=a[b][c],d=0;d<u.length;++d){var p=u[d],g=i.rulesPerCode[p.definition.code].tradeUnitConfigurationRules.FIXED_AMOUNT;if(angular.isDefined(g)){r=g.maxFixedAmountCount;break}}for(var f=2*r-1,m='<div form-server-errors="$ctrl.getServerErrors()" ng-form="$ctrl.tradeUnitAssetForm">',v=a.sortedGroupNames,h=0;h<v.length;++h){var b=v[h];h>0&&(m+="<br />"),m+='<div class="table-responsive">',m+='<table width="100%" cellpadding="0" cellspacing="0" border="0" class="table table-condensed table-bordered">',m+="<thead>",m+="<tr>",m+='<th align="center" valign="bottom" width="8%">{{$ctrl.getTradeUnitGroupText(\''+b+"')}}</th>",m+='<th align="center" valign="bottom" width="6%">{{\'fee.label.tradeUnit.unit\' | translate}}</th>',m+='<th align="center" valign="bottom">{{\'fee.label.tradeUnit.ticketCharge\' | translate}}</th>',m+='<th align="center" valign="bottom">{{\'fee.label.tradeUnit.minimum\' | translate}}</th>',m+='<th align="center" valign="bottom">{{\'fee.label.tradeUnit.maximum\' | translate}}</th>',m+='<th align="center" valign="bottom">{{\'tradeUnitConfigurationType.FIXED_MARKUP\' | translate}}</th>',m+='<th align="center" valign="bottom">{{\'tradeUnitConfigurationType.PERCENT_MARKUP\' | translate}}</th>';for(var y=0;y<r;++y)m+='<th align="center" valign="bottom" translate="fee.label.tradeUnit.breakpointAmount" translate-values="::{ \'index\' : '+(y+1)+' }"></th>',y<r-1&&(m+='<th align="center" valign="bottom" translate="fee.label.tradeUnit.breakpointVolume" translate-values="::{ \'index\' : '+(y+1)+' }"></th>');r>0&&(m+='<th align="center" valign="bottom">{{\'fee.label.tradeUnit.plusCost\' | translate}}</th>'),m+="</tr>",m+="</thead>";s=a[b].sortedRegions;for(var D=0;D<s.length;++D){m+="<tbody>","NONE"!==(c=s[D])&&(m+="<tr>",m+='<td colspan="'+(7+f)+'" align="left" valign="middle" class="table-subheader">',m+="{{'tradeUnitRegion."+c+"' | translate}}",m+="</td>",m+="</tr>");for(var E=a[b][c],x=0;x<E.length;++x){p=E[x];var A="$ctrl.displayAsset['"+b+"']['"+c+"']["+x+"]";m+='<tr class="valign-top">',m+='<td align="left" valign="middle"><p>'+i.getTradeUnitConfigName(p.definition,!1)+"</p></td>",m+='<td align="left" valign="middle"><p>',i.rulesPerCode[p.definition.code].allowedTradeUnitTypes.length>1?m+='<am-select name="'+p.definition.code+'_tradeUnitType" ng-model="'+A+'.amount.tradeUnitType" options="$ctrl.rulesPerCode[\''+p.definition.code+'\'].allowedTradeUnitTypes" option-key="\'tradeUnitType.\'" hide-empty-option="true"></am-select>':p.definition.ibPrime||(m+=i.getTradeUnitTypeText(p.amount.tradeUnitType)),m+="</p></td>",m+='<td align="left" valign="middle">',m+='<input name="'+p.definition.code+'_amount" type="text" am-input-errors class="form-control" ng-model="'+A+'.amount.amount" ng-change="$ctrl.onTicketChargeChange('+A+')" ng-disabled="$ctrl.isTicketChargeDisabled('+A+')" maxlength="10" />',m+="</td>",m+='<td align="left" valign="middle">',m+='<input name="'+p.definition.code+'_minimum" type="text" am-input-errors class="form-control" ng-model="'+A+'.amount.minimum" ng-change="$ctrl.onMinimumChange('+A+')" ng-disabled="$ctrl.isMinimumDisabled('+A+')" maxlength="10" />',m+="</td>",m+='<td align="left" valign="middle">',m+='<input name="'+p.definition.code+'_maximum" type="text" am-input-errors class="form-control" ng-model="'+A+'.amount.maximum" ng-change="$ctrl.onMaximumChange('+A+')" ng-disabled="$ctrl.isMaximumDisabled('+A+')" maxlength="10" />',m+="</td>",m+='<td align="left" valign="middle">',m+='<input name="'+p.definition.code+'_markup" type="text" am-input-errors class="form-control" ng-model="'+A+'.markup" ng-change="$ctrl.onFixedMarkupChange('+A+')" ng-disabled="$ctrl.isFixedMarkupDisabled('+A+')" maxlength="10" />',m+="</td>",m+='<td align="left" valign="middle">',m+='<input name="'+p.definition.code+'_percentage" type="text" am-input-errors class="form-control" ng-model="'+A+'.percentage" ng-change="$ctrl.onPercentMarkupChange('+A+')" ng-disabled="$ctrl.isPercentMarkupDisabled('+A+')" maxlength="10" />',m+="</td>";for(y=0;y<r;++y)m+='<td align="left" valign="middle">',m+='<input name="'+p.definition.code+"_amount"+y+'" type="text" am-input-errors class="form-control" ng-model="'+A+".fixedAmounts["+y+'].amount" ng-change="$ctrl.onFixedAmountChange('+A+", "+y+')" ng-disabled="$ctrl.isFixedAmountDisabled('+A+", "+y+')" maxlength="10" />',m+="</td>",y<r-1&&(m+='<td align="left" valign="middle">',m+='<input name="'+p.definition.code+"_breakpoint"+y+'" type="text" am-input-errors class="form-control" ng-model="'+A+".fixedAmounts["+y+'].breakpoint" ng-change="$ctrl.onFixedBreakpointChange('+A+", "+y+')" ng-disabled="$ctrl.isFixedAmountDisabled('+A+", "+y+')" maxlength="10" />',m+="</td>");r>0&&(m+='<td align="center" valign="middle">',m+='<input i-check type="checkbox" ng-model="'+A+'.plusCost" ng-disabled="$ctrl.isPlusCostDisabled('+A+')" />',m+="</td>"),m+="</tr>",m+="<tr ng-if=\"$ctrl.getServerErrors()['"+p.definition.code+"']\">",m+='<td class="alert alert-danger" colspan="'+(7+f)+'">',m+="<p>{{'fee.error.TRADE_UNIT.' + $ctrl.getServerErrors()['"+p.definition.code+"'] | translate}}</p>",m+="</td>",m+="</tr>",i.rulesPerCode[p.definition.code].allowedMaximumTypes.length>1&&(m+='<tr class="bg-light-blue" ng-if="'+A+".configurationType === 'FIXED_AMOUNT'\">",m+='<td colspan="3" align="left" valign="middle"></td>',m+='<td align="left" valign="middle">',m+='<am-select name="'+p.definition.code+'_maximumType" ng-model="'+A+'.amount.maximumType" options="$ctrl.rulesPerCode[\''+p.definition.code+'\'].allowedMaximumTypes" option-key="\'tradeUnitMaximumType.\'" hide-empty-option="true"></am-select>',m+="</td>",m+='<td colspan="'+(3+f)+'" align="left" valign="middle">',m+="{{'fee.label.tradeUnit.maximumTypeAllowed' | translate}}",m+="</td>",m+="</tr>")}m+="</tbody>"}m+="</table>",m+="</div>"}m+="</div>",n.replaceWith(t(m)(e))}}]})}},function(e,t,n){e.exports=function(e){e.component("tradeUnitAssetReview",{bindings:{displayAsset:"<"},template:n(491)(),controller:["ClientFeesService",function(e){var t=this,n=function(e,t){return"FIXED_AMOUNT"!==e.configurationType?null:e.fixedAmounts.length<=t?null:e.fixedAmounts[t]};t.$onInit=function(){t.getTradeUnitConfigName=e.getTradeUnitConfigName,t.getTradeUnitTypeText=e.getTradeUnitTypeText,t.getTradeUnitGroupText=e.getTradeUnitGroupText,t.getMinimumValue=function(e){return"MIN_MAX"!==e.amount.type?"":0===e.amount.minimum&&0===e.amount.maximum?"":e.amount.minimum},t.getMaximumValue=function(e){return 0===e.amount.maximum?"":"PERCENTAGE"===e.amount.maximumType?e.amount.maximum+" %":e.amount.maximum},t.getFixedAmount=function(e,t){var a=n(e,t);return null!==a?a.amount:""},t.getFixedBreakpoint=function(e,t){var a=n(e,t);return null===a||0===a.breakpoint?"":a.breakpoint}}}]})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<div class="table-responsive" ng-repeat="group in ::$ctrl.displayAsset.sortedGroupNames"><table class="table table-condensed table-bordered" width="100%" cellpadding="0" cellspacing="0" border="0"><thead><tr><th align="center" valign="bottom" width="8%">{{$ctrl.getTradeUnitGroupText(group)}}</th><th align="center" valign="bottom">{{\'fee.label.tradeUnit.unit\' | translate}}</th><th align="center" valign="bottom">{{\'fee.label.tradeUnit.ticketCharge\' | translate}}</th><th align="center" valign="bottom">{{\'fee.label.tradeUnit.minimum\' | translate}}</th><th align="center" valign="bottom">{{\'fee.label.tradeUnit.maximum\' | translate}}</th><th align="center" valign="bottom">{{\'tradeUnitConfigurationType.FIXED_MARKUP\' | translate}}</th><th align="center" valign="bottom">{{\'tradeUnitConfigurationType.PERCENT_MARKUP\' | translate}}</th><th align="center" valign="bottom" translate="fee.label.tradeUnit.breakpointAmount" translate-values="{ index : 1 }"></th><th align="center" valign="bottom" translate="fee.label.tradeUnit.breakpointVolume" translate-values="{ index : 1 }"></th><th align="center" valign="bottom" translate="fee.label.tradeUnit.breakpointAmount" translate-values="{ index : 2 }"></th><th align="center" valign="bottom" translate="fee.label.tradeUnit.breakpointVolume" translate-values="{ index : 2 }"></th><th align="center" valign="bottom" translate="fee.label.tradeUnit.breakpointAmount" translate-values="{ index : 3 }"></th><th align="center" valign="bottom" translate="fee.label.tradeUnit.breakpointVolume" translate-values="{ index : 3 }"></th><th align="center" valign="bottom" translate="fee.label.tradeUnit.breakpointAmount" translate-values="{ index : 4 }"></th><th align="center" valign="bottom" translate="fee.label.tradeUnit.breakpointVolume" translate-values="{ index : 4 }"></th><th align="center" valign="bottom" translate="fee.label.tradeUnit.breakpointAmount" translate-values="{ index : 5 }"></th><th align="center" valign="bottom">{{\'fee.label.tradeUnit.plusCost\' | translate}}</th></tr></thead><tbody ng-repeat="region in ::$ctrl.displayAsset[group].sortedRegions"><tr ng-if="::region !== \'NONE\'"><td class="table-subheader" colspan="16" align="left" valign="middle">{{\'tradeUnitRegion.\' + region | translate}}</td></tr><tr ng-repeat="config in $ctrl.displayAsset[group][region]"><td align="left" valign="middle">{{::$ctrl.getTradeUnitConfigName(config.definition, false)}}</td><td align="left" valign="middle">{{::config.definition.ibPrime ? \'\' : $ctrl.getTradeUnitTypeText(config.amount.tradeUnitType)}}</td><td align="left" valign="middle">{{::config.amount.type === \'TICKET_CHARGE\' ? config.amount.amount : \'\'}}</td><td align="left" valign="middle">{{::$ctrl.getMinimumValue(config)}}</td><td align="left" valign="middle">{{::$ctrl.getMaximumValue(config)}}</td><td align="left" valign="middle">{{::config.configurationType === \'FIXED_MARKUP\' ? config.markup : \'\'}}</td><td align="left" valign="middle">{{::config.configurationType === \'PERCENT_MARKUP\' ? config.percentage : \'\'}}</td><td align="left" valign="middle">{{::$ctrl.getFixedAmount(config, 0)}}</td><td align="left" valign="middle">{{::$ctrl.getFixedBreakpoint(config, 0)}}</td><td align="left" valign="middle">{{::$ctrl.getFixedAmount(config, 1)}}</td><td align="left" valign="middle">{{::$ctrl.getFixedBreakpoint(config, 1)}}</td><td align="left" valign="middle">{{::$ctrl.getFixedAmount(config, 2)}}</td><td align="left" valign="middle">{{::$ctrl.getFixedBreakpoint(config, 2)}}</td><td align="left" valign="middle">{{::$ctrl.getFixedAmount(config, 3)}}</td><td align="left" valign="middle">{{::$ctrl.getFixedBreakpoint(config, 3)}}</td><td align="left" valign="middle">{{::$ctrl.getFixedAmount(config, 4)}}</td><td align="center" valign="middle"><input type="checkbox" disabled i-check ng-model="config.plusCost"></td></tr></tbody></table><br ng-if="!$last"></div>'}},function(e,t,n){e.exports=function(e){e.component("tradeUnitCodesForm",{bindings:{configByCode:"=ngModel",rules:"<"},template:n(493)(),controller:["$translate","ModalService","ClientFeesService",function(e,t,n){var a=this;a.$onInit=function(){angular.isUndefined(a.configByCode)&&(a.configByCode={}),a.configByAsset={},a.openAssetModal=function(n){var r={templateUrl:"trade-unit-asset-codes-modal.component",title:e.instant("fee.label.tradeUnit.assetType."+n),modalData:{configByCode:a.configByCode,displayAsset:a.tradeUnitDisplay[n]}};t.openModal(r).then(function(e){if(angular.isDefined(e)){a.configByCode=e,delete a.configByAsset[n];for(var t=0;t<a.rules.allowedConfigurations.length;++t){var r=a.rules.allowedConfigurations[t];if((r.definition.assetType===n||"IBPRIME"===n&&r.definition.ibPrime)&&a.configByCode[r.definition.code]){a.configByAsset[n]=!0;break}}}})},function(){for(var e=0;e<a.rules.allowedConfigurations.length;++e){var t=a.rules.allowedConfigurations[e],r=t.definition.code;a.configByCode[r]&&(t.definition.ibPrime?a.configByAsset.IBPRIME=!0:a.configByAsset[t.definition.assetType]=!0)}a.tradeUnitDisplay=n.getTradeUnitDisplayObject(a.rules,"allowedConfigurations")}()}}]})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<div class="form-group"><div class="row"><div class="col-xs-12 col-sm-6 col-md-4 col-lg-4" ng-repeat="assetType in ::$ctrl.tradeUnitDisplay.sortedAssetTypes"><div class="btn-selectors"><p><a class="btn btn-default" href="javascript:void(0)" ng-class="{ \'active\' : $ctrl.configByAsset[assetType] }" ng-click="$ctrl.openAssetModal(assetType)">{{\'fee.label.tradeUnit.assetType.\' + assetType | translate}}</a></p></div></div></div></div>'}},function(e,t,n){e.exports=function(e){e.component("tradeUnitFeeForm",{bindings:{fee:"=ngModel",rules:"<"},template:n(495)(),controller:["ClientFeesService",function(e){var t=this;t.$onInit=function(){angular.isUndefined(t.fee)&&(t.fee={type:"TRADE_UNIT"}),angular.isUndefined(t.fee.tradeUnitConfigurations)&&(t.fee.tradeUnitConfigurations=[]),function(){for(var n={},a=0;a<t.fee.tradeUnitConfigurations.length;++a){var r=t.fee.tradeUnitConfigurations[a];angular.isDefined(r.amount)&&(0===r.amount.maximum&&delete r.amount.maximum,0===r.amount.minimum&&delete r.amount.minimum,"MIN_MAX"===r.amount.type&&angular.isUndefined(r.amount.minimum)&&delete r.amount.type),n[r.definition.code]=r}t.rulesPerCode={};for(a=0;a<t.rules.allowedConfigurations.length;++a){var i=t.rules.allowedConfigurations[a],o=i.definition.code;t.rulesPerCode[i.definition.code]=i;var s=n[o];if(angular.isUndefined(s)&&((s={definition:i.definition,amount:{}}).amount.tradeUnitType=i.definition.unitType,t.fee.tradeUnitConfigurations.push(s)),i.maximumAllowed||(s.amount.type="TICKET_CHARGE"),i.tradeUnitConfigurationRules.FIXED_AMOUNT){angular.isUndefined(s.fixedAmounts)&&(s.fixedAmounts=[]);for(var l=0;l<s.fixedAmounts.length;++l)0===s.fixedAmounts[l].breakpoint&&delete s.fixedAmounts[l].breakpoint;var c=i.tradeUnitConfigurationRules.FIXED_AMOUNT;for(l=s.fixedAmounts.length;l<c.maxFixedAmountCount;++l)s.fixedAmounts.push({})}}t.tradeUnitDisplay=e.getTradeUnitDisplayObject(t.fee)}()}}]})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<div class="row"><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"><div ng-repeat="assetType in ::$ctrl.tradeUnitDisplay.sortedAssetTypes"><h6 class="subtitle">{{\'fee.label.tradeUnit.assetType.\' + assetType | translate}}</h6><trade-unit-asset-form display-asset="$ctrl.tradeUnitDisplay[assetType]" rules-per-code="$ctrl.rulesPerCode"></trade-unit-asset-form></div></div></div>'}},function(e,t,n){e.exports=function(e){e.component("tradeUnitFeeReview",{bindings:{fee:"<"},template:n(497)(),controller:["$translate","ClientFeesService",function(e,t){var n=this;n.$onInit=function(){n.tradeUnitDisplay=t.getTradeUnitDisplayObject(n.fee)}}]})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<div class="form-review"><div class="panel-group" id="tradeUnitFees"><div class="panel panel-small" ng-repeat="assetType in ::$ctrl.tradeUnitDisplay.sortedAssetTypes"><div class="panel-heading"><h4 class="panel-title"><a role="button" data-toggle="collapse" data-parent="#tradeUnitFees" data-target="#{{\'collapseTradeUnitFee_\' + $ctrl.tradeUnitDisplay.id + \'_\' + assetType}}">{{\'fee.label.tradeUnit.assetType.\' + assetType | translate}}</a></h4></div><div class="panel-collapse collapse show" id="{{\'collapseTradeUnitFee_\' + $ctrl.tradeUnitDisplay.id + \'_\' + assetType}}"><div class="panel-body"><trade-unit-asset-review display-asset="$ctrl.tradeUnitDisplay[assetType]"></trade-unit-asset-review></div></div></div></div></div>'}},function(e,t,n){e.exports=function(e){n(499)(e)}},function(e,t,n){e.exports=function(e){e.component("effectiveDateForm",{bindings:{effectiveFrom:"=ngModel",isAllowed:"<"},template:n(500)(),controller:["$filter","$translate","ModalService",function(e,t,n){var a=this;a.openEffectiveDateNotesModal=function(){n.openInfoModal({title:t.instant("feeApproval.notes.effectiveDateHeading"),modalData:{infoContent:t.instant("feeApproval.notes.effectiveDate",{lineBreak:"<br>",ulStart:"<ul>","<ulEnd>":"</ul>",liStart:"<li>",liEnd:"</li>"})}})},a.$onInit=function(){var t=new Date;a.minEffectiveDate=e("date")(t.setDate(t.getDate()+1),"yyyy-MM-dd")}}]})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<generic-form-data label-text="{{ \'fee.label.advisor.feesEffectiveFrom\' | translate }}"><div class="col-xs-10 col-sm-10 col-md-10 col-lg-10"><am-date-picker name="effectiveFrom" selected-date="$ctrl.effectiveFrom" is-required="$ctrl.isAllowed" is-disabled="!$ctrl.isAllowed" min-date="$ctrl.minEffectiveDate" days-of-week-disabled="[0,6]"></am-date-picker></div><div class="col-xs-2 col-sm-2 col-md-2 col-lg-2"><am-button btn-type="icon" on-click="$ctrl.openEffectiveDateNotesModal()" btn-icon="fa-info-circle"></am-button></div></generic-form-data>'}},function(e,t,n){e.exports=function(e){n(502)(e)}},function(e,t){e.exports=function(e){Inputmask.extendAliases({feesPercentage:{alias:"numeric",rightAlign:!1,autoUnmask:!0,max:99999},feesAmount:{alias:"numeric",groupSeparator:",",autoGroup:!0,rightAlign:!1,autoUnmask:!0,max:9999999999}})}},function(e,t,n){e.exports=function(e){n(504)(e),n(505)(e)}},function(e,t,n){var a=n(397).typeOrder;e.exports=function(e){e.filter("sortFees",["orderByFilter",function(e){return function(t){return e(t,function(e){return a(e.type)})}}])}},function(e,t,n){var a=n(397).typeOrder;e.exports=function(e){e.filter("sortFeeTypes",["orderByFilter",function(e){return function(t){return e(t,a)}}])}},function(e,t,n){e.exports=function(e){n(507)(e),n(510)(e),n(518)(e),n(520)(e)}},function(e,t,n){e.exports=function(e){n(508)(e)}},function(e,t,n){e.exports=function(e){e.component("feesApprovalModal",{template:n(509)(),controller:["ResourceService","ModalService","PageService",function(t,n,a){var r=this;r.print=function(){$("#tradeUnitFees .collapse").collapse("show"),a.print()},r.$onInit=function(){r.feesProfile=n.getModalData().feesProfile,r.feesConfiguration=r.feesProfile.feesConfiguration,n.setModalButtons([{alignment:"right",label:"word.print",fn:r.print}]),r.isLoading=!0,t.create(e.DEFAULT_SERVER_PATH+"/ClientFees/ApprovalForm",{masterAccountId:r.feesConfiguration.masterAccountId,clientAccountId:r.feesConfiguration.clientAccountId}).then(function(e){r.signature=e.data.signature,r.advisorName=e.data.advisorName,r.advisorFirm=e.data.advisorFirm}).finally(function(){r.isLoading=!1})}}]})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<loading-overlay ng-if="$ctrl.isLoading"></loading-overlay><div ng-if="!$ctrl.isLoading"><div ng-if="$ctrl.feesConfiguration.type == \'ADVISOR\'"><am-form-label label-text="{{\'clientFeesApprovalForm.label.advisorName\' | translate}}" value-text="{{::$ctrl.advisorName}}"></am-form-label><am-form-label label-text="{{\'clientFeesApprovalForm.label.advisorFirm\' | translate}}" value-text="{{::$ctrl.advisorFirm}}"></am-form-label><am-form-label label-text="{{\'clientFeesApprovalForm.label.advisorAccount\' | translate}}" value-text="{{::$ctrl.feesConfiguration.masterAccountId}}"></am-form-label><am-form-label label-text="{{\'clientFeesApprovalForm.label.clientAccount\' | translate}}" value-text="{{::$ctrl.feesConfiguration.clientAccountId}}"></am-form-label></div><div ng-if="$ctrl.feesConfiguration.type == \'BROKER\'"><am-form-label label-text="{{\'clientFeesApprovalForm.label.brokerName\' | translate}}" value-text="{{::$ctrl.advisorName}}"></am-form-label><am-form-label label-text="{{\'clientFeesApprovalForm.label.brokerFirm\' | translate}}" value-text="{{::$ctrl.advisorFirm}}"></am-form-label><am-form-label label-text="{{\'clientFeesApprovalForm.label.brokerAccount\' | translate}}" value-text="{{::$ctrl.feesConfiguration.masterAccountId}}"></am-form-label><am-form-label label-text="{{\'clientFeesApprovalForm.label.clientAccount\' | translate}}" value-text="{{::$ctrl.feesConfiguration.clientAccountId}}"></am-form-label></div><p translate="clientFeesApprovalForm.instructions" translate-values="{ masterAccountTitle : $ctrl.feesConfiguration.masterAccountTitle }"></p><br><div class="table-responsive"><table class="table table-condensed" width="100%" cellspacing="0" cellpadding="0"><tbody><tr><td>{{\'word.email\' | translate}}</td><td>newaccounts@interactivebrokers.com</td></tr><tr><td>{{\'word.fax\' | translate}}</td><td>{{\'clientFeesApprovalForm.value.fax\' | translate}}</td></tr><tr><td><span>{{\'clientFeesApprovalForm.label.overnight\' | translate}}</span><br><span class="text-small">{{\'clientFeesApprovalForm.subtext.overnight\' | translate}}</span></td><td><span translate="clientFeesApprovalForm.value.overnight" translate-values="{ break : \'&lt;br /&gt;\' }"></span></td></tr><tr><td><span>{{\'clientFeesApprovalForm.label.mail\' | translate}}</span><br><span class="text-small">{{\'clientFeesApprovalForm.subtext.mail\' | translate}}</span></td><td><span translate="clientFeesApprovalForm.value.mail" translate-values="{ break : \'&lt;br /&gt;\' }"></span></td></tr></tbody></table></div><fees-profile-change-approval fees-profile="::$ctrl.feesProfile"></fees-profile-change-approval><hr><h4>{{\'word.signature\' | translate}}</h4><div ng-if="::$ctrl.signature.requirement !== \'ANY_HOLDER\'" ng-repeat="signature in ::$ctrl.signature.signatureSubmissionData.signatures track by $index"><am-form-signature signature="signature" name="{{\'signature_\' + $index}}" ph-text="{{\' \'}}"></am-form-signature><am-form-input ng-model="$ctrl.signatureDate" type="text" label-text="{{\'word.dated\' | translate}}" ph-text="{{\' \'}}"></am-form-input></div><div ng-if="::$ctrl.signature.requirement === \'ANY_HOLDER\'"><am-form-input ng-model="$ctrl.signatureName" type="text" label-text="{{\'word.signature\' | translate}}" ph-text="{{\' \'}}"></am-form-input><am-form-input ng-model="$ctrl.signatureDate" type="text" label-text="{{\'word.dated\' | translate}}" ph-text="{{\' \'}}"></am-form-input></div></div>'}},function(e,t,n){e.exports=function(e){n(511)(e),n(513)(e),n(515)(e),n(516)(e)}},function(e,t,n){e.exports=function(e){e.component("invoicingDetailsModal",{template:n(512)(),controller:["ClientInvoicingService","ModalService","ResourceService",function(t,n,a){var r=this;r.$onInit=function(){r.rules=n.getModalData().rules,r.errors={},angular.isDefined(n.getModalData().invoice)?r.invoice=n.getModalData().invoice:r.invoice={type:r.rules.type,moneyAmount:{amount:"",currencyType:"USD"}},r.getErrors=function(){return r.errors},n.setModalButtons([{alignment:"left",label:"word.cancel",fn:n.closeModal},{alignment:"right",label:"word.add",btnType:"primary",fn:function(){r.isInProgress=!0,a.fetch(e.DEFAULT_SERVER_PATH+"/ClientInvoicing/Validate/",{invoice:r.invoice}).then(function(e){var t=e.data.warnings;angular.isDefined(t)&&t.length>0&&(r.invoice.warnings=t),n.closeModal({invoice:r.invoice})},function(e){r.errors=e.data.errors}).finally(function(){r.isInProgress=!1})}}])}}]})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<loading-overlay ng-if="$ctrl.isInProgress"></loading-overlay><div ng-form="$ctrl.clientInvoicingConfigForm" form-server-errors="$ctrl.getErrors()"><invoicing-details-form ng-model="$ctrl.invoice" rules="$ctrl.rules"></invoicing-details-form></div>'}},function(e,t,n){e.exports=function(e){e.component("invoicingDownloadModal",{template:n(514)(),controller:["FileDownloadService","ModalService",function(t,n){var a=this,r=function(){a.isInProgress=!0,t.fetchFile(a.criteria,e.DEFAULT_SERVER_PATH+"/ClientInvoicingSummary/Export","arraybuffer","POST").then(function(e){var n=t.getFileNameFromHeaders(e.headers);t.download(n,e.data,e.headers("Content-Type"))}).finally(function(){a.isInProgress=!1,n.closeModal(!0)})};a.$onInit=function(){var e;a.isInProgress=!1,a.invoicingType=n.getModalData().invoicingType,a.allowedDownloadPeriods=n.getModalData().allowedDownloadPeriods,a.criteria={period:""},a.maxDate=new Date,(e=[]).push({label:"word.download",alignment:"right",btnType:"primary",fn:r,isDisabled:function(){return!("CUSTOM"!==a.criteria.period||a.criteria.fromDate&&a.criteria.toDate)||!a.downloadForm||!a.downloadForm.$valid}}),n.setModalButtons(e)}}]})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<loading-overlay ng-if="$ctrl.isInProgress"></loading-overlay><div ng-if="!$ctrl.errors.length" ng-form="$ctrl.downloadForm"><am-form-select name="period" ng-model="$ctrl.criteria.period" label-text="{{\'word.period\' | translate}}" options="$ctrl.allowedDownloadPeriods" option-key="\'invoicingDownloadPeriod.\'" model-listener="$ctrl.onPeriodChange()" is-required="true"></am-form-select><div ng-if="$ctrl.criteria.period === \'CUSTOM\'"><am-date-range-picker from-date="$ctrl.criteria.fromDate" to-date="$ctrl.criteria.toDate" max-date="$ctrl.maxDate" days-of-week-disabled="[]"></am-date-range-picker></div></div><div class="alert alert-danger" ng-if="$ctrl.errors.length"><p translate="{{ \'invoice.download.failed.\' + $ctrl.invoicingType }}"></p></div>'}},function(e,t){e.exports=function(e){e.component("invoicingReviewModal",{template:'<invoicing-details-review invoice="$ctrl.invoice"></invoicing-details-review>',controller:["ClientInvoicingService","ModalService",function(e,t){var n=this;n.$onInit=function(){n.invoice=t.getModalData().invoice;n.invoice.pending&&t.setModalButtons([{label:"word.edit",alignment:"right",btnType:"default",fn:function(){t.closeModal(),e.editInvoice(n.invoice.id,n.invoice.type)}}])}}]})}},function(e,t,n){e.exports=function(e){e.component("invoicingUploadModal",{template:n(517)(),controller:["ClientInvoicingService","FileUploadService","ModalService","ResourceService",function(t,n,a,r){var i=this,o=function(){i.isInProgress=!0;var t=new FormData,a=i.invoiceFile,r=1;angular.forEach(a,function(e){t.append("document"+r++,e)}),n.uploadFileToUrl(t,e.DEFAULT_SERVER_PATH+"/ClientInvoicingSummary/Upload").then(function(e){i.validInvoices=e.data.validInvoices,i.invalidInvoices=e.data.invalidInvoices,i.sequenceState=i.validInvoices.length||i.invalidInvoices.length?"REVIEW":"WARNING"},function(e){angular.isDefined(e.data)&&null!==e.data&&(i.errors=e.data.errors),i.sequenceState="WARNING"}).finally(function(){c(),i.isInProgress=!1})},s=function(){i.isInProgress=!0,r.create(e.DEFAULT_SERVER_PATH+"/ClientInvoicingSummary",{invoices:i.validInvoices}).then(function(){a.setModalResult("SUCCESS"),i.sequenceState="COMPLETION"},function(e){i.errors=e.data.errors,i.sequenceState="WARNING"}).finally(function(){c(),i.isInProgress=!1})},l=function(){i.sequenceState="START",c()},c=function(){var e=[];"START"===i.sequenceState?e.push({label:"word.upload",alignment:"right",btnType:"primary",fn:o}):"REVIEW"===i.sequenceState?(e.push({label:"word.back",alignment:"left",btnType:"default",fn:l}),i.validInvoices.length&&e.push({label:"word.confirm",alignment:"right",btnType:"primary",fn:s})):"COMPLETION"===i.sequenceState?e.push({label:"word.ok",alignment:"right",btnType:"default",fn:a.closeModal}):"WARNING"===i.sequenceState&&e.push({label:"word.back",alignment:"left",btnType:"default",fn:l}),a.setModalButtons(e)};i.$onInit=function(){i.sequenceState="START",i.validInvoices=[],i.invalidInvoices=[],i.errors={},i.invoicingType=a.getModalData().invoicingType,i.isInProgress=!1,c(),i.removeInvoice=function(e){i.validInvoices.splice(e,1),0===i.validInvoices.length&&(i.sequenceState="WARNING",c())}}}]})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<loading-overlay ng-if="$ctrl.isInProgress"></loading-overlay><div ng-if="$ctrl.sequenceState === \'START\'"><div ng-form="$ctrl.invoiceFileUploadForm"><p translate="invoicing.upload.note.text"></p><ul><li translate="invoicing.upload.note.1"></li><li translate="invoicing.upload.note.2"></li><li translate="invoicing.upload.note.3"></li><li translate="invoicing.upload.note.4"></li><li translate="invoicing.upload.note.5"></li><li><p class="alert alert-info"><strong translate="invoicing.upload.note.6"></strong></p></li></ul><br><am-file-input name="invoiceFile" ng-model="$ctrl.invoiceFile" label-text="{{\'invoicing.upload.browse\' | translate}}" is-required="true" server-errors="$ctrl.errors"></am-file-input></div></div><div ng-if="$ctrl.sequenceState === \'REVIEW\'"><p translate="invoicing.upload.review.text"></p><div class="row"><div class="col-12"><h6 class="subtitle" translate="invoicing.label.details"></h6><div class="form-bordered"><div class="row" ng-repeat="invoice in $ctrl.validInvoices"><div class="col-xs-10 col-11"><invoicing-details-row-display invoice="invoice.details"></invoicing-details-row-display><p ng-if="::invoice.details.model" translate="invoicing.details.model" translate-values="{ strongStart: \'&lt;strong&gt;\', strongEnd: \'&lt;/strong&gt;\', model: invoice.details.model }"></p><p ng-if="::invoice.details.memo" translate="invoicing.details.memo" translate-values="{ strongStart: \'&lt;strong&gt;\', strongEnd: \'&lt;/strong&gt;\', memo: invoice.details.memo }"></p><p class="alert alert-warning" ng-if="::invoice.message" translate="invoicing.details.note" translate-values="{ strongStart: \'&lt;strong&gt;\', strongEnd: \'&lt;/strong&gt;\', note: invoice.message }"></p></div><div class="col-xs-2 col-1"><p><am-button on-click="$ctrl.removeInvoice($index)" btn-type="icon" tooltip-text="{{\'word.cancel\' | translate}}" btn-icon="fa-times"></am-button></p></div></div></div></div></div><div ng-if="$ctrl.invalidInvoices.length"><br><div class="row"><div class="col-12"><h6 class="subtitle" translate="invoicing.upload.invalid"></h6><div class="form-bordered"><div class="row" ng-repeat="invoice in $ctrl.invalidInvoices"><div class="col-xs-10 col-11"><invoicing-details-row-display invoice="invoice.details"></invoicing-details-row-display><p ng-if="::invoice.details.model" translate="invoicing.details.model" translate-values="{ strongStart: \'&lt;strong&gt;\', strongEnd: \'&lt;/strong&gt;\', model: \'{{::invoice.details.model}}\'}"></p><p ng-if="::invoice.details.memo" translate="invoicing.details.memo" translate-values="{ strongStart: \'&lt;strong&gt;\', strongEnd: \'&lt;/strong&gt;\', memo: \'{{::invoice.details.memo}}\'}"></p><p class="text-red" ng-if="::invoice.message" translate="invoicing.upload.rejectionReason" translate-values="{ strongStart: \'&lt;strong&gt;\', strongEnd: \'&lt;/strong&gt;\', reason: \'{{::invoice.message}}\'}"></p></div><div class="col-xs-2 col-1"></div></div></div></div></div></div></div><div class="text-center" ng-if="$ctrl.sequenceState === \'WARNING\'"><i class="fa fa-2x fa-exclamation-triangle text-gray"></i><h5 translate="invoicing.upload.noData"></h5></div><div ng-if="$ctrl.sequenceState === \'COMPLETION\'"><div align="center"><i class="fa fa-4x fa-check-circle text-success"></i></div><h1 class="text-center text-success" translate="word.complete"></h1><h3 class="text-center text-dark" translate="invoicing.upload.success"></h3></div>'}},function(e,t,n){e.exports=function(e){n(519)(e)}},function(e,t){e.exports=function(e){e.component("tradeUnitAssetCodesModal",{template:'<trade-unit-asset-codes-form config-by-code="$ctrl.configByCode" display-asset="$ctrl.displayAsset"></trade-unit-asset-codes-form>',controller:["ModalService",function(e){var t=this;t.$onInit=function(){t.displayAsset=e.getModalData().displayAsset,t.configByCode=angular.copy(e.getModalData().configByCode),t.save=function(){e.closeModal(t.configByCode)},e.setModalButtons([{alignment:"right",btnType:"primary",fn:t.save,label:"word.save"}])}}]})}},function(e,t,n){e.exports=function(e){n(521)(e)}},function(e,t,n){e.exports=function(e){e.component("feesReviewModal",{template:n(522)(),controller:["ResourceService",function(t){var n=this;n.$onInit=function(){n.isLoading=!0,t.fetch(e.DEFAULT_SERVER_PATH+"/AdvisorInformation/CurrentAdvisorFees").then(function(e){n.feesProfile=e.data.feesProfile}).finally(function(){n.isLoading=!1})}}]})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<loading-overlay ng-if="$ctrl.isLoading"></loading-overlay><div ng-if="!$ctrl.isLoading"><fees-profile-change-approval fees-profile="$ctrl.feesProfile"></fees-profile-change-approval></div>'}},function(e,t,n){e.exports=function(e){n(524)(e)}},function(e,t,n){e.exports=function(e){n(525)(e),n(526)(e)}},function(e,t){e.exports=function(e){function t(t,n){var a=this;a.$onInit=function(){a.clientInvoiceLoad=t.defer(),a.itemSource=e.DEFAULT_SERVER_PATH+"/ClientInvoicingSummary/Data/Invoice",n.setOnPageLoad(function(){a.clientInvoiceLoad.promise.finally(function(){n.setIsPageLoading(!1)})})}}e.controller("InvoiceSummaryCtrl",t),t.$inject=["$q","PageService"]}},function(e,t){e.exports=function(e){function t(t,n){var a=this;a.$onInit=function(){a.clientReimbursementLoad=t.defer(),a.itemSource=e.DEFAULT_SERVER_PATH+"/ClientInvoicingSummary/Data/Reimbursement",n.setOnPageLoad(function(){a.clientReimbursementLoad.promise.finally(function(){n.setIsPageLoading(!1)})})}}e.controller("ReimbursementSummaryCtrl",t),t.$inject=["$q","PageService"]}},function(e,t,n){e.exports=function(e){n(528)(e),n(534)(e),n(536)(e)}},function(e,t,n){e.exports=function(e){n(529)(e),n(531)(e),n(533)(e)}},function(e,t,n){e.exports=function(e){e.component("clientFeeRemediationCompletionStep",{template:n(530)})}},function(e,t){e.exports='<div ca-page-structure>\n    <div align="center">\n\t    <i class="fa fa-4x fa-check-circle text-success"></i>\n\t</div>\n\t<br>\n\t<h1 class="text-center text-success">{{\'word.thankYou\' | translate}}</h1>\n</div>'},function(e,t,n){e.exports=function(e){e.component("clientFeeRemediationStep",{template:n(532),controller:["ACTIVE_CONTEXT","DynamicSequenceService",function(e,t){var n=this;n.$onInit=function(){n.applicableDate=t.getSequenceData().applicableDate||"",n.feesProfile=t.getSequenceData().feesProfile,n.signature=t.getSequenceData().signature,n.activeContext=e,t.configureButtons({canGoBack:!0,continueBtn:{onClick:function(){t.stepForward({signatureSubmissionData:n.signature.signatureSubmissionData})}}})}}]})}},function(e,t){e.exports='<div ng-if="::$ctrl.activeContext === \'STANDALONE\'" ca-page-structure ng-form="$ctrl.clientFeeRemediationForm">\n    <h5 translate="feeRemediation.sign.desc"></h5>\n    <p translate="feeRemediation.sign.charge"></p>\n    <br>\n    <div class="form-review">\n    \t<div class="form-group">\n    \t\t<div class="row">\n    \t\t\t<div class="col-xs-12 col-sm-6 col-md-6 col-lg-4">\n    \t\t\t\t<label class="control-label">{{ \'feeRemediation.lable.date\' | translate }}</label>\n    \t\t\t</div>\n    \t\t\t<div class="col-xs-12 col-sm-6 col-md-6 col-lg-4">\n    \t\t\t\t<label class="control-label">{{$ctrl.applicableDate}}</label>\n    \t\t\t</div>\n    \t\t</div>\n    \t</div>\n    </div>\n    <hr>\n    <fees-profile-change-approval fees-profile="$ctrl.feesProfile"></fees-profile-change-approval>\n    <hr>\n    <h5 translate="feeRemediation.sign.sign"></h5>\n    <br>\n    <signature-block document-signature="$ctrl.signature"></signature-block>\n</div>\n<div ng-if="::$ctrl.activeContext !== \'STANDALONE\'" page-structure ng-form="$ctrl.clientFeeRemediationForm">\n\t<h4>{{ \'clientFeeRemediation.header\' | translate }}</h4>\n   \t<p translate="feeRemediation.sign.desc"></p>\n    <p translate="feeRemediation.sign.charge"></p>\n    <br>\n    <div class="form-review">\n    \t<div class="form-group">\n    \t\t<div class="row">\n    \t\t\t<div class="col-xs-12 col-sm-6 col-md-6 col-lg-4">\n    \t\t\t\t<label class="control-label">{{ \'feeRemediation.lable.date\' | translate }}</label>\n    \t\t\t</div>\n    \t\t\t<div class="col-xs-12 col-sm-6 col-md-6 col-lg-4">\n    \t\t\t\t<label class="control-label">{{$ctrl.applicableDate}}</label>\n    \t\t\t</div>\n    \t\t</div>\n    \t</div>\n    </div>\n    <hr>\n    <fees-profile-change-approval fees-profile="$ctrl.feesProfile"></fees-profile-change-approval>\n    <hr>\n    <h5 translate="feeRemediation.sign.sign"></h5>\n    <br>\n    <signature-block document-signature="$ctrl.signature"></signature-block>\n</div>'},function(e,t){e.exports=function(e){e.component("clientFeeRemediationSequence",{template:'<am-dynamic-sequence sequence-source="/aces/ClientActivation/ClientFeeRemediation/Sequence"></am-dynamic-sequence>'})}},function(e,t,n){e.exports=function(e){n(535)(e);n(2)(e,["single-invoicing-config","multiple-invoicing-config","invoicing-review","invoicing-completion"],function(){return[n.e(16).then(n.t.bind(null,1930,7)),n.e(16).then(n.t.bind(null,1931,7)),n.e(16).then(n.t.bind(null,1932,7)),n.e(16).then(n.t.bind(null,1933,7))]})}},function(e,t){e.exports=function(e){function t(e){var t=this;t.$onInit=function(){t.isLoaded=!1,e.onReady().finally(function(){t.isLoaded=!0})}}e.controller("ClientInvoicingSeqCtrl",t),t.$inject=["ClientInvoicingService"]}},function(e,t,n){e.exports=function(e){n(537)(e),n(539)(e),n(541)(e),n(543)(e)}},function(e,t,n){e.exports=function(e){e.component("feesConfigurationStep",{template:n(538),controller:["$translate","DynamicSequenceService","ModalService","ACTIVE_CONTEXT","ApplicationContext","ClientFeesService",function(e,t,n,a,r,i){var o=this;o.$onInit=function(){o.rules=t.getSequenceData().rules,o.tradeUnitCodes=t.getSequenceData().tradeUnitCodes,o.interestRateCurrencies=t.getSequenceData().interestRateCurrencies,o.feesConfiguration=t.getSequenceData().feesConfiguration,o.mmcAccountVan=t.getSequenceData().mmcAccountVan,o.mmDefaultFees=t.getSequenceData().mmDefaultFees,o.currentTemplate=t.getSequenceData().currentTemplate,o.effectiveFrom=t.getSequenceData().effectiveFrom,o.getFeeTypeDescription=i.getFeeTypeDescription,o.mmDefaultFees?o.feeDesc="MONEY_MANAGER":angular.isDefined(o.mmcAccountVan)&&o.mmcAccountVan.length>0?o.feeDesc="MMC":o.feeDesc="CLIENT",o.useTemplate=angular.isDefined(o.currentTemplate),angular.isDefined(o.rules.chargesRules)&&angular.isUndefined(o.feesConfiguration.charges)&&(o.feesConfiguration.charges={},o.rules.chargesRules.chargeCommissionsAllowed&&(o.feesConfiguration.charges.chargeCommissions=!1),o.rules.chargesRules.chargeOtherFeesAllowed&&(o.feesConfiguration.charges.chargeOtherFees=!1)),o.feesByType={},o.enabledTypes={};for(var s=0;s<o.feesConfiguration.fees.length;++s){var l=o.feesConfiguration.fees[s];o.feesByType[l.type]=l,o.enabledTypes[l.type]=!0}o.enabledTypes.TRADE_UNIT=Object.keys(o.tradeUnitCodes).length>0,o.showFees=function(){var e=o.feesConfiguration.strategyType;return"NO_FEE"!==e&&"DIRECT_BILLING"!==e},o.isEffectiveDateAllowed=function(){return o.rules.effectiveDateAllowed||o.effectiveFrom},o.getCurrencyRules=function(e){return o.rules.feeTypeRules.feeDetailsRules[e].currencyRules},o.getCurrencyMode=function(e){var t=o.getCurrencyRules(e);return"NONE"===t.mode?t.mode:"UNKNOWN"===t.currencyType?t.currencyType+"."+t.mode:t.mode},o.isFeeDisabled=function(e){return"PERCENTAGE_NET_LIQUIDATION"===e?o.rules.nlvFeeDisabled:"TRADE_UNIT"===e&&(angular.isDefined(o.feesConfiguration.charges)&&o.feesConfiguration.charges.chargeCommissions)},o.onChargeCommissionsChange=function(){o.enabledTypes.TRADE_UNIT&&o.feesConfiguration.charges.chargeCommissions&&(o.enabledTypes.TRADE_UNIT=!1)},o.onTemplateChange=function(){angular.isUndefined(o.currentTemplate)||null===o.currentTemplate?delete o.currentTemplateConfiguration:(o.isLoadingTemplate=!0,i.fetchTemplate(o.currentTemplate).then(function(e){o.currentTemplateConfiguration=e.data.template.configuration}).finally(function(){o.isLoadingTemplate=!1}))},o.submitFeesConfiguration=function(){var a={useTemplate:o.useTemplate,effectiveFrom:o.effectiveFrom};if(o.useTemplate)a.currentTemplate=o.currentTemplate;else{a.configuration=o.feesConfiguration;var r=[];if(o.showFees()){for(var i=Object.keys(o.enabledTypes),s=0;s<i.length;++s){var l=i[s];o.enabledTypes[l]&&"TRADE_UNIT"!==l&&r.push(o.feesByType[l])}o.enabledTypes.TRADE_UNIT&&(a.tradeUnitCodes=o.tradeUnitCodes),o.enabledTypes.INTEREST_RATE&&(a.interestRateCurrencies=o.interestRateCurrencies)}o.feesConfiguration.fees=r}t.stepForward(a).catch(function(r){if(r.data&&r.data.customErrors&&r.data.customErrors.length>0){for(var i=!1,o=0;o<r.data.customErrors.length;++o){var s=r.data.customErrors[o];s.startsWith("ACK:")&&(i=!0,r.data.customErrors[o]=s.substring(4))}var l={title:e.instant("word.error"),modalData:{errors:r.data.customErrors}};i?(l.title=e.instant("word.confirm"),l.templateUrl="error-modal.component",l.buttons=[{alignment:"left",label:"word.cancel",btnClass:"btn-default",fn:n.closeModal},{alignment:"right",label:"word.continue",btnClass:"btn-primary",fn:function(){n.closeModal(),a.thresholdFeesAcknowledged=!0,t.stepForward(a)}}],n.openWarningModal(l)):n.openErrorModal(l)}})};var c=[];if(o.isStandalone=a===r.STANDALONE,o.isStandalone){var u=window.cancelFn;o.cancelFeesSequence=window[u]||void 0,c.push({alignment:"left",btnText:e.instant("word.back"),onClick:o.cancelFeesSequence,btnClass:"btn-back"})}var d={onClick:o.submitFeesConfiguration};o.isStandalone&&(d.btnClass="btn-continue",d.btnType="success"),t.configureButtons({canGoBack:t.getSequenceData().stepIndex>0&&a!==r.STANDALONE,continueBtn:d,extraButtons:c})}}]})}},function(e,t){e.exports='<div page-structure ng-form="$ctrl.clientFeesForm">\r\n    <h4 translate="{{\'clientFeesConfiguration.\' + $ctrl.feeDesc + \'.heading\'}}" translate-values="{ masterAccountTitle : $ctrl.feesConfiguration.masterAccountTitle, masterAccountId : $ctrl.feesConfiguration.masterAccountId, mmcAccountVan : $ctrl.mmcAccountVan }"></h4>\r\n    <div>\r\n        <span translate="{{\'clientFeesConfiguration.\' + $ctrl.feeDesc + \'.desc\'}}" translate-values="{ masterAccountTitle : $ctrl.feesConfiguration.masterAccountTitle, masterAccountId : $ctrl.feesConfiguration.masterAccountId, mmcAccountVan : $ctrl.mmcAccountVan }"></span>\r\n        <span ng-if="::$ctrl.feesConfiguration.type === \'ADVISOR\'" translate="clientFeesAdvisorRedirect.label" translate-values="{ \'clickHereLinkStart\' : \'<a href=&quot;https://institutions.interactivebrokers.com/en/index.php?f=14529&quot; target=&quot;_new&quot;>\', \'linkEnd\' : \'</a>\' } "></span>\r\n    </div>\r\n    <br />\r\n    \r\n    <div ng-if="::$ctrl.rules.allowedTemplates.length > 0">\r\n        <loading-overlay ng-if="$ctrl.isLoadingTemplate"></loading-overlay>\r\n        \r\n        <am-form-switch name="useTemplate" ng-model="$ctrl.useTemplate" label-text="{{\'fee.label.template.useTemplate\' | translate}}"></am-form-switch>\r\n        <am-form-select name="currentTemplate" ng-if="$ctrl.useTemplate" ng-model="$ctrl.currentTemplate" options="$ctrl.rules.allowedTemplates" option-key="\'templateName\'" no-translate="true" label-text="{{\'fee.label.template.templateChoice\' | translate}}" is-required="true" model-listener="$ctrl.onTemplateChange()"></am-form-select>\r\n\r\n        <fees-configuration-review ng-if="$ctrl.useTemplate && $ctrl.currentTemplateConfiguration" fees-configuration="$ctrl.currentTemplateConfiguration"></fees-configuration-review>        \r\n    </div>\r\n    \r\n    <div ng-if="!$ctrl.useTemplate">\r\n        <am-form-select ng-model="$ctrl.feesConfiguration.strategyType" options="$ctrl.rules.allowedStrategyTypes" option-key="\'feesStrategyType.\'" label-text="{{\'feesConfiguration.label.strategyType\' | translate}}" hide-empty-option="true" required></am-form-select>\r\n    \r\n        <div ng-if="$ctrl.showFees()">\r\n            <div ng-repeat="feeType in ::$ctrl.rules.feeTypeRules.allowedFeeTypes | sortFeeTypes">\r\n                <h6 class="subtitle">\r\n                    <input type="checkbox" ng-model="$ctrl.enabledTypes[feeType]" i-check ng-disabled="$ctrl.isFeeDisabled(feeType)" />&nbsp;\r\n                    {{\'feeType.\' + feeType | translate}} {{$ctrl.getFeeTypeDescription($ctrl.feesConfiguration, feeType) | translate}}\r\n                </h6>\r\n                \r\n                <div ng-if="$ctrl.enabledTypes[feeType]">\r\n                    <div ng-if="::$ctrl.getCurrencyMode(feeType) !== \'NONE\'" class="alert alert-info">\r\n                        <p translate="{{\'clientFeesConfiguration.currency.\' + $ctrl.getCurrencyMode(feeType)}}" translate-values="{ currencyType : $ctrl.getCurrencyRules(feeType).currencyType }"></p>\r\n                    </div>\r\n                \r\n                    <div ng-switch="::feeType">\r\n                        <div ng-switch-when="FLAT_FEE">\r\n                            <flat-fee-form ng-model="$ctrl.feesByType[feeType]" rules="$ctrl.rules.feeTypeRules.feeDetailsRules[feeType]"></flat-fee-form>\r\n                        </div>\r\n                        <div ng-switch-when="PERCENTAGE_NET_LIQUIDATION">\r\n                            <net-liquidation-fee-form ng-model="$ctrl.feesByType[feeType]" rules="$ctrl.rules.feeTypeRules.feeDetailsRules[feeType]" is-disabled="$ctrl.rules.nlvFeeDisabled"></net-liquidation-fee-form>\r\n                        </div>\r\n                        <div ng-switch-when="PERCENTAGE_PNL">\r\n                            <percentage-pnl-fee-form ng-model="$ctrl.feesByType[feeType]" rules="$ctrl.rules.feeTypeRules.feeDetailsRules[feeType]"></percentage-pnl-fee-form>\r\n                        </div>\r\n                        <div ng-switch-when="INVOICING">\r\n                            <invoicing-fee-form ng-model="$ctrl.feesByType[feeType]" rules="$ctrl.rules.feeTypeRules.feeDetailsRules[feeType]"></invoicing-fee-form>\r\n                        </div>\r\n                        <div ng-switch-when="TRADE_UNIT">\r\n                            <trade-unit-codes-form ng-model="$ctrl.tradeUnitCodes" rules="$ctrl.rules.feeTypeRules.feeDetailsRules[feeType]"></trade-unit-codes-form>\r\n                        </div>\r\n                        <div ng-switch-when="INTEREST_RATE">\r\n                            <interest-rate-fee-currency-form ng-model="$ctrl.interestRateCurrencies" rules="$ctrl.rules.feeTypeRules.feeDetailsRules[feeType]"></interest-rate-fee-currency-form>\r\n                        </div>\r\n                        <div ng-switch-when="HFCIP">\r\n                            <p>{{\'hfcipFeeConfiguration.desc\' | translate}}</p>\r\n                            <br />\r\n                            <hfcip-fee-form ng-model="$ctrl.feesByType[feeType]" rules="$ctrl.rules.feeTypeRules.feeDetailsRules[feeType]"></hfcip-fee-form>\r\n                        </div>\r\n                    </div>\r\n                    \r\n                    <am-form-error name="{{feeType}}" error-prefix="{{\'fee.error.\' + feeType + \'.\'}}"></am-form-error>\r\n                </div>\r\n            </div>\r\n        </div>       \r\n        <div ng-if="::$ctrl.feesConfiguration.type === \'ADVISOR\' && $ctrl.rules.chargesRules">\r\n            <br>\r\n            <h4>{{\'fee.heading.chargeToAdvisor\' | translate}}</h4>\r\n            <p>{{\'fee.desc.chargeToAdvisor\' | translate}}</p>\r\n            <br />\r\n            <am-form-switch name="chargeCommissions" ng-model="$ctrl.feesConfiguration.charges.chargeCommissions" label-text="{{\'fee.label.advisor.chargeCommissions\' | translate}}" model-listener="$ctrl.onChargeCommissionsChange()" required></am-form-switch>\r\n            <am-form-switch name="chargeOtherFees" ng-model="$ctrl.feesConfiguration.charges.chargeOtherFees" label-text="{{\'fee.label.advisor.chargeOther\' | translate}}" required></am-form-switch>\r\n        </div>\r\n    </div>\r\n\r\n    <div ng-if="::$ctrl.feesConfiguration.type === \'ADVISOR\'">\r\n        <div ng-if="$ctrl.isEffectiveDateAllowed()">\r\n            <br />\r\n            <effective-date-form ng-model="$ctrl.effectiveFrom" is-allowed="$ctrl.rules.effectiveDateAllowed"></effective-date-form>\r\n        </div>\r\n        <div ng-if="!$ctrl.useTemplate" class="notes">\r\n            <p translate="feeApproval.notes.advisorFeeAccrual"></p>\r\n            <p translate="feeApproval.notes.expirationPeriod"></p>\r\n        </div>\r\n    </div>\r\n</div>'},function(e,t,n){e.exports=function(e){e.component("interestRateFeeConfigurationStep",{template:n(540),controller:["$translate","ModalService","DynamicSequenceService",function(e,t,n){var a=this;a.$onInit=function(){a.rules=n.getSequenceData().rules;for(var r=n.getSequenceData().feesConfiguration,i=0;i<r.fees.length;++i){var o=r.fees[i];if("INTEREST_RATE"===o.type){a.fee=o;break}}a.submitFee=function(){n.stepForward({fee:a.fee}).catch(function(n){if(n.data&&n.data.customErrors&&n.data.customErrors.length>0){var a={title:e.instant("word.error"),modalData:{errors:n.data.customErrors}};t.openErrorModal(a)}})},n.configureButtons({canGoBack:n.getSequenceData().stepIndex>0,continueBtn:{onClick:a.submitFee}})}}]})}},function(e,t){e.exports='<div page-structure="fullPanel" ng-form="$ctrl.interestRateFeeForm">\r\n    <h4>{{\'feeType.INTEREST_RATE\' | translate}}</h4>\r\n    <p>{{\'interestRateFeeConfiguration.desc\' | translate}}</p>\r\n    <br />\r\n    <interest-rate-fee-form ng-model="$ctrl.fee" rules="$ctrl.rules"></interest-rate-fee-form>\r\n</div>'},function(e,t,n){e.exports=function(e){e.component("tradeUnitFeeConfigurationStep",{template:n(542),controller:["$translate","DynamicSequenceService","ModalService","ACTIVE_CONTEXT","ApplicationContext",function(e,t,n,a,r){var i=this;i.$onInit=function(){i.rules=t.getSequenceData().rules;for(var o=t.getSequenceData().feesConfiguration,s=0;s<o.fees.length;++s){var l=o.fees[s];if("TRADE_UNIT"===l.type){i.fee=l;break}}i.submitFee=function(){t.stepForward({fee:i.fee}).catch(function(t){if(t.data&&t.data.customErrors&&t.data.customErrors.length>0){var a={title:e.instant("word.error"),modalData:{errors:t.data.customErrors}};n.openErrorModal(a)}})};var c={};i.isStandalone=a===r.STANDALONE,c.continueBtn={onClick:i.submitFee},i.isStandalone&&(c.continueBtn.btnClass="btn-continue",c.continueBtn.btnType="success"),t.getSequenceData().stepIndex>0&&(c.backBtn={onClick:t.stepBack},i.isStandalone&&(c.backBtn.btnClass="btn-back")),t.configureButtons(c)}}]})}},function(e,t){e.exports='<div page-structure="fullPanel" ng-form="$ctrl.tradeUnitFeeForm">\r\n    <h4>{{\'feeType.TRADE_UNIT\' | translate}}</h4>\r\n    <p>{{\'tradeUnitFeeConfiguration.desc\' | translate}}</p>\r\n    <br />\r\n    <trade-unit-fee-form ng-model="$ctrl.fee" rules="$ctrl.rules"></trade-unit-fee-form>\r\n</div>'},function(e,t){e.exports=function(e){e.component("semielectronicFeesCompletionStep",{controller:["DynamicSequenceService",function(e){var t=this;t.$onInit=function(){var e=window.completeFn;t.completeFeesSequence=window[e],t.completeFeesSequence()}}]})}},function(e,t,n){e.exports=function(e){n(545)(e),n(546)(e)}},function(e,t){e.exports=function(e){e.factory("ClientFeesService",["$q","$translate","orderByFilter","BreadcrumbAction","NavigationService","ResourceService","ModalService","FileDownloadService","ScreenshotService","AlphaTestService",function(t,n,a,r,i,o,s,l,c,u){var d=0,p={},g=function(e){var t=e.definition;return t.ibPrime||t.product&&t.product.length>0?"PRODUCT":t.exchange&&t.exchange.length>0?"EXCHANGE":t.lite?"LITE":t.issuerName&&t.issuerName.length>0?t.issuerName:t.currencyType&&"UNKNOWN"!==t.currencyType?"CURRENCY":"UNKNOWN"};return p.isFeeTypeCalculatedByIb=function(e){return"PERCENTAGE_NET_LIQUIDATION"===e||"FLAT_FEE"===e||"PERCENTAGE_PNL"===e||"TRADE_UNIT"===e},p.getTradeUnitConfigName=function(e,t){var a,r,i;return angular.isUndefined(t)&&(t=!0),a="ALL"===e.currencyType?n.instant("fee.label.tradeUnit.globalCurrency"):e.displayName,e.lite&&(a+=" "+(r=e.code,(i=n.instant("liteTradeUnitCode."+r))!=="liteTradeUnitCode."+r?i:"")),t&&!e.ibPrime&&(a+=" "+p.getTradeUnitTypeText(e.unitType)),a},p.getTradeUnitTypeText=function(e){var t="(";return t+=n.instant("tradeUnitType."+e),t+=")"},p.getTradeUnitGroupText=function(e){var t=n.instant("tradeUnitGroup."+e);return t!=="tradeUnitGroup."+e?t:e},p.getTradeUnitDisplayObject=function(e,t){angular.isUndefined(t)&&(t="tradeUnitConfigurations");for(var n={},r=0;r<e[t].length;++r){var i=e[t][r],o=i.definition;m=o.ibPrime?"IBPRIME":o.assetType,angular.isUndefined(n[m])&&(n[m]={});var s=n[m],l=g(i);angular.isUndefined(s[l])&&(s[l]={});var c=s[l],u=o.region;angular.isUndefined(c[u])&&(c[u]=[]),c[u].push(i)}var f=Object.keys(n);n.sortedAssetTypes=p.sortAssetTypes(f);for(r=0;r<n.sortedAssetTypes.length;++r){s=n[m=n.sortedAssetTypes[r]];var m,v=Object.keys(s);s.sortedGroupNames=p.sortGroupNames(v);for(var h=0;h<s.sortedGroupNames.length;++h){c=s[s.sortedGroupNames[h]];var b=Object.keys(c);c.sortedRegions=p.sortRegions(b);for(var y=0;y<c.sortedRegions.length;++y){var D=c[u=c.sortedRegions[y]],E=a(D,"definition.displayName");c[u]=E}}}return n.id=d++,n},p.sortAssetTypes=function(e){return a(e)},p.sortGroupNames=function(e){return a(e,function(e){return"CURRENCY"===e?1:"EXCHANGE"===e?2:"PRODUCT"===e?3:"UNKNOWN"!==e?4:5})},p.sortRegions=function(e){return a(e,function(e){return"NONE"===e?1:"UNITED_STATES"===e?2:"NORTH_AMERICA"===e?3:"EUROPE"===e?4:"ASIA_PACIFIC"===e?5:6})},p.fetchTemplate=function(t){return o.create(e.DEFAULT_SERVER_PATH+"/ClientFeesTemplates",t)},p.fetchAllTemplateIdentifiers=function(){return o.fetch(e.DEFAULT_SERVER_PATH+"/ClientFeesTemplates/All")},p.applyTemplate=function(e,t){t=t||r.NONE;var a={id:"ApplyClientFeesTemplate",title:n.instant("page.title.ApplyClientFeesTemplate",{templateName:e.templateName}),path:"template/page/fees/sequence/template/apply/applyFeesTemplateSequence.html",breadcrumb:t,pageData:{sequenceParameters:e},skipFetch:!0};i.navigate(a)},p.editTemplate=function(e){var t,a;0===e.templateId&&"Unknown"===e.wmAccountId?(t=e.masterAccountId,a=e.masterAccountId):(t=e.templateId,a=e.templateName);var r={id:"ConfigureClientFeesTemplate",title:n.instant("page.title.EditClientFeesTemplate",{templateName:a}),path:"template/page/fees/sequence/template/configure/clientFeesTemplateSequence.html",pageData:{sequenceType:"/"+t},skipFetch:!0};i.navigate(r)},p.createDefaultMmTemplateIdentifier=function(e){return{templateId:0,masterAccountId:e,wmAccountId:"Unknown"}},p.openFeesApprovalModal=function(e){var t=!1;u.fetch("REST_CLIENT_FEE_PDF").then(function(e){t=e.data.isEnabled}).finally(function(){if(t)p.downloadClientFeesPdf(e);else{var a={title:n.instant("feeApproval.heading",{clientAccountId:e.feesConfiguration.clientAccountId}),templateUrl:"fees-approval-modal.component",dialogClass:"modal-lg",modalData:{feesProfile:e}};s.openModal(a)}})},p.downloadClientFeesPdf=function(t){var a=t.feesConfiguration.clientAccountId;o.create(e.DEFAULT_SERVER_PATH+"/DownloadFeeRemediationAgreement",{accountId:a}).then(function(e){var t={fileName:a+"_fee.pdf",fileContent:e.data.content,contentType:"application/pdf",fileFormat:"PDF"};l.processDownload(t)},function(e){var t={modalData:{errors:[n.instant("internal.error.request_process")]}};s.openErrorModal(t)})},p.cancelFeesProfile=function(n){for(var a=[],r=0;r<n.requestIds.length;++r){var i=n.requestIds[r];a.push(o.delete(e.DEFAULT_SERVER_PATH+"/RetailRequest/"+i))}return t.all(a)},p.approveFeesProfile=function(t,n){return c.screenshot("PNG").then(function(a){var r={screenshot:a,signatureSubmissionData:n,requestIds:t.requestIds,accountId:t.feesConfiguration.clientAccountId};return o.update(e.DEFAULT_SERVER_PATH+"/ClientFeesApproval",r)})},p.getFeeTypeDescription=function(e,t){return"PERCENTAGE_NET_LIQUIDATION"===t&&"BROKER"===e.type&&e.clientAccountId&&e.clientAccountId.startsWith("F")?"percentNetLiquidation.aggregate":""},p}])}},function(e,t){e.exports=function(e){e.factory("ClientInvoicingService",["$translate","currencyFilter","FileUploadService","ModalService","NavigationService","ResourceService",function(t,n,a,r,i,o){var s={},l={},c=void 0,u=function(e){if("INVOICE"===e)return"ClientInvoice";if("REIMBURSEMENT"===e)return"ClientFeeReimbursement";throw new Error("Invalid invoicing type")},d=function(t){if("INVOICE"===t)return e.WEBAPP_ROOT+"/sequences/invoicing/clientInvoiceSequence.html";if("REIMBURSEMENT"===t)return e.WEBAPP_ROOT+"/sequences/invoicing/clientReimbursementSequence.html";throw new Error("Invalid invoicing type")};return s.onReady=function(){return angular.isDefined(c)?c:c=o.fetch(e.DEFAULT_SERVER_PATH+"/ClientInvoicingSummary/DisplayMap").then(function(e){l=e.data.accountDisplayMap||{}})},s.uploadInvoice=function(e){var n={title:t.instant("modal.title.Upload"+u(e)),templateUrl:"invoicing-upload-modal.component",modalData:{invoicingType:e}};return r.openModal(n)},s.createInvoice=function(e){var n={id:u(e),title:t.instant("page.title.ClientInvoicing"),path:d(e),pageData:{sequenceType:"/Configure"},skipFetch:!1};i.navigate(n)},s.viewInvoice=function(e){var n=t.instant("word.pending"),a=t.instant("word.processed"),i={title:t.instant("modal.title.Review"+u(e.type),{status:e.pending?n:a}),templateUrl:"invoicing-review-modal.component",modalData:{invoice:e}};r.openModal(i)},s.editInvoice=function(e,n){var a={id:u(n),title:t.instant("page.title.ClientInvoicing"),path:d(n),pageData:{sequenceType:"/Configure",sequenceParameters:{invoiceId:e}},skipFetch:!0};i.navigate(a)},s.cancelInvoice=function(n,a){var i={title:t.instant("modal.title.Cancel"+u(a)),modalData:{pendingText:t.instant("invoicing.cancel.pending."+a),confirmFn:function(){return o.delete(e.DEFAULT_SERVER_PATH+"/ClientInvoicingSummary/"+n).catch(function(e){return $q.reject(e.data.submissionErrors)})}}};return r.openConfirmModal(i)},s.getInvoicingFeeLimitMessage=function(e,a){var r="";a=a||1;return angular.isUndefined(e)?r="-":0!==e.limit?r+=n(e.limit*a,e.currencyType+" "):0!==e.nlvCap&&(r+=t.instant("invoice.label.limitMessage",{nlvCap:e.nlvCap*a,frequency:t.instant("feeFrequency."+e.frequency)})),r},s.getAccountDisplayValue=function(e){return angular.isDefined(l)&&angular.isDefined(l[e])?l[e]:e},s.getAccountInvoicingRule=function(e,t,n){for(var a in e){var r=e[a];if(r.clientAccountId===t&&r.masterAccountId===n)return r}return null},s}])}},function(e,t,n){"use strict";var a=angular.module("ibmarketing.dataservices",[]);a.MARKETDATA_APP_ROOT="/dataservices.webapp",a.SERVER_PATH="/aces/DataServices",n(548)(a),n(615)(a),n(630)(a),n(633)(a),n(659)(a),a.config(["$translateProvider","$translatePartialLoaderProvider","$windowProvider",function(e,t,n){e.useLoader("$translatePartialLoader",{urlTemplate:"{part}_{lang}.json"});var r=n.$get();e.preferredLanguage(r.AM_LOGIN_LANGUAGE||"en"),e.fallbackLanguage("en"),t.addPart(a.MARKETDATA_APP_ROOT+"/i18n/ibcust_MDNames_v1")}])},function(e,t,n){e.exports=function(e){n(549)(e),n(551)(e),n(559)(e),n(570)(e),n(573)(e),n(601)(e),n(612)(e)}},function(e,t,n){e.exports=function(e){n(550)(e)}},function(e,t){e.exports=function(e){e.component("marketDataAuthenticator",{template:"<div></div>",controller:["SESSION_ID","BreadcrumbAction","PageService","NavigationService","ResourceService","UserService",function(t,n,a,r,i,o){var s=null;this.$onInit=function(){a.setOnPageLoad(function(){(s=i.create(e.SERVER_PATH+"/DataServiceAuth",{username:o.getUser().username,sessionId:t},!0)).promise.then(function(){a.getCurrentPage().id;var t,i=a.getCurrentPage().pageData||{};t=angular.isDefined(i.serviceID)?{id:"ConfigureMarketData",serverPath:e.SERVER_PATH+"/MarketData",path:e.MARKETDATA_APP_ROOT+"/pages/marketdata/marketDataSequence.html",breadcrumb:n.REPLACE,pageData:{sequenceParameters:{serviceIds:angular.isArray(i.serviceID)?i.serviceID:[i.serviceID]}}}:{id:"MarketData",serverPath:e.SERVER_PATH+"/MarketData",path:e.MARKETDATA_APP_ROOT+"/pages/marketdata/marketDataSummary.html",breadcrumb:n.REPLACE},r.navigate(t)},function(){s.aborted||a.setIsPageLoading(!1)}).finally(function(){s=null})})},this.$onDestroy=function(){null!==s&&s.cancel()}}]})}},function(e,t,n){e.exports=function(e){e.component("pendingDataServices",{bindings:{services:"<"},template:n(552),controller:["DataServicesService",function(e){var t=this;t.$onInit=function(){t.getPriceText=e.getPriceText,t.downloadAgreement=function(t){e.downloadServiceAgreement(t)}}}]}),e.component("removedDataServices",{bindings:{services:"<",quoteBoosterQuantity:"<?"},template:n(553),controller:["DataServicesService",function(e){var t=this;t.$onInit=function(){t.getPriceText=e.getPriceText}}]}),e.component("requestedDataServices",{bindings:{services:"<",quoteBoosterQuantity:"<?"},template:n(554),controller:["DataServicesService",function(e){var t=this;t.$onInit=function(){t.getPriceText=e.getPriceText}}]}),e.component("rejectedDataServices",{bindings:{services:"<"},template:n(555),controller:["DataServicesService",function(e){var t=this;t.$onInit=function(){t.getPriceText=e.getPriceText}}]}),e.component("subscribedDataServices",{bindings:{subscribedServicesByRegion:"<",rules:"<",totalPrice:"<",ibEntity:"<?"},template:n(556),controller:[function(){var e=this;e.$onInit=function(){e.ibEntity=e.ibEntity||""}}]}),e.component("replacedDataServices",{bindings:{replacedServicesBean:"<"},template:n(557),controller:["DataServicesService",function(e){var t=this;t.$onInit=function(){t.getPriceText=e.getPriceText}}]}),e.component("marketDataCurrentSubscription",{bindings:{subscriptions:"<",totalPrice:"<"},template:n(558),controller:["$translate","DataServicesService",function(e,t){var n=this;n.$onInit=function(){n.getPriceText=t.getPriceText,n.containOtherCurrencies=function(){return n.multipleCurrency=!1,n.currencies=[],angular.forEach(n.subscriptions,function(e,t){e.forEach(function(e){e.price>0&&-1===n.currencies.indexOf(e.currency)&&n.currencies.push(e.currency)})}),n.currencies.length>1&&(n.multipleCurrency=!0),n.multipleCurrency},n.getWaiverText=function(t){var n="";if(void 0!=t.waiveRule&&0!=t.waiveRule.waived_commissions){var a=t.waiveRule.waivedCommissions+" "+t.currency;n="( "+e.instant("service.label.waived",{value:a})+" )"}return n},n.getAnnotationText=t.getAnnotationText,n.showAnnotationByDefault=t.showAnnotationByDefault,n.getServiceNameText=t.getServiceNameText}}]})}},function(e,t){e.exports='<h6 class="subtitle">{{ \'service.label.pendingSubscriptions\' | translate }}</h6>\r\n<div class="form-bordered">\r\n\t<div class="row" name="{{ service.id }}" ng-repeat="service in $ctrl.services">\r\n\t\t<div class="col-xs-12 col-sm-7 col-md-7 col-lg-7">\r\n\t\t\t<p>\r\n\t\t\t\t<strong>{{ service.name }}</strong>\r\n\t\t\t\t<span class="text-gray" ng-if="service.region !== \'UNKNOWN\'">{{ \' - \' + (\'service.region.\' + service.region | translate) }}</span>\r\n\t\t\t</p>\r\n\t\t</div>\r\n\t\t<div class="col-xs-12 col-sm-5 col-md-5 col-lg-5" ng-if="service.documentationRequired">\r\n\t\t\t<p class="panel-group-right">\r\n\t\t\t\t<span>{{ \'service.label.documentation\' | translate }}</span>\r\n\t\t\t\t<span class="margin-left-10 margin-right-10">{{ \'|\' }}</span>\r\n\t\t\t\t<span>\r\n\t\t\t\t\t<am-button btn-type="icon" on-click="$ctrl.downloadAgreement()" btn-icon="fa-download" tooltip-text="{{\'word.download\' | translate}}" tooltip-side="left"></am-button>\r\n\t\t\t\t</span>\r\n\t\t\t</p>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n<br>'},function(e,t){e.exports='<h6 class="subtitle">\r\n    <span class="text-dark-red">{{ \'service.label.removed\' | translate }}</span>\r\n</h6>\r\n<div class="form-bordered">\r\n    <div class="row" name="{{ service.id }}" ng-repeat="service in $ctrl.services">\r\n        <div class="col-xs-8 col-sm-8 col-md-8 col-lg-8">\r\n            <p class="text-disabled">\r\n                {{ service.name }}\r\n                <span class="text-gray" ng-if="service.region !== \'UNKNOWN\'">{{ \' - \' + (\'service.region.\' + service.region | translate) }}</span>\r\n            </p>\r\n        </div>\r\n        \x3c!-- \r\n            Service Price\r\n         --\x3e\r\n        <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">\r\n            <p ng-if="!service.freeTrial || service.price === 0" class="text-right text-disabled">{{ $ctrl.getPriceText(service, $ctrl.quoteBoosterQuantity) }}</p>\r\n            <p ng-if="service.freeTrial && service.price > 0" class="text-right text-bold" translate="service.label.freeTrialPrice" translate-compile translate-values="{price: $ctrl.getPriceText(service, $ctrl.quoteBoosterQuantity), strikeStart: \'<s>\', strikeEnd: \'</s>\', italicStart: \'<i class=&quot;text-danger&quot;>\', italicEnd: \'</i>\'}"></p>\r\n        </div>\r\n    </div>\r\n</div>\r\n<br>'},function(e,t){e.exports='<h6 class="subtitle">\r\n    <span class="text-success">{{ \'service.label.requested\' | translate }}</span>\r\n</h6>\r\n<div class="form-bordered">\r\n    <div class="row" name="{{ service.id }}" ng-repeat="service in $ctrl.services">\r\n        <div class="col-xs-8 col-sm-8 col-md-8 col-lg-8">\r\n            <p>\r\n                \x3c!-- \r\n                    Service Name                \r\n                 --\x3e\r\n                <strong>{{ service.name }}</strong>\r\n                \x3c!-- \r\n                    Service Region\r\n                --\x3e\r\n                <span class="text-gray" ng-if="service.region !== \'UNKNOWN\'">{{ \' - \' + (\'service.region.\' + service.region | translate) }}</span>\r\n                \x3c!-- \r\n                     TODO: Pro-rated Fee\r\n                 --\x3e\r\n                <span ng-if="$ctrl.ibis" translate=\'service.label.proRateFee\' translate-values="{ cost: (service.proRatedCost | currency:\'\' ), startTag: \'<strong>\', endTag: \'</strong>\'}"></span>\r\n            </p>\r\n        </div>\r\n        \x3c!-- \r\n            Service Price\r\n         --\x3e\r\n        <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">\r\n            <p ng-if="!service.freeTrial || service.price === 0" class="text-right text-success">{{ $ctrl.getPriceText(service, $ctrl.quoteBoosterQuantity) }}</p>\r\n            <p ng-if="service.freeTrial && service.price > 0" class="text-right text-bold" translate="service.label.freeTrialPrice" translate-compile translate-values="{price: $ctrl.getPriceText(service, $ctrl.quoteBoosterQuantity), strikeStart: \'<s>\', strikeEnd: \'</s>\', italicStart: \'<i class=&quot;text-danger&quot;>\', italicEnd: \'</i>\'}"></p>\r\n        </div>\r\n    </div>\r\n</div>\r\n<br>'},function(e,t){e.exports='<div ng-repeat="(reason, rejectedServices) in $ctrl.services">\r\n\t<h6 class="subtitle">{{ \'service.rejection.\' + reason | translate }}</h6>\r\n\t<div class="form-bordered">\r\n\t\t<div class="row" name="{{ service.id }}" ng-repeat="service in rejectedServices">\r\n\t\t\t<div class="col-xs-8 col-sm-8 col-md-8 col-lg-8">\r\n\t\t\t\t<p>\r\n\t\t\t\t\t\x3c!-- \r\n\t\t\t\t\t\tService Name\t\t\t\t\r\n\t\t\t\t\t --\x3e\r\n\t\t\t\t\t<strong>{{ service.name }}</strong>\r\n\t\t\t\t\t\x3c!-- \r\n\t\t\t\t\t\tService Region\r\n\t\t\t\t\t--\x3e\r\n\t\t\t\t\t<span class="text-gray" ng-if="service.region !== \'UNKNOWN\'">{{ \' - \' + (\'service.region.\' + service.region | translate) }}</span>\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\t\t\t\x3c!-- \r\n\t\t\t\tService Price\r\n\t\t\t --\x3e\r\n\t\t\t<div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">\r\n\t\t\t\t<p class="text-right text-disabled">{{ $ctrl.getPriceText(service, 0) }}</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n<br>'},function(e,t){e.exports='<h6 class="subtitle">{{\'service.label.subscribed\' | translate }}</h6>\r\n<market-data-current-subscription subscriptions="$ctrl.subscribedServicesByRegion" total-price="$ctrl.totalPrice"></market-data-current-subscription>\r\n<br>\r\n<div class="margin-bottom-10">\r\n   <market-data-gfis-link></market-data-gfis-link>\r\n</div>\r\n<market-data-gfis-information ib-entity="$ctrl.ibEntity"></market-data-gfis-information>\r\n<br>'},function(e,t){e.exports='<h6 class="subtitle">\n    <span class="text-success">{{ \'service.label.substituted\' | translate }}</span>\n</h6>\n<div class="form-bordered">\n    <div class="row" name="{{ service.id }}" ng-repeat="service in $ctrl.replacedServicesBean.substitutedServices">\n        <div class="col-xs-8 col-sm-8 col-md-8 col-lg-8">\n            <p>\n                \x3c!-- \n                    Service Name                \n                 --\x3e\n                <strong>{{ service.name }}</strong>\n                \x3c!-- \n                    Service Region\n                --\x3e\n                <span class="text-gray" ng-if="service.region !== \'UNKNOWN\'">{{ \' - \' + (\'service.region.\' + service.region | translate) }}</span>\n                \x3c!-- \n                     TODO: Pro-rated Fee\n                 --\x3e\n                <span ng-if="$ctrl.ibis" translate=\'service.label.proRateFee\' translate-values="{ cost: (service.proRatedCost | currency:\'\' ), startTag: \'<strong>\', endTag: \'</strong>\'}"></span>\n            </p>\n        </div>\n        \x3c!-- \n            Service Price\n         --\x3e\n        <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">\n            <p ng-if="!service.freeTrial || service.price === 0" class="text-right text-success">{{ $ctrl.getPriceText(service) }}</p>\n            <p ng-if="service.freeTrial && service.price > 0" class="text-right text-bold" translate="service.label.freeTrialPrice" translate-compile translate-values="{price: $ctrl.getPriceText(service), strikeStart: \'<s>\', strikeEnd: \'</s>\', italicStart: \'<i class=&quot;text-danger&quot;>\', italicEnd: \'</i>\'}"></p>\n        </div>\n    </div>\n</div>\n<div class="row bg-gray" ng-if="$ctrl.replacedServicesBean.substitutedServicesTotal">\n    <div class="col-xs-8 col-sm-8 col-md-8 col-lg-8">\n        <h6 class="margin-5"><strong>{{\'service.label.substitutedTotal\' | translate }}</strong></h6>\n    </div>\n    <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">\n        <h6 class="text-right margin-5"><strong>{{ $ctrl.replacedServicesBean.currency + \' \' + $ctrl.replacedServicesBean.substitutedServicesTotal }}</strong></h6>\n    </div>\n</div>\n<br>\n<h6 class="subtitle">\n    <span class="text-success">{{ \'service.label.replaced\' | translate }}</span>\n</h6>\n<div class="form-bordered">\n    <div class="row" name="{{ service.id }}" ng-repeat="service in $ctrl.replacedServicesBean.replacedServices">\n        <div class="col-xs-8 col-sm-8 col-md-8 col-lg-8">\n            <p>\n                \x3c!-- \n                    Service Name                \n                 --\x3e\n                <strong>{{ service.name }}</strong>\n                \x3c!-- \n                    Service Region\n                --\x3e\n                <span class="text-gray" ng-if="service.region !== \'UNKNOWN\'">{{ \' - \' + (\'service.region.\' + service.region | translate) }}</span>\n                \x3c!-- \n                     TODO: Pro-rated Fee\n                 --\x3e\n                <span ng-if="$ctrl.ibis" translate=\'service.label.proRateFee\' translate-values="{ cost: (service.proRatedCost | currency:\'\' ), startTag: \'<strong>\', endTag: \'</strong>\'}"></span>\n            </p>\n        </div>\n        \x3c!-- \n            Service Price\n         --\x3e\n        <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">\n            <p ng-if="!service.freeTrial || service.price === 0" class="text-right text-success">{{ $ctrl.getPriceText(service) }}</p>\n            <p ng-if="service.freeTrial && service.price > 0" class="text-right text-bold" translate="service.label.freeTrialPrice" translate-compile translate-values="{price: $ctrl.getPriceText(service), strikeStart: \'<s>\', strikeEnd: \'</s>\', italicStart: \'<i class=&quot;text-danger&quot;>\', italicEnd: \'</i>\'}"></p>\n        </div>\n    </div>\n</div>\n<div class="row bg-gray" ng-if="$ctrl.replacedServicesBean.replacedServicesTotal">\n    <div class="col-xs-8 col-sm-8 col-md-8 col-lg-8">\n        <h6 class="margin-5"><strong>{{\'service.label.replacedTotal\' | translate }}</strong></h6>\n    </div>\n    <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">\n        <h6 class="text-right margin-5"><strong>{{ $ctrl.replacedServicesBean.currency + \' \' + $ctrl.replacedServicesBean.replacedServicesTotal }}</strong></h6>\n    </div>\n</div>\n<br>'},function(e,t){e.exports='<div ng-repeat="(region, services) in $ctrl.subscriptions">\n    <div class="form-bordered">\n        <p>\n            <strong>{{ (\'service.region.\' + region) | translate }}</strong>\n        </p>\n        <div class="row" ng-repeat="service in services">\n            <div class="col-xs-12 col-sm-8 col-md-8 col-lg-8">\n                <p>\n                    {{ $ctrl.getServiceNameText(service.id, service.name) }}\n                    <span class="text-gray">{{ \' - \' + (\'service.type.\' + service.type | translate) }}</span>\n                    <span class="text-small text-danger" ng-if="service.waiveRule" >{{ ::$ctrl.getWaiverText(service) }}</span>\n                </p>\n            </div>\n            <div class="col-xs-12 col-sm-4 col-md-4 col-lg-4">\n                <p class="panel-group-right">\n                    <span ng-if="!service.freeTrial || service.price === 0" class="text-bold">{{ $ctrl.getPriceText(service, service.quantity) }}</span>\n                    <span ng-if="service.freeTrial && service.price > 0" class="text-bold" translate="service.label.freeTrialPrice" translate-compile translate-values="{price: $ctrl.getPriceText(service, service.quantity), strikeStart: \'<s>\', strikeEnd: \'</s>\', italicStart: \'<i class=&quot;text-danger&quot;>\', italicEnd: \'</i>\'}"></span>\n                    <a ng-if="service.annotation" href="" class="btn-icon collapsed" data-target="{{ \'#collapse_\' + service.id }}" data-toggle="collapse" aria-expandend="false" aria-controls="{{ \'collapse_\' + service.id }}">\n                        <i class="fa fa-info-circle tooltips" data-toggle="tooltip" data-placement="right" am-tooltip data-original-title="{{ \'word.moreInfo\' | translate }}"></i>\n                    </a>\n                </p>\n                \n            </div>\n            <div class="collapse col-xs-12 col-sm-12 col-md-12 col-lg-12" ng-class="{\'show\': $ctrl.showAnnotationByDefault(service.id)}" ng-if="service.annotation" id="{{ \'collapse_\' + service.id }}">\n                <p class="text-gray">{{ $ctrl.getAnnotationText(service.id, service.annotation) }}</p>\n            </div>                            \n        </div>\n    </div>\n    <br>\n</div>\n<div class="row bg-gray" ng-if="$ctrl.totalPrice">\n    <div class="col-xs-8 col-sm-8 col-md-8 col-lg-8">\n        <h6 class="margin-5"><strong>{{\'word.total\' | translate }}</strong></h6>\n    </div>\n    <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">\n        <h6 class="text-right margin-5"><strong>{{ $ctrl.totalPrice.currency + \' \' + $ctrl.totalPrice.amount }}</strong></h6>\n    </div>\n</div>\n<div class="row" ng-if="$ctrl.containOtherCurrencies()">\n    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n        <p class="text-right margin-5">{{\'service.note.exchangeRate\' | translate }}</p>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){n(560)(e),n(562)(e),n(564)(e),n(566)(e),n(567)(e),n(569)(e)}},function(e,t,n){e.exports=function(e){e.component("marketDataCategoryServices",{require:{marketDataTypeServicesCtrl:"^marketDataTypeServices"},bindings:{services:"<",rules:"<",region:"<",serviceType:"<"},template:n(561),controller:function(){var e=this,t={QUOTE_BUNDLE:1,INDEX:2,LEVEL_1:3,LEVEL_2:4,FIXED_INCOME:5,FLOOR:6,MUTUAL_FUNDS:7,OTHER:8};e.$onInit=function(){e.servicesByCategory=function(e,n){var a={},r=e.reduce(function(e,t){var a=t[n];return e[a]=e[a]||[],e[a].push(t),e},{}),i=Object.keys(r);i.sort(function(e,n){return t[e]-t[n]});for(var o=0;o<i.length;o++)a[i[o]]=r[i[o]];return a}(e.services,"category"),e.onServiceChange=e.marketDataTypeServicesCtrl.onServiceChange,e.getServiceRule=function(t){return e.rules[t]}}}}),e.directive("marketDataCategoryCollapsible",function(){return{restrict:"A",link:function(e,t,n){e.$watch(n.marketDataCategoryCollapsible,function(e){e&&t.collapse("show")})}}})}},function(e,t){e.exports='<div class="accordion" id="{{ \'marketDataCategoryServicesAccordion_\' + $ctrl.serviceType + \'_\' + $ctrl.region }}">\r\n    <div class="accordion-item" ng-repeat="(category, services) in $ctrl.servicesByCategory">\r\n    \t<h2 class="accordion-header" id="{{ \'heading\' + \'_\' + $ctrl.serviceType + \'_\' + $ctrl.region + \'_\' + category }}">\r\n    \t\t<button class="accordion-button collapsed" type="button" data-toggle="collapse" data-target="{{\'#\' + $ctrl.serviceType + \'_\' + $ctrl.region + \'_\' + category}}" aria-controls="{{ $ctrl.serviceType + \'_\' + $ctrl.region + \'_\' + category }}" aria-expanded="{{services.length === 1}}">\r\n    \t\t\t{{\'service.category.\' + category | translate}}\r\n    \t\t</button>\r\n    \t\t<span class="accordion-total">\r\n    \t\t\t<span class="text-gray">{{ ( \'service.label.subscriptions\' | translate) + \': \' + (services | filter: {requested: true}).length }}</span>\r\n    \t\t</span>\r\n    \t</h2>\r\n        <div id="{{ $ctrl.serviceType + \'_\' + $ctrl.region + \'_\' + category}}" class="accordion-collapse collapse" aria-labelledby="{{ \'heading\' + \'_\' + $ctrl.serviceType + \'_\' + $ctrl.region + \'_\' + category }}" aria-expanded="false" market-data-category-collapsible="services.length === 1">\r\n            <div class="accordion-body">\r\n                \x3c!-- \r\n                    AM Market Data Service\r\n                --\x3e\r\n                <am-form-market-data-service name="{{ service.id }}"  ng-if="::$ctrl.getServiceRule(service.id)" ng-repeat="service in services" ng-model="service"  rules="$ctrl.getServiceRule(service.id)" on-service-change="$ctrl.onServiceChange($event)"></am-form-market-data-service>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'},function(e,t,n){e.exports=function(e){e.component("amFormMarketDataService",{bindings:{service:"=ngModel",rules:"<",category:"<?",onServiceChange:"&?"},template:n(563),controller:["DataServicesService",function(e){var t=this;t.$onInit=function(){t.onChange=function(){!angular.isUndefined(t.onServiceChange)&&angular.isFunction(t.onServiceChange)&&t.onServiceChange({$event:{service:t.service,allowedDependentServices:t.rules.allowedDependentServices}})},t.getAnnotationText=e.getAnnotationText,t.getServiceNameText=e.getServiceNameText},t.$onDestroy=function(){t.onServiceChange=void 0}}]})}},function(e,t){e.exports='<div class="group-selector" ng-class="{\'active\' : $ctrl.service.requested }">\r\n    <div class="row">\r\n        <div class="col-xs-10 col-sm-10 col-md-10 col-lg-10">\r\n            \x3c!-- \r\n                Name\r\n            --\x3e\r\n            <h6>\r\n                {{ $ctrl.getServiceNameText($ctrl.service.id, $ctrl.service.name) }}\r\n                \x3c!-- \r\n                    Display Category\r\n                --\x3e\r\n                <span class="text-gray" ng-if="$ctrl.rules.displayCategory">{{ \' - \' + (\'service.category.\' + $ctrl.service.category | translate) }}</span>\r\n                <span class="hidden-md hidden-lg">\r\n                    <br>\r\n                </span>\r\n                \x3c!-- \r\n                    Badges\r\n                --\x3e\r\n                <span ng-if="$ctrl.service.documentationRequired" class="badge margin-right-5" ng-class="{\'bg-danger\' : $ctrl.service.requested, \'bg-gray\' : !$ctrl.service.requested}">{{ \'service.label.documentation\' | translate }}</span>\r\n                <span ng-if="$ctrl.service.pending" class="badge bg-dark-red margin-right-5">{{ \'service.label.pending\' | translate }}</span>\r\n                <span ng-if="$ctrl.service.dependentServiceTypes.length > 0" class="badge bg-info margin-right-5" ng-repeat="type in $ctrl.service.dependentServiceTypes" translate="service.label.dependentServiceType" translate-values="{ type: type }"></span>\t\t\t\t\r\n            </h6>\r\n        </div>\r\n        <div class="col-xs-2 col-sm-2 col-md-2 col-lg-2">\r\n            <p>\r\n                <span class="btn-group-right">\r\n                    <input type="checkbox" ng-model="$ctrl.service.requested" ng-disabled="$ctrl.service.disabled" i-check ng-change="$ctrl.onChange()"/>\r\n                </span>\r\n            </p>\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="col-xs-10 col-sm-10 col-md-10 col-lg-10">\r\n            \x3c!-- \r\n                Annotation Text\r\n            --\x3e\r\n            <p class="text-gray" ng-if="$ctrl.rules.annotation">{{ $ctrl.getAnnotationText($ctrl.service.id, $ctrl.rules.annotation) }}</p>\r\n            <br>\r\n            \x3c!-- \r\n                Price\r\n            --\x3e\r\n            <p ng-if="$ctrl.service.price > 0">\r\n                <strong>{{ ($ctrl.service.price | currency:($ctrl.service.currency + \' \')) }}</strong>\r\n                <span class="text-small">{{ \' /\' + (\'service.label.month\' | translate) }}</span>\r\n            </p>\r\n            <p ng-if="$ctrl.service.price === 0">\r\n                <strong>{{ \'service.label.free\' | translate }}</strong>\r\n            </p>\r\n            \x3c!-- \r\n                Waiver\r\n            --\x3e\r\n            <p class="text-small text-danger" ng-if="$ctrl.service.waiveRule" translate="service.label.waiver" translate-values="{waivedFee: ($ctrl.service.price | currency: ($ctrl.service.currency + \' \')), commission: ($ctrl.service.waiveRule.waivedCommissions | currency: (\'USD\' + \' \'))}"></p>\r\n        </div>\r\n        <div class="col-xs-2 col-sm-2 col-md-2 col-lg-2">\r\n            \r\n        </div>\r\n    </div>\r\n</div>\r\n<br>'},function(e,t,n){e.exports=function(e){e.component("marketDataTypeServices",{bindings:{traderWorkStationSevices:"<",alternateDisplayServices:"<",nonDisplayServices:"<",rules:"<"},template:n(565),controller:["ResourceService","ModalService","$translate",function(t,n,a){var r=this;r.$onInit=function(){r.traderWorkStationSevices=r.traderWorkStationSevices,r.alternateDisplayServices=r.alternateDisplayServices,r.nonDisplayServices=r.nonDisplayServices,r.fetchingAlternativeDisplayProgram=!1,r.getServiceRule=function(e){return r.rules.dataServicesRules[e]},r.getServiceTypeSrc=function(t){return"TWS"===t?e.MARKETDATA_APP_ROOT+"/components/marketdata/twsServices.html":"ADS"===t?e.MARKETDATA_APP_ROOT+"/components/marketdata/alternativeDisplayServices.html":"NDS"===t?e.MARKETDATA_APP_ROOT+"/components/marketdata/nonDisplayServices.html":""},r.onTabSelected=function(i){var o=i.serviceType;if(!angular.isUndefined(o)&&"TWS"!==o)return"ADS"!==o||r.rules.alternativeDisplayProgram?"NDS"!==o||r.rules.ndsAgreementCompleted?void 0:(r.fetchingAgreement=!0,void t.fetch(e.SERVER_PATH+"/NonDisplayAgreement").then(function(e){var t={title:a.instant("nonDisplayAgreement.header"),templateUrl:"non-display-agreement-modal.component",modalData:{signature:e.data.signature,agreement:e.data.agreement}};n.openModal(t).then(function(e){r.rules.ndsAgreementCompleted="SUCCESS"===e})},function(e){}).finally(function(){r.fetchingAgreement=!1})):(r.fetchingAgreement=!0,void t.fetch(e.SERVER_PATH+"/AlternativeDisplayProgram").then(function(e){var t={title:a.instant("alternativeDisplayProgram.header"),templateUrl:"alternative-display-program-modal.component",modalData:{program:e.data.program,allowedPrograms:e.data.allowedPrograms||[],signature:e.data.signature}};n.openModal(t).then(function(e){r.rules.alternativeDisplayProgram="SUCCESS"===e})},function(e){}).finally(function(){r.fetchingAgreement=!1}))},r.onServiceChange=function(e){var t=e.service,n=e.allowedDependentServices;if("NDS"!=t.type){if("ADS"===t.type)for(var a in r.traderWorkStationSevices)if(a===t.region)for(var i=0;i<r.traderWorkStationSevices[a].length;i++){var o=r.traderWorkStationSevices[a][i];n.indexOf(o.id)<0||(t.requested?(o.requested=!0,o.disabled=!0,o.dependentServiceTypes.push(t.type),t.dependentServiceTypes.splice(t.dependentServiceTypes.indexOf(o.type),1)):(o.requested=o.subscribed,o.disabled=!1,o.dependentServiceTypes.splice(o.dependentServiceTypes.indexOf(t.type),1),o.requested&&t.dependentServiceTypes.push(o.type)))}if("TWS"===t.type)for(var a in r.alternateDisplayServices)if(a===t.region)for(i=0;i<r.alternateDisplayServices[a].length;i++){o=r.alternateDisplayServices[a][i];n.indexOf(o.id)<0||(t.requested?o.dependentServiceTypes.push(t.type):o.dependentServiceTypes.splice(o.dependentServiceTypes.indexOf(t.type),1))}}}}}]})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.fetchingAgreement"></loading-overlay>\r\n\r\n<market-data-tabs class="nav-lines-large" on-tab-selected="$ctrl.onTabSelected($event)">\r\n\t<market-data-pane ng-repeat="serviceType in $ctrl.rules.allowedServiceTypes" label="{{ \'service.type.\' + serviceType | translate }}" type="serviceType">\r\n\t\t\x3c!--  \r\n\t\t\tTemplates\r\n\t\t--\x3e\r\n\t\t<ng-include src="::$ctrl.getServiceTypeSrc(serviceType)"></ng-include>\r\n\r\n        <market-data-gfis-link></market-data-gfis-link>\r\n\t</market-data-pane>\r\n</market-data-tabs>'},function(e,t){e.exports=function(e){e.component("marketDataTabs",{bindings:{onTabSelected:"&?"},transclude:!0,template:["$element","$attrs",function(e,t){return'<ul class="nav nav-tabs '+t.class+'">    <li class="nav-item" ng-repeat="pane in $ctrl.panes">        <a href="" class="nav-link" ng-class="{\'active\': pane.selected}" ng-click="$ctrl.selectPane(pane)">{{ pane.label }}</a>    </li></ul><div class="tab-content" ng-transclude></div>'}],controller:function(){var e=this.panes=[];this.$onInit=function(){this.addPane=function(t){0===e.length&&this.selectPane(t),e.push(t)},this.selectPane=function(t){angular.forEach(e,function(e){e.selected=!1}),t.selected=!0,!angular.isUndefined(this.onTabSelected)&&angular.isFunction(this.onTabSelected)&&this.onTabSelected({$event:{serviceType:t.type}})}}}}),e.component("marketDataPane",{transclude:!0,require:{marketDataTabsCtrl:"^marketDataTabs"},bindings:{label:"@",type:"<"},template:['<div class="tab-pane" id="{{$ctrl.label}}" ng-show="$ctrl.selected" ng-transclude>',"</div>"].join(""),controller:function(){this.$onInit=function(){this.marketDataTabsCtrl.addPane(this)}}})}},function(e,t,n){e.exports=function(e){e.component("amFormQuoteBoosterService",{bindings:{service:"=ngModel",rules:"<"},template:n(568),controller:function(){var e=this;e.$onInit=function(){e.quantityOptions=function(e,t,n){n=n||1;for(var a=[],r=e;r<=t;r++)a.push(r);return a}(0,e.rules.allowedBoosterPacks),e.onQuantityChanged=function(){e.service.quantity>0?e.service.requested=!0:e.service.requested=!1}}}})}},function(e,t){e.exports='<h6 class="subtitle">{{ \'service.quoteBooster.title\' | translate }}</h6>\r\n<div class="alert alert-info">\r\n\t<p class="text-center" translate=\'service.quoteBooster.message\' translate-values="{ dataQuotes: $ctrl.rules.allowedMarketDataQuotes, startTag: \'<strong>\', endTag: \'</strong>\' }"}</p>\r\n</div>\r\n<div class="group-selector" ng-class="{\'active\' : $ctrl.service.requested }">\r\n\t<div class="row">\r\n\t\t<div class="col-xs-12 col-sm-8 col-md-9 col-lg-9">\r\n\t\t\t<ul class="paralist">\r\n\t\t\t\t<li>{{\'service.quoteBooster.quoteBoosterPacksHas1\' | translate }}</li>\r\n\t\t\t\t<li>{{\'service.quoteBooster.quoteBoosterPacksHasAPI2\' | translate }}</li>\r\n\t\t\t\t<li>{{\'service.quoteBooster.quoteBoosterPacksHas3\' | translate : {boosterPack : $ctrl.rules.allowedBoosterPacks} }}</li>\r\n\t\t\t\t<li>{{\'service.quoteBooster.quoteBoosterPacksHas4\' | translate }}</li>\r\n\t\t\t\t<li>{{\'service.quoteBooster.quoteBoosterPacksHas5\' | translate }}</li>\r\n\t\t\t\t<li>{{\'service.quoteBooster.quoteBoosterPacksHas6\' | translate }}</li>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t\t<div class="col-xs-12 col-sm-4 col-md-3 col-lg-3">\r\n\t\t\t<div class="panel-group-right">\r\n\t\t\t\t<am-select ng-model="$ctrl.service.quantity" options="$ctrl.quantityOptions" hide-empty-option="true" no-translate="true" model-listener="$ctrl.onQuantityChanged()" is-disabled="$ctrl.service.isDisabled"></am-select>\r\n\t\t\t\t<br>\r\n\t\t\t\t<p>\r\n\t\t\t\t\t<strong>{{ ($ctrl.service.price | currency:($ctrl.service.currency + \' \')) }}</strong>\r\n\t\t\t\t\t<span class="text-small">{{ \' /\' + (\'service.label.month\' | translate) }}</span>\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>'},function(e,t){e.exports=function(e){e.component("marketDataSequence",{bindings:{username:"@",cancelFn:"@",completeFn:"@"},template:['<loading-overlay loading-template="candyStripe" ng-if="$ctrl.isPageLoading()"></loading-overlay>','<am-dynamic-sequence ng-if="$ctrl.sessionCreated" sequence-source="/aces/DataServices/MarketData/Sequence" cancel-fn="$ctrl.cancelMarketDataSequence()" complete-fn="$ctrl.completeMarketDataSeqeunce()"></am-dynamic-sequence>'].join(""),controller:["UserAuthService","SESSION_ID","PageService","ModalService",function(t,n,a,r){var i=this;i.$onInit=function(){i.sessionCreated=!1,i.isPageLoading=a.isPageLoading,i.cancelMarketDataSequence=window[i.cancelFn]||void 0,i.completeMarketDataSeqeunce=window[i.completeFn]||void 0,a.setIsPageLoading(!0),t.authenticate(e.SERVER_PATH+"/DataServiceAuth",i.username,n).then(function(){a.setIsPageLoading(!1),i.sessionCreated=!0},function(){a.setIsPageLoading(!1),i.sessionCreated=!1})}}]})}},function(e,t,n){e.exports=function(e){n(571)(e)}},function(e,t,n){e.exports=function(e){e.component("amFormNpQuestion",{require:{parentForm:"^^form"},bindings:{question:"=ngModel",isNdBrokerClient:"<",isDisabled:"<?"},template:n(572)})}},function(e,t){e.exports='<div class="row">\r\n    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" ng-if="$ctrl.question.questionId === 500 && $ctrl.isNdBrokerClient">\r\n        <am-form-email  name="{{ \'npQuestionExplanation_\' + $ctrl.question.questionId }}" ng-model="$ctrl.question.explanation" is-required="true"></am-form-email>\r\n    </div>\r\n    <div ng-if="$ctrl.question.questionId !== 500">\r\n        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\r\n            <p>{{ \'questionnaire.question.\' + $ctrl.question.questionId | translate }}</p>\r\n        </div>\r\n        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\r\n            <p>\r\n                <am-switch name="{{\'npQuestionResponse_\' + $ctrl.question.questionId}}" ng-model="$ctrl.question.response" is-disabled="$ctrl.isDisabled"></am-switch>\r\n            </p>\r\n        </div>\r\n        <div ng-if="$ctrl.question.response" class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\r\n            <br />\r\n            <am-textarea name="{{\'npQuestionExplanation_\' + $ctrl.question.questionId}}" ng-model="$ctrl.question.explanation" ng-maxlength="300" placeholder="{{ \'word.required\' | translate }}" is-disabled="$ctrl.isDisabled" required></am-textarea>\r\n        </div>\r\n    </div>\r\n</div>\r\n'},function(e,t,n){e.exports=function(e){n(574)(e),n(576)(e),n(578)(e),n(580)(e),n(581)(e),n(583)(e),n(585)(e),n(587)(e),n(589)(e),n(591)(e),n(593)(e),n(595)(e),n(597)(e),n(599)(e)}},function(e,t,n){e.exports=function(e){e.component("marketDataApiAckPanel",{bindings:{configured:"<"},template:n(575),controller:["NavigationService",function(t){var n=this;n.$onInit=function(){n.configureMarketdataApiAck=function(){var n={id:"MarketdataApiAck",path:"am-dynamic-sequence.component",pageData:{sequenceSource:e.SERVER_PATH+"/MarketDataApiAck/Sequence"},skipFetch:!0};t.navigate(n)}}}]})}},function(e,t){e.exports='<section class="panel">\n    <div class="panel-heading">\n        <span class="heading">{{\'marketDataApiAck.header\' | translate }}</span>\n        <span class="btn-group-right">\n            <am-button btn-type="icon" on-click="$ctrl.configureMarketdataApiAck()" btn-icon="fa-cog" tooltip-text="{{\'word.configure\' | translate}}"></am-button>\n        </span>\n    </div>\n    <div class="panel-body panel-padding">\n        <div class="row">\n            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n                <div class="alert alert-gray text-center">\n                    <div ng-if="!$ctrl.configured">\n                        <p class="text-center">\n                            <span translate="marketDataApiAck.unconfigured" translate-values="{startStrongTag: \'<strong>\', endStrongTag: \'</strong>\', icon: \'<i class=&quot;fa fa-cog&quot;></i>\'}"></span>\n                        </p>\n                    </div>\n                    <div ng-if="$ctrl.configured">\n                        <p class="text-center">\n                            <span>{{\'marketDataApiAck.configured\' | translate }}</span><br /><br />\n                        </p>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</section>'},function(e,t,n){e.exports=function(e){e.component("billableAccountPanel",{bindings:{billableInfos:"<",billableConfigure:"<",refreshBillableAccount:"&"},template:n(577),controller:["ModalService","$translate",function(e,t){var n=this;n.$onInit=function(){n.configureBillableAccount=function(){var a={title:t.instant("marketData.billing.header"),templateUrl:"billable-account-modal.component",modalData:{billableInfos:n.billableInfos}};e.openModal(a).then(function(e){"SUCCESS"===e&&(n.fetchingBillableAccounts=!0,n.refreshBillableAccount().finally(function(){n.fetchingBillableAccounts=!1}))})}}}]})}},function(e,t){e.exports='<section class="panel">\r\n    <loading-overlay ng-if="$ctrl.fetchingBillableAccounts"></loading-overlay>\r\n    \r\n    <div class="panel-heading">\r\n        <span class="heading">{{\'marketData.billing.header\' | translate }}</span>\r\n        <span class="btn-group-right">\r\n            <am-button ng-if="$ctrl.billableConfigure" btn-type="icon" on-click="$ctrl.configureBillableAccount()" btn-icon="fa-cog" tooltip-text="{{\'word.configure\' | translate}}"></am-button>\r\n        </span>\r\n    </div>\r\n    <div class="panel-body panel-padding">\r\n        <div class="row">\r\n            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\r\n                <p>{{ \'marketData.billing.message\' | translate }}</p>\r\n                <br>\r\n                <div class="table-responsive">\r\n                    <table class="table table-striped" width="100%" cellpadding="0" cellspacing="0" border="0">\r\n                        <thead>\r\n                            <tr>\r\n                                <th width="35%" valign="middle" align="left">{{ \'marketData.billing.title\' | translate }}</th>\r\n                                <th width="30%" valign="middle" align="left">{{ \'marketData.billing.accountBillable\' | translate }}</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            <tr ng-repeat="billableInfo in $ctrl.billableInfos">\r\n                                <td valign="middle" align="left">{{billableInfo.accountTitle}}</td>\r\n                                <td valign="middle" align="left">{{billableInfo.billableAccountId}}</td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</section>'},function(e,t,n){e.exports=function(e){e.component("marketDataSubscriptionPanel",{bindings:{subscriptions:"<",configurable:"<",totalPrice:"<"},template:n(579),controller:["NavigationService",function(t){var n=this;n.$onInit=function(){angular.isUndefined(n.subscriptions)?n.hasSubscriptions=!1:n.hasSubscriptions=Object.keys(n.subscriptions).length>0,n.configureMarketData=function(){var n={id:"ConfigureMarketData",path:e.MARKETDATA_APP_ROOT+"/pages/marketdata/marketDataSequence.html",skipFetch:!0};t.navigate(n)}}}]})}},function(e,t){e.exports='<section class="panel">\r\n    <div class="panel-heading">\r\n        <span class="heading">{{ \'service.label.subscribed\' | translate }}</span>\r\n        <span class="btn-group-right" ng-if="$ctrl.configurable">\r\n            <am-button btn-type="icon" on-click="$ctrl.configureMarketData()" btn-icon="fa-cog" tooltip-text="{{\'word.configure\' | translate}}"></am-button>\r\n        </span>\r\n    </div>\r\n    <div class="panel-body panel-padding">\r\n        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\r\n            <div class="alert alert-no-results" ng-if="!$ctrl.hasSubscriptions">\r\n                <p translate="marketData.warning.currentSubscriptions" translate-values="{ breakTag: \'<br>\', startStrongTag: \'<strong>\', endStrongTag: \'</strong>\', icon: \'<i class=&quot;fa fa-cog&quot;></i>\'}"></p>\r\n            </div>\r\n            <div class="panel-body">\r\n                <market-data-current-subscription subscriptions="$ctrl.subscriptions" total-price="$ctrl.totalPrice"></market-data-current-subscription>\r\n                <br>\r\n                <market-data-gfis-link></market-data-gfis-link>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</section>'},function(e,t){e.exports=function(e){e.component("marketDataGfisInformation",{bindings:{ibEntity:"<?"},controller:["CONTENT_HOST","$translate",function(e,t){var n=this;n.showAdditionalText=function(){return["UK","IE","CE"].indexOf(n.ibEntity)>-1},n.getIbEntity=function(){return t.instant("ibEntity.shortName."+n.ibEntity)},n.getEntityLegalName=function(){return t.instant("ibEntity.entityLegalName."+n.ibEntity)},n.$onInit=function(){n.contentHost=e,n.ibEntity=n.ibEntity||""}}],template:["<div><p><b>{{'marketdata.gmbh.service.disclosures' | translate}}</b></p>"," <ul>","<li class='text-gray text-xs'> {{'marketdata.gmbh.service.info' | translate}} </li>","<li class='text-gray text-xs' translate='marketdata.gmbh.service.details' /> ","<li class='text-gray text-xs' ng-if=\"$ctrl.showAdditionalText()\" translate='marketdata.gmbh.service.note' translate-values= \"{ibEntity: $ctrl.getIbEntity(), entityLegalName: $ctrl.getEntityLegalName(), boldStart: '<strong>', boldEnd: '</strong>'}\"/>","<li class='text-gray text-xs' ng-if=\"$ctrl.showAdditionalText()\" translate='marketdata.gmbh.service.link' translate-values= \"{ibEntity: $ctrl.getIbEntity(), boldStart: '<strong>', boldEnd: '</strong>'}\" /> ","<li class='text-gray text-xs' translate='marketdata.gmbh.waiver.details' translate-compile translate-values= \"{linkStart: '<a href=&quot;https://www.gfis.info&quot; target=&quot;_blank;&quot;>', linkEnd: '</a>'}\" /> ","</ul>","</div>"].join("")}),e.component("marketDataGfisInformationPanel",{bindings:{ibEntity:"<?"},controller:[function(){var e=this;e.$onInit=function(){e.ibEntity=e.ibEntity||""}}],template:['<section class="panel">','<div class="panel-body panel-padding">','<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">','<market-data-gfis-information ib-entity="$ctrl.ibEntity"/>',"</div>","</div>","</section>"].join("")}),e.component("marketDataGfisLink",{template:['<div class="text-right text-secondary">',"<p>",'<a href="https://www.gfis.info" target="_blank">',"{{'marketdata.data.powered.by' | translate}}&nbsp;",'<span class="gfis-img-inline">','<img src=" https://www.interactivebrokers.com/images/am/gfis-logo-color.svg" alt="" border="0" />',"</span>","</a>","</p>","</div>"].join("")})}},function(e,t,n){e.exports=function(e){e.component("nonCommercialStatusPanel",{bindings:{configured:"<",reasons:"<"},template:n(582),controller:["NavigationService",function(t){var n=this;n.$onInit=function(){n.configureNonCommercialStatus=function(){var n={id:"NonCommercialStatus",path:e.MARKETDATA_APP_ROOT+"/pages/ncq/ncQuestionnaireSequence.html",skipFetch:!0};t.navigate(n)}}}]})}},function(e,t){e.exports='<section class="panel">\n    <div class="panel-heading">\n        <span class="heading">{{\'marketData.ncq.header\' | translate }}</span>\n        <span class="btn-group-right">\n            <am-button btn-type="icon" on-click="$ctrl.configureNonCommercialStatus()" btn-icon="fa-cog" tooltip-text="{{\'word.configure\' | translate}}"></am-button>\n        </span>\n    </div>\n    <div class="panel-body panel-padding">\n        <div class="row">\n            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n                <div class="alert alert-gray text-center">\n                    <div ng-if="!$ctrl.configured">\n                        <p class="text-center">\n                            <span translate="marketData.nonCommercial.status.unconfigured" translate-values="{startStrongTag: \'<strong>\', endStrongTag: \'</strong>\', icon: \'<i class=&quot;fa fa-cog&quot;></i>\'}"></span>\n                        </p>\n                    </div>\n                    <div ng-if="$ctrl.configured && $ctrl.reasons.length > 0">\n                        <p class="text-center">\n                            <span>{{\'marketData.nonCommercial.status.ineligible\' | translate }}</span><br /><br />\n                        </p>\n                        <ul class="text-small text-left"><li ng-repeat="reason in $ctrl.reasons">{{reason}}</li></ul>\n                    </div>\n                    <div ng-if="$ctrl.configured && $ctrl.reasons.length == 0" >\n                        <p class="text-center">\n                            <span>{{\'marketData.nonCommercial.status.eligible\' | translate }}</span>\n                        </p>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</section>'},function(e,t,n){e.exports=function(e){e.component("pendingSubscriptionPanel",{bindings:{subscriptions:"<"},template:n(584),controller:["DataServicesService","ResourceService","ModalService","$translate",function(t,n,a,r){var i=this;i.$onInit=function(){angular.isUndefined(i.subscriptions)?i.hasSubscriptions=!1:i.hasSubscriptions=Object.keys(i.subscriptions).length>0,i.fetchStatus=!1,i.downloadAgreement=function(e){t.downloadServiceAgreement(e)},i.viewStatus=function(t){i.fetchStatus=!0,n.fetch(e.SERVER_PATH+"/DataService/Status",{serviceId:t}).then(function(e){var t=e.data.documentTasks,n=e.data.allowedDocumentStatus,i={title:r.instant("service.label.approvalStatus"),templateUrl:"subscription-approval-status.component",modalData:{documentTasks:t,allowedDocumentStatus:n}};a.openModal(i)},function(e){}).finally(function(){i.fetchStatus=!1})}}}]})}},function(e,t){e.exports='<section class="panel">\r\n\t<div class="panel-heading">\r\n\t\t<span class="heading text-red">{{ \'service.label.pendingSubscriptions\' | translate }}</span>\r\n\t</div>\r\n\t<div class="panel-body panel-padding">\r\n\t\t<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\r\n\t\t\t<div class="alert alert-no-results" ng-if="!$ctrl.hasSubscriptions">\r\n\t\t\t\t<p>{{ \'marketData.warning.pendingSubscriptions\' | translate }}</p>\r\n\t\t\t</div>\r\n\t\t\t<div class="panel-body">\r\n\t            <div ng-repeat="(region, services) in $ctrl.subscriptions">\r\n\t\t\t\t\t<div class="form-bordered">\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t<strong>{{ (\'service.region.\' + region) | translate }}</strong>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<div class="row" id="{{ service.id }}" ng-repeat="service in services">\r\n\t\t\t\t\t\t\t<div class="col-xs-12 col-sm-7 col-md-7 col-lg-7">\r\n\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\t{{ service.name }}\r\n\t\t\t\t\t\t\t\t\t<span class="text-gray">{{ \' - \' + (\'service.type.\' + service.type | translate) }}</span>\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class="col-xs-12 col-sm-5 col-md-5 col-lg-5" ng-if="service.documentationRequired">\r\n\t\t\t\t\t\t\t\t<p class="panel-group-right">\r\n\t\t\t\t\t\t\t\t\t<span>{{ \'service.label.documentation\' | translate }}</span>\r\n\t\t\t\t\t\t\t\t\t<span class="margin-left-10 margin-right-10">{{ \'|\' }}</span>\r\n\t\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t\t<am-button btn-type="icon" on-click="$ctrl.downloadAgreement(service.id)" btn-icon="fa-download" tooltip-text="{{\'word.download\' | translate}}" tooltip-side="left"></am-button>\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<br>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</section>'},function(e,t,n){e.exports=function(e){e.component("requestedSubscriptionPanel",{bindings:{subscriptions:"<"},template:n(586),controller:["NavigationService",function(t){var n=this;n.$onInit=function(){n.completeAgreementSteps=function(){var n={id:"MarketData",path:e.MARKETDATA_APP_ROOT+"/pages/marketdata/marketDataSequence.html",skipFetch:!0,pageData:{sequenceType:"/Agreement"}};t.navigate(n)}}}]})}},function(e,t){e.exports='<section class="panel">\n    <div class="panel-heading">\n        <span class="heading text-red">{{ \'service.label.requestedSubscriptions\' | translate }}</span>\n        <span class="btn-group-right">\n            <am-button btn-type="icon" on-click="$ctrl.completeAgreementSteps()" btn-icon="fa-cog" tooltip-text="{{\'word.configure\' | translate}}"></am-button>\n        </span>\n    </div>\n    <div class="panel-body">\n        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n            <div class="alert alert-warning">\n                <p translate="marketData.warning.requestedSubscriptions" translate-values="{ startStrongTag: \'<strong>\', endStrongTag: \'</strong>\', icon: \'<i class=&quot;fa fa-cog mr-0&quot;></i>\'}"></p>\n            </div>\n            <div class="panel-body">\n                <div ng-repeat="(region, services) in $ctrl.subscriptions">\n                    <div class="form-bordered">\n                        <p>\n                            <strong>{{ (\'service.region.\' + region) | translate }}</strong>\n                        </p>\n                        <div class="row" id="{{ service.id }}" ng-repeat="service in services">\n                            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n                                <p>\n                                    {{ service.name }}\n                                    <span class="text-gray">{{ \' - \' + (\'service.type.\' + service.type | translate) }}</span>\n                                </p>\n                            </div>                        \n                        </div>\n                    </div>\n                    <br>\n                </div>\n            </div>\n        </div>\n    </div>\n</section>'},function(e,t,n){e.exports=function(e){e.component("marketDataSnapshotPanel",{bindings:{snapshot:"<"},template:n(588)})}},function(e,t){e.exports='<section class="panel">\n    <div class="panel-heading">\n       <span>{{ \'marketData.header.snapshot\' | translate }}&nbsp;*</span>\n\t</div>\n    <div class="panel-body panel-padding">\n        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n            <div ng-repeat="snapshot in $ctrl.snapshot">\n                <div class="space-10"/>\n                <div class="alert alert-gray">\n                    <div class="form-bordered">\n                        <div class="row">\n                            <div class="col-xs-12 col-sm-8 col-md-8 col-lg-8">\n                                <p translate="marketData.snapshot.name.{{snapshot.snapshotName}}"></p>\n                            </div>\n                            <div class="col-xs-12 col-sm-4 col-md-4 col-lg-4">\n                                <p class="panel-group-right">\n                                    <strong>{{snapshot.quantity}}</strong>\n                                </p>\n                            </div>\n                        </div>\n                        <div class="row">\n                            <div class="col-xs-12 col-sm-8 col-md-8 col-lg-8">\n                                <p translate="marketData.snapshot.estimated.cost"></p>\n                            </div>\n                            <div class="col-xs-12 col-sm-4 col-md-4 col-lg-4">\n                                <p class="panel-group-right">\n                                    <strong>USD {{snapshot.estimatedCost}}</strong>\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n            <div class="alert alert-info">\n                <p>*&nbsp;{{ \'marketData.snapshot.warning\' | translate}}</p>\n            </div>\n        </div>\n    </div>\n</section>'},function(e,t,n){e.exports=function(e){e.component("subscriberStatusPanel",{bindings:{validation:"<",info:"<"},template:n(590),controller:["$translate","ResourceService","NavigationService","ModalService","$window",function(t,n,a,r,i){var o=this;o.openSubmitTicket=function(){var e={id:"Support",path:"template/page/support/support.html",title:t.instant("page.title.Messages"),serverParams:{redirectToApp:"newTkt",tktSumm:"Market Data Professional Status Downgrade",tktMCat:1399,tktSCat:1645,srcApp:"AM"}};a.navigate(e)},o.openWhyAmIPro=function(){var n={id:"ProfessionalStatusInformation",path:e.MARKETDATA_APP_ROOT+"/pages/status/professionalStatusInformation.html",title:t.instant("marketData.status.proStatusInfo"),skipFetch:!0};a.navigate(n)},o.openKbArticle=function(){i.open("https://www.ibkr.info/article/2369","_blank")},o.$onInit=function(){o.configureSubscriberStatus=function(){if(o.validation&&"PENDING_CUSTOMER"===o.validation.state){var i={title:t.instant("marketData.validation.header"),templateUrl:"subscriber-validation-modal.component",modalData:{validation:o.validation}};r.openModal(i).then(function(t){"SUCCESS"===t&&(o.fetchingSubscriberValidation=!0,n.fetch(e.SERVER_PATH+"/SubscriberValidation").then(function(e){o.validation=e.data.validation}).finally(function(){o.fetchingSubscriberValidation=!1}))})}else{var s={id:"SubscriberStatus",path:e.MARKETDATA_APP_ROOT+"/pages/status/subscriberStatusSequence.html",skipFetch:!0};a.navigate(s)}}}}]})}},function(e,t){e.exports='<section class="panel">\r\n    <loading-overlay ng-if="$ctrl.fetchingSubscriberValidation"></loading-overlay>\r\n    \r\n    <div class="panel-heading">\r\n        <span class="heading">{{\'marketData.status.header\' | translate }}</span>\r\n        <span class="btn-group-right">\r\n            <am-button ng-if="$ctrl.info.configurable" btn-type="icon" on-click="$ctrl.configureSubscriberStatus()" btn-icon="fa-cog" tooltip-text="{{\'word.configure\' | translate}}"></am-button>\r\n        </span>\r\n    </div>\r\n    <div class="panel-body panel-padding">\r\n        <div class="row">\r\n            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\r\n                <div class="alert alert-gray">\r\n                    <p class="text-center" ng-if="$ctrl.info.subscriberStatus !== \'UNKNOWN\'">\r\n                        {{\'marketData.status.message\' | translate }}\r\n                        <br>\r\n                        <span class="text-price">{{(\'marketData.status.\' + $ctrl.info.subscriberStatus) | translate}}</span>\r\n                    </p>\r\n                    <p class="text-center" ng-if="$ctrl.info.subscriberStatus === \'UNKNOWN\'">\r\n                        <span translate="marketData.status.unconfigured" translate-values="{startStrongTag: \'<strong>\', endStrongTag: \'</strong>\', icon: \'<i class=&quot;fa fa-cog&quot;></i>\'}"></span>\r\n                    </p>\r\n                </div>\r\n                <div class="alert alert-warning" ng-if="$ctrl.info.org && !$ctrl.info.financialAdvisor">\r\n                    <p translate=\'subscriberStatus.label.isOrg\' translate-compile translate-values="{ startTag: \'<strong>\', endTag: \'</strong>\', linkStart: \'<a href=&quot;javascript:void(0);&quot; ng-click=&quot;$ctrl.openKbArticle()&quot;>\', linkEnd: \'</a>\' }"></p>\r\n                </div>\r\n                <div class="alert alert-warning" ng-if="$ctrl.info.financialAdvisor">\r\n                    <p translate=\'subscriberStatus.label.isFinancialAdvisor\' translate-compile translate-values="{ startTag: \'<strong>\', endTag: \'</strong>\', linkStart: \'<a href=&quot;javascript:void(0);&quot; ng-click=&quot;$ctrl.openKbArticle()&quot;>\', linkEnd: \'</a>\' }"></p>\r\n                </div>\r\n                <div class="alert alert-warning" ng-if="$ctrl.info.downgradePending">\r\n                    <p translate=\'subscriberStatus.downgrade.message\' translate-values="{ startTag: \'<strong>\', endTag: \'</strong>\' }"></p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="row" ng-if="$ctrl.validation && $ctrl.validation.state === \'PENDING_CUSTOMER\'">\r\n            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\r\n                <p>\r\n                    <span class="text-small text-bold" translate="marketData.validation.status" translate-values="{expiration: $ctrl.validation.expiration, startStrongTag: \'<strong>\', endStrongTag: \'</strong>\', icon: \'<i class=&quot;fa fa-cog&quot;></i>\'}"></span>                \r\n                </p>\r\n               </div>\r\n        </div>\r\n        <div class="row" ng-if="$ctrl.info.proDetailRequired">\r\n            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\r\n                <p><a href="javascript:void(0);" ng-click="$ctrl.openWhyAmIPro()">{{\'marketData.status.whyAmIPro\' | translate}}</a></p>\r\n            </div>\r\n        </div>\r\n        <div class="row" ng-if="$ctrl.info.submitTicketRequired">\r\n            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\r\n                <p><a href="javascript:void(0);" ng-click="$ctrl.openSubmitTicket()">{{\'marketData.status.submitTicket\' | translate}}</a></p>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</section>'},function(e,t,n){e.exports=function(e){e.component("npQuestionnairePanel",{bindings:{processedDate:"<"},template:n(592),controller:["NavigationService",function(t){var n=this;n.$onInit=function(){n.configureNpQuestionnaire=function(){var n={id:"NpQuestionnaire",path:e.MARKETDATA_APP_ROOT+"/pages/npq/npQuestionnaireSequence.html",skipFetch:!0};t.navigate(n)}}}]})}},function(e,t){e.exports='<section class="panel">\r\n\t<div class="panel-heading">\r\n\t\t<span class="heading">{{\'marketData.npq.header\' | translate }}</span>\r\n\t\t<span class="btn-group-right">\r\n\t\t\t<am-button btn-type="icon" on-click="$ctrl.configureNpQuestionnaire()" btn-icon="fa-cog" tooltip-text="{{\'word.configure\' | translate}}"></am-button>\r\n\t\t</span>\r\n\t</div>\r\n\t<div class="panel-body panel-padding">\r\n\t\t<div class="row">\r\n\t\t\t<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\r\n\t\t\t\t<div class="alert alert-gray">\r\n\t\t\t\t\t<p class="text-center" translate="marketData.npq.text" translate-values="{ date: $ctrl.processedDate, breakTag: \'<br />\', icon: \'&nbsp;<i class=&quot;fa fa-cog&quot;></i>&nbsp;\'}"></p>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</section>'},function(e,t,n){e.exports=function(e){e.component("researchLoginPanel",{bindings:{configurable:"<",providers:"<",refreshResearchLogin:"&"},template:n(594),controller:["$translate","CONTENT_HOST","$window","ModalService","NavigationService",function(e,t,n,a,r){var i=this;i.$onInit=function(){i.providers=i.providers||[],i.fetchingProviders=!1,i.contentHost=t,i.getTooltipTitle=function(t){return e.instant("thirdPartyLogin.status."+t)},i.visitSite=function(e){n.open(e)},i.configureResearchLogin=function(t){var n={title:e.instant("thirdPartyLogin.configure.header",{serviceProvider:t.serviceProviderName}),templateUrl:"research-login-modal.component",modalData:{provider:t}};a.openModal(n).then(function(e){"SUCCESS"===e&&(i.fetchingProviders=!0,i.refreshResearchLogin().finally(function(){i.fetchingProviders=!1}))})}}}]})}},function(e,t){e.exports='<section class="panel">\n    <div class="panel-heading head-border">\n        <span class="heading">{{\'thirdPartyLogin.header\' | translate }}</span>\n    </div>\n    <div class="panel-body panel-padding">\n        <loading-overlay ng-if="$ctrl.fetchingProviders"></loading-overlay>\n        <div class="row">\n            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n                <div class="side-panel">\n                    <div class="link-set">\n                        <div class="link-row" ng-repeat="provider in $ctrl.providers">\n                            <div class="link-text">\n                                <span class="link-label">\n                                    <i class="fa tooltips" am-tooltip ng-class="provider.recordStatus === \'ACTIVE\' ? \'fa-check\' : \'fa-square\'" data-toggle="tooltip" data-placement="right" data-original-title="{{ $ctrl.getTooltipTitle(provider.recordStatus) }}"></i>\n                                    {{provider.serviceProviderName}}\n                                </span>\n                            </div>\n                            \n                            <div class="btn-group-right" ng-if="$ctrl.configurable">\n                                <ul class="btn-icons">\n                                    <li ng-if="provider.recordStatus === \'ACTIVE\'">\n                                        <a href="" class="btn btn-sm btn-default" ng-click="$ctrl.visitSite(provider.website)">\n                                            {{provider.recordStatus | translate}}\n                                        </a>\n                                    </li>\n                                    <li ng-if="provider.recordStatus === \'PENDING\'">\n                                        <a href="" class="btn btn-sm btn-disabled">\n                                            {{(provider.recordStatus | translate) + \'...\' }}\n                                        </a>\n                                    </li>\n                                    <li ng-if="provider.recordStatus === \'INACTIVE\'">\n                                        <a href="" class="btn-icon" ng-click="$ctrl.configureResearchLogin(provider)">\n                                            <i am-tooltip class="fa fa-cog text-gray tooltips" data-toggle="tooltip" data-placement="left" data-original-title="{{\'word.configure\' | translate}}"></i>\t\n                                        </a>\n                                    </li>\n                                </ul>\n                            </div>\n                        </div>\n                        <p ng-show="$ctrl.providers.length === 0">\n                            {{ \'thirdPartyLogin.message.noProvider\' | translate}}\n                        </p>\n                    </div>\n                    <br>\n                    <p ng-if="$ctrl.providers.length > 0" translate="thirdPartyLogin.helpLoggingIn" translate-values="{ linkStart: \'<a href=&quot;https://\' + $ctrl.contentHost + \'/en/software/am3/am/settings/researchwebsitelogin.htm&quot; target=&quot;_new&quot;>\', linkEnd: \'</a>\' }"></p>\n                </div>\n            </div>\n        </div>\n    </div>\n</section>'},function(e,t,n){e.exports=function(e){e.component("researchSubscriptionPanel",{require:{$itemManipulator:"^^amItemManipulator"},template:n(596),controller:["NavigationService","ResourceService","DataServicesService","ModalService","$translate","PageService",function(t,n,a,r,i,o){var s=this;s.$onInit=function(){s.getPriceText=a.getPriceText,s.getAnnotationText=a.getAnnotationText,s.openMoreInfoModal=function(e){return r.openInfoModal({title:i.instant("word.moreInfo"),modalData:{infoContent:"<p>"+i.instant(s.getAnnotationText(e.id,e.annotation))+"</p>"}})},s.checkResearchSubscriptionConfigurable=function(){return n.fetch(e.SERVER_PATH+"/ResearchSubscription").then(function(e){s.configurable=e.data.configurable;var t=o.getCurrentPage().pageData||{};s.configurable&&"T"===t.configure&&(s.configureResearchSubscription(),delete t.configure)})},s.checkResearchSubscriptionConfigurable(),s.$itemManipulator.itemControl.load().finally(function(){var e=s.$itemManipulator.services.SORTER;if(angular.isDefined(e)){for(var t=void 0,n=[],a=0;a<e.sorters.length;++a){var r=e.sorters[a];n.push(r.id.toUpperCase()+"_ASCENDING"),n.push(r.id.toUpperCase()+"_DESCENDING"),"NEUTRAL"!==r.state&&(t=r.id.toUpperCase()+"_"+r.state)}s.sortOptions=n,s.activeSort=t}}),s.getSorter=function(e){var t=s.$itemManipulator.services.SORTER.sorters;for(key in t)if(t[key].id==e)return t[key];return null},s.configureResearchSubscription=function(){var n={id:"ConfigureResearchSubscription",path:e.MARKETDATA_APP_ROOT+"/pages/research/researchSubscriptionSequence.html",skipFetch:!0};t.navigate(n)},s.onSortOptionChanged=function(){if(!angular.isUndefined(s.activeSort)){for(var e=!1,t=s.activeSort.split("_"),n=s.$itemManipulator.services.SORTER,a=0;a<n.sorters.length;++a){var r=n.sorters[a];r.id.toUpperCase()===t[0]?(e=r.state!==t[1],r.state=t[1]):r.state="NEUTRAL"}e&&s.$itemManipulator.updateSorters()}},s.onSortOptionChanged()}}]})}},function(e,t){e.exports='<section class="panel">\n    <div class="panel-heading head-border">\n        <span class="heading">{{ \'service.label.subscribed\' | translate }}</span>\n        <span class="btn-group-right" ng-if="$ctrl.configurable">\n            <am-button btn-type="primary" btn-size="small" on-click="$ctrl.configureResearchSubscription()" btn-text="{{\'researchSubscription.configure\' | translate}}"></am-button>\n        </span>\n    </div>\n\n    <div ng-if="$ctrl.$itemManipulator.entries.length > 0" class="form-group">\n        <div class="row d-none d-md-block">\n            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n                <br>\n                <div class="table-responsive">\n                    <table class="table tablesorter" id="table-all">\n                        <thead>\n                            <tr>\n                                <th ng-click="$ctrl.$itemManipulator.toggleSort($ctrl.getSorter(\'name\'))" width="40%" align="left" valign="middle" class="header" ng-class="{ \'headerSortDown\' : $ctrl.getSorter(\'name\').state == \'DESCENDING\', \'headerSortUp\' : $ctrl.getSorter(\'name\').state == \'ASCENDING\' }">{{\'researchSubscription.column.planName\' | translate}}</th>\n                                <th ng-click="$ctrl.$itemManipulator.toggleSort($ctrl.getSorter(\'contentType\'))" width="20%" align="left" valign="middle" class="header" ng-class="{ \'headerSortDown\' : $ctrl.getSorter(\'contentType\').state == \'DESCENDING\', \'headerSortUp\' : $ctrl.getSorter(\'contentType\').state == \'ASCENDING\' }">{{\'researchSubscription.column.contentType\' | translate}}</th>\n                                <th ng-click="$ctrl.$itemManipulator.toggleSort($ctrl.getSorter(\'region\'))" width="20%" align="left" valign="middle" class="header" ng-class="{ \'headerSortDown\' : $ctrl.getSorter(\'region\').state == \'DESCENDING\', \'headerSortUp\' : $ctrl.getSorter(\'region\').state == \'ASCENDING\' }">{{\'researchSubscription.column.region\' | translate}}</th>\n                                <th ng-click="$ctrl.$itemManipulator.toggleSort($ctrl.getSorter(\'price\'))" width="20%" align="left" valign="middle" class="header" ng-class="{ \'headerSortDown\' : $ctrl.getSorter(\'price\').state == \'DESCENDING\', \'headerSortUp\' : $ctrl.getSorter(\'price\').state == \'ASCENDING\' }">{{\'researchSubscription.column.monthlyPrice\' | translate}}</th>\n                            </tr>\n                        </thead>\n\n                        <tbody>\n                            <tr ng-repeat="item in $ctrl.$itemManipulator.entries">\n                                <td align="left" valign="middle"><b>{{item.name}}</b></td>\n                                <td align="left" valign="middle">{{\'service.content.\' + item.content | translate}}</td>\n                                <td align="left" valign="middle">{{ \'service.region.\' + item.region | translate }}</td>\n                                <td align="right" valign="middle"><span ng-if="!item.freeTrial || item.price === 0" class="text-bold">{{ $ctrl.getPriceText(item, item.quantity, true) }}</span> <span ng-if="item.freeTrial && item.price > 0" class="text-bold text-right" translate="service.label.freeTrialPrice" translate-compile="" translate-values="{price: $ctrl.getPriceText(item, item.quantity, true), strikeStart: \'<s>\', strikeEnd: \'</s>\', italicStart: \'<i class=text-danger>\', italicEnd: \'</i>\'}"></span><am-button btn-type="icon" btn-icon="fa-info-circle" on-click="$ctrl.openMoreInfoModal(item)"></am-button></td>\n                            </tr>\n                        </tbody>\n\n                    </table>\n\n                </div>\n                <br />\n                <market-data-gfis-link />\n            </div>\n        </div>\n\n        <div class="row d-md-none">\n            <div class="col">\n                <am-select ng-model="$ctrl.activeSort" options="$ctrl.sortOptions" option-key="\'researchSubscription.mobile.\'" model-listener="$ctrl.onSortOptionChanged()"></am-select>\n                <div ng-repeat="item in $ctrl.$itemManipulator.entries">\n                    <research-subscription-mobile-panel item="item" get-price-text="$ctrl.getPriceText" open-more-info-modal="$ctrl.openMoreInfoModal"></research-subscription-mobile-panel><br />\n                </div>\n                 <market-data-gfis-link />\n            </div>\n        </div>\n\n    </div>\n\n    <div class="panel-body panel-padding" ng-if="$ctrl.$itemManipulator.entries.length == 0">\n        <div class="row">\n            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n                \x3c!-- \n                    No subscriptions\n                --\x3e\n                <br>\n                <div class="alert alert-no-results-lg">\n                    <p translate="researchSubscription.warning.currentSubscriptions" translate-values="{ breakTag: \'<br>\', startStrongTag: \'<strong>\', endStrongTag: \'</strong>\'}"></p>\n                </div>\n                <br>\n            </div>\n        </div>\n    </div>\n</section>'},function(e,t,n){e.exports=function(e){e.component("researchSubscriptionMobilePanel",{bindings:{item:"<",getPriceText:"<",openMoreInfoModal:"<"},template:n(598),controller:[function(){this.$onInit=function(){}}]})}},function(e,t){e.exports='<div class="border-top panel-body panel-padding">\n    <div class="row">\n        <div align="left" class="col-xs-10 col-sm-10">\n            <p><b>{{$ctrl.item.name}}</b></p>\n            <p class="text-secondary">{{\'service.content.\' + $ctrl.item.content | translate}} - {{\'service.region.\' + $ctrl.item.region | translate }}</p>\n            <p>\n                <span ng-if="!$ctrl.item.freeTrial || $ctrl.item.price === 0" class="text-bold">{{ $ctrl.getPriceText($ctrl.item, $ctrl.item.quantity, true) }}</span>\n                <span ng-if="$ctrl.item.freeTrial && $ctrl.item.price > 0" class="text-bold text-right" translate="service.label.freeTrialPrice" translate-compile="" translate-values="{price: $ctrl.getPriceText($ctrl.item, $ctrl.item.quantity, true), strikeStart: \'<s>\', strikeEnd: \'</s>\', italicStart: \'<i class=text-danger>\', italicEnd: \'</i>\'}"></span>\n            </p>\n        </div>\n        <div align="right" class="col-xs-2 col-sm-2">\n          <am-button btn-type="icon" btn-icon="fa-info-circle" on-click="$ctrl.openMoreInfoModal($ctrl.item)"></am-button>\n        </div>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("serviceConfigurationPanel",{bindings:{serviceConfigurations:"<"},template:n(600),controller:["$translate","ModalService","ServiceConfigurationService",function(e,t,n){var a=this;a.$onInit=function(){a.serviceConfigurations=a.serviceConfigurations||[],a.configureServiceAccount=function(e){n.configureServiceAccount(e)}}}]})}},function(e,t){e.exports='<section class="panel">\n    <div class="panel-heading head-border">\n        <span class="heading">{{\'serviceConfiguration.header\' | translate }}</span>\n    </div>\n    <div class="panel-body panel-padding">\n        <div class="row">\n            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n                <div class="side-panel">\n                    <div class="link-set">\n                        <div class="link-row" ng-repeat="serviceConfiguration in $ctrl.serviceConfigurations">\n                            <div class="link-text">\n                                <div class="col-xs-12 col-sm-12 col-md-5 col-lg-5">\n                                    <p>\n                                        <span class="link-label"> {{serviceConfiguration.name}} </span>\n                                    </p>\n                                </div>\n                                <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4">\n                                    <p>\n                                        <span class="link-label"> {{serviceConfiguration.selectedAccountId}} </span>\n                                    </p>\n                                </div>\n                                <div class="col-xs-12 col-sm-12 col-md-3 col-lg-3">\n                                    <p ng-if="serviceConfiguration.eligibleAccountIds.length > 1">\n                                        <span class="btn-group-right">\n                                            <a href="" class="btn-icon" ng-click="$ctrl.configureServiceAccount(serviceConfiguration)">\n                                                <i am-tooltip class="fa fa-cog text-gray tooltips" data-toggle="tooltip" data-placement="left" data-original-title="{{\'word.configure\' | translate}}"></i>\n                                            </a>\n                                        </span>\n                                    </p>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</section>'},function(e,t,n){e.exports=function(e){n(602)(e),n(604)(e),n(606)(e),n(608)(e),n(610)(e)}},function(e,t,n){e.exports=function(e){e.component("amFormNewswireService",{bindings:{bundle:"=ngModel",rules:"<"},template:n(603),controller:["DataServicesService","$filter","$translate",function(e,t,n){var a=this;a.$onInit=function(){a.getAnnotationText=e.getAnnotationText,a.redirectTo=e.redirectTo,a.getPriceText=e.getPriceText,a.getServiceNameText=e.getServiceNameText,a.getSelectedServiceRules=function(){return a.rules[a.bundle.selectedService.id]},a.getDisplayText=function(e){var r=e.id;return 690==r||706==r||571==r||698==r||691==r||699==r?a.getPriceText(e)+" - "+(a.rules[r].apiAvailable?n.instant("service.label.api"):n.instant("service.label.noApi")):557==r||558==r||602==r||605==r||606==r||609==r||610==r||635==r?n.instant("service.bundle.gloablSavings."+e.region,{price:t("currency")(e.price,e.currency+" "),globalSavings:t("currency")(a.bundle.globalSavings,e.currency+" ")}):a.getPriceText(e)+" - "+e.name},a.disableBundle=function(){return t("filter")(a.bundle.allowedServices,{disabled:!0}).length>0},a.onClick=function(){a.clicked=!0},a.onSelected=function(e){angular.isDefined(e)&&a.clicked&&(e.requested=!0),a.clicked=!1}}}]})}},function(e,t){e.exports='<div class="row" name="{{ $ctrl.bundle.selectedService.id }}">\n    <div class="col-xs-2 col-sm-1 col-md-1 col-lg-1">\n        <p class="text-center">\n            \x3c!-- \n                Input Checkbox\n            --\x3e\n            <input type="checkbox" ng-if="::!$ctrl.getSelectedServiceRules().redirectionAllowed" ng-model="$ctrl.bundle.selectedService.requested" ng-disabled="$ctrl.bundle.selectedService.disabled" i-check />\n            \x3c!-- \n                Subscribe Button\n            --\x3e\n            <am-button ng-if="::$ctrl.getSelectedServiceRules().redirectionAllowed" btn-type="icon" btn-icon="fa-cog" tooltip-text="{{\'word.subscribe\' | translate}}" on-click="$ctrl.redirectTo($ctrl.bundle.selectedService.id)" tooltip-side="\'right\'"></am-button>\n        </p>\n    </div>\n    \x3c!-- \n        Single Service Bundle\n    --\x3e\n    <div class="col-xs-10 col-sm-11 col-md-11 col-lg-2" ng-if="$ctrl.bundle.allowedServices.length === 1">\n        \x3c!-- \n            Price\n        --\x3e\n        <p ng-if="$ctrl.bundle.selectedService.price > 0">\n            <strong>{{ ($ctrl.bundle.selectedService.price | currency:($ctrl.bundle.selectedService.currency + \' \')) }}</strong>\n            <span class="text-small">{{ \' / \' + (\'service.label.month\' | translate) }}</span>\n        </p>\n        <p ng-if="$ctrl.bundle.selectedService.price === 0">\n            <strong>{{ \'service.label.free\' | translate }}</strong>\n        </p>\n    </div>\n    \x3c!-- \n        Multiple services Bundle\n    --\x3e\n    <div class="col-xs-10 col-sm-11 col-md-11 col-lg-2" ng-if="$ctrl.bundle.allowedServices.length > 1">\n        <p ng-if="$ctrl.bundle.allowedServices.length > 1">\n            <am-select ng-model="$ctrl.bundle.selectedService" model-listener="$ctrl.onSelected($ctrl.bundle.selectedService)" options="$ctrl.bundle.allowedServices" option-key="$ctrl.getDisplayText" ng-click="$ctrl.onClick()" is-disabled="$ctrl.disableBundle()" no-translate="true" hide-empty-option="true"></am-select>\n        </p>\n    </div>\n    <div class="hidden-sm hidden-md hidden-lg">\n        <div class="clearfix"></div>\n    </div>\n    <div class="col-xs-10 col-xs-offset-2 col-sm-10 col-sm-offset-1 col-md-10 col-md-offset-1 col-lg-2 col-lg-offset-0">\n        \x3c!-- \n            Service Image\n        --\x3e\n       <am-service-logo ng-if="::$ctrl.getSelectedServiceRules().displayLogo" logo="$ctrl.bundle.selectedService.logo" rules="$ctrl.getSelectedServiceRules()"></am-service-logo>\n       \n    </div>\n    <div class="col-xs-10 col-xs-offset-2 col-sm-10 col-sm-offset-1 col-md-10 col-md-offset-1 col-lg-7 col-lg-offset-0">\n        <p>\n            {{ $ctrl.getServiceNameText($ctrl.bundle.selectedService.id, $ctrl.getSelectedServiceRules().displayName) }}\n            \x3c!-- \n                Service Region\n            --\x3e\n            <span class="margin-left-5 margin-right-5 text-gray text-small">{{ \' | \' + ( \'service.region.\' + $ctrl.bundle.selectedService.region  | translate )}}</span>\n            \x3c!-- \n                Free Trial Eligibility\n            --\x3e\n            <span ng-if="$ctrl.bundle.selectedService.freeTrial" class="text-gray">{{ \'(\' + (\'service.label.freeTrial\' | translate) + \')\' }}</span>\n            \x3c!-- \n                Pending Text\n            --\x3e\n            <span class="text-dark-red" ng-if="$ctrl.bundle.selectedService.pending">{{ \'(\' + (\'word.pending\' | translate) +\')\' }}</span>\n            \x3c!-- \n                Annotation Info Circle\n            --\x3e\n            <a ng-if="$ctrl.getSelectedServiceRules().annotation" href="" class="btn-icon collapsed" data-target="{{ \'#collapse_\' + $ctrl.bundle.selectedService.id }}" data-toggle="collapse" aria-expandend="false" aria-controls="{{ \'collapse_\' + $ctrl.bundle.selectedService.id }}">\n                <i class="fa fa-info-circle tooltips" data-toggle="tooltip" data-placement="right" am-tooltip data-original-title="{{ \'word.moreInfo\' | translate }}"></i>\n            </a>\n        </p>\n        <div ng-if="$ctrl.getSelectedServiceRules().annotation" class="collapse" id="{{ \'collapse_\' + $ctrl.bundle.selectedService.id }}">\n            \x3c!-- \n                Service Annotation Description\n            --\x3e\n            <p class="text-gray">{{ $ctrl.getAnnotationText($ctrl.bundle.selectedService.id, $ctrl.getSelectedServiceRules().annotation) }}</p>\n        </div>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("amFormResearchService",{bindings:{service:"=ngModel",rules:"<"},template:n(605),controller:["DataServicesService",function(e){var t=this;t.$onInit=function(){t.getAnnotationText=e.getAnnotationText,t.getPriceText=e.getPriceText,t.redirectTo=e.redirectTo,t.showAnnotationByDefault=e.showAnnotationByDefault,t.getServiceNameText=e.getServiceNameText}}]})}},function(e,t){e.exports='<div class="row" name="{{ $ctrl.service.id }}">\n    <div class="col-xs-2 col-sm-1 col-md-1 col-lg-1">\n        <p class="text-center">\n            \x3c!-- \n                Input Checkbox\n            --\x3e\n            <input type="checkbox" ng-if="::!$ctrl.rules.redirectionAllowed" ng-model="$ctrl.service.requested" ng-disabled="$ctrl.service.disabled" i-check />\n            \x3c!-- \n                Subscribe Button\n            --\x3e\n            <am-button ng-if="::$ctrl.rules.redirectionAllowed" btn-type="icon" btn-icon="fa-cog" tooltip-text="{{\'word.subscribe\' | translate}}" on-click="$ctrl.redirectTo($ctrl.service.id)"></am-button>\n        </p>\n    </div>\n    <div class="col-xs-10 col-sm-11 col-md-11 col-lg-2">\n        \x3c!-- \n            Price\n        --\x3e\n        <p ng-if="$ctrl.service.price > 0">\n            <strong>{{ ($ctrl.service.price | currency:($ctrl.service.currency + \' \')) }}</strong>\n            <span class="text-small">{{ \' / \' + (\'service.label.month\' | translate) }}</span>\n        </p>\n        <p ng-if="$ctrl.service.price === 0">\n            <strong>{{ \'service.label.free\' | translate }}</strong>\n        </p>\n    </div>\n    <div class="hidden-sm hidden-md hidden-lg">\n        <div class="clearfix"></div>\n    </div>\n    <div class="col-xs-10 col-xs-offset-2 col-sm-10 col-sm-offset-1 col-md-10 col-md-offset-1 col-lg-2 col-lg-offset-0">\n        \x3c!-- \n            Service Image\n        --\x3e\n       <am-service-logo ng-if="::$ctrl.rules.displayLogo" logo="$ctrl.service.logo" rules="$ctrl.rules"></am-service-logo>\n    </div>\n    <div class="col-xs-10 col-xs-offset-2 col-sm-10 col-sm-offset-1 col-md-10 col-md-offset-1 col-lg-7 col-lg-offset-0">\n        <p>\n            \x3c!-- \n                Service Name\n            --\x3e\n            {{ $ctrl.getServiceNameText($ctrl.service.id, $ctrl.service.name) }}\n            \x3c!-- \n                Service Region\n            --\x3e\n            <span class="margin-left-5 margin-right-5 text-gray text-small">{{ \' | \' + ( \'service.region.\' + $ctrl.service.region  | translate )}}</span>\n            \x3c!-- \n                Free Trial Eligibility\n            --\x3e\n            <span ng-if="$ctrl.service.freeTrial" class="text-gray">{{ \'(\' + (\'service.label.freeTrial\' | translate) + \')\' }}</span>\n            \x3c!-- \n                Pending Text\n            --\x3e\n            <span ng-if="$ctrl.service.pending" class="text-secondary">{{ \'(\' + (\'service.label.pending\' | translate) +\')\' }}</span>\n            \x3c!-- \n                Annotation Info Circle\n            --\x3e\n            <a ng-if="$ctrl.rules.annotation" href="" class="btn-icon collapsed" data-target="{{ \'#collapse_\' + $ctrl.service.id }}" data-toggle="collapse" aria-expandend="false" aria-controls="{{ \'collapse_\' + $ctrl.service.id }}">\n                <i class="fa fa-info-circle tooltips" data-toggle="tooltip" data-placement="right" am-tooltip data-original-title="{{ \'word.moreInfo\' | translate }}"></i>\n            </a>\n        </p>\n        <div ng-if="$ctrl.rules.annotation" class="collapse" ng-class="{\'show\': $ctrl.showAnnotationByDefault($ctrl.service.id)}" id="{{ \'collapse_\' + $ctrl.service.id }}">\n            \x3c!-- \n                Service Annotation Description\n            --\x3e\n            <p class="text-gray">{{ $ctrl.getAnnotationText($ctrl.service.id, $ctrl.rules.annotation) }}</p>\n        </div>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("amFormResearchBundleService",{bindings:{bundle:"=ngModel",rules:"<",onBundleSelected:"&?"},template:n(607),controller:["$translate","$filter",function(e,t){var n=this;n.$onInit=function(){n.bundleClicked=!1,n.onBundleRequested=function(){!angular.isUndefined(n.onBundleSelected)&&angular.isFunction(n.onBundleSelected)&&n.onBundleSelected({$event:{service:n.bundle.selectedService,allowedDependentServices:n.rules[n.bundle.selectedService.id].allowedDependentServices}})},n.onBundleChanged=function(){if(n.bundleClicked){for(var e=0;e<n.bundle.allowedServices.length;e++){n.bundle.allowedServices[e].requested=!1}n.bundle.selectedService.requested=!0,n.bundleClicked=!1,!angular.isUndefined(n.onBundleSelected)&&angular.isFunction(n.onBundleSelected)&&n.onBundleSelected({$event:{service:n.bundle.selectedService,allowedDependentServices:n.rules[n.bundle.selectedService.id].allowedDependentServices}})}},n.onBundleClicked=function(){n.bundleClicked=!0},n.getBundleText=function(a){return e.instant("service.bundle.gloablSavings."+a.region,{price:t("currency")(a.price,a.currency+" "),globalSavings:t("currency")(n.bundle.globalSavings,a.currency+" ")})}}}]})}},function(e,t){e.exports='<div class="row">\n    <div class="col-xs-2 col-sm-1 col-md-1 col-lg-1">\n        <p class="text-center">\n            <input type="checkbox" ng-model="$ctrl.bundle.selectedService.requested" ng-disabled="$ctrl.bundle.selectedService.disabled" ng-change="$ctrl.onBundleRequested()" i-check />\n        </p>\n    </div>\n    <div class="col-xs-10 col-sm-2 col-md-2 col-lg-2">\n        <am-select ng-model="$ctrl.bundle.selectedService" options="$ctrl.bundle.allowedServices" option-key="$ctrl.getBundleText" model-listener="$ctrl.onBundleChanged()" ng-click="$ctrl.onBundleClicked()" no-translate="true" hide-empty-option="true"></am-select>\n    </div>\n    <div class="hidden-sm hidden-md hidden-lg">\n        <div class="clearfix"></div>\n    </div>\n    <div class="col-xs-10 col-xs-offset-2 col-sm-9 col-sm-offset-0 col-md-9 col-md-offset-0 col-lg-9 col-lg-offset-0">\n        <p>\n            \x3c!-- \n                Service Title\n            --\x3e\n            {{ (\'service.bundle.title\' | translate) + \' - \'}}\n            <span class="text-gray" translate="service.bundle.bundleComponents" translate-values="{bundles: $ctrl.rules[$ctrl.bundle.selectedService.id].allowedDependentServices.length }"></span>\n            \x3c!-- \n                Eligible for free trial \n            --\x3e\n            <span class="gray" ng-if="$ctrl.bundle.selectedService && $ctrl.bundle.selectedService.freeTrial">{{ \'service.label.freeTrial\' | translate }}</span>\n            \x3c!-- \n                Annotation Info Circle\n            --\x3e\n            <a href="" class="btn-icon collapsed" data-target="{{ \'#collapse_\' + $ctrl.bundle.selectedService.id }}" data-toggle="collapse" aria-expandend="false" aria-controls="{{ \'collapse_\' + $ctrl.bundle.selectedService.id }}">\n                <i class="fa fa-info-circle tooltips" data-toggle="tooltip" data-placement="right" am-tooltip data-original-title="{{ \'word.moreInfo\' | translate }}"></i>\n            </a>\n        </p>\n        <div class="collapse" id="{{ \'collapse_\' + $ctrl.bundle.selectedService.id }}">\n            <div ng-switch on="$ctrl.bundle.selectedService.id">\n                <div ng-switch-when="573">\n                    <div ng-include=" \'573\'">\n                    </div>                \n                </div>\n                <div ng-switch-when="612">\n                    <div ng-include=" \'573\'">\n                    </div>                \n                </div>\n                <div ng-switch-when="604">\n                    <div ng-include=" \'604\'">\n                    </div>                \n                </div>\n                <div ng-switch-when="608">\n                    <div ng-include=" \'604\'">\n                    </div>                \n                </div>\n                <div ng-switch-default>\n                    <div ng-include=" \'nonProBundleComponents\'">\n                    </div>                \n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n<script type="text/ng-template" id="573">\n    <div class="row">\n        <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">\n            <ol class="paralist">\n                <li class="text-gray">\n                    <strong>{{ \'service.bundle.ReuterStEventsCalendars\' | translate }}</strong>\n                    <ul class="paralist">\n                        <li class="text-gray" translate=\'service.bundle.label.RSECLiveCorpEarnings\' translate-values="{ startTag: \'<strong>\', endTag: \'</strong>\' }"></li>\n                        <li class="text-gray" translate=\'service.bundle.label.RSECEcoCalendar\' translate-values="{ startTag: \'<strong>\', endTag: \'</strong>\' }"></li>\n                        <li class="text-gray" translate=\'service.bundle.label.ESECIndyCalendar\' translate-values="{ startTag: \'<strong>\', endTag: \'</strong>\' }"></li>\n                    </ul>\n                </li>\n                <li class="text-gray">\n                    <strong>{{ \'service.bundle.DJRealtimeNews\' | translate }}</strong>\n                </li>\n                <li class="text-gray">\n                    <strong>{{ \'service.bundle.MtNewswires\' | translate }}</strong>\n                </li>\n                <li class="text-gray">\n                    <strong>{{ \'service.bundle.TheFly\' | translate }}</strong>\n                </li>\n                <li class="text-gray">\n                    <strong>{{ \'service.bundle.Briefing\' | translate }}</strong>\n                </li>\n            </ol>\n        </div>\n        <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">\n            <ol class="paralist" start="6">\n                <li class="text-gray">\n                    <strong>{{ \'service.bundle.RWFundamentals\' | translate }}</strong>\n                    <ul class="paralist">\n                        <li class="text-gray" translate=\'service.bundle.label.RWFFinCalendars\'></li>\n                        <li class="text-gray" translate=\'service.bundle.label.RWFForecasts\'></li>\n                        <li class="text-gray" translate=\'service.bundle.label.RWFCoListings\'></li>\n                    </ul>\n                </li>\n                <li class="text-gray">\n                    <strong>{{ \'service.bundle.recognia\' | translate }}</strong>\n                    <ul class="paralist">\n                        <li class="text-gray" translate=\'service.bundle.label.recogniaNote1\'></li>\n                        <li class="text-gray" translate=\'service.bundle.label.recogniaNote2\'></li>\n                    </ul>\n                </li>\n            </ol>\n        </div>\n    </div>\n<\/script>\n\n<script type="text/ng-template" id="604">\n    <div class="row">\n        <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">\n            <ol class="paralist">\n                <li class="text-gray">\n                    <strong>{{ \'service.bundle.ReuterStEventsCalendars\' | translate }}</strong>\n                    <ul class="paralist">\n                        <li class="text-gray" translate=\'service.bundle.label.RSECLiveCorpEarnings\' translate-values="{ startTag: \'<strong>\', endTag: \'</strong>\' }"></li>\n                        <li class="text-gray" translate=\'service.bundle.label.RSECEcoCalendar\' translate-values="{ startTag: \'<strong>\', endTag: \'</strong>\' }"></li>\n                        <li class="text-gray" translate=\'service.bundle.label.ESECIndyCalendar\' translate-values="{ startTag: \'<strong>\', endTag: \'</strong>\' }"></li>\n                    </ul>\n                </li>\n                <li class="text-gray">\n                    <strong>{{ \'service.bundle.DJRealtimeNews\' | translate }}</strong>\n                </li>\n            </ol>\n        </div>\n        <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">\n            <ol class="paralist" start="3">\n                <li class="text-gray">\n                    <strong>{{ \'service.bundle.RWFundamentals\' | translate }}</strong>\n                    <ul class="paralist">\n                        <li class="text-gray" translate=\'service.bundle.label.RWFFinCalendars\'></li>\n                        <li class="text-gray" translate=\'service.bundle.label.RWFForecasts\'></li>\n                        <li class="text-gray" translate=\'service.bundle.label.RWFCoListings\'></li>\n                    </ul>\n                </li>\n                <li class="text-gray">\n                    <strong>{{ \'service.bundle.recognia\' | translate }}</strong>\n                    <ul class="paralist">\n                        <li class="text-gray" translate=\'service.bundle.label.recogniaNote1\'></li>\n                        <li class="text-gray" translate=\'service.bundle.label.recogniaNote2\'></li>\n                    </ul>\n                </li>\n            </ol>\n        </div>\n    </div>\n\n<\/script>\n\n<script type="text/ng-template" id="nonProBundleComponents">\n    <div class="row">\n        <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">\n            <ol class="paralist">\n                <li class="text-gray">\n                    <strong>{{ \'service.bundle.ReuterStEventsCalendars\' | translate }}</strong>\n                    <ul class="paralist">\n                        <li translate=\'service.bundle.label.RSECLiveCorpEarnings\' translate-values="{ startTag: \'<strong>\', endTag: \'</strong>\' }"></li>\n                        <li translate=\'service.bundle.label.RSECEcoCalendar\' translate-values="{ startTag: \'<strong>\', endTag: \'</strong>\' }"></li>\n                        <li translate=\'service.bundle.label.ESECIndyCalendar\' translate-values="{ startTag: \'<strong>\', endTag: \'</strong>\' }"></li>\n                    </ul>\n                </li>\n                <li class="text-gray">\n                    <strong>{{ \'service.bundle.DJRealtimeNews\' | translate }}</strong>\n                </li>\n                <li class="text-gray">\n                    <strong>{{ \'service.bundle.RGNewswire\' | translate }}</strong>\n                </li>\n            </ol>\n        </div>\n        <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">\n            <ol class="paralist" start="4">\n                <li class="text-gray">\n                    <strong>{{ \'service.bundle.RWFundamentals\' | translate }}</strong>\n                    <ul class="paralist">\n                        <li translate=\'service.bundle.label.RWFFinCalendars\'></li>\n                        <li translate=\'service.bundle.label.RWFForecasts\'></li>\n                        <li translate=\'service.bundle.label.RWFCoListings\'></li>\n                    </ul>\n                </li>\n                <li class="text-gray">\n                    <strong>{{ \'service.bundle.recognia\' | translate }}</strong>\n                    <ul class="paralist">\n                        <li translate=\'service.bundle.label.recogniaNote1\'></li>\n                        <li translate=\'service.bundle.label.recogniaNote2\'></li>\n                    </ul>\n                </li>\n            </ol>\n        </div>\n<\/script>'},function(e,t,n){e.exports=function(e){e.component("amFormResearchPlatformService",{bindings:{service:"=ngModel",rules:"<"},template:n(609),controller:["DataServicesService",function(e){var t=this;t.$onInit=function(){t.getPriceText=e.getPriceText}}]})}},function(e,t){e.exports='<div class="row">\n\t<div class="col-xs-2 col-sm-1 col-md-1 col-lg-1">\n\t\t<p class="text-center">\n\t\t\t<input type="checkbox" ng-model="$ctrl.service.requested" ng-disabled="$ctrl.service.disabled" i-check />\n\t\t</p>\n\t</div>\n\t<div class="col-xs-10 col-sm-2 col-md-2 col-lg-2">\n\t\t\x3c!-- \n\t\t\tPrice\n\t\t--\x3e\n\t\t<p ng-if="$ctrl.service.price > 0">\n\t\t\t<strong>{{ ($ctrl.service.price | currency:($ctrl.service.currency + \' \')) }}</strong>\n\t\t\t<span class="text-small">{{ \' / \' + (\'service.label.month\' | translate) }}</span>\n\t\t</p>\n\t\t<p ng-if="$ctrl.service.price === 0">\n\t\t\t<strong>{{ \'service.label.free\' | translate }}</strong>\n\t\t</p>\n\t</div>\n\t<div class="hidden-sm hidden-md hidden-lg">\n\t\t<div class="clearfix"></div>\n\t</div>\n\t<div class="col-xs-10 col-xs-offset-2 col-sm-9 col-sm-offset-0 col-md-9 col-md-offset-0 col-lg-9 col-lg-offset-0">\n\t\t<p>\n\t\t\t\x3c!-- \n\t\t\t\tService Name\n\t\t\t--\x3e\n\t\t\t{{ $ctrl.service.name }}\n\t\t\t\x3c!-- \n\t\t\t\tAnnotation Info Circle\n\t\t\t--\x3e\n\t\t\t<a href="" class="btn-icon collapsed" data-target="{{ \'#collapse_\' + $ctrl.service.id }}" data-toggle="collapse" aria-expandend="false" aria-controls="{{ \'collapse_\' + $ctrl.service.id }}">\n\t\t\t\t<i class="fa fa-info-circle tooltips" data-toggle="tooltip" data-placement="right" am-tooltip data-original-title="{{ \'word.moreInfo\' | translate }}"></i>\n\t\t\t</a>\n\t\t</p>\n\t\t<div class="collapse" id="{{ \'collapse_\' + $ctrl.service.id }}">\n\t\t\t\x3c!-- \n\t\t\t\tService Annotation Description\n\t\t\t--\x3e\n\t\t\t<p class="text-gray">{{ \'service.researchPlatform.message\' | translate }}</p>\n\t\t\t<ul class="paralist">\n\t\t\t\t<li class="text-gray" translate=\'service.researchPlatform.Newswire\' translate-values="{ startTag: \'<strong>\', endTag: \'</strong>\' }"></li>\n\t\t\t\t<li class="text-gray" translate=\'service.researchPlatform.Fundamentals\' translate-values="{ startTag: \'<strong>\', endTag: \'</strong>\' }"></li>\n\t\t\t\t<li class="text-gray" translate=\'service.researchPlatform.Calendars\' translate-values="{ startTag: \'<strong>\', endTag: \'</strong>\' }"></li>\n\t\t\t\t<li class="text-gray" translate=\'service.researchPlatform.AnalystResearch\' translate-values="{ startTag: \'<strong>\', endTag: \'</strong>\' }"></li>\n\t\t\t\t<li class="text-gray" translate=\'service.researchPlatform.AnalystBulletin\' translate-values="{ startTag: \'<strong>\', endTag: \'</strong>\' }"></li>\n\t\t\t\t<li class="text-gray" translate=\'service.researchPlatform.MarketCommentary\' translate-values="{ startTag: \'<strong>\', endTag: \'</strong>\' }"></li>\n\t\t\t</ul>\n\t\t\t<p class="text-gray text-small">{{ \'service.label.dataSubscription\' | translate }}</p>\n\t\t</div>\n\t</div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("amServiceLogo",{bindings:{logo:"<",rules:"<"},template:n(611),controller:["urlEncodeFilter",function(e){var t=this;t.$onInit=function(){t.getLogoUrl=function(){return t.logo?t.logo.logoUrl:"https://www.interactivebrokers.com/libphp/researchProviderImage.php?serviceName="+e(t.rules.vendorDetails.name)}}}]})}},function(e,t){e.exports='<p class="provider-logo">\r\n      <img class="img-logo" alt="{{ $ctrl.rules.vendorDetails.name }}" ng-src="{{$ctrl.getLogoUrl()}}"></img>\r\n</p>'},function(e,t,n){e.exports=function(e){n(613)(e)}},function(e,t,n){e.exports=function(e){e.component("amFormSubscriberStatus",{require:{parentForm:"^^form"},bindings:{status:"=ngModel",labelText:"@?",rules:"<",isRequiredNpq:"<"},template:n(614),controller:["$translate",function(e){var t=this;t.$onInit=function(){t.onStatusChanged=function(){"PROFESSIONAL"===t.status?angular.forEach(t.rules.nonProfessionalQuestions,function(e){t.parentForm[e.name].$setValidity("subscriberStatus",!0)}):"NON_PROFESSIONAL"!==t.status||t.isRequiredNpq||angular.forEach(t.rules.nonProfessionalQuestions,function(e){e.answer&&"false"!==e.answer||t.parentForm[e.name].$setValidity("subscriberStatus",!1)})},t.onQuestionChanged=function(e){e.answer?t.parentForm[e.name].$setValidity("subscriberStatus",!0):t.parentForm[e.name].$setValidity("subscriberStatus",!1)},t.getLabelText=function(){return t.labelText?t.labelText:e.instant("subscriberStatus.label.status")}}}]})}},function(e,t){e.exports='<am-form-select name="subscriberStatus" ng-model="$ctrl.status" options="$ctrl.rules.allowedStatuses" model-listener="$ctrl.onStatusChanged()" option-key="\'marketData.status.\'" label-text="{{$ctrl.getLabelText()}}"></am-form-select>\r\n\r\n<div class="row" ng-repeat="question in $ctrl.rules.nonProfessionalQuestions" ng-show="$ctrl.status === \'NON_PROFESSIONAL\' && !$ctrl.isRequiredNpq">\r\n\t<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\r\n\t    <p>{{ \'subscriberStatus.question.\' + question.name | translate }}</p>\r\n\t</div>\r\n\t<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\r\n\t    <p>\r\n            <am-switch ng-model="question.answer" name="{{question.name}}" model-listener="$ctrl.onQuestionChanged(question)"></am-switch>\r\n        </p>\r\n\t</div>\r\n</div>'},function(e,t,n){e.exports=function(e){n(616)(e),n(618)(e),n(620)(e),n(622)(e),n(624)(e),n(626)(e),n(628)(e)}},function(e,t,n){e.exports=function(e){e.component("alternativeDisplayProgramModal",{template:n(617),controller:["ModalService","ResourceService",function(t,n){var a=this;a.$onInit=function(){a.program=t.getModalData().program,a.allowedPrograms=t.getModalData().allowedPrograms,a.signature=t.getModalData().signature,a.isLoading=!1,a.modalState="",a.errors={},a.getErrors=function(){return a.errors},a.submitProgram=function(){a.isLoading=!0;var r={signatureSubmissionData:a.signature.signatureSubmissionData,program:a.program};n.update(e.SERVER_PATH+"/AlternativeDisplayProgram",r).then(function(e){a.modalState="SUCCESS",t.setModalButtons([{label:"word.close",fn:t.closeModal,alignment:"right"}])},function(e){a.errors=e.data.errors}).finally(function(){a.isLoading=!1,t.setModalResult(a.modalState)})},t.setModalButtons([{label:"word.confirm",fn:a.submitProgram,btnType:"primary",alignment:"right"}])}}]})}},function(e,t){e.exports='\x3c!-- \r\n\tLoading Overlay\r\n--\x3e \r\n<loading-overlay ng-if="$ctrl.isLoading"></loading-overlay>\r\n\x3c!-- \r\n\tPrograms and Signature\r\n--\x3e\r\n<div ng-show="$ctrl.modalState === \'\'" ng-form="$ctrl.alternativeDisplayProgramForm" form-server-errors="$ctrl.getErrors()">\r\n\t\x3c!-- \r\n\t\tProgram\r\n\t--\x3e\r\n    <am-form-select name="program" ng-model="$ctrl.program.programType" options="$ctrl.allowedPrograms" option-key=" \'alternativeDisplayProgram.type.\' " label-text="{{ \'alternativeDisplayProgram.label.program\' | translate }}" required></am-form-select>\r\n    \x3c!-- \r\n    \tOther Text\r\n    --\x3e\r\n    <am-form-input name="otherText" ng-if="$ctrl.program.programType === \'OTHER\'" ng-model="$ctrl.program.otherText" label-text="{{ \'alternativeDisplayProgram.label.other\' | translate }}" maxlength="100" required></am-form-input>\r\n    <hr />\r\n\t\x3c!-- \r\n\t\tSignature\r\n\t--\x3e\r\n\t<p translate="alternativeDisplayProgram.warning" translate-values="{ ulTag: \'<ul>\', ulEndTag: \'</ul>\', liTag: \'<li>\', liEndTag: \'</li>\'}"></p>\r\n\t<signature-block document-signature="$ctrl.signature" no-signature-text="true" no-signature-header="true"></signature-block>\r\n</div>\r\n\x3c!-- \r\n\tSuccess Note\r\n--\x3e\r\n<div ng-show="$ctrl.modalState === \'SUCCESS\'">\r\n    <div class="alert alert-success">\r\n        <p class="text-center" translate="alternativeDisplayProgram.message.success" translate-values="{program: $ctrl.program}"></p>\r\n    </div>\r\n</div>'},function(e,t,n){e.exports=function(e){e.component("billableAccountModal",{template:n(619),controller:["ModalService","ResourceService",function(t,n){var a=this;a.updateBillableAccount=function(e){e.action="SET"},this.$onInit=function(){this.billableInfos=t.getModalData().billableInfos,this.isLoading=!1,this.modalState="",this.submitBillableInfo=function(){a.isLoading=!0,n.update(e.SERVER_PATH+"/BillableAccount",a.billableInfos).then(function(e){a.modalState="SUCCESS",a.billableInfos=e.data.billableInfos},function(e){a.modalState="ERROR"}).finally(function(){a.isLoading=!1,t.setModalResult(a.modalState),t.setModalButtons([{label:"word.close",fn:t.closeModal,alignment:"right"}])})},t.setModalButtons([{label:"word.save",fn:a.submitBillableInfo,btnType:"primary",alignment:"right"}])}}]})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.isLoading"></loading-overlay>\r\n\r\n<div ng-show="$ctrl.modalState === \'\'" class="table-responsive">\r\n    <table class="table table-striped" width="100%" cellpadding="0" cellspacing="0" border="0">\r\n        <thead>\r\n            <tr>\r\n                <th width="50%" valign="middle" align="left">{{ \'marketData.billing.title\' | translate }}</th>\r\n                <th width="50%" valign="middle" align="left">{{ \'marketData.billing.accountBillable\' | translate }}</th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            <tr ng-repeat="billableInfo in $ctrl.billableInfos">\r\n                <td valign="middle" align="left">{{billableInfo.accountTitle}}</td>\r\n                <td ng-if="billableInfo.availableAccountIds.length <= 0" valign="middle" align="left">{{billableInfo.billableAccountId}}</td>\r\n                <td ng-if="billableInfo.availableAccountIds.length > 0"><am-select name="{{billableAccountId}}" ng-model="billableInfo.billableAccountId" ng-change="$ctrl.updateBillableAccount(billableInfo)" options="billableInfo.availableAccountIds" no-translate="true" required></am-select></td>\r\n            </tr>\r\n        </tbody>\r\n    </table>\r\n</div>\r\n\r\n<div ng-show="$ctrl.modalState === \'SUCCESS\'">\r\n    <div class="alert alert-success">\r\n        <p class="text-center">\r\n            {{\'marketData.billing.success\' | translate }}\r\n        </p>    \r\n    </div>\r\n</div>\r\n\r\n<div ng-show="$ctrl.modalState === \'ERROR\'">\r\n    <div class="alert alert-danger">\r\n        <p>\r\n            {{\'internal.error.request_submit\' | translate}}\r\n        </p>\r\n    </div>\r\n</div>'},function(e,t,n){e.exports=function(e){e.component("nonDisplayAgreementModal",{template:n(621),controller:["ModalService","ResourceService",function(t,n){var a=this;a.$onInit=function(){a.signature=t.getModalData().signature,a.agreement=t.getModalData().agreement},a.isLoading=!1,a.modalState="",a.errors={},a.getErrors=function(){return a.errors},a.submitAgreement=function(){a.isLoading=!0;var r={signatureSubmissionData:a.signature.signatureSubmissionData,formFileId:a.agreement.id.fileId,agreementSubstitutions:a.agreement.agreementSubstitutions};n.update(e.SERVER_PATH+"/NonDisplayAgreement",r).then(function(e){a.modalState="SUCCESS",t.setModalButtons([{label:"word.close",fn:t.closeModal,alignment:"right"}])},function(e){a.errors=e.data.errors}).finally(function(){a.isLoading=!1,t.setModalResult(a.modalState)})},t.setModalButtons([{label:"word.confirm",fn:a.submitAgreement,btnType:"primary",alignment:"right"}])}]})}},function(e,t){e.exports='\x3c!-- \r\n\tLoading Overlay\r\n--\x3e \r\n<loading-overlay ng-if="$ctrl.isLoading"></loading-overlay>\r\n\x3c!-- \r\n\tPrograms and Signature\r\n--\x3e\r\n<div ng-show="$ctrl.modalState === \'\'" ng-form="$ctrl.nonDisplayAgreementForm" form-server-errors="$ctrl.getErrors()">\r\n\t\x3c!-- \r\n\t\tAgreement\r\n\t--\x3e\r\n\t<am-agreement agreement="$ctrl.agreement"></am-agreement>\r\n\t\x3c!-- \r\n\t\tSignature\r\n\t--\x3e\r\n\t<signature-block document-signature="$ctrl.signature" no-signature-text="true" no-signature-header="true"></signature-block>\r\n</div>\r\n\x3c!-- \r\n\tSuccess Note\r\n--\x3e\r\n<div ng-show="$ctrl.modalState === \'SUCCESS\'">\r\n    <div class="alert alert-success">\r\n        <p class="text-center">{{ \'nonDisplayAgreement.message.success\' | translate }}</p>\r\n    </div>\r\n</div>'},function(e,t,n){e.exports=function(e){e.component("researchLoginModal",{template:n(623),controller:["ModalService","ResourceService","UserService",function(t,n,a){var r=this,i="",o=function(){if(r.isLoading=!0,r.errors={},angular.isDefined(r.provider.password)){rsa=new RSAKey,rsa.setPublic(i,"3");var a=do_encrypt(r.provider.password)}var o={encryptedPassword:a,provider:r.provider};n.create(e.SERVER_PATH+"/ResearchLoginProvider",o).then(function(e){r.modalState="SUCCESS",t.setModalButtons([{label:"word.close",fn:t.closeModal,alignment:"right"}])},function(e){r.modalState="ERROR",r.errors=e.data.errors,angular.isDefined(r.errors.research_login)&&t.setModalButtons([{label:"word.close",fn:t.closeModal,alignment:"right"}])}).finally(function(){r.isLoading=!1,t.setModalResult(r.modalState)})};r.$onInit=function(){r.provider=t.getModalData().provider,r.email=t.getModalData().email,r.modalState="",r.errors={},r.getServerErrors=function(){return r.errors},a.fetchPublicKey().then(function(e){i=e.data.publicKey}).finally(function(){t.setModalButtons([{label:"word.save",alignment:"right",fn:o,btnType:"primary",isDisabled:function(){return!r.researchLoginProviderForm.$valid}}])})}}]})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.isLoading"></loading-overlay>\r\n\r\n<div class="row">\r\n\t<div class="col-xs-12 col-sm-2 col-md-12 col-lg-12">\r\n\t\t<p>{{\'thirdPartyLogin.configure.message\' | translate}}</p>\r\n\t</div>\r\n</div>\r\n<br>\r\n<div class="alert alert-gray">\r\n\t<p>{{ \'thirdPartyLogin.password.\' + $ctrl.provider.serviceCode | translate }}</p>\r\n</div>\r\n\x3c!-- \r\n\tSuccess Message \r\n--\x3e\r\n<div ng-if="$ctrl.modalState === \'SUCCESS\'">\r\n\t<br>\r\n\t<div class="alert alert-success">\r\n\t\t<p class="text-center">\r\n\t\t\t<strong translate=\'thirdPartyLogin.label.success\' translate-values="{ tag: \'<br>\'}"></strong>\r\n\t\t</p>\t\r\n\t</div>\r\n</div>\r\n\x3c!-- \r\n\tCustom Errors\r\n--\x3e\r\n<div ng-if="$ctrl.getServerErrors()[\'research_login\']">\r\n\t<br>\r\n\t<div class="alert alert-warning">\r\n\t\t<p class="text-center" ng-repeat="(key, value) in $ctrl.getServerErrors()">\r\n\t\t\t<strong ng-if="key === \'research_login\' ">{{ (\'thirdPartyLogin.error.\' + value) | translate }}</strong>\r\n\t\t</p>\r\n\t</div>\r\n</div>\r\n<br>\r\n<div class="row" ng-form="$ctrl.researchLoginProviderForm" form-server-errors="$ctrl.getServerErrors()">\r\n\t<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\r\n        \x3c!-- Username --\x3e\r\n\t    <am-form-label label-text="{{ \'thirdPartyLogin.label.username\' | translate }}" value-text="{{$ctrl.email}}"></am-form-label>\r\n\t\t\x3c!-- Password --\x3e\r\n\t\t<am-form-input name="password" type="password" ng-model="$ctrl.provider.password" label-text="{{ \'thirdPartyLogin.label.password\' | translate }}" required></am-form-input>\r\n\t\t\x3c!-- Confirm Password --\x3e\r\n\t\t<am-form-input-confirm name="confirmPassword" type="password" confirm-model="$ctrl.provider.password" label-text="{{ \'thirdPartyLogin.label.confirmPassword\' | translate }}" mismatch-error="mismatchPasswords"></am-form-input-confirm>\r\n\t</div>\r\n</div>'},function(e,t,n){e.exports=function(e){e.component("subscriberValidationModal",{template:n(625),controller:["ResourceService","ModalService",function(t,n){var a=this,r=function(){a.isLoading=!0,t.update(e.SERVER_PATH+"/SubscriberValidation",{username:a.validation.username,reason:a.reason}).then(function(e){a.modalState="SUCCESS",n.setModalButtons([{label:"word.close",fn:n.closeModal,alignment:"right"}])},function(e){e.data&&e.data.errors&&e.data.errors.update?(a.modalState="ERROR",n.setModalButtons([{label:"word.close",fn:n.closeModal,alignment:"right"}])):a.serverErrors=e.data.errors}).finally(function(){a.isLoading=!1,n.setModalResult(a.modalState)})};a.$onInit=function(){a.validation=n.getModalData().validation,a.isLoading=!1,a.modalState="",a.reason="",a.getServerErrors=function(){return a.serverErrors},n.setModalButtons([{label:"word.save",fn:r,btnType:"primary",alignment:"right"}])}}]})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.isLoading"></loading-overlay>\r\n\r\n<div class="row" ng-if="$ctrl.modalState === \'\'" ng-form="$ctrl.subscriberValidationForm" form-server-errors="$ctrl.getServerErrors()">\r\n\t<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\r\n\t\t<p>{{ \'marketData.validation.message\' | translate }}</p>\r\n\t</div>\r\n\t<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\r\n\t\t<am-textarea name="reason" ng-model="$ctrl.reason" maxlength="500" required></am-textarea>\r\n\t</div>\r\n</div>\r\n\r\n<div ng-if="$ctrl.modalState === \'SUCCESS\'">\r\n    <div class="alert alert-success">\r\n        <p class="text-center">\r\n            {{\'marketData.validation.success\' | translate }}\r\n        </p>\r\n    </div>\r\n</div>\r\n\r\n<div ng-if="$ctrl.modalState === \'ERROR\'">\r\n    <div class="alert alert-danger">\r\n        <p>\r\n            {{\'internal.error.request_submit\' | translate}}\r\n        </p>\r\n    </div>\r\n</div>'},function(e,t,n){e.exports=function(e){e.component("ncQuestionnaireModal",{template:n(627),controller:["ResourceService","DataServicesService","ModalService","PageService",function(t,n,a,r){var i=this;i.$onInit=function(){i.errors={},i.isLoading=!0,i.isSuccess=!1,i.isError=!1,i.clientAccountId=a.getModalData().clientAccountId||"";n.createSession(void 0,function(){t.fetch(e.SERVER_PATH+"/NcQuestionnaire/questionnaire",{clientAccountId:i.clientAccountId}).then(function(e){i.questionsByChapter=e.data.questionsByChapter},function(e){i.errors=e.data.errors}).finally(function(){i.isLoading=!1})},function(){r.setIsPageLoading(!1)},void 0)}}]})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.isLoading"></loading-overlay>\n\n<div ng-form="$ctrl.ncQuestionnaireForm">\n    <h4 aria-level="2">{{ \'marketData.ncq.header\' | translate }}</h4>\n    <br />\n    <div ng-repeat="(chapter, questions) in $ctrl.questionsByChapter">\n        <h6 aria-level="3" class="subtitle">{{ \'questionnaire.chapter.\' + chapter | translate }}</h6>\n        <am-form-np-question ng-model="question" is-disabled="true" ng-repeat="question in questions"></am-form-np-question>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("serviceConfigurationModal",{template:n(629),controller:["ModalService","ResourceService",function(t,n){var a=this;a.$onInit=function(){a.errors={},a.modalState="",a.serviceConfiguration=t.getModalData().serviceConfiguration,a.eligibleAccountIds=a.serviceConfiguration.eligibleAccountIds,a.selectedAccountId=a.serviceConfiguration.selectedAccountId,a.getServerErrors=function(){return a.errors};t.setModalButtons([{label:"word.save",alignment:"right",fn:function(){a.errors={},a.isLoading=!0;var r={selectedAccountId:a.selectedAccountId,serviceId:a.serviceConfiguration.serviceId};n.create(e.SERVER_PATH+"/ServiceConfigurationProvider",r).then(function(e){a.modalState="SUCCESS",t.setModalButtons([{label:"word.close",fn:function(){t.closeModal(a.selectedAccountId)},alignment:"right"}])},function(e){a.errors=e.data.errors,a.modalState="ERROR"}).finally(function(){a.isLoading=!1,t.setModalResult(a.modalState)})},btnType:"primary"}])}}]})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.isLoading"></loading-overlay>\n<div class="row">\n    <div class="col-xs-12 col-sm-2 col-md-12 col-lg-12">\n        <p>{{\'serviceConfiguration.configureAccount\' | translate}}</p>\n    </div>\n</div>\n<br>\n\x3c!-- Success Message --\x3e\n<div ng-if="$ctrl.modalState === \'SUCCESS\'">\n    <br>\n    <div class="alert alert-success">\n        <p class="text-center">\n            <strong translate=\'serviceConfiguration.label.success\'></strong>\n        </p>\n    </div>\n</div>\n<div class="row" ng-form="$ctrl.serviceConfigurationForm" form-server-errors="$ctrl.getServerErrors()">\n    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n        <am-form-select label-text="{{\'serviceConfiguration.serviceAccount\' | translate}}" name="selectedAccountId" options="$ctrl.eligibleAccountIds" ng-model="$ctrl.selectedAccountId" is-required="true"></am-form-select>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){n(631)(e),n(632)(e)}},function(e,t){e.exports=function(e){e.factory("DataServicesService",["SESSION_ID","$translate","$filter","$window","ResourceService","FileDownloadService","UserAuthService","ModalService",function(t,n,a,r,i,o,s,l){var c=function(){l.openErrorModal({modalData:{errors:["Unable to create session!!!"]}})};return{getAnnotationText:function(e,t){return angular.isUndefined(t)?n.instant("service.annotation."+e):"en"===n.use()?t:n.instant("service.annotation."+e)},downloadServiceAgreement:function(t){var a=[];i.fetch(e.SERVER_PATH+"/DataService/Agreements",{serviceId:t}).then(function(e){a=e.data.agreements||[];for(var t=0;t<a.length;t++){var r=a[t],i=n.instant("form.title."+r.id.formNumber)+".pdf",s=o.decodeBase64(r.fileContent);o.download(i,s,"application/pdf")}},function(e){}).finally(function(){})},getPriceText:function(e,t,r){if("QUOTE_BOOSTER"===e.region){var i=e.price*t;return a("currency")(i,e.currency+" ")+" / ( "+t+" "+n.instant("service.label.pack")+" )"}return 896===e.id?n.instant("service.label.priceUponRequest"):21===e.id||889===e.id?n.instant("service.label.freeForActiveAccounts"):e.price>0&&!r?a("currency")(e.price,e.currency+" ")+" / "+n.instant("service.label.month"):e.price>0?a("currency")(e.price,e.currency+" "):n.instant("service.label.free")},redirectTo:function(e){842===e?r.open("https://www.streetaccount.com/subscriptions.aspx?r=IB"):896===e&&r.open("http://www.otrglobal.com/contact-us")},createSession:function(n,a,r,i){n=n||s.getUsername(),r=r||c,i=i||angular.noop,s.login(e.SERVER_PATH+"/DataServiceAuth",{username:n,sessionId:t}).then(a).catch(r).finally(i)},showAnnotationByDefault:function(e){return[1064,1065,1143,1144,1357].indexOf(e)>-1},getServiceNameText:function(e,t){var a=n.instant("service.name."+e);return a==="service.name."+e?t:a}}}])}},function(e,t){e.exports=function(e){e.factory("ServiceConfigurationService",["$translate","ModalService","DataServicesService",function(e,t,n){return{configureServiceAccount:function(a){n.createSession(a.username,function(){var n={title:e.instant("serviceConfiguration.modal.header",{service:a.name}),templateUrl:"service-configuration-modal.component",dialogClass:"modal-md",modalData:{serviceConfiguration:a}};t.openModal(n).then(function(e){a.selectedAccountId="ERROR"!=e?e:""})})}}}])}},function(e,t,n){e.exports=function(e){n(634)(e),n(637)(e),n(642)(e),n(644)(e),n(646)(e),n(650)(e),n(656)(e),n(657)(e),n(658)(e)}},function(e,t,n){e.exports=function(e){n(635)(e),n(636)(e)}},function(e,t){e.exports=function(e){function t(e){var t=this,n=function(){var n={nasdDetails:t.nasdDetails,signatureSubmissionData:t.signature.signatureSubmissionData};e.stepForward(n)};t.$onInit=function(){t.agreements=e.getSequenceData().agreements,t.signature=e.getSequenceData().signature,t.isOrg=e.getSequenceData().isOrg,t.nasdDetails=e.getSequenceData().nasdDetails,e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{isDisabled:function(){return!t.nasdAgreementForm||!t.nasdAgreementForm.$valid},onClick:n}})}}e.controller("NasdAgreementController",t),t.$inject=["DynamicSequenceService"]}},function(e,t){e.exports=function(e){function t(e,t,n){var a=this,r=function(){var a={title:n.instant("agreement.nyseProfessionalSubscriber.continue.title"),dialogClass:"modal-md",modalData:{pendingText:n.instant("agreement.nyseProfessionalSubscriber.continue.message"),noSuccessScreen:!0}};t.openConfirmModal(a).then(function(t){"SUCCESS"===t&&e.stepForward()})};a.$onInit=function(){a.agreements=e.getSequenceData().agreements,e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{onClick:r}})}}e.controller("NyseProfessionalSubscriberAgreement",t),t.$inject=["DynamicSequenceService","ModalService","$translate"]}},function(e,t,n){e.exports=function(e){n(638)(e),n(639)(e),n(640)(e),n(641)(e)}},function(e,t){e.exports=function(e){function t(t,n,a){var r=this;r.$onInit=function(){r.fetchBillableAccounts=function(){return n.fetch(e.SERVER_PATH+"/BillableAccount").then(function(e){r.billableInfos=e.data.billableInfos,r.billableConfigure=e.data.billableConfigure},function(e){r.errors=e.data.errors})},r.fetchMarketDataSnapshot=function(){return n.fetch(e.SERVER_PATH+"/MarketDataSnapshot").then(function(e){r.snapshot=e.data.snapshot||[]},function(e){r.errors=e.data.errors})},r.fetchMarketDataApiAck=function(){return n.fetch(e.SERVER_PATH+"/MarketDataApiAck").then(function(e){r.showMdApiAck=e.data.showMdApiAck||!1,r.mdApiAckConfigured=e.data.mdApiAckConfigured||!1},function(e){r.errors=e.data.errors})},a.setOnPageLoad(function(){t.all([(r.isMarketDataFetched=!1,n.fetch(e.SERVER_PATH+"/MarketData").then(function(e){r.marketDataConfigurable=e.data.configurable,r.currentSubscriptions=e.data.currentSubscriptions,r.totalPrice=e.data.totalPrice,r.pendingSubscriptions=e.data.pendingSubscriptions,r.requestedSubscriptions=e.data.requestedSubscriptions,angular.isUndefined(r.requestedSubscriptions)?r.hasRequestedSubscriptions=!1:r.hasRequestedSubscriptions=Object.keys(r.requestedSubscriptions).length>0},function(e){r.errors=e.data.errors}).finally(function(){r.isMarketDataFetched=!0})),n.fetch(e.SERVER_PATH+"/NcQuestionnaire").then(function(e){r.showNCForm=e.data.showNCForm,r.configured=e.data.configured,r.reasons=e.data.reasons},function(e){r.nonCommercialStatusErrors=e.data.errors}),n.fetch(e.SERVER_PATH+"/SubscriberStatus").then(function(e){r.validation=e.data.validation,r.subscriberStatusInfo=e.data.info},function(e){r.subscriberStatusError=e.data.errors}),r.fetchBillableAccounts(),n.fetch(e.SERVER_PATH+"/NpQuestionnaire").then(function(e){r.canModifyNpQuestionnaire=e.data.canModifyNpQuestionnaire,r.processedDate=e.data.processedDate},function(e){r.npQuestionnaireErrors=e.data.errors}),r.fetchMarketDataSnapshot(),r.fetchMarketDataApiAck()]).finally(function(){a.setIsPageLoading(!1)})})}}e.controller("MarketDataSummaryCtrl",t),t.$inject=["$q","ResourceService","PageService"]}},function(e,t){e.exports=function(e){function t(e,t,n,a){var r=this;r.$onInit=function(){r.isSippAdmin=e.getSequenceData().isSippAdmin||!1,r.clientAccountId=e.getSequenceData().clientAccountId||"",r.subscribedServicesByRegion=e.getSequenceData().subscribedServicesByRegion,r.totalPrice=e.getSequenceData().totalPrice,r.pendingServices=e.getSequenceData().pendingServices,r.rejectedServices=e.getSequenceData().rejectedServices,a.finishPendingItem(),e.configureButtons({canGoBack:!1,extraButtons:[{alignment:"right",btnType:"primary",btnText:n.instant("word.ok"),onClick:t.navigateToPrevBreadcrumb}]})}}e.controller("MarketDataCompletionCtrl",t),t.$inject=["DynamicSequenceService","NavigationService","$translate","AmInterfaceService"]}},function(e,t){e.exports=function(e){function t(e,t,n,a,r){var i=this,o=function a(){var r=[];for(var o in i.traderWorkStationSevices)for(var s=0;s<i.traderWorkStationSevices[o].length;s++){(l=i.traderWorkStationSevices[o][s]).requested&&r.push(l)}for(var o in i.alternateDisplayServices)for(s=0;s<i.alternateDisplayServices[o].length;s++){(l=i.alternateDisplayServices[o][s]).requested&&r.push(l)}for(var o in i.nonDisplayServices)for(s=0;s<i.nonDisplayServices[o].length;s++){var l;(l=i.nonDisplayServices[o][s]).requested&&r.push(l)}var c=!!angular.isDefined(i.removeDependentServices)&&i.removeDependentServices;e.stepForward({selectedServices:r,removeDependentServices:c}).catch(function(e){if(e.data&&e.data.customErrors&&e.data.customErrors.length>0)if(e.data.errors&&angular.isDefined(e.data.errors.dependencyError)){var r=e.data.customErrors.join("<br />");o={title:n.instant("word.confirm"),contentClass:"modal-danger",icon:"fa-exclamation-triangle",modalData:{pendingText:r,yesBtnKey:n.instant("word.unsubscribe"),yesBtnType:"primary",noBtnKey:n.instant("word.close"),noSuccessScreen:!0}},t.openConfirmModal(o).then(function(e){"SUCCESS"===e&&(i.removeDependentServices=!0,a())})}else{var o={title:n.instant("word.error"),modalData:{errors:e.data.customErrors}};t.openErrorModal(o)}})};i.$onInit=function(){i.isMobile=a,i.freeServiceClass="border-top panel-body panel-padding collapse",i.arrowClass="text-xl",i.isMobile?i.arrowClass+=" collapsed":i.freeServiceClass+=" show",i.traderWorkStationSevices=e.getSequenceData().traderWorkStationSevices||{},i.alternateDisplayServices=e.getSequenceData().alternateDisplayServices||{},i.nonDisplayServices=e.getSequenceData().nonDisplayServices||{},i.rules=e.getSequenceData().rules,i.whiteBrandedClient=e.getSequenceData().whiteBrandedClient,i.isUserIbkrLite=e.getSequenceData().isUserIbkrLite||!1,i.showMonthEndWarning=e.getSequenceData().showMonthEndWarning,i.eligibleFreeServices=e.getSequenceData().eligibleFreeServices||{},i.defaultServices=e.getSequenceData().defaultServices||{},i.hasSubscriptions=Object.keys(i.traderWorkStationSevices).length>0||Object.keys(i.alternateDisplayServices).length>0||Object.keys(i.nonDisplayServices).length>0,i.getAnnotationText=r.getAnnotationText,i.getServiceNameText=r.getServiceNameText,e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{isDisabled:function(){return!i.hasSubscriptions},onClick:function(){var e;i.showMonthEndWarning?(e={templateUrl:"error-modal.component",modalData:{errors:[n.instant("marketData.warning.monthEndAcknowledgement",{lineBreak:"<br>"})]},buttons:[{alignment:"left",label:"word.cancel",btnClass:"btn-default",fn:t.closeModal},{alignment:"right",label:"word.ok",btnType:"primary",fn:function(){i.showMonthEndWarning=!1,t.closeModal(),o()}}]},t.openWarningModal(e)):o()}}})}}e.controller("MarketDataDetailsCtrl",t),t.$inject=["DynamicSequenceService","ModalService","$translate","IS_MOBILE","DataServicesService"]}},function(e,t){e.exports=function(e){function t(e){var t=this;t.$onInit=function(){t.pendingServices=e.getSequenceData().pendingServices,t.newlyRequestedServices=e.getSequenceData().newlyRequestedServices,t.removedServices=e.getSequenceData().removedServices,t.replacementServiceBean=e.getSequenceData().replacementServiceBean,t.quoteBoosterQuantity=e.getSequenceData().quoteBoosterQuantity,e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{onClick:function(){e.stepForward()}}})}}e.controller("MarketDataReviewCtrl",t),t.$inject=["DynamicSequenceService"]}},function(e,t,n){e.exports=function(e){n(643)(e)}},function(e,t){e.exports=function(e){function t(e,t,n){var a=this;a.$onInit=function(){a.entity=t.getSequenceData().entity,a.rules=t.getSequenceData().rules,a.originalName=t.getSequenceData().originalName,a.questionsByChapter=t.getSequenceData().questionsByChapter,a.userSignature=t.getSequenceData().userSignature,a.nameChangeReason=t.getSequenceData().nameChangeReason,a.nameChangeType=t.getSequenceData().nameChangeType,a.isNdBrokerClient=t.getSequenceData().isNdBrokerClient,a.allowSignatureSubstitutions=t.getSequenceData().allowSignatureSubstitutions,a.mailingAddressSame=!1,t.configureButtons({canGoBack:t.getSequenceData().stepIndex>0,continueBtn:{onClick:function(){if(a.confirmed){a.mailingAddressSame&&(a.entity.mailingAddress=a.entity.address);var r={signatureSubmissionData:a.userSignature.signatureSubmissionData,name:a.entity.name,address:a.entity.address,mailingAddress:a.entity.mailingAddress,employerDetails:a.entity.employerDetails,questionsByChapter:a.questionsByChapter,nameChangeReason:a.nameChangeReason,nameChangeType:a.nameChangeType};a.allowSignatureSubstitutions||(r.signatureSubmissionData.substitutions="");var i=!1;for(var o in r.questionsByChapter){var s=r.questionsByChapter[o];for(var l in s){if(s[l].response){i=!0;break}}if(i)break}i?function(a){var r={title:e.instant("nonProfToProfAlert.heading"),dialogClass:"modal-md",modalData:{pendingText:e.instant("nonProfToProfAlert.text",{paragraphStart:"<p>",paragraphEnd:"</p>",link2369Start:'<a href="https://ibkb.interactivebrokers.com/article/2369" target="_blank">',link2740Start:'<a href="https://ibkb.interactivebrokers.com/article/2740" target="_blank">',linkEnd:"</a>"}),noSuccessScreen:!0,yesBtnKey:"word.ok",noBtnKey:"word.cancel"}};n.openConfirmModal(r).then(function(e){"SUCCESS"===e&&t.stepForward(a)})}(r):t.stepForward(r)}}}})}}e.controller("NpQuestionnnaireCtrl",t),t.$inject=["$translate","DynamicSequenceService","ModalService"]}},function(e,t,n){e.exports=function(e){n(645)(e)}},function(e,t){e.exports=function(e){function t(e,t){var n=this;n.$onInit=function(){n.questionsByChapter=t.getSequenceData().questionsByChapter;var e=window.cancelFn||void 0,a=window.completeFn||void 0,r={canGoBack:t.getSequenceData().stepIndex>0,continueBtn:{onClick:function(){var e={questionsByChapter:n.questionsByChapter};t.stepForward(e).then(function(e){angular.isDefined(e)&&0==Object.keys(e.data.errors).length&&a&&a()})}}};e&&(r.backBtn={onClick:e}),t.configureButtons(r)}}e.controller("NcQuestionnnaireCtrl",t),t.$inject=["$translate","DynamicSequenceService"]}},function(e,t,n){e.exports=function(e){n(647)(e),n(648)(e),n(649)(e)}},function(e,t){e.exports=function(e){function t(e){var t=this;t.$onInit=function(){t.status=e.getSequenceData().subscriberStatus,t.rules=e.getSequenceData().rules,t.requiredNpq=e.getSequenceData().requiredNpq,e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{isDisabled:function(){return t.subscriberStatusForm&&t.subscriberStatusForm.$invalid},onClick:function(){var n={status:t.status};e.stepForward(n)}}})}}e.controller("SubscriberStatusCtrl",t),t.$inject=["DynamicSequenceService"]}},function(e,t){e.exports=function(e){function t(e){this.$onInit=function(){e.configureButtons({continueBtn:{onClick:function(){e.stepForward()}}})}}e.controller("SubscriberStatusNpQuestionnaireCtrl",t),t.$inject=["DynamicSequenceService"]}},function(e,t){e.exports=function(e){function t(t,n){var a=this;a.getAffilationRelationship=function(e){return"OTHER"===e.relationship?e.relationshipOther:t.instant("affiliationRelationship."+e.relationship)},a.$onInit=function(){a.isLoading=!0,n.create(e.SERVER_PATH+"/ProfessionalStatusInfo").then(function(e){a.info=e.data.info,a.hasNpq=Object.keys(a.info.acceptedQuestions).length>0}).finally(function(){a.isLoading=!1})}}e.controller("ProfessionalStatusInfoCtrl",t),t.$inject=["$translate","ResourceService"]}},function(e,t,n){e.exports=function(e){n(651)(e),n(652)(e),n(653)(e),n(654)(e),n(655)(e)}},function(e,t){e.exports=function(e){function t(t,n,a,r,i,o){var s=null;this.$onInit=function(){o.setOnPageLoad(function(){(s=i.create(e.SERVER_PATH+"/DataServiceAuth",{username:r.getUser().username,sessionId:t},!0)).promise.then(function(){var t=o.getCurrentPage().id,r=o.getCurrentPage().pageData,i=e.SERVER_PATH+"/"+t,s={id:o.getCurrentPage().id,serverPath:i,path:e.MARKETDATA_APP_ROOT+"/pages/research/researchSubscriptionSummary.html",breadcrumb:n.REPLACE,pageData:r};a.navigate(s)},function(){s.aborted||o.setIsPageLoading(!1)}).finally(function(){s=null})})},this.$onDestroy=function(){null!==s&&s.cancel()}}e.controller("ResearchSubscriptionAuthCtrl",t),t.$inject=["SESSION_ID","BreadcrumbAction","NavigationService","UserService","ResourceService","PageService"]}},function(e,t){e.exports=function(e){function t(e,t,n,a){var r=this;r.$onInit=function(){r.subscribedServicesByRegion=e.getSequenceData().subscribedServicesByRegion,r.rejectedServices=e.getSequenceData().rejectedServices,r.ibEntity=e.getSequenceData().ibEntity,a.finishPendingItem(),e.configureButtons({canGoBack:!1,continueBtn:{onClick:n.navigateToPrevBreadcrumb,btnText:t.instant("word.ok")}})}}e.controller("ResearchSubscriptionCompletionCtrl",t),t.$inject=["DynamicSequenceService","$translate","NavigationService","AmInterfaceService"]}},function(e,t){e.exports=function(e){function t(e,t,n){var a=this,r=function(){var r=[];angular.isDefined(a.researchBundleService)&&angular.isDefined(a.researchBundleService.selectedService)&&a.researchBundleService.selectedService.requested&&r.push(a.researchBundleService.selectedService.id);for(var i=0;i<a.researchPlatformServices.length;i++){(s=a.researchPlatformServices[i]).requested&&r.push(s.id)}for(i=0;i<a.premiumNewswireServices.length;i++){var o=a.premiumNewswireServices[i];!angular.isUndefined(o.selectedService)&&o.selectedService.requested&&r.push(o.selectedService.id)}for(i=0;i<a.analystServices.length;i++){(s=a.analystServices[i]).requested&&r.push(s.id)}for(i=0;i<a.technicalAnalysisServices.length;i++){(s=a.technicalAnalysisServices[i]).requested&&r.push(s.id)}for(i=0;i<a.separateDataServices.length;i++){(s=a.separateDataServices[i]).requested&&r.push(s.id)}for(i=0;i<a.freeServices.length;i++){(s=a.freeServices[i]).requested&&r.push(s.id)}for(i=0;i<a.thirdPartyServices.length;i++){(s=a.thirdPartyServices[i]).requested&&r.push(s.id)}for(i=0;i<a.marketCommentaryServices.length;i++){var s;(s=a.marketCommentaryServices[i]).requested&&r.push(s.id)}e.stepForward(r).catch(function(e){if(e.data&&e.data.customErrors&&e.data.customErrors.length>0){var a={title:t.instant("word.error"),modalData:{errors:e.data.customErrors}};n.openErrorModal(a)}})},i=function(e,t,n){for(var a=0;a<e.length;a++){var r=e[a];n.indexOf(r.id)<0||(r.requested=t.requested||r.subscribed,r.disabled=t.requested,r.bundleIncluded=t.requested)}};a.$onInit=function(){a.researchBundleService=e.getSequenceData().researchBundleService||void 0,a.researchPlatformServices=e.getSequenceData().researchPlatformServices||[],a.premiumNewswireServices=e.getSequenceData().premiumNewswireServices||[],a.analystServices=e.getSequenceData().analystServices||[],a.separateDataServices=e.getSequenceData().separateDataServices||[],a.technicalAnalysisServices=e.getSequenceData().technicalAnalysisServices||[],a.freeServices=e.getSequenceData().freeServices||[],a.thirdPartyServices=e.getSequenceData().thirdPartyServices||[],a.marketCommentaryServices=e.getSequenceData().marketCommentaryServices||[],a.rules=e.getSequenceData().rules,a.ibEntity=e.getSequenceData().ibEntity,a.getServiceRules=function(e){return a.rules.dataServicesRules[e]},a.onBundleSelection=function(e){for(var t=e.service,n=e.allowedDependentServices,r=0;r<a.premiumNewswireServices.length;r++){var o=a.premiumNewswireServices[r];if(o.allowedServices.length>1){i(o.allowedServices,t,n);for(var s=0;s<o.allowedServices.length;s++){var l=o.allowedServices[s];l.requested&&(o.selectedService=l)}}else{var c=[];c.push(o.selectedService),i(c,t,n)}}i(a.analystServices,t,n),i(a.separateDataServices,t,n),i(a.technicalAnalysisServices,t,n),i(a.freeServices,t,n),i(a.thirdPartyServices,t,n)},a.getPremiumNewswireCount=function(){for(var e=0,t=0;t<a.premiumNewswireServices.length;t++){var n=a.premiumNewswireServices[t];!angular.isUndefined(n.selectedService)&&n.selectedService.requested&&e++}return e},e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{onClick:r}})}}e.controller("ResearchSubscriptionConfigurationCtrl",t),t.$inject=["DynamicSequenceService","$translate","ModalService"]}},function(e,t){e.exports=function(e){function t(e,t){var n=this;n.$onInit=function(){n.pendingServices=e.getSequenceData().pendingServices||[],n.newlyRequestedServices=e.getSequenceData().newlyRequestedServices||[],n.removedServices=e.getSequenceData().removedServices||[],n.replacementServiceBean=e.getSequenceData().replacementServiceBean,n.ibis=e.getSequenceData().ibis,n.ibEntity=e.getSequenceData().ibEntity,n.showAdditionalText=function(){return["UK","IE","CE"].indexOf(n.ibEntity)>-1},n.getIbEntity=function(){return t.instant("ibEntity.shortName."+n.ibEntity)},n.getEntityLegalName=function(){return t.instant("ibEntity.entityLegalName."+n.ibEntity)},e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{onClick:function(){e.stepForward()}}})}}e.controller("ResearchSubscriptionReviewCtrl",t),t.$inject=["DynamicSequenceService","$translate"]}},function(e,t){e.exports=function(e){function t(t,n,a){var r=this;r.$onInit=function(){r.itemSource=e.SERVER_PATH+"/ResearchSubscription/Data",r.fetchThirdPartyProviders=function(){return n.fetch(e.SERVER_PATH+"/ResearchLoginProvider").then(function(e){r.providers=e.data.providers,r.researchLoginConfigurable=e.data.configurable,r.ibEntity=e.data.ibEntity},function(e){r.thirdPartyProviderErrors=e.data.errors})},r.fetchServiceConfigurations=function(){return n.fetch(e.SERVER_PATH+"/ServiceConfigurationProvider").then(function(e){r.serviceConfigurations=e.data.serviceConfigurations},function(e){r.serviceConfigurationProviderErrors=e.data.errors})},r.researchSubscriptionLoad=t.defer(),a.setOnPageLoad(function(){t.all([r.fetchThirdPartyProviders(),r.researchSubscriptionLoad.promise,r.fetchServiceConfigurations()]).finally(function(){a.setIsPageLoading(!1)})})}}e.controller("ResearchSubscriptionSummaryCtrl",t),t.$inject=["$q","ResourceService","PageService"]}},function(e,t){e.exports=function(e){function t(e,t,n){var a=this;a.$onInit=function(){a.accountEntity=t.getSequenceData().accountEntity,a.rules=t.getSequenceData().rules,a.mailingAddressSame=!1,a.getErrors=function(){return t.getSequenceData().errors},t.configureButtons({canGoBack:t.getSequenceData().stepIndex>0,continueBtn:{onClick:function(){a.mailingAddressSame&&(a.accountEntity.mailingAddress=a.accountEntity.address);var r={accountEntity:a.accountEntity};t.stepForward(r).catch(function(t){if(t.data&&t.data.customErrors&&t.data.customErrors.length>0){var a={title:e.instant("word.error"),modalData:{errors:t.data.customErrors}};n.openErrorModal(a)}})}}})}}e.controller("CollectNameAddressCtrl",t),t.$inject=["$translate","DynamicSequenceService","ModalService"]}},function(e,t){e.exports=function(e){function t(t,n,a,r,i,o){var s=this;s.$onInit=function(){s.providers=a.getSequenceData().providers||[],s.username=a.getSequenceData().username,s.email=a.getSequenceData().email,s.contentHost=n,s.errors={},s.configureResearchLogin=function(n){s.fetchingProvider=!0,o.createSession(s.username,function(){var a={title:t.instant("thirdPartyLogin.configure.header",{serviceProvider:n.serviceProviderName}),templateUrl:"research-login-modal.component",dialogClass:"modal-md",modalData:{provider:n,email:s.email}};r.openModal(a).then(function(t){"SUCCESS"===t&&function(t){s.fetchingProvider=!0,i.fetch(e.SERVER_PATH+"/ResearchLoginProvider/Provider",{code:t.serviceCode}).then(function(e){for(var t=e.data.provider,n=-1,a=0;a<s.providers.length;a++)if(s.providers[a].serviceCode==t.serviceCode){n=a;break}s.providers[n]=t}).catch(function(e){}).finally(function(){s.fetchingProvider=!1})}(n)})},void 0,function(){s.fetchingProvider=!1})},s.getServerErrors=function(){return s.errors},a.configureButtons({canGoBack:a.getSequenceData().stepIndex>0,continueBtn:{onClick:function(){s.errors={},a.stepForward().catch(function(e){e.data&&e.data.errors&&(s.errors=e.data.errors)})}}})}}e.controller("ResearchLoginProviderCtrl",t),t.$inject=["$translate","CONTENT_HOST","DynamicSequenceService","ModalService","ResourceService","DataServicesService"]}},function(e,t){e.exports=function(e){function t(e,t,n,a){var r=this;r.$onInit=function(){r.errors={},r.selectedAccountId="",r.username=t.getSequenceData().username,r.serviceConfigurations=t.getSequenceData().serviceConfigurations||[],r.serviceWithMultipleEligibleAccts=t.getSequenceData().serviceWithMultipleEligibleAccts,r.configureServiceAccount=function(e){r.errors={},e.username=r.username,a.configureServiceAccount(e)},r.getServerErrors=function(){return r.errors},t.configureButtons({canGoBack:t.getSequenceData().stepIndex>0,continueBtn:{onClick:function(){r.errors={},t.stepForward({serviceConfigurations:r.serviceConfigurations}).catch(function(e){e.data&&e.data.errors&&(r.errors=e.data.errors)})}}})}}e.controller("ServiceConfigurationProviderCtrl",t),t.$inject=["$translate","DynamicSequenceService","ModalService","ServiceConfigurationService"]}},function(e,t,n){e.exports=function(e){n(660)(e),n(667)(e)}},function(e,t,n){e.exports=function(e){n(661)(e),n(663)(e),n(665)(e)}},function(e,t,n){e.exports=function(e){e.component("targetedDataServiceConfigurationStep",{template:n(662),controller:["$translate","DynamicSequenceService","ModalService",function(e,t,n){var a=this,r=function(){var r=[];for(var i in a.traderWorkStationSevices)for(var o=0;o<a.traderWorkStationSevices[i].length;o++){(s=a.traderWorkStationSevices[i][o]).requested&&r.push(s)}for(var i in a.alternateDisplayServices)for(o=0;o<a.alternateDisplayServices[i].length;o++){(s=a.alternateDisplayServices[i][o]).requested&&r.push(s)}for(var i in a.nonDisplayServices)for(o=0;o<a.nonDisplayServices[i].length;o++){(s=a.nonDisplayServices[i][o]).requested&&r.push(s)}for(o=0;o<a.researchServices.length;o++){var s;(s=a.researchServices[o]).requested&&r.push(s)}t.stepForward(r).catch(function(t){if(t.data&&t.data.customErrors&&t.data.customErrors.length>0){var a={title:e.instant("word.error"),modalData:{errors:t.data.customErrors}};n.openErrorModal(a)}})};a.$onInit=function(){a.traderWorkStationSevices=t.getSequenceData().traderWorkStationSevices||{},a.alternateDisplayServices=t.getSequenceData().alternateDisplayServices||{},a.nonDisplayServices=t.getSequenceData().nonDisplayServices||{},a.marketDataRules=t.getSequenceData().marketDataRules,a.researchServices=t.getSequenceData().researchServices||[],a.researchSubscriptionRules=t.getSequenceData().researchSubscriptionRules,a.getResearchServiceRules=function(e){return a.researchSubscriptionRules.dataServicesRules[e]},t.configureButtons({canGoBack:t.getSequenceData().stepIndex>0,continueBtn:{isDisabled:function(){return!a.marketDataRules&&!a.researchSubscriptionRules},onClick:r}})}}]})}},function(e,t){e.exports='<div page-structure>\n\t<h4>{{ \'marketData.header.configure\' | translate }}</h4>\n\t<p>{{ \'marketData.message.configure\' | translate }}</p>\n\t<br>\n\t<br>\n\t\x3c!-- \n\t\tNo Subscription Warning \n\t--\x3e\n\t<div class="alert alert-warning" ng-if="!$ctrl.marketDataRules && !$ctrl.researchSubscriptionRules">\n\t\t<p>{{ \'marketData.message.eligible\' | translate }}</p>\n\t</div>\n\t\x3c!-- \n\t\tTabs for market data services by type\n\t--\x3e\n    <market-data-type-services ng-if="$ctrl.marketDataRules" trader-work-station-sevices="$ctrl.traderWorkStationSevices" alternate-display-services="$ctrl.alternateDisplayServices" non-display-services="$ctrl.nonDisplayServices" rules="$ctrl.marketDataRules"></market-data-type-services>\n    \x3c!-- \n\t\tResearch Services\n\t--\x3e\n\t<div ng-if="$ctrl.researchSubscriptionRules">\n\t\t<h6 class="subtitle">{{ \'service.type.RESEARCH\' | translate}}</h6>\n\t\t<div class="form-bordered">\n\t\t\t<div class="row" name="{{ service.id }}" ng-repeat="service in $ctrl.researchServices">\n\t\t\t\t<am-form-research-service ng-model="service" rules="$ctrl.getResearchServiceRules(service.id)"></am-form-research-service>\n\t\t\t</div>\n\t\t</div>\n\t\t<br>\n\t</div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("targetedDataServiceReviewStep",{template:n(664),controller:["DynamicSequenceService",function(e){var t=this;t.$onInit=function(){t.pendingServices=e.getSequenceData().pendingServices,t.newlyRequestedServices=e.getSequenceData().newlyRequestedServices,t.removedServices=e.getSequenceData().removedServices,t.quoteBoosterQuantity=e.getSequenceData().quoteBoosterQuantity,e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{onClick:function(){e.stepForward()}}})}}]})}},function(e,t){e.exports='<div page-structure>\n\t\n\t<h4>{{ \'marketData.header.review\' | translate }}</h4>\n\t<p translate=\'marketData.message.review\' translate-value-break-tag="<br />"><p>\n\t<br>\n\t<br>\n\t\x3c!-- \n\t\tNew/Requested services\n\t--\x3e\n\t<requested-data-services ng-if="$ctrl.newlyRequestedServices !== undefined && $ctrl.newlyRequestedServices.length > 0" services="$ctrl.newlyRequestedServices" quote-booster-quantity="$ctrl.quoteBoosterQuantity" ibis="$ctrl.ibis"></requested-data-services>\n\t\x3c!-- \n\t\tPending Services\n\t--\x3e\n\t<pending-data-services ng-if="$ctrl.pendingServices !== undefined && $ctrl.pendingServices.length > 0" services="$ctrl.pendingServices" quote-booster-quantity="$ctrl.quoteBoosterQuantity"></pending-data-services>\n\t\x3c!-- \n\t\tRemoved Services\n\t--\x3e\n\t<removed-data-services ng-if="$ctrl.removedServices !== undefined && $ctrl.removedServices.length > 0" services="$ctrl.removedServices" quote-booster-quantity="$ctrl.quoteBoosterQuantity"></removed-data-services>\n\t\x3c!-- \n\t\tMifid 2 notes \n\t--\x3e\n\t<div class="alert alert-gray">\n\t\t<p>{{ \'marketData.message.mifir\' | translate }}</p>\n\t</div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("targetedDataServiceCompletionStep",{template:n(666),controller:["$translate","DynamicSequenceService","NavigationService","NavigationAction",function(e,t,n,a){var r=this,i=function(){var e={id:"Logout",path:"/AccountManagement/Logout",navigateAction:a.REDIRECT};n.navigate(e)},o=function(){n.navigate({id:"MarketData",path:"market-data-authenticator.component",skipFetch:!0})};r.$onInit=function(){r.subscribedServicesByRegion=t.getSequenceData().subscribedServicesByRegion,r.totalPrice=t.getSequenceData().totalPrice,t.configureButtons({canGoBack:!1,extraButtons:[{alignment:"right",btnText:e.instant("word.manageDataSubscription"),onClick:o},{alignment:"right",btnType:"primary",btnText:e.instant("word.logout"),onClick:i}]})}}]})}},function(e,t){e.exports='<div page-structure>\n    <div align="center">\n    \t<i class="fa fa-3x fa-check-circle text-success form-group"></i>\n    </div>\n    <h1 class="text-center text-success">{{\'word.thankYou\' | translate}}</h1>\n\t<h3 class="text-center text-dark">{{\'marketData.message.completion\' | translate}}</h3>\n    \x3c!-- \n        Subscribed Services\n    --\x3e\n    <subscribed-data-services ng-if="($ctrl.subscribedServicesByRegion | objectLength) > 0" subscribed-services-by-region="$ctrl.subscribedServicesByRegion" total-price="$ctrl.totalPrice"></subscribed-data-services>\n</div>'},function(e,t,n){e.exports=function(e){n(668)(e),n(670)(e)}},function(e,t,n){e.exports=function(e){e.component("marketDataApiAckDetailsStep",{template:n(669),controller:["$translate","DynamicSequenceService",function(e,t){var n=this,a=function(){var e={mdApiTncQuestionnaire:n.mdApiTncQuestionnaire};t.stepForward(e,function(e){n.errors=e.data.errors||void 0})};n.$onInit=function(){n.startIndex=t.getSequenceData().startIndex||0,n.mdApiTncQuestionnaire=t.getSequenceData().mdApiTncQuestionnaire,n.rules=t.getSequenceData().rules,t.configureButtons({canGoBack:t.getSequenceData().stepIndex>0,continueBtn:{onClick:a}})}}]})}},function(e,t){e.exports='<div page-structure ng-form="$ctrl.marketDataApiAckForm">\n    <questionnaire-form name="{{$ctrl.mdApiTncQuestionnaire.name}}" ng-model="$ctrl.mdApiTncQuestionnaire" single-column="true" display-title="true" display-description="true" rules="$ctrl.rules"></questionnaire-form>\n</div>'},function(e,t,n){e.exports=function(e){e.component("marketDataApiAckCompletionStep",{template:n(671),controller:"GenericCompletionStepController"})}},function(e,t){e.exports='<div page-structure>\n    <div align="center">\n        <i class="fa fa-4x fa-check-circle text-success"></i>\n    </div>\n    <h1 class="text-center text-success">{{ \'word.thankYou\' | translate}}</h1>\n    <h3 aria-level="2" class="text-center text-dark">{{ \'marketDataApiAck.saved\' | translate }}</h3>\n</div>'},function(e,t,n){"use strict";var a=angular.module("ibmarketing.entity",[]);a.WEBAPP_ROOT="/entity.webapp",a.AM_SERVER_PATH="/AccountManagement",a.EM_SERVER_PATH="/aces/EntityManagement",n(673)(a),n(751)(a),n(753)(a),n(755)(a),n(775)(a),n(778)(a),n(859)(a)},function(e,t,n){e.exports=function(e){n(674)(e),n(676)(e),n(677)(e),n(678)(e),n(679)(e),n(680)(e),n(681)(e),n(682)(e),n(683)(e),n(684)(e),n(685)(e),n(686)(e),n(688)(e),n(694)(e),n(695)(e),n(696)(e),n(697)(e),n(698)(e),n(699)(e),n(700)(e),n(701)(e),n(703)(e),n(705)(e),n(706)(e),n(707)(e),n(709)(e),n(710)(e),n(711)(e),n(712)(e),n(713)(e),n(715)(e),n(716)(e),n(717)(e),n(719)(e),n(721)(e),n(722)(e),n(724)(e),n(726)(e),n(729)(e),n(731)(e),n(733)(e),n(734)(e),n(736)(e),n(737)(e),n(738)(e),n(739)(e),n(740)(e),n(741)(e),n(743)(e),n(745)(e),n(749)(e)}},function(e,t,n){e.exports=function(e){e.component("accountEntityData",{require:{$itemManipulator:"^^amItemManipulator"},bindings:{removeAssociation:"<?"},template:n(675)(),controller:["$translate","$filter","amEntityNameFilter","NavigationAction","ResourceService","ModalService","NavigationService","EntityService",function(t,n,a,r,i,o,s,l){var c=this;this.$onInit=function(){this.viewAccountEntity=function(e){if(e.viewable){var t={title:a(e),templateUrl:"account-entity-modal.component",dialogClass:"modal-lg",modalData:{accountEntity:e}};o.openModal(t).then(function(e){"SUCCESS"===e&&c.$itemManipulator.itemControl.load({refreshGrid:"Yes"})})}},this.editAccountEntity=function(e){e.editable&&l.editEntity(e)},this.deleteAccountEntity=function(r){if(r.deletable)if(r.trustOwnershipEntity){var l={id:"DeleteTrustOwnershipEntities",title:t.instant("page.title.EditTrustOwnershipEntities"),path:e.WEBAPP_ROOT+"/sequences/trustownership/trustOwnershipSequence.html",pageData:{sequenceType:"/Delete/"+r.entityId},skipFetch:!0};s.navigate(l)}else{var u=r.deletableUsers.length>0,d=t.instant("entity.delete.pending",{entityName:a(r)}),p=t.instant("entity.delete.success",{entityName:a(r)}),g=t.instant("entity.delete.error",{entityName:a(r)});if(u){var f="<ul>";Array.from(r.deletableUsers).forEach(function(e,t){var a=e.credentials.length>0?n("amCredentialType")(e.credentials,"ALIAS"):e.username;f+="<li>"+a+"</li>"}),f+="</ul>",d+="<br>"+t.instant("entity.delete.usersDeleteNote")+f}var m={title:t.instant("modal.title.DeleteAccountEntity"),modalData:{pendingText:d,successText:p,errorText:g,confirmFn:function(){return i.delete(e.AM_SERVER_PATH+"/AccountEntity/"+r.entityId,{removeAssociation:c.removeAssociation,deleteUsers:u}).catch(function(e){return $q.reject(e.data.validationErrors)})}}};o.openConfirmModal(m).then(function(e){"SUCCESS"===e&&c.$itemManipulator.itemControl.load()})}},this.editPerStirpes=function(e){if(c.isIraBeneficiary(e.associationTypes)){var n={title:t.instant("entity.edit.perStirpes.heading",{entityName:a(e)}),templateUrl:"per-stirpes-modal.component",dialogClass:"modal-lg",modalData:{accountEntity:e}};o.openModal(n)}},this.isPendingNomineeRequest=function(e){if("ACTIVE"!==e.status)for(var t in e.associationTypes)if("NOMINEE"===e.associationTypes[t])return!0;return!1},this.viewAccountEntityStatus=function(n){var r={id:"ViewAccountEntityStatus",title:t.instant("page.title.ViewAccountEntityStatus",{entityName:a(n)}),path:e.WEBAPP_ROOT+"/sequences/accountentity/addAccountEntity.html",pageData:{sequenceType:"/ViewNomineeRequest/"+n.pendingRequestId},skipFetch:!0};s.navigate(r)},c.modifyAdditionalNames=function(e){var n={id:"AdditionalName",title:t.instant("page.title.EditAccountEntity",{entityName:a(e)}),path:"additional-name-sequence.component",pageData:{entityId:e.entityId},skipFetch:!0};s.navigate(n)},this.isIraBeneficiary=l.isIraBeneficiary,this.isTrustedContact=l.isTrustedContact,this.$itemManipulator.itemControl.load()}}]})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<loading-overlay ng-if="$ctrl.$itemManipulator.loadInProgress"></loading-overlay><div ng-if="$ctrl.$itemManipulator.entries.length &gt; 0"><div class="row"><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"><br><div class="form-bordered"><div class="row" ng-repeat="accountEntity in $ctrl.$itemManipulator.entries"><div class="col-xs-2 col-sm-1 col-md-1 col-lg-1"><p class="text-center"><am-button btn-type="icon" on-click="$ctrl.viewAccountEntity(accountEntity)" is-disabled="!accountEntity.viewable" btn-icon="fa-info-circle" tooltip-text="{{\'word.info\' | translate}}" tooltip-side="right"></am-button></p></div><div class="col-xs-6 col-sm-9 col-md-9 col-lg-9"><div class="row" ng-if="!$ctrl.isTrustedContact(accountEntity.associationTypes)"><div class="col-xs-12 col-sm-6 col-md-6 col-lg-6"><p><strong>{{accountEntity | amEntityName}}</strong><span class="text-secondary" ng-if="accountEntity.status !== \'ACTIVE\'" translate="word.pending"></span><am-button btn-type="icon" ng-if="$ctrl.isPendingNomineeRequest(accountEntity)" on-click="$ctrl.viewAccountEntityStatus(accountEntity)" btn-icon="fa-exclamation-triangle" tooltip-text="{{\'word.view\' | translate}}"></am-button></p></div><span class="hidden-sm hidden-md hidden-lg"><span class="clearfix"></span></span><div class="col-xs-12 col-sm-6 col-md-6 col-lg-6"><p><span ng-repeat="type in accountEntity.associationTypes">{{\'association.type.\' + type | translate }}{{!$last ? \', \' : \'\'}}</span><span ng-if="$ctrl.isIraBeneficiary(accountEntity.associationTypes)">{{\' (\' + accountEntity.percentageOfOwnership + \'%, \'}}{{\'entity.label.perStirpes\' | translate }}{{\':\'}}{{(accountEntity.perStirpes ? \'word.yes\' : \'word.no\') | translate}}{{\')\'}}</span></p></div></div><div class="row" ng-if="$ctrl.isTrustedContact(accountEntity.associationTypes)"><div class="col-xs-12 col-sm-6 col-md-6 col-lg-6"><p><strong>{{accountEntity | amEntityName}}</strong><span class="text-secondary" ng-if="accountEntity.status !== \'ACTIVE\'" translate="word.pending"></span></p></div><span class="hidden-sm hidden-md hidden-lg"><span class="clearfix"></span></span><div class="col-xs-12 col-sm-2 col-md-2 col-lg-2"><p ng-if="accountEntity.relationship !== \'NONE\'"><span>{{ \'relationship.type.\' + accountEntity.relationship | translate }}</span></p></div><span class="hidden-sm hidden-md hidden-lg"><span class="clearfix"></span></span><div class="col-xs-6 col-sm-2 col-md-2 col-lg-2"><p><span>{{ accountEntity.phoneNumbers[0].phoneNumber }}</span></p></div><div class="col-xs-6 col-sm-2 col-md-2 col-lg-2"><p><span>{{ accountEntity.emailAddress }}</span></p></div></div></div><div class="col-xs-4 col-sm-2 col-md-2 col-lg-2"><p><span class="btn-group-right"><am-button btn-type="icon" ng-if="!accountEntity.employeeTrack || accountEntity.editable" on-click="$ctrl.editAccountEntity(accountEntity)" btn-icon="fa-pencil-alt" is-disabled="!accountEntity.editable" tooltip-text="{{::accountEntity.editable ? (\'word.edit\' | translate) : \'\'}}"></am-button><am-button ng-if="accountEntity.modifyAdditionalNames" btn-type="icon" on-click="$ctrl.modifyAdditionalNames(accountEntity)" btn-icon="fa-address-card" tooltip-text="{{\'word.modifyAdditionalNames\' | translate}}" tooltip-side="right"></am-button><am-button ng-if="$ctrl.isIraBeneficiary(accountEntity.associationTypes)" btn-type="icon" on-click="$ctrl.editPerStirpes(accountEntity)" btn-icon="fa-address-card" is-disabled="accountEntity.status === \'PENDING_CREATE\'" tooltip-text="{{\'entity.label.perStirpes\' | translate}}" tooltip-side="right"></am-button><am-button btn-type="icon" ng-if="!accountEntity.employeeTrack" on-click="$ctrl.deleteAccountEntity(accountEntity)" btn-icon="fa-times" is-disabled="!accountEntity.deletable" tooltip-text="{{::accountEntity.deletable ? (\'word.delete\' | translate) : \'\'}}"></am-button></span></p></div></div></div></div></div><pagination-controls></pagination-controls></div><div ng-if="$ctrl.$itemManipulator.entries.length === 0"><div ng-if="!$ctrl.$itemManipulator.manipulator.trustedContactRules"><br><div class="alert-no-results"><p>{{\'entity.noResults\' | translate}}</p></div></div><h4 ng-if="$ctrl.$itemManipulator.manipulator.trustedContactRules">{{\'trustedContact.noContact\' | translate}}</h4><br></div>'}},function(e,t){e.exports=function(e){e.component("linkedEntityData",{require:{$itemManipulator:"^^amItemManipulator"},templateUrl:e.WEBAPP_ROOT+"/components/linkedentities/linkedEntityData.html",controller:["$translate","amEntityNameFilter","NavigationAction","ResourceService","ModalService","NavigationService","EntityService",function(t,n,a,r,i,o,s){var l=this;this.$onInit=function(){this.viewLinkedEntity=function(e){var t={title:n(e),templateUrl:"account-entity-modal.component",dialogClass:"modal-lg",modalData:{accountEntity:e}};i.openModal(t)},this.editLinkedEntity=function(e){if(e.editable){var t={id:"EditLinkedEntity",path:"template/page/entity/linkedEntitySequence.html",pageData:{sequenceType:"/Edit/"+e.entityId+"/"+l.$itemManipulator.manipulator.mainEntity.entityId},skipFetch:!0};o.navigate(t)}},this.deleteLinkedEntity=function(a){if(a.deletable){var o=t.instant("entity.delete.pending",{entityName:n(a)}),s=t.instant("entity.delete.success",{entityName:n(a)}),c=t.instant("entity.delete.error",{entityName:n(a)}),u={title:t.instant("modal.title.DeleteAccountEntity"),modalData:{pendingText:o,successText:s,errorText:c,confirmFn:function(){return r.delete(e.AM_SERVER_PATH+"/LinkedEntity/"+a.entityId).catch(function(e){return $q.reject(e.data.validationErrors)})}}};i.openConfirmModal(u).then(function(e){"SUCCESS"===e&&l.$itemManipulator.itemControl.load()})}},this.getRespectiveAssociationTypes=function(e){for(var t=[],n=0;n<e.linkedEntities.length;++n){e=e.linkedEntities[n];if(this.$itemManipulator.manipulator.mainEntity.entityId==e.mainEntityId){for(var a=0;a<e.associations.length;++a){var r=e.associations[a].type;t.push(r)}break}}return t},this.$itemManipulator.itemControl.load()}}]})}},function(e,t){e.exports=function(e){e.component("linkedEntityAssociations",{bindings:{linkedEntity:"<",mainEntity:"<",rules:"<",associations:"=ngModel"},require:{formServerErrorsCtrl:"^^?formServerErrors"},templateUrl:e.WEBAPP_ROOT+"/components/linkedentities/linkedEntityAssociations.html",controller:["$filter",function(e){var t=this;function n(n){t.existingNonAllowedAssociations=[],t.existingAllowedAssociations=[],angular.forEach(n,function(n){0!=e("filter")(t.rules.allowedAssociations,{type:n.type}).length?t.existingAllowedAssociations.push(n):t.existingNonAllowedAssociations.push(n)}),t.maxAssociations=t.rules.maxAssociations+t.existingNonAllowedAssociations.length}t.$onInit=function(){t.associations=t.associations||[],t.maxAssociations=t.rules.maxAssociations,n(t.associations),t.model={},t.titles={},t.isDisabled=function(n){return!(0==e("filter")(t.existingAllowedAssociations,{type:n}).length)||(!!function(e){for(var n=0;n<t.rules.requiredAssociations.length;n++)if(t.rules.requiredAssociations[n].type===e)return!0;return!1}(n)||t.associations.length>=t.maxAssociations&&!t.model[n])},t.onAssociationChanged=function(e){for(var n=-1,a=0;a<t.associations.length;a++){if(t.associations[a].type===e.type){n=a;break}}t.model[e.type]?n<0&&t.associations.push(e):n>-1&&t.associations.splice(n,1)},t.isAnyAllowedAssociationSelected=function(){for(var e=0;e<t.rules.allowedAssociations.length;e++){var n=t.rules.allowedAssociations[e];if(1==t.model[n.type])return!0}return!1},t.getServerErrors=function(){return t.formServerErrorsCtrl&&t.formServerErrorsCtrl.getServerErrors()||{}};for(var a=0;a<t.rules.allowedAssociations.length;a++)for(var r=t.rules.allowedAssociations[a],i=0;i<t.associations.length;i++){if(t.associations[i].type===r.type){t.model[r.type]=!0;break}}},t.$onChanges=function(e){if(e.linkedEntity&&angular.isDefined(e.linkedEntity.currentValue)&&angular.isDefined(e.linkedEntity.previousValue)){var a=e.linkedEntity.currentValue,r=e.linkedEntity.previousValue;angular.isDefined(a.entityId)&&angular.isDefined(r.entityId)&&a.entityId!=r.entityId&&(t.model={},n(t.associations),t.associations.length=0,angular.forEach(t.existingNonAllowedAssociations,function(e){t.associations.push(e)}))}}}]})}},function(e,t){e.exports=function(e){e.component("amFormAdditionalAssociations",{bindings:{associations:"=ngModel",rules:"<"},require:{formServerErrorsCtrl:"^^?formServerErrors"},templateUrl:e.WEBAPP_ROOT+"/components/association/additionalAssociationForm.html",controller:function(){var e=this;e.$onInit=function(){e.associations=e.associations||[],e.model={},e.titles={},e.onAssociationChanged=function(t){for(var n=-1,a=0;a<e.associations.length;a++){if(e.associations[a].type===t.type){n=a;break}}e.model[t.type]?n<0&&e.associations.push(t):n>-1&&e.associations.splice(n,1)},e.getServerErrors=function(){return e.formServerErrorsCtrl&&e.formServerErrorsCtrl.getServerErrors()||{}};for(var t=0;t<e.rules.allowedAssociations.length;t++)for(var n=e.rules.allowedAssociations[t],a=0;a<e.associations.length;a++){if(e.associations[a].type===n.type){e.model[n.type]=!0;break}}}}})}},function(e,t){e.exports=function(e){e.component("entityAccountAssociationReview",{bindings:{entity:"<"},templateUrl:e.WEBAPP_ROOT+"/components/association/entityAccountAssociationReview.html",controller:["$q","EntityService",function(e,t){var n=this;n.getLinkedEntity=function(e){for(var t=0;t<n.linkedEntities.length;t++){var a=n.linkedEntities[t];if(a.entityId===e)return a}return null},n.$onInit=function(){n.inboundLinks=function(){for(var e=[],t=0;t<n.entity.linkedEntities.length;t++){var a=n.entity.linkedEntities[t];a.secondaryEntityId===n.entity.entityId&&e.push(a)}return e}(),n.showAccountAssociations=n.entity.associations.length>0,n.linkedEntities=[],function(){for(var a=[],r=0;r<n.entity.linkedEntities.length;r++){var i=n.entity.linkedEntities[r];i.secondaryEntityId===n.entity.entityId&&a.push(t.fetchEntity(i.mainEntityId).then(function(e){n.linkedEntities.push(e.data.entity)}))}e.all(a)}()}}]})}},function(e,t){e.exports=function(e){e.component("amFormAuthorizedSigner",{require:{parentForm:"^^form"},bindings:{authorizedSigner:"=ngModel"},templateUrl:e.WEBAPP_ROOT+"/components/authorizedsigner/authorizedSignerForm.html"})}},function(e,t){e.exports=function(e){e.component("amFormBankReferenceAddress",{bindings:{address:"=ngModel",countries:"<"},templateUrl:e.WEBAPP_ROOT+"/components/bankreference/bankReferenceAddressForm.html"})}},function(e,t){e.exports=function(e){e.component("amFormBankReference",{require:{parentForm:"^^form"},bindings:{bankReference:"=ngModel",rules:"<"},templateUrl:e.WEBAPP_ROOT+"/components/bankreference/bankReferenceForm.html"})}},function(e,t){e.exports=function(e){e.component("bankReferenceReview",{bindings:{bankDetails:"<"},templateUrl:e.WEBAPP_ROOT+"/components/bankreference/bankReferenceReview.html"})}},function(e,t){e.exports=function(e){e.component("citizenshipInfoForm",{require:{parentForm:"^^form"},bindings:{citizenshipInfo:"=ngModel",originalPrimaryCitizenship:"<",allowedCountries:"<",maxCitizenships:"<?"},templateUrl:e.WEBAPP_ROOT+"/components/citizenship/citizenshipInfoForm.html",controller:function(){var e=this,t=function(t){for(var n=-1,a=0;a<e.allowedCountries.length;a++){if(e.allowedCountries[a].alpha3===t.alpha3){n=a;break}}e.allowedCountries.splice(n,1)};e.$onInit=function(){for(var n in e.citizenshipInfo=e.citizenshipInfo||{},e.otherCitizenships=e.citizenshipInfo.otherCitizenships||[],e.maxCitizenships=e.maxCitizenships||3,e.originalPrimaryCitizenship?(t(e.citizenshipInfo.primaryCitizenship),e.primaryCitizenshipAllowedCountries=[e.citizenshipInfo.primaryCitizenship]):e.primaryCitizenshipAllowedCountries=e.allowedCountries,e.isAddDisabled=function(){return e.otherCitizenships.length>0&&!e.otherCitizenships[e.otherCitizenships.length-1]},e.addCitizenship=function(){e.otherCitizenships.length>0?(t(e.otherCitizenships[e.otherCitizenships.length-1]),e.parentForm["countryOfCitizenship_"+(e.otherCitizenships.length-1)].$setPristine()):(t(e.citizenshipInfo.primaryCitizenship),e.primaryCitizenshipAllowedCountries=[e.citizenshipInfo.primaryCitizenship]),e.otherCitizenships.push(void 0)},e.removeCitizenship=function(t){var n=e.otherCitizenships.indexOf(t);n===e.otherCitizenships.length-1?angular.isDefined(e.otherCitizenships[n-1])&&e.allowedCountries.push(e.otherCitizenships[n-1]):e.allowedCountries.push(t),e.otherCitizenships.splice(n,1),0===e.otherCitizenships.length&&e.allowedCountries.push(e.citizenshipInfo.primaryCitizenship),angular.isUndefined(e.originalPrimaryCitizenship)&&(e.primaryCitizenshipAllowedCountries=e.allowedCountries)},e.otherCitizenships)t(n)}}})}},function(e,t){e.exports=function(e){e.component("citizenshipInfoReview",{bindings:{citizenshipInfo:"<"},templateUrl:e.WEBAPP_ROOT+"/components/citizenship/citizenshipInfoReview.html",controller:["$translate","CountryService",function(e,t){var n=this;n.$onInit=function(){n.countryOfCitizenshipLabel=function(){var a=angular.isDefined(n.citizenshipInfo.primaryCitizenship)&&t.isGreaterChinaCountry(n.citizenshipInfo.primaryCitizenship)?"citizenship.label.primaryRegion":"citizenship.label.primaryCountry";return e.instant(a)}}}]})}},function(e,t,n){e.exports=function(e){e.component("electionConsentForm",{bindings:{consent:"=ngModel"},template:n(687),controller:["CONTENT_HOST",function(e){var t=this;t.$onInit=function(){if(angular.isUndefined(t.consent))throw"Invalid argument passed to election consent form component!";t.contentHost=e}}]})}},function(e,t){e.exports='<div ng-if="::$ctrl.consent.type === \'KHR_CONSENT\'">\n\t<p translate="consent.khr.message" translate-values="{startLinkTag: \'<a href=&quot;https://\' + $ctrl.contentHost + \'/Universal/servlet/Registration_v2.formSampleView?formdb=4529&quot; target=&quot;_new&quot;>\', endLinkTag: \'</a>\'}"></p>\n\t<div class="row">\n\t\t<div class="col-xs-2 col-sm-1 col-md-1 col-lg-1">\n\t\t\t<p class="text-center">\n\t\t\t\t<input name="consent" type="radio" i-check ng-model="$ctrl.consent.consented" ng-value="{{true}}" required />\n\t\t\t</p>\n\t\t</div>\n\t\t<div class="col-xs-10 col-sm-11 col-md-11 col-lg-11">\n\t\t\t<p>{{\'consent.khr.agree\' | translate }}</p>\n\t\t</div>\n\t</div>\n\t<div class="row">\n\t\t<div class="col-xs-2 col-sm-1 col-md-1 col-lg-1">\n\t\t\t<p class="text-center">\n\t\t\t\t<input name="consent" type="radio" i-check ng-model="$ctrl.consent.consented" ng-value="{{false}}" required />\n\t\t\t</p>\n\t\t</div>\n\t\t<div class="col-xs-10 col-sm-11 col-md-11 col-lg-11">\n\t\t\t<p>{{\'consent.khr.disagree\' | translate }}</p>\n\t\t</div>\n\t</div>\n</div>'},function(e,t,n){e.exports=function(e){n(689)(e),n(690)(e),n(691)(e),n(692)(e),n(693)(e)}},function(e,t){e.exports=function(e){e.component("emirCategorisationForm",{require:{parentForm:"^^form"},bindings:{emirInfo:"=ngModel",rules:"<",serverErrors:"<?"},templateUrl:e.WEBAPP_ROOT+"/components/emir/emirCategorisationForm.html",controller:["ResourceService",function(t){var n=this,a=function(e){for(var t=-1,a=0;a<n.allowedSubCategories.length;a++){if(n.allowedSubCategories[a]===e){t=a;break}}n.allowedSubCategories.splice(t,1)},r=function(){if(angular.isDefined(n.emirInfo.subCategories)){for(var e=[],t=0;t<n.emirInfo.subCategories.length;t++){var r=n.emirInfo.subCategories[t];n.allowedSubCategories.indexOf(r)>=0&&e.push(r)}if(n.emirInfo.subCategories=e,n.emirInfo.subCategories.length>1)for(t=0;t<n.emirInfo.subCategories.length-1;t++){r=n.emirInfo.subCategories[t];a(r)}else 0==n.emirInfo.subCategories.length&&n.emirInfo.subCategories.push(void 0)}};n.$onInit=function(){n.categoryChanged=function(){var a,i;angular.isUndefined(n.emirInfo)||angular.isUndefined(n.emirInfo.category)?n.allowedSubCategories=[]:(a=n.emirInfo.category,i={category:a},t.create(e.AM_SERVER_PATH+"/EmirUtil/Subcategories",i).then(function(e){var t=e.data;n.allowedSubCategories=t.subCategories||[],angular.isUndefined(n.emirInfo.subCategories)||0==n.emirInfo.subCategories.length?(n.emirInfo.subCategories=[],n.emirInfo.subCategories.push(void 0)):r()}).catch(function(e){}))},n.getMaxSubcategories=function(){return angular.isDefined(n.emirInfo)&&angular.isDefined(n.emirInfo.category)?"NFC_MINUS"===n.emirInfo.category||"NFC_PLUS"===n.emirInfo.category?3:1:0},n.showAddRemoveBlock=function(){if(n.getMaxSubcategories()>1)return!0},n.addSubCategory=function(){n.emirInfo.subCategories.length>0&&(a(n.emirInfo.subCategories[n.emirInfo.subCategories.length-1]),n.parentForm["subCategory_"+(n.emirInfo.subCategories.length-1)].$setPristine()),n.emirInfo.subCategories.push(void 0)},n.removeSubCategory=function(e){var t=n.emirInfo.subCategories.indexOf(e);t===n.emirInfo.subCategories.length-1?angular.isDefined(n.emirInfo.subCategories[t-1])&&n.allowedSubCategories.push(n.emirInfo.subCategories[t-1]):n.allowedSubCategories.push(e),n.emirInfo.subCategories.splice(t,1)},n.isAddDisabled=function(){return n.emirInfo.subCategories.length>0&&!n.emirInfo.subCategories[n.emirInfo.subCategories.length-1]},n.collectCategory=function(){return!(!n.rules.categoryChangeAllowed&&!angular.isUndefined(n.emirInfo.category))},n.collectCommercialActivity=function(){return!(angular.isUndefined(n.emirInfo)||angular.isUndefined(n.emirInfo.category)||angular.isUndefined(n.emirInfo.electsReporting))&&("NFC_PLUS"===n.emirInfo.category?n.emirInfo.electsReporting:"NFC_MINUS"===n.emirInfo.category)},n.isSubCategoryRequired=function(){return!(angular.isUndefined(n.emirInfo)||angular.isUndefined(n.emirInfo.category)||angular.isUndefined(n.emirInfo.electsReporting))&&(-1!=["FC_MINUS","FC_PLUS","NFC_PLUS"].indexOf(n.emirInfo.category)?n.emirInfo.electsReporting:"NFC_MINUS"===n.emirInfo.category)}}}]})}},function(e,t){e.exports=function(e){e.component("leiApplicationForm",{require:{parentForm:"^^form"},bindings:{registrationInfo:"=ngModel",rules:"<"},templateUrl:e.WEBAPP_ROOT+"/components/emir/leiApplicationForm.html",controller:["LeiService","$translate","$filter",function(e,t,n){var a=this;a.getLeiInputMask=function(){return"'alias': 'latin', 'mask': '*{20}'"},a.getLegalFormDisplay=function(e){var t=e.fullForm;return e.shortForm!==e.id+""&&(t+=" ["+e.shortForm+"]"),e.fullForm!==e.description&&(t+=" - "+e.description),t},a.addressChanged=function(e){"country"!==e&&"state"!==e||angular.isDefined(a.registrationInfo)&&angular.isDefined(a.registrationInfo.address.country)&&(i(a.registrationInfo.address.country,a.registrationInfo.address.state,"allowedAuthorityTypes",a.registrationInfo),"country"===e&&(a.collectNativeAddress=angular.isDefined(r()),a.collectNativeLegalName=a.collectNativeAddress))},a.directParentAddressChanged=function(e){"country"!==e&&"state"!==e||angular.isDefined(a.registrationInfo)&&angular.isDefined(a.registrationInfo.directParent.address)&&angular.isDefined(a.registrationInfo.directParent.address.country)&&i(a.registrationInfo.directParent.address.country,a.registrationInfo.directParent.address.state,"allowedDPAuthorityTypes",a.registrationInfo.directParent)},a.ultimateParentAddressChanged=function(e){"country"!==e&&"state"!==e||angular.isDefined(a.registrationInfo)&&angular.isDefined(a.registrationInfo.ultimateParent.address)&&angular.isDefined(a.registrationInfo.ultimateParent.address.country)&&i(a.registrationInfo.ultimateParent.address.country,a.registrationInfo.ultimateParent.address.state,"allowedUPAuthorityTypes",a.registrationInfo.ultimateParent)},a.getRegAuthorityHelpSubId=function(){if(angular.isDefined(a.registrationInfo)&&angular.isDefined(a.registrationInfo.registrationAuthority)){var e=a.registrationInfo.registrationAuthority.code;if(-1!=["RA000013","RA000014","RA000017","RA000072","RA000487","RA000548-02","RA000549","RA000585"].indexOf(e))return e}return""},a.registrationAuthorityChanged=function(){angular.isDefined(a.registrationInfo)&&angular.isDefined(a.registrationInfo.registrationAuthority)&&angular.isDefined(a.registrationInfo.address.country)?o(a.registrationInfo.address.country,a.registrationInfo.address.state,a.registrationInfo.registrationAuthority,"allowedLegalFormTypes",a.registrationInfo):(a.allowedLegalFormTypes=[],angular.isDefined(a.registrationInfo)&&delete a.registrationInfo.legalForm)},a.parentLeiTypeChanged=function(e){if(angular.isDefined(a.registrationInfo)&&angular.isDefined(a.registrationInfo[e])&&angular.isDefined(a.registrationInfo[e].parentLeiType)&&"LEGAL_WITH_LEI"===a.registrationInfo[e].parentLeiType){a.registrationInfo[e].accountingPeriod=a.registrationInfo[e].accountingPeriod||{};var t=a.registrationInfo[e].accountingPeriod;angular.isUndefined(t.minimum)&&(t.minimum=l()),angular.isUndefined(t.maximum)&&(t.maximum=s())}},a.$onInit=function(){a.collectNativeAddress=angular.isDefined(r()),a.collectNativeLegalName=a.collectNativeAddress},a.getNativeLegalNameRules=function(){var e=r();if(angular.isDefined(e))return e.legalNameRules},a.getNativeAddressRules=function(){var e=r();if(angular.isDefined(e))return e.addressRules},a.getLanguageName=function(){return t.instant("languageName."+a.getNativeAddressRules().inputLanguage)};var r=function(){if(angular.isDefined(a.registrationInfo)&&angular.isDefined(a.registrationInfo.address.country)){var e=a.registrationInfo.address.country.alpha3;if(angular.isDefined(a.rules)&&angular.isDefined(a.rules.leiNativeInfoCountryRules)){var t=a.rules.leiNativeInfoCountryRules[e];if(angular.isDefined(t))return t}}},i=function(t,n,r,i){e.fetchRegistrationAuthorities(t,n).then(function(e){if(a[r]=e.authorities||[],angular.isDefined(e.authorities)&&e.authorities.length&&angular.isDefined(i.registrationAuthority)&&null!==i.registrationAuthority)for(var t=0;t<e.authorities.length;++t)if(e.authorities[t].code===i.registrationAuthority.code){i.registrationAuthority=e.authorities[t];break}})},o=function(t,n,r,i,o){angular.isUndefined(r)?a[i]=[]:e.fetchLegalForms(t,n,r).then(function(e){if(a[i]=e.legalForms||[],angular.isDefined(e.legalForms)&&e.legalForms.length&&angular.isDefined(o.legalForm)&&null!==o.legalForm)for(var t=0;t<e.legalForms.length;++t)if(e.legalForms[t].id===o.legalForm.id){o.legalForm=e.legalForms[t];break}})},s=function(){var e=new Date((new Date).getFullYear(),11,31);return n("date")(e,"yyyy-MM-dd")},l=function(){var e=new Date((new Date).getFullYear(),0,1);return n("date")(e,"yyyy-MM-dd")}}]})}},function(e,t){e.exports=function(e){e.component("leiApplicationReview",{bindings:{registrationInfo:"<"},templateUrl:e.WEBAPP_ROOT+"/components/emir/leiApplicationReview.html",controller:function(){this.getLegalFormDisplay=function(e){var t=e.fullForm;return e.shortForm!==e.id+""&&(t+=" ["+e.shortForm+"]"),e.fullForm!==e.description&&(t+=" - "+e.description),t}}})}},function(e,t){e.exports=function(e){e.component("emirCategorisationReview",{bindings:{emirInfo:"<"},templateUrl:e.WEBAPP_ROOT+"/components/emir/emirCategorisationReview.html",controller:function(){var e=this;e.$onInit=function(){e.collectCommercialActivity=function(){return!(angular.isUndefined(e.emirInfo)||angular.isUndefined(e.emirInfo.category)||angular.isUndefined(e.emirInfo.electsReporting))&&("NFC_PLUS"===e.emirInfo.category?e.emirInfo.electsReporting:"NFC_MINUS"===e.emirInfo.category)}}}})}},function(e,t){e.exports=function(e){e.component("fundManagerWarning",{template:['<div class="row">','    <div class="col-xs-12 col-lg-12 col-md-12 col-sm-12">','        <p ng-bind-html="$ctrl.warning | renderHTML"></p>',"    </div>","</div>"].join(""),controller:["ModalService",function(e){var t=this;t.$onInit=function(){t.warning=e.getModalData().warning}}]})}},function(e,t){e.exports=function(e){e.component("amFormEmployerDetails",{require:{parentForm:"^^form"},bindings:{employerDetails:"=ngModel",rules:"<"},templateUrl:e.WEBAPP_ROOT+"/components/employerdetails/employerDetailsForm.html",controller:["EntityService","$translate",function(e,t){var n=this;n.$onInit=function(){n.employerDetails=n.employerDetails||{},n.collectEmploymentDetails=e.collectEmploymentDetails,n.collectBasicEmploymentDetails=e.collectBasicEmploymentDetails,n.originalEmployerDetails=angular.copy(n.employerDetails),n.nlCode=n.rules.inputLanguage;var a=function(){n.employerDetails.employer=n.rules.orgEmployerDetails.employer,n.employerDetails.employerWebsite=n.rules.orgEmployerDetails.employerWebsite,n.employerDetails.employeeTitle=n.rules.orgEmployerDetails.employeeTitle,n.employerDetails.employerAddress=n.rules.orgEmployerDetails.employerAddress,n.employerDetails.employerPhone=n.rules.orgEmployerDetails.employerPhone};n.onEmpOfAcctHolderUpdate=function(){if(n.employerDetails.empOfAcctHolder)a();else{var e=angular.copy(n.employerDetails.employmentType);n.employerDetails=angular.copy(n.originalEmployerDetails),n.employerDetails.employmentType=e,n.employerDetails.empOfAcctHolder=!1}},n.onTypeChange=function(){n.collectBasicEmploymentDetails(n.employerDetails.employmentType)?n.employerDetails={employmentType:n.employerDetails.employmentType,employer:n.employerDetails.employer,employeeTitle:n.employerDetails.employeeTitle,empOfAcctHolder:!1}:n.collectEmploymentDetails(n.employerDetails.employmentType)||(n.employerDetails={employmentType:n.employerDetails.employmentType,empOfAcctHolder:!1})},n.empOfAcctHolderLabel=function(){return t.instant("individual.label.employer.empOfAcctHolder",{acctHolder:n.rules.orgEmployerDetails.employer})},angular.isDefined(n.employerDetails.empOfAcctHolder)&&n.employerDetails.empOfAcctHolder&&a()}}]})}},function(e,t){e.exports=function(e){e.component("employerDetailsReview",{bindings:{employer:"<"},templateUrl:e.WEBAPP_ROOT+"/components/employerdetails/employerDetailsReview.html"})}},function(e,t){e.exports=function(e){e.component("amFormEmployerBusiness",{require:{parentForm:"^^form"},bindings:{employerDetails:"=ngModel",employerRules:"<"},templateUrl:e.WEBAPP_ROOT+"/components/employerdetails/employerBusinessForm.html",controller:["orderByTranslatedFilter","EntityService","ResourceService",function(t,n,a){var r=this;r.$onInit=function(){r.allowedEmployerBusinesses=t(r.employerRules.allowedEmployerBusinesses),r.employerDetails=r.employerDetails||{},r.occupations=[],r.isExtendedBusinessRequired=n.isExtendedBusinessRequired,r.isOtherOccupationRequired=n.isOtherOccupationRequired,r.getOccupationText=n.getOccupationText,r.nlCode=r.employerRules.inputLanguage,r.onEmployerBusinessChange=function(){r.isExtendedBusinessRequired(r.employerDetails.employerBusiness)||(r.employerDetails.extendedEmployerBusiness=void 0),r.employerDetails.employerBusiness,a.fetch(e.AM_SERVER_PATH+"/Employer/Occupations",{employerBusiness:r.employerDetails.employerBusiness}).then(function(e){var t=e.data;r.occupations=t.occupations||[]}).catch(function(e){r.fetchOccupationErrors=e.data.fetchOccupationErrors})},r.onOccupationChange=function(){angular.isDefined(r.employerDetails.occupationDetails)&&!r.isOtherOccupationRequired(r.employerDetails.occupationDetails)&&(r.employerDetails.occupation=void 0)}}}]})}},function(e,t){e.exports=function(e){e.component("employerBusinessReview",{bindings:{employer:"<"},templateUrl:e.WEBAPP_ROOT+"/components/employerdetails/employerBusinessReview.html",controller:["EntityService",function(e){var t=this,n=function(){return!!e.isExtendedBusinessRequired(t.employer.employerBusiness)&&(angular.isDefined(t.employer.extendedEmployerBusiness)&&t.employer.extendedEmployerBusiness.length>0)};t.$onInit=function(){t.isEmployerBusinessRequired=!!n()||!angular.isUndefined(t.employer.employerBusiness)&&0!==t.employer.employerBusiness.length&&"UNKNOWN"!==t.employer.employerBusiness&&"OTHER"!==t.employer.employerBusiness,t.isExtendedBusinessRequired=n(),!angular.isUndefined(t.employer.occupationDetails)&&(0!==t.employer.occupationDetails.id||angular.isDefined(t.employer.occupation)&&t.employer.occupation.length>0)&&(t.occupationText=e.getOccupationText(t.employer.occupationDetails))}}]})}},function(e,t){e.exports=function(e){e.component("amFormEntityAddresses",{require:{parentForm:"^^form"},bindings:{entity:"<",rules:"<",mailingAddressRule:"<",mailingAddressSame:"=",legalResidenceRules:"<?"},templateUrl:e.WEBAPP_ROOT+"/components/entityaddresses/entityAddressesForm.html",controller:function(){var e=this;e.$onInit=function(){e.nlCode=e.rules.inputLanguage,e.mailingAddressSame=angular.equals(e.entity.address,e.entity.mailingAddress)||angular.isUndefined(e.entity.mailingAddress),e.checkDefinedAndEqual=function(e,t){return angular.isDefined(t)&&angular.isDefined(e)&&angular.equals(t,e)},e.sameCountryOfLegalResidence=e.checkDefinedAndEqual(e.entity.countryOfLegalResidence,e.entity.address.country),e.sameStateOfLegalResidence=e.sameCountryOfLegalResidence&&e.checkDefinedAndEqual(e.entity.stateOfLegalResidence,e.entity.address.state);var t=angular.isDefined(e.legalResidenceRules)&&null!==e.legalResidenceRules;e.isStateRequired=function(){return!angular.isUndefined(e.entity.countryOfLegalResidence)&&-1!==e.legalResidenceRules.countriesWithLegalState.indexOf(e.entity.countryOfLegalResidence.alpha3)},e.onBaseCountryOrStateChange=function(n){t&&("country"===n?e.sameCountryOfLegalResidence=e.checkDefinedAndEqual(e.entity.countryOfLegalResidence,e.entity.address.country):"state"===n&&(e.sameStateOfLegalResidence=e.sameCountryOfLegalResidence&&e.checkDefinedAndEqual(e.entity.stateOfLegalResidence,e.entity.address.state)))},e.assignLegalCountry=function(){e.sameCountryOfLegalResidence?e.entity.countryOfLegalResidence=e.entity.address.country:e.entity.countryOfLegalResidence=void 0,e.sameStateOfLegalResidence=!1,e.entity.stateOfLegalResidence=void 0},e.assignLegalState=function(){e.sameStateOfLegalResidence?e.entity.stateOfLegalResidence=e.entity.address.state:e.entity.stateOfLegalResidence=void 0},e.isLegalStateAndCountryAllowed=function(){return!!t&&(!angular.isUndefined(e.entity.address.country)&&!angular.isUndefined(e.entity.address.state))}}}})}},function(e,t){e.exports=function(e){e.component("amFormEntityName",{bindings:{entity:"<",rules:"<",isDisabled:"<?"},template:function(){var e="";return e+='<am-form-individual-name ng-if="$ctrl.entity.entityType === \'INDIVIDUAL\'" ng-model="$ctrl.entity.name" rules="$ctrl.rules.nameRules"></am-form-individual-name>',e+='<am-form-input ng-if="$ctrl.entity.entityType === \'LEGAL_ENTITY\'" name="legalEntityName" ng-model="$ctrl.entity.legalEntityName" type="text" label-text="{{\'entity.label.name.LEGAL_ENTITY\' | translate}}" maxlength="120" input-nl-code="{{$ctrl.nlCode}}" is-disabled="$ctrl.isDisabled" required></am-form-input>',e+='<am-form-input ng-if="$ctrl.entity.entityType === \'ORG\'" name="organizationName" ng-model="$ctrl.entity.organizationName" type="text" label-text="{{\'entity.label.name.ORG\' | translate}}" input-nl-code="{{$ctrl.nlCode}}" required></am-form-input>',e+='<am-form-input ng-if="$ctrl.entity.entityType === \'TRUST\'" name="trustName" ng-model="$ctrl.entity.trustName" type="text" label-text="{{\'entity.label.name.TRUST\' | translate}}" input-nl-code="{{$ctrl.nlCode}}" required is-disabled="$ctrl.isDisabled"></am-form-input>',e},controller:function(){var e=this;e.$onInit=function(){e.nlCode=e.entity.nativeDetails.inputLanguage}}})}},function(e,t){e.exports=function(e){e.component("amFormIndividualName",{require:{parentForm:"^^form"},bindings:{individualName:"=ngModel",originalName:"<?",rules:"<",nameChangeReason:"=?",nameChangeType:"=?",fieldPrefix:"<?"},templateUrl:e.WEBAPP_ROOT+"/components/entityname/individual/individualNameForm.html",controller:["LanguageService",function(e){var t=this,n=function(){var e=t.originalName.first.length>0&&!angular.equals(t.originalName.first,t.individualName.first),n=t.originalName.last.length>0&&!angular.equals(t.originalName.last,t.individualName.last);return e||n};t.$onInit=function(){t.individualName||(t.individualName={}),t.fieldPrefix=t.fieldPrefix||"",t.nlCode=t.rules.inputLanguage,t.maxFirstNameLength=t.rules.maxFirstNameLength||18,t.maxLastNameLength=t.rules.maxLastNameLength||50,t.maxMiddleNameLength=t.rules.maxMiddleNameLength||50,t.isChinese=function(){return e.isChineseInput(t.nlCode)},t.isNameChangeReasonRequired=function(){return angular.isDefined(t.originalName)&&n(t.originalName,t.individualName)&&angular.isDefined(t.rules.allowedNameChangeTypes)&&-1!==t.rules.allowedNameChangeTypes.indexOf("OTHER")},t.isNameChangeTypeRequired=function(){return angular.isDefined(t.originalName)&&n(t.originalName,t.individualName)&&angular.isDefined(t.rules.allowedNameChangeTypes)&&-1===t.rules.allowedNameChangeTypes.indexOf("OTHER")}}}]})}},function(e,t,n){e.exports=function(e){e.component("amFormIdentifications",{require:{parentForm:"^^form"},bindings:{identifications:"=ngModel",rules:"<"},template:n(702),controller:["$translate",function(e){var t=this;t.$onInit=function(){t.identifications=t.identifications||[],0===t.identifications.length&&t.identifications.push({amlRequired:!0}),t.getAllowedIdTypes=function(e){return angular.isDefined(t.allowedIdentificationTypes[e])&&t.allowedIdentificationTypes[e].length>0?t.allowedIdentificationTypes[e]:t.rules.allowedIdTypes[0]},t.isSubIdRequired=function(e){var n=t.getIdCountryRules(e);return!(angular.isUndefined(n)||!angular.isArray(n.subIdRequiredStates)||0===n.subIdRequiredStates.length)&&(!angular.isUndefined(e.idState)&&null!==e.idState&&-1!==n.subIdRequiredStates.indexOf(e.idState.isoCode))},t.getExpirationDesc=function(n){var a=t.getIdCountryRules(n);return angular.isDefined(a)&&a.expirationDateRequired?"":e.instant("identification.label.optionalExpirationDate")},t.getIdTypeRules=function(e){var n=e.idType;return angular.isUndefined(n)?{}:t.rules.identificationTypeRules[n]},t.getIdCountryRules=function(e){var n=e.idType,a=e.idCountry;return angular.isUndefined(n)||angular.isUndefined(a)?{}:t.getIdTypeRules(e).identificationCountryRules[a.alpha3]},t.onCountryChange=function(e){var n=t.getIdCountryRules(e);n.idStateRequired||delete e.idState,n.subIdAllowed||delete e.subId},function(){if(t.allowedIdentificationTypes={},t.identifications.length<t.rules.allowedIdTypes.length)for(var e=0;e<t.rules.allowedIdTypes.length-t.identifications.length;e++)t.identifications.push({});angular.forEach(t.rules.allowedIdTypes,function(e,n){for(var a=!1,r=0;r<t.identifications.length;r++)angular.isDefined(t.allowedIdentificationTypes[r])||(e.indexOf(t.identifications[r].idType)>-1||(!angular.isDefined(t.identifications[r].idType)||""===t.identifications[r].idType)&&!a)&&(t.allowedIdentificationTypes[r]=e,a=!0)})}()}}]})}},function(e,t){e.exports='<h6 class="subtitle">{{\'entity.header.identification\' | translate}}</h6>\n<br>\n<div data-private ng-repeat="identification in $ctrl.identifications">\n    \x3c!-- ID Type --\x3e\n    <am-form-select name="{{\'idType_\' + $index}}" ng-model="identification.idType" options="$ctrl.getAllowedIdTypes($index)" label-text="{{\'identification.label.idType\' | translate}}" option-key="\'identification.type.\'" is-required="true"></am-form-select>\n    <div ng-if="identification.idType">\n        \x3c!-- ID Country --\x3e\n        <am-form-country-select name="{{\'idCountry_\' + $index}}" ng-model="identification.idCountry" countries="$ctrl.getIdTypeRules(identification).allowedCountries" label-text="{{\'identification.label.idCountry\' | translate}}" model-listener="$ctrl.onCountryChange(identification)" is-required="true"></am-form-country-select>\n        \x3c!-- ID State --\x3e\n        <am-form-state-select ng-if="$ctrl.getIdCountryRules(identification).idStateRequired" name="{{\'idState_\' + $index}}" ng-model="identification.idState"  country-model="identification.idCountry" label-text="{{\'identification.label.idState\' | translate}}" is-required="true"></am-form-state-select>\n        \x3c!-- ID Number --\x3e\n        <am-form-input name="{{\'idNumber_\' + $index}}" ng-model="identification.idNumber" label-text="{{\'identification.label.idNumber\' | translate}}" is-required="true" obfuscate="true"></am-form-input>\n        \x3c!-- Sub Id --\x3e\n        <am-form-input ng-if="$ctrl.getIdCountryRules(identification).subIdAllowed" name="{{\'subId_\' + $index}}" ng-model="identification.subId" label-text="{{\'identification.label.subId.\' + identification.idType | translate}}" is-required="$ctrl.isSubIdRequired(identification)"></am-form-input>\n        \x3c!-- Expiration Date --\x3e\n        <am-form-date name="{{\'expirationDate_\' + $index}}" ng-model="identification.expirationDate" label-text="{{\'identification.label.expirationDate\' | translate}}" label-desc="{{$ctrl.getExpirationDesc(identification)}}" is-required="$ctrl.getIdCountryRules(identification).expirationDateRequired" ng-if="$ctrl.getIdCountryRules(identification).expirationDateAllowed"></am-form-date>\n    </div>\n    <hr ng-if="!$last"/>\n</div>'},function(e,t,n){e.exports=function(e){e.component("identificationsReview",{bindings:{identifications:"<",displayStyle:"<?"},template:n(704)})}},function(e,t){e.exports='<div ng-if="$ctrl.displayStyle !== \'SIMPLIFIED_CENTER\'">\n    <h6 class="subtitle" ng-if="$ctrl.identifications.length > 0">{{\'entity.header.identification\' | translate}}</h6>\n    <div data-private ng-repeat="identification in $ctrl.identifications">\n        \x3c!-- ID Type --\x3e\n        <am-form-label ng-if="identification.idType !== \'UNKNOWN\'" label-text="{{\'identification.label.idType\' | translate}}" value-text="{{\'identification.type.\' + identification.idType | translate}}"></am-form-label>\n        \x3c!-- Country --\x3e\n        <am-form-label ng-if="identification.idCountry" label-text="{{\'identification.label.idCountry\' | translate}}" value-text="{{(\'country.\' + identification.idCountry.alpha3) | translate}}"></am-form-label>\n        \x3c!-- State --\x3e\n        <am-form-label ng-if="identification.idState.dbName && identification.idState.dbName.length > 1" label-text="{{\'identification.label.idState\' | translate}}" value-text="{{identification.idState.dbName}}"></am-form-label>\n        \x3c!-- ID Number --\x3e\n        <am-form-private-label ng-if="identification.idNumber" data-private label-text="\'identification.label.idNumber\' | translate" value-text="identification.idNumber"></am-form-private-label>\n        \x3c!-- Sub ID Number --\x3e\n        <am-form-label ng-if="identification.subId" label-text="{{\'identification.label.rtaNumber\' | translate}}" value-text="{{identification.subId}}"></am-form-label>\n        \x3c!-- Expiration Date --\x3e\n        <am-form-label ng-if="identification.expirationDate" label-text="{{\'identification.label.expirationDate\' | translate}}" value-text="{{identification.expirationDate}}"> </am-form-label>\n        <hr ng-if="!$last" />\n    </div>\n</div>\n<div ng-if="$ctrl.displayStyle === \'SIMPLIFIED_CENTER\'" ng-repeat="identification in $ctrl.identifications">\n    \x3c!-- ID Type --\x3e\n    <div class="row" ng-if="identification.idType !== \'UNKNOWN\'">\n        <div class="col-6 text-right">\n            <p>{{\'identification.label.idType\' | translate}}:</p>\n        </div>\n        <div class="col-6">\n            <p>{{\'identification.type.\' + identification.idType | translate}}</p>\n        </div>\n    </div>\n    \x3c!-- Country --\x3e\n    <div class="row" ng-if="identification.idCountry">\n        <div class="col-6 text-right">\n            <p>{{\'identification.label.idCountry\' | translate}}:</p>\n        </div>\n        <div class="col-6">\n            <p>{{(\'country.\' + identification.idCountry.alpha3) | translate}}</p>\n        </div>\n    </div>\n    \x3c!-- State --\x3e\n    <div class="row" ng-if="identification.idState.dbName && identification.idState.dbName.length > 1">\n        <div class="col-6 text-right">\n            <p>{{\'identification.label.idState\' | translate}}:</p>\n        </div>\n        <div class="col-6">\n            <p>{{identification.idState.dbName}}</p>\n        </div>\n    </div>\n    \x3c!-- ID Number --\x3e\n    <div class="row" ng-if="identification.idNumber">\n        <div class="col-6 text-right">\n            <p>{{\'identification.label.idNumber\' | translate}}:</p>\n        </div>\n        <div class="col-6">\n            <p>{{identification.idNumber}}</p>\n        </div>\n    </div>\n    \x3c!-- Sub ID Number --\x3e\n    <div class="row" ng-if="identification.subId">\n        <div class="col-6 text-right">\n            <p>{{\'identification.label.rtaNumber\' | translate}}:</p>\n        </div>\n        <div class="col-6">\n            <p>{{identification.subId}}</p>\n        </div>\n    </div>\n    \x3c!-- Expiration Date --\x3e\n    <div class="row" ng-if="identification.expirationDate">\n        <div class="col-6 text-right">\n            <p>{{\'identification.label.expirationDate\' | translate}}:</p>\n        </div>\n        <div class="col-6">\n            <p>{{identification.expirationDate}}</p>\n        </div>\n    </div>\n    <hr ng-if="!$last" />\n</div>'},function(e,t){e.exports=function(e){e.component("amFormIndianKycInfo",{bindings:{indianKycInfo:"=ngModel",rules:"<"},templateUrl:e.WEBAPP_ROOT+"/components/indiankycinfo/indianKycInfoForm.html"})}},function(e,t){e.exports=function(e){e.component("indianKycInfoReview",{bindings:{indianKycInfo:"<"},templateUrl:e.WEBAPP_ROOT+"/components/indiankycinfo/indianKycInfoReview.html"})}},function(e,t,n){e.exports=function(e){e.component("individualEntityForm",{require:{parentForm:"^^form"},bindings:{individual:"=ngModel",rules:"<",hideHeader:"<?"},template:n(708),controller:["EntityService",function(e){var t=this;t.$onInit=function(){t.hideHeader=t.hideHeader||!1,t.mailingAddressSame=!1,t.showAssociations=e.showAssociations(t.individual)}}]})}},function(e,t){e.exports='<h4 ng-if="::!$ctrl.hideHeader">{{\'entity.header.details\' | translate}}</h4>\r\n<br />\r\n<entity-account-association-review ng-if="::$ctrl.showAssociations" entity="$ctrl.individual"></entity-account-association-review>\r\n\r\n<h6 class="subtitle">{{\'individual.label.personalInformation\' | translate}}</h6>\r\n\x3c!-- Name --\x3e\r\n<am-form-individual-name ng-if="::$ctrl.rules.nameRules" ng-model="$ctrl.individual.name" rules="$ctrl.rules.nameRules"></am-form-individual-name>\r\n\r\n\x3c!-- Percentage of Ownership --\x3e\r\n<am-form-input data-private ng-if="::$ctrl.rules.percentageOfOwnershipRequired" name="percentageOfOwnership" ng-model="$ctrl.individual.percentageOfOwnership" label-text="{{\'entity.label.percentageOfOwnership\' | translate}}" input-mask-alias="am_percentage" is-required="true"></am-form-input>\r\n\r\n\x3c!-- Marital Status --\x3e\r\n<am-form-select data-private ng-if="::$ctrl.rules.allowedMaritalStatuses.length" name="maritalStatus" ng-model="$ctrl.individual.maritalStatus" label-text="{{\'individual.label.maritalStatus\' | translate}}" options="$ctrl.rules.allowedMaritalStatuses" option-key="\'maritalStatus.type.\'" required></am-form-select>\r\n\r\n\x3c!-- Dependents --\x3e\r\n<am-form-select data-private ng-if="::$ctrl.rules.allowedDependents.length" name="dependents" ng-model="$ctrl.individual.dependents" label-text="{{\'individual.label.dependents\' | translate}}" options="$ctrl.rules.allowedDependents" no-translate="true" hide-empty-option="true" required></am-form-select>\r\n\r\n\x3c!-- Gender --\x3e\r\n<am-form-select data-private ng-if="::$ctrl.rules.allowedGenders.length" name="gender" ng-model="$ctrl.individual.gender" label-text="{{\'individual.label.gender\' | translate}}" options="$ctrl.rules.allowedGenders" option-key="\'genderType.\'"></am-form-select>\r\n\r\n\x3c!-- Date of Birth --\x3e\r\n<am-form-date data-private ng-if="::$ctrl.rules.birthRules && $ctrl.rules.birthRules.dobRequired" name="dob" ng-model="$ctrl.individual.dob" label-text="{{\'individual.label.dob\' | translate}}" is-required="true"></am-form-date>\r\n\r\n\x3c!-- Country of Birth --\x3e\r\n<am-form-country-select data-private ng-if="::$ctrl.rules.birthRules && $ctrl.rules.birthRules.cobRequired" name="countryOfBirth" ng-model="$ctrl.individual.countryOfBirth" label-text="{{\'individual.label.countryOfBirth\' | translate}}" countries="$ctrl.rules.birthRules.allowedCountriesOfBirth" is-required="true"></am-form-country-select>\r\n\r\n\x3c!-- Name at Birth --\x3e\r\n<am-form-input data-private ng-if="::$ctrl.rules.birthRules && $ctrl.rules.birthRules.nameAtBirthRequired" name="nameAtBirth" ng-model="$ctrl.individual.nameAtBirth" label-text="{{\'individual.label.nameAtBirth\' | translate}}" maxlength="200" is-required="true"></am-form-input>\r\n\r\n\x3c!-- City of Birth --\x3e\r\n<am-form-input data-private ng-if="::$ctrl.rules.birthRules && $ctrl.rules.birthRules.cityOfBirthRequired" name="cityOfBirth" ng-model="$ctrl.individual.cityOfBirth" label-text="{{\'individual.label.cityOfBirth\' | translate}}" maxlength="50" is-required="true"></am-form-input>\r\n\r\n\x3c!-- Mother Maiden First Name --\x3e\r\n<am-form-input data-private ng-if="$ctrl.rules.motherMaidenNameRules" name="motherMaidenFirstName" ng-model="$ctrl.individual.motherMaidenFirstName" label-text="{{\'individual.label.motherMaidenFirstName\' | translate}}" maxlength="{{$ctrl.rules.motherMaidenNameRules.maxFirstNameLength}}" required></am-form-input>\r\n\x3c!-- Mother Maiden Last Name --\x3e\r\n<am-form-input data-private ng-if="$ctrl.rules.motherMaidenNameRules" name="motherMaidenName" ng-model="$ctrl.individual.motherMaidenName" label-text="{{\'individual.label.motherMaidenName\' | translate}}" maxlength="{{$ctrl.rules.motherMaidenNameRules.maxLastNameLength}}" required></am-form-input>\r\n\r\n\x3c!-- Additional Names --\x3e\r\n<am-form-additional-names ng-if="::$ctrl.rules.additionalNamesRules" ng-model="$ctrl.individual.additionalNames" rules="$ctrl.rules.additionalNamesRules"></am-form-additional-names>\r\n\r\n\x3c!-- Email Address --\x3e\r\n<am-form-email name="emailAddress" ng-if="::$ctrl.rules.emailRequired" ng-model="$ctrl.individual.emailAddress" is-required="true" maxlength="256"></am-form-email>\r\n\r\n\x3c!-- Citizenship Info --\x3e\r\n<citizenship-info-form ng-if="::$ctrl.rules.allowedCountriesOfCitizenship.length" ng-model="$ctrl.individual.citizenshipInfo" allowed-countries="$ctrl.rules.allowedCountriesOfCitizenship"></citizenship-info-form>\r\n\r\n\x3c!-- Address --\x3e\r\n<am-form-entity-addresses ng-if="$ctrl.rules.addressRules" entity="$ctrl.individual" rules="$ctrl.rules.addressRules" mailing-address-rule="$ctrl.rules.mailingAddressRules" mailing-address-same="$ctrl.mailingAddressSame"></am-form-entity-addresses>\r\n\r\n\x3c!-- Phone Number Information --\x3e\r\n<am-form-phone-numbers ng-if="$ctrl.rules.phoneRules" ng-model="$ctrl.individual.phoneNumbers" rules="$ctrl.rules.phoneRules"></am-form-phone-numbers>\r\n\r\n\x3c!-- Employer Information --\x3e\r\n<am-form-employer-details ng-if="$ctrl.rules.employerRules" ng-model="$ctrl.individual.employerDetails" rules="$ctrl.rules.employerRules"></am-form-employer-details>\r\n\r\n\x3c!-- Identification Details --\x3e\r\n<am-form-identifications ng-if="::$ctrl.rules.identificationRules" ng-model="$ctrl.individual.identifications" rules="::$ctrl.rules.identificationRules"></am-form-identifications>\r\n\r\n\x3c!-- Tax Id Information --\x3e\r\n<am-form-tax-ids ng-if="$ctrl.rules.taxIdRules" ng-model="$ctrl.individual.taxIds" rules="$ctrl.rules.taxIdRules" legacy-id="{{::$ctrl.legacyId}}" legacy-id-type="{{::$ctrl.legacyIdType}}"></am-form-tax-ids>\r\n\r\n\x3c!-- Sources of Wealth --\x3e\r\n<sources-of-wealth-form ng-if="::$ctrl.rules.sowRules" ng-model="$ctrl.individual.sourcesOfWealth" rules="$ctrl.rules.sowRules" employment-type="$ctrl.individual.employerDetails.employmentType"></sources-of-wealth-form>\r\n\r\n\x3c!-- Per Stirpes --\x3e\r\n<am-form-switch ng-if="::$ctrl.rules.perStirpesRequired" name="perStirpes" ng-model="$ctrl.individual.perStirpes" label-text="{{\'entity.label.perStirpes\' | translate}}"></am-form-switch>'},function(e,t){e.exports=function(e){e.component("amFormItalianAdditionalInfo",{bindings:{italianAdditionalInfo:"=ngModel",countryOfBirth:"<"},templateUrl:e.WEBAPP_ROOT+"/components/italianadditionalinfo/italianAdditionalInfoForm.html"})}},function(e,t){e.exports=function(e){e.component("italianAdditionalInfoReview",{bindings:{italianAdditionalInfo:"<"},templateUrl:e.WEBAPP_ROOT+"/components/italianadditionalinfo/italianAdditionalInfoReview.html"})}},function(e,t){e.exports=function(e){e.component("legalEntityForm",{require:{parentForm:"^^form"},bindings:{entity:"=ngModel",rules:"<",associatedIndividual:"<"},templateUrl:e.WEBAPP_ROOT+"/components/legalentity/legalEntityForm.html",controller:["EntityService",function(e){var t=this;t.$onInit=function(){t.mailingAddressSame=!1,t.isEstate=t.entity.relationship&&"ESTATE"===t.entity.relationship,t.showAssociations=e.showAssociations(t.entity)}}]})}},function(e,t){e.exports=function(e){e.component("decisionMakersForm",{require:{parentForm:"^^form"},bindings:{decisionMakerIndividuals:"<",decisionMakerAlgorithms:"<",allowedIndividuals:"<",allowedCountries:"<",existingAlgorithms:"<",serverErrors:"<"},templateUrl:e.WEBAPP_ROOT+"/components/mifir/decisionMakersForm.html",controller:["amEntityNameFilter",function(e){var t=this,n=function(e){for(var n=-1,a=0;a<t.allowedIndividuals.length;a++){if(t.allowedIndividuals[a].entityId===e.entityId){n=a;break}}t.allowedIndividuals.splice(n,1)},a=function(e){for(var n=-1,a=0;a<t.existingAlgorithms.length;a++){if(t.existingAlgorithms[a].entityId===e.entityId){n=a;break}}t.existingAlgorithms.splice(n,1)};t.getIndividualName=function(t){return e(t)},t.getAlgorithmName=function(e){return e.algorithmName},t.getAlgorithmNameInputMask=function(){return'"mask":"*{80}","placeholder":"","definitions":{"*":{"validator":"[0-9a-zA-Z ]"}}'},t.$onInit=function(){t.decisionMakerIndividuals=t.decisionMakerIndividuals||[],t.maxDecisionMakerIndividuals=t.allowedIndividuals.length,t.getCurrentDecisionMakerIndividual=function(){return this.decisionMakerIndividuals[this.decisionMakerIndividuals.length-1]},t.isAddDisabled=function(){if(0==t.allowedIndividuals.length)return!0;var e=t.getCurrentDecisionMakerIndividual();return!!angular.isUndefined(e)||(!e.individual||!e.branchCountry||!this.parentForm["decisionMaker_"+(this.decisionMakerIndividuals.length-1)].$valid)},t.addDecisionMakerIndividual=function(){if(t.decisionMakerIndividuals.length>0){var e=t.getCurrentDecisionMakerIndividual();angular.isDefined(e)&&angular.isDefined(e.individual)&&n(e.individual),t.parentForm["decisionMaker_"+(t.decisionMakerIndividuals.length-1)].$setPristine()}t.decisionMakerIndividuals.push(void 0)},t.removeDecisionMakerIndividual=function(e){var n=t.decisionMakerIndividuals.indexOf(e);n===t.decisionMakerIndividuals.length-1?angular.isDefined(t.decisionMakerIndividuals[n-1])&&t.allowedIndividuals.push(t.decisionMakerIndividuals[n-1].individual):t.allowedIndividuals.push(e.individual),t.decisionMakerIndividuals.splice(n,1)},0===t.decisionMakerIndividuals.length&&t.addDecisionMakerIndividual();for(var e=0;e<t.decisionMakerIndividuals.length-1;e++){var r=t.decisionMakerIndividuals[e];angular.isDefined(r)&&angular.isDefined(r.individual)&&n(r.individual)}var i=t.getCurrentDecisionMakerIndividual();if(i&&i.individual)for(e=0;e<t.allowedIndividuals.length;e++){var o=t.allowedIndividuals[e];if(o.entityId===i.individual.entityId){i.individual=o;break}}t.decisionMakerAlgorithms=t.decisionMakerAlgorithms||[],t.getCurrentDecisionMakerAlgorithm=function(){return this.decisionMakerAlgorithms[this.decisionMakerAlgorithms.length-1]},t.isAddAlgorithmDisabled=function(){var e=t.getCurrentDecisionMakerAlgorithm();return!!angular.isUndefined(e)||(!e.algorithm||!e.algorithm.algorithmName||!this.parentForm["decisionMakerAlgorithm_"+(this.decisionMakerAlgorithms.length-1)].$valid)},t.addDecisionMakerAlgorithm=function(){if(t.decisionMakerAlgorithms.length>0){var e=t.getCurrentDecisionMakerAlgorithm();angular.isDefined(e)&&angular.isDefined(e.algorithm)&&a(e.algorithm),t.parentForm["decisionMakerAlgorithm_"+(t.decisionMakerAlgorithms.length-1)].$setPristine()}t.decisionMakerAlgorithms.push(void 0)},t.removeDecisionMakerAlgorithm=function(e){var n,a=t.decisionMakerAlgorithms.indexOf(e);a===t.decisionMakerAlgorithms.length-1?angular.isDefined(t.decisionMakerAlgorithms[a-1])&&(n=t.decisionMakerAlgorithms[a-1].algorithm).entityId&&n.entityId>0&&t.existingAlgorithms.push(t.decisionMakerAlgorithms[a-1].algorithm):(n=e.algorithm).entityId&&n.entityId>0&&t.existingAlgorithms.push(e.algorithm);t.decisionMakerAlgorithms.splice(a,1)},t.updateDefault=function(e){for(var n=0;n<t.decisionMakerAlgorithms.length;n++){var a=t.decisionMakerAlgorithms[n];angular.isDefined(a)&&a!=e&&(a.defaultDecisionMaker=!1)}for(n=0;n<t.decisionMakerIndividuals.length;n++){a=t.decisionMakerIndividuals[n];angular.isDefined(a)&&a!=e&&(a.defaultDecisionMaker=!1)}},0===t.decisionMakerAlgorithms.length&&t.addDecisionMakerAlgorithm();for(e=0;e<t.decisionMakerAlgorithms.length-1;e++){var s=t.decisionMakerAlgorithms[e];angular.isDefined(s)&&angular.isDefined(s.algorithm)&&a(s.algorithm)}}}]})}},function(e,t,n){e.exports=function(e){e.component("mifirIdentifierForm",{require:{parentForm:"^^form"},bindings:{mifirIdentifiers:"=ngModel",rules:"<",serverErrors:"<",hideHeader:"<?"},template:n(714),controller:["$translate","translateMultiLoader",function(e,t){var n=this;n.$onInit=function(){var a;n.isTranslationLoaded=!1,t.addLoader("MifirValidationTextLoader",{}),e.refresh().then(function(){n.isTranslationLoaded=!0}),n.hideHeader=n.hideHeader||!1,n.hasMifirIdentifier=[],angular.forEach(n.mifirIdentifiers,function(e,t){for(var a=0;a<e.length;a++)n.hasMifirIdentifier[a]="N.A."!==e[a].idNumber}),n.displayNoDocumentText=(a=!0,angular.forEach(n.rules,function(e,t){a=a&&e.required}),a),n.getExpirationDesc=function(t){return angular.isDefined(t)&&t.expirationDateRequired?"":e.instant("identification.label.optionalExpirationDate")},n.onIdentifierChanged=function(e,t){e.idNumber=e.idNumber.toUpperCase(),n.parentForm[e.idType].$setValidity("invalid_format",new RegExp(t).test(e.idNumber))},n.onSwitchChanged=function(e,t){n.hasMifirIdentifier[t]?e.idNumber="N.A."!==e.idNumber?e.idNumber:"":(e.idNumber="N.A.",delete e.expirationDate,n.parentForm[e.idType].$setValidity("invalid_format",!0),n.parentForm[e.idType].$setPristine())},n.getLabelText=function(t){return"UNKNOWN"===t.idType?t.overriddenIdName:"GRC"===t.idCountry.alpha3&&"TAX_ID"===t.idType?e.instant("mifir.identifier.DSS"):e.instant("identification.type."+t.idType)},n.getHelpText=function(t){if("UNKNOWN"===t.idType||angular.isUndefined(t.idCountry)||angular.isUndefined(t.idCountry.alpha3))return"";var n="mifirValidationText."+t.idType+"."+t.idCountry.alpha3,a=e.instant(n);return a!==n?a:""},n.getIdCountryRules=function(e,t){if(angular.isUndefined(e)||angular.isUndefined(t)||angular.isUndefined(e.idType))return{};var a=n.rules[e.idType];return angular.isUndefined(a)?{}:a.idTypeRules.identificationCountryRules[t]}}}]})}},function(e,t){e.exports='<h6 ng-hide="$ctrl.hideHeader" class="subtitle">{{ \'mifir.identifier.header\' | translate }}</h6>\n<br />\n<p>{{ \'mifir.identifier.message\' | translate }}</p>\n<ul>\n\t<li translate="mifir.identifier.notes.document"></li>\n\t<li ng-if="::!$ctrl.displayNoDocumentText" translate="mifir.identifier.notes.noDocument"></li>\n</ul>\n<br>\n<div ng-repeat="(country, identifiers) in $ctrl.mifirIdentifiers">\n\t<am-form-label label-text="{{ \'mifir.identifier.label.citizenship\' | translate }}" value-text="{{ (\'country.\' + country) | translate }}"></am-form-label>\n\n\t<div ng-repeat="identifier in identifiers" >\n\t\t<div ng-if="$ctrl.isTranslationLoaded" class="alert alert-info">\n\t\t\t<p>{{ \'mifir.label.validation\' | translate }}</p>\n\t\t\t<p ng-bind-html="$ctrl.getHelpText(identifier) | renderHTML"></p>\n\t\t</div>\n\t\t<am-form-input name="{{identifier.idType}}" ng-model="identifier.idNumber" label-text="{{ $ctrl.getLabelText(identifier) }}" server-errors="$ctrl.serverErrors" is-disabled="!$ctrl.hasMifirIdentifier[$index]" is-required="$ctrl.hasMifirIdentifier[$index]" maxlength="30" obfuscate="true"></am-form-input>\n\t\t<am-form-date name="{{\'mifirExpirationDate_\' + $index}}" ng-model="identifier.expirationDate" label-text="{{\'identification.label.expirationDate\' | translate}}" label-desc="{{$ctrl.getExpirationDesc($ctrl.rules[identifier.idType].idTypeRules.identificationCountryRules[country])}}" server-errors="$ctrl.serverErrors" is-disabled="!$ctrl.hasMifirIdentifier[$index]" is-required="$ctrl.getIdCountryRules(identifier,country).expirationDateRequired"  ng-if="$ctrl.getIdCountryRules(identifier,country).expirationDateAllowed"></am-form-date>\n        <am-form-switch ng-if="::!$ctrl.rules[identifier.idType].required" ng-model="$ctrl.hasMifirIdentifier[$index]" model-listener="$ctrl.onSwitchChanged(identifier, $index)" label-text="{{ \'mifir.identifier.label.hasDocument\' | translate }}"></am-form-switch>\n\t</div>\n</div>\n'},function(e,t){e.exports=function(e){e.component("nfaMembership",{require:{parentForm:"^^form"},bindings:{nfaMembership:"=ngModel",labelText:"@?",entityId:"<"},template:function(){var e="";return e+='<am-form-switch ng-model="$ctrl.nfaMembership.registered" model-listener="$ctrl.onSwitchChange" label-text="{{ $ctrl.getLabelText() }}"></am-form-switch>',e+='<am-form-input ng-if="$ctrl.nfaMembership.registered" " name="nfaNumber" ng-model="$ctrl.nfaMembership.nfaNumber" type="text" label-text="{{\'ocr.individual.label.nfaNumber\' | translate}}" is-required="true"></am-form-input>',e},controller:["$translate",function(e){var t=this;t.$onInit=function(){angular.isUndefined(t.nfaMembership)&&(t.nfaMembership={entityId:t.entityId,registered:!1}),t.onSwitchChange=function(){t.nfaMembership.registered||(t.nfaMembership.nfaNumber="")},t.getLabelText=function(){return angular.isDefined(t.labelText)?t.labelText:e.instant("ocr.individual.label.nfaRegistered")}}}]})}},function(e,t){e.exports=function(e){e.component("amFormPhoneNumbers",{require:{parentForm:"^^form"},bindings:{phoneNumbers:"=ngModel",rules:"<",maxNumbers:"<?",singleRowVersion:"<?"},templateUrl:e.WEBAPP_ROOT+"/components/phonenumber/phoneNumberForm.html",controller:["EntityService",function(e){var t=this,n=function(e){var n=t.phoneTypesPool.indexOf(e);t.phoneTypesPool.splice(n,1)};t.$onInit=function(){t.phoneNumbers||(t.phoneNumbers=[]),t.phoneTypesPool=t.rules.allowedPhoneTypes,t.maxNumbers||(t.maxNumbers=t.phoneTypesPool.length),t.isMobilePhoneType=e.isMobilePhoneType,t.addNumber=function(){t.phoneNumbers.length>0&&(n(t.getCurrentNumber().type),t.parentForm["phoneNumberType_"+(t.phoneNumbers.length-1)].$setPristine(),t.parentForm["phoneNumberCountry_"+(t.phoneNumbers.length-1)].$setPristine(),t.parentForm["phoneNumber_"+(t.phoneNumbers.length-1)].$setPristine()),t.phoneNumbers.push({useForMessaging:!1})},t.removeNumber=function(e){var n=t.phoneNumbers.indexOf(e),a=n===t.phoneNumbers.length-1;t.phoneNumbers.splice(n,1),a?t.phoneTypesPool.push(t.getCurrentNumber().type):t.phoneTypesPool.push(e.type)},t.getCurrentNumber=function(){return t.phoneNumbers[t.phoneNumbers.length-1]},t.isAddDisabled=function(){var e=t.getCurrentNumber();return!e.type||!e.country||!t.parentForm["phoneNumber_"+(t.phoneNumbers.length-1)].$valid},0===t.phoneNumbers.length&&t.addNumber();for(var a=0;a<t.phoneNumbers.length-1;++a)n(t.phoneNumbers[a].type);t.isUseForMessagingDisabled=function(){return!t.rules.messagingAllowed}}}]})}},function(e,t,n){e.exports=function(e){e.component("entityReview",{bindings:{entity:"<",taxForms:"<?",identifications:"<?",mifirIdentifiers:"<?",nameChangeReason:"<?",nameChangeType:"<?"},template:n(718),controller:["$translate","$filter","ModalService","NavigationAction","NavigationService","EntityService","CountryService","PageService",function(t,n,a,r,i,o,s,l){var c=this;c.$onInit=function(){if(c.identifications=c.identifications||c.entity.identifications,c.mailingAddressSame=angular.equals(c.entity.address,c.entity.mailingAddress),c.isNdBrokerClient=!1,l.getActivePickerSelections().length>0){var r=l.getActivePickerSelections()[0];c.isNdBrokerClient=r.isNdBrokerClient}c.getEntityReviewSrc=function(){return c.entity?"INDIVIDUAL"===c.entity.entityType?e.WEBAPP_ROOT+"/components/review/individualReview.html":"LEGAL_ENTITY"===c.entity.entityType?e.WEBAPP_ROOT+"/components/review/legalEntityReview.html":"ORG"===c.entity.entityType?e.WEBAPP_ROOT+"/components/review/orgReview.html":"TRUST"===c.entity.entityType?e.WEBAPP_ROOT+"/components/review/trustReview.html":"":""},c.isPercentageOfOwnershipRequired=o.isPercentageOfOwnershipRequired,c.isCountryOfLegalResidenceRequired=o.isCountryOfLegalResidenceRequired,c.isIraBeneficiary=function(e){var t=(e.associations||[]).map(function(e){return e.type});return o.isIraBeneficiary(t)},c.viewTaxForm=function(e){if("INDIVIDUAL"!==c.entity.entityType)a.closeModal(),o.updateTaxForm(c.entity);else{var r={title:n("amEntityName")(c.entity)+": "+t.instant("taxForm.type."+e),templateUrl:"tax-form-modal.component",dialogClass:"modal-lg",modalData:{taxFormType:e,entity:c.entity,readOnly:!0}};a.openModal(r)}},c.countryOfBirthLabel=function(){var e=angular.isDefined(c.entity.countryOfBirth)&&s.isGreaterChinaCountry(c.entity.countryOfBirth)?"individual.label.regionOfBirth":"individual.label.countryOfBirth";return t.instant(e)},c.countryOfFormationLabel=function(){var e=angular.isDefined(c.entity.countryOfFormation)&&s.isGreaterChinaCountry(c.entity.countryOfFormation)?"org.label.regionOfFormation":"org.label.countryOfFormation";return t.instant(e)}}}]})}},function(e,t){e.exports='<div class="form-review">\n    \x3c!-- Display Name --\x3e\n    <am-form-label label-text="{{\'entity.label.name.\' + $ctrl.entity.entityType | translate}}" value-text="{{$ctrl.entity | amEntityName}}"></am-form-label>\n    \n    \x3c!--Name Change Reason --\x3e\n    <am-form-label ng-if="$ctrl.nameChangeType === \'OTHER\' && $ctrl.nameChangeReason" label-text="{{\'individual.label.nameChangeReason\' | translate}}" value-text="{{ $ctrl.nameChangeReason }}"></am-form-label>\n    \x3c!-- Name Change type --\x3e\n    <am-form-label ng-if="$ctrl.nameChangeType && $ctrl.nameChangeType !== \'OTHER\'" label-text="{{\'individual.label.nameChangeReason\' | translate}}" value-text="{{\'nameChangeType.\' + $ctrl.nameChangeType | translate}}"></am-form-label>\n    \n    \x3c!--Address --\x3e\n    <div data-private class="form-group" ng-if="$ctrl.entity.address.country">\n        <div class="row">\n            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-4">\n                <label class="control-label">{{\'entity.label.address.\' + $ctrl.entity.entityType | translate}}</label>\n            </div>\n            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-4">\n                <label ng-bind-html="$ctrl.entity.address | amAddress:\'long\' | renderHTML"></label>\n            </div>\n        </div>\n    </div>\n    \n    \x3c!-- Mailing Address --\x3e\n    <div data-private class="form-group" ng-if="$ctrl.entity.mailingAddress.country">\n        <div class="row">\n            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-4">\n                <label class="control-label">{{\'entity.label.mailingAddress\' | translate}}</label>\n            </div>\n            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-4">\n                <label ng-if="!$ctrl.mailingAddressSame" ng-bind-html="$ctrl.entity.mailingAddress | amAddress:\'long\' | renderHTML"></label>\n                <label ng-if="$ctrl.mailingAddressSame">{{ \'entity.label.sameMailingAddress\' | translate:{\'addressType\' : (\'entity.label.address.\' + $ctrl.entity.entityType | translate)} }}</label>\n            </div>\n        </div>\n    </div>\n    \n    \x3c!-- Email Address --\x3e\n    <am-form-label data-private ng-if="$ctrl.entity.emailAddress" label-text="{{\'entity.label.emailAddress\' | translate}}" value-text="{{$ctrl.entity.emailAddress}}" value-class="text-break"></am-form-label>\n    \n    \x3c!-- Phone Numbers --\x3e\n    <am-form-label data-private ng-repeat="phoneNumber in $ctrl.entity.phoneNumbers" label-text="{{\'entity.label.phoneNumber\' | translate:{ phoneType: (\'phoneNumber.type.\' + phoneNumber.type | translate)} }}" value-text="{{phoneNumber.phoneNumber}}" value-class="direction-ltr"></am-form-label>\n    \n    \x3c!-- Entity related information --\x3e\n    <ng-include data-private src="$ctrl.getEntityReviewSrc()"></ng-include>\n    \n    \x3c!-- Identifications --\x3e\n    <div ng-if="::$ctrl.entity.maskable" data-private class="form-group" ng-repeat="identification in $ctrl.identifications">\n        <div class="row">\n            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-4">\n                <label class="control-label">{{\'identification.type.\' + identification.idType | translate}}</label>\n            </div>\n            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-4">\n                <label>{{identification.idNumber | amFieldMask}}</label>\n                <span class="margin-left-10" ng-if="identification.idCountry">\n                    ({{\'country.\' + identification.idCountry.alpha3 | translate }})\n                </span>\n            </div>\n        </div>\n    </div>\n    <div ng-if="::!$ctrl.entity.maskable" data-private  ng-repeat="identification in $ctrl.identifications">\n        <am-form-private-label label-text="\'identification.type.\' + identification.idType | translate" value-text="{maskValue: identification.idNumber, finalText: \'{{value}} \' + \'(\' + (\'country.\' + identification.idCountry.alpha3 | translate) + \')\' }"></am-form-private-label>\n    </div>\n    \n    \x3c!-- Mifir Identifiers --\x3e\n    <div data-private class="form-group" ng-repeat="identification in $ctrl.mifirIdentifiers">\n        <div class="row">\n            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-4">\n                <label class="control-label">{{\'identification.type.\' + identification.idType | translate}}</label>\n            </div>\n            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-4">\n                <label>{{identification.idNumber}}</label>\n                <span class="margin-left-10" ng-if="identification.idCountry">\n                    ({{\'country.\' + identification.idCountry.alpha3 | translate }})\n                </span>\n            </div>\n        </div>\n    </div>\n    \n    \x3c!-- Tax Ids --\x3e\n    <div data-private ng-if="::$ctrl.entity.maskable" class="form-group" ng-repeat="taxId in $ctrl.entity.taxIds">\n        <div class="row">\n            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-4">\n                <label class="control-label">{{\'identification.type.TAX_ID\' | translate}}</label>\n            </div>\n            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-4">\n                <label>{{taxId.idNumber | amFieldMask}}</label>\n                <span class="margin-left-10" ng-if="taxId.idCountry">\n                    ({{\'country.\' + taxId.idCountry.alpha3 | translate }})\n                </span>\n            </div>\n        </div>\n    </div>\n    <div data-private ng-if="::!$ctrl.entity.maskable" ng-repeat="taxId in $ctrl.entity.taxIds">\n        <am-form-private-label label-text="\'identification.type.TAX_ID\' | translate" value-text="{maskValue: taxId.idNumber, finalText: \'{{value}} \' + \'(\' + (\'country.\' + taxId.idCountry.alpha3 | translate) + \')\' }"></am-form-private-label>\n    </div>\n    \n    \x3c!-- Tax Forms --\x3e\n    <div data-private class="form-group" ng-if="$ctrl.taxForms && $ctrl.taxForms.length > 0">\n        <div class="row">\n            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-4">\n                <label class="control-label">{{ \'entity.label.taxForms\' | translate}}</label>\n            </div>\n            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-4">\n                <label>\n                    <span ng-repeat="taxForm in $ctrl.taxForms">\n                        <a href="" ng-click="$ctrl.viewTaxForm(taxForm)">{{ \'taxForm.type.\' + taxForm | translate }}</a><span ng-if="!$last">{{ \', \' }}</span>\n                    </span>\n                </label>\n            </div>\n        </div>\n    </div>\n    \n    \x3c!-- Sources of Wealth --\x3e\n    <sources-of-wealth-review ng-if="$ctrl.entity.sourcesOfWealth.length > 0" sources-of-wealth="$ctrl.entity.sourcesOfWealth"></sources-of-wealth-review>\n</div>'},function(e,t,n){e.exports=function(e){e.component("sourcesOfWealthForm",{require:{formServerErrorsCtrl:"^^?formServerErrors"},bindings:{sourcesOfWealth:"=ngModel",rules:"<",employmentType:"<?",hideDescription:"<?"},template:['<ng-switch on="$ctrl.rules.style">','    <am-form-sources-of-wealth ng-switch-when="CLASSIC" ng-model="$ctrl.sourcesOfWealth" rules="$ctrl.rules" employment-type="$ctrl.employmentType" hide-description="$ctrl.hideDescription"></am-form-sources-of-wealth>','    <am-form-sources-of-wealth-pie ng-switch-when="PIE_CHART" ng-model="$ctrl.sourcesOfWealth" rules="$ctrl.rules" employment-type="$ctrl.employmentType" hide-description="$ctrl.hideDescription"></am-form-sources-of-wealth-pie>','    <am-form-sources-of-wealth-np ng-switch-when="NO_PERCENTAGES" ng-model="$ctrl.sourcesOfWealth" rules="$ctrl.rules" employment-type="$ctrl.employmentType" hide-description="$ctrl.hideDescription"></am-form-sources-of-wealth-np>',"</ng-switch>"].join(""),controller:function(){var e=this;e.$onInit=function(){e.hideDescription=e.hideDescription||!1,e.sourcesOfWealth=e.sourcesOfWealth||[]}}}),e.component("amFormSourcesOfWealth",{bindings:{sourcesOfWealth:"=ngModel",rules:"<",employmentType:"<?",hideDescription:"<?"},require:{formServerErrorsCtrl:"^^?formServerErrors"},template:n(720),controller:["ResourceService","SESSION_ID","$window","$q","$scope","$timeout","ACTIVE_CONTEXT","ApplicationContext",function(e,t,n,a,r,i,o,s){var l=this,c=function(e){var t=l.sourceOfWealthTypes.indexOf(e);l.sourceOfWealthTypes.splice(t,1)},u=function(){var e=!1;if(angular.isDefined(l.sourcesOfWealth))for(var t=0;t<l.sourcesOfWealth.length;t++){if("INDIVIDUAL_INCOME"===l.sourcesOfWealth[t].type){e=!0;break}}return e};l.$onInit=function(){l.hideDescription=l.hideDescription||!1,l.displayAddButton=!0,l.currentSource={},l.isAM=o===s.AM_DEPENDENCY,l.sourceOfWealthTypes=angular.copy(l.rules.allowedSourcesOfWealth);for(var e=0;e<l.sourcesOfWealth.length;e++){var t=l.sourcesOfWealth[e];t.usedForFunding=!0,l.updatePercentage(t),c(t.type)}l.getServerErrors=function(){return l.formServerErrorsCtrl&&l.formServerErrorsCtrl.getServerErrors()||{}},l.generalErrorCorrected=function(){if(!l.getServerErrors()||angular.isUndefined(l.getServerErrors().general_sow_error))return!0;if("select_source_of_wealth"===l.getServerErrors().general_sow_error)return angular.isDefined(l.sourcesOfWealth)&&l.sourcesOfWealth.length>0;if("total_percentage"===l.getServerErrors().general_sow_error){var e=parseFloat(0);if(angular.isDefined(l.sourcesOfWealth))for(var t=0;t<l.sourcesOfWealth.length;t++){var n=l.sourcesOfWealth[t];angular.isDefined(n.usedForFunding)&&n.usedForFunding&&angular.isDefined(n.percentage)&&(e+=parseFloat(n.percentage)||0)}return 100==e.toFixed(2)}if("income_from_employment_required"===l.getServerErrors().general_sow_error){if(l.employmentType){if("EMPLOYED"===l.employmentType)return u()}else if(angular.isDefined(l.rules.employmentType)&&"EMPLOYED"===l.rules.employmentType)return u()}else if("invalid_income_from_employment"===l.getServerErrors().general_sow_error){if(l.employmentType){if(-1!=["RETIRED","UNEMPLOYED"].indexOf(l.employmentType))return!u()}else if(angular.isDefined(l.rules.employmentType)&&-1!=["RETIRED","UNEMPLOYED"].indexOf(l.rules.employmentType))return!u()}else if("at_least_one_used_for_funding"===l.getServerErrors().general_sow_error){if(angular.isDefined(l.sourcesOfWealth))for(t=0;t<l.sourcesOfWealth.length;t++){if((n=l.sourcesOfWealth[t]).usedForFunding)return!0}return!1}return!0}},l.$onChanges=function(e){e.employmentType&&e.employmentType.previousValue!=e.employmentType.currentValue&&"EMPLOYED"===e.employmentType.currentValue&&!u()&&(l.currentSource={type:"INDIVIDUAL_INCOME",usedForFunding:!0},l.onSourceTypeChange())},l.onSourceTypeChange=function(){var e=l.currentSource;angular.isDefined(e.type)&&null!=e.type&&e.type.length>0&&i(function(){l.addSource(),l.displayAddButton=!0},100)},l.addSource=function(){if(!angular.isUndefined(l.currentSource.type)){var e={type:l.currentSource.type,usedForFunding:!0};l.sourcesOfWealth.push(e),c(l.currentSource.type),l.currentSource={}}},l.toggleAddButton=function(){l.displayAddButton=!l.displayAddButton},l.isPercentageDisplayed=function(e){return!(!angular.isDefined(e.usedForFunding)||!e.usedForFunding)},l.updatePercentage=function(e){angular.isDefined(e.usedForFunding)&&!e.usedForFunding&&(e.percentage="")},l.removeSourceAnswer=function(e){var t=l.sourcesOfWealth.indexOf(e);l.sourcesOfWealth.splice(t,1),(t=l.sourceOfWealthTypes.indexOf(e.type))<0&&l.sourceOfWealthTypes.push(e.type),l.currentSource={}},l.isRemoveDisabled=function(e){return!angular.isUndefined(e.type)&&("INDIVIDUAL_INCOME"===e.type&&"EMPLOYED"===l.employmentType)},l.getNoDecimalPercentageMask=function(){return"'alias': 'am_percentage', 'digits': '0'"},l.areNotesRequired=function(e){return!angular.isUndefined(e.type)&&("INDIVIDUAL_OTHER"===e.type&&"ORG_OTHER"===l.employmentType)}}]})}},function(e,t){e.exports='<div ng-if="::!$ctrl.hideDescription">\r\n\t<any ng-if="!$ctrl.isAM">\r\n\t\t<h4 aria-level="2">{{ \'questionnaire.label.sourceOfWealth\' | translate }}\r\n\t\t</h4>\r\n\t</any>\r\n\t<any ng-if="$ctrl.isAM">\r\n\t\t<h6 class="subtitle">\r\n\t\t\t{{ \'questionnaire.label.sourceOfWealth\' | translate }}\r\n\t\t</h6>\r\n\t</any>\r\n\t<div class="padding-bottom-20">\r\n\t<div class="row">\r\n\t\t<div class="col-xs-12 col-sm-12 col-md-12">\r\n\t    {{ \'sourceOfWealth.message.\' + $ctrl.rules.instructionType | translate }}\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n\t<any ng-repeat="source in $ctrl.sourcesOfWealth">\r\n\t\t<hr/>\r\n\t\t<div class="row">\r\n\t    \t<div class="col-xs-2 col-sm-1 col-md-1 text-center">\r\n\t            <a href="javascript:void(0);" class="btn btn-danger btn-sm no-resize tooltips" am-tooltip  data-toggle="tooltip" data-placement="right"\r\n\t\t\t\t\t\t\tdata-original-title="{{\'word.remove\' | translate}}" ng-click="!$ctrl.isRemoveDisabled(source) && $ctrl.removeSourceAnswer(source)" ng-disabled="$ctrl.isRemoveDisabled(source)" ng-class="{ \'disabled\' : $ctrl.isRemoveDisabled(source) }">\r\n\t\t\t\t\t\t\t<i class="fa fa-times"></i>\r\n\t\t\t\t</a>\r\n\t        </div>\r\n\t       <div class="col-xs-10 col-sm-11 col-md-11"> \r\n\t        \t\t<strong>{{\'sourceOfWealth.\'+ source.type | translate}}</strong>\r\n\t        </div>\r\n\t    </div>\r\n\t\t\r\n\t\t\r\n\t\t<div class="row padding-top-10">\r\n\t\t\r\n\t\t\t<div class="col-xs-12 col-sm-11 col-md-7 col-sm-offset-1 col-md-offset-1">\r\n\t\t\t \t<div class="row align-items-centered">\r\n\t\t            \t<div class="col-xs-12 col-sm-11 col-md-11"><p>{{ \'sourceOfWealth.label.usedInAccountFunding\' | translate }}</p></div>\r\n\t\t                <div class="col-xs-12 col-sm-11 col-md-11">\r\n\t\t                    <am-switch name="{{ \'usedInFunding_\' + $index }}" ng-model="source.usedForFunding" is-disabled=\'false\' model-listener="$ctrl.updatePercentage(source)"></am-switch>\r\n\t\t                </div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="row align-items-centered" ng-if="$ctrl.isPercentageDisplayed(source)">\r\n\t\t            \t<div class="col-xs-12 col-sm-11 col-md-11"><p>{{ \'sourceOfWealth.label.percentage\' | translate }} {{\'sourceOfWealth.\'+ source.type | translate}}</p></div>\r\n\t\t                <div class="col-xs-12 col-sm-6 col-md-4">\r\n\t\t                    <am-input name="{{\'percentage_\' + $index}}" type="text" ng-model="source.percentage" ph-text="{{\'incomeSource.label.percentage\' | translate}}" input-mask="$ctrl.getNoDecimalPercentageMask()" is-required="true"></am-input>\r\n\t\t                </div>\r\n\t\t\t\t</div>\r\n\t\t\t\r\n\t\t\t</div>\r\n\t\t\t<div class="col-xs-12 col-sm-11 col-md-4 col-sm-offset-1 col-md-offset-0">\r\n\t\t\t\t<div class="row">\r\n\t\t                <div class="col-xs-12 col-sm-12 col-md-12">\r\n\t\t                \t<p>{{\'word.Notes\' | translate}}</p>\r\n\t\t                    <am-textarea name="{{\'description_\' + $index}}" ng-model="source.description" maxlength="{{$ctrl.rules.maxDescriptionLength}}" placeholder="{{\'sourceOfWealth.notes.placeholder\' | translate}}" style="resize: none" is-required="$ctrl.areNotesRequired(source)" input-nl-code="{{$ctrl.rules.inputLanguage}}"></am-textarea>\r\n\t\t                </div>\r\n\t\t\t\t</div>\r\n\t\t\t\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t\r\n\t</any>\r\n\t\r\n\t<hr ng-if="$ctrl.sourceOfWealthTypes.length != 0 && $ctrl.sourcesOfWealth.length !=0"/>\r\n\t<div class="row" ng-if="$ctrl.sourceOfWealthTypes.length != 0 && $ctrl.displayAddButton">\r\n\t    <div class="col-xs-12 col-sm-11 col-md-6">\r\n\t    \t<p>\r\n\t\t        <a href="javascript:void(0);" ng-click="$ctrl.toggleAddButton()" class="btn btn-default">\r\n\t\t           <i class="fa fa-plus"></i>&nbsp;{{\'sourceOfWealth.label.addSource\' | translate}}\r\n\t\t        </a>\r\n\t        </p>\r\n\t     </div>\r\n\t</div>\r\n\t<div class="row" ng-if="$ctrl.sourceOfWealthTypes.length != 0 && !$ctrl.displayAddButton">\r\n\t\r\n\t\t<div class="col-xs-2 col-sm-1 col-md-1 text-center">\r\n\t            <a href="javascript:void(0);" class="btn btn-danger btn-sm no-resize tooltips" am-tooltip  data-toggle="tooltip" data-placement="right"\r\n\t\t\t\t\t\t\tdata-original-title="{{\'word.remove\' | translate}}" ng-click="$ctrl.toggleAddButton()">\r\n\t\t\t\t\t\t\t<i class="fa fa-times"></i>\r\n\t\t\t\t</a>\r\n\t        </div>\r\n\t\r\n\t     <div class="col-xs-10 col-sm-11 col-md-6"> \r\n\t       \t\t<am-select name="{{\'type_\' + ($ctrl.sourcesOfWealth.length)}}" ng-model="$ctrl.currentSource.type" options="$ctrl.sourceOfWealthTypes" option-key="\'sourceOfWealth.\'" empty-option-text="{{\'word.chooseOne\' | translate}}" model-listener="$ctrl.onSourceTypeChange()" enable-single-option="true"></am-select>\r\n\t     </div>\r\n\t</div>\r\n\t<div class="alert alert-danger margin-top-10" ng-if="$ctrl.getServerErrors()[\'general_sow_error\'] && !$ctrl.generalErrorCorrected()">\r\n\t\t<p>{{ \'sourceOfWealth.error.\' + $ctrl.getServerErrors()[\'general_sow_error\'] | translate }}</p>\r\n\t</div>\r\n</div>'},function(e,t){e.exports=function(e){e.component("amSourceOfWealthPercentInput",{bindings:{source:"=ngModel",inputName:"@?name",classes:"<?"},templateUrl:e.WEBAPP_ROOT+"/components/sourcesofwealth/sourceOfWealthPercentInput.html",controller:["LanguageService",function(e){var t=this;function n(){t.source.usedForFunding=angular.isDefined(t.source.percentage)&&t.source.percentage>0}t.decreasePercentage=function(){var e=(parseFloat(t.source.percentage)||0)-10;e<0&&(e=void 0),t.source.percentage=e,t.source.isNew=!1,n()},t.increasePercentage=function(){var e=(parseFloat(t.source.percentage)||0)+10;e>100&&(e=100),t.source.percentage=e,t.source.isNew=!1,n()},t.increasePercentageDisabled=function(){return(parseFloat(t.source.percentage)||0)>=100},t.decreasePercentageDisabled=function(){return(parseFloat(t.source.percentage)||0)<=0},t.onPercentageChange=function(){t.source.isNew=!1,n()},t.getNoDecimalPercentageMask=function(){return e.isRtl()?"'digits': '0', 'max': '100', 'repeat' : '3'":"'alias': 'am_percentage', 'digits': '0', 'max': '100', 'repeat' : '3'"}}]})}},function(e,t,n){e.exports=function(e){e.component("amFormSourcesOfWealthPie",{bindings:{sourcesOfWealth:"=ngModel",rules:"<",employmentType:"<?",hideDescription:"<?"},require:{formServerErrorsCtrl:"^^?formServerErrors"},template:n(723),controller:["ACTIVE_CONTEXT","ApplicationContext","IS_MOBILE",function(e,t,n){var a=this,r=function(e){var t=a.sourceOfWealthTypes.indexOf(e);a.sourceOfWealthTypes.splice(t,1)},i=function(){var e=!1;if(angular.isDefined(a.sourcesOfWealth))for(var t=0;t<a.sourcesOfWealth.length;t++){if("INDIVIDUAL_INCOME"===a.sourcesOfWealth[t].type){e=!0;break}}return e},o=function(e){if(angular.isDefined(a.sourcesOfWealth))for(var t=0;t<a.sourcesOfWealth.length;t++){var n=a.sourcesOfWealth[t];if(n.type===e)return n}};a.$onInit=function(){a.hideDescription=a.hideDescription||!1,a.isMobile=n,a.isAM=e===t.AM_DEPENDENCY,a.sourceOfWealthTypes=angular.copy(a.rules.allowedSourcesOfWealth);for(var s=0;s<a.sourcesOfWealth.length;s++){var l=a.sourcesOfWealth[s];l.usedForFunding=!0,r(l.type)}for(s=0;s<a.rules.preselectedSourcesOfWealth.length;s++){var c=a.rules.preselectedSourcesOfWealth[s],u=o(c);angular.isUndefined(u)&&a.addSource(c)}a.getServerErrors=function(){return a.formServerErrorsCtrl&&a.formServerErrorsCtrl.getServerErrors()||{}},a.generalErrorCorrected=function(){if(!a.getServerErrors()||angular.isUndefined(a.getServerErrors().general_sow_error))return!0;if("select_source_of_wealth"===a.getServerErrors().general_sow_error)return angular.isDefined(a.sourcesOfWealth)&&a.sourcesOfWealth.length>0;if("total_percentage"===a.getServerErrors().general_sow_error){var e=parseFloat(0);if(angular.isDefined(a.sourcesOfWealth))for(var t=0;t<a.sourcesOfWealth.length;t++){var n=a.sourcesOfWealth[t];angular.isDefined(n.usedForFunding)&&n.usedForFunding&&angular.isDefined(n.percentage)&&(e+=parseFloat(n.percentage)||0)}return 100==e.toFixed(2)}if("income_from_employment_required"===a.getServerErrors().general_sow_error){if(a.employmentType){if("EMPLOYED"===a.employmentType)return i()}else if(angular.isDefined(a.rules.employmentType)&&"EMPLOYED"===a.rules.employmentType)return i()}else if("invalid_income_from_employment"===a.getServerErrors().general_sow_error)if(a.employmentType){if(-1!=["RETIRED","UNEMPLOYED"].indexOf(a.employmentType))return!i()}else if(angular.isDefined(a.rules.employmentType)&&-1!=["RETIRED","UNEMPLOYED"].indexOf(a.rules.employmentType))return!i();return!0}},a.$onChanges=function(e){e.employmentType&&e.employmentType.previousValue!=e.employmentType.currentValue&&"EMPLOYED"===e.employmentType.currentValue&&!i()&&a.addSource("INDIVIDUAL_INCOME")},a.addSource=function(e){var t={type:e,usedForFunding:!0,isNew:!0};a.sourcesOfWealth.push(t),r(e),a.adjustUntouchedFields(),t.usedForFunding=angular.isDefined(t.percentage)&&t.percentage>0},a.removeSourceAnswer=function(e){var t=a.sourcesOfWealth.indexOf(e);a.sourcesOfWealth.splice(t,1),(t=a.sourceOfWealthTypes.indexOf(e.type))<0&&a.sourceOfWealthTypes.push(e.type)},a.isRemoveDisabled=function(e){return!angular.isUndefined(e.type)&&("INDIVIDUAL_INCOME"===e.type&&"EMPLOYED"===a.employmentType)},a.areNotesRequired=function(e){return!angular.isUndefined(e.type)&&("INDIVIDUAL_OTHER"===e.type||"ORG_OTHER"===e.type)},a.getSourceIcon=function(e){return"INDIVIDUAL_INCOME"===e?"fa fa-lg fa-briefcase cp-primary":"INDIVIDUAL_PROPERTY"===e?"fa fa-lg fa-home teal":"INDIVIDUAL_INTEREST"===e?"fa fa-lg fa-pie-chart fa-chart-pie danger":"INDIVIDUAL_DISABILITY"===e?"fa fa-lg fa-id-card-o fa-id-card info":"INDIVIDUAL_INHERITANCE"===e?"fa fa-lg fa-gift purple":"INDIVIDUAL_PENSION"===e?"fa fa-lg fa-map-signs success":"INDIVIDUAL_MARKET_PROFIT"===e?"fa fa-lg fa-bar-chart fa-chart-bar lime-green":"INDIVIDUAL_ALLOWANCE"===e?"fa fa-lg fa-money fa-money-bill warning":"INDIVIDUAL_OTHER"===e?"fa fa-lg fa-ellipsis-h blue":"ORG_BUSINESS"===e?"fa fa-lg fa-chart-line cp-primary":"ORG_OWNER_EQUITY"===e?"fa fa-lg fa-pie-chart fa-chart-pie danger":"ORG_RETAINED_EARNINGS"===e?"fa fa-lg fa-money fa-money-bill warning":"ORG_PROPERTY"===e?"fa fa-lg fa-home teal":"ORG_TRADING_PROFITS"===e?"fa fa-lg fa-bar-chart fa-chart-bar lime-green":"fa fa-lg fa-ellipsis-h blue"},a.adjustUntouchedFields=function(){var e=[],t=0;if(angular.forEach(a.sourcesOfWealth,function(n){n.isNew?e.push(n):t+=parseFloat(n.percentage)||0}),t<100&&0!=e.length){var n=100-t,r=Math.floor(n/e.length);angular.forEach(e,function(e){e.percentage=r})}}}]}),e.component("amSourcesOfWealthChart",{bindings:{sourcesOfWealth:"<"},require:{amFormSourcesOfWealthPieCtrl:"^amFormSourcesOfWealthPie"},template:'<div id="graph" style="height: 220px; width: 220px;"></div>',controller:["$document","$translate","$q","JsService","CONTENT_HOST",function(e,t,n,a,r){var i=this;function o(e){var t=[];return angular.forEach(e,function(e){angular.isDefined(e.percentage)&&parseFloat(e.percentage)>0&&t.push(e)}),t}function s(){var e=o(i.sourcesOfWealth||[]),t=0;return angular.forEach(e,function(e){t+=parseFloat(e.percentage)}),t}var l=function(n){var a=function(n){var a={chart:{type:"pie",renderTo:$("#graph",e[0])[0],margin:[0,0,0,0],spacingTop:0,spacingBottom:0,spacingLeft:0,spacingRight:0},tooltip:{enabled:!1},plotOptions:{pie:{allowPointSelect:!1,dataLabels:{enabled:!1},states:{hover:{enabled:!1}}}},series:[{name:"Value",data:n,innerSize:"60%",startAngle:0,borderColor:null}],credits:{enabled:!1}},r=s();a.title=r>100?{text:"<div align='center'><div style='font-size:32px' al1ign='center'>"+r+"%</div><sup style='font-size:14px'>"+t.instant("word.allocated").toLowerCase()+"</sup></div>",verticalAlign:"middle",align:"center",useHTML:!0,style:{color:"#DD4C42"},y:-10}:{text:"<div align='center'><div style='font-size:32px' al1ign='center'>"+r+"%</div><sup style='font-size:14px'>"+t.instant("word.complete").toLowerCase()+"</sup></div>",verticalAlign:"middle",align:"center",useHTML:!0,style:{color:"#222222"},y:-10};return a}(n);new HighchartsLegacy.Chart(a,function(e){})};i.$doCheck=function(){var e=o(i.sourcesOfWealth||[]);i.currentSourcesOfWealth=i.currentSourcesOfWealth||[],function(e,t){var n=e.length;if(n!=t.length)return!0;for(var a=0;a<n;a++){var r=e[a],i=t[a];if(r.type!=i.type)return!0;if(parseFloat(r.percentage)!=parseFloat(i.percentage))return!0}return!1}(e,i.currentSourcesOfWealth)&&(!function(e){var i=s();if(i>100){var o=[],c={color:"#DD4C42"};return c.y=i,c.name="",o.push(c),void l(o)}var u=[];angular.forEach(e,function(e){if(angular.isDefined(e.percentage)&&parseFloat(e.percentage)>0){var a=n.defer();t("sourceOfWealth."+e.type).then(function(t){var n={};n.name=t;var r=parseFloat(e.percentage);n.y=r,i>100?n.color="#DD4C42":"INDIVIDUAL_INCOME"===e.type?n.color="#4D6E9D":"INDIVIDUAL_PROPERTY"===e.type?n.color="#0E9180":"INDIVIDUAL_INTEREST"===e.type?n.color="#E55957":"INDIVIDUAL_DISABILITY"===e.type?n.color="#5FB0E6":"INDIVIDUAL_INHERITANCE"===e.type?n.color="#9C27B0":"INDIVIDUAL_PENSION"===e.type?n.color="#5FC29D":"INDIVIDUAL_MARKET_PROFIT"===e.type?n.color="#8BC34A":"INDIVIDUAL_ALLOWANCE"===e.type?n.color="#f1c500":"INDIVIDUAL_OTHER"===e.type?n.color="#33394E":"ORG_BUSINESS"===e.type?n.color="#4D6E9D":"ORG_OWNER_EQUITY"===e.type?n.color="#e55957":"ORG_RETAINED_EARNINGS"===e.type?n.color="#f1c500":"ORG_PROPERTY"===e.type?n.color="#0E9180":"ORG_TRADING_PROFITS"===e.type?n.color="#8BC34A":n.color="#33394E",a.resolve(n)}),u.push(a.promise)}}),n.all(u).then(function(e){if(i<100){var t={name:""};t.y=100-i,t.color="none",e.push(t)}"undefined"!=typeof HighchartsLegacy?l(e):a.injectJavascript("highcharts","https://"+r+"/scripts/common/js/highstock.5.0.12.js").then(function(t){HighchartsLegacy=Highcharts,l(e)}).catch(function(e){console.error("failed to inject highcharts",e)})})}(e),i.currentSourcesOfWealth=angular.copy(e))}}]})}},function(e,t){e.exports='<div class="source-of-wealth">\r\n\t<div class="row">\r\n\t\t<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\r\n\t\t\t<div ng-if="::!$ctrl.hideDescription">\r\n\t\t\t\t<any ng-if="!$ctrl.isAM">\r\n\t\t\t\t\t<h4 aria-level="2">{{ \'questionnaire.label.sourceOfWealth\' | translate }}\r\n\t\t\t\t\t</h4>\r\n\t\t\t\t</any>\r\n\t\t\t\t<any ng-if="$ctrl.isAM">\r\n\t\t\t\t\t<h6 class="subtitle">\r\n\t\t\t\t\t\t{{ \'questionnaire.label.sourceOfWealth\' | translate }}\r\n\t\t\t\t\t</h6>\r\n\t\t\t\t</any>\r\n\t\t\r\n\t\t\t\t<p>{{ \'sourceOfWealth.message.\' + $ctrl.rules.instructionType | translate }}</p>\r\n\t\t\t</div>\r\n\t\t\t<div class="row">\r\n\t\t\t\t<div class="col-xs-12 col-sm-12 col-md-12 col-lg-8">\r\n\t\t\t\t\t\r\n\t\t\t\t\t<div ng-class="{ \'form-bordered\' : $ctrl.sourcesOfWealth.length != 0 }" >\r\n\t\t\t\t\t\t<any ng-repeat="source in $ctrl.sourcesOfWealth">\r\n\t\t\t\t\t\t\t<div class="row align-items-center">\r\n\t\t\t\t\t\t\t\t<div class="col-xs-2 col-sm-2 col-md-1 col-lg-1">\r\n\t\t\t\t\t\t\t\t\t<p class="text-center">\r\n\t\t\t\t\t\t\t\t\t\t<a href="javascript:void(0);" class="btn-icon tooltips" title="{{\'word.remove\' | translate}}"\tng-click="!$ctrl.isRemoveDisabled(source) && $ctrl.removeSourceAnswer(source)" ng-disabled="$ctrl.isRemoveDisabled(source)" ng-class="{ \'disabled\' : $ctrl.isRemoveDisabled(source) }"><i class="fa fa-times-circle"></i></a>\r\n\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div class="col-xs-10 col-sm-10 col-md-7 col-lg-6">\r\n\t\t\t\t\t\t\t\t\t<p><i aria-hidden="true" ng-class="$ctrl.getSourceIcon(source.type)"></i>{{\'sourceOfWealth.\'+ source.type | translate}}</p>\r\n\t\t\t\t\t\t\t\t</div>\t\t\t\r\n\t\t\t\t\t\t\t\t<div class="hidden-sm hidden-md hidden-lg"><div class="clearfix"></div></div>\t\t\r\n\t\t\t\t\t\t\t\t<div class="col-xs-10 col-xs-offset-2 col-sm-10 col-sm-offset-2 col-md-4 col-md-offset-0 col-lg-5 col-lg-offset-0">\r\n\t\t\t\t\t\t\t\t\t<am-source-of-wealth-percent-input ng-model="source" name="{{\'percentage_\' + $index}}" classes="{\'input-text-center\' : true ,\'has-error\' : ($ctrl.getServerErrors()[\'general_sow_error\'] && !$ctrl.generalErrorCorrected())}"></am-source-of-wealth-percent-input>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class="row align-items-center" ng-if="$ctrl.areNotesRequired(source)">\r\n\t\t\t\t\t\t\t\t<div class="col-xs-12 col-sm-12 col-md-12 padding-left-0 padding-top-10 padding-right-0">\r\n\t\t\t\t\t\t\t\t\t<am-textarea name="{{\'description_\' + $index}}" ng-model="source.description" maxlength="{{$ctrl.rules.maxDescriptionLength}}" placeholder="{{\'sourceOfWealth.notes.placeholder\' | translate}}" style="resize: none" is-required="true" input-nl-code="{{$ctrl.rules.inputLanguage}}"></am-textarea>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</any>\r\n\t\t\t\t\t\t<div class="alert alert-danger margin-top-10" ng-if="$ctrl.getServerErrors()[\'general_sow_error\'] && !$ctrl.generalErrorCorrected()">\r\n\t\t\t\t\t\t\t<p>{{ \'sourceOfWealth.error.\' + $ctrl.getServerErrors()[\'general_sow_error\'] | translate }}</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<br>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<any ng-if="$ctrl.sourceOfWealthTypes.length != 0">\r\n\t\t\t\t\t\t<p class="text-muted">{{\'sourceOfWealth.label.selectAll\' | translate | uppercase}}</p>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<div class="form-bordered">\r\n\t\t\t\t\t\t<div class="row align-items-center" ng-repeat="sourceType in $ctrl.sourceOfWealthTypes">\r\n\t\t\t\t\t\t\t<div class="col-xs-2 col-sm-2 col-md-1 col-lg-1">\r\n\t\t\t\t\t\t\t\t<p class="text-center"><a href="javascript:void(0);" class="btn-icon tooltips" title="{{\'word.add\' | translate}}" ng-click="$ctrl.addSource(sourceType)" ><i class="fa fa-plus-circle"></i></a></p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class="col-xs-10 col-sm-10 col-md-11 col-lg-11">\r\n\t\t\t\t\t\t\t\t<p><i ng-class="$ctrl.getSourceIcon(sourceType)"></i><a href="javascript:void(0);" ng-click="$ctrl.addSource(sourceType)"><strong>{{\'sourceOfWealth.\'+sourceType | translate}}</strong></a></p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</any>\r\n\t\t\t\t\t\r\n\t\t\t\t</div>\r\n\t\t\t\t\r\n\t\t\t\t<div ng-if="!$ctrl.isMobile" class="col-xs-12 col-sm-12 col-md-12 col-lg-4">\r\n\t\t\t\t\t<div align="center">\r\n\t\t\t\t\t\t<am-sources-of-wealth-chart sources-of-wealth="$ctrl.sourcesOfWealth"></am-sources-of-wealth-chart>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<br>\r\n\t\t\t\t</div>\r\n\t\t\t\t\r\n\t\t\t</div>\r\n\t\t\t\r\n\t\t\t\r\n\t\t</div>\r\n\t</div>\r\n</div>'},function(e,t,n){e.exports=function(e){e.component("amFormSourcesOfWealthNp",{bindings:{sourcesOfWealth:"=ngModel",rules:"<",employmentType:"<?",hideDescription:"<?"},require:{formServerErrorsCtrl:"^^?formServerErrors"},template:n(725),controller:["ACTIVE_CONTEXT","ApplicationContext","IS_MOBILE","$filter","$translate",function(e,t,n,a,r){var i=this,o=function(){var e=!1;if(angular.isDefined(i.sourcesOfWealth))for(var t=0;t<i.sourcesOfWealth.length;t++){var n=i.sourcesOfWealth[t];if(n.checked&&"INDIVIDUAL_INCOME"===n.type){e=!0;break}}return e},s=function(e){if(angular.isDefined(i.sourcesOfWealth))for(var t=0;t<i.sourcesOfWealth.length;t++){var n=i.sourcesOfWealth[t];if(n.type===e)return n}};i.$onInit=function(){i.isAM=e===t.AM_DEPENDENCY,i.hideDescription=i.hideDescription||!1,i.sourceOfWealthTypes=angular.copy(i.rules.allowedSourcesOfWealth),i.isOrganization=0!=a("filter")(i.sourceOfWealthTypes,function(e,t,n){return/^ORG_/.test(e)}).length,i.getInstructionsText=function(){return i.isOrganization?r.instant("sow.questionNpOrg"):r.instant("sow.questionNp")},i.sourceMap={};for(var n=0;n<i.sourceOfWealthTypes.length;n++){var l=i.sourceOfWealthTypes[n],c=s(l);angular.isDefined(c)?(c.checked=!0,c.usedForFunding=!0,angular.isDefined(c.percentage)&&0!=c.percentage&&(c.percentage=0),i.sourceMap[l]=c):i.sourceMap[l]={type:l,usedForFunding:!0,checked:!1}}for(n=0;n<i.rules.preselectedSourcesOfWealth.length;n++){l=i.rules.preselectedSourcesOfWealth[n],c=s(l);angular.isUndefined(c)&&i.addSource(l)}i.getServerErrors=function(){return i.formServerErrorsCtrl&&i.formServerErrorsCtrl.getServerErrors()||{}},i.generalErrorCorrected=function(){if(!i.getServerErrors()||angular.isUndefined(i.getServerErrors().general_sow_error))return!0;if("select_source_of_wealth"===i.getServerErrors().general_sow_error){for(var e=!1,t=0;t<i.sourcesOfWealth.length;t++){if(i.sourcesOfWealth[t].checked){e=!0;break}}return e}if("income_from_employment_required"===i.getServerErrors().general_sow_error){if(i.employmentType){if("EMPLOYED"===i.employmentType)return o()}else if(angular.isDefined(i.rules.employmentType)&&"EMPLOYED"===i.rules.employmentType)return o()}else if("invalid_income_from_employment"===i.getServerErrors().general_sow_error)if(i.employmentType){if(-1!=["RETIRED","UNEMPLOYED"].indexOf(i.employmentType))return!o()}else if(angular.isDefined(i.rules.employmentType)&&-1!=["RETIRED","UNEMPLOYED"].indexOf(i.rules.employmentType))return!o();return!0}},i.$onChanges=function(e){angular.isUndefined(i.sourceMap)||e.employmentType&&e.employmentType.previousValue!=e.employmentType.currentValue&&"EMPLOYED"===e.employmentType.currentValue&&!o()&&i.addSource("INDIVIDUAL_INCOME")},i.addSource=function(e){i.sourceMap[e].checked=!0,i.checkType(e)},i.checkType=function(e){var t=i.sourceMap[e];if(t.checked)i.sourcesOfWealth.push(t);else for(var n=i.sourcesOfWealth.length;n--;){if(i.sourcesOfWealth[n].type===e){i.sourcesOfWealth.splice(n,1);break}}},i.isRemoveDisabled=function(e){return!angular.isUndefined(e)&&!("INDIVIDUAL_INCOME"!==e||"EMPLOYED"!==i.employmentType||!i.sourceMap[e].checked)},i.areNotesRequired=function(e){return!angular.isUndefined(e)&&!("INDIVIDUAL_OTHER"!==e&&"ORG_OTHER"!==e||!i.sourceMap[e].checked)},i.getSourceIcon=function(e){return"INDIVIDUAL_INCOME"===e?"fa fa-lg fa-briefcase cp-primary":"INDIVIDUAL_PROPERTY"===e?"fa fa-lg fa-home teal":"INDIVIDUAL_INTEREST"===e?"fa fa-lg fa-pie-chart fa-chart-pie danger":"INDIVIDUAL_DISABILITY"===e?"fa fa-lg fa-id-card-o fa-id-card info":"INDIVIDUAL_INHERITANCE"===e?"fa fa-lg fa-gift purple":"INDIVIDUAL_PENSION"===e?"fa fa-lg fa-map-signs success":"INDIVIDUAL_MARKET_PROFIT"===e?"fa fa-lg fa-bar-chart fa-chart-bar lime-green":"INDIVIDUAL_ALLOWANCE"===e?"fa fa-lg fa-money fa-money-bill warning":"INDIVIDUAL_OTHER"===e?"fa fa-lg fa-ellipsis-h blue":"ORG_BUSINESS"===e?"fa fa-lg fa-chart-line cp-primary":"ORG_OWNER_EQUITY"===e?"fa fa-lg fa-pie-chart fa-chart-pie danger":"ORG_RETAINED_EARNINGS"===e?"fa fa-lg fa-money fa-money-bill warning":"ORG_PROPERTY"===e?"fa fa-lg fa-home teal":"ORG_TRADING_PROFITS"===e?"fa fa-lg fa-bar-chart fa-chart-bar lime-green":"fa fa-lg fa-ellipsis-h blue"}}]})}},function(e,t){e.exports='<div class="source-of-wealth">\r\n\t<div class="row">\r\n\t\t<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" role="group" aria-labelledby="sourceOfWealthMsgLabel" aria-describedby="sourceOfWealthError">\r\n\t\t\t<div ng-if="::!$ctrl.hideDescription">\r\n\t\t\t\t<any ng-if="!$ctrl.isAM">\r\n\t\t\t\t\t<h4 aria-level="2">{{ \'questionnaire.label.sourceOfWealth\' | translate }}</h4>\r\n\t\t\t\t</any>\r\n\t\t\t\t<any ng-if="$ctrl.isAM">\r\n\t\t\t\t\t<h6 class="subtitle">\r\n\t\t\t\t\t\t{{ \'questionnaire.label.sourceOfWealth\' | translate }}\r\n\t\t\t\t\t</h6>\r\n\t\t\t\t</any>\r\n\t\t\t\t<p id="sourceOfWealthMsgLabel">{{ \'sourceOfWealth.message.\' + $ctrl.rules.instructionType | translate }}</p>\r\n\t\t\t\t<br>\r\n\t\t\t</div>\r\n\t\t\t<div class="row">\r\n\t\t\t\t<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\r\n\t\t\t\t\t\r\n\t\t\t\t\t<div ng-class="{\'form-bordered\': !$ctrl.hideDescription}">\r\n\t\t\t\t\t\t<any ng-repeat="sourceType in $ctrl.rules.allowedSourcesOfWealth">\r\n\t\t\t\t\t\t\t<div class="row align-items-centered" role="checkbox" aria-labelledby="{{sourceType}}_LABEL" tabindex="0" aria-checked="{{$ctrl.sourceMap[sourceType].checked}}" aria-disabled="{{$ctrl.isRemoveDisabled(sourceType)}}" icheck-toggle>\r\n\t\t\t\t\t\t\t\t<div class="col-xs-2 col-sm-2 col-md-1 col-lg-1" aria-hidden="true">\r\n\t\t\t\t\t\t\t\t\t<p class="text-center">\r\n\t\t\t\t\t\t\t\t\t\t<input i-check type="checkbox" name="{{sourceType}}" ng-model="$ctrl.sourceMap[sourceType].checked" ng-change="$ctrl.checkType(sourceType)" ng-disabled="$ctrl.isRemoveDisabled(sourceType)" ng-class="{ \'disabled\' : $ctrl.isRemoveDisabled(sourceType) }">\r\n\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div class="col-xs-10 col-sm-10 col-md-7 col-lg-11" aria-hidden="true">\r\n\t\t\t\t\t\t\t\t\t<p id="{{sourceType}}_LABEL"><i aria-hidden="true" ng-class="$ctrl.getSourceIcon(sourceType)"></i>{{\'sourceOfWealth.\'+ sourceType | translate}}</p>\r\n\t\t\t\t\t\t\t\t</div>\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class="row" ng-if="$ctrl.areNotesRequired(sourceType)">\r\n\t\t\t\t\t\t\t\t<div class="col-xs-12 col-sm-12 col-md-12 padding-left-0 padding-top-10 padding-right-0">\r\n\t\t\t\t\t\t\t\t\t<am-textarea name="{{\'description_\' + $index}}" ng-model="$ctrl.sourceMap[sourceType].description" maxlength="{{$ctrl.rules.maxDescriptionLength}}" placeholder="{{\'sourceOfWealth.notes.placeholder\' | translate}}" style="resize: none" is-required="true" input-nl-code="{{$ctrl.rules.inputLanguage}}"></am-textarea>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</any>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<div id="sourceOfWealthError" class="alert alert-danger margin-top-10" ng-if="$ctrl.getServerErrors()[\'general_sow_error\'] && !$ctrl.generalErrorCorrected()">\r\n\t\t\t\t\t\t\t<p>{{ \'sourceOfWealth.error.\' + $ctrl.getServerErrors()[\'general_sow_error\'] | translate }}</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<br>\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t</div>\r\n\t</div>\r\n</div>'},function(e,t,n){e.exports=function(e){e.component("sourcesOfWealthReview",{bindings:{sourcesOfWealth:"<",configurable:"<?",configureFn:"&?"},template:["$attrs",function(e){return(e.revised||"").length>0?n(727):n(728)}],controller:["ACTIVE_CONTEXT","ApplicationContext",function(e,t){var n=this;n.$onInit=function(){n.configurable=n.configurable||!1,n.configureFn=n.configureFn||void 0,n.isAM=e===t.AM_DEPENDENCY,n.isNoPercentagesStyle=function(){if(angular.isDefined(n.sourcesOfWealth))for(var e=0;e<n.sourcesOfWealth.length;e++){var t=n.sourcesOfWealth[e];if(!angular.isDefined(t.usedForFunding)||!t.usedForFunding||!angular.isUndefined(t.percentage)&&0!=t.percentage)return!1}return!0}()}}]})}},function(e,t){e.exports='<div class="row">\n\t<div class="col-12 col-sm-12 col-md-3 col-lg-3">\n\t\t<p class="review-title">{{ \'sourceOfWealth.header\' | translate }}</p>\n\t</div>\n\t<div class="col-12 col-sm-12 col-md-7 col-lg-7">\n\t\t<div class="row" ng-repeat="source in $ctrl.sourcesOfWealth">\n\t\t\t<div class="col-12 col-sm-12 col-md-12 col-lg-12">\n\t\t\t\t<p>\n\t\t\t\t\t<span ng-if="source.percentage > 0">{{ source.percentage + \'% - \' }}</span>\n\t\t\t\t\t<span>{{\'sourceOfWealth.\' + source.type | translate}}</span>\n\t\t\t\t\t<span class="text-muted" ng-if="source.description.length > 0">{{ \'(\' + source.description + \')\'}}</span>\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t\t<br>\n\t\t</div>\n\t</div>\n\t<div class="col-12 col-sm-12 col-md-2 col-lg-2">\n\t\t<p class="review-btn" ng-if="::$ctrl.configurable && $ctrl.configureFn">\n\t\t\t<am-button btn-type="primary" on-click="$ctrl.configureFn()" btn-text="{{ \'word.edit\' | translate }}"></am-button>\n\t\t</p>\n\t</div>\n</div>\n<hr>\n<br>'},function(e,t){e.exports='\r\n<any ng-if="!$ctrl.isAM">\r\n<h4 aria-level="2">{{ $ctrl.isNoPercentagesStyle ? \'financialData.label.sourceOfFund\' : \'questionnaire.label.sourceOfWealth\' | translate }}</h4>\r\n</any>\r\n<any ng-if="$ctrl.isAM">\r\n\t<div class="row">\r\n\t\t<div class="col-xs-8 col-sm-8 col-md-8 col-lg-8">\r\n\t\t\t<p class="subtitle">{{ $ctrl.isNoPercentagesStyle ? \'financialData.label.sourceOfFund\' : \'questionnaire.label.sourceOfWealth\' | translate }}</p>\r\n\t\t</div>\r\n\t</div>\r\n</any>\r\n<div class="form-review">\r\n<div class="form-group" ng-repeat="source in $ctrl.sourcesOfWealth">\r\n\t<div class="row">\r\n\t\t<any ng-if="!$ctrl.isNoPercentagesStyle">\r\n\t\t\t<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\r\n\t\t\t\t<label class="control-label">{{\'sourceOfWealth.\' + source.type | translate }}</label>\r\n\t\t\t</div>\r\n\t\r\n\t\t\t<div class="col-xs-11 col-sm-11 col-md-11 col-lg-11 col-xs-offset-1  col-sm-offset-1  col-md-offset-1">\r\n\t\t\t\t<p>\r\n\t\t\t\t\t{{ \'sourceOfWealth.label.usedInAccountFunding\' | translate }} <strong>{{ (source.usedForFunding ? \'word.yes\' : \'word.no\') | translate }}</strong>\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\t\r\n\t\t\t<div ng-if="source.usedForFunding" class="col-xs-11 col-sm-11 col-md-11 col-lg-11 col-xs-offset-1 col-sm-offset-1 col-md-offset-1">\r\n\t\t\t\t<p>\r\n\t\t\t\t\t{{ \'sourceOfWealth.label.percentage\' | translate }} {{\'sourceOfWealth.\'+ source.type | translate}}? <strong>{{source.percentage + \' %\'}}</strong>\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\t\r\n\t\t\t<div ng-if="source.description" class="col-xs-11 col-sm-11 col-md-11 col-lg-11 col-xs-offset-1 col-sm-offset-1 col-md-offset-1">\r\n\t\t\t\t<p>\r\n\t\t\t\t\t{{(\'word.Notes\' | translate) + \': \' }} <strong>{{source.description}}</strong>\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\t\t</any>\r\n\t\t<any ng-if="$ctrl.isNoPercentagesStyle">\r\n\t\t\t<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\r\n\t\t\t\t<label class="control-label">{{\'sourceOfWealth.\' + source.type | translate }}</label>\r\n\t\t\t\t\r\n\t\t\t\t<p ng-if="source.description" class="text-gray">\r\n\t\t\t\t\t{{(\'word.Notes\' | translate) + \': \' }} <strong>{{source.description}}</strong>\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\t\t\t\r\n\t\t</any>\r\n\r\n\r\n\t</div>\r\n</div>\r\n</div>\r\n<br ng-if="$ctrl.isAM">'},function(e,t,n){e.exports=function(e){e.component("taxFormUpdateIframe",{template:n(730),controller:["SESSION_ID","PageService",function(e,t){var n=this;n.$onInit=function(){var a=t.getCurrentPage().pageData.accountEntity;n.params={},n.params.sessionId=e,n.params.action=a.client?"AA_CLIENT_DASHBOARD":"AA_TAX_FORMS";var r=t.getActivePickerSelections();r.length>0&&(a.client?n.params.client=r[0].accountId:n.params.selectedAccountId=r[0].accountId),n.onFrameLoad=function(){return t.setIsPageLoading(!1)},t.setOnPageLoad(angular.noop)}}]})}},function(e,t){e.exports='<load-iframe name="taxFrame" url="\'/Universal/servlet/service.ClassicAmLandingServlet\'" params="$ctrl.params" method="POST" load-callback="$ctrl.onFrameLoad()" page-frame="true"></load-iframe>'},function(e,t,n){e.exports=function(e){e.component("amFormTaxIds",{require:{parentForm:"^^form",ngModelCtrl:"ngModel",formServerErrorsCtrl:"^^?formServerErrors"},bindings:{taxIds:"=ngModel",rules:"<",maxTaxIds:"<?",legacyId:"@?",legacyIdType:"@?",associatedId:"<?"},template:n(732),controller:["EntityService","ModalService","$translate","IS_MOBILE",function(e,t,n,a){var r=this,i=function(e){if(angular.isUndefined(e))return-1;for(var t=0;t<r.taxResidencyList.length;t++){if(r.taxResidencyList[t].alpha3===e.alpha3)return t}return-1},o=function(e){var t=i(e);r.taxResidencyList.splice(t,1)},s=function(e){return-1!==i(e)};this.$onInit=function(){this.taxIds||(this.taxIds=[]),this.taxResidencyList=angular.copy(this.rules.allowedTaxIdCountries),this.maxTaxIds||(this.maxTaxIds=Math.min(this.taxResidencyList.length,5)),this.isCurrentTaxIdCountryDisabled=function(){var e=r.getCurrentTaxId();if(angular.isUndefined(e)||angular.isUndefined(e.idCountry))return!1;var t=this.rules.taxIdCountryRules[e.idCountry.alpha3];if(angular.isUndefined(t))return!1;var n=t.isReadOnly,a=angular.isDefined(this.associatedId)&&this.associatedId.idNumber===e.idNumber&&this.associatedId.idCountry.alpha3===e.idCountry.alpha3;return angular.isDefined(e.idNumber)&&(n||a)},this.isCurrentTaxIdDisabled=function(){return!!this.isCurrentTaxIdCountryDisabled()||!r.getCurrentTaxId().isApplicable},this.addTaxId=function(){this.taxIds.length>0&&(o(this.getCurrentTaxId().idCountry),this.parentForm["taxIdCountry_"+(this.taxIds.length-1)].$setPristine(),this.parentForm["taxIdNumber_"+(this.taxIds.length-1)].$setPristine(),angular.isDefined(this.parentForm["taxIdNA_"+(this.taxIds.length-1)])&&this.parentForm["taxIdNA_"+(this.taxIds.length-1)].$setPristine());this.taxIds.push({missingTaxIdAnswer:{},isApplicable:!0})},this.removeTaxId=function(e){var t=this.taxIds.indexOf(e);(function(e){if(angular.isDefined(e)&&angular.isDefined(e.idCountry)){var t=r.rules.taxIdCountryRules[e.idCountry.alpha3];if(angular.isDefined(t)&&t.isAlwaysRemovable&&t.isReadOnly)return!0}return!1})(e)&&(this.readOnlyTaxIds||(this.readOnlyTaxIds=[]),this.readOnlyTaxIds.push(e));var n=void 0;angular.isDefined(e)&&angular.isDefined(e.idCountry)&&(n=e.idCountry),angular.isDefined(n)&&!s(n)&&this.taxResidencyList.push(n),t===this.taxIds.length-1&&t>0&&(n=this.taxIds[t-1].idCountry,angular.isDefined(n)&&!s(n)&&this.taxResidencyList.push(n)),r.taxIds.splice(t,1),0===this.taxIds.length&&this.addTaxId()},this.getCurrentTaxId=function(){return this.taxIds[this.taxIds.length-1]},this.isAddDisabled=function(){var e=this.getCurrentTaxId();return!e.idCountry||!e.idNumber},this.isRemoveDisabled=function(e){if(angular.isUndefined(e)||angular.isUndefined(e.idCountry))return!1;var t=this.rules.taxIdCountryRules[e.idCountry.alpha3];return!angular.isUndefined(t)&&(!angular.isUndefined(e.idNumber)&&(!t.isAlwaysRemovable&&t.isReadOnly))},this.isDeletable=function(){if(r.taxIds.length>1)return!0;var e=this.getCurrentTaxId();return(1!==r.taxIds.length||!angular.isUndefined(e)&&!angular.isUndefined(e.idCountry))&&(1!==r.rules.allowedTaxIdCountries.length&&!this.isRemoveDisabled(e))},this.getTaxIdType=function(e){return angular.isUndefined(e)||angular.isUndefined(e.idCountry)||angular.isUndefined(this.rules.taxIdCountryRules[e.idCountry.alpha3])?"OTHER":this.rules.taxIdCountryRules[e.idCountry.alpha3].taxIdType},this.isTaxIdDisabled=function(e){var t=r.rules.taxIdCountryRules[e.idCountry.alpha3],n=angular.isDefined(t)&&t.isReadOnly,a=angular.isDefined(this.associatedId)&&this.associatedId.idNumber===e.idNumber&&this.associatedId.idCountry.alpha3===e.idCountry.alpha3;return n||a||!e.isApplicable},this.getTaxIdMaxlength=function(e){var t=r.taxIds[e],n=void 0;angular.isDefined(t)&&angular.isDefined(t.idCountry)&&(n=r.rules.taxIdCountryRules[t.idCountry.alpha3]);var a="o{*}";return angular.isDefined(n)&&(a="o{1,"+n.maxLength+"}"),"'alias': 'latin', 'mask': '"+a+"'"},this.isNaSwitchDisabled=function(e){return!angular.isUndefined(e)&&!angular.isUndefined(e.idCountry)&&this.rules.taxIdCountryRules[e.idCountry.alpha3].isRequired},this.onNaSwitchChange=function(e){var t=this.taxIds.indexOf(e);e.isApplicable?(e.idNumber="",this.parentForm["taxIdNumber_"+t].$setPristine()):e.idNumber="N.A."},this.onCountryChange=function(){var e=r.taxIds.length-1,t=r.taxIds[e];if(!angular.isUndefined(t)&&!angular.isUndefined(t.idCountry)){var n=this.rules.taxIdCountryRules[t.idCountry.alpha3];if(n.isRequired&&(t.isApplicable=!0,"N.A."===t.idNumber&&(t.idNumber=""),t.missingTaxIdAnswer={}),n.isAlwaysRemovable&&n.isReadOnly&&r.readOnlyTaxIds)for(var a=0;a<r.readOnlyTaxIds.length;++a)if(r.readOnlyTaxIds[a].idCountry.alpha3===t.idCountry.alpha3){r.taxIds[e]=r.readOnlyTaxIds[a],r.readOnlyTaxIds.splice(a,1);break}}},this.isExplanationVisible=function(e){var t=r.taxIds[e];return!t.isApplicable&&angular.isDefined(t.idCountry)&&this.rules.taxIdExplanationRuleApplicable},this.onMissingTaxIdAnswerChange=function(e){if(e.missingTaxIdAnswer){var t=this.taxIds.indexOf(e);delete r.getServerErrors()["missingTaxIdAnswer_"+t]}},this.showTaxWarningFor=function(e){return!angular.isUndefined(e)&&!angular.isUndefined(e.idCountry)&&this.rules.taxIdCountryRules[e.idCountry.alpha3].warningMessageAvailable},r.getServerErrors=function(){return r.formServerErrorsCtrl&&r.formServerErrorsCtrl.getServerErrors()||{}},0===this.taxIds.length&&this.addTaxId();for(var e=0;e<this.taxIds.length-1;++e)o(this.taxIds[e].idCountry);for(e=0;e<this.taxIds.length;++e){var t=this.taxIds[e];this.rules.taxIdExplanationRuleApplicable&&angular.isUndefined(t.missingTaxIdAnswer)&&(t.missingTaxIdAnswer={}),t.isApplicable="N.A."!==t.idNumber}},r.$onChanges=function(e){if(e.associatedId){var t=e.associatedId.currentValue;if(angular.isUndefined(t)||null===t)return;angular.forEach(this.taxIds,function(e){angular.isDefined(e.idCountry)&&e.isApplicable&&t.idCountry.alpha3===e.idCountry.alpha3&&(e.idNumber=t.idNumber)})}},r.showTaxResidencyPopup=function(){var e="<div>",t="taxId.help.taxAgency_"+this.rules.ibEntity,a=n.instant(t);return a===t&&(a=n.instant("taxId.help.taxAgency_LLC")),e+="<p>"+n.instant("taxId.help.taxCollection.message",{taxAgency:a})+"</p>","AU"===this.rules.ibEntity&&(e+="<p>"+n.instant("taxId.help.taxCollection.ibAu.message")+"</p>",e+="<p>"+n.instant("taxId.help.ibAu.noTfin.message")+"</p>"),e+="<p>"+n.instant("taxId.help.ibLlc.message")+"</p>",e+="<p>"+n.instant("taxId.help.noTaxId.message")+"</p>","INDIVIDUAL"!==this.rules.entityType&&"JOINT"!==this.rules.entityType&&(e+="<b>"+n.instant("taxId.help.registrationNum")+"</b>",e+="<p>"+n.instant("taxId.help.registrationNumberHelpText")+"</p>"),e+="</div>"},r.getPopoverTrigger=function(){return a?"click":"mouseenter"}}]})}},function(e,t){e.exports='<h6 class="subtitle">{{\'entity.header.taxIds\' | translate}}  <am-button btn-type="icon" btn-icon="fa-question-circle" data-popover="{{$ctrl.showTaxResidencyPopup()}}" popover-html="true" popover-trigger="{{$ctrl.getPopoverTrigger()}}" popover-placement="right" popover-title="{{\'entity.header.taxIds\' | translate}}"></am-button></h6>\n\n\x3c!-- Legacy ID --\x3e\n<am-form-private-label data-private ng-if="::$ctrl.legacyId.length > 0" label-text="\'entity.label.legacyId\' | translate:{idType : (\'taxId.type.\' + $ctrl.legacyIdType | translate)}" value-text="$ctrl.legacyId"></am-form-private-label>\n\x3c!-- Added Tax Residencies --\x3e\n<div data-private ng-repeat="taxId in $ctrl.taxIds" ng-if="!$last">\n    <am-form-country-select name="{{\'taxIdCountry_\' + $index}}" ng-model="taxId.idCountry" countries="[taxId.idCountry]" label-text="{{\'taxId.label.country\' | translate}}" is-required="true" is-disabled="true"></am-form-country-select>\n    <am-form-input data-private name="{{\'taxIdNumber_\' + $index}}" ng-model="taxId.idNumber" is-disabled="$ctrl.isTaxIdDisabled(taxId)" label-text="{{\'taxId.label.number.\' + $ctrl.getTaxIdType(taxId) | translate}}" is-required="taxId.isApplicable" input-mask="$ctrl.getTaxIdMaxlength($index)" obfuscate="true"></am-form-input>\n    <am-form-switch name="{{\'taxIdNA_\' + $index}}" ng-model="taxId.isApplicable" label-text="{{\'taxId.label.na\' | translate}}" is-disabled="true"></am-form-switch> \n    <div class="form-group" ng-if="$ctrl.isExplanationVisible($index)">\n        <p>{{\'missingTaxId.question\' | translate}}</p>\n        <br />\n        <div class="row" ng-repeat="answer in $ctrl.rules.allowedMissingTaxIdAnswers">\n            <div class="col-xs-2 col-sm-1 col-md-1 col-lg-1">\n                <p class="text-center">\n                    <input name="{{\'missingTaxIdAnswer_\'+ ($index)}}" type="radio" ng-model="taxId.missingTaxIdAnswer.answerType" value="{{answer}}" i-check required ng-change="$ctrl.onMissingTaxIdAnswerChange(taxId)"/>\n                </p>\n            </div>\n            <div class="col-xs-10 col-sm-11 col-md-11 col-lg-11">\n                <p translate="{{\'missingTaxId.answer.\' + answer}}" translate-values="{ \'country\' : (\'country.\' + taxId.idCountry.alpha3 | translate)}"></p>\n            </div>\n        </div>\n        <br />\n        <div class="alert alert-danger" ng-if="$ctrl.getServerErrors()[\'missingTaxIdAnswer_\'+($index)]">\n        \t<p>{{\'field.error.\'+ $ctrl.getServerErrors()[\'missingTaxIdAnswer_\'+($index)] | translate}}</p>\n        </div>\n        <div ng-if="taxId.missingTaxIdAnswer.answerType === \'OTHER\'">\n            <div>\n                <div>\n                    <br>\n                    <am-form-input name="{{\'missingTaxIdExplanation_\'+ ($index)}}" ng-model="taxId.missingTaxIdAnswer.explanation" type="text" label-text="{{\'fatca.answer.field.explanation\' | translate}}" maxlength="250" required></am-form-input>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="alert alert-warning" ng-show="$ctrl.showTaxWarningFor(taxId)">\n        <p>\n            {{\'tax_res_\' + taxId.idCountry.alpha3 + \'_warning\' | translate}}\n        </p>\n    </div>\n    <div class="form-group">\n        <div class="row">\n            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n                <am-button on-click="$ctrl.removeTaxId(taxId)" btn-icon="fa-times" btn-text="{{\'taxId.button.remove\' | translate}}" is-disabled="$ctrl.isRemoveDisabled(taxId)"></am-button>\n            </div>\n        </div>\n    </div>\n    <hr />\n</div>\n\x3c!-- New Tax Residency --\x3e\n<am-form-country-select data-private name="{{\'taxIdCountry_\' + ($ctrl.taxIds.length - 1)}}" ng-model="$ctrl.getCurrentTaxId().idCountry" empty-option-text="{{\'word.chooseOne\' | translate}}" countries="$ctrl.taxResidencyList" label-text="{{\'taxId.label.country\' | translate}}" is-disabled="$ctrl.isCurrentTaxIdCountryDisabled()" is-required="true" model-listener="$ctrl.onCountryChange()"></am-form-country-select>\n<am-form-input data-private name="{{\'taxIdNumber_\' + ($ctrl.taxIds.length - 1)}}" ng-model="$ctrl.getCurrentTaxId().idNumber" label-text="{{\'taxId.label.number.\' + $ctrl.getTaxIdType($ctrl.getCurrentTaxId()) | translate}}" is-disabled="$ctrl.isCurrentTaxIdDisabled()" is-required="$ctrl.getCurrentTaxId().isApplicable" input-mask="$ctrl.getTaxIdMaxlength($ctrl.taxIds.length - 1)" obfuscate="true"></am-form-input>\n<am-form-switch data-private name="{{\'taxIdNA_\' + ($ctrl.taxIds.length - 1)}}" ng-model="$ctrl.getCurrentTaxId().isApplicable" label-text="{{\'taxId.label.na\' | translate}}" model-listener="$ctrl.onNaSwitchChange($ctrl.getCurrentTaxId())" is-disabled="$ctrl.isNaSwitchDisabled($ctrl.getCurrentTaxId())"></am-form-switch>\n<div data-private class="form-group" ng-if="$ctrl.isExplanationVisible($ctrl.taxIds.length - 1)">\n    <p>{{\'missingTaxId.question\' | translate}}</p>\n    <br />\n    <div class="row" ng-repeat="answer in $ctrl.rules.allowedMissingTaxIdAnswers">\n        <div class="col-xs-2 col-sm-1 col-md-1 col-lg-1">\n            <p class="text-center">\n                <input name="{{\'missingTaxIdAnswer_\'+ ($ctrl.taxIds.length - 1)}}" type="radio" ng-model="$ctrl.getCurrentTaxId().missingTaxIdAnswer.answerType" value="{{answer}}" i-check required ng-change="$ctrl.onMissingTaxIdAnswerChange($ctrl.getCurrentTaxId())"/>\n            </p>\n        </div>\n        <div class="col-xs-10 col-sm-11 col-md-11 col-lg-11">\n            <p translate="{{\'missingTaxId.answer.\' + answer}}" translate-values="{ \'country\' : (\'country.\' + $ctrl.getCurrentTaxId().idCountry.alpha3 | translate)}"></p>\n        </div>\n    </div>\n    <br/>\n    <div class="alert alert-danger" ng-if="$ctrl.getServerErrors()[\'missingTaxIdAnswer_\'+($ctrl.taxIds.length - 1)]">\n    <p>{{\'field.error.\'+$ctrl.getServerErrors()[\'missingTaxIdAnswer_\'+($ctrl.taxIds.length - 1)] | translate}}</p>\n    </div>\n    <div ng-if="$ctrl.getCurrentTaxId().missingTaxIdAnswer.answerType === \'OTHER\'">\n        <div>\n            <div>\n                <br>\n                <am-form-input name="{{\'missingTaxIdExplanation_\'+ ($ctrl.taxIds.length - 1)}}" ng-model="$ctrl.getCurrentTaxId().missingTaxIdAnswer.explanation" type="text" label-text="{{\'fatca.answer.field.explanation\' | translate}}" maxlength="250" required></am-form-input>\n            </div>\n        </div>\n    </div>\n</div>\n<div class="alert alert-danger" ng-show="$ctrl.showTaxWarningFor($ctrl.getCurrentTaxId())">\n    <p>{{\'tax_res_\' + $ctrl.getCurrentTaxId().idCountry.alpha3 + \'_warning\' | translate}}</p>\n</div>\n<div class="alert alert-danger" ng-show="$ctrl.getServerErrors()[\'invalid_update\']">\n    <p>{{\'profile.error.invalid_update.\'+ $ctrl.getServerErrors()[\'invalid_update\'] | translate}}</p>\n</div>\n<div class="form-group">\n    <div class="row">\n        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n            <am-button ng-if="$ctrl.isDeletable()" on-click="$ctrl.removeTaxId($ctrl.getCurrentTaxId())" btn-icon="fa-times" btn-text="{{\'taxId.button.remove\' | translate}}"></am-button>\n            <am-button ng-if="$ctrl.taxIds.length < $ctrl.maxTaxIds" btn-icon="fa-plus" on-click="$ctrl.addTaxId()" is-disabled="$ctrl.isAddDisabled()" btn-text="{{\'taxId.button.add\' | translate}}"></am-button>\n        </div>\n    </div>\n</div>'},function(e,t){e.exports=function(e){e.component("legalEntityType",{require:{parentForm:"^^form"},bindings:{entity:"=ngModel",rules:"<",serverErrors:"<?"},templateUrl:e.WEBAPP_ROOT+"/components/legalentity/legalEntityTypeForm.html",controller:function(){var e=this;e.$onInit=function(){e.onLegalEntityTypeChange=function(){angular.isUndefined(e.entity.legalEntityType)||"PUBLIC"!==e.entity.legalEntityType&&(e.entity.exchange=void 0,e.entity.exchangeSymbol=void 0)}}}})}},function(e,t,n){e.exports=function(e){e.component("amFormRegistrationNumbers",{require:{parentForm:"^^form"},bindings:{entity:"<",entityRules:"<"},template:n(735),controller:function(){var e=this;e.$onInit=function(){e.entity.identifications=e.entity.identifications||[],0===e.entity.identifications.length&&e.entity.identifications.push({idType:"REGISTRATION_NUMBER"}),e.registrationNumber=e.entity.identifications[0],e.associatedId=void 0,e.onRegistrationNumberChanged=function(){e.entity.taxIdSameAsRegNumber&&(e.associatedId=angular.copy(e.registrationNumber))},e.onSwitchChange=function(){e.entity.taxIdSameAsRegNumber?e.associatedId=angular.copy(e.registrationNumber):e.associatedId=void 0},e.getIdTypeRules=function(){var t=e.registrationNumber.idType;return angular.isUndefined(t)?{}:e.entityRules.identificationRules.identificationTypeRules[t]}}}})}},function(e,t){e.exports='\x3c!-- \n    Registration Number\n--\x3e\n<div ng-if="::$ctrl.entityRules.identificationRules">\n    <h6 class="subtitle">{{ \'registrationNumber.header\' | translate }}</h6>\n    \x3c!--\n        Registration Number Country\n    --\x3e\n    <am-form-country-select name="idCountry_0" ng-model="$ctrl.registrationNumber.idCountry" countries="$ctrl.getIdTypeRules().allowedCountries" label-text="{{\'identification.label.idCountry\' | translate}}" model-listener="$ctrl.onRegistrationNumberChanged()" is-required="true"></am-form-country-select>\n    \x3c!--\n        Registration Number\n    --\x3e\n    <am-form-input name="idNumber_0" ng-model="$ctrl.registrationNumber.idNumber" label-text="{{ \'identification.type.REGISTRATION_NUMBER\' | translate }}" change-listener="$ctrl.onRegistrationNumberChanged()" maxlength="64" required obfuscate="true"></am-form-input>\n    \x3c!--\n        Same Taxt Id\n    --\x3e\n    <am-form-switch ng-model="$ctrl.entity.taxIdSameAsRegNumber" label-text="{{ \'registrationNumber.label.sameTaxId\' | translate }}" model-listener="$ctrl.onSwitchChange()"></am-form-switch>\n</div>\n<div ng-if="::!$ctrl.entityRules.identificationRules">\n    <identifications-review identifications="$ctrl.entity.identifications"></identifications-review>\n</div>\n\x3c!--\n    Tax Ids\n--\x3e\n<am-form-tax-ids ng-if="$ctrl.entityRules.taxIdRules" ng-model="$ctrl.entity.taxIds" rules="$ctrl.entityRules.taxIdRules" associated-id="$ctrl.associatedId"></am-form-tax-ids>'},function(e,t){e.exports=function(e){function t(e){return"ABN"===e.code||"ACN"===e.code||"AFS"===e.code||"CAR"===e.code?"digits":"latin"}Inputmask.extendAliases({digits:{alias:"numeric",allowPlus:!1,allowMinus:!1,rightAlign:!1,digits:0,min:0}}),e.component("jurisdictionInfoForm",{require:{formServerErrorsCtrl:"^^?formServerErrors"},bindings:{jurisdictionInfo:"=ngModel",rules:"<"},templateUrl:e.WEBAPP_ROOT+"/components/jurisdiction/jurisdictionInfoForm.html",controller:["$timeout","ResourceService","$translate",function(t,n,a){var r=this,i=function(e){for(var t=0;t<r.allowedCountries.length;t++){if(r.allowedCountries[t].alpha3===e.alpha3){r.allowedCountries.splice(t,1);break}}};r.$onInit=function(){r.jurisdictionInfo=r.jurisdictionInfo||{},r.allowedCountries=angular.copy(r.rules.allowedRegulatorCountries),r.jurisdictionInfo.jurisdictionAreas=r.jurisdictionInfo.jurisdictionAreas||[],angular.forEach(r.jurisdictionInfo.jurisdictionAreas,function(e){i(e.country)}),r.displayAddButton=!0,r.getJurisdictionTypeLabel=function(e){var t="advisorRegulatoryLicenseInfo.areaType.";r.rules.broker?t="brokerRegulatoryLicenseInfo.areaType.":r.rules.singleHedgeFund?t="shfRegulatoryLicenseInfo.areaType.":r.rules.organization&&(t="organizationRegulatoryLicenseInfo.areaType.");var n=t+e;return a.instant(n)},r.getInstructionsText=function(){var e="jurisdictionInfo.instruction.financialAdvisor";return r.rules.broker?e="jurisdictionInfo.instruction.broker":r.rules.singleHedgeFund?e="jurisdictionInfo.instruction.shf":r.rules.organization&&(e="jurisdictionInfo.instruction.organization"),a.instant(e,{uStartTag:"<u>",uEndTag:"</u>"})},r.onRegulatorCountryChange=function(){var a=r.currentCountry;angular.isDefined(a)&&angular.isDefined(a.alpha3)&&a.alpha3.length>0&&t(function(){!function(t){n.create(e.AM_SERVER_PATH+"/JurisdictionUtil/JurisdictionRegulators",{country:t.country}).then(function(e){var n=e.data,a=n.jurisdictionArea,i=n.jurisdictionAreaRules||{};r.rules.jurisdictionInfoRules.areaRules[a.country.alpha3]=i,t.jurisdictionRegulators=a.jurisdictionRegulators||[]}).catch(function(e){})}(r.addJurisdictionArea()),r.displayAddButton=!0},100)},r.addJurisdictionArea=function(){var e={country:r.currentCountry};return r.jurisdictionInfo.jurisdictionAreas.push(e),i(e.country),r.currentCountry={},e},r.toggleAddButton=function(){r.displayAddButton=!r.displayAddButton},r.getMaxJurisdictionAreas=function(){return"SINGLE_COUNTRY"===r.jurisdictionInfo.jurisdictionType?1:"NONE"===r.jurisdictionInfo.jurisdictionType?0:r.rules.maxJurisdictions},r.isAddDisabled=function(){return r.jurisdictionInfo.jurisdictionAreas.length>=r.getMaxJurisdictionAreas()},r.removeJurisdictionArea=function(e){for(var t=0;t<r.jurisdictionInfo.jurisdictionAreas.length;t++){var n=r.jurisdictionInfo.jurisdictionAreas[t];if(e.country.alpha3===n.country.alpha3){r.jurisdictionInfo.jurisdictionAreas.splice(t,1);break}}r.allowedCountries.indexOf(e.country)<0&&r.allowedCountries.push(e.country),r.currentCountry={}},r.updateJurisdictionType=function(){r.trimJurisdictionAreas(),r.allowedCountries=angular.copy(r.rules.allowedRegulatorCountries),angular.forEach(r.jurisdictionInfo.jurisdictionAreas,function(e){i(e.country)})},r.trimJurisdictionAreas=function(){var e=r.getMaxJurisdictionAreas();r.jurisdictionInfo.jurisdictionAreas.length>e&&(r.jurisdictionInfo.jurisdictionAreas=r.jurisdictionInfo.jurisdictionAreas.slice(0,e))},r.getSelectedAreaRegulators=function(e){var t=[];if(angular.isDefined(e.jurisdictionRegulators))for(var n=0;n<e.jurisdictionRegulators.length;n++){var a=e.jurisdictionRegulators[n];a.checked&&t.push(a)}return t},r.getRegulatorRules=function(e,t){for(countryalpha3 in r.rules.jurisdictionInfoRules.areaRules)if(countryalpha3===e.country.alpha3){var n=r.rules.jurisdictionInfoRules.areaRules[countryalpha3];for(regulatorCode in n.regulatorRules)if(regulatorCode===t.code)return n.regulatorRules[regulatorCode]}return{}},r.getServerErrors=function(){return r.formServerErrorsCtrl&&r.formServerErrorsCtrl.getServerErrors()||{}}}}]}),e.component("unknownRegulator",{require:{jurisdictionInfoFormCtrl:"^jurisdictionInfoForm"},bindings:{regulator:"=ngModel",index:"@",area:"<",rules:"<"},templateUrl:e.WEBAPP_ROOT+"/components/jurisdiction/unknownRegulator.html",controller:["$translate",function(e){var n=this;function a(e,t){for(attributeCode in n.rules.attributeRules)if(attributeCode===t.code)return n.rules.attributeRules[attributeCode];for(serviceType in n.rules.serviceRules)if(serviceType===e.serviceType){var a=n.rules.serviceRules[serviceType];for(attributeCode in a.attributeRules)if(attributeCode===t.code)return a.attributeRules[attributeCode]}return{}}n.$onInit=function(){n.getRegulatorLabel=function(t){var n="jurisdiction.regulator."+t.code,a=e.instant(n);return a===n?t.name:a},n.getServiceLabel=function(t){var n="jurisdiction.regulatorService."+t,a=e.instant(n);return a===n?t.label:a},n.getAttributeLabel=function(t){var n="jurisdiction.regulatorAttribute."+t,a=e.instant(n);return a===n?t:a},n.getSelectedServices=function(){var e=[];if(angular.isDefined(n.regulator.services))for(var t=0;t<n.regulator.services.length;t++){var a=n.regulator.services[t];a.checked&&e.push(a)}return e},n.getRegulatorLevelPrefix=function(){return n.area.country.alpha3+"_"+n.regulator.code},n.getServiceLevelPrefix=function(e){return n.area.country.alpha3+"_"+n.regulator.code+"_"+e.serviceType},n.isAttributeRequired=function(e,t){return a(e,t).required||!1},n.getAttributeMaxLength=function(e,t){return a(e,t).maxLength||100},n.getAttributeInputMaskAlias=function(e,n){return t(n)},n.isRegulatorNameRequired=function(){return n.rules.userSpecifiedRegulatorRules.required||!1},n.getRegulatorNameMaxLength=function(){return n.rules.userSpecifiedRegulatorRules.maxLength||100},n.getRegulatorNameInputMaskAlias=function(){return n.rules.userSpecifiedRegulatorRules.inputMaskAlias||""},n.getServerErrors=function(){return n.jurisdictionInfoFormCtrl&&n.jurisdictionInfoFormCtrl.getServerErrors()||{}}}}]}),e.component("usStatesRegulator",{require:{jurisdictionInfoFormCtrl:"^jurisdictionInfoForm"},bindings:{regulator:"=ngModel",index:"@",area:"<",rules:"<"},templateUrl:e.WEBAPP_ROOT+"/components/jurisdiction/usStatesRegulator.html",controller:["$translate",function(e){var n=this;function a(e){for(attributeCode in n.rules.attributeRules)if(attributeCode===e.code)return n.rules.attributeRules[attributeCode];return{}}n.$onInit=function(){n.getRegulatorLabel=function(t){var n="jurisdiction.regulator."+t.code,a=e.instant(n);return a===n?t.name:a},n.getFirstHalf=function(e){var t=e.length/2;return e.slice(0,t)},n.getSecondHalf=function(e){var t=e.length,n=t/2;return e.slice(n,t)},n.getAttributeLabel=function(t){var n="jurisdiction.regulatorAttribute."+t,a=e.instant(n);return a===n?t:a},n.getRegulatorLevelPrefix=function(){return n.area.country.alpha3+"_"+n.regulator.code},n.isAttributeRequired=function(e){return a(e).required||!1},n.getAttributeMaxLength=function(e){return a(e).maxLength||100},n.getAttributeInputMaskAlias=function(e){return t(e)},n.getSelectedStates=function(){var e=[];if(angular.isDefined(n.regulator.regulatedStateOptions))for(var t=0;t<n.regulator.regulatedStateOptions.length;t++){var a=n.regulator.regulatedStateOptions[t];a.checked&&e.push(a)}return e},n.getServerErrors=function(){return n.jurisdictionInfoFormCtrl&&n.jurisdictionInfoFormCtrl.getServerErrors()||{}}}}]}),e.component("servicesRegulator",{require:{jurisdictionInfoFormCtrl:"^jurisdictionInfoForm"},bindings:{regulator:"=ngModel",index:"@",area:"<",rules:"<"},templateUrl:e.WEBAPP_ROOT+"/components/jurisdiction/servicesRegulator.html",controller:["$translate",function(e){var n=this;function a(e,t){for(serviceType in n.rules.serviceRules)if(serviceType===e.serviceType){var a=n.rules.serviceRules[serviceType];for(attributeCode in a.attributeRules)if(attributeCode===t.code)return a.attributeRules[attributeCode]}}n.$onInit=function(){n.getRegulatorLabel=function(t){var n="jurisdiction.regulator."+t.code,a=e.instant(n);return a===n?t.name:a},n.getServiceLabel=function(t){var n="jurisdiction.regulatorService."+t,a=e.instant(n);return a===n?t.label:a},n.getAttributeLabel=function(t){var n="jurisdiction.regulatorAttribute."+t,a=e.instant(n);return a===n?t:a},n.getSelectedServices=function(){var e=[];if(angular.isDefined(n.regulator.services))for(var t=0;t<n.regulator.services.length;t++){var a=n.regulator.services[t];a.checked&&e.push(a)}return e},n.getRegulatorLevelPrefix=function(){return n.area.country.alpha3+"_"+n.regulator.code},n.getServiceLevelPrefix=function(e){return n.area.country.alpha3+"_"+n.regulator.code+"_"+e.serviceType},n.isAttributeRequired=function(e,t){return a(e,t).required||!1},n.getAttributeMaxLength=function(e,t){return a(e,t).maxLength||100},n.getAttributeInputMaskAlias=function(e,n){return t(n)},n.getServerErrors=function(){return n.jurisdictionInfoFormCtrl&&n.jurisdictionInfoFormCtrl.getServerErrors()||{}}}}]}),e.component("servicesAndLicenseTypesRegulator",{require:{jurisdictionInfoFormCtrl:"^jurisdictionInfoForm"},bindings:{regulator:"=ngModel",index:"@",area:"<",rules:"<"},templateUrl:e.WEBAPP_ROOT+"/components/jurisdiction/servicesAndLicenseTypesRegulator.html",controller:["$translate",function(e){var n=this;function a(e,t,a){for(serviceType in n.rules.serviceRules)if(serviceType===e.serviceType){var r=n.rules.serviceRules[serviceType];for(attributeCode in r.attributeRules)if(attributeCode===t.code)return r.attributeRules[attributeCode];for(aLicenseType in r.licenseTypeRules)if(a===aLicenseType){var i=r.licenseTypeRules[a];for(attributeCode in i.attributeRules)if(attributeCode===t.code)return i.attributeRules[attributeCode]}}return{}}n.$onInit=function(){n.getRegulatorLabel=function(t){var n="jurisdiction.regulator."+t.code,a=e.instant(n);return a===n?t.name:a},n.getServiceLabel=function(t){var n="jurisdiction.regulatorService."+t,a=e.instant(n);return a===n?t:a},n.getLicenseLabel=function(t){var n="jurisdiction.regulatorLicense."+t,a=e.instant(n);return a===n?t:a},n.getAttributeLabel=function(t){var n="jurisdiction.regulatorAttribute."+t,a=e.instant(n);return a===n?t:a},n.isAnyLicenseTypeChecked=function(e){for(var t=0;t<e.length;t++){if(e[t].checked)return!0}return!1},n.getSelectedServices=function(){var e=[];if(angular.isDefined(n.regulator.services))for(var t=0;t<n.regulator.services.length;t++){var a=n.regulator.services[t];a.checked&&e.push(a)}return e},n.getRegulatorLevelPrefix=function(){return n.area.country.alpha3+"_"+n.regulator.code},n.getServiceLevelPrefix=function(e){return n.area.country.alpha3+"_"+n.regulator.code+"_"+e.serviceType},n.getLicenseTypeLevelPrefix=function(e,t){return n.area.country.alpha3+"_"+n.regulator.code+"_"+e.serviceType+"_"+t.licenseType},n.isAttributeRequired=function(e,t,n){return a(e,t,n).required||!1},n.getAttributeMaxLength=function(e,t,n){return a(e,t,n).maxLength||100},n.getAttributeInputMaskAlias=function(e,n,a){return t(n)},n.getServerErrors=function(){return n.jurisdictionInfoFormCtrl&&n.jurisdictionInfoFormCtrl.getServerErrors()||{}}}}]}),e.component("asicRegulator",{require:{jurisdictionInfoFormCtrl:"^jurisdictionInfoForm"},bindings:{regulator:"=ngModel",index:"@",area:"<",rules:"<"},templateUrl:e.WEBAPP_ROOT+"/components/jurisdiction/asicRegulator.html",controller:["$translate",function(e){var n=this;function a(e,t){for(serviceType in n.rules.serviceRules)if(serviceType===e.serviceType){var a=n.rules.serviceRules[serviceType];for(attributeCode in a.attributeRules)if(attributeCode===t.code)return a.attributeRules[attributeCode]}}n.$onInit=function(){n.getRegulatorLabel=function(t){var n="jurisdiction.regulator."+t.code,a=e.instant(n);return a===n?t.name:a},n.getServiceLabel=function(t){var n="jurisdiction.regulatorService."+t,a=e.instant(n);return a===n?t.label:a},n.getAttributeLabel=function(t){var n="jurisdiction.regulatorAttribute."+t,a=e.instant(n);return a===n?t:a},n.getInputAttributes=function(e){for(var t=[],n=0;n<e.financialRegulationAttributes.length;n++){var a=e.financialRegulationAttributes[n];"ABN"!==a.code&&"ACN"!==a.code&&"AFS"!==a.code&&"CAR"!==a.code||t.push(a)}return t},n.getAdviseCheckboxAttributes=function(e){for(var t=[],n=0;n<e.financialRegulationAttributes.length;n++){var a=e.financialRegulationAttributes[n];"ASEC"!==a.code&&"ADER"!==a.code&&"AFEC"!==a.code&&"AINV"!==a.code&&"ABON"!==a.code&&"AMLF"!==a.code||t.push(a)}return t},n.getDealCheckboxAttributes=function(e){for(var t=[],n=0;n<e.financialRegulationAttributes.length;n++){var a=e.financialRegulationAttributes[n];"DSEC"!==a.code&&"DDER"!==a.code&&"DFEC"!==a.code&&"DINV"!==a.code&&"DBON"!==a.code&&"DMLF"!==a.code||t.push(a)}return t},n.isAnyAdviseCheckboxChecked=function(e){for(var t=n.getAdviseCheckboxAttributes(e),a=0;a<t.length;a++){if(t[a].value)return!0}return!1},n.isAnyDealCheckboxChecked=function(e){for(var t=n.getDealCheckboxAttributes(e),a=0;a<t.length;a++){if(t[a].value)return!0}return!1},n.getSelectedServices=function(){var e=[];if(angular.isDefined(n.regulator.services))for(var t=0;t<n.regulator.services.length;t++){var a=n.regulator.services[t];a.checked&&e.push(a)}return e},n.hasProvidedAbnOrAcnAttribute=function(e){for(var t=0;t<e.financialRegulationAttributes.length;t++){var n=e.financialRegulationAttributes[t];if(("ABN"===n.code||"ACN"===n.code)&&n.value&&0!=n.value.length)return!0}return!1},n.hasProvidedAfsOrCarAttribute=function(e){for(var t=0;t<e.financialRegulationAttributes.length;t++){var n=e.financialRegulationAttributes[t];if(("AFS"===n.code||"CAR"===n.code)&&n.value&&0!=n.value.length)return!0}return!1},n.getRegulatorLevelPrefix=function(){return n.area.country.alpha3+"_"+n.regulator.code},n.getServiceLevelPrefix=function(e){return n.area.country.alpha3+"_"+n.regulator.code+"_"+e.serviceType},n.isAttributeRequired=function(e,t){return a(e,t).required||!1},n.getAttributeMaxLength=function(e,t){return a(e,t).maxLength||100},n.getAttributeInputMaskAlias=function(e,n){return t(n)},n.getServerErrors=function(){return n.jurisdictionInfoFormCtrl&&n.jurisdictionInfoFormCtrl.getServerErrors()||{}}}}]}),e.component("sfcRegulator",{require:{jurisdictionInfoFormCtrl:"^jurisdictionInfoForm"},bindings:{regulator:"=ngModel",index:"@",area:"<",rules:"<"},templateUrl:e.WEBAPP_ROOT+"/components/jurisdiction/sfcRegulator.html",controller:["$translate",function(e){var n=this;function a(e,t){for(serviceType in n.rules.serviceRules)if(serviceType===e.serviceType){var a=n.rules.serviceRules[serviceType];for(attributeCode in a.attributeRules)if(attributeCode===t.code)return a.attributeRules[attributeCode]}}n.$onInit=function(){n.getRegulatorLabel=function(t){var n="jurisdiction.regulator."+t.code,a=e.instant(n);return a===n?t.name:a},n.getServiceLabel=function(t){var n="jurisdiction.regulatorService."+t,a=e.instant(n);return a===n?t:a},n.getLicenseLabel=function(t){var n="jurisdiction.regulatorLicense."+t,a=e.instant(n);return a===n?t:a},n.getAttributeLabel=function(t){var n="jurisdiction.regulatorAttribute."+t,a=e.instant(n);return a===n?t:a},n.isAnyLicenseTypeChecked=function(e){for(var t=0;t<e.length;t++){if(e[t].checked)return!0}return!1},n.getSelectedServices=function(){var e=[];if(angular.isDefined(n.regulator.services))for(var t=0;t<n.regulator.services.length;t++){var a=n.regulator.services[t];a.checked&&e.push(a)}return e},n.getRegulatorLevelPrefix=function(){return n.area.country.alpha3+"_"+n.regulator.code},n.getServiceLevelPrefix=function(e){return n.area.country.alpha3+"_"+n.regulator.code+"_"+e.serviceType},n.isAttributeRequired=function(e,t){return a(e,t).required||!1},n.getAttributeMaxLength=function(e,t){return a(e,t).maxLength||100},n.getAttributeInputMaskAlias=function(e,n){return t(n)},n.getServerErrors=function(){return n.jurisdictionInfoFormCtrl&&n.jurisdictionInfoFormCtrl.getServerErrors()||{}}}}]})}},function(e,t){e.exports=function(e){e.component("jurisdictionInfoReview",{require:{formServerErrorsCtrl:"^^?formServerErrors"},bindings:{jurisdictionInfo:"=ngModel",rules:"<"},templateUrl:e.WEBAPP_ROOT+"/components/jurisdiction/jurisdictionInfoReview.html",controller:["$timeout","ResourceService","$translate",function(e,t,n){var a=this;a.$onInit=function(){a.jurisdictionInfo=a.jurisdictionInfo||{},a.jurisdictionInfo.jurisdictionAreas=a.jurisdictionInfo.jurisdictionAreas||[],a.getSelectedAreaRegulators=function(e){var t=[];if(angular.isDefined(e.jurisdictionRegulators))for(var n=0;n<e.jurisdictionRegulators.length;n++){var a=e.jurisdictionRegulators[n];a.checked&&t.push(a)}return t}}}]}),e.component("unknownRegulatorReview",{bindings:{regulator:"=ngModel",index:"@"},templateUrl:e.WEBAPP_ROOT+"/components/jurisdiction/unknownRegulatorReview.html",controller:["$translate",function(e){var t=this;t.$onInit=function(){t.getRegulatorLabel=function(t){var n="jurisdiction.regulator."+t.code,a=e.instant(n);return a===n?t.name:a},t.getServiceLabel=function(t){var n="jurisdiction.regulatorService."+t,a=e.instant(n);return a===n?t.label:a},t.getAttributeLabel=function(t){var n="jurisdiction.regulatorAttribute."+t,a=e.instant(n);return a===n?t:a}}}]}),e.component("usStatesRegulatorReview",{bindings:{regulator:"=ngModel",index:"@"},templateUrl:e.WEBAPP_ROOT+"/components/jurisdiction/usStatesRegulatorReview.html",controller:["$translate",function(e){var t=this;t.$onInit=function(){t.getRegulatorLabel=function(t){var n="jurisdiction.regulator."+t.code,a=e.instant(n);return a===n?t.name:a},t.getFirstHalf=function(e){var t=e.length/2;return e.slice(0,t)},t.getSecondHalf=function(e){var t=e.length,n=t/2;return e.slice(n,t)},t.getAttributeLabel=function(t){var n="jurisdiction.regulatorAttribute."+t,a=e.instant(n);return a===n?t:a}}}]}),e.component("servicesRegulatorReview",{bindings:{regulator:"=ngModel",index:"@"},templateUrl:e.WEBAPP_ROOT+"/components/jurisdiction/servicesRegulatorReview.html",controller:["$translate",function(e){var t=this;t.$onInit=function(){t.getRegulatorLabel=function(t){var n="jurisdiction.regulator."+t.code,a=e.instant(n);return a===n?t.name:a},t.getServiceLabel=function(t){var n="jurisdiction.regulatorService."+t,a=e.instant(n);return a===n?t.label:a},t.getAttributeLabel=function(t){var n="jurisdiction.regulatorAttribute."+t,a=e.instant(n);return a===n?t:a}}}]}),e.component("servicesAndLicenseTypesRegulatorReview",{bindings:{regulator:"=ngModel",index:"@"},templateUrl:e.WEBAPP_ROOT+"/components/jurisdiction/servicesAndLicenseTypesRegulatorReview.html",controller:["$translate",function(e){var t=this;t.$onInit=function(){t.getRegulatorLabel=function(t){var n="jurisdiction.regulator."+t.code,a=e.instant(n);return a===n?t.name:a},t.getServiceLabel=function(t){var n="jurisdiction.regulatorService."+t,a=e.instant(n);return a===n?t:a},t.getLicenseLabel=function(t){var n="jurisdiction.regulatorLicense."+t,a=e.instant(n);return a===n?t:a},t.getAttributeLabel=function(t){var n="jurisdiction.regulatorAttribute."+t,a=e.instant(n);return a===n?t:a},t.isAnyLicenseTypeChecked=function(e){for(var t=0;t<e.length;t++){if(e[t].checked)return!0}return!1},t.getSelectedServices=function(){var e=[];if(angular.isDefined(t.regulator.services))for(var n=0;n<t.regulator.services.length;n++){var a=t.regulator.services[n];a.checked&&e.push(a)}return e}}}]}),e.component("asicRegulatorReview",{bindings:{regulator:"=ngModel",index:"@"},templateUrl:e.WEBAPP_ROOT+"/components/jurisdiction/asicRegulatorReview.html",controller:["$translate",function(e){var t=this;t.$onInit=function(){t.getRegulatorLabel=function(t){var n="jurisdiction.regulator."+t.code,a=e.instant(n);return a===n?t.name:a},t.getServiceLabel=function(t){var n="jurisdiction.regulatorService."+t,a=e.instant(n);return a===n?t.label:a},t.getAttributeLabel=function(t){var n="jurisdiction.regulatorAttribute."+t,a=e.instant(n);return a===n?t:a},t.getInputAttributes=function(e){for(var t=[],n=0;n<e.financialRegulationAttributes.length;n++){var a=e.financialRegulationAttributes[n];"ABN"!==a.code&&"ACN"!==a.code&&"AFS"!==a.code&&"CAR"!==a.code||t.push(a)}return t},t.getAdviseCheckboxAttributes=function(e){for(var t=[],n=0;n<e.financialRegulationAttributes.length;n++){var a=e.financialRegulationAttributes[n];"ASEC"!==a.code&&"ADER"!==a.code&&"AFEC"!==a.code&&"AINV"!==a.code&&"ABON"!==a.code&&"AMLF"!==a.code||t.push(a)}return t},t.getDealCheckboxAttributes=function(e){for(var t=[],n=0;n<e.financialRegulationAttributes.length;n++){var a=e.financialRegulationAttributes[n];"DSEC"!==a.code&&"DDER"!==a.code&&"DFEC"!==a.code&&"DINV"!==a.code&&"DBON"!==a.code&&"DMLF"!==a.code||t.push(a)}return t}}}]}),e.component("sfcRegulatorReview",{bindings:{regulator:"=ngModel",index:"@"},templateUrl:e.WEBAPP_ROOT+"/components/jurisdiction/sfcRegulatorReview.html",controller:["$translate",function(e){var t=this;t.$onInit=function(){t.getRegulatorLabel=function(t){var n="jurisdiction.regulator."+t.code,a=e.instant(n);return a===n?t.name:a},t.getServiceLabel=function(t){var n="jurisdiction.regulatorService."+t,a=e.instant(n);return a===n?t:a},t.getLicenseLabel=function(t){var n="jurisdiction.regulatorLicense."+t,a=e.instant(n);return a===n?t:a},t.getAttributeLabel=function(t){var n="jurisdiction.regulatorAttribute."+t,a=e.instant(n);return a===n?t:a},t.isAnyLicenseTypeChecked=function(e){for(var t=0;t<e.length;t++){if(e[t].checked)return!0}return!1},t.getSelectedServices=function(){var e=[];if(angular.isDefined(t.regulator.services))for(var n=0;n<t.regulator.services.length;n++){var a=t.regulator.services[n];a.checked&&e.push(a)}return e}}}]})}},function(e,t){e.exports=function(e){Inputmask.extendAliases({memberId:{mask:"9{4,9}",alias:"numeric",rightAlign:!1}}),e.component("catDeclarationForm",{require:{parentForm:"^^form",formServerErrorsCtrl:"^^?formServerErrors"},bindings:{catReportingInfo:"=ngModel",rules:"<"},templateUrl:e.WEBAPP_ROOT+"/components/catreporting/catDeclarationForm.html",controller:["ResourceService",function(e){var t=this;t.$onInit=function(){t.isProductSelected=function(){return angular.isDefined(t.catReportingInfo.product)&&"UNKNOWN"!=t.catReportingInfo.product},t.isServiceSelected=function(){return angular.isDefined(t.catReportingInfo.service)&&"UNKNOWN"!=t.catReportingInfo.service},t.isCaisServiceSelected=function(){return angular.isDefined(t.catReportingInfo.caisService)&&"UNKNOWN"!=t.catReportingInfo.caisService},t.isFinraMember=function(){return t.catReportingInfo.finraMember},t.isNonFinraMember=function(){return angular.isDefined(t.catReportingInfo.finraMember)&&!t.catReportingInfo.finraMember},t.updateSroMpidValues=function(){var n=t.catReportingInfo.crdIdentifier;if(angular.isUndefined(n)||null==n||0==n.length)return t.catReportingInfo.sroMpid=void 0,void(t.allowedSroMpidValues=[]);var a={crdIdentifier:n};e.create(AM_APP_ROOT+"/CatReportingUtil/SroMpidValues",a).then(function(e){var n=e.data;if(t.allowedSroMpidValues=n.sroMpidValues||[],angular.isDefined(n.sroMpidValues)&&n.sroMpidValues.length&&angular.isDefined(t.catReportingInfo.sroMpid)&&null!==t.catReportingInfo.sroMpid)for(var a=0;a<n.sroMpidValues.length;++a)if(n.sroMpidValues[a].imid===t.catReportingInfo.sroMpid.imid&&n.sroMpidValues[a].exchangeId===t.catReportingInfo.sroMpid.exchangeId){t.catReportingInfo.sroMpid=n.sroMpidValues[a];break}}).catch(function(e){})},t.getServerErrors=function(){return t.formServerErrorsCtrl&&t.formServerErrorsCtrl.getServerErrors()||{}},t.getSroMpidDisplay=function(e){var t=e.exchangeId;return e.imid!==e.exchangeId+""&&(t+=" ("+e.imid+")"),t},t.updateSroMpidValues()}}]})}},function(e,t){e.exports=function(e){e.component("trustedContactForm",{bindings:{onUpdate:"&?"},templateUrl:e.WEBAPP_ROOT+"/components/trustedcontact/trustedContactForm.html",controller:["$translate","$timeout","ComponentService","ModalService","TrustedContactService","amEntityNameFilter",function(e,t,n,a,r,i){var o=this,s=function(){o.isLoading=!0,o.fetchedTrustedContactInfo=!1,r.fetchTrustedContactInfo().then(function(e){o.rules=e.rules,o.entities=e.entities,o.fetchedTrustedContactInfo=!0},function(t){o.errors=t.errors||{},o.submissionState=o.errors.internal?"FAILURE":"",o.fetchedTrustedContactInfo=!1;var n={title:e.instant("word.error"),modalData:{errors:[e.instant("internal.error.request_process")]}};a.openErrorModal(n)}).finally(function(){o.onUpdate&&o.onUpdate({entities:o.entities}),o.isLoading=!1})};o.$onInit=function(){s(),o.dirty=!1,o.viewAccountEntity=function(e){var t={title:i(e),templateUrl:"tcp-entity-modal.component",dialogClass:"modal-lg",modalData:{accountEntity:e}};a.openModal(t)},o.addTrustedContact=function(){var t={rules:o.rules,errors:o.errors,submissionState:o.submissionState},n={dialogClass:"modal-md",title:e.instant("trustedContact.add"),templateUrl:"trusted-contact-type-selection-modal.component",modalData:t};a.openModal(n).then(function(e){e&&e.success&&(s(),o.dirty=!0)})},o.editAccountEntity=function(t){if(t.editable){var n=o.entities.indexOf(t),r={rules:o.rules,entity:t,index:n,errors:o.errors,submissionState:o.submissionState},i={dialogClass:"modal-md",title:e.instant("trustedContact.edit"),templateUrl:"trusted-contact-type-selection-modal.component",modalData:r};a.openModal(i).then(function(e){e&&e.success&&(s(),o.dirty=!0)})}},o.deleteAccountEntity=function(t){if(t.deletable){var n=o.entities.indexOf(t),s=e.instant("trustedContact.delete.pending",{entityName:i(t)}),l=e.instant("trustedContact.delete.success",{entityName:i(t)}),c={title:e.instant("modal.title.DeleteTrustedContact"),modalData:{pendingText:s,successText:l,confirmFn:function(){return r.removeTrustedContact(n)},noSuccessScreen:!0}};a.openConfirmModal(c).then(function(e){"SUCCESS"===e&&(o.entities.splice(n,1),o.dirty=!0)})}}}}]}),e.component("tcpEntityModal",{template:'<entity-review entity="$ctrl.accountEntity"></entity-review>',controller:["ModalService",function(e){var t=this;t.$onInit=function(){t.accountEntity=e.getModalData().accountEntity}}]})}},function(e,t){e.exports=function(e){e.component("trustedContactData",{require:{$itemManipulator:"^^amItemManipulator"},templateUrl:e.WEBAPP_ROOT+"/components/trustedcontact/trustedContactData.html",controller:["$translate","NavigationService",function(t,n){var a=this;a.$onInit=function(){a.addTrustedContact=function(){var t={id:"AddTrustedContact",path:e.WEBAPP_ROOT+"/sequences/accountentity/addAccountEntity.html",pageData:{addType:"AddTrustedContact",allowedEntityTypes:a.$itemManipulator.manipulator.trustedContactRules.allowedEntityTypes},skipFetch:!0};n.navigate(t)}}}]})}},function(e,t,n){e.exports=function(e){e.component("amFormAdditionalNames",{require:{parentForm:"^^form"},bindings:{additionalNames:"=ngModel",rules:"<"},template:n(742),controller:["$filter",function(e){var t=this;t.$onInit=function(){angular.forEach(t.rules.requiredNameTypes,function(n){0!=e("filter")(t.additionalNames,{nameType:n}).length||t.additionalNames.push({nameType:n})}),t.getNameRules=function(e){return t.rules.nameRules[e]}}}]})}},function(e,t){e.exports='<div ng-repeat="name in $ctrl.additionalNames">\n\t<h6 class="text-muted">{{ (\'additionalName.label.\' + name.nameType) | translate }}</h6>\n\t<am-form-individual-name ng-model="name" rules="$ctrl.getNameRules(name.nameType)" field-prefix="name.nameType + \'_\'"></am-form-individual-name>\n</div>'},function(e,t,n){e.exports=function(e){e.component("additionalNamesReview",{bindings:{names:"<"},template:n(744)})}},function(e,t){e.exports='<div ng-if="::$ctrl.names.length > 0" ng-repeat="name in $ctrl.names">\n\t<h6 class="text-muted">{{ (\'additionalName.label.\' + name.nameType) | translate }}</h6>\n\t<div class="form-review">\n\t\t\x3c!-- First Name --\x3e\n\t\t<am-form-label ng-if="name.first" label-text="{{\'individual.label.firstName\' | translate}}" value-text="{{name.first}}"></am-form-label>\n\t\t\x3c!-- Middle Name --\x3e\n\t\t<am-form-label ng-if="name.middle" label-text="{{\'individual.label.middleName\' | translate}}" value-text="{{name.middle}}"></am-form-label>\n\t\t\x3c!-- Last Name --\x3e\n\t\t<am-form-label ng-if="name.last" label-text="{{\'individual.label.lastName\' | translate}}" value-text="{{name.last}}"></am-form-label>\n\t\t\x3c!-- Suffix --\x3e\n\t\t<am-form-label ng-if="name.suffix" label-text="{{\'individual.label.suffix\' | translate}}" value-text="{{name.suffix}}"></am-form-label>\n\t</div>\n\t<br ng-if="!$last">\n</div>'},function(e,t,n){e.exports=function(e){e.component("affiliateQuestion",{bindings:{customerType:"=",selectableEntities:"<",selectedEntities:"<",designationType:"@",readOnly:"<?",ibDesignation:"<?",onSelectCallback:"&?",onEntityMoveCallback:"&?",isHsbcClient:"<?",enabledSignificanShareholder:"<?"},template:n(746),controller:["$translate","amEntityNameFilter","ModalService","AffiliateDesignationService",function(e,t,a,r){var i=this,o=function(e,t,n){var a=t.designations.findIndex(function(t){return t.isin===e.isin});if(-1!=a&&t.designations.splice(a,1),!t.designations.length){var r=n.findIndex(function(e){return e.entity.entityId===t.entity.entityId});if(-1!=r){var o=n[r];i.selectableEntities.push(o.entity),n.splice(r,1),angular.isDefined(i.onEntityMoveCallback)&&i.onEntityMoveCallback({entity:o.entity,isDelete:!0})}}},s=function(e,t){if(e){if(!t.designations.length){i.selectedEntities.push(t);var n=i.selectableEntities.findIndex(function(e){return e.entityId===t.entity.entityId});-1!=n&&i.selectableEntities.splice(n,1),angular.isDefined(i.onEntityMoveCallback)&&i.onEntityMoveCallback({entity:t.entity,isDelete:!1})}t.designations.push(e)}};this.$onInit=function(){if(i.designationType=i.designationType||"UNKNOWN","UNKNOWN"===i.designationType)throw"Invalid designation type detected!!!";i.selectableEntities=i.selectableEntities||[],i.selectedEntities=i.selectedEntities||[],i.isHsbcClient=i.isHsbcClient||!1,i.enabledSignificanShareholder=i.enabledSignificanShareholder||!1,i.isLoading=!1,i.updateAnswer=function(){angular.isDefined(i.onSelectCallback)&&i.onSelectCallback({designationType:i.designationType,isAffiliateSelected:i.isAffiliateSelected})},i.getCompanyDesc=function(e){var t=e.description?e.description:e.isin,n=e.designationType,a="IB_DESIGNATED_AFFILIATE"===n||"IB_DESIGNATED_PUBLICLY_TRADED"===n||"IB_DESIGNATED_NON_AFFILIATE_INSIDER"===n;return i.ibDesignation&&a&&(t+="IB_DESIGNATED_NON_AFFILIATE_INSIDER"===n?"(IB-designated Non-Affiliate Insider)":"( IB Designated )"),t},i.addCompany=function(n){var r={title:e.instant("affiliateDesignation.add.title",{entityName:t(n.entity)}),templateUrl:"add-company-modal.component",modalData:{callbackFn:s,affiliate:n,ibDesignation:i.ibDesignation,designationType:i.designationType,customerType:i.customerType}};a.openModal(r)},i.deleteCompany=function(n,r,s){var l=n.description?n.description:n.isin,c=e.instant("affiliateDesignation.symbol.remove.confirmation",{stockName:l}),u=e.instant("affiliateDesignation.symbol.remove.success",{stockName:l}),d=e.instant("affiliateDesignation.symbol.remove.error",{stockName:l}),p={title:e.instant("affiliateDesignation.symbol.remove.title",{entityName:t(r.entity)}),templateUrl:"delete-company-modal.component",modalData:{callbackFn:o,affiliate:r,affiliateDesignation:n,affiliates:s,ibDesignation:i.ibDesignation,pendingText:c,successText:u,errorText:d}};a.openModal(p)},i.addEntity=function(t){var n={entity:{},designations:[]},r={title:e.instant("affiliateDesignation.profile.add."+i.designationType+".title"),templateUrl:"add-company-modal.component",modalData:{callbackFn:s,affiliate:n,selectEntity:!0,ibDesignation:i.ibDesignation,selectableEntities:i.selectableEntities,designationType:i.designationType,customerType:i.customerType}};a.openModal(r)},i.isAddDisabled=function(){return angular.isUndefined(i.selectableEntities)||0==i.selectableEntities.length||i.readOnly},i.isDeleteDisabled=function(e){return!1},i.getEntityName=function(e){return t(e)},i.getPopoverContent=function(e){if("AFFILIATE"===e)t=n(747);else{if("PUBLICLY_TRADED"!==e)throw"Invalid designation type: "+e;var t=n(748)}return t},i.hasCanadianDesignation=function(e){return(e.designations||[]).some(function(e){return"CAN"===e.countryCode})},i.isShareholdeDesignation=function(){return!!i.enabledSignificanShareholder&&(("AFFILIATE"===i.designationType||"PUBLICLY_TRADED"===i.designationType)&&i.selectedEntities.some(function(e){return i.hasCanadianDesignation(e)}))},i.updateDesignation=function(e){i.isLoading=!0,i.errors=void 0;var t=e.significantShareholder,n=e.umirType;e.umirType=t?"SS":"IA",r.replaceDesignation(e).catch(function(t){i.errors=t.errors,e.umirType=n,e.significantShareholder="SS"===n||"IA"!==n&&void 0}).finally(function(){i.isLoading=!1})},i.isAffiliateSelected=angular.isDefined(i.selectedEntities)&&i.selectedEntities.length>0}}]})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.isLoading"></loading-overlay>\r\n\r\n<div>\r\n\t\x3c!-- \r\n\t\tPUBLICLY_TRADED question\r\n\t--\x3e\r\n\t<div class="row" id="{{$ctrl.designationType}}_LABEL">\r\n\t\t<div ng-if="$ctrl.designationType === \'PUBLICLY_TRADED\' ">\r\n\t\t\t<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\t\t\t\t\t\t\r\n\t\t\t\t<p>\t{{ \'affiliateDesignation.question.publictraded.text\' | translate  }}</p>\r\n\t\t\t\t<ul class="paralist">\r\n\t\t\t\t\t<li>{{\'affiliateDesignation.question.publictraded.desc.apply.01\' | translate }}</li>\r\n\t\t\t\t\t<li>\r\n\t\t\t\t\t\t{{ \'affiliateDesignation.question.publictraded.desc.apply.02\' | translate }}\r\n\t\t\t\t\t\t<span class="margin-left-5 margin-right-5 hidden-xs" ng-if="::$ctrl.customerType === \'ORG\' || $ctrl.customerType === \'TRUST\'">\r\n\t\t\t\t\t\t\t<a href="javascript:void(0);" class="btn-icon">\r\n\t\t\t\t\t\t\t\t<i class="fa fa-question-circle" data-popover="{{$ctrl.getPopoverContent(\'PUBLICLY_TRADED\')}}" popover-html="true" popover-placement="right" popover-trigger="{{\'mouseenter\'}}"></i>\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li>{{\'affiliateDesignation.question.publictraded.desc.apply.03\' | translate }}</li>\r\n\t\t\t\t\t<li ng-if="::$ctrl.customerType !== \'ORG\' && $ctrl.customerType !== \'TRUST\'">\r\n\t\t\t\t\t\t{{ \'affiliateDesignation.question.publictraded.additionalcondition.text\' | translate  }}\r\n\t\t\t\t\t \t<ul>\r\n\t\t\t\t        \t<li>{{\'affiliateDesignation.question.affiliate.desc.control.01\' | translate }}</li>\r\n\t\t\t\t         \t<li>{{\'affiliateDesignation.question.affiliate.desc.control.02\' | translate }}</li>\r\n\t\t\t\t    \t</ul>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t\x3c!-- \r\n\t\t\tAFFILIATE question\r\n\t\t--\x3e\r\n\t\t<div ng-if="$ctrl.designationType === \'AFFILIATE\' ">\r\n\t\t\t<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" >\t\t\t\t\t\r\n\t\t\t\t<p>\r\n\t\t\t\t\t<span ng-if="::!$ctrl.isHsbcClient">{{ \'affiliateDesignation.question.controlingperson.\'+ $ctrl.customerType +  \'.text\' | translate  }}</span>\r\n\t\t\t\t\t<span ng-if="::$ctrl.isHsbcClient">{{ \'affiliateDesignation.question.controlingperson.HSBC_CLIENT.text\' | translate  }}</span>\r\n\t\t\t\t\t<span class="margin-left-5 margin-right-5 hidden-xs" ng-if="::$ctrl.customerType === \'ORG\' || $ctrl.customerType === \'TRUST\'">\r\n\t\t\t\t\t\t<a href="javascript:void(0);" class="btn-icon">\r\n\t\t\t\t\t\t\t<i class="fa fa-question-circle" data-popover="{{$ctrl.getPopoverContent(\'AFFILIATE\')}}" popover-html="true" popover-placement="right" popover-trigger="{{\'mouseenter\'}}"></i>\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</p>\r\n\t\t\t    <ul ng-if="::$ctrl.customerType !== \'ORG\' && $ctrl.customerType !== \'TRUST\'">\r\n\t\t\t        <li>{{\'affiliateDesignation.question.affiliate.desc.control.01\' | translate }}</li>\r\n\t\t\t        <li>{{\'affiliateDesignation.question.affiliate.desc.control.02\' | translate }}</li>\r\n\t\t\t    </ul>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t\x3c!-- \r\n\t\t\tEMPLOYEE question\r\n\t\t--\x3e\r\n\t\t<div  ng-if="$ctrl.designationType === \'EMPLOYEE\' ">\r\n\t\t\t<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" >\t\t\t\t\t\r\n\t\t\t\t<p ng-if="::!$ctrl.isHsbcClient">{{ \'affiliateDesignation.question.employee.\'+ $ctrl.customerType +  \'.text\' | translate  }}</p>\r\n\t\t\t\t<p ng-if="::$ctrl.isHsbcClient">{{ \'affiliateDesignation.question.employee.HSBC_CLIENT.text\' | translate  }}</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\r\n\t\t\t<p>\r\n\t\t\t\t<am-switch ng-model="$ctrl.isAffiliateSelected" aria-labelled-by="$ctrl.designationType + \'_LABEL\'" is-disabled="$ctrl.selectedEntities.length > 0" model-listener="$ctrl.updateAnswer()"></am-switch>\r\n\t\t\t</p>\r\n\t\t</div>\r\n\t</div>\r\n\t<div ng-if="$ctrl.isAffiliateSelected">\r\n\t\t<br/>\r\n\t\t<div class="row">\r\n\t\t\t<div class="col">\r\n\t\t\t\t<p>\r\n\t\t\t\t\t<strong>{{\'affiliateDesignation.declaredprofiles.\' + $ctrl.designationType + \'.desc\' | translate}}</strong>\r\n\t\t\t\t\t<strong ng-if="$ctrl.ibDesignation && $ctrl.designationType === \'EMPLOYEE\' ">{{\'affiliateDesignation.declaredprofiles.\' + $ctrl.designationType + \'.operator.desc\' | translate}}</strong>\r\n\t\t\t\t</p>\r\n\t\t\t\t<br />\r\n\t\t\t\t<div class="form-bordered" ng-if="$ctrl.selectedEntities.length === 0">\r\n\t\t\t\t\t<div class="form-group">\r\n\t\t\t\t\t\t<div class="row">\r\n\t\t\t\t\t\t\t<div class="col-12">\r\n\t\t\t\t\t\t\t\t<p>{{ \'affiliateDesignation.profiles.\'+ $ctrl.designationType + \'.empty.desc\' | translate }}</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="form-bordered" ng-if="$ctrl.selectedEntities.length > 0">\r\n\t\t\t\t\t<div ng-repeat="selectedEntity in $ctrl.selectedEntities">\r\n\t\t\t\t\t\t<div class="form-group">\r\n\t\t\t\t\t\t\t<div class="row row-header hidden-xs" ng-if="$first">\r\n\t\t\t\t\t\t\t\t<div class="col-xs-12 col-sm-3 col-md-3 col-lg-3">\r\n\t\t\t\t\t\t\t\t\t<p><strong>{{ \'affiliateDesignation.message.\'+ $ctrl.designationType + \'.profiles\'| translate }}</strong></p>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div class="col-xs-12 col-sm-7 col-md-7 col-lg-7">\r\n\t\t\t\t\t\t\t\t\t<p><strong>{{ \'affiliateDesignation.declared.stocks\' | translate }}</strong></p>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div class="col-xs-12 col-sm-2 col-md-2 col-lg-2">\r\n\t\t\t\t\t\t\t\t\t<p>&nbsp;</p>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<br ng-if="$first">\r\n\t\t\t\t\t\t\t<div class="row">\r\n\t\t\t\t\t\t\t\t<div class="col-xs-12 col-sm-3 col-md-3 col-lg-3">\r\n\t\t\t\t\t\t\t\t\t<p>{{selectedEntity.entity | amEntityName}}</p>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div class="col-xs-12 col-sm-7 col-md-7 col-lg-7">\r\n\t\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\t\t<span class="tp-btns">\r\n\t\t\t\t\t\t\t\t\t\t\t<a href="javascript:void(0);" role="{{$ctrl.isDeleteDisabled(designation) ? \'listitem\' : \'button\'}}" target="_self" class="btn btn-pill-active" ng-repeat="designation in selectedEntity.designations" ng-class="{\'disabled\' : $ctrl.isDeleteDisabled(designation) }" ng-click="!$ctrl.isDeleteDisabled(designation) && $ctrl.deleteCompany(designation, selectedEntity, $ctrl.selectedEntities)">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span>{{ $ctrl.getCompanyDesc(designation) }}</span>\r\n\t\t\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div class="col-xs-12 col-sm-2 col-md-2 col-lg-2">\r\n\t\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\t\t<span class="tp-btns">\r\n\t\t\t\t\t\t\t\t\t\t\t<a href="javascript:void(0);" target="_self" class="btn btn-pill-add" ng-class="{\'disabled\' : $ctrl.readOnly }" ng-click="!$ctrl.readOnly && $ctrl.addCompany(selectedEntity)">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span>{{ \'affiliateDesignation.addcompany.label\' | translate}}</span>\r\n\t\t\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<br />\r\n\t\t\t\t<am-button  on-click="$ctrl.addEntity()" btn-icon="fa-plus" btn-text="{{ \'affiliateDesignation.profile.add.\'+$ctrl.designationType+ \'.button.label\' | translate}}" is-disabled="$ctrl.isAddDisabled()"></am-button>\r\n\t\t\t</div> \r\n\t\t</div>\r\n\t</div>\r\n\t\x3c!-- \r\n\t\tSignificant Shareholder\r\n\t--\x3e\r\n\t<div ng-if="$ctrl.isShareholdeDesignation()">\r\n\t\t<h6 class="subtitle">{{ \'affiliateDesignation.title.umir\' | translate }}</h6>\r\n\t\t<p>{{ \'affiliateDesignation.message.umir.\' + $ctrl.designationType | translate }}</p>\r\n\t\t<br>\r\n\t\t<div class="alert alert-danger" ng-if="$ctrl.errors">\r\n\t\t\t<p>{{\'internal.error.\' + $ctrl.errors[\'internal\'] | translate}}</p>\r\n\t\t</div>\r\n\t\t<div class="form-bordered" ng-if="$ctrl.selectedEntities.length > 0">\r\n\t\t\t<div ng-repeat="selectedEntity in $ctrl.selectedEntities">\r\n\t\t\t\t<div class="form-group">\r\n\t\t\t\t\t<div class="row row-header hidden-xs" ng-if="$first">\r\n\t\t\t\t\t\t<div class="col-xs-12 col-sm-3 col-md-3 col-lg-3">\r\n\t\t\t\t\t\t\t<p><strong>{{ \'affiliateDesignation.message.\'+ $ctrl.designationType + \'.profiles\'| translate }}</strong></p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class="col-xs-12 col-sm-9 col-md-9 col-lg-9">\r\n\t\t\t\t\t\t\t<div class="row">\r\n\t\t\t\t\t\t\t\t<div class="col-6">\r\n\t\t\t\t\t\t\t\t\t<p><strong>{{ \'affiliateDesignation.declared.stocks\' | translate }}</strong></p>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div class="col-6">\r\n\t\t\t\t\t\t\t\t\t<p><strong>{{ \'affiliateDesignation.label.shareholder\' | translate }}</strong></p>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<br ng-if="$first">\r\n\t\t\t\t\t<div class="row" ng-if="$ctrl.hasCanadianDesignation(selectedEntity)">\r\n\t\t\t\t\t\t<div class="col-xs-12 col-sm-3 col-md-3 col-lg-3">\r\n\t\t\t\t\t\t\t<p>{{selectedEntity.entity | amEntityName}}</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class="col-xs-12 col-sm-9 col-md-9 col-lg-9">\r\n\t\t\t\t\t\t\t<div class="row" id="{{designation.isin}}_LABEL" ng-if="designation.countryCode === \'CAN\'" ng-repeat="designation in selectedEntity.designations">\r\n\t\t\t\t\t\t\t\t<div class="col-6">\r\n\t\t\t\t\t\t\t\t\t<p>{{ $ctrl.getCompanyDesc(designation) }}</p>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div class="col-6">\r\n\t\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\t\t<am-switch ng-model="designation.significantShareholder" aria-labelled-by="designation.isin + \'_LABEL\'" model-listener="$ctrl.updateDesignation(designation)"></am-switch>\r\n\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\t\t\t\t\t\r\n</div><br/><hr><br/>\r\n'},function(e,t){e.exports="<ul class=\"paralist\">\n\t<li>{{'affiliateDesignation.question.affiliate.desc.control.01' | translate }}</li>\n\t<li>{{'affiliateDesignation.question.affiliate.desc.control.02' | translate }}</li>\n</ul>"},function(e,t){e.exports="<ul class=\"paralist\">\n\t<li>{{'affiliateDesignation.question.affiliate.desc.control.01' | translate }}</li>\n\t<li>{{'affiliateDesignation.question.affiliate.desc.control.02' | translate }}</li>\n</ul>"},function(e,t,n){e.exports=function(e){e.component("affiliateDesignationForm",{bindings:{onLoadCallback:"&?",userSelections:"=?",onReviewCallback:"&?",userReview:"<?"},template:n(750),controller:["$translate","$q","amEntityNameFilter","ResourceService","ModalService",function(t,n,a,r,i){var o=this;o.submitUserChoice=function(){s()&&(o.isLoading=!0,r.update(e.AM_SERVER_PATH+"/AffiliateDesignation/IbDesignations").then(function(e){o.submissionState="SUCCESS",o.mode="EDIT_MODE",o.hideTitle=!1,l(),angular.isDefined(o.onReviewCallback)&&o.onReviewCallback({isSuccessful:!0})},function(e){o.errors=e.data.errors||{},o.submissionState=o.errors.internal?"FAILURE":""}).finally(function(){o.isLoading=!1}))};var s=function(){var e=[];if(o.userSelections.affiliates.isSelected&&!o.userSelections.affiliates.selections.length&&e.push(t.instant("affiliateDesignation.error.missing.affilaites")),o.userSelections.publicsymbols.isSelected&&!o.userSelections.publicsymbols.selections.length&&e.push(t.instant("affiliateDesignation.error.missing.publicsymbols")),o.userSelections.employees.isSelected&&!o.userSelections.employees.selections.length&&e.push(t.instant("affiliateDesignation.error.missing.employees")),e.length){var n={title:t.instant("word.error"),modalData:{errors:e}};return i.openErrorModal(n),!1}return!0};o.getEntityName=function(e){return a(e)},o.userAnswerSelection=function(e,t){angular.isDefined(o.userSelections)&&("AFFILIATE"===e?o.userSelections.affiliates.isSelected=t:"PUBLICLY_TRADED"===e?o.userSelections.publicsymbols.isSelected=t:"EMPLOYEE"===e&&(o.userSelections.employees.isSelected=t))};var l=function(){return i.openInfoModal({title:t.instant("affiliateDesignation.historical.migration.title"),modalData:{infoContent:"<p>"+t.instant("affiliateDesignation.historical.migration.info")+"</p>"}})},c=function(){angular.isUndefined(o.userSelections)&&(o.userSelections={}),o.userSelections.affiliates={},o.userSelections.affiliates.isSelected=o.affiliates.length>0,o.userSelections.affiliates.selections=o.affiliates,o.userSelections.publicsymbols={},o.userSelections.publicsymbols.isSelected=o.publicTradedEntities.length>0,o.userSelections.publicsymbols.selections=o.publicTradedEntities,o.userSelections.employees={},o.userSelections.employees.isSelected=o.employees.length>0,o.userSelections.employees.selections=o.employees,o.userSelections.isHistorical="REVIEW_MODE"===o.mode};this.$onInit=function(){o.isLoading=!0,o.isSuccess=!1,o.isReadOnly=!1,o.hideTitle=angular.isDefined(o.onLoadCallback),n.all([r.fetch(e.AM_SERVER_PATH+"/AffiliateDesignation").then(function(e){o.customerType=e.data.customerType,o.isHsbcClient=e.data.isHsbcClient||!1,o.affiliates=e.data.affiliates||[],o.selectableAffiliates=e.data.selectableAffiliates||[],o.publicTradedEntities=e.data.publicTradedEntities||[],o.selectablePublicTradedEntities=e.data.selectablePublicTradedEntities||[],o.employees=e.data.employees||[],o.selectableEmployees=e.data.selectableEmployees||[],o.mode=e.data.mode||"EDIT_MODE","REVIEW_MODE"===o.mode&&(o.hideTitle=!0),c(),angular.isDefined(o.userReview)&&o.userReview&&(o.mode=angular.isDefined(o.onReviewCallback)?"REVIEW_MODE":"EDIT_MODE"),o.ibDesignation=e.data.ibDesignation||!1,o.isSuccess=!0,o.enabledSignificanShareholder=e.data.enabledSignificanShareholder||!1},function(e){var n={title:t.instant("word.error"),modalData:{errors:[t.instant("internal.error.request_process")]}};i.openErrorModal(n)})]).finally(function(){o.isLoading=!1,angular.isDefined(o.onLoadCallback)&&o.onLoadCallback({isSuccessful:o.isSuccess})})}}]})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.isLoading"></loading-overlay>\r\n\r\n<div class="wrapper" ng-if="$ctrl.isSuccess">\r\n\t<div class="row">\r\n\t\t<div class="col">\t\r\n\t\t   <section class="panel">\r\n            <div class="panel-body panel-padding">\r\n\t\t\t\t<div class="text-center" ng-if="$ctrl.mode === \'REVIEW_MODE\' || $ctrl.userReview">\r\n\t   \t\t\t\t<i class="fa fa-2x fa-info-circle text-blue"></i>\r\n\t   \t\t\t\t<p>{{ \'affiliateDesignation.historical.\'+ $ctrl.customerType + \'.change.desc\' | translate }}</p>\r\n\t   \t\t\t\t<br/><hr><br/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div ng-if="!$ctrl.hideTitle">\r\n\t\t\t\t \t<h4>{{ \'affiliateDesignation.heading.\'+ $ctrl.customerType + \'.configure\' | translate }}</h4>\r\n\t\t\t\t \t<p>{{ \'affiliateDesignation.message.configure\' | translate }}</p><hr>\r\n\t\t\t\t</div> \r\n\t\t\t\t\r\n\t\t\t\t\x3c!-- \r\n\t\t\t\t\tQuestion for \'PUBLILY_TRADED\' designation type . Question  applicable for ORG/Trust\r\n\t\t\t\t--\x3e\r\n\t\t\t\t<affiliate-question ng-if="$ctrl.customerType === \'ORG\' || $ctrl.customerType === \'TRUST\'" designation-type="PUBLICLY_TRADED" customer-type="$ctrl.customerType" selectable-entities="$ctrl.selectablePublicTradedEntities" selected-entities="$ctrl.publicTradedEntities" ib-designation="$ctrl.ibDesignation" on-select-callback="$ctrl.userAnswerSelection(designationType , isAffiliateSelected)" is-hsbc-client="$ctrl.isHsbcClient" enabled-significan-shareholder="$ctrl.enabledSignificanShareholder"> </affiliate-question>\r\n\t\t\t\t\x3c!-- \r\n\t\t\t\t\tQuestion for Employee Designation  applicable for Individual Entities\r\n\t\t\t\t--\x3e\r\n\t\t\t\t<affiliate-question designation-type="EMPLOYEE" customer-type="$ctrl.customerType" selectable-entities="$ctrl.selectableEmployees" selected-entities="$ctrl.employees" ib-designation="$ctrl.ibDesignation" on-select-callback="$ctrl.userAnswerSelection(designationType , isAffiliateSelected)" is-hsbc-client="$ctrl.isHsbcClient"></affiliate-question>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  \r\n\t\t\t\t\x3c!-- \r\n\t\t\t\t\tAffiliate Designation question applicable for Individuals  Entities \r\n\t\t\t\t--\x3e\r\n\t\t\t\t<affiliate-question designation-type="AFFILIATE" customer-type="$ctrl.customerType" selectable-entities="$ctrl.selectableAffiliates" selected-entities="$ctrl.affiliates" ib-designation="$ctrl.ibDesignation" on-select-callback="$ctrl.userAnswerSelection(designationType , isAffiliateSelected)" is-hsbc-client="$ctrl.isHsbcClient" enabled-significan-shareholder="$ctrl.enabledSignificanShareholder"></affiliate-question>\r\n\t\r\n\t\t\t\t\x3c!-- Affiliate Tagging Review Confirmation & Submission--\x3e\r\n\t\t\t\t<div ng-if="$ctrl.mode === \'REVIEW_MODE\' ">\r\n\t\t\t\t    <div page-buttons>\r\n\t\t\t\t        <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">\r\n\t           \t\t\t\t<div class="panel-btn-left"></div>\r\n\t       \t\t\t\t</div>\r\n\t\t\t\t        <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">\r\n\t\t\t\t            <div class="panel-btn-right">\r\n\t\t\t\t                <p>\r\n\t\t\t\t                    <am-button on-click="$ctrl.submitUserChoice()"  btn-type="primary" btn-text="{{\'word.continue\' | translate}}"></am-button>\r\n\t\t\t\t                </p>\r\n\t\t\t\t            </div>\r\n\t\t\t\t        </div>\r\n\t\t\t\t    </div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t</section>\t\r\n\t\t</div>\t\t\r\n\t</div>\r\n</div>'},function(e,t,n){e.exports=function(e){n(752)(e)}},function(e,t){e.exports=function(e){Inputmask.extendAliases({companySymbol:{mask:"a{1,25}",placeholder:"",definitions:{a:{validator:"[0-9a-zA-Z. ]",casing:"upper"}}},companyIsin:{mask:"a{12}",placeholder:"",definitions:{a:{validator:"[0-9a-zA-Z]",casing:"upper"}}}})}},function(e,t,n){e.exports=function(e){n(754)(e)}},function(e,t){e.exports=function(e){e.filter("amEntityName",["$translate","LanguageService",function(e,t){return function(n,a){if(angular.isUndefined(n))return"";if("INDIVIDUAL"===n.entityType){if(n.nativeDetails.nativeLanguage&&t.isChineseInput(n.nativeDetails.inputLanguage))return n.name.last+" "+n.name.first;var r="";return angular.isDefined(n.name.salutationType)&&"UNKNOWN"!==n.name.salutationType&&"NA"!==n.name.salutationType&&(r+=e.instant("salutationType."+n.name.salutationType,{},void 0,a)+" "),r+=n.name.first,angular.isDefined(n.name.middle)&&n.name.middle.length>0?r+=" "+n.name.middle:angular.isDefined(n.name.middleInitial)&&n.name.middleInitial.length>0&&(r+=" "+n.name.middleInitial),r+=" "+n.name.last,angular.isDefined(n.name.suffix)&&n.name.suffix.length>0&&(r+=" "+n.name.suffix),r}return"LEGAL_ENTITY"===n.entityType?n.legalEntityName:"ORG"===n.entityType?n.organizationName:"TRUST"===n.entityType?n.trustName:""}}]),e.filter("amNativeEntityName",["$translate","LanguageService",function(e,t){return function(n){if(angular.isUndefined(n))return"";if("INDIVIDUAL"===n.entityType){if(t.isChineseInput(n.inputLanguage))return n.name.last+" "+n.name.first;var a="";return angular.isDefined(n.name.salutationType)&&"UNKNOWN"!==n.name.salutationType&&(a+=e.instant("salutationType."+n.name.salutationType)+" "),a+=n.name.first,angular.isDefined(n.name.middle)&&n.name.middle.length>0?a+=" "+n.name.middle:angular.isDefined(n.name.middleInitial)&&n.name.middleInitial.length>0&&(a+=" "+n.name.middleInitial),a+=" "+n.name.last,angular.isDefined(n.name.suffix)&&n.name.suffix.length>0&&(a+=" "+n.name.suffix),a}return"ORG"===n.entityType||"TRUST"===n.entityType?n.title:""}}])}},function(e,t,n){e.exports=function(e){n(756)(e),n(757)(e),n(759)(e),n(761)(e),n(763)(e),n(764)(e),n(765)(e),n(767)(e),n(769)(e),n(771)(e),n(773)(e)}},function(e,t){e.exports=function(e){e.component("accountEntityModal",{template:function(){var e="";return e+='<loading-overlay ng-if="$ctrl.isLoading"></loading-overlay>',e+='<div ng-if="!$ctrl.isLoading && ctrl.errors.length > 0" class="alert alert-danger"><p ng-repeat="error in $ctrl.errors">{{error}}</p></div>',e+='<entity-review ng-if="!$ctrl.isLoading" entity="$ctrl.accountEntity" tax-forms="$ctrl.taxFormTypes"></entity-review>',e},controller:["$translate","ModalService","ResourceService","EntityService",function(t,n,a,r){var i=this,o=function(){i.isLoading=!0,a.delete(e.AM_SERVER_PATH+"/RetailRequest/"+i.accountEntity.pendingRequestId).then(function(){n.closeModal("SUCCESS")},function(){i.errors=[t.instant("accountEntity.error.cancelRequest")]}).finally(function(){i.isLoading=!1})};i.$onInit=function(){i.accountEntity=n.getModalData().accountEntity,i.isLoading=!0,i.errors=[];var t=[];if(i.accountEntity.taxFormUpdatable){var s={label:"entity.updateTaxForms",alignment:"right",fn:function(){n.closeModal(),r.updateTaxForm(i.accountEntity)},btnClass:"btn-default"};t.push(s)}if(i.accountEntity.financialInfoUpdatable){var l={label:"entity.financialInfo",alignment:"right",fn:function(){n.closeModal(),r.updateFinancialInfo(i.accountEntity)},btnClass:"btn-default"};t.push(l)}if(i.accountEntity.editable){var c={label:"entity.editProfile",alignment:"right",fn:function(){n.closeModal(),r.editEntity(i.accountEntity)},btnClass:"btn-default"};t.push(c)}else if("PENDING_CREATE"===i.accountEntity.status){var u={label:"word.cancelRequest",alignment:"right",fn:o,btnClass:"btn-default"};t.push(u)}n.setModalButtons(t),a.fetch(e.AM_SERVER_PATH+"/AccountEntity/TaxForm/",{entityId:i.accountEntity.entityId}).then(function(e){i.taxFormTypes=e.data.taxFormTypes}).catch(function(e){i.taxFormTypes=[]}).finally(function(){i.isLoading=!1})}}]})}},function(e,t,n){e.exports=function(e){e.component("electionConsentModal",{template:n(758),controller:["ModalService","ResourceService",function(t,n){var a=this,r=function(){t.setModalResult("SUCCESS"===a.submissionState),t.closeModal()},i=function(){a.isLoading=!0,n.update(e.AM_SERVER_PATH+"/ElectionConsent",a.consent).then(function(e){a.submissionState="SUCCESS"},function(e){a.errors=e.data.errors||{},a.submissionState=a.errors.internal?"FAILURE":""}).finally(function(){a.isLoading=!1,o()})},o=function(){var e=[];"SUCCESS"===a.submissionState?e.push({alignment:"right",btnType:"success",label:"word.ok",fn:r}):"FAILURE"===a.submissionState?e.push({alignment:"right",btnType:"default",label:"word.close",fn:r}):e.push({alignment:"right",btnType:"primary",label:"word.save",fn:i}),t.setModalButtons(e)};a.$onInit=function(){a.type=t.getModalData().type||"UNKNOWN",a.isLoading=!0,a.errors={},a.consent={},n.fetch(e.AM_SERVER_PATH+"/ElectionConsent",{type:a.type}).then(function(e){a.consent=e.data.consent},function(e){a.errors=e.data.errors,a.submissionState=a.errors.internal?"FAILURE":""}).finally(function(){o(),a.isLoading=!1})}}]})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.isLoading"></loading-overlay>\n<div ng-if="!$ctrl.isLoading">\n\t\x3c!-- \n\t\tElection Consent Form \n\t--\x3e\n\t<election-consent-form ng-if="$ctrl.submissionState !== \'SUCCESS\' && $ctrl.submissionState !== \'FAILURE\'" ng-model="$ctrl.consent"></election-consent-form>\n\t\x3c!-- \n\t\tSUCCESS\n\t--\x3e\n\t<div ng-if="$ctrl.submissionState === \'SUCCESS\'">\n\t\t<div align="center">\n\t\t\t<i class="fa fa-4x fa-check-circle text-success"></i>\n\t\t</div>\n\t\t<br>\n\t\t<div class="alert alert-success" align="center">\n        \t<p class="text-center" ng-if="$ctrl.consent.consented">{{ \'consent.khr.success.agree\' | translate }}</p>\n        \t<p class="text-center" ng-if="!$ctrl.consent.consented">{{ \'consent.khr.success.disagree\' | translate }}</p>\n    \t</div>\n\t</div>\n\t\x3c!-- \n\t\tFailure\n\t--\x3e\n\t<div ng-if="$ctrl.getServerErrors()[\'internal\'] || $ctrl.submissionState === \'FAILURE\'">\n\t\t<div align="center">\n\t        <i class="fa fa-4x fa-exclamation-triangle text-danger"></i>\n\t    </div>\n\t    <br>\n\t    <div class="alert alert-warning" align="center">\n        \t<p class="text-center">{{ \'internal.error.\' + $ctrl.errors[\'internal\'] | translate}}</p>\n    \t</div>\n\t</div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("leiErrorExplanationModal",{template:n(760),controller:["$translate","ModalService","DynamicSequenceService",function(e,t,n){var a=this,r=function(){a.isLoading=!0,t.setModalResult(a.modalResult),t.closeModal()},i=function(){a.isLoading=!0,t.setModalResult(void 0),t.closeModal()};a.getGleifSearchLink=function(){return"https://search.gleif.org/#/record/"+a.lei},a.$onInit=function(){a.modalResult={},a.modalResult.leiErrorExplanations=a.leiErrorExplanations=t.getModalData().leiErrorExplanations||[],a.lei=t.getModalData().lei||[],a.isLoading=!1,a.getServerErrors=function(){return n.getSequenceData().errors};var e=[];e.push({label:"word.cancel",alignment:"left",fn:i}),e.push({label:"word.continue",alignment:"right",fn:r,btnType:"primary"}),t.setModalButtons(e)}}]})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.isLoading"></loading-overlay>\n<div ng-form="$ctrl.leiErrorExplanationsForm" form-server-errors="$ctrl.getServerErrors()">\n\t<div ng-repeat="errorExplanation in $ctrl.leiErrorExplanations">\n\t    <div class="row">\n\t        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n\t        <p class="alert alert-warning" translate="{{ (\'lei.error.\' + (errorExplanation.type | lowercase) ) }}" translate-values="{linkTagStart: \'<a href=&quot;{{$ctrl.getGleifSearchLink()}}&quot; target=&quot;_blank&quot;>\',  linkTagEnd: \'</a>\', breakTag : \'<br>\'}" ></p>\n\t        \n\t        <p translate="{{ (\'lei.\' + (errorExplanation.type | lowercase)+\'.explanation\' ) }}" ></p>\n\t        \n\t        <am-textarea name="{{errorExplanation.type+\'_explanation\'}}" ng-model="errorExplanation.explanation" maxlength="100" placeholder="{{ \'lei.errorExplanation.placeholder\' | translate }}" style="resize: none" is-required="true"></am-textarea>\n\t        \n\t        </div>\n\t    </div>\n\t</div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("companySearchModal",{template:n(762),controller:["ModalService","ResourceService",function(t,n){var a=this,r=function(){return!a.companySearchForm.$valid},i=function(){return a.isLoading||r()},o=function(){a.mode="COMPANY_SEARCH",c()},s=function(){var e=(a.companies||{})[a.selected];a.callbackFn(e)},l=function(){a.callbackFn(a.selectedCompany)},c=function(){var e=[];"SELECT"===a.mode?(e.push({label:"word.searchAgain",alignment:"left",fn:o}),e.push({label:"word.save",alignment:"right",fn:s,btnType:"primary",isDisabled:r})):"FREEFORM"===a.mode?(e.push({label:"word.searchAgain",alignment:"left",fn:o}),e.push({label:"word.save",alignment:"right",fn:l,btnType:"primary",isDisabled:r})):e.push({label:"word.search",alignment:"right",fn:a.performSearch,btnType:"primary",isDisabled:i}),t.setModalButtons(e)};a.$onInit=function(){a.callbackFn=t.getModalData().callbackFn,a.isLoading=!1,a.activeRequest=null,a.mode="COMPANY_SEARCH",a.criteria={assetTypes:["STOCK"],assetIds:[{type:"SYMBOL"}],exchanges:[""]},a.selectedCompany=void 0,a.selected=void 0,a.performSearch=function(){a.isLoading=!0;var t=angular.copy(a.criteria);(a.activeRequest=n.create(e.AM_SERVER_PATH+"/AssetSearch",{criteria:t},!0)).promise.then(function(e){var n=e.data.result;if("INTERNAL"!==n.resultType)if("NO_RESULTS"===n.resultType)a.mode="FREEFORM",a.selectedCompany={type:t.assetTypes[0],ids:[{type:"SYMBOL",id:t.assetIds[0].id},{id:void 0,type:"CONTRACT_ID"}],exchanges:[void 0]};else{a.mode="SELECT";for(var r={ZZZZZZZZZZZZ:{type:t.assetTypes[0],ids:[{type:"SYMBOL",id:t.assetIds[0].id}],exchanges:[void 0]}},i=0;i<(n.assets||[]).length;i++)for(var o=n.assets[i],s=0;s<(o.ids||[]).length;s++){var l=o.ids[s];"ISIN"===l.type&&(r[l.id]=o)}a.companies=(Object.keys(r)||[]).sort().reduce(function(e,t){return e[t]=r[t],e},{})}else a.mode="COMPANY_SEARCH"}).finally(function(){a.isLoading=!1,a.activeRequest=null,c()})},c()},a.$onDestroy=function(){angular.isDefined(a.activeRequest)&&null!==a.activeRequest&&a.activeRequest.cancel()}}]})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.isLoading"></loading-overlay>\n\n<div ng-if="!$ctrl.isLoading" ng-form="$ctrl.companySearchForm">\n\t<div ng-if="$ctrl.mode === \'COMPANY_SEARCH\'">\n\t\t<p>{{\'company.search.provideDetails\' | translate}}</p>\n\t    <br />\n\t\t\x3c!-- \n\t\t\tSymbol\n\t\t--\x3e\n\t\t<am-form-input name="idValue" ng-model="$ctrl.criteria.assetIds[0].id" label-text="{{ \'company.search.label.symbol\' | translate}}" input-mask-alias="companySymbol" hook-enter="$ctrl.performSearch()" required></am-form-input>\n\t\t\x3c!--\n            Search Error\n         --\x3e\n        <div ng-if="$ctrl.searchError.length" class="alert alert-danger">\n            {{\'company.search.error.\' + $ctrl.searchError | translate}}\n        </div>\n\t</div>\n\t<div ng-if="$ctrl.mode === \'SELECT\'">\n\t\t<p>{{ \'company.search.selectResult\' | translate }}</p>\n\t    <br />\n\t    <div class="row" ng-repeat="(isin, company) in $ctrl.companies">\n\t\t\t<div class="col-xs-2 col-sm-1 col-md-1 col-lg-1">\n\t\t\t\t<p class="text-center">\n\t\t\t\t\t<input name="company" ng-model="$ctrl.selected" type="radio" value="{{isin}}" i-check required />\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t\t<div class="col-xs-10 col-sm-11 col-md-11 col-lg-11">\n\t\t\t\t<p>{{ (isin !== \'ZZZZZZZZZZZZ\') ? company.description : ( \'company.search.label.different\' | translate ) }}</p>\n\t\t\t\t<br ng-if="isin === \'ZZZZZZZZZZZZ\' && $ctrl.selected === \'ZZZZZZZZZZZZ\'">\n\t\t\t\t<am-form-input ng-if="isin === \'ZZZZZZZZZZZZ\' && $ctrl.selected === \'ZZZZZZZZZZZZ\'" name="exchange" ng-model="company.exchanges[0]" label-text="{{\'company.search.label.exchange\' | translate}}" label-desc="{{ \'company.search.label.exchangeDesc\' | translate }}" maxlength="50" required></am-form-input>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div ng-if="$ctrl.mode === \'FREEFORM\'">\n    \t<p>{{\'company.search.customEntry\' | translate}}</p>\n\t    <br />\n\t    \x3c!-- \n\t    \tSymbol\n\t    --\x3e\n\t    <div class="form-group">\n\t\t\t<am-form-label label-text="{{ \'company.search.label.symbol\' | translate}}" value-text="{{ $ctrl.selectedCompany.ids[0].id }}"></am-form-label>\t    \n\t    </div>\n\t    \x3c!-- \n\t    \tExchange\n\t    --\x3e\n\t    <div class="form-group">\n\t\t\t<am-form-input name="exchange" ng-model="$ctrl.selectedCompany.exchanges[0]" label-text="{{\'company.search.label.exchange\' | translate}}" label-desc="{{ \'company.search.label.exchangeDesc\' | translate }}" maxlength="50" required></am-form-input>\n\t\t</div>\n    </div>\n</div>'},function(e,t){e.exports=function(e){e.component("trustedContactTypeSelectionModal",{template:['<loading-overlay ng-if="$ctrl.isLoading"></loading-overlay>','<div ng-if="$ctrl.submissionState !== \'SUCCESS\' && $ctrl.submissionState !== \'FAILURE\'" ng-form="$ctrl.ownerTypeForm" form-server-errors="$ctrl.getServerErrors()">','    <p translate="entity.associationType.desc.TRUSTED_CONTACT"></p>','    <am-form-select ng-if="$ctrl.getAllowedRelationships() && ($ctrl.getAllowedRelationships().length > 0)" name="relationship" ng-model="$ctrl.relationship" label-text="{{\'entity.label.relationshipToYou\' | translate}}" options="$ctrl.getAllowedRelationships()" option-key="\'relationship.type.\'" required></am-form-select>',"</div>","<div ng-if=\"$ctrl.getServerErrors()['internal'] || $ctrl.submissionState === 'FAILURE'\">",'    <div align="center">','        <i class="fa fa-2x fa-exclamation-triangle text-danger"></i>',"    </div>","    <h3 class=\"text-center text-dark\">{{ 'internal.error.' + $ctrl.getServerErrors()['internal'] | translate}}</h3>","</div>"].join(""),controller:["$translate","ModalService","amEntityNameFilter","TrustedContactService",function(e,t,n,a){var r=this,i=function(){return!(!angular.isUndefined(r.entityType)&&null!==r.entityType)||(!!((angular.isUndefined(r.association)||null===r.association)&&r.getAllowedAssociations()&&r.getAllowedAssociations().length>0)||!!((angular.isUndefined(r.relationship)||null===r.relationship)&&r.getAllowedRelationships()&&r.getAllowedRelationships().length>0))},o=function(){var e="SUCCESS"===r.submissionState;t.closeModal(e)},s=function(){r.isLoading=!0,"EDIT"===r.sequenceType?a.editTrustedContact(r.association,r.relationship,r.index).then(function(a){r.trustedContact=a.trustedContact,r.rules=a.rules;var i={dialogClass:"modal-lg"};i.modalData={trustedContact:r.trustedContact,rules:r.rules,sequenceType:r.sequenceType},i.title=e.instant("page.title.EditLinkedEntity",{entityName:n(r.trustedContact)}),i.templateUrl="trusted-contact-form-modal.component",t.openModal(i).then(function(e){})},function(e){r.errors=e.errors||{},r.submissionState=r.errors.internal?"FAILURE":""}).finally(function(){r.isLoading=!1,l()}):a.createTrustedContact(r.entityType,r.association,r.relationship).then(function(n){r.trustedContact=n.trustedContact,r.rules=n.rules;var a={dialogClass:"modal-lg"};a.modalData={trustedContact:r.trustedContact,rules:r.rules,sequenceType:r.sequenceType},a.title=e.instant("linkedInfo.addIndividual"),a.templateUrl="trusted-contact-form-modal.component",t.openModal(a).then(function(e){})},function(e){r.errors=e.errors||{},r.submissionState=r.errors.internal?"FAILURE":""}).finally(function(){r.isLoading=!1,l()})},l=function(){var e=[];"SUCCESS"===r.submissionState?e.push({alignment:"right",btnType:"success",label:"word.ok",fn:o}):"FAILURE"===r.submissionState?e.push({alignment:"right",btnType:"default",label:"word.close",fn:o}):e.push({alignment:"right",btnType:"primary",label:"word.continue",fn:s,isDisabled:i}),t.setModalButtons(e)};r.$onInit=function(){r.rules=t.getModalData().rules,r.entity=t.getModalData().entity,r.index=t.getModalData().index,r.sequenceType=angular.isDefined(r.index)&&angular.isDefined(r.entity)?"EDIT":"ADD",r.errors=t.getModalData().errors||{},r.submissionState=t.getModalData().submissionState,r.getServerErrors=function(){return r.errors},r.getAllowedAssociations=function(){return r.rules.associationRules&&r.entityType?r.rules.associationRules[r.entityType].allowedAssociations:[]},r.getAllowedRelationships=function(){if(r.rules.associationRules&&r.entityType&&r.association){var e=r.rules.associationRules[r.entityType].relationshipRules;if(e&&e[r.association.type])return e[r.association.type].allowedRelationships}return[]},r.allowedEntityTypes=r.rules.allowedEntityTypes,"EDIT"===r.sequenceType?(r.allowedEntityTypes=[r.entity.entityType],r.entityType=r.entity.entityType,r.relationship=r.entity.relationship,r.entity.associations&&r.entity.associations.length>0&&(r.association=r.entity.associations[0]),l()):(r.entityType=r.allowedEntityTypes[0],r.association=r.getAllowedAssociations()[0],l())}}]})}},function(e,t){e.exports=function(e){e.component("trustedContactFormModal",{templateUrl:e.WEBAPP_ROOT+"/modals/trustedcontact/trustedContactFormModal.html",controller:["$translate","ModalService","TrustedContactService",function(e,t,n){var a=this,r=function(){var e="SUCCESS"===a.submissionState?a.result:{};t.closeModal(e)},i=function(){return a.isLoading},o=function(){a.isLoading=!0,"EDIT"===a.sequenceType?n.editTrustedContactInConfig(a.trustedContact).then(function(e){a.result=e||{},a.submissionState="SUCCESS",r()},function(e){a.errors=e.errors||{},a.submissionState=a.errors.internal?"FAILURE":""}).finally(function(){a.isLoading=!1,s()}):n.addTrustedContactToConfig(a.trustedContact).then(function(e){a.result=e||{},a.submissionState="SUCCESS",r()},function(e){a.errors=e.errors||{},a.submissionState=a.errors.internal?"FAILURE":""}).finally(function(){a.isLoading=!1,s()})},s=function(){var e=[];"FAILURE"===a.submissionState?e.push({alignment:"right",btnType:"default",label:"word.close",fn:r}):e.push({alignment:"right",btnType:"primary",label:"word.save",fn:o,isDisabled:i}),t.setModalButtons(e)};a.$onInit=function(){a.trustedContact=t.getModalData().trustedContact,a.rules=t.getModalData().rules,a.sequenceType=t.getModalData().sequenceType,a.isLoading=!1,a.errors={},a.getServerErrors=function(){return a.errors},s()}}]})}},function(e,t,n){e.exports=function(e){e.component("addCompanyModal",{template:n(766),controller:["$translate","ModalService","ResourceService","amEntityNameFilter","AffiliateDesignationService",function(t,n,a,r,i){var o=this,s=function(){return!o.searchAffiliateDesignationForm.$valid||o.isin&&!o.isValidIsin},l=function(){return o.isLoading||s()},c=function(){o.mode="COMPANY_SEARCH",o.isError=!1,o.isin=void 0,o.selected=void 0,o.isValidIsin=!1,m()},u=function(e,t,n,a){var r={};return r.entityId=o.affiliate.entity.entityId,r.designationType=e,r.isin=t,r.ibTraded=a,r.description=n,r},d=function(){o.errors=void 0,o.isError=!1,o.addError="",p(o.affiliateDesignation.isin)||(o.ibDesignation&&(o.affiliateDesignation.commentFrom=o.operatorNote),o.isLoading=!0,i.saveDesignation(o.affiliateDesignation).then(function(e){o.stockName=o.affiliateDesignation.description?o.affiliateDesignation.description:o.affiliateDesignation.isin,o.mode="SUCCESS",o.callbackFn(o.affiliateDesignation,o.affiliate)},function(e){o.errors=e.errors,o.isError=angular.isDefined(o.errors.internal)||angular.isDefined(o.errors.invalidIsin)}).finally(function(){o.isLoading=!1,m()}))},p=function(e){return!!o.affiliate.designations.some(function(t){return t.isin===e&&(t.designationType===g()||"HISTORICAL_AFFILIATE"===t.designationType)})&&(o.isError=!0,o.addError="duplicateisin",!0)},g=function(){if(o.ibDesignation){if("AFFILIATE"===o.designationType)return"IB_DESIGNATED_AFFILIATE";if("PUBLICLY_TRADED"===o.designationType)return"IB_DESIGNATED_PUBLICLY_TRADED";if("EMPLOYEE"===o.designationType)return"IB_DESIGNATED_NON_AFFILIATE_INSIDER"}return o.designationType},f=function(){n.closeModal()},m=function(){var e=[];"SELECT"===o.mode?(e.push({label:"word.searchAgain",alignment:"left",fn:c}),e.push({label:"word.save",alignment:"right",fn:d,btnType:"primary",isDisabled:s})):"FREEFORM"===o.mode?(e.push({label:"word.searchAgain",alignment:"left",fn:c}),e.push({label:"word.save",alignment:"right",fn:d,btnType:"primary",isDisabled:s})):"SUCCESS"===o.mode?e.push({label:"word.close",alignment:"right",fn:f,btnType:"primary"}):e.push({label:"word.search",alignment:"right",fn:o.performSearch,btnType:"primary",isDisabled:l}),n.setModalButtons(e)};o.validateIsin=function(){o.isError=!1,o.addError="",o.isin&&12!==o.isin.length||p(o.isin)?o.isValidIsin=!1:(o.isLoading=!0,i.fetchIsinDetails(o.isin).then(function(e){o.significantShareholderEnabled=e.significantShareholderEnabled||!1,o.isValidIsin=e.validIsin||!1,o.affiliateDesignation=u(g(),e.isinDetails.code,e.isinDetails.name,e.isinDetails.ibTraded),o.affiliateDesignation.countryCode=e.isinDetails.countryCode||"",o.isError=!1},function(e){o.errors=e.errors,o.isValidIsin=!1,o.isError=angular.isDefined(o.errors.internal)||angular.isDefined(o.errors.invalidIsin)}).finally(function(){o.isLoading=!1}))},o.getCompanyConfirmationText=function(){if(angular.isDefined(o.affiliateDesignation)&&o.affiliateDesignation.description){var e=o.affiliateDesignation.description;return o.affiliateDesignation.countryCode&&(e+="("+o.affiliateDesignation.countryCode+")"),t.instant("affiliatedesigantion.isin.company.desc",{isin:o.isin,companyName:e})}return t.instant("affiliatedesigantion.isin.company.notavailable.desc",{isin:o.isin})},o.$onInit=function(){o.callbackFn=n.getModalData().callbackFn,o.affiliate=n.getModalData().affiliate,o.selectEntity=n.getModalData().selectEntity||!1,o.selectableEntities=n.getModalData().selectableEntities||[],o.designationType=n.getModalData().designationType,o.ibDesignation=n.getModalData().ibDesignation,o.isValidIsin=!1,o.operatorNote="",o.isLoading=!1,o.activeRequest=null,o.mode="COMPANY_SEARCH",o.criteria={assetTypes:["STOCK"],assetIds:[{type:"SYMBOL"}],exchanges:[""]},o.affiliateDesignation={},o.selectedCompany=void 0,o.selected=void 0,o.significantShareholderEnabled=!1,o.getEntityName=function(e){return r(e)},o.fetchIsinDetails=function(){o.affiliateDesignation=void 0,"ZZZZZZZZZZZZ"!==o.selected&&(o.isLoading=!0,i.fetchIsinDetails(o.selected).then(function(e){o.significantShareholderEnabled=e.significantShareholderEnabled||!1,o.affiliateDesignation=u(g(),e.isinDetails.code,e.isinDetails.name,e.isinDetails.ibTraded),o.affiliateDesignation.countryCode=e.isinDetails.countryCode||""},function(e){o.errors=e.errors,o.isError=angular.isDefined(o.errors.internal)||angular.isDefined(o.errors.invalidIsin)}).finally(function(){o.isLoading=!1}))},o.isCanadianShareholder=function(){return!!o.significantShareholderEnabled&&(("AFFILIATE"===o.designationType||"PUBLICLY_TRADED"===o.designationType)&&(("SELECT"===o.mode||"FREEFORM"===o.mode)&&(angular.isDefined(o.affiliateDesignation)&&"CAN"===o.affiliateDesignation.countryCode)))},o.updateUmirType=function(){o.affiliateDesignation.significantShareholder?o.affiliateDesignation.umirType="SS":o.affiliateDesignation.umirType="IA"},o.performSearch=function(){o.isLoading=!0,o.isError=!1,o.isin=void 0,o.selected=void 0;var t=angular.copy(o.criteria);(o.activeRequest=a.create(e.AM_SERVER_PATH+"/AssetSearch",{criteria:t},!0)).promise.then(function(e){var n=e.data.result;if("INTERNAL"!==n.resultType)if("NO_RESULTS"===n.resultType)o.mode="FREEFORM",o.selectedCompany={type:t.assetTypes[0],ids:[{type:"SYMBOL",id:t.assetIds[0].id},{id:void 0,type:"CONTRACT_ID"}],exchanges:[void 0]};else{o.mode="SELECT";for(var a={ZZZZZZZZZZZZ:{type:t.assetTypes[0],ids:[{type:"SYMBOL",id:t.assetIds[0].id}],exchanges:[void 0]}},r=0;r<(n.assets||[]).length;r++)for(var i=n.assets[r],s=0;s<(i.ids||[]).length;s++){var l=i.ids[s];"ISIN"===l.type&&(a[l.id]=i)}o.companies=(Object.keys(a)||[]).sort().reduce(function(e,t){return e[t]=a[t],e},{})}else o.mode="COMPANY_SEARCH"}).finally(function(){o.isLoading=!1,o.activeRequest=null,m()})},m()},o.$onDestroy=function(){angular.isDefined(o.activeRequest)&&null!==o.activeRequest&&o.activeRequest.cancel()}}]})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.isLoading"></loading-overlay>\n\n<div  ng-form="$ctrl.searchAffiliateDesignationForm">\n     \n     <div class="row" ng-if="$ctrl.isError" >\n        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" >\n            <div class="alert alert-danger" ng-if=" !$ctrl.addError.length">\n            \t<div ng-if="$ctrl.errors[\'internal\']"> <p>{{\'internal.error.\' + $ctrl.errors[\'internal\'] | translate}}</p></div>\n   \t\t\t\t<div ng-if="$ctrl.errors[\'invalidIsin\']"> <p>{{$ctrl.errors[\'invalidIsin\'] | translate}}</p></div>\n            </div>\n            <div ng-if=" $ctrl.addError.length" class="alert alert-danger">\n           \t\t {{\'affiliateDesignation.error.\' + $ctrl.addError | translate}}\n    \t\t</div>\n        </div>\n    </div> \n\t\n\n\t<div  class="row" ng-if="$ctrl.selectEntity && $ctrl.mode !== \'SUCCESS\'">\n\t\t<br/>\n\t\t<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n\t \t\t<am-form-select  chosen-select ng-model="$ctrl.affiliate.entity" options="$ctrl.selectableEntities" no-translate="true" label-text="{{ \'affiliateDesignation.accountprofiles.\'+ $ctrl.designationType +\'.label\' | translate}}"  empty-option-text="{{ \'affiliateDesignation.accountprofiles.choose.\'+ $ctrl.designationType + \'.text\'| translate }}" option-key="$ctrl.getEntityName" required  ></am-form-select>\n      \t</div>\n\t</div> \t\n\n\t<div ng-if="$ctrl.mode === \'COMPANY_SEARCH\'">\n\t\t<p>{{\'company.search.provideDetails\' | translate}}</p> <br />\n\t\t\x3c!-- Symbol --\x3e\n\t\t<am-form-input name="idValue" ng-model="$ctrl.criteria.assetIds[0].id" label-text="{{ \'company.search.label.symbol\' | translate}}" input-mask-alias="companySymbol" hook-enter="$ctrl.performSearch()" required></am-form-input>\n\t\t\x3c!-- Search Error    --\x3e\n        <div ng-if="$ctrl.searchError.length" class="alert alert-danger">\n            {{\'company.search.error.\' + $ctrl.searchError | translate}}\n        </div>\n\t</div>\n\t<div ng-if="$ctrl.mode === \'SELECT\'">\n\t\t<p>{{ \'company.search.selectResult\' | translate }}</p>\n\t    <br />\n\t    <div class="row" ng-repeat="(isin, company) in $ctrl.companies">\n\t\t\t<div class="col-xs-2 col-sm-1 col-md-1 col-lg-1">\n\t\t\t\t<p class="text-center">\n\t\t\t\t\t<input name="company" ng-model="$ctrl.selected" type="radio" value="{{isin}}" i-check required ng-change="$ctrl.fetchIsinDetails()"/>\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t\t<div class="col-xs-10 col-sm-11 col-md-11 col-lg-11">\n\t\t\t\t<p>{{ (isin !== \'ZZZZZZZZZZZZ\') ? company.description : ( \'company.search.label.different\' | translate ) }}</p>\n\t\t\t\t<br ng-if="isin === \'ZZZZZZZZZZZZ\' && $ctrl.selected === \'ZZZZZZZZZZZZ\'">\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div ng-if="$ctrl.mode === \'FREEFORM\' || ( $ctrl.mode === \'SELECT\' && $ctrl.selected === \'ZZZZZZZZZZZZ\')">\n\t    \t\t\x3c!--  ISIN --\x3e\n\t    <div class="form-group">\n\t    \t<p class="alert alert-info" ng-if="$ctrl.mode === \'FREEFORM\' && !$ctrl.isError && !$ctrl.isValidIsin">{{\'affiliatedesigantion.search.noresult\' | translate}}</p>\n    \t\t<p>{{\'affiliatedesigantion.search.customEntry\' | translate}}</p> <br/>\n\t    \t<am-form-input name="isin" ng-model="$ctrl.isin" label-text="{{\'affiliatedesigantion.isin.label\' | translate}}" label-desc="{{ \'affiliatedesigantion.isin.desc\' | translate }}"  required  change-listener="$ctrl.validateIsin()" input-mask-alias="companyIsin"></am-form-input>\n\t\t</div>\n\t\t<div class="alert alert-info" ng-if="$ctrl.isValidIsin">\n\t\t\t<p>{{$ctrl.getCompanyConfirmationText()}}</p>\t\t\n\t\t</div>\t \n    </div>\n    \n    <div  class="row" ng-if="$ctrl.ibDesignation && ($ctrl.mode === \'SELECT\' || $ctrl.mode === \'FREEFORM\')">\n    \t <br>\n         <div class="col-xs-12 col-sm-12 col-md-12">\n         \t<p>{{ (\'affiliatedesigantion.operator.comment\' | translate) + \': \' }}</p>\n             <am-textarea name="operatorNote" ng-model="$ctrl.operatorNote" maxlength="300" ></am-textarea>\n         </div>\n\t</div> \t\n    \n    <div class="alert alert-success" ng-if="$ctrl.mode === \'SUCCESS\'">\n    \t<p  class="text-center"><i class="fa fa fa-check-circle text-success"></i>{{ \'affiliateDesignation.add.success\' | translate:{stockName: $ctrl.stockName } }}</p>\t\n    </div>\t\n\t\x3c!-- \n\t\t\n\t--\x3e\n\t<div class="row" ng-if="$ctrl.isCanadianShareholder()">\n\t\t<div class="col-12">\n\t\t\t<hr>\n\t\t\t<p>{{ \'affiliateDesignation.question.canadianSignificantSharehlder.\' + $ctrl.designationType | translate:{entity: ($ctrl.affiliate.entity | amEntityName)} }}</p>\n\t\t\t<p>\n\t\t\t\t<am-switch name="significantShareholder" ng-model="$ctrl.affiliateDesignation.significantShareholder" model-listener="$ctrl.updateUmirType()" required></am-switch>\n\t\t\t</p>\t\t\n\t\t</div>\n\t</div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("deleteCompanyModal",{template:n(768),controller:["$translate","ModalService","AffiliateDesignationService",function(e,t,n){var a=this,r=function(){a.isLoading=!0,n.deleteDesignation(a.affiliateDesignation).then(function(e){a.isSuccess=!0,a.callbackFn(a.affiliateDesignation,a.affiliate,a.affiliates),o()},function(e){a.isError=!0}).finally(function(){return a.isLoading=!1})},i=function(){t.closeModal()},o=function(){var e=[];a.isSuccess?e.push({label:"word.close",alignment:"right",fn:i}):(e.push({label:"word.no",alignment:"left",fn:i}),e.push({label:"word.yes",alignment:"right",fn:r})),t.setModalButtons(e)};a.$onInit=function(){a.pendingText=t.getModalData().pendingText,a.successText=t.getModalData().successText,a.errorText=t.getModalData().errorText,a.ibDesignation=t.getModalData().ibDesignation,a.callbackFn=t.getModalData().callbackFn,a.affiliate=t.getModalData().affiliate,a.affiliates=t.getModalData().affiliates,a.affiliateDesignation=t.getModalData().affiliateDesignation,a.affiliateDesignation.commentTo="",a.isSuccess=!1,a.isError=!1,a.isLoading=!1,o()}}]})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.isLoading"></loading-overlay>\n      \n<div class="row" ng-if="$ctrl.isError" >\n   <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" >\n       <div  class="alert alert-danger"> {{ $ctrl.errorText }}</div>\n   </div>\n</div>\t\n  \n<div ng-if="!$ctrl.isSuccess">\n\t<div  class="row">\n\t\t<p class="text-bold">{{ $ctrl.pendingText }}</p>\n\t</div>\n\t\n\t<div ng-if="$ctrl.ibDesignation">\n\t\t<br>\n\t\t<div class="row">\n\t\t\t<div class="col-xs-12 col-sm-12 col-md-12">\n\t\t\t\t<p>{{ (\'affiliatedesigantion.operator.addComment\' | translate) + \': \' }}</p>\n\t\t\t\t<p>{{ $ctrl.affiliateDesignation.commentFrom }}</p>\n\t\t\t</div>\t\n\t\t</div>\n\t\t<br>\n\t\t<div class="row">\n\t\t\t<div class="col-xs-12 col-sm-12 col-md-12"> \n\t           \t<p>{{ (\'affiliatedesigantion.operator.comment\' | translate) + \':\' }}</p>\n\t            <am-textarea name="operatorNote" ng-model="$ctrl.affiliateDesignation.commentTo" maxlength="300" ></am-textarea>\n            </div>\n\t\t</div>  \n\t</div>  \t\t\n</div>\n\n<div class="alert alert-success" ng-if="$ctrl.isSuccess">\n\t<p  class="text-center"><i class="fa fa fa-check-circle text-success"></i>{{ $ctrl.successText }}</p>\t\n</div>\t\t\n'},function(e,t,n){e.exports=function(e){e.component("perStirpesModal",{template:n(770),controller:["ModalService","ResourceService",function(t,n){var a=this,r=function(){return a.isLoading||a.perStirpes==a.accountEntity.perStirpes},i=function(){a.isLoading=!0,a.errors=void 0;var r={entityId:a.accountEntity.entityId,perStirpes:a.perStirpes};a.isError=!1,n.update(e.AM_SERVER_PATH+a.servletPath,r).then(function(e){a.isSuccess=e.data.success||!1,a.isSuccess?(a.accountEntity.perStirpes=a.perStirpes,e.data.autoCloseOnSuccess&&t.closeModal({success:!0})):a.isError=!0}).catch(function(e){a.errors=e.data.errors}).finally(function(){a.isLoading=!1})};a.$onInit=function(){var e;a.isLoading=!1,a.accountEntity=t.getModalData().accountEntity,a.perStirpes=angular.copy(a.accountEntity.perStirpes),a.servletPath=t.getModalData().servletPath||"/AccountBeneficiary",a.errors={},(e=[]).push({label:"word.save",alignment:"right",fn:i,btnType:"primary",isDisabled:r}),e.push({label:"word.close",alignment:"left",fn:t.closeModal}),t.setModalButtons(e)}}]})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.isLoading"></loading-overlay>\n\n<div ng-form="$ctrl.perStirpesForm">\n    <p>{{ \'entity.edit.perStirpes.info\' | translate }}</p>\n    <br />\n    <div class="row">\n        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-2">\n            <p><strong>{{ \'entity.label.perStirpes\' | translate }}</strong></p>\n        </div>\n        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-10">\n            <p>\n                <am-switch ng-model="$ctrl.perStirpes"></am-switch>\n            </p>\n        </div>\n    </div>\n    <br />\n    <div class="row" ng-if="$ctrl.isSuccess">\n        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n            <div class="alert alert-success">\n                <p>{{\'entity.edit.perStirpes.success\' | translate }}</p>\n            </div>\n        </div>\n    </div>\n    <div class="row" ng-if="$ctrl.isError" >\n        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n            <div class="alert alert-danger">\n                <p>{{\'entity.edit.perStirpes.error\' | translate}}</p>         \n            </div>\n        </div>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("accountEntityTypeSelectionModal",{template:n(772),controller:["ModalService","$translate",function(e,t){var n=this;n.getEntityTypeLabel=function(e){return t.instant("entity.type."+e)},n.getAssociationTypeLabel=function(e){return t.instant("association.type."+e)},n.$onInit=function(){n.isLoading=!1,n.allowedEntityTypes=e.getModalData().allowedEntityTypes,n.allowedAssociationTypes=e.getModalData().allowedAssociationTypes,e.setModalButtons([{alignment:"left",fn:e.closeModal,label:"word.close"},{alignment:"right",btnType:"primary",fn:function(){e.closeModal({entityType:n.entityType,associationType:n.associationType})},label:"word.continue"}])}}]})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.isLoading"></loading-overlay>\n\n<div ng-form="$ctrl.accountEntityTypeSelectionForm">\n    <div class="row">\n        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n           <am-form-select ng-if="::$ctrl.allowedEntityTypes.length > 0" name="entityType" ng-model="$ctrl.entityType" no-translate="true" options="$ctrl.allowedEntityTypes" option-key="$ctrl.getEntityTypeLabel" label-text="{{\'entity.label.entityType\' | translate}}" required></am-form-select>\n           <am-form-select ng-if="::$ctrl.allowedAssociationTypes.length > 0" name="associationType" ng-model="$ctrl.associationType" no-translate="true" options="$ctrl.allowedAssociationTypes" option-key="$ctrl.getAssociationTypeLabel" label-text="{{\'entity.label.associationType\' | translate}}" required></am-form-select>\n        </div>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("removeEntityModal",{template:n(774),controller:["ModalService","$translate",function(e,t){var n=this;n.submit=function(){var t={deleteEntity:n.deleteEntity};if(!n.deleteEntity){var a=[];angular.forEach(n.deletableAssociationsOfEntity,function(e){e.selected&&a.push(e.type)}),t.associationsToDelete=a}e.closeModal(t)},n.$onInit=function(){n.isLoading=!1,n.deleteEntity=!0,n.deletableAssociationsOfEntity=e.getModalData().deletableAssociationsOfEntity,e.setModalButtons([{alignment:"left",fn:e.closeModal,label:"word.close"},{alignment:"right",btnType:"primary",fn:n.submit,label:"word.continue"}])}}]})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.isLoading"></loading-overlay>\n<div class="row">\n    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-8">\n        <p>{{ \'trustownershipentities.label.deleteEntityOrAssociation\' | translate }}</p>\n    </div>\n    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-4">\n        <am-switch ng-model="$ctrl.deleteEntity"></am-switch>\n    </div>\n</div>\n<p ng-if="!$ctrl.deleteEntity">{{ \'trustownershipentities.label.deleteAssociationHeadline\' | translate }}</p>\n<div ng-if="!$ctrl.deleteEntity" class="row" ng-repeat="deletableAssociation in $ctrl.deletableAssociationsOfEntity">\n    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n       <p><input type="checkbox" ng-model="deletableAssociation.selected" i-check>&nbsp;{{ \'association.type.\' + deletableAssociation.type | translate }}</p>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){n(776)(e),n(777)(e)}},function(e,t){e.exports=function(e){function t(e,t,n){var a=this,r=function(){var t={},r=n.getSequenceButtonData()||[];t.extraButtons=r.extraButtons||[],a.showTrustedContactProfile?a.hasEntries&&(t.continueBtn={onClick:n.stepForward,btnText:e.instant("word.confirm")}):(t.continueBtn={onClick:function(){a.showTrustedContactProfile=!0},btnText:e.instant("word.continue")},a.skippable&&t.extraButtons.push({alignment:"right",btnText:e.instant("word.skip"),onClick:a.skip})),t.canGoBack=n.getSequenceData().stepIndex>0,n.configureButtons(t)};a.skip=function(){n.stepForward({skipping:!0})},a.$onInit=function(){a.showTrustedContactProfile=!1,a.hasEntries=!1,a.formNumber=n.getSequenceData().formNumber,a.viewAgreement=function(){t.viewAgreement(a.formNumber)},a.skippable=n.getSequenceData().skippable||!1,a.update=function(e){a.hasEntries=e.length>0,r()},r()}}e.controller("TrustedContactConfigController",t),t.$inject=["$translate","AgreementService","DynamicSequenceService"]}},function(e,t){e.exports=function(e){function t(e,t,n,a){var r=this;r.$onInit=function(){r.trustedContactLoad=e.defer(),r.isApplication=t===n.STANDALONE;var i=window.cancelFn;r.cancel=window[i]||void 0,a.setOnPageLoad(function(){r.trustedContactLoad.promise.finally(function(){a.setIsPageLoading(!1)})})}}e.controller("TrustedContactDetailsController",t),t.$inject=["$q","ACTIVE_CONTEXT","ApplicationContext","PageService"]}},function(e,t,n){e.exports=function(e){n(779)(e),n(780)(e),n(781)(e),n(782)(e),n(783)(e),n(784)(e),n(785)(e),n(795)(e),n(797)(e),n(798)(e),n(807)(e),n(809)(e),n(810)(e),n(821)(e),n(822)(e),n(823)(e),n(824)(e),n(825)(e),n(826)(e),n(827)(e),n(828)(e),n(829)(e),n(830)(e),n(839)(e),n(846)(e),n(851)(e),n(852)(e),n(853)(e),n(855)(e),n(856)(e),n(857)(e),n(858)(e)}},function(e,t){e.exports=function(e){function t(e){var t=this;this.$onInit=function(){t.accountEntity=e.getSequenceData().accountEntity||{},t.rules=e.getSequenceData().rules,t.associationRules=t.rules.associationRules[t.accountEntity.entityType],t.allowedAssociations=t.associationRules.allowedAssociations,t.relationshipRules=t.associationRules.relationshipRules,t.associationDescriptionType="";for(var n=0;n<t.allowedAssociations.length;++n)"NOMINEE"===t.allowedAssociations[n].type?t.associationDescriptionType="NOMINEE_BENEFICIARIES":"TRUSTED_CONTACT"===t.allowedAssociations[n].type?t.associationDescriptionType="TRUSTED_CONTACT":-1!==t.allowedAssociations[n].type.indexOf("PRIMARY_BENEFICIARY")?t.associationDescriptionType="BENEFICIARIES":"NOMINEE_GUARDIAN"===t.allowedAssociations[n].type?t.associationDescriptionType="NOMINEE_GUARDIAN":"IRA_DECEDENT"===t.allowedAssociations[n].type&&(t.associationDescriptionType="IRA_DECEDENT");0===t.associationDescriptionType.length&&(t.associationDescriptionType=t.accountEntity.entityType),t.accountAssociations=t.accountEntity.associations||[],t.accountEntity.association=t.accountAssociations[0]||{},t.spouseConsentRequired=e.getSequenceData().spouseConsentRequired||!1,t.spouseConsentFieldRequired=function(){return"INDIVIDUAL"===t.accountEntity.entityType&&angular.isDefined(t.accountEntity.association)&&("IRA_CONTINGENT_BENEFICIARY"===t.accountEntity.association.type||"IRA_PRIMARY_BENEFICIARY"===t.accountEntity.association.type)},t.isLegalEntity="LEGAL_ENTITY"===t.accountEntity.entityType,t.getAllowedRelationships=function(){if(t.accountEntity.association&&t.relationshipRules&&t.relationshipRules[t.accountEntity.association.type])return t.relationshipRules[t.accountEntity.association.type].allowedRelationships},t.getAllowedRelationshipToDeceased=function(){if(t.accountEntity.association&&t.relationshipRules&&t.relationshipRules[t.accountEntity.association.type])return t.relationshipRules[t.accountEntity.association.type].allowedRelationshipToDeceased},t.isOtherDetailsRequired=function(){return!(!t.accountEntity.association||"OTHER"!==t.accountEntity.relationship||!t.relationshipRules[t.accountEntity.association.type])&&t.relationshipRules[t.accountEntity.association.type].otherDetailsRequired},t.getAssociationKey=function(e){return"association.type."+e.type},e.configureButtons({canGoBack:!1,continueBtn:{onClick:function(){e.stepForward({accountEntity:t.accountEntity,spouseConsentRequired:t.spouseConsentRequired})}}})}}e.controller("AccountEntityAssociationTypeCtrl",t),t.$inject=["DynamicSequenceService"]}},function(e,t){e.exports=function(e){function t(e,t){var n=this;n.$onInit=function(){n.request=t.getSequenceData().request,n.cancelAllowed=t.getSequenceData().cancelAllowed,t.configureButtons({continueBtn:{btnText:e.instant("word.cancelRequest"),onClick:t.stepForward,isDisabled:function(){return!n.cancelAllowed}}})}}e.controller("EntityPendingRequestController",t),t.$inject=["$translate","DynamicSequenceService"]}},function(e,t){e.exports=function(e){function t(e,t){var n=this;n.$onInit=function(){n.isApplication=e===t.STANDALONE;var a=window.cancelFn,r=window.completeFn;n.cancel=window[a]||void 0,n.complete=window[r]||void 0}}e.controller("AccountEntitySeqCtrl",t),t.$inject=["ACTIVE_CONTEXT","ApplicationContext"]}},function(e,t){e.exports=function(e){function t(t,n,a){var r=this;r.$onInit=function(){r.allowedEntityTypes=a.getCurrentPage().pageData.allowedEntityTypes,r.addType=a.getCurrentPage().pageData.addType||"Add",r.sequenceLinkedPageIds=a.getCurrentPage().pageData.sequenceLinkedPageIds||[],r.pagePath="";var i=a.getCurrentPage().pageData.pagePath;angular.isDefined(i)&&i.length>0?r.pagePath=i:r.pagePath=e.WEBAPP_ROOT+"/sequences/accountentity/accountEntitySequence.html",r.navigateTo=function(){var e="";"INDIVIDUAL"===r.entityType?e="AddIndividual":"LEGAL_ENTITY"===r.entityType&&(e="AddLegalEntity");var a={id:e,path:r.pagePath,pageData:{sequenceType:"/"+r.addType+"/"+r.entityType,sequenceLinkedPageIds:r.sequenceLinkedPageIds},breadcrumb:t.REPLACE,skipFetch:!0};n.navigate(a)},a.setOnPageLoad(function(){r.allowedEntityTypes.length>1?a.setIsPageLoading(!1):(r.entityType=r.allowedEntityTypes[0],r.navigateTo())})}}e.controller("AddAccountEntityController",t),t.$inject=["BreadcrumbAction","NavigationService","PageService"]}},function(e,t){e.exports=function(e){function t(e,t,n,a,r,i,o){var s=this;s.$onInit=function(){s.request=i.getSequenceData().request||{},s.requiredTasks=i.getSequenceData().requiredTasks,s.status=i.getSequenceData().masterActionCallStatus||"SUBMITTED",s.isNominee=!1,s.contentHost=n;for(var l=s.request.entity.associations,c=0;c<l.length;++c)"NOMINEE"===l[c].type&&(s.isNominee=!0);s.hasInstructions=s.request.spouseConsentRequired||s.isNominee;var u=!1,d=r.getPendingItems();for(c=0;c<d.length;c++)if(angular.isDefined(d[c].task)&&4091===d[c].task.formNumber){u=!0;break}if(!u)for(c=0;c<s.requiredTasks.length;++c)r.getPendingItems().push(s.requiredTasks[c]);if(t===a.STANDALONE){var p=[{alignment:"left",onClick:o.navigateToPrevBreadcrumb,btnText:e.instant("word.ok")}];i.configureButtons({extraButtons:p})}else i.configureButtons({continueBtn:{btnText:e.instant("word.ok"),onClick:o.navigateToPrevBreadcrumb}})}}e.controller("AddEntityCompletionCtrl",t),t.$inject=["$translate","ACTIVE_CONTEXT","CONTENT_HOST","ApplicationContext","AmInterfaceService","DynamicSequenceService","NavigationService"]}},function(e,t){e.exports=function(e){function t(e,t,n,a,r,i,o){var s=this;s.$onInit=function(){(i.getSequenceData().fetchPendingItems||angular.isDefined(t.amHooks)&&t.amHooks.pendingItemNotifications)&&a.fetchPendingItems(),s.request=i.getSequenceData().request,s.isPrimaryCocTriggered=i.getSequenceData().isPrimaryCocTriggered,s.isClient=i.getSequenceData().isClient,s.isReviewRequired=i.getSequenceData().isReviewRequired,s.status=i.getSequenceData().masterActionCallStatus||"SUBMITTED",s.requiredTasks=i.getSequenceData().requiredTasks,s.isWarningTriggered=s.isPrimaryCocTriggered||s.isReviewRequired;for(var l=a.getPendingItems(),c=0;c<s.requiredTasks.length;c++){!1;for(var u=0;u<l.length;u++)if(s.requiredTasks[c].pendingItem.id===l[u].pendingItem.id){hasExistingPendingItem=!0;break}hasExistingPendingItem||a.getPendingItems().push(s.requiredTasks[c])}if(s.isStandalone=n===r.STANDALONE,s.isStandalone){var d=[{alignment:"left",onClick:o.navigateToPrevBreadcrumb,btnText:e.instant("word.ok")}];i.configureButtons({extraButtons:d})}else i.configureButtons({continueBtn:{btnText:e.instant("word.ok"),onClick:o.navigateToPrevBreadcrumb}})}}e.controller("EditEntityCompletionCtrl",t),t.$inject=["$translate","$window","ACTIVE_CONTEXT","AmInterfaceService","ApplicationContext","DynamicSequenceService","NavigationService"]}},function(e,t,n){e.exports=function(e){n(786)(e),n(788)(e),n(790)(e),n(792)(e),n(793)(e)}},function(e,t,n){e.exports=function(e){e.component("additionalNameCompletionStep",{template:n(787),controller:["$translate","DynamicSequenceService","NavigationService",function(e,t,n){var a=this;a.$onInit=function(){a.request=t.getSequenceData().request,t.configureButtons({canGoBack:!1,continueBtn:{onClick:n.navigateToPrevBreadcrumb,btnText:e.instant("word.ok")}})}}]})}},function(e,t){e.exports='<div page-structure>\n    <div align="center">\n        <i class="fa fa-4x fa-check-circle text-success"></i>\n    </div>\n    <h1 class="text-center text-success">{{\'word.success\' | translate}}</h1>\n    <h6 class="text-center">{{\'word.referenceNumber\' | translate}}: {{::$ctrl.request.id}}</h6>\n</div>'},function(e,t,n){e.exports=function(e){e.component("additionalNameConfigurationStep",{template:n(789),controller:["DynamicSequenceService",function(e){var t=this;t.$onInit=function(){t.entity=e.getSequenceData().entity||void 0,t.additionalNames=e.getSequenceData().additionalNames||[],t.rules=e.getSequenceData().rules,e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{onClick:function(){e.stepForward(t.additionalNames)}}})}}]})}},function(e,t){e.exports='<div page-structure ng-form="$ctrl.additionalNameForm">\n\t<h4>{{ \'additionalName.header.configure\' | translate:{entityName: ($ctrl.entity | amEntityName)} }}</h4>\n\t<am-form-additional-names ng-if="::$ctrl.rules" ng-model="$ctrl.additionalNames" rules="$ctrl.rules"></am-form-additional-names>\n</div>'},function(e,t,n){e.exports=function(e){e.component("additionalNamePendingRequest",{template:n(791),controller:["$translate","DynamicSequenceService",function(e,t){var n=this;n.$onInit=function(){n.request=t.getSequenceData().request,t.configureButtons({continueBtn:{btnText:e.instant("word.cancelRequest"),onClick:t.stepForward}})}}]})}},function(e,t){e.exports='<div page-structure>\n\t<div class="text-center">\n\t\t<i class="fa fa-2x fa-exclamation-triangle text-gray"></i>\n\t\t<h5>{{\'entity.pending.header\' | translate }}</h5>\n\t\t<br>\n\t\t<div class="alert alert-warning">\n\t\t\t<p translate=\'entity.pending.message\' translate-value-start-tag="<strong>" translate-value-end-tag="</strong>"></p>\n\t\t</div>\n\t</div>\n\t<am-field-value label-text="{{\'word.referenceNumber\' | translate}}" value-text="{{$ctrl.request.id}}"></am-field-value>\n    <am-field-value label-text="{{\'word.dateOfRequest\' | translate }}" value-text="{{$ctrl.request.requestTime | date:\'shortDate\'}}"></am-field-value>\n</div>'},function(e,t){e.exports=function(e){e.component("additionalNameSequence",{template:'<am-dynamic-sequence sequence-source="{{$ctrl.sequenceSource}}"></am-dynamic-sequence>',controller:["PageService",function(e){var t=this;t.$onInit=function(){t.sequenceSource="/AccountManagement/AdditionalName/Sequence/"+(e.getCurrentPage().pageData||{}).entityId}}]})}},function(e,t,n){e.exports=function(e){e.component("additionalNameReviewStep",{template:n(794),controller:["DynamicSequenceService",function(e){var t=this;t.$onInit=function(){t.additionalNames=e.getSequenceData().request.additionalNames||[],e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{onClick:e.stepForward}})}}]})}},function(e,t){e.exports='<div page-structure>\n\t<h4>{{ \'additionalName.header.review\' | translate }}</h4>\n\t<additional-names-review ng-if="::$ctrl.additionalNames.length > 0" names="$ctrl.additionalNames"></additional-names-review>\n</div>'},function(e,t,n){function a(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}e.exports=function(e){e.component("affiliateReviewStep",{template:n(796),controller:["$translate","ModalService","DynamicSequenceService","LoginTaskService",function(e,t,n,r){var i=this,o=function(){return!i.isLoadSuccessful},s=function(){if(function(){var n=i.userSelections.affiliates.isSelected,a=i.userSelections.publicsymbols.isSelected,r=i.userSelections.employees.isSelected,o=i.userSelections.affiliates.selections||[],s=i.userSelections.publicsymbols.selections||[],l=i.userSelections.employees.selections||[],c=[];if(n&&0===o.length&&c.push(e.instant("affiliateDesignation.error.missing.affilaites")),a&&0===s.length&&c.push(e.instant("affiliateDesignation.error.missing.publicsymbols")),r&&0===l.length&&c.push(e.instant("affiliateDesignation.error.missing.employees")),i.enabledSignificanShareholder&&n&&o.length>0)for(var u=0;u<o.length;u++)for(var d=o[u],p=0;p<(d.designations||[]).length;p++)"CAN"===(g=d.designations[p]).countryCode&&"SS"!==g.umirType&&"IA"!==g.umirType&&c.push(e.instant("affiliateDesignation.error.missing.umirDesignation",{company:g.description}));if(i.enabledSignificanShareholder&&a&&s.length>0)for(u=0;u<s.length;u++)for(d=s[u],p=0;p<(d.designations||[]).length;p++){var g;"CAN"===(g=d.designations[p]).countryCode&&"SS"!==g.umirType&&"IA"!==g.umirType&&c.push(e.instant("affiliateDesignation.error.missing.umirDesignation",{company:g.description}))}if(0===c.length)return!0;var f={title:e.instant("word.error"),modalData:{errors:c}};return t.openErrorModal(f),!1}()){var r={isHistorical:!angular.isDefined(i.userSelections.isHistorical)||i.userSelections.isHistorical,designations:function(){var e=i.userSelections.affiliates.isSelected,t=i.userSelections.publicsymbols.isSelected,n=i.userSelections.employees.isSelected,r=i.userSelections.affiliates.selections||[],o=i.userSelections.publicsymbols.selections||[],s=i.userSelections.employees.selections||[],l=[];if(e&&r.length>0)for(var c=0;c<r.length;c++)((u=r[c]).designations||[]).length>0&&l.push.apply(l,a(u.designations));if(t&&o.length>0)for(c=0;c<o.length;c++)((u=o[c]).designations||[]).length>0&&l.push.apply(l,a(u.designations));if(n&&s.length>0)for(c=0;c<s.length;c++){var u;((u=s[c]).designations||[]).length>0&&l.push.apply(l,a(u.designations))}return l}()};n.stepForward(r).catch(function(n){var a=[];if(n.data&&n.data.customErrors&&(a=n.data.customErrors||[]),0!==a.length){var r={title:e.instant("word.error"),modalData:{errors:a}};t.openErrorModal(r)}})}};i.$onInit=function(){i.skippable=n.getSequenceData().loginTask.skippable||!1,i.enabledSignificanShareholder=n.getSequenceData().enabledSignificanShareholder||!1,i.userReview=!0,i.isReviewComplete=!1,i.isLoadSuccessful=!1,i.userSelections={},i.onLoadEvent=function(e){i.isLoadSuccessful=e};var t=[];i.skippable&&t.push({alignment:"right",btnText:e.instant("word.skip"),onClick:r.skip}),r.setSkipOverride(!0),n.configureButtons({continueBtn:{onClick:s,isDisabled:o},extraButtons:t})}}]})}},function(e,t){e.exports='<div page-structure>\n\t<affiliate-designation-form on-load-callback="$ctrl.onLoadEvent(isSuccessful)" user-review="$ctrl.userReview" user-selections="$ctrl.userSelections"></affiliate-designation-form>\n</div>'},function(e,t){e.exports=function(e){function t(e){var t=this;t.$onInit=function(){t.consent=e.getSequenceData().consent||void 0,e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{onClick:function(){e.stepForward(t.consent)}}})}}e.controller("ElectionConsentSequenceStepCtrl",t),t.$inject=["DynamicSequenceService"]}},function(e,t,n){e.exports=function(e){n(799)(e),n(399)(e),n(800)(e),n(399)(e),n(801)(e),n(802)(e),n(803)(e),n(804)(e),n(805)(e),n(806)(e)}},function(e,t){e.exports=function(e){function t(e,t,n){var a=this;this.$onInit=function(){a.availableEmirElections=t.getSequenceData().availableEmirElections||[],a.emirElection=1===a.availableEmirElections.length?a.availableEmirElections[0]:t.getSequenceData().linkageType,a.ibEntityLegalName=t.getSequenceData().ibEntityLegalName,a.selectType=function(){t.stepForward(a.emirElection)},a.showFeeText=function(e){return"APPLY_FOR_LEI_VIA_IB"==e||"APPLY_FOR_LEI_VIA_IB_AND_REPORT_EMIR"==e},t.configureButtons({continueBtn:{isDisabled:function(){return!a.emirElectionForm||!a.emirElectionForm.$valid||angular.isUndefined(a.emirElection)||"UNKNOWN"===a.emirElection},onClick:a.selectType}})}}e.controller("EmirElectionController",t),t.$inject=["$translate","DynamicSequenceService","ModalService"]}},function(e,t){e.exports=function(e){function t(e,t,n,a,r){var i=this,o=function(){var t={registrationInfo:i.registrationInfo};i.collectEmirInfo()&&(t.emirInfo=i.emirInfo),e.stepForward(t)},s=function(){t.closeModal(),o()};i.$onInit=function(){i.rules=e.getSequenceData().rules,i.request=e.getSequenceData().request,angular.isDefined(i.request)&&(i.registrationInfo=i.request.registrationInfo),i.hasPendingLeiApp=e.getSequenceData().hasPendingLeiApplication,i.loginMessageType=e.getSequenceData().loginMessageType,i.emirElectionType=e.getSequenceData().emirElectionType,i.emirInfo=e.getSequenceData().emirInfo||{},i.collectEmirInfo()&&(i.emirInfo.electsReporting=!0),i.ibEntityLegalName=e.getSequenceData().ibEntityLegalName,i.getErrors=function(){return e.getSequenceData().errors},e.configureButtons(i.applyButtons)},i.applyButtons={canGoBack:!0,continueBtn:{onClick:function(){if(i.collectEmirInfo()&&angular.isDefined(i.emirInfo.category)&&-1!=["FC_MINUS","FC_PLUS"].indexOf(i.emirInfo.category)&&angular.isDefined(i.emirInfo.subCategories)&&(i.emirInfo.subCategories.indexOf("ALTERNATIVE_INVESTMENT_FUND")>=0||i.emirInfo.subCategories.indexOf("UCITS")>=0)){var e={templateUrl:"fund-manager-warning.component",title:n.instant("word.warning"),modalData:{warning:n.instant("emir.fundManager.warning",{breakTag:"<br>"})},buttons:[{label:"word.no",alignment:"left",fn:t.closeModal},{label:"word.yes",alignment:"right",btnType:"primary",fn:function(){s()}}]};t.openWarningModal(e)}else i.emirLeiApplicationDetailsForm.$valid&&!i.hasPendingLeiApp?a.fetchWarnings(i.registrationInfo,i.rules.leiApplicationRules).then(function(e){var a=e.warnings||[];if(a.length>0){var i=[];angular.forEach(a,function(e){i.push(r.getDisplayText(e.text))});var l={templateUrl:"error-modal.component",title:n.instant("word.warning"),buttons:[{label:"word.cancel",alignment:"left",fn:t.closeModal},{label:"information.correct",alignment:"right",btnType:"primary",fn:function(){s()}}],modalData:{errors:i}};t.openWarningModal(l)}else o()}):o()}}},i.collectEmirInfo=function(){return angular.isDefined(i.rules.emirInfoRules)}}e.controller("EmirLeiApplicationDetails",t),t.$inject=["DynamicSequenceService","ModalService","$translate","LeiService","DynamicTranslationService"]}},function(e,t){e.exports=function(e){function t(e,t,n){var a=this,r=function(){var t={};a.collectEmirInfo()&&(t.emirInfo=a.emirInfo),e.stepForward(t)},i=function(){t.closeModal(),r()};a.$onInit=function(){a.rules=e.getSequenceData().rules,a.leiRequest=e.getSequenceData().leiRequest||{},a.emirInfo=e.getSequenceData().emirInfo||{},a.noReportingWarned=!1,null==a.emirInfo.electsReporting&&(a.emirInfo.electsReporting=void 0),a.getErrors=function(){return e.getSequenceData().errors},e.configureButtons(a.applyButtons)},a.applyButtons={canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{onClick:function(){if(a.collectEmirInfo())if(a.emirInfo.electsReporting){if(angular.isDefined(a.emirInfo.category)&&-1!=["FC_MINUS","FC_PLUS"].indexOf(a.emirInfo.category)&&angular.isDefined(a.emirInfo.subCategories)&&(a.emirInfo.subCategories.indexOf("ALTERNATIVE_INVESTMENT_FUND")>=0||a.emirInfo.subCategories.indexOf("UCITS")>=0)){var e={templateUrl:"fund-manager-warning.component",title:n.instant("word.warning"),modalData:{warning:n.instant("emir.fundManager.warning",{breakTag:"<br>"})},buttons:[{label:"word.no",alignment:"left",fn:t.closeModal},{label:"word.yes",alignment:"right",btnType:"primary",fn:function(){i()}}]};return void t.openWarningModal(e)}}else if(angular.isDefined(a.emirInfo.electsReporting)&&!a.emirInfo.electsReporting&&!a.noReportingWarned)return a.noReportingWarned=!0,e={templateUrl:"error-modal.component",title:n.instant("word.warning"),buttons:[{label:"word.cancel",alignment:"left",fn:t.closeModal},{label:"emir.doNotDelegate",alignment:"right",btnType:"primary",fn:function(){i()}}],modalData:{errors:[n.instant("emir.noDelegatedReporting.warning",{strongStart:"<strong>",strongEnd:"</strong>",breakTag:"<br>"})]}},void t.openWarningModal(e);r()}}},a.collectEmirInfo=function(){return angular.isDefined(a.rules.emirInfoRules)}}e.controller("EmirDetailsCtrl",t),t.$inject=["DynamicSequenceService","ModalService","$translate"]}},function(e,t){e.exports=function(e){function t(e){var t=this;t.$onInit=function(){t.messageKey=e.getSequenceData().messageKey,t.hasPendingEmirOverride=e.getSequenceData().hasPendingEmirOverride,t.getErrors=function(){return e.getSequenceData().errors},e.configureButtons({canGoBack:!0,continueBtn:{onClick:function(){e.stepForward()}}})}}e.controller("EmirOverride",t),t.$inject=["DynamicSequenceService"]}},function(e,t){e.exports=function(e){function t(e,t){var n=this;n.$onInit=function(){var a;n.getSequenceData=e.getSequenceData,n.hasLeiValidationRequest=(a=n.getSequenceData().requests,!!(angular.isDefined(a)&&a.length>0)&&0!=t("filter")(a,{type:"FSB_LEI_SUBMIT"}).length),e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{onClick:e.stepForward}})}}e.controller("EmirReviewCtrl",t),t.$inject=["DynamicSequenceService","$filter"]}},function(e,t){e.exports=function(e){function t(e,t,n,a,r){var i=this;i.$onInit=function(){i.accountId=e.getSequenceData().accountId,i.status=e.getSequenceData().status,a===r.AM_DEPENDENCY?e.configureButtons({continueBtn:{btnText:t.instant("word.ok"),onClick:n.navigateToPrevBreadcrumb}}):e.configureButtons({extraButtons:[]})}}e.controller("EmirCompletionCtrl",t),t.$inject=["DynamicSequenceService","$translate","NavigationService","ACTIVE_CONTEXT","ApplicationContext"]}},function(e,t){e.exports=function(e){function t(e,t,n){var a=this;a.$onInit=function(){a.request=n.getSequenceData().request||{},n.configureButtons({continueBtn:{isDisabled:function(){return!1},onClick:n.stepForward,btnText:e.instant("word.cancelRequest")}})}}e.controller("EmirPendingRequestController",t),t.$inject=["$translate","NavigationService","DynamicSequenceService"]}},function(e,t){e.exports=function(e){function t(e,t){var n=this;n.$onInit=function(){n.rules=e.getSequenceData().rules,n.emirInfo=e.getSequenceData().emirInfo||{},null==n.emirInfo.electsReporting&&(n.emirInfo.electsReporting=void 0),n.getErrors=function(){return e.getSequenceData().errors},n.emirCategoryLabel=function(){return t.instant("emirCategory."+n.emirInfo.category)},e.configureButtons({canGoBack:!0,continueBtn:{onClick:function(){var t={emirInfo:n.emirInfo};e.stepForward(t)}}})}}e.controller("EmirNfcUpdate",t),t.$inject=["DynamicSequenceService","$translate"]}},function(e,t,n){e.exports=function(e){e.component("employerDetailsConfigurationStep",{template:n(808),controller:["DynamicSequenceService",function(e){var t=this,n=function(){var n={employerDetails:t.entity.employerDetails};e.stepForward(n)};t.$onInit=function(){t.entity=e.getSequenceData().entity,t.rules=e.getSequenceData().rules,e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{onClick:n}})}}]})}},function(e,t){e.exports='<div page-structure="fullPanel" no-border="true">\n\t<div class="trading-permissions" ng-form="$ctrl.employerDetailsForm">\n\t\t<h2>{{ \'employerDetails.header\' | translate:{entity: ($ctrl.entity | amEntityName)} }}</h2>\t\n\t\t<br>\n\t\t\x3c!-- \n\t\t\tEmployer Information\n\t\t--\x3e\n\t\t<am-form-employer-details ng-if="::$ctrl.rules" ng-model="$ctrl.entity.employerDetails" rules="$ctrl.rules"></am-form-employer-details>\n\t</div>\n</div>'},function(e,t){e.exports=function(e){e.component("existingEntitySelectionStep",{templateUrl:e.WEBAPP_ROOT+"/sequences/entityselection/existingEntitySelectionStep.html",controller:["$filter","$translate","DynamicSequenceService",function(e,t,n){var a=this,r="linkedInfo.addIndividual",i="linkedInfo.addLegalEntity",o=function(){var e=void 0;angular.isDefined(a.entitySelection)&&(e=a.entitySelection!==r&&a.entitySelection!==i);var t={addAssociationToExistingEntity:e,selectedEntity:a.entity};n.stepForward(t)};a.$onInit=function(){a.details=n.getSequenceData().details,a.entityAdditionRules=n.getSequenceData().rules,a.mainEntity=a.details.mainEntity,a.entityType=a.details.entityType,a.entity={},a.allowedEntities=e("filter")(a.entityAdditionRules.allowedEntities,{entityType:a.entityType})||[],a.allowedEntities.length>0&&("LEGAL_ENTITY"===a.entityType?a.allowedEntities.splice(0,0,i):a.allowedEntities.splice(0,0,r)),a.submissionState=void 0,a.isLoading=!0,a.errors={},a.getServerErrors=function(){return a.errors},a.entitySelectionChanged=function(){angular.isDefined(a.entitySelection)&&(a.entitySelection===r||a.entitySelection===i?(a.entity={},a.entity.entityId=0,a.entitySelection===r?a.entity.entityType="INDIVIDUAL":a.entitySelection===i&&(a.entity.entityType="LEGAL_ENTITY")):a.entity=angular.copy(a.entitySelection))},a.getEntityLabel=function(n){return n===r||n===i?t.instant(n):e("amEntityName")(n)},a.getSelectEntityLabel=function(){var e=t.instant("entity.type."+a.entityType);return t.instant("linkedInfo.selectEntity.label",{entityType:e})},n.configureButtons({canGoBack:!0,continueBtn:{onClick:o}}),a.isLoading=!1}}]})}},function(e,t,n){e.exports=function(e){n(811)(e),n(812)(e),n(813)(e),n(814)(e),n(815)(e),n(816)(e),n(817)(e),n(818)(e),n(819)(e),n(820)(e)}},function(e,t){e.exports=function(e){function t(e,t){var n=this;this.$onInit=function(){n.euReportingTypes=e.getSequenceData().euReportingTypes||[],e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{onClick:e.stepForward}}),n.showHeader=t.isLoginTaskActive}}e.controller("EuReportingCoverPageCtrl",t),t.$inject=["DynamicSequenceService","AmInterfaceService"]}},function(e,t){e.exports=function(e){function t(e,t,n,a){var r=this,i=function(){var a={noLei:r.noLei,registrationInfo:r.registrationInfo,leiErrorExplanations:r.leiErrorExplanations};e.stepForward(a).catch(function(e){if(e.data){if(e.data.errors&&Object.keys(e.data.errors).length>0&&(r.leiErrorExplanations=e.data.leiErrorExplanations||[],r.leiErrorExplanations.length>0))return void o();if(e.data.customErrors&&e.data.customErrors.length>0){var a={title:n.instant("word.error"),modalData:{errors:e.data.customErrors}};t.openErrorModal(a)}}})},o=function(){var e={contentClass:"modal-gray",title:n.instant("word.attention"),templateUrl:"lei-error-explanation-modal.component",modalData:{leiErrorExplanations:r.leiErrorExplanations||[],lei:r.registrationInfo.lei}};a(function(){t.openModal(e).then(function(e){angular.isUndefined(e)?r.leiErrorExplanations=[]:(r.leiErrorExplanations=e.leiErrorExplanations||[],s())})},500)},s=function(){i()};r.$onInit=function(){r.rules=e.getSequenceData().rules,r.registrationInfo=e.getSequenceData().registrationInfo||{},r.hasPendingLeiValidation=e.getSequenceData().hasPendingLeiValidation,r.leiErrorExplanations=e.getSequenceData().leiErrorExplanations||[],r.noLei=e.getSequenceData().noLei,r.noReportingWarned=!1,r.getErrors=function(){return e.getSequenceData().errors},e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{btnText:n.instant("word.continue"),onClick:s}})},r.getLeiInputMask=function(){return"'alias': 'latin', 'mask': '*{20}'"}}e.controller("EuReportingLeiCtrl",t),t.$inject=["DynamicSequenceService","ModalService","$translate","$timeout"]}},function(e,t){e.exports=function(e){function t(e,t,n,a,r){var i=this;i.$onInit=function(){i.rules=e.getSequenceData().rules,i.request=e.getSequenceData().request,angular.isDefined(i.request)&&(i.registrationInfo=i.request.registrationInfo),i.hasPendingLeiApp=e.getSequenceData().hasPendingLeiApplication,i.ibEntityLegalName=e.getSequenceData().ibEntityLegalName,i.hasPendingLeiApp||!angular.isUndefined(i.request)||i.rules.renewal?(i.currentStep="APPLY_SCREEN",e.configureButtons(i.applyButtons)):(i.currentStep="OFFER_SCREEN",e.configureButtons({canGoBack:!0}))},i.offerDecision=function(t){"ACCEPT"===t?(i.currentStep="APPLY_SCREEN",e.configureButtons(i.applyButtons)):"REJECT"===t&&(i.currentStep="WARN_SCREEN",e.configureButtons(i.warnButtons))};var o=function(){var t={registrationInfo:i.registrationInfo};e.stepForward(t)};i.applyButtons={canGoBack:!0,continueBtn:{onClick:function(){i.euReportingLeiApplicationForm.$valid&&!i.hasPendingLeiApp?a.fetchWarnings(i.registrationInfo,i.rules).then(function(e){var a=e.warnings||[];if(a.length>0){var i=[];angular.forEach(a,function(e){i.push(r.getDisplayText(e.text))});var s={templateUrl:"error-modal.component",title:n.instant("word.warning"),buttons:[{label:"word.cancel",alignment:"left",fn:t.closeModal},{label:"information.correct",alignment:"right",btnType:"primary",fn:function(){t.closeModal(),o()}}],modalData:{errors:i}};t.openWarningModal(s)}else o()}):o()}}},i.warnButtons={canGoBack:!0,continueBtn:{onClick:function(){e.stepForward({denied:"true"})}}}}e.controller("EuReportingLeiApplicationCtrl",t),t.$inject=["DynamicSequenceService","ModalService","$translate","LeiService","DynamicTranslationService"]}},function(e,t){e.exports=function(e){function t(e,t,n,a){var r=this;r.$onInit=function(){r.rules=e.getSequenceData().rules,r.euReportingInfo=e.getSequenceData().euReportingInfo||{},r.getErrors=function(){return e.getSequenceData().errors},r.onBranchChanged=function(){r.collectBranchCountry=r.rules.allowedBranchCountries.length>0&&r.euReportingInfo.branch,r.collectBranchHasLei=r.euReportingInfo.branch&&-1!=r.euReportingInfo.euReportingTypes.indexOf("SFTR")},r.collectBranchLeiAndName=function(){return r.collectBranchHasLei&&r.euReportingInfo.branchHasLei},r.showHeader=a.isLoginTaskActive,angular.isDefined(r.euReportingInfo.branch)&&r.onBranchChanged(),e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{isDisabled:function(){return!r.euReportingInfoForm||!r.euReportingInfoForm.$valid||angular.isUndefined(r.euReportingInfo.branch)},onClick:function(){var t={euReportingInfo:r.euReportingInfo};e.stepForward(t)}}})},r.getLeiInputMask=function(){return"'alias': 'latin', 'mask': '*{20}'"}}e.controller("EuReportingInfoCtrl",t),t.$inject=["DynamicSequenceService","ResourceService","$translate","AmInterfaceService"]}},function(e,t){e.exports=function(e){function t(t,n,a,r){var i=this,o=function(e){for(var t=-1,n=0;n<i.allowedEmirSubCategories.length;n++){if(i.allowedEmirSubCategories[n]===e){t=n;break}}i.allowedEmirSubCategories.splice(t,1)},s=function(){if(angular.isDefined(i.euReportingInfo.emirSubCategories)){for(var e=[],t=0;t<i.euReportingInfo.emirSubCategories.length;t++){var n=i.euReportingInfo.emirSubCategories[t];i.allowedEmirSubCategories.indexOf(n)>=0&&e.push(n)}if(i.euReportingInfo.emirSubCategories=e,i.euReportingInfo.emirSubCategories.length>1)for(t=0;t<i.euReportingInfo.emirSubCategories.length-1;t++){n=i.euReportingInfo.emirSubCategories[t];o(n)}else 0==i.euReportingInfo.emirSubCategories.length&&i.euReportingInfo.emirSubCategories.push(void 0)}},l=function(){i.rules.reportingOffered?i.collectCommercialActivity=angular.isDefined(i.euReportingInfo)&&(i.euReportingInfo.delegateEmirReporting&&"NFC_PLUS"===i.euReportingInfo.emirCategory||"NFC_MINUS"===i.euReportingInfo.emirCategory):i.collectCommercialActivity=angular.isDefined(i.euReportingInfo)&&("NFC_PLUS"===i.euReportingInfo.emirCategory||"NFC_MINUS"===i.euReportingInfo.emirCategory)},c=function(){var e={euReportingInfo:i.euReportingInfo};t.stepForward(e)},u=function(){r.closeModal(),c()},d=function(){if(angular.isDefined(i.euReportingInfo.delegateEmirReporting)){if(!i.euReportingInfo.delegateEmirReporting&&!i.noReportingWarned){i.noReportingWarned=!0;var e={templateUrl:"error-modal.component",title:a.instant("word.warning"),buttons:[{label:"word.cancel",alignment:"left",fn:r.closeModal},{label:"emir.doNotDelegate",alignment:"right",btnType:"primary",fn:function(){u()}}],modalData:{errors:[a.instant("emir.noDelegatedReporting.warning",{strongStart:"<strong>",strongEnd:"</strong>",breakTag:"<br>"})]},backdrop:"static",noClose:!0};return void r.openWarningModal(e)}if(i.euReportingInfo.delegateEmirReporting&&!i.currentlyEnrolled){e={title:a.instant("word.attention"),buttons:[,{label:"word.continue",alignment:"right",btnType:"primary",fn:function(){u()}}],modalData:{infoContent:a.instant("emir.delegatedReporting.popup",{strongStart:"<strong>",strongEnd:"</strong>",breakTag:"<br>"})}};return void r.openInfoModal(e)}}c()};i.$onInit=function(){i.rules=t.getSequenceData().rules,i.euReportingInfo=t.getSequenceData().euReportingInfo||{},i.currentlyEnrolled=angular.isDefined(i.euReportingInfo.delegateEmirReporting)&&i.euReportingInfo.delegateEmirReporting,i.ibEntityLegalName=t.getSequenceData().ibEntityLegalName,i.responsibleEntityExempt=t.getSequenceData().responsibleEntityExempt||!1,i.noReportingWarned=!1,i.getErrors=function(){return t.getSequenceData().errors},i.emirCategoryChanged=function(){if(angular.isUndefined(i.euReportingInfo)||angular.isUndefined(i.euReportingInfo.emirCategory))return i.allowedEmirSubCategories=[],void l();var t,a;t=i.euReportingInfo.emirCategory,a={category:t},n.create(e.AM_SERVER_PATH+"/EmirUtil/Subcategories",a).then(function(e){var t=e.data;i.allowedEmirSubCategories=t.subCategories||[],angular.isUndefined(i.euReportingInfo.emirSubCategories)||0==i.euReportingInfo.emirSubCategories.length?(i.euReportingInfo.emirSubCategories=[],i.euReportingInfo.emirSubCategories.push(void 0)):s()}).catch(function(e){}),l()},i.getMaxEmirSubcategories=function(){return angular.isDefined(i.euReportingInfo)&&angular.isDefined(i.euReportingInfo.emirCategory)?"NFC_MINUS"===i.euReportingInfo.emirCategory||"NFC_PLUS"===i.euReportingInfo.emirCategory?3:1:0},i.showAddRemoveEmirBlock=function(){return i.getMaxEmirSubcategories()>1},i.addEmirSubCategory=function(){i.euReportingInfo.emirSubCategories.length>0&&(o(i.euReportingInfo.emirSubCategories[i.euReportingInfo.emirSubCategories.length-1]),i.emirReportingInfoForm["emirSubCategory_"+(i.euReportingInfo.emirSubCategories.length-1)].$setPristine()),i.euReportingInfo.emirSubCategories.push(void 0)},i.removeEmirSubCategory=function(e){var t=i.euReportingInfo.emirSubCategories.indexOf(e);t===i.euReportingInfo.emirSubCategories.length-1?angular.isDefined(i.euReportingInfo.emirSubCategories[t-1])&&i.allowedEmirSubCategories.push(i.euReportingInfo.emirSubCategories[t-1]):i.allowedEmirSubCategories.push(e),i.euReportingInfo.emirSubCategories.splice(t,1)},i.isAddEmirDisabled=function(){return i.euReportingInfo.emirSubCategories.length>0&&!i.euReportingInfo.emirSubCategories[i.euReportingInfo.emirSubCategories.length-1]},i.isEmirSubCategoryRequired=function(){return!(angular.isUndefined(i.euReportingInfo)||angular.isUndefined(i.euReportingInfo.emirCategory)||angular.isUndefined(i.euReportingInfo.delegateEmirReporting))&&(-1!=["FC_MINUS","FC_PLUS","NFC_PLUS"].indexOf(i.euReportingInfo.emirCategory)?i.euReportingInfo.delegateEmirReporting:"NFC_MINUS"===i.euReportingInfo.emirCategory)},i.onDelegateEmirReportingChanged=function(){l(),i.emirSubCategoryChanged()},i.getDelegateEmirReportingWarning=function(){var e="";return"NFC_MINUS"===i.euReportingInfo.emirCategory&&(e+=a.instant("euReporting.emirReporting.info")),i.rules.reportingOffered?(!angular.isUndefined(i.euReportingInfo.delegateEmirReporting)&&i.euReportingInfo.delegateEmirReporting||(0!=e.length&&(e+="<br/>"),e+=a.instant("emir.noReporting.info",{linkStart:'<a href="https://ibkrguides.com/kb/emir-information-on-self-reporting.htm" target="_blank">',linkEnd:"</a>"})),e):e},i.emirSubCategoryChanged=function(){var e=[];if(angular.isDefined(i.euReportingInfo.emirSubCategories)&&0!=i.euReportingInfo.emirSubCategories.length)for(var t=0;t<i.euReportingInfo.emirSubCategories.length;t++){var n=i.euReportingInfo.emirSubCategories[t];-1!=["UCITS","ALTERNATIVE_INVESTMENT_FUND","OCCUPATIONAL_RETIREMENT"].indexOf(n)&&e.push(n)}i.collectResponsibleEntityInfo=!i.responsibleEntityExempt&&i.euReportingInfo.delegateEmirReporting&&-1!=["FC_MINUS","FC_PLUS"].indexOf(i.euReportingInfo.emirCategory)&&e.length>0},i.getResponsibleEntityInfoInstructions=function(){if(angular.isDefined(i.euReportingInfo.emirSubCategories)&&0!=i.euReportingInfo.emirSubCategories.length){if(-1!=i.euReportingInfo.emirSubCategories.indexOf("ALTERNATIVE_INVESTMENT_FUND"))return a.instant("emir.managerInfo.aifInstructions");if(-1!=i.euReportingInfo.emirSubCategories.indexOf("UCITS"))return a.instant("emir.managerInfo.ucitsInstructions")}return a.instant("emir.managerInfo.instructions")},i.offerClientsReporting=function(){return i.rules.ndClientReportingRules&&i.euReportingInfo.delegateEmirReporting},i.getMasterAgreementNameRules=function(){return i.rules.ndClientReportingRules.masterEmirAgreementNameRules},i.collectMasterAgreementName=function(){return"OTHR"===i.euReportingInfo.ndClientReporting.masterEmirAgreement},i.getMasterAgreementVersionRules=function(){return i.rules.ndClientReportingRules.masterEmirAgreementVersionRules},i.collectMasterAgreementVersion=function(){return angular.isDefined(i.euReportingInfo.ndClientReporting.masterEmirAgreement)&&-1===["OTHR","BIAG"].indexOf(i.euReportingInfo.ndClientReporting.masterEmirAgreement)},i.getVersionInputMask=function(){var e=(new Date).getFullYear();return"'alias': 'integer', 'max': '"+e+"', 'min': '"+(e-100)+"'"},t.configureButtons({canGoBack:t.getSequenceData().stepIndex>0,continueBtn:{isDisabled:function(){return i.rules.reportingOffered?!i.emirReportingInfoForm||!i.emirReportingInfoForm.$valid||angular.isUndefined(i.euReportingInfo.delegateEmirReporting):!i.emirReportingInfoForm||!i.emirReportingInfoForm.$valid},onClick:d}})}}e.controller("EmirReportingInfoCtrl",t),t.$inject=["DynamicSequenceService","ResourceService","$translate","ModalService"]}},function(e,t){e.exports=function(e){function t(e,t,n){var a=this,r=function(){var t={euReportingInfo:a.euReportingInfo};e.stepForward(t)},i=function(){if(!a.eligibleForMifirReporting||!angular.isDefined(a.euReportingInfo.delegateMifirReporting)||a.euReportingInfo.delegateMifirReporting||a.noReportingWarned)r();else{a.noReportingWarned=!0;var e={templateUrl:"error-modal.component",title:n.instant("word.warning"),buttons:[{label:"word.cancel",alignment:"left",fn:t.closeModal},{label:"mifir.doNotDelegate",alignment:"right",btnType:"primary",fn:function(){t.closeModal(),r()}}],modalData:{errors:[n.instant("mifir.noDelegatedReporting.warning",{strongStart:"<strong>",strongEnd:"</strong>",breakTag:"<br>"})]},backdrop:"static",noClose:!0};t.openWarningModal(e)}};a.$onInit=function(){a.rules=e.getSequenceData().rules,a.euReportingInfo=e.getSequenceData().euReportingInfo||{},a.ibEntityLegalName=e.getSequenceData().ibEntityLegalName,a.isFund=e.getSequenceData().isFund,a.eligibleForMifirReporting=e.getSequenceData().eligibleForMifirReporting,a.noReportingWarned=!1,a.getErrors=function(){return e.getSequenceData().errors},a.canDelegateMifirReporting=function(){return a.rules.reportingOffered&&a.eligibleForMifirReporting&&angular.isDefined(a.euReportingInfo.investmentFirm)&&a.euReportingInfo.investmentFirm},a.getMifirReportingNotAvailableWarning=function(){var e="";return a.rules.reportingOffered?(!a.eligibleForMifirReporting&&angular.isDefined(a.euReportingInfo.investmentFirm)&&a.euReportingInfo.investmentFirm&&(0!=e.length&&(e+="<br/>"),e+=n.instant("mifir.reporting.notAvailable")),e):e},a.collectFundManagerLei=function(){return!!a.isFund&&(angular.isDefined(a.euReportingInfo.delegateMifirReporting)&&a.euReportingInfo.delegateMifirReporting)},a.collectHedgingCommodities=function(){return a.rules.reportingOffered?angular.isDefined(a.euReportingInfo.delegateMifirReporting)&&a.euReportingInfo.delegateMifirReporting:angular.isDefined(a.euReportingInfo.investmentFirm)&&a.euReportingInfo.investmentFirm},a.onInvestmentFirmChanged=function(){angular.isDefined(a.euReportingInfo.investmentFirm)&&(a.euReportingInfo.investmentFirm?a.rules.reportingOffered&&!a.eligibleForMifirReporting&&(a.euReportingInfo.delegateMifirReporting=!1):delete a.euReportingInfo.delegateMifirReporting)},a.offerClientsReporting=function(){return a.rules.ndClientReportingRules&&a.euReportingInfo.delegateMifirReporting},e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{isDisabled:function(){return!a.mifirReportingInfoForm||!a.mifirReportingInfoForm.$valid||angular.isUndefined(a.euReportingInfo.investmentFirm)},onClick:i}})},a.getLeiInputMask=function(){return"'alias': 'latin', 'mask': '*{20}'"}}e.controller("MifirReportingInfoCtrl",t),t.$inject=["DynamicSequenceService","ModalService","$translate"]}},function(e,t){e.exports=function(e){function t(e,t,n){var a=this;a.$onInit=function(){a.rules=e.getSequenceData().rules,a.loginMessageType=e.getSequenceData().loginMessageType,a.decisionMakerIndividuals=e.getSequenceData().decisionMakerIndividuals,a.decisionMakerAlgorithms=e.getSequenceData().decisionMakerAlgorithms,a.authorizedTraders=e.getSequenceData().authorizedTraders,a.algorithms=e.getSequenceData().algorithms,e.configureButtons({canGoBack:!0,continueBtn:{onClick:function(){var r={decisionMakerIndividuals:a.decisionMakerIndividuals,decisionMakerAlgorithms:a.decisionMakerAlgorithms};e.stepForward(r).catch(function(e){if(e.data&&e.data.customErrors&&e.data.customErrors.length>0){var a={title:n.instant("word.error"),modalData:{errors:e.data.customErrors}};t.openErrorModal(a)}})}}})}}e.controller("MifirDecisionMakersInfoCtrl",t),t.$inject=["DynamicSequenceService","ModalService","$translate"]}},function(e,t){e.exports=function(e){function t(t,n,a,r){var i=this,o=function(){var e={euReportingInfo:i.euReportingInfo};t.stepForward(e)},s=function(){if(!angular.isDefined(i.euReportingInfo.delegateSftrReporting)||i.euReportingInfo.delegateSftrReporting||i.noReportingWarned)o();else{i.noReportingWarned=!0;var e={templateUrl:"error-modal.component",title:a.instant("word.warning"),buttons:[{label:"word.cancel",alignment:"left",fn:r.closeModal},{label:"sftr.doNotDelegate",alignment:"right",btnType:"primary",fn:function(){r.closeModal(),o()}}],modalData:{errors:[a.instant("sftr.noDelegatedReporting.warning",{strongStart:"<strong>",strongEnd:"</strong>",breakTag:"<br>"})]},backdrop:"static",noClose:!0};r.openWarningModal(e)}},l=function(e){for(var t=-1,n=0;n<i.allowedSftrSubCategories.length;n++){if(i.allowedSftrSubCategories[n]===e){t=n;break}}i.allowedSftrSubCategories.splice(t,1)},c=function(){if(angular.isDefined(i.euReportingInfo.sftrSubCategories)){for(var e=[],t=0;t<i.euReportingInfo.sftrSubCategories.length;t++){var n=i.euReportingInfo.sftrSubCategories[t];i.allowedSftrSubCategories.indexOf(n)>=0&&e.push(n)}if(i.euReportingInfo.sftrSubCategories=e,i.euReportingInfo.sftrSubCategories.length>1)for(t=0;t<i.euReportingInfo.sftrSubCategories.length-1;t++){n=i.euReportingInfo.sftrSubCategories[t];l(n)}}};i.$onInit=function(){i.rules=t.getSequenceData().rules,i.euReportingInfo=t.getSequenceData().euReportingInfo||{},i.countryOfLegalResidence=t.getSequenceData().countryOfLegalResidence,i.ibEntity=t.getSequenceData().ibEntity,i.isFund=t.getSequenceData().isFund,i.responsibleEntityExempt=t.getSequenceData().responsibleEntityExempt||!1,i.noReportingWarned=!1,i.getErrors=function(){return t.getSequenceData().errors},i.sftrCategoryChanged=function(){var t,a;angular.isUndefined(i.euReportingInfo.sftrCategory)||angular.isUndefined(i.euReportingInfo.sftrCategory)?i.allowedSftrSubCategories=[]:(t=i.euReportingInfo.sftrCategory,a={category:t},n.create(e.AM_SERVER_PATH+"/SftrUtil/Subcategories",a).then(function(e){var t=e.data;i.allowedSftrSubCategories=t.subCategories||[],angular.isUndefined(i.euReportingInfo.sftrSubCategories)||0==i.euReportingInfo.sftrSubCategories.length?(i.euReportingInfo.sftrSubCategories=[],i.euReportingInfo.sftrSubCategories.push(void 0)):c()}).catch(function(e){}),i.getDelegateSftrReportingWarning().length>0&&(i.euReportingInfo.delegateSftrReporting=!0))},i.sftrSubCategoryChanged=function(){var t,a=[];if(angular.isDefined(i.euReportingInfo.sftrSubCategories)&&0!=i.euReportingInfo.sftrSubCategories.length)for(var r=0;r<i.euReportingInfo.sftrSubCategories.length;r++){var o=i.euReportingInfo.sftrSubCategories[r];-1!=["AIF_MANAGED","UCITS_AND_ITS_MANAGEMENT_COMPANY","FINANCIAL","REAL_ESTATE","INSURANCE_UNDERTAKING"].indexOf(o)&&a.push(o)}i.euReportingInfo.delegateSftrReporting&&a.length>0?(t={subCategories:a},n.create(e.AM_SERVER_PATH+"/SftrUtil/Fundcategories",t).then(function(e){var t=e.data;i.allowedFundCategories=t.fundCategories||[],angular.isDefined(i.euReportingInfo.fundCategory)&&i.allowedFundCategories.indexOf(i.euReportingInfo.fundCategory)<0&&(i.euReportingInfo.fundCategory=void 0)}).catch(function(e){})):(i.allowedFundCategories=[],delete i.euReportingInfo.fundCategory),i.collectResponsibleEntityInfo=!i.responsibleEntityExempt&&i.euReportingInfo.delegateSftrReporting&&"FINANCIAL_COUNTERPARTY"===i.euReportingInfo.sftrCategory&&a.length>0},i.getMaxSftrSubcategories=function(){return angular.isDefined(i.euReportingInfo)&&angular.isDefined(i.euReportingInfo.sftrCategory)?3:0},i.showAddRemoveSftrBlock=function(){return i.getMaxSftrSubcategories()>1},i.addSftrSubCategory=function(){i.euReportingInfo.sftrSubCategories.length>0&&(l(i.euReportingInfo.sftrSubCategories[i.euReportingInfo.sftrSubCategories.length-1]),i.sftrReportingInfoForm["sftrSubCategory_"+(i.euReportingInfo.sftrSubCategories.length-1)].$setPristine()),i.euReportingInfo.sftrSubCategories.push(void 0)},i.getLastSftrSubEntryIndex=function(){var e=i.euReportingInfo.sftrSubCategories.length;return 0==e?0:e-1},i.removeSftrSubCategory=function(e){var t=i.euReportingInfo.sftrSubCategories.indexOf(e);t===i.euReportingInfo.sftrSubCategories.length-1?angular.isDefined(i.euReportingInfo.sftrSubCategories[t-1])&&i.allowedSftrSubCategories.push(i.euReportingInfo.sftrSubCategories[t-1]):i.allowedSftrSubCategories.push(e),i.euReportingInfo.sftrSubCategories.splice(t,1),i.sftrSubCategoryChanged()},i.isAddSftrSubDisabled=function(){return i.euReportingInfo.sftrSubCategories.length>0&&!i.euReportingInfo.sftrSubCategories[i.euReportingInfo.sftrSubCategories.length-1]},i.canDelegateSftrReporting=function(){return!(!i.rules.reportingOffered||angular.isUndefined(i.euReportingInfo.sftrCategory))&&(("NON_FINANCIAL_COUNTERPARTY_BELOW_THRESHOLD"!==i.euReportingInfo.sftrCategory||"IE"!==i.ibEntity&&"CE"!==i.ibEntity)&&("FINANCIAL_COUNTERPARTY"===i.euReportingInfo.sftrCategory||"GBR"!==i.countryOfLegalResidence.alpha3))},i.onDelegateSftrReportingChanged=function(){i.sftrSubCategoryChanged()},i.getDelegateSftrReportingWarning=function(){var e="";return i.rules.reportingOffered?(!i.canDelegateSftrReporting()||!angular.isUndefined(i.euReportingInfo.delegateSftrReporting)&&i.euReportingInfo.delegateSftrReporting||(0!=e.length&&(e+="<br/>"),e+=a.instant("sftr.noReporting.info",{linkStart:'<a href="https://ibkrguides.com/kb/sftrreportingimportantinfo.htm" target="_blank">',linkEnd:"</a>"})),"NON_FINANCIAL_COUNTERPARTY_BELOW_THRESHOLD"!==i.euReportingInfo.sftrCategory||"IE"!==i.ibEntity&&"CE"!==i.ibEntity||(0!=e.length&&(e+="<br/>"),e+=a.instant("sftr.reportingPreselected.info")),e):e},i.getResponsibleEntityInfoInstructions=function(){if(angular.isDefined(i.euReportingInfo.sftrSubCategories)&&0!=i.euReportingInfo.sftrSubCategories.length){if(-1!=i.euReportingInfo.sftrSubCategories.indexOf("AIF_MANAGED"))return a.instant("sftrInfo.managerInfo.aifInstructions");if(-1!=i.euReportingInfo.sftrSubCategories.indexOf("UCITS_AND_ITS_MANAGEMENT_COMPANY"))return a.instant("sftrInfo.managerInfo.ucitsInstructions")}return a.instant("sftrInfo.managerInfo.instructions")},i.offerClientsReporting=function(){return i.rules.ndClientReportingRules&&i.euReportingInfo.delegateSftrReporting},i.getMasterAgreementNameRules=function(){return i.rules.ndClientReportingRules.masterSftrAgreementNameRules},i.collectMasterAgreementName=function(){return"OTHR"===i.euReportingInfo.ndClientReporting.masterSftrAgreement},i.getMasterAgreementVersionRules=function(){return i.rules.ndClientReportingRules.masterSftrAgreementVersionRules},i.collectMasterAgreementVersion=function(){return angular.isDefined(i.euReportingInfo.ndClientReporting.masterSftrAgreement)&&-1===["OTHR","BIAG","CSDA"].indexOf(i.euReportingInfo.ndClientReporting.masterSftrAgreement)},i.getVersionInputMask=function(){var e=(new Date).getFullYear();return"'alias': 'integer', 'max': '"+e+"', 'min': '"+(e-100)+"'"},t.configureButtons({canGoBack:t.getSequenceData().stepIndex>0,continueBtn:{isDisabled:function(){return!i.sftrReportingInfoForm||!i.sftrReportingInfoForm.$valid},onClick:s}})},i.getLeiInputMask=function(){return"'alias': 'latin', 'mask': '*{20}'"}}e.controller("SftrReportingInfoCtrl",t),t.$inject=["DynamicSequenceService","ResourceService","$translate","ModalService"]}},function(e,t){e.exports=function(e){function t(e,t,n,a,r){var i=this;i.$onInit=function(){i.accountId=e.getSequenceData().accountId,a===r.AM_DEPENDENCY?e.configureButtons({continueBtn:{btnText:t.instant("word.ok"),onClick:n.navigateToPrevBreadcrumb}}):e.configureButtons({extraButtons:[]})}}e.controller("EuReportingCompletionCtrl",t),t.$inject=["DynamicSequenceService","$translate","NavigationService","ACTIVE_CONTEXT","ApplicationContext"]}},function(e,t){e.exports=function(e){function t(e,t){var n=this;n.$onInit=function(){n.request=t.getSequenceData().request||{},t.configureButtons({continueBtn:{isDisabled:function(){return!1},onClick:t.stepForward,btnText:e.instant("word.cancelRequest")}})}}e.controller("EuReportingPendingRequestCtrl",t),t.$inject=["$translate","DynamicSequenceService"]}},function(e,t){e.exports=function(e){function t(e,t,n,a){var r=this,i={};r.$onInit=function(){r.accountEntity=t.getSequenceData().accountEntity,r.rules=t.getSequenceData().rules,r.sequenceType=t.getSequenceData().sequenceType,r.nameChangeReason=t.getSequenceData().nameChangeReason,r.nameChangeType=t.getSequenceData().nameChangeType,r.ocrAssociationTitle=t.getSequenceData().ocrAssociationTitle||"",r.isEditSequence="EDIT_ENTITY"===r.sequenceType,r.mailingAddressSame=!1,r.linkedEntities=t.getSequenceData().linkedEntities||[],r.inboundLinks=function(){for(var e=[],t=0;t<r.accountEntity.linkedEntities.length;t++){var n=r.accountEntity.linkedEntities[t];n.secondaryEntityId===r.accountEntity.entityId&&e.push(n)}return e}(),r.showAccountAssociations=r.isEditSequence&&r.accountEntity.associations.length>0,r.sameStateOfLegalResidence=angular.isUndefined(r.accountEntity.stateOfLegalResidence)||angular.equals(r.accountEntity.stateOfLegalResidence,r.accountEntity.address.state),i.primaryCitizenship=t.getSequenceData().originalPrimaryCitizenship,i.name=t.getSequenceData().originalName,i.motherMaidenFirstName=t.getSequenceData().originalMotherMaidenFirstName,i.motherMaidenName=t.getSequenceData().originalMotherMaidenName,r.allowedStateOfLegalResidenceChange=function(){return angular.isDefined(r.rules.allowedLegalStates)&&r.rules.allowedLegalStates.length>0&&angular.isDefined(r.accountEntity.address)&&angular.isDefined(r.accountEntity.address.country)&&angular.isDefined(r.accountEntity.countryOfLegalResidence)&&angular.equals(r.accountEntity.address.country.alpha3,r.accountEntity.countryOfLegalResidence.alpha3)},r.getStateText=function(e){return e.dbName},r.isFieldDisabled=function(e){return r.getOriginalValue(e)&&r.isEditSequence},r.getOriginalValue=function(e){return i[e]},r.getAssociationKey=function(e){return"association.type."+e.type},r.getLinkedEntity=function(e){for(var t=0;t<r.linkedEntities.length;t++){var n=r.linkedEntities[t];if(n.entityId===e)return n}return null},r.showPersonalInfoSubtitle=function(){return!(1==r.accountEntity.associations.length&&["FUND_CONTACT","TPA_CONTACT","OUTSIDE_AUDITOR_CONTACT"].indexOf(r.accountEntity.associations[0].type)>-1)&&(!r.rules.addressRules||!r.rules.addressRules.employeeTrackAccount)},t.configureButtons({canGoBack:t.getSequenceData().stepIndex>0,continueBtn:{googlePlacesBtn:function(){if(angular.isDefined(r.rules.addressRules)){var e=r.rules.addressRules;if(angular.isDefined(e.enableGooglePlaces))return e.enableGooglePlaces}return!1}(),onClick:function(){r.mailingAddressSame&&r.rules.addressRules.mailingAddressRequired&&(r.accountEntity.mailingAddress=r.accountEntity.address),r.sameStateOfLegalResidence&&r.allowedStateOfLegalResidenceChange()&&(r.accountEntity.stateOfLegalResidence=r.accountEntity.address.state),angular.isUndefined(r.rules.legalResidenceRules)||null===r.rules.legalResidenceRules||angular.isUndefined(r.accountEntity.countryOfLegalResidence)||-1!==r.rules.legalResidenceRules.countriesWithLegalState.indexOf(r.accountEntity.countryOfLegalResidence.alpha3)||(r.accountEntity.stateOfLegalResidence=void 0);var a={accountEntity:r.accountEntity,nameChangeReason:r.nameChangeReason,nameChangeType:r.nameChangeType,ocrAssociationTitle:r.ocrAssociationTitle};t.stepForward(a).catch(function(t){if(t.data&&t.data.customErrors&&t.data.customErrors.length>0){var a={title:e.instant("word.error"),modalData:{errors:t.data.customErrors}};n.openErrorModal(a)}})}}})}}e.controller("IndividualEntityDetailsCtrl",t),t.$inject=["$translate","DynamicSequenceService","ModalService","PageService"]}},function(e,t){e.exports=function(e){function t(t,n,a){var r=this;r.$onInit=function(){r.accountEntity=a.getSequenceData().accountEntity||{},r.rules=a.getSequenceData().rules,r.trusteeEntity=a.getSequenceData().trusteeEntity,r.primaryEntityName=a.getSequenceData().primaryEntityName||"",r.sequenceType=a.getSequenceData().sequenceType,r.isEditSequence="EDIT_ENTITY"===r.sequenceType,r.isEstate=r.accountEntity.relationship&&"ESTATE"===r.accountEntity.relationship,r.accountEntity.legalEntityName=r.isEstate&&r.primaryEntityName.length>0?"Estate of "+r.primaryEntityName:r.accountEntity.legalEntityName,r.mailingAddressSame=!1,r.getAssociationKey=function(e){return"association.type."+e.type},r.linkedEntities=a.getSequenceData().linkedEntities||[],r.inboundLinks=function(){for(var e=[],t=0;t<r.accountEntity.linkedEntities.length;t++){var n=r.accountEntity.linkedEntities[t];n.secondaryEntityId===r.accountEntity.entityId&&e.push(n)}return e}(),r.showAccountAssociations=r.isEditSequence&&r.accountEntity.associations.length>0||!r.isEditSequence&&1==r.accountEntity.associations.length,r.getLinkedEntity=function(e){for(var t=0;t<r.linkedEntities.length;t++){var n=r.linkedEntities[t];if(n.entityId===e)return n}return null},r.getServerErrors=function(){return a.getSequenceData().errors},r.showLeiDescription=function(){var a={title:t.instant("legal.entity.identifier"),templateUrl:e.AM_SERVER_PATH+"/template/modal/lei/leiHelp.html"};n.openInfoModal(a)},r.getLeiInputMask=function(){return"'alias': 'latin', 'mask': '*{20}'"},a.configureButtons({canGoBack:!r.isEditSequence,continueBtn:{googlePlacesBtn:function(){if(angular.isDefined(r.rules.addressRules)){var e=r.rules.addressRules;if(angular.isDefined(e.enableGooglePlaces))return e.enableGooglePlaces}return!1}(),onClick:function(){var e={accountEntity:r.accountEntity,trusteeEntity:r.trusteeEntity};a.stepForward(e).catch(function(e){if(e.data&&e.data.customErrors&&e.data.customErrors.length>0){var a={title:t.instant("word.error"),modalData:{errors:e.data.customErrors}};n.openErrorModal(a)}})}}})}}e.controller("LegalEntityDetailsController",t),t.$inject=["$translate","ModalService","DynamicSequenceService"]}},function(e,t){e.exports=function(e){function t(e,t,n,a,r){var i=this;i.update=function(){n.stepForward({updating:!0})},i.$onInit=function(){i.rules=n.getSequenceData().rules,i.relevantMasterAccounts=i.rules.relevantMasterAccounts||{},i.registeredCountries=i.rules.registeredCountries||{},i.eligibleEntities=i.rules.eligibleEntities||{},i.confirmStep=n.getSequenceData().confirmStep||!1,i.getCredential=function(e){return i.rules.masterCredentials[e.account.ownerUsername]||e.account.ownerUsername},i.getJurisdictionsInfo=function(){for(var t="",n=0;n<i.relevantMasterAccounts.length;++n){var a=i.relevantMasterAccounts[n];t.length&&(i.relevantMasterAccounts.length>1&&n===i.relevantMasterAccounts.length-1?t+=" and ":t+=", "),t+=a.account.ibEntity}return i.relevantMasterAccounts.length>1?i.rules.broker?e.instant("jurisdictionInfo.plural.broker",{jurisdictionCount:i.relevantMasterAccounts.length,jurisdictions:t}):e.instant("jurisdictionInfo.plural.financialAdvisor",{jurisdictionCount:i.relevantMasterAccounts.length,jurisdictions:t}):i.rules.broker?e.instant("jurisdictionInfo.singular.broker",{jurisdictions:t}):e.instant("jurisdictionInfo.singular.financialAdvisor",{jurisdictions:t})},i.getUpdateInstructionsText=function(){var t="jurisdictionInfo.update";return i.confirmStep?t="jurisdictionInfo.updateOrConfirm":i.rules.organization?t="jurisdictionInfo.organization.update":i.rules.singleHedgeFund&&(t="jurisdictionInfo.shf.update"),e.instant(t,{uStartTag:"<u>",uEndTag:"</u>"})},i.apply=function(n){var o={title:e.instant("jurisdictionInfo.apply.title"),modalData:{noSuccessScreen:!0,pendingText:e.instant("jurisdictionInfo.apply.confirm"),confirmFn:function(){!function(e){var n="/Universal/servlet/formWelcome?atype=";i.rules.financialAdvisor?n+="ADV":i.rules.broker&&(n+="BRK"),n+="&b=T",n+="&mjentity="+function(e){return"LLC"===e?"IBLLC-US":"IB-"+e}(e),n+="&mappid="+i.relevantMasterAccounts[0].applicant.id;var r={navigateAction:a.REDIRECT,path:n};t.navigate(r)}(n)}}};r.openConfirmModal(o)},i.extraButtons=[],i.confirmStep&&i.extraButtons.push({alignment:"right",btnText:e.instant("word.update"),onClick:i.update}),n.configureButtons({extraButtons:i.extraButtons,canGoBack:n.getSequenceData().stepIndex>0,continueBtn:{isDisabled:function(){return!1},onClick:n.stepForward,btnText:i.confirmStep?e.instant("information.correct"):e.instant("word.update")}})}}e.controller("JurisdictionOverviewCtrl",t),t.$inject=["$translate","NavigationService","DynamicSequenceService","NavigationAction","ModalService"]}},function(e,t){e.exports=function(e){function t(e,t,n,a){var r=this;r.$onInit=function(){r.rules=n.getSequenceData().rules,r.jurisdictionInfo=n.getSequenceData().jurisdictionInfo||{},r.getServerErrors=function(){return n.getSequenceData().errors},r.getHeaderText=function(){var t="advisorRegulatoryLicenseInfo.header";return r.rules.broker?t="jurisdictionInfo.broker.header":r.rules.singleHedgeFund?t="jurisdictionInfo.shf.header":r.rules.organization&&(t="jurisdictionInfo.organization.header"),e.instant(t,{uStartTag:"<u>",uEndTag:"</u>"})},n.configureButtons({canGoBack:n.getSequenceData().stepIndex>0,continueBtn:{isDisabled:function(){return!1},onClick:function(){var t={jurisdictionInfo:r.jurisdictionInfo};n.stepForward(t).catch(function(t){if(t.data&&t.data.customErrors&&t.data.customErrors.length>0){var n={title:e.instant("word.error"),modalData:{errors:t.data.customErrors}};a.openErrorModal(n)}})}}})}}e.controller("JurisdictionConfigurationCtrl",t),t.$inject=["$translate","NavigationService","DynamicSequenceService","ModalService"]}},function(e,t){e.exports=function(e){function t(e,t,n,a){var r=this;r.$onInit=function(){var i;r.request=n.getSequenceData().request||{},r.cancelAllowed=n.getSequenceData().cancelAllowed,r.isNotLicensed=function(){return 0==(r.request.financialRegulationInfo.financialRegulations||[]).length},r.getLicensedCountries=function(){var e=[],t=r.request.financialRegulationInfo.financialRegulations||[];return angular.forEach(t,function(t){var n=t.regulator.country,r=a(e,{alpha3:n.alpha3})[0];angular.isUndefined(r)&&e.push(n)}),e},i=r.cancelAllowed?{onClick:n.stepForward,btnText:e.instant("word.cancelRequest")}:{onClick:t.navigateToPrevBreadcrumb,btnText:e.instant("word.ok")},n.configureButtons({continueBtn:i})}}e.controller("PendingFinRegChangeController",t),t.$inject=["$translate","NavigationService","DynamicSequenceService","filterFilter"]}},function(e,t){e.exports=function(e){e.controller("FinancialRegulationChangeReviewController",["$translate","DynamicSequenceService","ModalService",function(e,t,n){var a=this,r=function(){if(a.displayWarning){var r={templateUrl:"info-modal.component",title:e.instant("hongKongInvestorCategory.piStateChangeWarningTitle"),modalData:{infoContent:e.instant("hongKongInvestorCategory.piStateChangeWarning",{linkStart:'<a href="https://ibkr.info/article/4344" target="_blank">',linkEnd:"</a>"})},buttons:[{alignment:"left",label:"word.cancel",btnClass:"btn-default",fn:n.closeModal},{alignment:"right",label:"word.continue",btnClass:"btn-primary",fn:function(){n.closeModal(),t.stepForward()}}]};n.openWarningModal(r)}else t.stepForward()};a.$onInit=function(){a.rules=t.getSequenceData().rules,a.jurisdictionInfo=t.getSequenceData().jurisdictionInfo,a.displayWarning=t.getSequenceData().displayWarning||!1,t.configureButtons({canGoBack:t.getSequenceData().stepIndex>0,continueBtn:{onClick:r}})}}])}},function(e,t){e.exports=function(e){function t(e,t,n,a,r){var i=this;function o(){angular.isUndefined(i.linkedEntity.linkedEntities)&&(i.linkedEntity.linkedEntities=[]);for(var e=i.linkedEntity.linkedEntities,t=null,n=0;n<e.length;n++){var a=e[n];if(a.mainEntityId==i.mainEntity.entityId){t=a;break}}return null==t&&(t={mainEntityId:i.mainEntity.entityId,secondaryEntityId:i.linkedEntity.entityId},e.push(t)),angular.isUndefined(t.associations)&&(t.associations=[]),t.associations}function s(){e.stepForward({linkedEntity:i.linkedEntity,hasEntitySelection:angular.isDefined(i.entitySelection)})}this.$onInit=function(){i.linkedEntity=e.getSequenceData().linkedEntity||{},i.mainEntity=e.getSequenceData().mainEntity||{},i.rules=e.getSequenceData().rules,i.sequenceType=e.getSequenceData().sequenceType,i.associationRules=i.rules.associationRules[i.linkedEntity.entityType],i.associations=o(),i.getEntityLabel=function(e){return"linkedInfo.addIndividual"===e||"linkedInfo.addLegalEntity"===e?n.instant(e):t(e)},i.getSelectEntityLabel=function(){var e=n.instant("entity.type."+i.linkedEntity.entityType);return n.instant("linkedInfo.selectEntity.label",{entityType:e})},i.getServerErrors=function(){return e.getSequenceData().errors},i.entitySelectionChanged=function(){angular.isDefined(i.entitySelection)&&("linkedInfo.addIndividual"===i.entitySelection||"linkedInfo.addLegalEntity"===i.entitySelection?(i.linkedEntity={},i.linkedEntity.entityId=0,"linkedInfo.addIndividual"===i.entitySelection?i.linkedEntity.entityType="INDIVIDUAL":"linkedInfo.addLegalEntity"===i.entitySelection&&(i.linkedEntity.entityType="LEGAL_ENTITY"),i.associations=o()):(i.linkedEntity=angular.copy(i.entitySelection),i.associations=o()),e.getSequenceData().errors={})},i.showAssociations=function(){return!(i.allowedEntities.length>0&&angular.isUndefined(i.entitySelection))&&angular.isDefined(i.associationRules)},i.isLegalEntity="LEGAL_ENTITY"===i.linkedEntity.entityType,i.allowedEntities=i.rules.allowedEntities||[],i.isAddSequence="ADD_LINKED_ENTITY"===i.sequenceType,i.isAddSequence&&i.allowedEntities.length>0&&(i.isLegalEntity?i.allowedEntities.splice(0,0,"linkedInfo.addLegalEntity"):i.allowedEntities.splice(0,0,"linkedInfo.addIndividual")),r.setOnPageLoad(function(){i.isAddSequence&&1===i.allowedEntities.length&&1===i.associationRules.allowedAssociations.length||!i.isAddSequence&&1===i.associationRules.allowedAssociations.length?(0!=a("filter")(i.associations,{type:i.associationRules.allowedAssociations[0].type}).length||i.associations.push(i.associationRules.allowedAssociations[0]),s()):r.setIsPageLoading(!1)}),e.configureButtons({canGoBack:!1,continueBtn:{onClick:s}})}}e.controller("LinkedEntityAssociationTypeController",t),t.$inject=["DynamicSequenceService","amEntityNameFilter","$translate","$filter","PageService"]}},function(e,t){e.exports=function(e){function t(e,t,n,a,r){var i=this;function o(){return angular.isUndefined(i.linkedEntity.associations)&&(i.linkedEntity.associations=[]),i.linkedEntity.associations}function s(){e.stepForward({linkedEntity:i.linkedEntity,hasEntitySelection:angular.isDefined(i.entitySelection)})}this.$onInit=function(){i.linkedEntity=e.getSequenceData().linkedEntity||{},i.mainEntity=e.getSequenceData().mainEntity||{},i.rules=e.getSequenceData().rules,i.sequenceType=e.getSequenceData().sequenceType,i.associationRules=i.rules.associationRules[i.linkedEntity.entityType],i.associations=o(),i.getEntityLabel=function(e){return"linkedInfo.addIndividual"===e||"linkedInfo.addLegalEntity"===e?n.instant(e):t(e)},i.getSelectEntityLabel=function(){var e=n.instant("entity.type."+i.linkedEntity.entityType);return n.instant("linkedInfo.selectEntity.label",{entityType:e})},i.getServerErrors=function(){return e.getSequenceData().errors},i.entitySelectionChanged=function(){angular.isDefined(i.entitySelection)&&("linkedInfo.addIndividual"===i.entitySelection||"linkedInfo.addLegalEntity"===i.entitySelection?(i.linkedEntity={},i.linkedEntity.entityId=0,"linkedInfo.addIndividual"===i.entitySelection?i.linkedEntity.entityType="INDIVIDUAL":"linkedInfo.addLegalEntity"===i.entitySelection&&(i.linkedEntity.entityType="LEGAL_ENTITY"),i.associations=o()):(i.linkedEntity=angular.copy(i.entitySelection),i.associations=o()),e.getSequenceData().errors={})},i.showAssociations=function(){return!(i.allowedEntities.length>0&&angular.isUndefined(i.entitySelection))&&angular.isDefined(i.associationRules)},i.isLegalEntity="LEGAL_ENTITY"===i.linkedEntity.entityType,i.allowedEntities=i.rules.allowedEntities||[],i.isAddSequence="ADD_LINKED_ENTITY"===i.sequenceType,i.isAddSequence&&i.allowedEntities.length>0&&(i.isLegalEntity?i.allowedEntities.splice(0,0,"linkedInfo.addLegalEntity"):i.allowedEntities.splice(0,0,"linkedInfo.addIndividual")),r.setOnPageLoad(function(){i.isAddSequence&&1===i.allowedEntities.length&&1===i.associationRules.allowedAssociations.length||!i.isAddSequence&&1===i.associationRules.allowedAssociations.length?(0!=a("filter")(i.associations,{type:i.associationRules.allowedAssociations[0].type}).length||i.associations.push(i.associationRules.allowedAssociations[0]),s()):r.setIsPageLoading(!1)}),e.configureButtons({canGoBack:!1,continueBtn:{onClick:s}})}}e.controller("DirectEntityAssociationTypeController",t),t.$inject=["DynamicSequenceService","amEntityNameFilter","$translate","$filter","PageService"]}},function(e,t){e.exports=function(e){function t(e,t,n){var a=this;a.$onInit=function(){a.entity=t.getSequenceData().entity||{},t.configureButtons({continueBtn:{btnText:e.instant("word.ok"),onClick:n.navigateToPrevBreadcrumb}})}}e.controller("EntitySubmissionController",t),t.$inject=["$translate","DynamicSequenceService","NavigationService"]}},function(e,t,n){e.exports=function(e){n(831)(e),n(833)(e),n(835)(e),n(837)(e)}},function(e,t,n){e.exports=function(e){e.component("missingEntityInfoCompletionStep",{template:n(832),controller:["$translate","DynamicSequenceService","NavigationService",function(e,t,n){var a=this;a.$onInit=function(){a.requestId=t.getSequenceData().requestId,angular.isUndefined(a.requestId)&&(a.requestId=t.getSequenceData().request.id),a.status=t.getSequenceData().status,t.configureButtons({canGoBack:!1,continueBtn:{onClick:n.navigateToPrevBreadcrumb,btnText:e.instant("word.ok")}})}}]})}},function(e,t){e.exports='<div page-structure>\n    <div align="center">\n        <i class="fa fa-4x fa-check-circle text-success"></i>\n    </div>\n    <h1 class="text-center text-success">{{\'word.success\' | translate}}</h1>\n    <h3 class="text-center text-dark">{{ (\'entity.modify.\' + $ctrl.status) | translate}}</h3>\n    <h6 class="text-center">{{\'word.referenceNumber\' | translate}}: {{::$ctrl.requestId}}</h6>\n</div>'},function(e,t,n){e.exports=function(e){e.component("missingEntityInfoReviewStep",{template:n(834),controller:["DynamicSequenceService",function(e){var t=this;t.$onInit=function(){t.entity=e.getSequenceData().entity,t.additionalNames=e.getSequenceData().additionalNames||[],t.missingInfoAttributes=e.getSequenceData().missingInfoAttributes||[],t.isAdditionalNameLoginMessage=t.missingInfoAttributes.indexOf("IBCE_ADDITIONAL_NAME")>-1,e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{onClick:e.stepForward}})}}]})}},function(e,t){e.exports='<div page-structure>\n\t<h4>{{ \'entity.header.review\' | translate }}</h4>\n    <br />\n    <entity-review ng-if="::$ctrl.entity && !$ctrl.isAdditionalNameLoginMessage" entity="$ctrl.entity"></entity-review>\n    <br>\n    <div ng-if="::$ctrl.additionalNames.length > 0">\n\t\t<h6 class="subtitle">{{ \'additionalName.label.entityName\' | translate:{entityName: ($ctrl.entity | amEntityName)} }}</h6>\n    \t<additional-names-review names="$ctrl.additionalNames"></additional-names-review>    \t\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("missingEntityInfoClientReviewStep",{template:n(836),controller:["DynamicSequenceService",function(e){var t=this;t.$onInit=function(){t.getSequenceData=e.getSequenceData,t.loginMessageType=e.getSequenceData().loginMessageType,e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{onClick:e.stepForward}})}}]})}},function(e,t){e.exports='<div page-structure>\r\n\t<h4>{{ (\'loginMessageType.\' + $ctrl.loginMessageType) | translate }}</h4>\r\n\t<p translate="{{ (\'loginMessage.\' + $ctrl.loginMessageType + \'.reviewInformation\') }}" translate-values="{masterAccountTitle: $ctrl.getSequenceData().masterAccountTitle, strongStart: \'<strong>\', strongEnd: \'</strong>\'}"></p>\r\n\t\r\n\t<br />\r\n\t<any ng-repeat="request in $ctrl.getSequenceData().requests">\r\n\t\t<div ng-switch on="request.type">\r\n\t\t\t<div ng-switch-when="ADDINDIV_CHG|INDIVINFO_CHG|LEGALINFO_CHG|ADDLEGAL_CHG" ng-switch-when-separator="|">\r\n\t\t\t\t<h6 class="subtitle">{{ \'retailRequestType.\' + request.type | translate }}</h6>\r\n        \t\t<entity-account-association-review entity="request.entity"></entity-account-association-review>\r\n        \t\t<entity-review entity="request.entity"></entity-review>    \r\n\t\t\t</div>\r\n\t\t\t<div ng-switch-when="ADDNAME_CHG">        \t\t\r\n        \t\t<h6 class="subtitle">{{ \'additionalName.label.entityName\' | translate:{entityName: (request.entity | amEntityName)} }}</h6>\r\n    \t\t\t<additional-names-review names="request.entity.additionalNames"></additional-names-review>    \t  \r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\r\n\t</any>\r\n</div>'},function(e,t,n){e.exports=function(e){e.component("missingInfoClientConfirmCompletionStep",{template:n(838),controller:["$translate","AmInterfaceService","DynamicSequenceService","NavigationService",function(e,t,n,a){var r=this;r.$onInit=function(){if(r.getSequenceData=n.getSequenceData,r.requestId=r.getSequenceData().requestId,angular.isUndefined(r.requestId)&&(angular.isDefined(r.getSequenceData().request)?r.requestId=r.getSequenceData().request.id:angular.isDefined(r.getSequenceData().requests)&&(r.requestId=r.getSequenceData().requests[0].id)),angular.isDefined(r.getSequenceData().request))for(var i=r.getSequenceData().request,o=t.getPendingItems(),s=0;s<o.length;++s){var l=o[s];if(l.id===String(i.id)){t.finishPendingItem(l);break}}n.configureButtons({canGoBack:!1,continueBtn:{onClick:a.navigateToPrevBreadcrumb,btnText:e.instant("word.ok")}})}}]})}},function(e,t){e.exports='<div page-structure>   \n    <div align="center">\n        <i class="fa fa-4x fa-check-circle text-success"></i>\n    </div>\n    <h1 class="text-center text-success">{{\'word.success\' | translate}}</h1>\n    <h3 class="text-center text-dark">{{ (\'entity.modify.success\') | translate}}</h3>\n    <h6 class="text-center">{{\'word.referenceNumber\' | translate}}: {{::$ctrl.requestId}}</h6>\n</div>'},function(e,t,n){e.exports=function(e){n(840)(e),n(842)(e),n(844)(e)}},function(e,t,n){e.exports=function(e){e.component("missingIndividualEntityDetailsStep",{template:n(841),controller:["$translate","DynamicSequenceService","ModalService",function(e,t,n){var a=this,r={};a.$onInit=function(){a.accountEntity=t.getSequenceData().accountEntity,a.rules=t.getSequenceData().rules,a.sequenceType=t.getSequenceData().sequenceType,a.nameChangeReason=t.getSequenceData().nameChangeReason,a.nameChangeType=t.getSequenceData().nameChangeType,r.name=t.getSequenceData().originalName,a.accountEntity.legacyUsTaxId.length>0?(a.legacyId=a.accountEntity.legacyUsTaxId,a.legacyIdType="SSN"):a.accountEntity.legacyCaTaxId.length>0&&(a.legacyId=a.accountEntity.legacyCaTaxId,a.legacyIdType="SIN"),a.getOriginalValue=function(e){return r[e]},t.configureButtons({canGoBack:t.getSequenceData().stepIndex>0,continueBtn:{onClick:function(){a.mailingAddressSame&&a.rules.addressRules.mailingAddressRequired&&(a.accountEntity.mailingAddress=a.accountEntity.address);var r={accountEntity:a.accountEntity,nameChangeReason:a.nameChangeReason,nameChangeType:a.nameChangeType};t.stepForward(r).catch(function(t){if(t.data&&t.data.customErrors&&t.data.customErrors.length>0){var a={title:e.instant("word.error"),modalData:{errors:t.data.customErrors}};n.openErrorModal(a)}})}}})}}]})}},function(e,t){e.exports='<div page-structure ng-form="$ctrl.missingEntityInfoForm">\n    <h4>{{\'entity.header.details\' | translate}}</h4>\n    <br>\n    <am-form-individual-name ng-if="::$ctrl.rules.nameRules" ng-model="$ctrl.accountEntity.name" rules="$ctrl.rules.nameRules" name-change-reason="$ctrl.nameChangeReason" name-change-type="$ctrl.nameChangeType" original-name="::$ctrl.getOriginalValue(\'name\')"></am-form-individual-name>\n\n    <h6 class="subtitle" ng-if="::$ctrl.rules.birthRules">{{\'individual.label.personalInformation\' | translate}}</h6>\n\n    \x3c!--Date of Birth --\x3e\n    <am-form-date data-private ng-if="::$ctrl.rules.birthRules && $ctrl.rules.birthRules.dobRequired" name="dob" ng-model="$ctrl.accountEntity.dob" label-text="{{\'individual.label.dob\' | translate}}" is-required="true"></am-form-date>\n\n    \x3c!-- Country of Birth --\x3e\n    <am-form-country-select data-private ng-if="::$ctrl.rules.birthRules && $ctrl.rules.birthRules.cobRequired" name="countryOfBirth" ng-model="$ctrl.accountEntity.countryOfBirth" label-text="{{\'individual.label.countryOfBirth\' | translate}}" countries="$ctrl.rules.birthRules.allowedCountriesOfBirth" is-required="true"></am-form-country-select>\n\n    \x3c!-- Address --\x3e\n    <am-form-entity-addresses ng-if="::$ctrl.rules.addressRules" entity="$ctrl.accountEntity" rules="$ctrl.rules.addressRules" mailing-address-rule="$ctrl.rules.mailingAddressRules" mailing-address-same="$ctrl.mailingAddressSame"></am-form-entity-addresses>\n    \n    \x3c!-- Identification Details --\x3e\n    <am-form-identifications ng-if="::$ctrl.rules.identificationRules" ng-model="$ctrl.accountEntity.identifications" rules="::$ctrl.rules.identificationRules"></am-form-identifications>\n\n    \x3c!-- Tax Id Information --\x3e\n    <am-form-tax-ids ng-if="::$ctrl.rules.taxIdRules" ng-model="$ctrl.accountEntity.taxIds" rules="$ctrl.rules.taxIdRules" legacy-id="{{::$ctrl.legacyId}}" legacy-id-type="{{::$ctrl.legacyIdType}}"></am-form-tax-ids>\n\n    \x3c!-- Employer Information --\x3e\n    <am-form-employer-details ng-if="::$ctrl.rules.employerRules" ng-model="$ctrl.accountEntity.employerDetails" rules="$ctrl.rules.employerRules"></am-form-employer-details>\n</div>\n'},function(e,t,n){e.exports=function(e){e.component("missingIndividualEntityReviewStep",{template:n(843),controller:["DynamicSequenceService","ResourceService","ModalService","$translate",function(e,t,n,a){var r=this;r.$onInit=function(){r.entity=e.getSequenceData().request.entity,r.missingInfoAttributes=e.getSequenceData().missingInfoAttributes||[],r.mailingAddressSame=angular.equals(r.entity.address,r.entity.mailingAddress),r.showField=function(e){return r.missingInfoAttributes.indexOf(e)>-1},e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{onClick:function(){e.stepForward().catch(function(t){if(t.data&&t.data.customErrors&&t.data.customErrors.length>0){var r={title:a.instant("word.confirm"),modalData:{errors:t.data.customErrors},buttons:[{alignment:"left",label:"individual.missinginfo.btn.reenterInfo",btnClass:"btn-default",fn:n.closeModal},{alignment:"right",label:"word.continue",btnClass:"btn-primary",fn:function(){n.closeModal(),e.stepForward({invalidSsnAcknowledgement:!0})}}]};n.openErrorModal(r)}})}}})}}]})}},function(e,t){e.exports='<div page-structure>\n    <h4>{{ \'word.review\' | translate }}</h4>\n    <br />\n    \x3c!-- Display Name --\x3e\n    <am-form-label ng-if="$ctrl.showField(\'NAME\')" label-text="{{\'entity.label.name.\' + $ctrl.entity.entityType | translate}}" value-text="{{$ctrl.entity | amEntityName}}"></am-form-label>\n    \x3c!--Address --\x3e\n    <div data-private class="form-group" ng-if="$ctrl.entity.address.country && $ctrl.showField(\'ADDRESS\')">\n        <div class="row">\n            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-4">\n                <label class="control-label">{{\'entity.label.address.\' + $ctrl.entity.entityType | translate}}</label>\n            </div>\n            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-4">\n                <label ng-bind-html="$ctrl.entity.address | amAddress:\'long\' | renderHTML"></label>\n            </div>\n        </div>\n    </div>\n    \x3c!-- Mailing Address --\x3e\n    <div data-private class="form-group" ng-if="$ctrl.entity.mailingAddress.country && $ctrl.showField(\'ADDRESS\')">\n        <div class="row">\n            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-4">\n                <label class="control-label">{{\'entity.label.mailingAddress\' | translate}}</label>\n            </div>\n            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-4">\n                <label ng-if="!$ctrl.mailingAddressSame" ng-bind-html="$ctrl.entity.mailingAddress | amAddress:\'long\' | renderHTML"></label>\n                <label ng-if="$ctrl.mailingAddressSame">{{ \'entity.label.sameMailingAddress\' | translate:{\'addressType\' : (\'entity.label.address.\' + $ctrl.entity.entityType | translate)} }}</label>\n            </div>\n        </div>\n    </div>\n    \x3c!-- Date of Birth --\x3e\n    <am-form-label ng-if="::$ctrl.entity.dob && $ctrl.showField(\'BIRTH_INFO\')" label-text="{{\'individual.label.dob\' | translate}}" value-text="{{$ctrl.entity.dob}}"></am-form-label>\n    \x3c!-- Country of Birth --\x3e\n    <am-form-label ng-if="::$ctrl.entity.countryOfBirth && $ctrl.showField(\'BIRTH_INFO\')" label-text="{{\'individual.label.countryOfBirth\' | translate}}" value-text="{{(\'country.\' + $ctrl.entity.countryOfBirth.alpha3) | translate}}"></am-form-label>\n    \x3c!-- Identifications --\x3e\n    <div ng-if="::$ctrl.showField(\'DOCUMENT_ID\')">\n        <div ng-if="::$ctrl.entity.maskable" data-private class="form-group" ng-repeat="identification in $ctrl.entity.identifications">\n            <div class="row">\n                <div class="col-xs-12 col-sm-12 col-md-6 col-lg-4">\n                    <label class="control-label">{{\'identification.type.\' + identification.idType | translate}}</label>\n                </div>\n                <div class="col-xs-12 col-sm-12 col-md-6 col-lg-4">\n                    <label>{{identification.idNumber | amFieldMask}}</label>\n                    <span class="margin-left-10" ng-if="identification.idCountry">\n                        ({{\'country.\' + identification.idCountry.alpha3 | translate }})\n                    </span>\n                </div>\n            </div>\n        </div>\n        <div ng-if="::!$ctrl.entity.maskable" data-private  ng-repeat="identification in $ctrl.entity.identifications">\n            <am-form-private-label label-text="\'identification.type.\' + identification.idType | translate" value-text="{maskValue: identification.idNumber, finalText: \'{{value}} \' + \'(\' + (\'country.\' + identification.idCountry.alpha3 | translate) + \')\' }"></am-form-private-label>\n        </div>\n    </div>\n    \x3c!-- Tax Ids --\x3e\n    <div data-private ng-if="::$ctrl.entity.maskable && $ctrl.showField(\'TAX_IDS\')" class="form-group" ng-repeat="taxId in $ctrl.entity.taxIds">\n        <div class="row">\n            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-4">\n                <label class="control-label">{{\'identification.type.TAX_ID\' | translate}}</label>\n            </div>\n            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-4">\n                <label>{{taxId.idNumber | amFieldMask}}</label>\n                <span class="margin-left-10" ng-if="taxId.idCountry">\n                    ({{\'country.\' + taxId.idCountry.alpha3 | translate }})\n                </span>\n            </div>\n        </div>\n    </div>\n    <div data-private ng-if="::!$ctrl.entity.maskable && $ctrl.showField(\'TAX_IDS\')" ng-repeat="taxId in $ctrl.entity.taxIds">\n        <am-form-private-label label-text="\'identification.type.TAX_ID\' | translate" value-text="{maskValue: taxId.idNumber, finalText: \'{{value}} \' + \'(\' + (\'country.\' + taxId.idCountry.alpha3 | translate) + \')\' }"></am-form-private-label>\n    </div>\n    \x3c!-- Employer Details --\x3e\n    <employer-details-review ng-if="::$ctrl.entity.employerDetails && $ctrl.showField(\'EMPLOYMENT_INFO\')" employer="$ctrl.entity.employerDetails"></employer-details-review>\n</div>'},function(e,t,n){e.exports=function(e){e.component("missingIndividualEntityInfoAgreementStep",{template:n(845),controller:"AgreementStepController"})}},function(e,t){e.exports='<div page-structure>\n    <h3>{{ \'individual.header.ssnverify\' | translate }}</h3>\n    <br />\n    <div class="row">\n        <div class="col">\n            <p class="text-gray">{{ \'individual.text.missinginfo.ssnconsent\' | translate }}</p>\n        </div>\n    </div>\n    <br />\n    <div class="row">\n        <div class="col">\n            <agreement-record record="$ctrl.agreementRecord" ></agreement-record>\n        </div>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){n(847)(e),n(849)(e)}},function(e,t,n){e.exports=function(e){e.component("missingLegalEntityDetailsStep",{template:n(848),controller:["$translate","DynamicSequenceService","ModalService",function(e,t,n){var a=this;a.$onInit=function(){a.entity=t.getSequenceData().accountEntity,a.rules=t.getSequenceData().rules,a.trusteeEntity=t.getSequenceData().trusteeEntity,t.configureButtons({canGoBack:t.getSequenceData().stepIndex>0,continueBtn:{onClick:function(){var r;a.mailingAddressSame&&(a.entity.mailingAddress=a.entity.address),r="ORG"===a.entity.entityType?{organizationName:a.entity.organizationName,taxIds:a.entity.taxIds,address:a.entity.address,mailingAddress:a.entity.mailingAddress}:{accountEntity:a.entity,trusteeEntity:a.trusteeEntity},t.stepForward(r).catch(function(a){if(a.data.errors&&angular.isDefined(a.data.errors.EIN)){var i={title:e.instant("word.confirm"),modalData:{errors:a.data.customErrors},buttons:[{alignment:"left",label:"individual.missinginfo.btn.reenterInfo",btnClass:"btn-default",fn:n.closeModal},{alignment:"right",label:"word.continue",btnClass:"btn-primary",fn:function(){n.closeModal(),r.invalidEinAcknowledgement=!0,t.stepForward(r)}}]};n.openErrorModal(i)}else if(a.data&&a.data.customErrors&&a.data.customErrors.length>0){i={title:e.instant("word.error"),modalData:{errors:a.data.customErrors}};n.openErrorModal(i)}})}}})}}]})}},function(e,t){e.exports='<div page-structure ng-form="$ctrl.missingEntityInfoForm">\n    <h4>{{\'entity.header.details\' | translate}}</h4>\n    <br>\n    \x3c!-- \n        Name\n    --\x3e\n    <am-form-entity-name entity="$ctrl.entity" rules="$ctrl.rules"></am-form-entity-name>\n    \x3c!-- \n        Address\n    --\x3e\n    <am-form-entity-addresses ng-if="::$ctrl.rules.addressRules" entity="$ctrl.entity" rules="$ctrl.rules.addressRules" mailing-address-rule="$ctrl.rules.mailingAddressRules" mailing-address-same="$ctrl.mailingAddressSame"></am-form-entity-addresses>\n    \x3c!-- \n        Tax Ids\n    --\x3e\n    <am-form-tax-ids ng-if="$ctrl.rules.taxIdRules" ng-model="$ctrl.entity.taxIds" rules="$ctrl.rules.taxIdRules"></am-form-tax-ids>\n</div>\n'},function(e,t,n){e.exports=function(e){e.component("missingLegalEntityReviewStep",{template:n(850),controller:["DynamicSequenceService","ResourceService","ModalService","$translate",function(e,t,n,a){var r=this;r.$onInit=function(){r.entity=e.getSequenceData().entity,r.missingInfoAttributes=e.getSequenceData().missingInfoAttributes||[],r.mailingAddressSame=angular.equals(r.entity.address,r.entity.mailingAddress),r.showField=function(e){return r.missingInfoAttributes.indexOf(e)>-1},e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{onClick:function(){e.stepForward().catch(function(e){if(e.data&&e.data.customErrors&&e.data.customErrors.length>0){var t={title:a.instant("word.confirm"),modalData:{errors:e.data.customErrors}};n.openErrorModal(t)}})}}})}}]})}},function(e,t){e.exports='<div page-structure>\n    <h4>{{ \'word.review\' | translate }}</h4>\n    <br />\n    \x3c!-- Display Name --\x3e\n    <am-form-label ng-if="$ctrl.showField(\'NAME\')" label-text="{{\'entity.label.name.\' + $ctrl.entity.entityType | translate}}" value-text="{{$ctrl.entity | amEntityName}}"></am-form-label>\n    \x3c!--Address --\x3e\n    <div data-private class="form-group" ng-if="$ctrl.entity.address.country && $ctrl.showField(\'ADDRESS\')">\n        <div class="row">\n            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-4">\n                <label class="control-label">{{\'entity.label.address.\' + $ctrl.entity.entityType | translate}}</label>\n            </div>\n            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-4">\n                <label ng-bind-html="$ctrl.entity.address | amAddress:\'long\' | renderHTML"></label>\n            </div>\n        </div>\n    </div>\n    \x3c!-- Mailing Address --\x3e\n    <div data-private class="form-group" ng-if="$ctrl.entity.mailingAddress.country && $ctrl.showField(\'ADDRESS\')">\n        <div class="row">\n            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-4">\n                <label class="control-label">{{\'entity.label.mailingAddress\' | translate}}</label>\n            </div>\n            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-4">\n                <label ng-if="!$ctrl.mailingAddressSame" ng-bind-html="$ctrl.entity.mailingAddress | amAddress:\'long\' | renderHTML"></label>\n                <label ng-if="$ctrl.mailingAddressSame">{{ \'entity.label.sameMailingAddress\' | translate:{\'addressType\' : (\'entity.label.address.\' + $ctrl.entity.entityType | translate)} }}</label>\n            </div>\n        </div>\n    </div>\n    \x3c!-- Tax Ids --\x3e\n    <div data-private ng-if="::$ctrl.entity.maskable && $ctrl.showField(\'TAX_IDS\')" class="form-group" ng-repeat="taxId in $ctrl.entity.taxIds">\n        <div class="row">\n            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-4">\n                <label class="control-label">{{\'identification.type.TAX_ID\' | translate}}</label>\n            </div>\n            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-4">\n                <label>{{taxId.idNumber | amFieldMask}}</label>\n                <span class="margin-left-10" ng-if="taxId.idCountry">\n                    ({{\'country.\' + taxId.idCountry.alpha3 | translate }})\n                </span>\n            </div>\n        </div>\n    </div>\n    <div data-private ng-if="::!$ctrl.entity.maskable && $ctrl.showField(\'TAX_IDS\')" ng-repeat="taxId in $ctrl.entity.taxIds">\n        <am-form-private-label label-text="\'identification.type.TAX_ID\' | translate" value-text="{maskValue: taxId.idNumber, finalText: \'{{value}} \' + \'(\' + (\'country.\' + taxId.idCountry.alpha3 | translate) + \')\' }"></am-form-private-label>\n    </div>\n</div>'},function(e,t){e.exports=function(e){function t(e,t,n,a,r){var i=this;i.$onInit=function(){i.name=t.getSequenceData().name,i.rules=t.getSequenceData().rules,i.displayName=t.getSequenceData().displayName,i.nlCode=i.rules.inputLanguage,i.direction="",i.languageName=e.instant("languageName."+i.nlCode),i.message=e.instant("collectNativeName.message.individual",{language:i.languageName}),i.isRtl=r.isRtlInput(i.nlCode),i.isRtl&&(i.direction={direction:"rtl"},"HEBREW"===i.nlCode?(i.firstName="שם פרטי",i.middleName="שם אמצעי",i.lastName="שם משפחה",i.required="נדרש",i.optional="אופציונאלי",i.message="על מנת שנוכל לקבל עבורך העברות מס״ב בשקלים "+i.displayName+" אנא ספק את שמך המלא בעברית עבור"):"ARABIC"===i.nlCode&&(i.firstName="الاسم الاول",i.middleName="الاسم الأوسط",i.lastName="اسم العائلة",i.required="مطلوب",i.optional="اختياري",i.message="يرجى تقديم اسمك بحروف عربية")),t.configureButtons({canGoBack:t.getSequenceData().stepIndex>0,continueBtn:{onClick:function(){t.stepForward(i.name)}}})}}e.controller("CollectIndividualNativeNameController",t),t.$inject=["$translate","DynamicSequenceService","NavigationService","PageService","LanguageService"]}},function(e,t){e.exports=function(e){function t(e,t,n,a,r){var i=this;i.$onInit=function(){i.title=t.getSequenceData().title,i.rules=t.getSequenceData().rules,i.nlCode=i.rules.inputLanguage,i.direction="",i.languageName=e.instant("languageName."+i.nlCode),i.message=e.instant("collectNativeName.message.institutional",{language:i.languageName}),i.isRtl=r.isRtlInput(i.nlCode),i.isRtl&&(i.direction={direction:"rtl"},"HEBREW"===i.nlCode?(i.corporationName="שם התאגיד",i.required="נדרש",i.message="אנא ספק את שמך המלא בעברית על מנת שנוכל לקבל עבורך העברות מס״ב בשקלים"):"ARABIC"===i.nlCode&&(i.corporationName="اسم الشركة",i.required="مطلوب",i.message="يرجى تقديم اسم شركتك بأحرف عربية")),t.configureButtons({canGoBack:t.getSequenceData().stepIndex>0,continueBtn:{onClick:function(){t.stepForward({title:i.title})}}})}}e.controller("CollectInstitutionalNativeNameController",t),t.$inject=["$translate","DynamicSequenceService","NavigationService","PageService","LanguageService"]}},function(e,t,n){e.exports=function(e){e.component("sowConfigurationStep",{template:n(854),controller:["ACTIVE_CONTEXT","ApplicationContext","DynamicSequenceService",function(t,n,a){var r=this,i=function(){for(var e=angular.copy(r.sources)||[],t=e.length;t--;){var n=e[t];angular.isDefined(n.checked)&&!n.checked&&e.splice(t,1)}a.stepForward(e).catch(function(e){r.customErrors=e.data.customErrors||[]})};r.$onInit=function(){r.sources=a.getSequenceData().sources||[],r.rules=a.getSequenceData().rules||void 0,r.getHelp=function(){return e.WEBAPP_ROOT+"/components/sourcesofwealth/sourceOfWealthHelp.html"},a.configureButtons({canGoBack:a.getSequenceData().stepIndex>0||t===n.AM_DEPENDENCY,continueBtn:{onClick:i}})}}]})}},function(e,t){e.exports='<div class="trading-permissions" ng-form="$ctrl.sowForm">\n\t<h2>{{ \'sourceOfWealth.header\' | translate }}</h2>\n\t<br>\n\t<p ng-if="::$ctrl.rules">{{ \'sourceOfWealth.message.\' + $ctrl.rules.instructionType | translate }}</p>\n\t<hr>\n\t<br>\n\t<div class="row">\n\t\t<div class="col-12 col-lg-8 col-left">\n\t\t\t\x3c!-- \n\t\t\t\tCustom Errors\n\t\t\t--\x3e\n\t\t\t<div class="alert alert-warning" ng-if="$ctrl.customErrors.length > 0">\n\t\t\t    <p ng-if="$ctrl.customErrors.length === 1">{{ $ctrl.customErrors[0] }}</p>\n\t\t\t    <ul ng-if="$ctrl.customErrors.length > 1">\n\t\t\t        <li ng-repeat="error in $ctrl.customErrors track by $index">{{ error }}</li>\n\t\t\t    </ul>\n\t\t\t</div>\n\t\t\t\x3c!-- \n\t\t\t\tSource of Wealth form\n\t\t\t--\x3e\n\t\t\t<sources-of-wealth-form ng-if="::$ctrl.rules" ng-model="$ctrl.sources" rules="$ctrl.rules" hide-description="true"></sources-of-wealth-form>\n\t\t</div>\n\t\t<div class="col-12 col-lg-4 col-right">\n\t\t\t<h6>{{ \'word.important\' | translate}}</h6>\n\t\t\t<ng-include src="$ctrl.getHelp()"></ng-include>\n\t\t</div>\n\t</div>\n</div>'},function(e,t){e.exports=function(e){function t(e,t){var n=this;n.$onInit=function(){n.request=t.getSequenceData().request||{},t.configureButtons({continueBtn:{isDisabled:function(){return!1},onClick:t.stepForward,btnText:e.instant("word.cancelRequest")}})}}e.controller("PendingTrustOwnershipEntitiesRequestCtrl",t),t.$inject=["$translate","DynamicSequenceService"]}},function(e,t){e.exports=function(e){function t(t,n,a,r,i,o,s,l,c){var u=this,d=function(){return!u.trustOwnershipEntitiesForm||!u.trustOwnershipEntitiesForm.$valid||u.entities.length<=0};u.getAssociationTypes=function(e){var n=[];return e.associations.forEach(function(e){n.push(t.instant("association.type."+e.type))}),n.join()},u.getPercetageFromEntity=function(e,t){var n=parseFloat(0);return t.associations.forEach(function(t){t.type===e&&(n=parseFloat(t.percentageOfOwnership)||0)}),n},u.isPercentageRequired=function(e,t){var n=!1;return t.associations.forEach(function(t){t.type===e&&(n=!0)}),n};u.$onInit=function(){c.setIsPageLoading(!0),u.config=a.getSequenceData().config||{},u.entities=a.getSequenceData().entities||{},u.allowedAssociationsForEntityCreation=a.getSequenceData().allowedAssociationsForEntityCreation||[],u.hasSettlorGrantors=a.getSequenceData().hasSettlorGrantors||!1,u.hasBeneficiary=a.getSequenceData().hasBeneficiary||!1,u.deleteableAssociations=a.getSequenceData().deleteableAssociations||[],u.percentageArray=[],u.entities.forEach(function(e){var t={GRANTOR:u.hasSettlorGrantors?u.getPercetageFromEntity("GRANTOR",e):parseFloat(0),BENEFICIARY:u.hasBeneficiary?u.getPercetageFromEntity("BENEFICIARY",e):parseFloat(0)};u.percentageArray.push(t)}),u.calculateTotalPercentage=function(){u.settlorGrantorTotalPercentage=parseFloat(0),u.beneficiaryPercentage=parseFloat(0),u.percentageArray.forEach(function(e){u.settlorGrantorTotalPercentage+=parseFloat(e.GRANTOR),u.beneficiaryPercentage+=parseFloat(e.BENEFICIARY)})},u.calculateTotalPercentage(),u.editAccountEntity=function(a,r){if(a.editable){var o=u.entities.indexOf(a),s={id:"EditAccountEntity",title:t.instant("page.title.EditAccountEntity",{entityName:i(a)}),path:e.WEBAPP_ROOT+"/sequences/trustownershipentities/trustOwnershipEntitySequence.html",pageData:{sequenceType:"/Edit/"+o},skipFetch:!0};n.navigate(s)}},u.addEntity=function(){var a={title:t.instant("page.title.AddAccountEntity"),templateUrl:"account-entity-type-selection-modal.component",modalData:{allowedEntityTypes:["INDIVIDUAL","LEGAL_ENTITY"],allowedAssociationTypes:u.allowedAssociationsForEntityCreation}};r.openModal(a).then(function(t){if(t&&t.associationType&&t.entityType){var a={id:"AddAccountEntity",path:e.WEBAPP_ROOT+"/sequences/trustownershipentities/trustOwnershipEntitySequence.html",pageData:{sequenceType:"/Add/"+t.entityType+"/"+t.associationType},skipFetch:!0};n.navigate(a)}})},u.deleteAccountEntity=function(e){if(e.deletable){var n=[];e.associations.length>1&&e.associations.forEach(function(e){u.deleteableAssociations.includes(e.type)&&n.push(e)});var a=u.entities.indexOf(e),s=function(){var e=AM_APP_ROOT+"/TrustOwnershipEntities/"+a;return o.delete(e).then(function(e){u.config.pristine=!1}).catch(function(e){})};if(n.length>1){var l={title:t.instant("page.title.removeEntity"),templateUrl:"remove-entity-modal.component",modalData:{deletableAssociationsOfEntity:n}};r.openModal(l).then(function(t){var n,r;t&&(!t.deleteEntity&&t.associationsToDelete&&t.associationsToDelete.length<e.associations.length?(n=t.associationsToDelete,r=AM_APP_ROOT+"/TrustOwnershipEntities/"+a,o.update(r,{associationsToDelete:n}).then(function(t){u.config.pristine=!1,e.associations.forEach(function(e,t){n.includes(e.type)&&u.entities[a].associations.splice(t,1)})}).catch(function(e){})):s())})}else{var c=t.instant("entity.delete.pending",{entityName:i(e)});l={title:t.instant("modal.title.DeleteTodEntity"),modalData:{pendingText:c,noSuccessScreen:!0,confirmFn:s}};r.openConfirmModal(l).then(function(e){"SUCCESS"===e&&(u.entities.splice(a,1),u.percentageArray.splice(a,1),u.calculateTotalPercentage(),0==u.entities.length&&delete u.entities)})}}},u.viewAccountEntity=function(e){if(e.viewable){var t=angular.copy(e);t.editable=!1;var n={title:i(t),templateUrl:"account-entity-modal.component",dialogClass:"modal-lg",modalData:{accountEntity:t}};r.openModal(n)}},u.displayWarning=function(){return!d()&&(!u.trustOwnershipEntitiesForm.$pristine||!u.config.pristine)};var s=n.getNavigationValidator();n.setNavigationValidator(function(e){return"TrustOwnershipEntitiesDetails"!==a.getSequenceData().id?s(e):"AddAccountEntity"===e.id?s(e):u.trustOwnershipEntitiesForm.$pristine&&u.config.pristine?s(e):function(){!function(e){var a={title:t.instant("sequence.warning.title"),templateUrl:"sequence-warning.component"};r.openWarningModal(a).then(function(t){if(1===t){var a=AM_APP_ROOT+"/TrustOwnershipEntities/ResetChanges";o.delete(a).then(function(t){n.setNavigationValidator(void 0),"ARCHIVED"===e.stateAction?window.history.back():n.navigate(e)}).catch(function(e){})}return t},function(e){return l.reject(e)})}(e)}}),c.getCurrentPage().pageData.editComplete&&a.stepForward({percentageArray:u.percentageArray}),c.setIsPageLoading(!1),a.configureButtons({canGoBack:!1,continueBtn:{isDisabled:d,onClick:function(){a.stepForward({percentageArray:u.percentageArray}).catch(function(e){if(e.data&&e.data.customErrors&&e.data.customErrors.length>0){var n={title:t.instant("word.error"),modalData:{errors:e.data.customErrors}};r.openErrorModal(n)}})}}})}}e.controller("TrustOwnershipEntitiesDetailsCtrl",t),t.$inject=["$translate","NavigationService","DynamicSequenceService","ModalService","amEntityNameFilter","ResourceService","EntityService","$q","PageService"]}},function(e,t){e.exports=function(e){function t(t,n,a,r,i,o,s){var l=this;l.editAccountEntity=function(a){if(a.editable){var i=l.entities.indexOf(a),o={id:"EditAccountEntity",title:t.instant("page.title.EditAccountEntity",{entityName:r(a)}),path:e.WEBAPP_ROOT+"/sequences/trustownershipentities/trustOwnershipEntitySequence.html",pageData:{sequenceType:"/Edit/"+i},skipFetch:!0};n.navigate(o)}};var c=n.getNavigationValidator();n.setNavigationValidator(function(e){return"TrustOwnershipEntitiesReview"!==a.getSequenceData().id?c(e):"EditAccountEntity"===e.id?c(e):function(){!function(e){var a={title:t.instant("sequence.warning.title"),templateUrl:"sequence-warning.component"};o.openWarningModal(a).then(function(t){if(1===t){var a=AM_APP_ROOT+"/TrustOwnershipEntities/ResetChanges";s.delete(a).then(function(t){n.setNavigationValidator(void 0),"ARCHIVED"===e.stateAction?window.history.back():n.navigate(e)}).catch(function(e){})}return t},function(e){return $q.reject(e)})}(e)}}),l.$onInit=function(){i.getCurrentPage().pageData.editComplete=!1,l.entities=a.getSequenceData().entities,a.configureButtons({canGoBack:a.getSequenceData().stepIndex>0,continueBtn:{onClick:a.stepForward}})}}e.controller("TrustOwnershipEntitiesReviewCtrl",t),t.$inject=["$translate","NavigationService","DynamicSequenceService","amEntityNameFilter","PageService","ModalService","ResourceService"]}},function(e,t){e.exports=function(e){function t(t,n,a,r,i){var o=this,s=function(){if(o.initiateTrustOwnershipSequence){var r={id:"EditTrustOwnershipEntities",title:t.instant("page.title.EditTrustOwnershipEntities"),path:e.WEBAPP_ROOT+"/sequences/trustownership/trustOwnershipSequence.html",pageData:{sequenceType:"/Edit/"+o.request.entity.entityId},skipFetch:!0,breadcrumb:i.REPLACE};n.navigate(r)}else{var s=a.getBreadcrumbs(),l=s.length;1===l&&n.navigateHome();var c=s[l-2];c.pageData.editComplete=!0,n.navigateToBreadcrumb(c)}};o.requestSubmitted=function(){return!o.config&&!o.initiateTrustOwnershipSequence},o.$onInit=function(){if(a.setIsPageLoading(!0),o.initiateTrustOwnershipSequence=r.getSequenceData().initiateTrustOwnershipSequence,o.request=r.getSequenceData().request,o.config=r.getSequenceData().config,o.requestSubmitted()){var e={};e.extraButtons=[{alignment:"right",btnType:"primary",btnText:t.instant("word.ok"),onClick:s}],r.configureButtons(e)}else s()}}e.controller("TrustOwnershipEntityCompletionCtrl",t),t.$inject=["$translate","NavigationService","PageService","DynamicSequenceService","BreadcrumbAction"]}},function(e,t,n){e.exports=function(e){n(860)(e),n(861)(e),n(862)(e),n(863)(e),n(864)(e),n(865)(e),n(866)(e)}},function(e,t){e.exports=function(e){function t(t,n){var a=e.AM_SERVER_PATH+"/AffiliateDesignation/",r=e.AM_SERVER_PATH+"/AffiliateDesignation/Company",i=e.AM_SERVER_PATH+"/AffiliateDesignation/Replace",o=e.AM_SERVER_PATH+"/IsinDetails";return{saveDesignation:function(e){var a=t.defer();return n.update(r,e).then(function(e){a.resolve(e.data)},function(e){a.reject(e.data)}),a.promise},deleteDesignation:function(e){var r=t.defer();return n.delete(a,e).then(function(e){r.resolve(e.data)},function(e){r.reject(e.data)}),r.promise},replaceDesignation:function(e){var a=t.defer();return n.update(i,e).then(function(e){a.resolve(e.data)},function(e){a.reject(e.data)}),a.promise},fetchIsinDetails:function(e){var a=t.defer();return n.fetch(o,{isin:e}).then(function(e){a.resolve(e.data)},function(e){a.reject(e.data)}),a.promise}}}e.factory("AffiliateDesignationService",t),t.$inject=["$q","ResourceService"]}},function(e,t){e.exports=function(e){function t(t,n,a,r,i,o){var s={isMobilePhoneType:function(e){return"MOBILE"===e||"MOBILE_WORK"===e||"MOBILE_OTHER"===e},getAssociatedEntities:function(e,t){for(var n=[],a=0;a<e.length;++a)for(var r=e[a],i=r.associations,o=0;o<i.length;++o)if(i[o].type===t){n.push(r);break}return n},isIraBeneficiary:function(e){return!angular.isUndefined(e)&&(-1!==e.indexOf("IRA_PRIMARY_BENEFICIARY")||-1!==e.indexOf("IRA_CONTINGENT_BENEFICIARY"))},isTodBeneficiary:function(e){return!angular.isUndefined(e)&&(-1!==e.indexOf("TOD_PRIMARY_BENEFICIARY")||-1!==e.indexOf("TOD_CONTINGENT_BENEFICIARY"))},isTrustedContact:function(e){return!angular.isUndefined(e)&&-1!==e.indexOf("TRUSTED_CONTACT")},collectBasicEmploymentDetails:function(e){return"AT_HOME_TRADER"===e},collectEmploymentDetails:function(e){return"SELF_EMPLOYED"===e||"EMPLOYED"===e||"EMPLOYED_PRIVATE"===e||"EMPLOYED_PUBLIC"===e||"EMPLOYED_GOVT"===e},isOtherOccupationRequired:function(e){return angular.isDefined(e)&&"Other"===e.name},isExtendedBusinessRequired:function(e){return"OTHER"===e},isPercentageOfOwnershipRequired:function(e){for(var t=e.percentageOfOwnership>0,n=0;n<e.associations.length;n++){var a=e.associations[n];if("ACCOUNT_HOLDER"===a.type||"FIRST_HOLDER"===a.type||"SECOND_HOLDER"===a.type){t=!1;break}if(e.associations[n].percentageOfOwnership>0){t=!1;break}}return t},isCountryOfLegalResidenceRequired:function(e){return!!angular.isDefined(e.countryOfLegalResidence)&&e.associations.some(function(e){return"ACCOUNT_HOLDER"===e.type||"FIRST_HOLDER"===e.type})},getOccupationText:function(e){if(0===e.id&&""===e.name)return t.instant("businessNature.type.OTHER");var n="occupation.type."+e.id,a=t.instant(n);return a===n?e.name:a},updateFinancialInfo:function(e){var a={id:"EntityFinancialInfo",title:t.instant("page.title.EntityFinancialInfo",{entityName:n(e)}),path:"/investmentconfig.webapp/sequences/financialinfo/entityFinancialInfoSequence.html",pageData:{sequenceType:"/"+e.entityId},skipFetch:!0};r.navigate(a)},updateTaxForm:function(i){var o={};"INDIVIDUAL"!==i.entityType?"ORG"===i.entityType?(o.id="UpdateTaxForm",o.title=t.instant("page.title.UpdateTaxForm",{entityName:n(i)}),o.path="tax-form-update-iframe.component",o.skipFetch=!0,o.pageData={accountEntity:i}):(o.path="/Universal/servlet/service.ClassicAmLandingServlet?forwardTo=AA_TAX_FORMS",o.navigateAction=a.REDIRECT):(o.id="UpdateTaxForm",o.title=t.instant("page.title.UpdateTaxForm",{entityName:n(i)}),o.path=e.AM_SERVER_PATH+"/template/page/tax/updateTaxFormSequence.html",o.skipFetch=!0,o.pageData={sequenceType:"/Edit/"+i.entityId}),r.navigate(o)},editEntity:function(i){if(i.editableInClassicAM){var o={navigateAction:a.REDIRECT,path:"/Universal/servlet/service.ClassicAmLandingServlet?forwardTo=AA_INFOCHG"};r.navigate(o)}else if(i.trustOwnershipEntity){o={id:"EditTrustOwnershipEntities",title:t.instant("page.title.EditTrustOwnershipEntities"),path:e.WEBAPP_ROOT+"/sequences/trustownership/trustOwnershipSequence.html",pageData:{sequenceType:"/Edit/"+i.entityId},skipFetch:!0};r.navigate(o)}else{var s=e.WEBAPP_ROOT+"/sequences/accountentity/accountEntitySequence.html";"ORG"===i.entityType&&(s=e.AM_SERVER_PATH+"/template/page/entity/sequence/org/orgApplicantSequence.html"),"TRUST"===i.entityType&&(s=e.AM_SERVER_PATH+"/template/page/entity/sequence/trust/trustApplicantSequence.html");o={id:"EditAccountEntity",title:t.instant("page.title.EditAccountEntity",{entityName:n(i)}),path:s,pageData:{sequenceType:"/Edit/"+i.entityId},skipFetch:!0};r.navigate(o)}},fetchEntity:function(t){return o.fetch(e.EM_SERVER_PATH+"/Entity",{id:t})},showAssociations:function(e){if(e.associations.length>0)return!0;for(var t=0;t<e.linkedEntities.length;t++){if(e.linkedEntities[t].secondaryEntityId===e.entityId)return!0}return!1}};return s}e.factory("EntityService",t),t.$inject=["$translate","amEntityNameFilter","NavigationAction","NavigationService","PageService","ResourceService"]}},function(e,t){e.exports=function(e){e.factory("MifirValidationTextLoader",["$http","$q",function(t,n){return function(a){var r,i=n.defer();return t.get(e.AM_SERVER_PATH+"/MifirValidationText/"+a.key).then(function(e){r=e.data,i.resolve(r)}),i.promise}}])}},function(e,t){e.exports=function(e){function t(t,n){var a=e.AM_SERVER_PATH+"/TrustedContact",r={fetchTrustedContactInfo:function(){var e=t.defer();return n.fetch(a).then(function(t){e.resolve(t.data)},function(t){e.reject(t.data)}),e.promise},createTrustedContact:function(e,r,i){var o={entityType:e,association:r,relationship:i},s=t.defer();return n.update(a,o).then(function(e){s.resolve(e.data)},function(e){s.reject(e.data)}),s.promise},editTrustedContact:function(e,r,i){var o={association:e,relationship:r,index:i},s=t.defer();return n.update(a+"/Edit",o).then(function(e){s.resolve(e.data)},function(e){s.reject(e.data)}),s.promise},addTrustedContactToConfig:function(e){var r={trustedContact:e},i=t.defer();return n.create(a,r).then(function(e){i.resolve(e.data)},function(e){i.reject(e.data)}),i.promise},editTrustedContactInConfig:function(e){var r={trustedContact:e},i=t.defer();return n.create(a+"/Edit",r).then(function(e){i.resolve(e.data)},function(e){i.reject(e.data)}),i.promise},removeTrustedContact:function(e){var r=t.defer();return n.delete(a+"/"+e).then(function(e){r.resolve(e.data)},function(e){r.reject(e.data)}),r.promise}};return r}e.factory("TrustedContactService",t),t.$inject=["$q","ResourceService"]}},function(e,t){e.exports=function(e){e.factory("RegulatoryInfoService",["$translate",function(e){return{getQuestionText:function(t,n){return angular.isUndefined(t.text)?e.instant("regulatoryInfo.question."+n+"."+t.type):"en"===e.use()?t.text:e.instant("questionnaire.question."+t.questionId)}}}])}},function(e,t){e.exports=function(e){function t(t,n){var a=e.AM_SERVER_PATH+"/LeiUtil",r={fetchRegistrationAuthorities:function(e,r){var i=t.defer();return n.create(a+"/Authorities",{country:e,state:r}).then(function(e){i.resolve(e.data)},function(e){i.reject(e.data)}),i.promise},fetchLegalForms:function(e,r,i){var o=t.defer(),s={country:e};return angular.isDefined(r)&&(s.state=r),angular.isDefined(i)&&(s.registrationAuthority=i),n.create(a+"/LegalForms",s).then(function(e){o.resolve(e.data)},function(e){o.reject(e.data)}),o.promise},fetchWarnings:function(e,r){var i=t.defer(),o={registrationInfo:e,leiApplicationRules:r};return n.create(a+"/Warnings",o).then(function(e){i.resolve(e.data)},function(e){i.reject(e.data)}),i.promise}};return r}e.factory("LeiService",t),t.$inject=["$q","ResourceService"]}},function(e,t){e.exports=function(e){e.factory("EntityManagementService",["$q","ResourceService",function(t,n){var a=e.SERVER_PATH+"/EntityManagement",r={fetchEntitySelectionDetails:function(e,r,i,o,s){var l={mainEntityId:e,entityId:r,entityType:i,associationType:o,securityOfficer:s},c=t.defer();return n.fetch(a+"/EntitySelectionDetail",l).then(function(e){c.resolve(e.data)},function(e){c.reject(e.data)}),c.promise},fetchEntity:function(e,r,i,o,s){var l={mainEntityId:e,entityId:r,entityType:i,associationType:o,securityOfficer:s},c=t.defer();return n.fetch(a,l).then(function(e){c.resolve(e.data)},function(e){c.reject(e.data)}),c.promise},updateEntityLink:function(e,r,i){var o={entity:e,mainEntityId:r,associationType:i,securityOfficer:securityOfficer},s=t.defer();return n.update(a,o).then(function(e){s.resolve(e.data)},function(e){s.reject(e.data)}),s.promise},submitEntity:function(e,r,i,o,s,l,c){var u={associatedEntity:e,associatedIndividualToLegalEntity:r,associationType:i,securityData:o,nfaMembership:s,associatedIndividualNfaMembership:l,financialNetWorth:c},d=t.defer();return n.create(a,u).then(function(e){d.resolve(e.data)},function(e){d.reject(e.data)}),d.promise}};return r}])}},function(e,t,n){"use strict";var a=angular.module("ibmarketing.entityownership",[]);a.WEBAPP_ROOT="/entityownership.webapp",a.SERVER_PATH="/aces/EntityManagement",a.AM_SERVER_PATH="/AccountManagement",n(868)(a),n(882)(a),n(900)(a)},function(e,t,n){e.exports=function(e){n(869)(e),n(870)(e),n(871)(e),n(872)(e),n(873)(e),n(874)(e),n(875)(e),n(876)(e),n(877)(e),n(878)(e),n(879)(e),n(880)(e),n(881)(e)}},function(e,t){e.exports=function(e){e.component("beneficialOwners",{bindings:{percentage:"<",applicant:"<",confirm:"=",readOnly:"<?",enableLinks:"<?",editCallback:"&?",trustOwners:"="},templateUrl:e.WEBAPP_ROOT+"/components/beneficialowners/beneficialOwners.html",controller:["$filter","$translate","BeneficialOwnerService",function(e,t,n){var a=this;a.$onInit=function(){a.percentage=a.percentage||0,a.applicant=a.applicant||{},a.isLoading=!0,a.confirm=a.confirm||!1,n.fetchBeneficialOwners(a.percentage).then(function(e){a.individualOwnerEntities=e.INDIV_OWNER_ENTITIES||[],a.individualTotalPercentage=e.INDIV_TOTAL_PERCENTAGE||0,a.trustOwnerEntities=e.TRUST_OWNER_ENTITIES||[],a.trustOwners["PERCENT_"+a.percentage+"_BENEFICIAL_OWNERS"]=a.trustOwnerEntities,a.trustTotalPercentage=e.TRUST_TOTAL_PERCENTAGE||0}).finally(function(){a.isLoading=!1})},a.getOptionText=function(n){return n&&n.entityId>0?e("amEntityName")(n):t.instant("Not Listed")}}]})}},function(e,t){e.exports=function(e){e.component("beneficialOwnerForm",{bindings:{percentage:"<"},controller:["$translate","ComponentService","ModalService","BeneficialOwnerService",function(e,t,n,a){var r=this;r.$onInit=function(){r.percentage=r.percentage||10,r.fetchedOwner=!1;var i={};a.fetchBeneficialOwner(0).then(function(t){r.owner=t.entity,r.rules=t.rules,r.fetchedOwner=!0,i.dialogClass="modal-lg",i.title=e.instant("entity.header.beneficialOwner"),i.templateUrl="beneficial-owner-modal.component",i.modalData={owner:r.owner,rules:r.rules,percentage:r.percentage}},function(t){r.fetchedOwner=!1,i.title=e.instant("word.error"),i.modalData={errors:[e.instant("internal.error.request_process")]},i.templateUrl="error-modal.component"}).finally(function(){t.triggerEvent("closeApplicationModal","beneficialowners",r.fetchedOwner),n.openModal(i).then(function(e){e&&e.success&&t.triggerEvent("reloadApplicationPage","beneficialowners",e.success)})})}}]})}},function(e,t,n){e.exports=function(e){n(4).component.ComponentLoadEvent;e.component("ownershipCertificationForm",{bindings:{readOnly:"<?",ignoreTitle:"<?",signature:"=?",userConfirmation:"=?",trustOwners:"=?",onLoadCallback:"&?",enableLinks:"<?",editCallback:"&?"},templateUrl:e.WEBAPP_ROOT+"/components/certification/ownershipCertificationForm.html",controller:["$q","$timeout","$translate","ComponentService","OwnershipCertificationService","AuthorizedPersonService","OrgApplicantService","ManagerialAuthorityService","ModalService","ScreenshotService","ErrorService",function(e,t,n,a,r,i,o,s,l,c,u){var d=this;d.$onInit=function(){d.fetchedParts=!1,d.fetchedAuthorizedPerson=!1,d.fetchedApplicant=!1,d.fetchedManagingOwners=!1,d.isLoading=!0,angular.isDefined(d.userConfirmation)||(d.userConfirmation={},d.userConfirmation.PERCENT_25_BENEFICIAL_OWNERS=!0,d.userConfirmation.PERCENT_10_BENEFICIAL_OWNERS=!0),e.all([r.fetchCertification().then(function(e){d.parts=e.certificationParts||[],d.percentage=25,d.parts&&-1!==d.parts.indexOf("PERCENT_10_BENEFICIAL_OWNERS")&&(d.percentage=10),d.ibEntity=e.ibEntity,angular.isDefined(d.signature)||(d.signature=e.signature||{}),d.fetchedParts=!0},function(e){d.fetchedParts=!1}),o.fetch().then(function(e){d.applicant=e||void 0,d.fetchedApplicant=!0},function(e){d.fetchedApplicant=!1}),i.fetch().then(function(e){d.authorizedPerson=e,d.fetchedAuthorizedPerson=!0},function(e){d.fetchedAuthorizedPerson=!1}),s.fetchManagingOwners().then(function(e){d.managingOwners=e||[],d.fetchedManagingOwners=!0},function(e){d.fetchedManagingOwners=!1})]).finally(function(){angular.isDefined(d.onLoadCallback)&&d.onLoadCallback({isSuccessful:d.fetchedParts&&d.fetchedApplicant&&d.fetchedAuthorizedPerson&&d.fetchedManagingOwners}),d.isLoading=!1})}}]})}},function(e,t,n){e.exports=function(e){var t=n(4).component.ComponentLoadEvent;e.component("standaloneOwnershipCertificationForm",{templateUrl:e.WEBAPP_ROOT+"/components/certification/standaloneOwnershipCertificationForm.html",controller:["$q","$timeout","$translate","$window","ComponentService","OwnershipCertificationService","AuthorizedPersonService","OrgApplicantService","ManagerialAuthorityService","ModalService","ScreenshotService","ErrorService",function(e,n,a,r,i,o,s,l,c,u,d,p){var g=this,f=function(){var e=[];return g.userConfirmation.PERCENT_25_BENEFICIAL_OWNERS&&e.push("PERCENT_25_BENEFICIAL_OWNERS"),g.userConfirmation.PERCENT_15_BENEFICIAL_OWNERS&&e.push("PERCENT_15_BENEFICIAL_OWNERS"),g.userConfirmation.PERCENT_10_BENEFICIAL_OWNERS&&e.push("PERCENT_10_BENEFICIAL_OWNERS"),e},m=function(){var e=[];return angular.isDefined(g.errors.internal)?(e.push(a.instant("internal.error.request_process")),e):(angular.forEach(g.errors,function(t,n){var a="ownership.error."+n+".",r=p.getErrorText(a,t);e.push(r)}),e)},v=function(){var e=jQuery.Deferred();return g.ssLoad.finally(function(){d.getScreenshot(function(t){var r={signatureSubmissionData:g.signature.signatureSubmissionData,screenshot:t,certifiedParts:f(),trustOwners:g.trustOwners};o.submit(r).then(function(t){e.resolve(t)},function(t){if(g.errors=t.errors||[],!angular.isDefined(g.errors.serverError)){var r={title:a.instant("word.error"),modalData:{errors:m()}};u.openErrorModal(r)}n(function(){e.reject(t)},0,!0)}).finally(function(){})})}),e.promise()};g.editOwner=function(){g.triggerEvent("editInformation","ownercertification",{})},g.triggerEvent=function(e,t,n){var a=new CustomEvent(e,{detail:{componentName:t,eventData:n}});r.dispatchEvent(a)},g.onLoadEvent=function(e){var n=new t("ownercertification",e);n.submit=v,i.notifyLoad(n)},g.$onInit=function(){g.userConfirmation={},g.trustOwners={},g.userConfirmation.PERCENT_25_BENEFICIAL_OWNERS=!0,g.userConfirmation.PERCENT_10_BENEFICIAL_OWNERS=!0,g.ssLoad=d.onLoad(),g.getServerErrors=function(){return g.errors}}}]})}},function(e,t){e.exports=function(e){e.component("managerialAuthorityForm",{bindings:{managingOwners:"<",readOnly:"<?",enableLinks:"<?",editCallback:"&?"},templateUrl:e.WEBAPP_ROOT+"/components/managerialauthority/managerialAuthorityForm.html",controller:["$translate","ModalService","ManagerialAuthorityService","RegisteredOwnerService",function(e,t,n,a){var r=this;r.$onInit=function(){r.managingOwners=r.managingOwners||[],r.allowedManagingOwners=[],r.isLoading=!0,r.addManagingAuthority=function(){var n={title:e.instant("ownership.label.addManagerialAuthority"),templateUrl:"managerial-authority-selection-modal.component",dialogClass:"modal-lg",modalData:{allowedManagingOwners:r.allowedManagingOwners}};t.openModal(n).then(function(e){angular.isDefined(e)&&r.managingOwners.push(e)})},r.deleteManagingAuthority=function(e){r.isLoading=!0,n.delete(e).then(function(){for(var t=0,n=0;n<r.managingOwners.length;n++){if(r.managingOwners[n].entityId===e){t=n;break}}r.managingOwners.splice(t,1)},function(e){}).finally(function(){r.isLoading=!1})},a.fetchOwners().then(function(e){r.allowedManagingOwners=e||[],r.allowedManagingOwners.push({})},function(e){}).finally(function(){r.isLoading=!1})}}]})}},function(e,t){e.exports=function(e){e.component("registeredOwnerForm",{bindings:{entityType:"<",entityId:"<?"},controller:["$translate","ComponentService","ModalService","RegisteredOwnerService",function(e,t,n,a){var r=this;r.$onInit=function(){r.entityType=r.entityType||"INDIVIDUAL",r.entityId=r.entityId||0,r.fetchedOwner=!1;var i={};("INDIVIDUAL"===r.entityType?a.fetchIndividualOwner(r.entityId):a.fetchEntityOwner(r.entityId)).then(function(t){r.owner=t.entity,r.rules=t.rules,r.associatedIndividual=t.associatedIndividual,r.fetchedOwner=!0,i.dialogClass="modal-lg",i.modalData={owner:r.owner,rules:r.rules,associatedIndividual:r.associatedIndividual},"INDIVIDUAL"===r.entityType?(i.title=e.instant("entity.header.individualOwner"),i.templateUrl="individual-owner-modal.component"):(i.title=e.instant("entity.header.entityOwner"),i.templateUrl="entity-owner-modal.component")},function(t){r.fetchedOwner=!1,i.title=e.instant("word.error"),i.modalData={errors:[e.instant("internal.error.request_process")]},i.templateUrl="error-modal.component"}).finally(function(){t.triggerEvent("closeApplicationModal","registeredowners",r.fetchedOwner),n.openModal(i).then(function(e){e&&e.success&&t.triggerEvent("reloadApplicationPage","registeredowners",e.success)})})}}]})}},function(e,t){e.exports=function(e){e.component("ownershipRegistrationForm",{bindings:{readOnly:"<?"},templateUrl:e.WEBAPP_ROOT+"/components/registeredowners/ownershipRegistrationForm.html",controller:["$q","OwnershipCertificationService","ManagerialAuthorityService",function(e,t,n){var a=this;a.$onInit=function(){a.parts=[],a.isLoading=!1,a.fetchedParts=!1,a.fetchedManagingOwners=!1,a.percentage=25,e.all([t.fetchCertification().then(function(e){a.parts=e.certificationParts||[],a.parts&&-1!==a.parts.indexOf("PERCENT_10_BENEFICIAL_OWNERS")&&(a.percentage=10),a.fetchedParts=!0},function(e){a.fetchedParts=!1}),n.fetchManagingOwners().then(function(e){a.managingOwners=e||[],a.fetchedManagingOwners=!0},function(e){a.fetchedManagingOwners=!1})]).finally(function(){a.isLoading=!1})}}]})}},function(e,t){e.exports=function(e){e.component("ownerUsernameStandalone",{bindings:{entityId:"<"},controller:["OwnerUsernameService","ComponentService",function(e,t){var n=this;n.$onInit=function(){t.triggerEvent("closeApplicationModal","ownerusername",!0),e.openModal(n.entityId).then(function(e){e&&e.success&&(t.triggerEvent("reloadApplicationPage","ownerusername",e.success),window.EventBus&&window.EventBus.dispatchEvent("userOwnershipEntity-refresh",{}))})}}]})}},function(e,t){e.exports=function(e){e.component("addOwnerForm",{bindings:{mainEntityId:"<?",entityId:"<?",entityType:"<?"},controller:["$translate","ComponentService","ModalService","RegisteredOwnerService","amEntityNameFilter","ACTIVE_CONTEXT","ApplicationContext",function(e,t,n,a,r,i,o){var s=this,l=function(){return e.instant("linkedInfo.heading.relatedEntities")+" - "+r(s.mainEntity)};s.$onInit=function(){s.mainEntityId=s.mainEntityId||0,s.entityId=s.entityId||0,s.entityType=s.entityType||"",a.fetchAdditionRules(s.mainEntityId,s.entityId,s.entityType).then(function(e){s.rules=e.rules,s.mainEntity=e.mainEntity,s.entity=e.entity,s.entity=e.entity,s.pendingRequest=e.pendingRequest,s.cancelAllowed=e.cancelAllowed},function(e){s.errors=e.errors||{},s.submissionState=s.errors.internal?"FAILURE":""}).finally(function(){if(s.pendingRequest){var a={request:s.pendingRequest,cancelAllowed:s.cancelAllowed},r={dialogClass:"modal-md",title:l(),templateUrl:"owner-pending-request-modal.component",modalData:a};e.onReady().then(function(){t.triggerEvent("closeApplicationModal","addowner",!0),n.openModal(r).then(function(e){e&&e.success&&t.triggerEvent("reloadApplicationPage","addowner",e.success)})})}else{a={rules:s.rules,mainEntity:s.mainEntity,errors:s.errors,submissionState:s.submissionState};s.entity&&(a.entity=s.entity);r={dialogClass:"modal-md",title:l(),templateUrl:"owner-type-selection-modal.component",modalData:a};e.onReady().then(function(){t.triggerEvent("closeApplicationModal","addowner",!0),n.openModal(r).then(function(e){if(e&&e.success){var n=i===o.AM_DEPENDENCY;n?window.EventBus&&window.EventBus.dispatchEvent("userOwnershipEntity-refresh",{}):t.triggerEvent("reloadApplicationPage","addowner",e.success)}})})}})}}]})}},function(e,t){e.exports=function(e){e.component("addTrusteeForm",{bindings:{mainEntityId:"<?",entityId:"<?",entityType:"<?"},controller:["$translate","ComponentService","ModalService","TrusteeService","amEntityNameFilter",function(e,t,n,a,r){var i=this;i.$onInit=function(){i.mainEntityId=i.mainEntityId||0,i.entityId=i.entityId||0,i.entityType=i.entityType||"",a.fetchAdditionRules(i.mainEntityId,i.entityId,i.entityType).then(function(e){i.rules=e.rules,i.mainEntity=e.mainEntity,i.trustee=e.trustee},function(e){i.errors=e.errors||{},i.submissionState=i.errors.internal?"FAILURE":""}).finally(function(){var a={rules:i.rules,mainEntity:i.mainEntity,errors:i.errors,submissionState:i.submissionState};i.trustee&&(a.trustee=i.trustee);var o={dialogClass:"modal-md",title:e.instant("trusteeTypeSelectionModal.heading",{mainEntity:r(i.mainEntity)}),templateUrl:"trustee-type-selection-modal.component",modalData:a};t.triggerEvent("closeApplicationModal","addtrustee",!0),n.openModal(o).then(function(e){e&&e.success&&(t.triggerEvent("reloadApplicationPage","addtrustee",e.success),window.EventBus&&window.EventBus.dispatchEvent("userOwnershipEntity-refresh",{}))})})}}]})}},function(e,t){e.exports=function(e){e.component("trusteeForm",{bindings:{onUpdate:"&?"},templateUrl:e.WEBAPP_ROOT+"/components/trustee/trusteeForm.html",controller:["$translate","ModalService","TrusteeService","amEntityNameFilter",function(e,t,n,a){var r=this,i=function(){r.isLoading=!0,r.fetchedTrusteeInfo=!1,n.fetchTrusteeInfo().then(function(e){r.rules=e.rules,r.entities=e.entities,r.fetchedTrusteeInfo=!0},function(n){r.errors=n.errors||{},r.submissionState=r.errors.internal?"FAILURE":"",r.fetchedTrusteeInfo=!1;var a={title:e.instant("word.error"),modalData:{errors:[e.instant("internal.error.request_process")]}};t.openErrorModal(a)}).finally(function(){r.onUpdate&&r.onUpdate({entities:r.entities}),r.isLoading=!1})},o=function(){return e.instant("trusteeTypeSelectionModal.heading",{mainEntity:a(r.mainEntity)})};r.$onInit=function(){i(),r.dirty=!1,r.viewAccountEntity=function(e){var n={title:a(e),templateUrl:"trustee-entity-modal.component",dialogClass:"modal-lg",modalData:{accountEntity:e}};t.openModal(n)},r.addTrustee=function(){n.fetchConfigAdditionRules().then(function(e){r.rules=e.rules,r.mainEntity=e.mainEntity},function(e){r.errors=e.errors||{},r.submissionState=r.errors.internal?"FAILURE":""}).finally(function(){var e={rules:r.rules,mainEntity:r.mainEntity,errors:r.errors,submissionState:r.submissionState,useInfoChangeConfig:!0},n={dialogClass:"modal-md",title:o(),templateUrl:"trustee-type-selection-modal.component",modalData:e};t.openModal(n).then(function(e){e&&e.success&&(i(),r.dirty=!0)})})},r.editAccountEntity=function(e){if(e.editable){var a=r.entities.indexOf(e);n.fetchConfigEditionRules(a).then(function(t){r.rules=t.rules,r.mainEntity=t.mainEntity,r.trustee=e},function(e){r.errors=e.errors||{},r.submissionState=r.errors.internal?"FAILURE":""}).finally(function(){var e={rules:r.rules,mainEntity:r.mainEntity,index:a,errors:r.errors,submissionState:r.submissionState,useInfoChangeConfig:!0,trustee:r.trustee},n={dialogClass:"modal-md",title:o(),templateUrl:"trustee-type-selection-modal.component",modalData:e};t.openModal(n).then(function(e){e&&e.success&&(i(),r.dirty=!0)})})}},r.deleteAccountEntity=function(i){if(i.deletable){var o=r.entities.indexOf(i),s=e.instant("trustee.delete.pending",{entityName:a(i)}),l=e.instant("trustee.delete.success",{entityName:a(i)}),c={title:e.instant("modal.title.DeleteTrustee"),modalData:{pendingText:s,successText:l,confirmFn:function(){return n.removeTrustee(o)},noSuccessScreen:!0}};t.openConfirmModal(c).then(function(e){"SUCCESS"===e&&(r.entities.splice(o,1),r.dirty=!0)})}}}}]}),e.component("trusteeEntityModal",{template:'<entity-review entity="$ctrl.accountEntity"></entity-review>',controller:["ModalService",function(e){var t=this;t.$onInit=function(){t.accountEntity=e.getModalData().accountEntity}}]})}},function(e,t,n){e.exports=function(e){var t=n(4).component.ComponentLoadEvent;e.component("trustEntitiesForm",{bindings:{closeFn:"@",mainEntityId:"<?",entityId:"<?",entityType:"<?",associationType:"<?"},controller:["$translate","ComponentService","ModalService","TrustEntitiesService","amEntityNameFilter",function(e,n,a,r,i){var o=this;o.$onInit=function(){o.close=window[o.closeFn]||void 0,o.mainEntityId=o.mainEntityId||0,o.entityId=o.entityId||0,o.entityType=o.entityType||"",o.associationType=o.associationType||"",o.isLoading=!0,r.fetchEntity(o.mainEntityId,o.entityId,o.entityType,o.associationType).then(function(e){o.rules=e.rules,o.mainEntity=e.mainEntity,o.associatedEntity=e.associatedEntity,o.associatedIndividualToLegalEntity=e.associatedIndividualToLegalEntity},function(e){o.errors=e.errors||{},o.submissionState=o.errors.internal?"FAILURE":""}).finally(function(){var r,s={rules:o.rules,mainEntity:o.mainEntity,associatedEntity:o.associatedEntity,associationType:o.associationType,associatedIndividualToLegalEntity:o.associatedIndividualToLegalEntity,errors:o.errors,submissionState:o.submissionState},l={dialogClass:"modal-lg",title:(r=e.instant("association.type."+o.associationType),e.instant("trustEntitiesModal.heading",{associationType:r,mainEntity:i(o.mainEntity)})),templateUrl:"trust-entities-form-modal.component",modalData:s};e.onReady().then(function(){var e=new t("trustentities",!0);n.notifyLoad(e),a.openModal(l).then(function(e){e&&e.success&&n.triggerEvent("reloadApplicationPage","trustentities",e.success)})})})}}]})}},function(e,t){e.exports=function(e){e.component("addSignatoryForm",{bindings:{mainEntityId:"<?",entityId:"<?",entityType:"<?"},controller:["$translate","ComponentService","ModalService","SignatoryService","amEntityNameFilter",function(e,t,n,a,r){var i=this;i.$onInit=function(){i.mainEntityId=i.mainEntityId||0,i.entityId=i.entityId||0,i.entityType=i.entityType||"",a.fetchSignatoryInfo(i.mainEntityId).then(function(e){i.rules=e.rules,i.mainEntity=e.mainEntity,i.signatory=e.signatory},function(e){i.errors=e.errors||{},i.submissionState=i.errors.internal?"FAILURE":""}).finally(function(){var a={rules:i.rules,signatory:i.signatory,mainEntity:i.mainEntity,errors:i.errors,submissionState:i.submissionState},o={dialogClass:"modal-md",title:e.instant("signatoryModal.heading",{mainEntity:r(i.mainEntity)}),templateUrl:"signatory-form-modal.component",modalData:a};t.triggerEvent("closeApplicationModal","addsignatory",!0),n.openModal(o).then(function(e){e&&e.success&&(t.triggerEvent("reloadApplicationPage","addsignatory",e.success),window.EventBus&&window.EventBus.dispatchEvent("userOwnershipEntity-refresh",{}))})})}}]})}},function(e,t,n){e.exports=function(e){n(883)(e),n(884)(e),n(885)(e),n(886)(e),n(887)(e),n(888)(e),n(889)(e),n(890)(e),n(891)(e),n(892)(e),n(893)(e),n(894)(e),n(895)(e),n(896)(e),n(897)(e),n(898)(e),n(899)(e)}},function(e,t){e.exports=function(e){e.component("beneficialOwnerModal",{templateUrl:e.WEBAPP_ROOT+"/modals/individualEntityFormModal.html",controller:["$translate","ModalService","BeneficialOwnerService",function(e,t,n){var a=this,r=function(){var e="SUCCESS"===a.submissionState?a.result:{};t.closeModal(e)},i=function(){return a.isLoading},o=function(){a.isLoading=!0,n.create(a.owner,a.percentage).then(function(e){a.result=e||{},a.submissionState="SUCCESS"},function(e){a.errors=e.errors||{},a.submissionState=a.errors.internal?"FAILURE":""}).finally(function(){a.isLoading=!1,s()})},s=function(){var e=[];"SUCCESS"===a.submissionState?e.push({alignment:"right",btnType:"success",label:"word.ok",fn:r}):"FAILURE"===a.submissionState?e.push({alignment:"right",btnType:"default",label:"word.close",fn:r}):e.push({alignment:"right",btnType:"primary",label:"word.save",fn:o,isDisabled:i}),t.setModalButtons(e)};a.$onInit=function(){a.owner=t.getModalData().owner,a.rules=t.getModalData().rules,a.percentage=t.getModalData().percentage,a.isLoading=!1,a.errors={},a.getServerErrors=function(){return a.errors},a.getSuccessText=function(){return e.instant("entity.message.beneficialOwner")},s()}}]})}},function(e,t){e.exports=function(e){e.component("managerialAuthorityModal",{templateUrl:e.WEBAPP_ROOT+"/modals/managerialauthority/managerialAuthorityAddModal.html",controller:["ModalService","ManagerialAuthorityService",function(e,t){var n=this,a=function(){n.isLoading=!0,t.create(n.owner,n.title).then(function(t){t.submissionResult&&t.submissionResult.entityId&&(n.owner.entityId=t.submissionResult.entityId,e.setModalResult(n.owner)),e.closeModal()},function(e){n.serverErrors=e.errors||[]}).finally(function(){n.isLoading=!1})};n.getServerErrors=function(){return n.serverErrors},n.$onInit=function(){n.owner=e.getModalData().individual,n.rules=e.getModalData().rules,n.isLoading=!1,e.setModalButtons([{label:"word.save",fn:a,btnType:"primary",alignment:"right"}])}}]})}},function(e,t){e.exports=function(e){e.component("managerialAuthoritySelectionModal",{templateUrl:e.WEBAPP_ROOT+"/modals/managerialauthority/managerialAuthoritySelectionModal.html",controller:["$filter","$translate","ModalService","ManagerialAuthorityService",function(e,t,n,a){var r=this,i=function(){r.isLoading=!0,a.updateJobTitle(r.owner.entityId,r.title).then(function(){n.setModalResult(r.owner),n.closeModal()},function(e){r.serverErrors=e.errors||[]}).finally(function(){r.isLoading=!1})},o=function(){r.isLoading=!0,a.fetchManagingOwner(0).then(function(e){var a={title:t.instant("ownership.label.addManagerialAuthority"),templateUrl:"managerial-authority-modal.component",dialogClass:"modal-lg",modalData:{individual:e.managingOwner,rules:e.rules}};n.openModal(a)},function(e){}).finally(function(){r.isLoading=!1})},s=function(){var e=[];return r.owner&&r.owner.entityId>0?e.push({label:"word.save",fn:i,btnType:"primary",alignment:"right"}):e.push({label:"word.continue",fn:o,btnType:"primary",alignment:"right"}),e};r.$onInit=function(){r.allowedManagingOwners=n.getModalData().allowedManagingOwners||[],r.owner={},r.title="",r.isLoading=!1,r.getOptionText=function(n){return n&&n.entityId>0?e("amEntityName")(n):t.instant("Not Listed")},r.getServerErrors=function(){return r.serverErrors},r.onOwnerChanged=function(){n.setModalButtons(s())},n.setModalButtons(s())}}]})}},function(e,t){e.exports=function(e){e.component("entityOwnerModal",{templateUrl:e.WEBAPP_ROOT+"/modals/legalEntityFormModal.html",controller:["$translate","ModalService","RegisteredOwnerService",function(e,t,n){var a=this,r=function(){var e="SUCCESS"===a.submissionState?a.result:{};t.closeModal(e)},i=function(){return a.isLoading},o=function(){a.isLoading=!0,n.createEntityOnwer(a.owner,a.associatedIndividual).then(function(e){a.result=e||{},a.submissionState="SUCCESS"},function(e){a.errors=e.errors||{},a.submissionState=a.errors.internal?"FAILURE":""}).finally(function(){a.isLoading=!1,s()})},s=function(){var e=[];"SUCCESS"===a.submissionState?e.push({alignment:"right",btnType:"success",label:"word.ok",fn:r}):"FAILURE"===a.submissionState?e.push({alignment:"right",btnType:"default",label:"word.close",fn:r}):e.push({alignment:"right",btnType:"primary",label:"word.save",fn:o,isDisabled:i}),t.setModalButtons(e)};a.$onInit=function(){a.owner=t.getModalData().owner,a.rules=t.getModalData().rules,a.associatedIndividual=t.getModalData().associatedIndividual,a.isLoading=!1,a.errors={},a.getServerErrors=function(){return a.errors},a.getSuccessText=function(){return e.instant("entity.message.registeredOwner")},s()}}]})}},function(e,t){e.exports=function(e){e.component("individualOwnerModal",{templateUrl:e.WEBAPP_ROOT+"/modals/individualEntityFormModal.html",controller:["$translate","ModalService","RegisteredOwnerService",function(e,t,n){var a=this,r=function(){var e="SUCCESS"===a.submissionState?a.result:{};t.closeModal(e)},i=function(){return a.isLoading},o=function(){a.isLoading=!0,n.createIndividualOwner(a.owner).then(function(e){a.result=e||{},a.submissionState="SUCCESS"},function(e){a.errors=e.errors||{},a.submissionState=a.errors.internal?"FAILURE":""}).finally(function(){a.isLoading=!1,s()})},s=function(){var e=[];"SUCCESS"===a.submissionState?e.push({alignment:"right",btnType:"success",label:"word.ok",fn:r}):"FAILURE"===a.submissionState?e.push({alignment:"right",btnType:"default",label:"word.close",fn:r}):e.push({alignment:"right",btnType:"primary",label:"word.save",fn:o,isDisabled:i}),t.setModalButtons(e)};a.$onInit=function(){a.owner=t.getModalData().owner,a.rules=t.getModalData().rules,a.isLoading=!1,a.errors={},a.getServerErrors=function(){return a.errors},a.getSuccessText=function(){return e.instant("entity.message.registeredOwner")},s()}}]})}},function(e,t){e.exports=function(e){e.component("ownerUsernameModal",{templateUrl:e.WEBAPP_ROOT+"/modals/username/ownerUsernameModal.html",controller:["ACTIVE_CONTEXT","amEntityNameFilter","ApplicationContext","EntityService","ModalService","UserAuthService","OwnerUsernameService",function(t,n,a,r,i,o,s){var l=this,c=function(){var e={entityId:l.entityId,success:"SUCCESS"===l.modalState};i.closeModal(e)},u=function(){var e=[];"DETAILS"===l.modalState?e.push({alignment:"right",btnType:"primary",fn:l.submit,label:"word.submit",isDisabled:function(){return l.loading}}):e.push({alignment:"right",btnType:"default",fn:c,label:"word.close"}),i.setModalButtons(e)},d=function(e){l.errorKey=e,l.modalState="ERROR",u()},p=function(){return r.fetchEntity(l.entityId).then(function(e){l.ownerEntity=e.data.entity,u()}).catch(function(e){d("entity.ownership.username.loadError.ENTITY")}).finally(function(){l.loading=!1})};l.$onInit=function(){l.entityId=i.getModalData().entityId,l.encryptInvoker={},l.errors={},l.modalState="DETAILS",l.getEntityDisplayName=function(){return n(l.ownerEntity)},l.keyFetchFn=s.fetchPublicKey,l.submit=function(){l.loading=!0,l.encryptInvoker.invoke().then(function(e){s.submit(l.entityId,l.user.username,l.user.credentialType,e).then(function(e){l.modalState="SUCCESS",l.requestId=e.data.requestIds[0],u()}).catch(function(e){l.errors=e.data.errors,l.errors.internal&&d("internal.error."+l.errors.internal)}).finally(function(){l.loading=!1})})},l.loading=!0,t===a.AM_DEPENDENCY?o.dependencyLogin(e.SERVER_PATH+"/EntityManagementAuth").then(function(e){p()}).catch(function(e){l.loading=!1,d("entity.ownership.username.loadError.AUTH")}):p()}}]})}},function(e,t){e.exports=function(e){e.component("ownerSelectionModal",{template:['<loading-overlay ng-if="$ctrl.isLoading"></loading-overlay>','<div ng-if="$ctrl.submissionState !== \'SUCCESS\' && $ctrl.submissionState !== \'FAILURE\'" ng-form="$ctrl.ownerSelectionForm" form-server-errors="$ctrl.getServerErrors()">','   <any ng-if="::$ctrl.allowedEntities.length > 0">','        <div ng-if="::$ctrl.sequenceType===\'ADD\'" class="alert alert-gray">',"            <p translate=\"linkedInfo.specifyEntity.info\" translate-values=\"{breakTag: '<br>' , entityType: '{{ ('entity.type.'+$ctrl.entityType) | translate }}' }\"></p>","        </div>",'        <am-form-select name="entitySelection" ng-model="$ctrl.entitySelection" no-translate="true" options="$ctrl.allowedEntities" option-key="$ctrl.getEntityLabel" label-text="{{$ctrl.getSelectEntityLabel()}}" required model-listener="$ctrl.entitySelectionChanged()"></am-form-select>',"   </any>",'    <linked-entity-associations ng-if="$ctrl.showAssociations()" rules="$ctrl.associationRules" ng-model="$ctrl.associations" main-entity="$ctrl.mainEntity" linked-entity="$ctrl.entity"></linked-entity-associations>',"</any>","</div>","<div ng-if=\"$ctrl.getServerErrors()['internal'] || $ctrl.submissionState === 'FAILURE'\">",'    <div align="center">','        <i class="fa fa-2x fa-exclamation-triangle text-danger"></i>',"    </div>","    <h3 class=\"text-center text-dark\">{{ 'internal.error.' + $ctrl.getServerErrors()['internal'] | translate}}</h3>","</div>"].join(""),controller:["$filter","$translate","ModalService","RegisteredOwnerService",function(e,t,n,a){var r=this,i="linkedInfo.addIndividual",o="linkedInfo.addLegalEntity";function s(){if(f())return angular.isUndefined(r.entity.associations)&&(r.entity.associations=[]),r.entity.associations;angular.isUndefined(r.entity.linkedEntities)&&(r.entity.linkedEntities=[]);for(var e=r.entity.linkedEntities,t=null,n=0;n<e.length;n++){var a=e[n];if(a.mainEntityId==r.mainEntity.entityId){t=a;break}}return null==t&&(t={mainEntityId:r.mainEntity.entityId,secondaryEntityId:r.entity.entityId},e.push(t)),angular.isUndefined(t.associations)&&(t.associations=[]),t.associations}var l=function(){var e="SUCCESS"===r.submissionState;n.closeModal(e)},c=function(){r.isLoading=!0,r.entity.entityType=r.entity.entityType||r.entityType,a.updateEntityLink(r.entity,r.mainEntity.entityId).then(function(a){r.rules=a.rules,r.entity=a.entity;var s={dialogClass:"modal-lg"};s.modalData={owner:r.entity,rules:r.rules,mainEntity:r.mainEntity,mainEntityId:r.mainEntity.entityId},"INDIVIDUAL"===r.entity.entityType?(r.entity.entityId>0?s.title=t.instant("page.title.EditLinkedEntity",{entityName:e("amEntityName")(r.entity)}):s.title=t.instant(i),s.templateUrl="individual-owner-form-modal.component"):(r.entity.entityId>0?s.title=t.instant("page.title.EditLinkedEntity",{entityName:e("amEntityName")(r.entity)}):s.title=t.instant(o)+"/"+t.instant("entity.type.Trust"),s.templateUrl="entity-owner-form-modal.component"),n.openModal(s).then(function(e){})},function(e){r.errors=e.errors||{},r.submissionState=r.errors.internal?"FAILURE":""}).finally(function(){r.isLoading=!1,d()})},u=function(){return!r.ownerSelectionForm||r.ownerSelectionForm.$invalid},d=function(){var e=[];"SUCCESS"===r.submissionState?e.push({alignment:"right",btnType:"success",label:"word.ok",fn:l}):"FAILURE"===r.submissionState?e.push({alignment:"right",btnType:"default",label:"word.close",fn:l}):e.push({alignment:"right",btnType:"primary",label:"word.continue",fn:c,isDisabled:u}),n.setModalButtons(e)},p=function(){if(angular.isDefined(r.associationRules)&&1===r.associationRules.allowedAssociations.length){var e=r.associationRules.allowedAssociations[0].type,t=r.associationRules.allowedTitles[e];return angular.isUndefined(t)||0==t.length}return!1},g=function(){for(var e=r.associationRules.allowedAssociations[0],t=!1,n=0;n<r.associations.length;n++){if(r.associations[n].type==e.type){t=!0;break}}t||r.associations.push(e)},f=function(){var e=r.mainEntity.entityType;return"ORG"===e||"TRUST"===e||"JOINT"===e};r.$onInit=function(){var a;r.entity=n.getModalData().entity||{},r.mainEntity=n.getModalData().mainEntity,r.rules=n.getModalData().rules,r.entityType=n.getModalData().entityType,r.sequenceType=n.getModalData().sequenceType,r.allowedEntities=e("filter")(r.rules.allowedEntities,{entityType:r.entityType})||[],r.associationRules=r.rules.associationRules[r.entityType],r.associations=s(),"ADD"===r.sequenceType&&r.allowedEntities.length>0&&("LEGAL_ENTITY"===r.entityType?r.allowedEntities.splice(0,0,o):r.allowedEntities.splice(0,0,i)),r.submissionState=void 0,r.isLoading=!0,r.errors={},r.getServerErrors=function(){return r.errors},r.entitySelectionChanged=function(){angular.isDefined(r.entitySelection)&&(r.entitySelection===i||r.entitySelection===o?(r.entity={},r.entity.entityId=0,r.entitySelection===i?r.entity.entityType="INDIVIDUAL":r.entitySelection===o&&(r.entity.entityType="LEGAL_ENTITY"),r.associations=s()):(r.entity=angular.copy(r.entitySelection),r.associations=s()),p()&&g(),r.errors={})},r.showAssociations=function(){return!p()&&(!(r.allowedEntities.length>0&&angular.isUndefined(r.entitySelection))&&angular.isDefined(r.associationRules))},r.getEntityLabel=function(n){return n===i||n===o?t.instant(n):e("amEntityName")(n)},r.getSelectEntityLabel=function(){var e=t.instant("entity.type."+r.entityType);return t.instant("linkedInfo.selectEntity.label",{entityType:e})},d(),a=!1,"ADD"===r.sequenceType&&0===r.allowedEntities.length&&p()?a=!0:"EDIT"===r.sequenceType&&p()&&(a=!0),a&&(g(),r.associations,c()),a||(p()&&g(),r.isLoading=!1)}}]})}},function(e,t){e.exports=function(e){e.component("ownerTypeSelectionModal",{template:['<loading-overlay ng-if="$ctrl.isLoading"></loading-overlay>','<div ng-if="$ctrl.submissionState !== \'SUCCESS\' && $ctrl.submissionState !== \'FAILURE\'" ng-form="$ctrl.ownerTypeForm" form-server-errors="$ctrl.getServerErrors()">','    <p translate="entity.message.linkedEntityType" translate-values="{mainEntity: \'{{ $ctrl.mainEntity | amEntityName}}\' }" ></p>','    <am-form-select name="entityType" ng-model="$ctrl.entityType" options="$ctrl.rules.allowedEntityTypes" label-text="{{\'entity.message.selectOwnerType\' | translate}}" option-key="$ctrl.getEntityTypeLabel"></am-form-select>',"</div>","<div ng-if=\"$ctrl.getServerErrors()['internal'] || $ctrl.submissionState === 'FAILURE'\">",'    <div align="center">','        <i class="fa fa-2x fa-exclamation-triangle text-danger"></i>',"    </div>","    <h3 class=\"text-center text-dark\">{{ 'internal.error.' + $ctrl.getServerErrors()['internal'] | translate}}</h3>","</div>"].join(""),controller:["$translate","ModalService","amEntityNameFilter",function(e,t,n){var a=this,r=function(){return angular.isUndefined(a.entityType)||null===a.entityType},i=function(){var e="SUCCESS"===a.submissionState;t.closeModal(e)},o=function(){a.isLoading=!0;var r={mainEntity:a.mainEntity,rules:a.rules,entityType:a.entityType};a.entity?(r.entity=a.entity,r.sequenceType=a.entity.entityId>0?"EDIT":"ADD"):r.sequenceType="ADD";var i={dialogClass:"modal-md",title:e.instant("linkedInfo.specifyEntity.heading",{mainEntity:n(a.mainEntity),entityType:e.instant("entity.type."+a.entityType)}),templateUrl:"owner-selection-modal.component",modalData:r};t.openModal(i).then(function(e){})};a.$onInit=function(){var n;a.rules=t.getModalData().rules,a.mainEntity=t.getModalData().mainEntity,a.entity=t.getModalData().entity,a.errors=t.getModalData().errors||{},a.submissionState=t.getModalData().submissionState,a.getEntityTypeLabel=function(t){return"LEGAL_ENTITY"===t?e.instant("entity.type."+t)+"/"+e.instant("entity.type.Trust"):e.instant("entity.type."+t)},a.getServerErrors=function(){return a.errors},a.rules.allowedEntityTypes.length>1?(n=[],"SUCCESS"===a.submissionState?n.push({alignment:"right",btnType:"success",label:"word.ok",fn:i}):"FAILURE"===a.submissionState?n.push({alignment:"right",btnType:"default",label:"word.close",fn:i}):n.push({alignment:"right",btnType:"primary",label:"word.continue",fn:o,isDisabled:r}),t.setModalButtons(n)):(a.entityType=a.rules.allowedEntityTypes[0],a.entityType,o())}}]})}},function(e,t){e.exports=function(e){e.component("entityOwnerFormModal",{templateUrl:e.WEBAPP_ROOT+"/modals/entityOwnerFormModal.html",controller:["$translate","ModalService","RegisteredOwnerService",function(e,t,n){var a=this,r=function(){var e="SUCCESS"===a.submissionState?a.result:{};t.closeModal(e)},i=function(){return a.isLoading},o=function(){a.isLoading=!0,n.submitOwner(a.owner,a.mainEntityId).then(function(e){a.result=e||{},a.submissionState="SUCCESS",r()},function(e){a.errors=e.errors||{},a.submissionState=a.errors.internal?"FAILURE":""}).finally(function(){a.isLoading=!1,s()})},s=function(){var e=[];"FAILURE"===a.submissionState?e.push({alignment:"right",btnType:"default",label:"word.close",fn:r}):e.push({alignment:"right",btnType:"primary",label:"word.save",fn:o,isDisabled:i,googlePlacesBtn:function(){if(angular.isDefined(a.rules.addressRules)){var e=a.rules.addressRules;if(angular.isDefined(e.enableGooglePlaces))return e.enableGooglePlaces}return!1}()}),t.setModalButtons(e)};a.$onInit=function(){a.owner=t.getModalData().owner,a.rules=t.getModalData().rules,a.mainEntityId=t.getModalData().mainEntityId,a.isLoading=!1,a.errors={},a.getServerErrors=function(){return a.errors},s()}}]})}},function(e,t){e.exports=function(e){e.component("ownerPendingRequestModal",{templateUrl:e.WEBAPP_ROOT+"/modals/ownerPendingRequestModal.html",controller:["$translate","ModalService","RegisteredOwnerService",function(e,t,n){var a=this,r=function(){var e="SUCCESS"===a.submissionState?a.result:{};t.closeModal(e)},i=function(){return a.isLoading||!a.cancelAllowed},o=function(){a.isLoading=!0,n.cancelRequest(a.request.id).then(function(e){a.result=e||{},a.submissionState="SUCCESS",r()},function(e){a.errors=e.errors||{},a.submissionState=a.errors.internal?"FAILURE":""}).finally(function(){a.isLoading=!1,s()})},s=function(){var e=[];"FAILURE"===a.submissionState?e.push({alignment:"right",btnType:"default",label:"word.close",fn:r}):e.push({alignment:"right",btnType:"primary",label:"word.cancelRequest",fn:o,isDisabled:i}),t.setModalButtons(e)};a.$onInit=function(){a.request=t.getModalData().request,a.cancelAllowed=t.getModalData().cancelAllowed,a.isLoading=!1,a.errors={},a.getServerErrors=function(){return a.errors},s()}}]})}},function(e,t){e.exports=function(e){e.component("individualOwnerFormModal",{templateUrl:e.WEBAPP_ROOT+"/modals/individualOwnerFormModal.html",controller:["$translate","ModalService","RegisteredOwnerService",function(e,t,n){var a=this,r=function(){var e="SUCCESS"===a.submissionState?a.result:{};t.closeModal(e)},i=function(){return a.isLoading},o=function(){a.isLoading=!0,n.submitOwner(a.owner,a.mainEntityId).then(function(e){a.result=e||{},a.submissionState="SUCCESS",r()},function(e){a.errors=e.errors||{},a.submissionState=a.errors.internal?"FAILURE":""}).finally(function(){a.isLoading=!1,s()})},s=function(){var e=[];"FAILURE"===a.submissionState?e.push({alignment:"right",btnType:"default",label:"word.close",fn:r}):e.push({alignment:"right",btnType:"primary",label:"word.save",fn:o,isDisabled:i,googlePlacesBtn:function(){if(angular.isDefined(a.rules.addressRules)){var e=a.rules.addressRules;if(angular.isDefined(e.enableGooglePlaces))return e.enableGooglePlaces}return!1}()}),t.setModalButtons(e)};a.$onInit=function(){a.owner=t.getModalData().owner,a.rules=t.getModalData().rules,a.mainEntityId=t.getModalData().mainEntityId,a.isLoading=!1,a.errors={},a.getServerErrors=function(){return a.errors},s()}}]})}},function(e,t){e.exports=function(e){e.component("todEntityModal",{template:'<entity-review entity="$ctrl.accountEntity"></entity-review>',controller:["ModalService",function(e){var t=this;t.$onInit=function(){t.accountEntity=e.getModalData().accountEntity}}]})}},function(e,t){e.exports=function(e){e.component("trusteeTypeSelectionModal",{template:['<loading-overlay ng-if="$ctrl.isLoading"></loading-overlay>','<div ng-if="$ctrl.submissionState !== \'SUCCESS\' && $ctrl.submissionState !== \'FAILURE\'" ng-form="$ctrl.trusteeTypeForm" form-server-errors="$ctrl.getServerErrors()">','    <p translate="entity.message.linkedEntityType" translate-values="{mainEntity: \'{{ $ctrl.mainEntity | amEntityName}}\' }" ></p>','    <am-form-select name="entityType" ng-model="$ctrl.entityType" options="$ctrl.rules.allowedEntityTypes" label-text="{{\'Select Trustee Type\' | translate}}" option-key="\'entity.type.\'"></am-form-select>',"</div>","<div ng-if=\"$ctrl.getServerErrors()['internal'] || $ctrl.submissionState === 'FAILURE'\">",'    <div align="center">','        <i class="fa fa-2x fa-exclamation-triangle text-danger"></i>',"    </div>","    <h3 class=\"text-center text-dark\">{{ 'internal.error.' + $ctrl.getServerErrors()['internal'] | translate}}</h3>","</div>"].join(""),controller:["$translate","ModalService","amEntityNameFilter","TrusteeService",function(e,t,n,a){var r=this,i=function(){return angular.isUndefined(r.entityType)||null===r.entityType},o=function(){var e="SUCCESS"===r.submissionState;t.closeModal(e)},s=function(){r.isLoading=!0,(r.useInfoChangeConfig?a.createTusteeForConfig(r.entityType):a.createTustee(r.entityType)).then(function(a){r.trustee=a.trustee,r.rules=a.rules;var i={dialogClass:"modal-lg"};i.modalData={trustee:r.trustee,rules:r.rules,mainEntity:r.mainEntity,useInfoChangeConfig:r.useInfoChangeConfig,sequenceType:r.sequenceType},"INDIVIDUAL"===r.trustee.entityType?(r.trustee.entityId>0?i.title=e.instant("page.title.EditLinkedEntity",{entityName:n(r.trustee)}):i.title=e.instant("linkedInfo.addIndividual"),i.templateUrl="individual-trustee-form-modal.component"):(r.trustee.entityId>0?i.title=e.instant("page.title.EditLinkedEntity",{entityName:n(r.trustee)}):i.title=e.instant("linkedInfo.addLegalEntity"),i.templateUrl="entity-trustee-form-modal.component"),t.openModal(i).then(function(e){})},function(e){r.errors=e.errors||{},r.submissionState=r.errors.internal?"FAILURE":""}).finally(function(){r.isLoading=!1,l()})},l=function(){var e=[];"SUCCESS"===r.submissionState?e.push({alignment:"right",btnType:"success",label:"word.ok",fn:o}):"FAILURE"===r.submissionState?e.push({alignment:"right",btnType:"default",label:"word.close",fn:o}):e.push({alignment:"right",btnType:"primary",label:"word.continue",fn:s,isDisabled:i}),t.setModalButtons(e)};r.$onInit=function(){r.rules=t.getModalData().rules,r.mainEntity=t.getModalData().mainEntity,r.trustee=t.getModalData().trustee,r.errors=t.getModalData().errors||{},r.submissionState=t.getModalData().submissionState,r.useInfoChangeConfig=t.getModalData().useInfoChangeConfig||!1,r.index=t.getModalData().index,r.sequenceType=angular.isDefined(r.index)&&angular.isDefined(r.trustee)?"EDIT":"ADD",r.getServerErrors=function(){return r.errors},r.rules.allowedEntityTypes.length>1?l():(r.entityType=r.rules.allowedEntityTypes[0],r.entityType,s())}}]})}},function(e,t){e.exports=function(e){e.component("entityTrusteeFormModal",{templateUrl:e.WEBAPP_ROOT+"/modals/entityTrusteeFormModal.html",controller:["$translate","ModalService","TrusteeService",function(e,t,n){var a=this,r=function(){var e="SUCCESS"===a.submissionState?a.result:{};t.closeModal(e)},i=function(){return a.isLoading},o=function(){a.isLoading=!0;(a.useInfoChangeConfig?"EDIT"===a.sequenceType?n.editTrusteeInConfig(a.trustee):n.addTrusteeToConfig(a.trustee):n.submitTrusteeInfo(a.trustee)).then(function(e){a.result=e||{},a.submissionState="SUCCESS",r()},function(e){a.errors=e.errors||{},a.submissionState=a.errors.internal?"FAILURE":""}).finally(function(){a.isLoading=!1,s()})},s=function(){var e=[];"FAILURE"===a.submissionState?e.push({alignment:"right",btnType:"default",label:"word.close",fn:r}):e.push({alignment:"right",btnType:"primary",label:"word.save",fn:o,isDisabled:i}),t.setModalButtons(e)},l=function(){var e=a.mainEntity.entityType;return"ORG"===e||"TRUST"===e||"JOINT"===e};a.$onInit=function(){a.trustee=t.getModalData().trustee,a.rules=t.getModalData().rules,a.mainEntity=t.getModalData().mainEntity,a.useInfoChangeConfig=t.getModalData().useInfoChangeConfig||!1,a.sequenceType=t.getModalData().sequenceType,a.associationRules=a.rules.associationRules,a.associations=function(){if(l())return angular.isUndefined(a.trustee.associations)&&(a.trustee.associations=[]),a.trustee.associations;angular.isUndefined(a.trustee.linkedEntities)&&(a.trustee.linkedEntities=[]);for(var e=a.trustee.linkedEntities,t=null,n=0;n<e.length;n++){var r=e[n];if(r.mainEntityId==a.mainEntity.entityId){t=r;break}}return null==t&&(t={mainEntityId:a.mainEntity.entityId,secondaryEntityId:a.trustee.entityId},e.push(t)),angular.isUndefined(t.associations)&&(t.associations=[]),t.associations}(),a.isLoading=!1,a.errors={},a.getServerErrors=function(){return a.errors},s()}}]})}},function(e,t){e.exports=function(e){e.component("individualTrusteeFormModal",{templateUrl:e.WEBAPP_ROOT+"/modals/individualTrusteeFormModal.html",controller:["$translate","ModalService","TrusteeService",function(e,t,n){var a=this,r=function(){var e="SUCCESS"===a.submissionState?a.result:{};t.closeModal(e)},i=function(){return a.isLoading},o=function(){a.isLoading=!0;(a.useInfoChangeConfig?"EDIT"===a.sequenceType?n.editTrusteeInConfig(a.trustee):n.addTrusteeToConfig(a.trustee):n.submitTrusteeInfo(a.trustee)).then(function(e){a.result=e||{},a.submissionState="SUCCESS",r()},function(e){a.errors=e.errors||{},a.submissionState=a.errors.internal?"FAILURE":""}).finally(function(){a.isLoading=!1,s()})},s=function(){var e=[];"FAILURE"===a.submissionState?e.push({alignment:"right",btnType:"default",label:"word.close",fn:r}):e.push({alignment:"right",btnType:"primary",label:"word.save",fn:o,isDisabled:i}),t.setModalButtons(e)},l=function(){var e=a.mainEntity.entityType;return"ORG"===e||"TRUST"===e||"JOINT"===e};a.$onInit=function(){a.trustee=t.getModalData().trustee,a.rules=t.getModalData().rules,a.mainEntity=t.getModalData().mainEntity,a.useInfoChangeConfig=t.getModalData().useInfoChangeConfig||!1,a.sequenceType=t.getModalData().sequenceType,a.associationRules=a.rules.associationRules,a.associations=function(){if(l())return angular.isUndefined(a.trustee.associations)&&(a.trustee.associations=[]),a.trustee.associations;angular.isUndefined(a.trustee.linkedEntities)&&(a.trustee.linkedEntities=[]);for(var e=a.trustee.linkedEntities,t=null,n=0;n<e.length;n++){var r=e[n];if(r.mainEntityId==a.mainEntity.entityId){t=r;break}}return null==t&&(t={mainEntityId:a.mainEntity.entityId,secondaryEntityId:a.trustee.entityId},e.push(t)),angular.isUndefined(t.associations)&&(t.associations=[]),t.associations}(),a.isLoading=!1,a.errors={},a.getServerErrors=function(){return a.errors},s()}}]})}},function(e,t){e.exports=function(e){e.component("trustEntitiesFormModal",{templateUrl:e.WEBAPP_ROOT+"/modals/trustEntitiesFormModal.html",controller:["$translate","ModalService","TrustEntitiesService",function(e,t,n){var a=this,r=function(){var e="SUCCESS"===a.submissionState?a.result:{};t.closeModal(e)},i=function(){return a.isLoading},o=function(){a.isLoading=!0,n.submitEntity(a.associatedEntity,a.associatedIndividualToLegalEntity,a.associationType).then(function(e){a.result=e||{},a.submissionState="SUCCESS",r()},function(e){a.errors=e.errors||{},a.submissionState=a.errors.internal?"FAILURE":""}).finally(function(){a.isLoading=!1,s()})},s=function(){var e=[];e.push({alignment:"left",btnType:"default",label:"word.close",fn:r}),e.push({alignment:"right",btnType:"primary",label:"word.save",fn:o,isDisabled:i}),t.setModalButtons(e)};a.$onInit=function(){a.associatedEntity=t.getModalData().associatedEntity,a.rules=t.getModalData().rules,a.mainEntity=t.getModalData().mainEntity,a.associatedIndividualToLegalEntity=t.getModalData().associatedIndividualToLegalEntity,a.associationType=t.getModalData().associationType,a.errors=t.getModalData().errors||{},a.submissionState=t.getModalData().submissionState,a.isLoading=!1,a.getServerErrors=function(){return a.errors},s()}}]})}},function(e,t){e.exports=function(e){e.component("signatoryFormModal",{templateUrl:e.WEBAPP_ROOT+"/modals/signatoryFormModal.html",controller:["$translate","ModalService","SignatoryService",function(e,t,n){var a=this,r=function(){var e="SUCCESS"===a.submissionState?a.result:{};t.closeModal(e)},i=function(){return a.isLoading},o=function(){a.isLoading=!0,n.submitSignatoryInfo(a.signatory).then(function(e){a.result=e||{},a.submissionState="SUCCESS",r()},function(e){a.errors=e.errors||{},a.submissionState=a.errors.internal?"FAILURE":""}).finally(function(){a.isLoading=!1,s()})},s=function(){var e=[];"FAILURE"===a.submissionState?e.push({alignment:"right",btnType:"default",label:"word.close",fn:r}):e.push({alignment:"right",btnType:"primary",label:"word.save",fn:o,isDisabled:i}),t.setModalButtons(e)},l=function(){var e=a.mainEntity.entityType;return"ORG"===e||"TRUST"===e||"JOINT"===e};a.$onInit=function(){a.signatory=t.getModalData().signatory,a.rules=t.getModalData().rules,a.mainEntity=t.getModalData().mainEntity,a.associationRules=a.rules.associationRules,a.associations=function(){if(l())return angular.isUndefined(a.signatory.associations)&&(a.signatory.associations=[]),a.signatory.associations;angular.isUndefined(a.signatory.linkedEntities)&&(a.signatory.linkedEntities=[]);for(var e=a.signatory.linkedEntities,t=null,n=0;n<e.length;n++){var r=e[n];if(r.mainEntityId==a.mainEntity.entityId){t=r;break}}return null==t&&(t={mainEntityId:a.mainEntity.entityId,secondaryEntityId:a.signatory.entityId},e.push(t)),angular.isUndefined(t.associations)&&(t.associations=[]),t.associations}(),a.isLoading=!1,a.errors={},a.getServerErrors=function(){return a.errors},s()}}]})}},function(e,t,n){e.exports=function(e){n(901)(e),n(902)(e),n(903)(e),n(904)(e),n(905)(e),n(906)(e),n(907)(e),n(908)(e),n(909)(e),n(910)(e)}},function(e,t){e.exports=function(e){e.factory("AuthorizedPersonService",["$q","ResourceService",function(t,n){var a=e.SERVER_PATH+"/AuthorizedPerson",r={fetch:function(){var e=t.defer();return n.fetch(a).then(function(t){e.resolve(t.data)},function(t){e.reject(t.data)}),e.promise}};return r}])}},function(e,t){e.exports=function(e){e.factory("BeneficialOwnerService",["$q","ResourceService",function(t,n){var a=e.SERVER_PATH+"/BeneficialOwner",r={fetchBeneficialOwners:function(e){var r=t.defer();return n.fetch(a,{percentage:e}).then(function(e){r.resolve(e.data)},function(e){r.reject(e.data)}),r.promise},fetchBeneficialOwner:function(e){var r=t.defer();return n.fetch(a,e).then(function(e){r.resolve(e.data)},function(e){r.reject(e.data)}),r.promise},create:function(e,r){var i=t.defer(),o={owner:e,percentage:r};return n.create(a,o).then(function(e){i.resolve(e.data)},function(e){i.reject(e.data)}),i.promise},update:function(e){}};return r}])}},function(e,t){e.exports=function(e){e.factory("ManagerialAuthorityService",["$q","ResourceService",function(t,n){var a=e.SERVER_PATH+"/ManagingOwner",r={fetchManagingOwners:function(){var e=t.defer();return n.fetch(a).then(function(t){e.resolve(t.data)},function(t){e.reject(t.data)}),e.promise},fetchManagingOwner:function(e){var r=t.defer();return n.fetch(a,{entityId:e}).then(function(e){r.resolve(e.data)},function(e){r.reject(e.data)}),r.promise},create:function(e,r){var i=t.defer();return n.create(a,{owner:e,title:r}).then(function(e){i.resolve(e.data)},function(e){i.reject(e.data)}),i.promise},delete:function(e){var r=t.defer();return n.delete(a,{entityId:e}).then(function(e){r.resolve(e.data)},function(e){r.reject(e.data)}),r.promise},updateJobTitle:function(e,r){var i=t.defer();return n.update(a,{entityId:e,title:r}).then(function(e){i.resolve(e.data)},function(e){i.reject(e.data)}),i.promise}};return r}])}},function(e,t){e.exports=function(e){e.factory("OrgApplicantService",["$q","ResourceService",function(t,n){var a=e.SERVER_PATH+"/OrgApplicant",r={fetch:function(){var e=t.defer();return n.fetch(a).then(function(t){e.resolve(t.data)},function(t){e.reject(t.data)}),e.promise}};return r}])}},function(e,t){e.exports=function(e){e.factory("OwnershipCertificationService",["$q","ResourceService",function(t,n){var a=e.SERVER_PATH+"/OwnerCertification",r={fetchCertification:function(){var e=t.defer();return n.fetch(a).then(function(t){e.resolve(t.data)},function(t){e.reject(t.data)}),e.promise},submit:function(e){var r=t.defer();return n.update(a,e).then(function(e){r.resolve(e.data)},function(e){r.reject(e.data)}),r.promise}};return r}])}},function(e,t){e.exports=function(e){e.factory("RegisteredOwnerService",["$q","ResourceService",function(t,n){var a=e.SERVER_PATH+"/RegisteredOwner",r={fetchOwners:function(){var e=t.defer();return n.fetch(a).then(function(t){e.resolve(t.data)},function(t){e.reject(t.data)}),e.promise},fetchIndividualOwner:function(e){var r=t.defer();return n.fetch(a+"/Individual",e).then(function(e){r.resolve(e.data)},function(e){r.reject(e.data)}),r.promise},fetchEntityOwner:function(e){var r=t.defer();return n.fetch(a+"/Entity",e).then(function(e){r.resolve(e.data)},function(e){r.reject(e.data)}),r.promise},createIndividualOwner:function(e){var r=t.defer();return n.create(a+"/Individual",e).then(function(e){r.resolve(e.data)},function(e){r.reject(e.data)}),r.promise},createEntityOnwer:function(e,r){var i={entity:e,associatedIndividual:r},o=t.defer();return n.create(a+"/Entity",i).then(function(e){o.resolve(e.data)},function(e){o.reject(e.data)}),o.promise},fetchAdditionRules:function(e,r,i){var o=t.defer();return n.fetch(a+"/Rules",{mainEntityId:e,entityId:r,entityType:i}).then(function(e){o.resolve(e.data)},function(e){o.reject(e.data)}),o.promise},updateEntityLink:function(e,r){var i={entity:e,mainEntityId:r||0},o=t.defer();return n.update(a,i).then(function(e){o.resolve(e.data)},function(e){o.reject(e.data)}),o.promise},submitOwner:function(e,r){var i={entity:e,mainEntityId:r||0},o=t.defer();return n.create(a,i).then(function(e){o.resolve(e.data)},function(e){o.reject(e.data)}),o.promise},cancelRequest:function(e){var r=t.defer();return n.delete(a+"/"+e).then(function(e){r.resolve(e.data)},function(e){r.reject(e.data)}),r.promise}};return r}])}},function(e,t){e.exports=function(e){e.factory("OwnerUsernameService",["$translate","ResourceService","ModalService",function(t,n,a){var r={openModal:function(e){var n={title:t.instant("entity.ownership.username.title"),templateUrl:"owner-username-modal.component",modalData:{entityId:e}};return a.openModal(n)},submit:function(t,a,r,i){var o={entityId:t,credential:a,credentialType:r,password:i};return n.create(e.SERVER_PATH+"/OwnerUsername",o)},fetchPublicKey:function(){return n.fetch(e.SERVER_PATH+"/OwnerUsername/Key")}};return r}])}},function(e,t){e.exports=function(e){e.factory("TrusteeService",["$q","ResourceService",function(t,n){var a=e.SERVER_PATH+"/Trustee",r={fetchAdditionRules:function(e,r,i){var o=t.defer();return n.fetch(a,{mainEntityId:e,entityId:r,entityType:i}).then(function(e){o.resolve(e.data)},function(e){o.reject(e.data)}),o.promise},createTustee:function(e){var r={entityType:e},i=t.defer();return n.update(a,r).then(function(e){i.resolve(e.data)},function(e){i.reject(e.data)}),i.promise},submitTrusteeInfo:function(e){var r={trustee:e},i=t.defer();return n.create(a,r).then(function(e){i.resolve(e.data)},function(e){i.reject(e.data)}),i.promise}},i=e.AM_SERVER_PATH+"/TrusteeConfig";return r.fetchTrusteeInfo=function(){var e=t.defer();return n.fetch(i).then(function(t){e.resolve(t.data)},function(t){e.reject(t.data)}),e.promise},r.removeTrustee=function(e){var a=t.defer();return n.delete(i+"/"+e).then(function(e){a.resolve(e.data)},function(e){a.reject(e.data)}),a.promise},r.addTrusteeToConfig=function(e){var a={trustee:e},r=t.defer();return n.create(i,a).then(function(e){r.resolve(e.data)},function(e){r.reject(e.data)}),r.promise},r.editTrusteeInConfig=function(e){var a={trustee:e},r=t.defer();return n.create(i+"/Edit",a).then(function(e){r.resolve(e.data)},function(e){r.reject(e.data)}),r.promise},r.fetchConfigAdditionRules=function(){var e=t.defer();return n.fetch(i+"/Add").then(function(t){e.resolve(t.data)},function(t){e.reject(t.data)}),e.promise},r.fetchConfigEditionRules=function(e){var a=t.defer();return n.fetch(i+"/Edit",{index:e}).then(function(e){a.resolve(e.data)},function(e){a.reject(e.data)}),a.promise},r.createTusteeForConfig=function(e){var a={entityType:e},r=t.defer();return n.update(i,a).then(function(e){r.resolve(e.data)},function(e){r.reject(e.data)}),r.promise},r}])}},function(e,t){e.exports=function(e){e.factory("TrustEntitiesService",["$q","ResourceService",function(t,n){var a=e.SERVER_PATH+"/TrustEntities",r={fetchEntity:function(e,r,i,o){var s=t.defer();return n.fetch(a,{mainEntityId:e,entityId:r,entityType:i,associationType:o}).then(function(e){s.resolve(e.data)},function(e){s.reject(e.data)}),s.promise},submitEntity:function(e,r,i){var o={associatedEntity:e,associatedIndividualToLegalEntity:r,associationType:i},s=t.defer();return n.create(a,o).then(function(e){s.resolve(e.data)},function(e){s.reject(e.data)}),s.promise}};return r}])}},function(e,t){e.exports=function(e){e.factory("SignatoryService",["$q","ResourceService",function(t,n){var a=e.SERVER_PATH+"/Signatory",r={fetchSignatoryInfo:function(e){var r=t.defer();return n.fetch(a,{mainEntityId:e}).then(function(e){r.resolve(e.data)},function(e){r.reject(e.data)}),r.promise},submitSignatoryInfo:function(e){var r={signatory:e},i=t.defer();return n.create(a,r).then(function(e){i.resolve(e.data)},function(e){i.reject(e.data)}),i.promise}};return r}])}},function(e,t,n){"use strict";var a=angular.module("ibmarketing.funding",[]);a.FUNDING_APP_ROOT="/funding.webapp",a.SERVER_PATH="/AccountManagement",n(912)(a)},function(e,t,n){e.exports=function(e){n(913)(e),n(1137)(e),n(1140)(e),n(1142)(e),n(1238)(e),n(1258)(e),n(1282)(e)}},function(e,t,n){e.exports=function(e){n(914)(e),n(921)(e),n(928)(e),n(930)(e),n(954)(e),n(956)(e),n(962)(e),n(982)(e),n(991)(e),n(994)(e),n(998)(e),n(1001)(e),n(1003)(e),n(1005)(e),n(1010)(e),n(1027)(e),n(1040)(e),n(1045)(e),n(1048)(e),n(1051)(e),n(1054)(e),n(1065)(e),n(1073)(e),n(1078)(e),n(1081)(e),n(1086)(e),n(1101)(e),n(1115)(e),n(1131)(e),n(1132)(e),n(1133)(e),n(1134)(e),n(1135)(e),n(1136)(e)}},function(e,t,n){e.exports=function(e){n(915)(e),n(917)(e),n(919)(e)}},function(e,t,n){e.exports=function(e){e.component("isaAccountTransferForm",{require:{parentForm:"^^form"},bindings:{transferParameters:"<",rules:"<"},template:n(916),controller:function(){var e=this;e.$onInit=function(){angular.isDefined(e.transferParameters.provider)&&angular.isDefined(e.transferParameters.provider.broker)&&(e.provider=e.transferParameters.provider.broker),e.getProviderOption=function(e){return e.brokerName};var t=[],n=[],a=function(){return angular.isDefined(e.provider)&&e.provider.atgEligible?t:n},r=function(e){for(var t=[],n=[],a=0;a<e.length;a++)"PARTIAL_TRANSFER"===e[a]||"CONTACT_CLIENT_FOR_TRANSFER"===e[a]?t.push(e[a]):n.push(e[a]);return[{category:"IN_SPECIE",options:t},{category:"CASH_ONLY",options:n}]};e.setProvider=function(t){angular.isUndefined(t)||(angular.isUndefined(e.transferParameters.provider)&&(e.transferParameters.provider={}),e.transferParameters.provider.broker=angular.copy(t),e.transferParameters.fullTransferAuthorization=void 0,e.transferOptions=a())},t=r(e.rules.allowedFullTransferChoices.true),n=r(e.rules.allowedFullTransferChoices.false),e.transferOptions=a()}}})}},function(e,t){e.exports='<am-form-input ng-model="$ctrl.transferParameters.provider.accountNumber" name="providerAccountId" type="text" label-text="{{ \'isaAccountTransfer.label.providerAccountId\' | translate }}" required></am-form-input>\n<am-form-select name="providerName" chosen-select ng-model="$ctrl.provider" options="$ctrl.rules.allowedProviders" no-translate="true" label-text="{{\'isaAccountTransfer.label.providerName\' | translate}}" empty-option-text="{{\'isaAccountTransfer.field.provider\' | translate}}" option-key="$ctrl.getProviderOption"  model-listener="$ctrl.setProvider($ctrl.provider)" required></am-form-select>\n<am-form-input ng-model="$ctrl.transferParameters.currentYearContribution" name="transferAmount" type="text" input-mask-alias="transferAmount" label-text="{{ \'isaAccountTransfer.label.contributionAmount\' | translate }}"></am-form-input>\n<am-form-label label-text="{{ \'isaAccountTransfer.label.transferType\' | translate }}" value-text="{{ \'isaAccountTransfer.label.fullTransfer\' | translate }}"></am-form-label>\n<div class="form-group">\n    <div class="row">\n        <div class="col-xs-12 col-sm-6 col-md-6 col-lg-4">\n            <label class="control-label" translate="isaAccountTransfer.label.chooseOne"></label>\n        </div>\n        <div class="col-xs-12 col-sm-6 col-md-6 col-lg-8">\n            <div ng-repeat="transferOption in $ctrl.transferOptions">\n                <strong ng-if="transferOption.options.length">{{\'isaAccountTransfer.label.\' + transferOption.category | translate }}</strong>\n                <div class="row" ng-repeat="option in transferOption.options">\n                    <div class="col-xs-2 col-sm-1 col-md-1 col-lg-1">\n                        <p class="text-center">\n                            <input name="_fullTransferAuthorization" type="radio" ng-model="$ctrl.transferParameters.fullTransferAuthorization" i-check value="{{option}}" required />\n                        </p>\n                    </div>\n                    <div class="col-xs-10 col-sm-11 col-md-11 col-lg-11">\n                        <p translate="isaAccountTransfer.label.authorizationType.{{option}}"></p>\n                    </div>\n                </div>\n            </div>\n            <div class="row">\n                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n                    <am-form-error name="fullTransferAuthorization"></am-form-error>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("isaAccountTransferReview",{bindings:{transferParameters:"<",forceLanguage:"@?"},template:n(918)})}},function(e,t){e.exports='<am-form-label label-text="{{ \'isaAccountTransfer.label.providerAccountId\' | translate: {}: undefined: $ctrl.forceLanguage  }}" value-text="{{$ctrl.transferParameters.provider.accountNumber}}"></am-form-label>\r\n<am-form-label label-text="{{ \'isaAccountTransfer.label.providerName\' | translate: {}: undefined: $ctrl.forceLanguage  }}" value-text="{{$ctrl.transferParameters.provider.broker.brokerName}}"></am-form-label>\r\n<am-form-label ng-if="$ctrl.transferParameters.currentYearContribution" label-text="{{ \'isaAccountTransfer.label.contributionAmount\' | translate: {}: undefined: $ctrl.forceLanguage }}" value-text="{{$ctrl.transferParameters.currentYearContribution}}"></am-form-label>\r\n<div ng-if="$ctrl.transferParameters.full">\r\n    <am-form-label label-text="{{ \'isaAccountTransfer.label.transferType\' | translate: {}: undefined: $ctrl.forceLanguage }}" value-text="{{ \'isaAccountTransfer.label.fullTransfer\'| translate: {}: undefined: $ctrl.forceLanguage }}"></am-form-label>\r\n    <br>\r\n    <div class="alert alert-warning">\r\n        <p>{{ \'isaAccountTransfer.label.authorizationType.\' + $ctrl.transferParameters.fullTransferAuthorization | translate: {}: undefined: $ctrl.forceLanguage }}</p>\r\n    </div>\r\n</div>'},function(e,t,n){e.exports=function(e){e.component("isaAccountTransferInstructions",{bindings:{transferParameters:"<",ticketNumber:"<",iraType:"<",custodianEntity:"<?",transferDate:"<?",accountId:"<?",entity:"<?"},template:n(920),controller:["$translate","CsTicketService","ModalService",function(e,t,n){var a=this;a.$onInit=function(){a.ticketNumber=a.ticketNumber||0,a.view=function(){var t={title:e.instant("modal.title.IsaTransferForm",{},void 0,"en"),templateUrl:"isa-transfer-form-modal.component",dialogClass:"modal-lg",modalData:{transferDate:a.transferDate,transferParameters:a.transferParameters,accountId:a.accountId,entity:a.entity,iraType:a.iraType,custodianEntity:a.custodianEntity}};n.openModal(t)},a.navigate=function(){n.isModalOpen()&&n.closeModal(),t.openTicket(a.ticketNumber)}}}]})}},function(e,t){e.exports='<div class="instructions">\n    <div class="instructions-heading">\n        <i class="fa fa-lg fa-info-circle"></i>\n        {{\'word.instructions\' | translate}}\n    </div>\n    <div class="instructions-body form-review">\n        <p translate="isaAccountTransfer.instructions.print"></p>\n        <p><am-button btn-text="{{\'word.viewForm\' | translate}}" btn-type="primary" on-click="$ctrl.view()"></am-button></p>\n        <br>\n        \x3c!-- FIXME : Show upload button conditionally ng-if="$ctrl.ticketNumber" --\x3e\n        <div>\n            <p translate="isaAccountTransfer.instructions.upload" translate-values="{ \'providerName\': $ctrl.transferParameters.provider.broker.brokerName }"></p>\n            <p><am-button btn-text="{{\'word.upload\' | translate}}" btn-type="info" on-click="$ctrl.navigate()"></am-button></p>\n        </div>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){n(922)(e),n(924)(e),n(926)(e)}},function(e,t,n){e.exports=function(e){e.component("amexCard",{template:n(923),controller:["AgreementService","ResourceService",function(t,n){var a=this,r=function(){a.isInProgress=!0,n.fetch(e.SERVER_PATH+"/AmexCard/Profile").then(function(e){a.profile=e.data.profile,angular.isUndefined(a.profile)&&(a.state="ERROR"),""!==a.profile.amexId?a.profile.signed?a.state="DETAILS":a.profile.eligible?a.state="AGREEMENT":a.state="INELIGIBLE":a.state="APPLICATION"}).finally(function(){"AGREEMENT"===a.state?i():a.isInProgress=!1})},i=function(){a.isInProgress=!0,n.fetch(e.SERVER_PATH+"/AmexCard/Agreement").then(function(e){return a.agreementRecord=e.data.agreementRecord}).finally(function(){return a.isInProgress=!1})},o=function(e){a.isInProgress=!0,n.update(AM_APP_ROOT+"/AmexCard/SignUp",e).then(r,function(e){return a.errors=e.data.errors}).finally(function(){return a.isInProgress=!1})},s=function(){a.recording=!0,t.record(a.agreementRecord).then(o).finally(function(){return a.recording=!1})};a.$onInit=function(){a.isInProgress=!1,a.recording=!1,a.errors=[],a.changeState=function(e){return a.state=e},a.submit=s,a.viewTerms=function(){return t.viewAgreement("AmexCard")},a.getErrors=function(){return a.errors},a.isDisabled=function(){return a.isInProgress||a.recording},r()}}]})}},function(e,t){e.exports='<div page-structure>\n    <br>\n    <loading-overlay ng-if="$ctrl.isInProgress"></loading-overlay>\n    <amex-card-application ng-if="$ctrl.state === \'APPLICATION\'" profile="$ctrl.profile" state-change-fn="$ctrl.changeState"></amex-card-application>\n    <div ng-if="$ctrl.state === \'AGREEMENT\'" class="amex-card-welcome">\n        <br><br>\n        <h6 ng-if="!$ctrl.profile.lastFourDigits" class="text-center" translate="amex.agreement.text.nocard.1" translate-values="{ \'accountId\': $ctrl.profile.accountId, \'amexId\': $ctrl.profile.amexId, \'registeredSymbol\': \'&reg;\', \'lineBreak\': \'<br>\' }"></h6>\n        <h6 ng-if="$ctrl.profile.lastFourDigits" class="text-center" translate="amex.agreement.text.card.1" translate-values="{ \'accountId\': $ctrl.profile.accountId, \'amexId\': $ctrl.profile.amexId, \'lastFourDigits\': $ctrl.profile.lastFourDigits, \'registeredSymbol\': \'&reg;\', \'lineBreak\': \'<br>\' }"></h6>\n        <br>\n        <hr>\n        <br>\n        <h4 translate="amex.agreement.title" translate-values="{ \'registeredSymbol\': \'&reg;\' }"></h4>\n        <p><strong translate="amex.agreement.subtitle"></strong></p>\n        <br>\n        <hr>\n        <div form-server-errors="$ctrl.getErrors()">\n            <agreement-record record="$ctrl.agreementRecord"></agreement-record>\n        </div>\n    </div>\n    <div ng-if="$ctrl.state === \'DETAILS\'" class="amex-card-welcome">\n        <div class="text-center">\n            <h4 ng-if="$ctrl.profile.lastFourDigits === \'\'" translate="amex.details.text.pending"></h4>\n            <p ng-if="$ctrl.profile.lastFourDigits === \'\'"><strong translate="amex.details.text.nocard.1" translate-values="{ \'accountId\': $ctrl.profile.accountId, \'amexId\': $ctrl.profile.amexId }"></strong></p>\n            <p ng-if="$ctrl.profile.lastFourDigits !== \'\'"><strong translate="amex.details.text.card.1" translate-values="{ \'accountId\': $ctrl.profile.accountId, \'lastFourDigits\': $ctrl.profile.lastFourDigits }"></strong></p>\n            <p class="alert alert-info" translate="amex.details.text.2"></p>\n            <p class="text-secondary" translate="amex.details.text.3" translate-values="{ \'linkStart\': \'<a href=&quot;javascript:void(0);&quot; ng-click=&quot;$ctrl.changeState(\\\'APPLICATION\\\')&quot;>\', \'linkEnd\': \'</a>\' }" translate-compile></p>\n        </div>\n        <br>\n        <p class="text-center text-sm"><a href="javascript:void(0);" translate="amex.details.text.4" ng-click="$ctrl.viewTerms()"></a></p>\n    </div>\n    <div ng-if="$ctrl.state === \'INELIGIBLE\'" class="amex-card-welcome">\n        <h4 class="text-center" translate="amex.ineligible.heading" translate-values="{ registeredSymbol : \'&reg;\', supStart : \'<sup>\', supEnd : \'</sup>\' }"></h4>\n        <br>\n        <p translate="amex.ineligible.text.1" translate-values="{ registeredSymbol : \'&reg;\', supStart : \'<sup>\', supEnd : \'</sup>\' }"></p>\n        <p translate="amex.ineligible.text.2" translate-values="{ registeredSymbol : \'&reg;\', supStart : \'<sup>\', supEnd : \'</sup>\', strongStart: \'<strong>\', strongEnd: \'</strong>\' }"></p>\n        <br>\n        <amex-card-image></amex-card-image>\n        <br>\n        <div class="notes">\n            <p translate="amex.ineligible.notes.1"></p>\n        </div>\n        <br>\n    </div>\n    <div class="alert alert-error" ng-if="$ctrl.state === \'ERROR\'">\n        <p translate="amex.error.text"></p>\n    </div>\n    <br>\n</div>\n<div page-buttons ng-if="$ctrl.state === \'AGREEMENT\'">\n    <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6"></div>\n    <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">\n        <div class="panel-btn-right">\n            <p><am-button on-click="$ctrl.submit()" btn-type="primary" btn-text="{{\'word.submit\' | translate}}" is-disabled="$ctrl.isDisabled()"></am-button></p>\n        </div>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("amexCardApplication",{bindings:{profile:"<",stateChangeFn:"<"},template:n(925),controller:["$translate","ModalService",function(e,t){var n=this;n.$onInit=function(){n.goBack=function(){return n.stateChangeFn(n.profile.signed?"DETAILS":"AGREEMENT")},n.openRedirectionModal=function(){var n={title:e.instant("amex.redirection.modal.title",{registeredSymbol:"&reg;"}),templateUrl:"amex-card-redirection-modal.component",dialogClass:"modal-lg"};t.openModal(n)}}}]})}},function(e,t){e.exports="<div class=\"amex-card-welcome\">\r\n    <h2 class=\"text-center\" translate=\"amex.application.heading\" translate-values=\"{ registeredSymbol : '&reg;' }\"></h2>\r\n    <br>\r\n    <amex-card-image></amex-card-image>\r\n    <br>\r\n    <p ng-if=\"$ctrl.profile.amexId !== ''\" class=\"text-center\">\r\n        <am-button btn-text=\"{{ 'word.goBack' | translate }}\" ng-click=\"$ctrl.goBack()\" btn-type=\"info\" no-resize=\"true\"></am-button>\r\n    </p>\r\n    <br>\r\n    <hr>\r\n    <br>\r\n    <h5 class=\"text-center\" translate=\"amex.application.text.invite\" translate-values=\"{ 'lineBreak': '<br>', 'registeredSymbol' : '&reg;' }\"></h5>\r\n    <p translate=\"amex.application.text.intro\" translate-values=\"{ 'supStart': '<sup>', 'supEnd': '</sup>', 'registeredSymbol' : '&reg;' }\"></p>\r\n    <br>\r\n    <br>\r\n    <div class=\"row\">\r\n        <div class=\"col-12 col-sm-6\">\r\n            <h6 translate=\"amex.application.text.label.cs\"></h6>\r\n            <p translate=\"amex.application.text.desc.cs\"></p>\r\n            <br />\r\n        </div>\r\n        <div class=\"col-12 col-sm-6\">\r\n            <h6 translate=\"amex.application.text.label.travelbenefits\"></h6>\r\n            <p translate=\"amex.application.text.desc.travelbenefits\" translate-values=\"{ 'supStart': '<sup>', 'supEnd': '</sup>' }\"></p>\r\n            <br />\r\n        </div>\r\n        <div class=\"col-12 col-sm-6\">\r\n            <h6 translate=\"amex.application.text.label.limit\"></h6>\r\n            <p translate=\"amex.application.text.desc.limit\"></p>\r\n            <br />\r\n        </div>\r\n        <div class=\"col-12 col-sm-6\">\r\n            <h6 translate=\"amex.application.text.label.rewards\" translate-values=\"{ 'registeredSymbol' : '&reg;', 'supStart': '<sup>', 'supEnd': '</sup>' }\"></h6>\r\n            <p translate=\"amex.application.text.desc.rewards\"></p>\r\n            <br />\r\n        </div>\r\n    </div>\r\n    <br>\r\n    <hr>\r\n    <br>\r\n    <div ng-if=\"$ctrl.profile.amexId === ''\" class=\"text-center\">\r\n        <h4 translate=\"amex.application.text.request\" translate-values=\"{ registeredSymbol : '&reg;' }\"></h4>\r\n        <p><am-button btn-text=\"{{'word.applyNow' | translate}}\" btn-type=\"primary\" on-click=\"$ctrl.openRedirectionModal()\"></am-button></p>\r\n        <br><br>\r\n    </div>\r\n    <div class=\"notes\">\r\n        <p translate=\"amex.application.text.notes.1\" translate-values=\"{ 'strongStart': '<strong>', 'strongEnd': '</strong>' }\"></p>\r\n        <p translate=\"amex.application.text.notes.2\" translate-values=\"{ 'strongStart': '<strong>', 'strongEnd': '</strong>' }\"></p>\r\n        <p translate=\"amex.application.text.notes.3\" translate-values=\"{ 'registeredSymbol' : '&reg;', 'strongStart': '<strong>', 'strongEnd': '</strong>' }\"></p>\r\n        <p translate=\"amex.application.text.notes.4\" translate-values=\"{ 'registeredSymbol' : '&reg;', 'strongStart': '<strong>', 'strongEnd': '</strong>', 'membershipLinkStart': '<a href=&quot;http://www.membershiprewardslac.com&quot; target=&quot;_blank&quot;>', 'pointsLinkStart': '<a href=&quot;http://www.membershiprewards.com/pointsinfo&quot; target=&quot;_blank&quot;>', 'linkEnd': '</a>' }\"></p>\r\n    </div>\r\n    <br>\r\n</div>"},function(e,t,n){e.exports=function(e){e.component("amexCardImage",{template:n(927)})}},function(e,t){e.exports='<p class="text-center">\r\n    <a href="https://www.americanexpress.com/en-idc/acq/landing/index.html?x=1&bank=1591" target="_blank" class="btn btn-primary no-resize" translate="word.learnMore"></a>\r\n</p>\r\n<br><br>\r\n<div class="row">\r\n    <div class="col-12 col-sm-12 col-md-6 col-lg-4 offset-lg-2">\r\n        <h6 class="text-center" translate="amex.application.text.platinum.card" translate-values="{ registeredSymbol : \'&reg;\', supStart : \'<sup>\', supEnd : \'</sup>\' }"></h6>\r\n        <div class="img-card text-center">\r\n            <img src="/images/am/amex-platinum-card.png" alt="American Express International Dollar Card" border="0" />\r\n        </div>\r\n        <br />\r\n        <p class="text-center">\r\n            <span translate="amex.application.text.platinum.fees"></span>\r\n            <br />\r\n            <a href="https://www.americanexpress.com/en-idc/acq/administration/tyc/?product=fde2d022-5ec4-45f0-b33f-49690ee87d6d" target="_blank" translate="amex.application.text.rates"></a>\r\n        </p>\r\n    </div>\r\n    <div class="col-12 col-sm-12 col-md-6 col-lg-4">\r\n        <h6 class="text-center" translate="amex.application.text.gold.card" translate-values="{ registeredSymbol : \'&reg;\', supStart : \'<sup>\', supEnd : \'</sup>\' }"></h6>\r\n        <div class="img-card text-center">\r\n            <img src="/images/am/amex-gold-card.png" alt="American Express International Dollar Card" border="0" />\r\n        </div>\r\n        <br />\r\n        <p class="text-center">\r\n            <span translate="amex.application.text.gold.fees"></span>\r\n            <br />\r\n            <a href="https://www.americanexpress.com/en-idc/acq/administration/tyc/?product=610935a7-6436-4f90-ae54-628a49f6d934" target="_blank" translate="amex.application.text.rates"></a>\r\n        </p>\r\n    </div>\r\n</div>'},function(e,t,n){e.exports=function(e){n(929)(e)}},function(e,t){e.exports=function(e){e.component("assetDetailsReview",{bindings:{assetDetails:"<",showWarning:"@?"},template:function(){var e="";return e+="<am-form-label label-text=\"{{'transfer.label.assetType' | translate}}\" value-text=\"{{'asset.type.' + $ctrl.assetDetails.type | translate}}\"></am-form-label>",e+='<am-form-label label-text="{{\'asset.search.label.description\' | translate}}" value-text="{{$ctrl.assetDetails.description}}"></am-form-label>',e+='<am-form-label ng-if="$ctrl.getExchangeText().label.length" label-text="{{$ctrl.getExchangeText().label}}" value-text="{{$ctrl.getExchangeText().value}}"></am-form-label>',e+='<am-form-label ng-if="assetId.type !== \'CONTRACT_ID\'" ng-repeat="assetId in $ctrl.assetDetails.ids" label-text="{{\'asset.id.\' + assetId.type | translate}}" value-text="{{assetId.id}}"></am-form-label>',e},controller:["$translate",function(e){var t=this;t.$onInit=function(){t.getExchangeText=function(){var n={};return t.assetDetails.exchanges.length>0?(n.label=e.instant("asset.search.label.exchange"),n.value=t.assetDetails.exchanges[0]):""!==t.assetDetails.currencyType&&(n.label=e.instant("asset.search.label.currency"),n.value=t.assetDetails.currencyType),n.label.length>0&&t.showWarning&&(n.label+=" *"),n}}}]})}},function(e,t,n){e.exports=function(e){n(931)(e),n(943)(e),n(946)(e),n(948)(e),n(950)(e),n(951)(e),n(952)(e)}},function(e,t,n){e.exports=function(e){n(932)(e),n(934)(e),n(936)(e),n(938)(e),n(940)(e)}},function(e,t,n){e.exports=function(e){e.component("bankLinkForm",{bindings:{baseBank:"<",bankLink:"=",transferParameters:"<",bankCountryRules:"<"},template:n(933),controller:["$translate","ModalService","BankSearchService","$timeout",function(e,t,n,a){var r=this;r.$onInit=function(){r.openLinkChoice=function(){var a=[];angular.isDefined(r.baseBank.linkData)&&(a=r.baseBank.linkData.links),r.expectedLinkType="CORRESPONDENT",r.baseBank&&r.baseBank.linkData&&r.baseBank.linkData.expectedLinkType&&(r.expectedLinkType=r.baseBank.linkData.expectedLinkType);var i="linkChoiceModal.search.title."+r.expectedLinkType,o={title:e.instant(i),templateUrl:"bank-link-choice-modal.component",modalData:{bankCountryRules:r.bankCountryRules,transferParameters:r.transferParameters,baseBank:r.baseBank,links:a}};t.openModal(o).then(function(e){if(angular.isDefined(e)){r.isLoading=!0;var t="";"INTERMEDIARY"===e.type&&(t=e.ownerBic),n.fetchLinkedBanks(e.account.bank,r.transferParameters,e.type,t).promise.then(function(t){e.account.bank.linkData=t.data}).finally(function(){r.bankLink=e,delete r.bankLink.nextLink,r.isLoading=!1})}})}},r.$onChanges=function(e){if(e.baseBank&&angular.isDefined(e.baseBank.currentValue)){if(angular.isUndefined(r.baseBank.linkData))return;var t=r.baseBank.linkData;if(!t.linkRequired)return;if(angular.isUndefined(t.links))return;if(1===t.links.length&&t.links[0].isSelfClearing)return r.bankLink=t.links[0],void(r.bankLink.autoSelected=!0);a(function(){angular.isUndefined(r.bankLink)&&angular.isDefined(r.openLinkChoice)&&r.openLinkChoice()})}}}]})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.isLoading"></loading-overlay>\r\n<div ng-if="$ctrl.baseBank.linkData.linkRequired && !$ctrl.bankLink.autoSelected">\r\n    <h4>{{\'transfer.heading.bankLink.\' + $ctrl.baseBank.linkData.expectedLinkType | translate}}</h4>\r\n    <p ng-if="!$ctrl.bankLink">\r\n        {{\'bank.search.\' + $ctrl.baseBank.linkData.expectedLinkType + \'.chooseLink\' | translate}}\r\n        <br><br>\r\n    </p>\r\n    <p ng-if="$ctrl.bankLink.isSelfClearing">\r\n        {{\'bank.search.correspondent.chosenSelfClearing\' | translate}}\r\n        <br><br>\r\n    </p>\r\n\r\n    <bank-account-details-review ng-if="$ctrl.bankLink && !$ctrl.bankLink.isSelfClearing" bank-account="$ctrl.bankLink.account"></bank-account-details-review>\r\n    <div class="form-group">\r\n        <div class="row">\r\n            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\r\n                <am-button on-click="$ctrl.openLinkChoice()" no-resize="true" btn-text="{{!$ctrl.bankLink ? \'word.select\' : \'word.change\' | translate}}"></am-button>\r\n                <br><br>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<bank-link-form ng-if="$ctrl.bankLink" base-bank="$ctrl.bankLink.account.bank" bank-link="$ctrl.bankLink.nextLink" transfer-parameters="$ctrl.transferParameters" bank-country-rules="$ctrl.bankCountryRules"></bank-link-form>'},function(e,t,n){e.exports=function(e){e.component("bankSearchError",{bindings:{error:"<",isOverrideAllowed:"&?",overrideOnClick:"&?"},template:n(935),controller:function(){var e=this;e.$onInit=function(){e.isOverrideAllowed=e.isOverrideAllowed||function(){return!1},e.overrideOnClick=e.overrideOnClick||function(){}}}})}},function(e,t){e.exports='<div ng-if="$ctrl.error" class="row">\n    <div class="col-12">\n        <div class="alert alert-danger">{{\'bank.search.error.\' + $ctrl.error | translate}}</div>\n    </div>\n\n    <div ng-if="$ctrl.isOverrideAllowed()">\n        {{\'bank.search.beneficiary.override\' | translate}}&nbsp;\n        <am-button on-click="$ctrl.overrideOnClick()" btn-text="{{\'word.yes\' | translate}}"></am-button>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("bankSelect",{bindings:{banks:"<",onSelect:"<"},template:n(937),controller:function(){var e=this;e.$onInit=function(){e.banks=e.banks||[],e.onSelect=e.onSelect||function(){}}}})}},function(e,t){e.exports='<p>{{\'bank.search.beneficiary.heading\' | translate}}</p>\n<div class="table-responsive">\n    <table width="100%" cellpadding="0" cellspacing="0" border="0" class="table table-hover tablesorter">\n        <thead>\n            <tr>\n                <th width="60%" align="left" valign="middle">{{\'bank.label.bankNameAddress\' | translate}}</th>\n                <th width="40%" align="left" valign="middle">{{\'bank.label.routingNumber\' | translate}}</th>\n            </tr>\n        </thead>\n        <tbody>\n            <tr ng-click="$ctrl.onSelect(bank)" ng-repeat="bank in $ctrl.banks">\n                <td align="left" valign="middle"><strong>{{bank.bankName}}</strong> <br /> <span ng-bind-html="bank.bankAddress | amAddress:\'twoLine\' | renderHTML"></span></td>\n                <td align="left" valign="middle">\n                    <p ng-repeat="routingNumber in bank.routingNumbers | amRoutingNumbers">\n                        {{\'routingNumber.type.\' + routingNumber.routingNumberType | translate}}: {{routingNumber | amRoutingNumber}}\n                    </p>\n                </td>\n            </tr>\n        </tbody>\n    </table>\n</div>'},function(e,t,n){e.exports=function(e){e.component("bankSearchForm",{bindings:{beneficiaryBank:"=",beneficiaryBankLink:"=?",bankCountryRules:"<",transferParameters:"<",beneficiaryChangeRestricted:"<?",isBrokerInstruction:"<?"},template:n(939),controller:["$translate","ModalService","BankSearchService","FundingService","AlphaTestService",function(e,t,n,a,r){var i=this,o=function(e){return angular.isDefined(e)&&null!=e},s=function(e){i.beneficiaryMode=e},l=function(e,t){i.selectedBeneficiaryBank=e,a.injectManualBankFields(i.selectedBeneficiaryBank,i.transferParameters.moneyAmount.currencyType,!1)?s("ADDITIONAL_INFO"):1===t?a.clearManualBankFields(i.selectedBeneficiaryBank):u()},c=function(){var e=i.bankCountryRules;return o(e)?e:{}},u=function(){a.clearManualBankFields(i.selectedBeneficiaryBank),t.closeModal(i.selectedBeneficiaryBank)},d=function(){i.isLoading=!1,i.selectedBeneficiaryBank=void 0,s("NORMAL"),function(){i.criteria={routingOverrideAllowed:c().routingOverrideAllowed,bankCountry:c().country,routingNumbers:[],correspondentBic:""};var e=c().searchRoutingRules;if(o(e))for(var t=0;t<e.length;++t){var n=e[t];i.criteria.routingNumbers[t]={routingNumberType:n.requiredType,shortened:n.shortened}}}(),i.isOverrideAllowed=function(){return"NO_RESULTS"===i.searchError&&i.criteria.routingOverrideAllowed},i.startOver=function(){i.selectedBeneficiaryBank=void 0,i.searchError=void 0,i.beneficiaryBank=void 0,s("NORMAL")},i.setBeneficiaryBank=function(e){i.beneficiaryBank=e,delete i.beneficiaryBankLink},i.performManualEntry=function(){i.selectedBeneficiaryBank={bankName:"",bankAddress:{country:{alpha3:i.criteria.bankCountry.alpha3,isoCode:i.criteria.bankCountry.isoCode}},routingNumbers:[{routingNumber:i.criteria.routingNumbers[0].routingNumber,routingNumberType:i.criteria.routingNumbers[0].routingNumberType,overridden:!0}]},i.fetchLinkedBanks(i.selectedBeneficiaryBank),s("MANUAL")},i.fetchLinkedBanks=function(e){i.isLoading=!0,n.fetchLinkedBanks(e,i.transferParameters,"BENEFICIARY").promise.then(function(t){e.linkData=t.data}).finally(function(){i.setBeneficiaryBank(e),i.isLoading=!1})},i.performSearch=function(){var r;(function(){for(var e=!1,t=0;t<i.criteria.routingNumbers.length;++t){var n=i.criteria.routingNumbers[t].routingNumber;angular.isDefined(n)&&n.length&&(e=!0)}return i.isLoading||!e})()||(r={routingNumbers:function(){for(var e=[],t=0;t<i.criteria.routingNumbers.length;++t){var n=i.criteria.routingNumbers[t];if(!angular.isUndefined(n.routingNumber)&&n.routingNumber.length){var r=a.getUnformattedRoutingNumber(n);e.push({routingNumberType:n.routingNumberType,routingNumber:r})}}return e}(),bankAddress:{}},o(i.criteria.bankCountry)&&(r.bankAddress.country={alpha3:i.criteria.bankCountry.alpha3,isoCode:i.criteria.bankCountry.isoCode}),i.setBeneficiaryBank(void 0),i.searchError="",i.isLoading=!0,i.activeRequest=n.fetchBeneficiaryBanks(r,i.transferParameters),i.activeRequest.promise.then(function(n){var a=n.data.banks;if(angular.isUndefined(a)||!a.length)i.searchError=n.data.resultCode;else if(1===a.length)l(a[0],1),i.fetchLinkedBanks(a[0]);else{var r={title:e.instant("bank.search.title"),templateUrl:"bank-selection-modal.component",modalData:{banks:a,onSelect:l}};t.openModal(r).then(function(e){if(angular.isDefined(e))i.fetchLinkedBanks(e);else for(var t=0;t<i.criteria.routingNumbers.length;++t)i.criteria.routingNumbers[t].routingNumber=""})}},function(e){i.activeRequest.aborted||(i.searchError="INTERNAL_ERROR")}).finally(function(){i.activeRequest=null,i.isLoading=!1}))},s("NORMAL")},p=function(){return{CAD:"CAN",HKD:"HKG",CNH:"HKG",SGD:"SGP"}[i.transferParameters.moneyAmount.currencyType]===i.bankCountryRules.country.alpha3};i.$onInit=function(){i.isLoading=!0,i.removeBankNameSearch=!1,i.beneficiaryBank&&!i.beneficiaryBank.bankAddress&&(i.beneficiaryBank.bankAddress={country:i.bankCountryRules.country}),r.fetch("REGAM-21964").then(function(e){e&&e.data&&e.data.isEnabled&&(i.alphaBankNameSearchRemoval=!0,!p()&&i.alphaBankNameSearchRemoval&&(i.removeBankNameSearch=!0,d()))}).finally(function(){i.isLoading=!1}),i.getSearchButtonText=function(){return i.beneficiaryBank?"DEPOSIT"===i.transferParameters.type?e.instant("bank.search.changeSendingInstitution"):e.instant("bank.search.changeReceivingBank"):e.instant("bank.search.findBank")},i.isInstructionCreationRestricted=function(){return i.isBrokerInstruction&&i.beneficiaryBank&&i.beneficiaryBank.linkData&&"INTERMEDIARY"===i.beneficiaryBank.linkData.expectedLinkType},i.openBankSearch=function(){var a={title:e.instant("bank.search.title"),templateUrl:"bank-search-modal.component",modalData:{bankCountryRules:i.bankCountryRules,transferParameters:i.transferParameters}};t.openModal(a).then(function(e){angular.isDefined(e)&&(i.isLoading=!0,n.fetchLinkedBanks(e,i.transferParameters,"BENEFICIARY").promise.then(function(t){e.linkData=t.data}).finally(function(){var t;t=e,i.beneficiaryBank=t,delete i.beneficiaryBankLink,i.isLoading=!1}))})}},i.$onChanges=function(e){e.bankCountryRules&&angular.isDefined(e.bankCountryRules.previousValue)&&angular.isDefined(e.bankCountryRules.previousValue.country)&&(delete i.beneficiaryBank,delete i.beneficiaryBankLink,i.alphaBankNameSearchRemoval&&(i.removeBankNameSearch=!p(),i.removeBankNameSearch&&d()))}}]})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.isLoading"></loading-overlay>\r\n<h4>{{($ctrl.transferParameters.type === \'DEPOSIT\' ? \'transfer.label.sendingInstitution\' : \'transfer.heading.receivingBank\') | translate}}</h4>\r\n<div ng-if="!$ctrl.removeBankNameSearch">\r\n    <bank-details-review ng-if="$ctrl.beneficiaryBank" bank="$ctrl.beneficiaryBank"></bank-details-review>\r\n    <div ng-if="!$ctrl.beneficiaryChangeRestricted" class="form-group">\r\n        <div class="row">\r\n            <div class="col-6">\r\n                <am-button on-click="$ctrl.openBankSearch()" btn-type="{{!$ctrl.beneficiaryBank ? \'primary\' : \'default\'}}" no-resize="true" btn-text="{{$ctrl.getSearchButtonText()}}"></am-button>\r\n                <am-form-error name="_bankSelection" ng-model="$ctrl.beneficiaryBank" error-prefix="transfer.field.error.beneficiaryBank."></am-form-error>\r\n            </div>\r\n        </div>\r\n        <br>\r\n    </div>\r\n</div>\r\n<div ng-if="$ctrl.removeBankNameSearch">\r\n    <br/>\r\n    <div ng-if="!$ctrl.beneficiaryChangeRestricted" class="form-group">\r\n        <div class="row">\r\n            <div ng-if="$ctrl.beneficiaryMode === \'NORMAL\'" class="col-12">\r\n                <div ng-repeat="routingNumber  in $ctrl.criteria.routingNumbers track by $index">\r\n                    <am-form-routing-number ng-model="routingNumber" name="{{\'routingNumber_\' + $index}}" search-function="$ctrl.performSearch()"></am-form-routing-number>\r\n                </div>\r\n                <bank-search-error ng-if="$ctrl.searchError" error="$ctrl.searchError" is-override-allowed="$ctrl.isOverrideAllowed()" override-on-click="$ctrl.performManualEntry()"></bank-search-error>\r\n                <am-form-error name="_bankSelection" ng-model="$ctrl.beneficiaryBank" error-prefix="transfer.field.error.beneficiaryBank."></am-form-error>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <bank-details-review ng-if="$ctrl.beneficiaryBank && $ctrl.beneficiaryMode === \'NORMAL\'" bank="$ctrl.beneficiaryBank"></bank-details-review>\r\n    \x3c!--\r\n        The customer is manually providing a beneficiary bank.\r\n    --\x3e\r\n    <div ng-show="$ctrl.beneficiaryMode === \'MANUAL\'">\r\n        <p>{{\'bank.search.beneficiary.manualHeading\' | translate}}</p>\r\n        <br />\r\n        <am-form-input ng-model="$ctrl.selectedBeneficiaryBank.bankName" name="beneficiaryBankName" label-text="{{\'bank.label.bankName\' | translate}}" required></am-form-input>\r\n        <am-form-routing-number ng-if="$ctrl.selectedBeneficiaryBank" ng-model="$ctrl.selectedBeneficiaryBank.routingNumbers[0]" name="beneficiaryRoutingNumber" is-required="true"></am-form-routing-number>\r\n        <am-button on-click="$ctrl.startOver()" btn-type="primary" no-resize="true" btn-text="{{\'word.searchAgain\' | translate}}"></am-button>\r\n    </div>\r\n    \x3c!--\r\n        Collect additional information about the beneficiary bank\r\n        from the customer\r\n    --\x3e\r\n    <div ng-show="$ctrl.beneficiaryMode === \'ADDITIONAL_INFO\'" >\r\n        <p>{{\'bank.search.beneficiary.additional.heading\' | translate}}</p>\r\n        <br />\r\n        <bank-details-review bank="$ctrl.selectedBeneficiaryBank"></bank-details-review>\r\n        <am-form-routing-number ng-repeat="routingNumber in ($ctrl.selectedBeneficiaryBank.routingNumbers | filter:{manual:true}) track by $index" ng-model="routingNumber" name="{{\'routingNumber_\' + $index}}" is-required="true"></am-form-routing-number>\r\n        <am-form-input ng-if="$ctrl.selectedBeneficiaryBank.additionalAccountNumber.manual" ng-model="$ctrl.selectedBeneficiaryBank.additionalAccountNumber.accountNumber" name="additionalAccountNumber" type="text" label-text="{{\'bankAccountNumberType.\' + $ctrl.selectedBeneficiaryBank.additionalAccountNumber.accountNumberType | translate}}" input-mask-alias="{{\'bankAccountNumber_\' + $ctrl.selectedBeneficiaryBank.additionalAccountNumber.accountNumberType}}" required></am-form-input>\r\n\r\n        <div ng-if="$ctrl.selectedBeneficiaryBank.bankTaxId.manual">\r\n            <hr />\r\n            <p>{{\'bank.search.beneficiary.taxId\' | translate}}</p>\r\n            <br />\r\n            <am-form-input ng-model="$ctrl.selectedBeneficiaryBank.bankTaxId.idNumber" name="bankTaxId" type="text" label-text="{{\'bank.taxId.type.\' + $ctrl.selectedBeneficiaryBank.bankTaxId.taxIdType | translate}}"></am-form-input>\r\n        </div>\r\n        <am-button on-click="$ctrl.startOver()" btn-type="primary" no-resize="true" btn-text="{{\'word.searchAgain\' | translate}}"></am-button>\r\n    </div>\r\n    <br>\r\n</div>\r\n<bank-link-form ng-if="!$ctrl.isInstructionCreationRestricted()" base-bank="$ctrl.beneficiaryBank" bank-link="$ctrl.beneficiaryBankLink" transfer-parameters="$ctrl.transferParameters" bank-country-rules="$ctrl.bankCountryRules"></bank-link-form>\r\n<p ng-if="$ctrl.isInstructionCreationRestricted()" class="alert alert-danger">{{\'brokerInstruction.intermediaryBankRestriction.warning\' | translate}}</p>'},function(e,t,n){e.exports=function(e){e.component("ibanSearchForm",{bindings:{beneficiaryBankAccount:"<",beneficiaryBankLink:"=?",transferParameters:"<",bankCountryRules:"<",isBrokerInstruction:"<?"},template:n(941),controller:["$translate","BankSearchService","ModalService",function(e,t,a){var r=this,i=n(942),o=function(){r.ibanSearchForm.bankAccountNumber.$setValidity("invalid_iban",!0),r.searchError=""};r.$onInit=function(){r.searchError="",r.isInstructionCreationRestricted=function(){return r.isBrokerInstruction&&r.beneficiaryBankAccount&&r.beneficiaryBankAccount.bank&&r.beneficiaryBankAccount.bank.linkData&&r.beneficiaryBankAccount.bank.linkData.linkRequired&&"INTERMEDIARY"===r.beneficiaryBankAccount.bank.linkData.expectedLinkType},r.deleteBankInformation=function(){delete r.beneficiaryBankLink,delete r.beneficiaryBankAccount.bank},r.onIbanEntered=function(){o(),r.isLoading=!0;var n=r.beneficiaryBankAccount.bankAccountNumber,s=r.bankCountryRules.country;t.fetchIbanBanks(n,s,r.transferParameters).promise.then(function(t){if("FOUND_RESULTS"!==t.data.resultCode)return r.deleteBankInformation(),void(r.searchError=t.data.resultCode);for(var n=t.data.banks[0],o=void 0,s=0;s<n.routingNumbers.length;++s){var l=n.routingNumbers[s];"BIC"===l.routingNumberType&&(o=l)}angular.isDefined(o)&&angular.isDefined(i[o.routingNumber])?a.openModal({title:e.instant("bank.search.confirmReceivingBank"),templateUrl:"iban-bic-confirmation-modal.component",modalData:{bicChoices:i[o.routingNumber]}}).then(function(e){angular.isUndefined(e)||(o.routingNumber=e,r.beneficiaryBankAccount.bank=n)}):r.beneficiaryBankAccount.bank=n,delete r.beneficiaryBankLink}).catch(function(e){r.deleteBankInformation(),r.ibanSearchForm.bankAccountNumber.$setValidity("invalid_iban",!1)}).finally(function(){r.isLoading=!1})}},r.$onChanges=function(e){e.bankCountryRules&&angular.isDefined(e.bankCountryRules.previousValue)&&angular.isDefined(e.bankCountryRules.previousValue.country)&&(r.ibanSearchForm.bankAccountNumber.$setPristine(),o())}}]})}},function(e,t){e.exports='<div ng-form="$ctrl.ibanSearchForm">\r\n    <loading-overlay ng-if="$ctrl.isLoading"></loading-overlay>\r\n\r\n    <am-form-input data-private name="bankAccountNumber" type="text" ng-model="$ctrl.beneficiaryBankAccount.bankAccountNumber.accountNumber" change-listener="$ctrl.onIbanEntered()" label-text="{{\'bankAccountNumberType.IBAN\' | translate}}" input-mask-alias="bankAccountNumber_IBAN" required></am-form-input>\r\n    \r\n    <bank-details-review ng-if="$ctrl.beneficiaryBankAccount.bank" bank="$ctrl.beneficiaryBankAccount.bank"></bank-details-review>\r\n    <bank-link-form ng-if="!$ctrl.isInstructionCreationRestricted()" base-bank="$ctrl.beneficiaryBankAccount.bank" bank-link="$ctrl.beneficiaryBankLink" transfer-parameters="$ctrl.transferParameters" bank-country-rules="$ctrl.bankCountryRules"></bank-link-form>\r\n    <p ng-if="$ctrl.isInstructionCreationRestricted()" class="alert alert-danger">{{\'brokerInstruction.intermediaryBankRestriction.warning\' | translate}}</p>\r\n    <div ng-if="$ctrl.searchError !== \'\'" class="row">\r\n        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\r\n            <div class="alert alert-danger">\r\n                <p>{{\'bank.search.error.\' + $ctrl.searchError | translate}}</p>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'},function(e,t){e.exports={CITIGB2LXXX:[{bic:"CITIGB2LXXX",name:"Citibank N.A. London"},{bic:"CITIGB2LLON",name:"Citibank International Personal Bank London"},{bic:"CITIGB2LJER",name:"Citibank International Personal Bank Jersey"}],CITIJEJXXXX:[{bic:"CITIJEJXXXX",name:"Citibank N.A. Jersey"},{bic:"CITIGB2LJER",name:"Citibank International Personal Bank Jersey"}],MIDLGB22XXX:[{bic:"MIDLGB22XXX",name:"HSBC Bank PLC"},{bic:"MIDLJESHXXX",name:"HSBC Bank PLC, Jersey Branch"}],LOYDGB2LXXX:[{bic:"LOYDGB2LXXX",name:"Lloyds Bank PLC"},{bic:"BOFSGBS1306",name:"Bank of Scotland PLC"}]}},function(e,t,n){e.exports=function(e){n(944)(e)}},function(e,t,n){e.exports=function(e){e.component("yodleeVerification",{bindings:{transferParameters:"<",onStateChange:"<",style:"@?"},template:n(945),controller:["$window","$timeout","USER_PLATFORM","MessageHandlerService","ResourceService",function(t,n,a,r,i){var o=this,s=function(t){angular.isUndefined(t)||("exit"===t.action?(o.yodleeData=t,o.changeVerificationState("ACCOUNT_LOOKUP"),i.create(e.SERVER_PATH+"/Yodlee/Banking",{itemAccountId:t.itemAccountId}).then(function(e){o.doBankingPoll()}).catch(function(e){o.verificationError="GENERAL",o.changeVerificationState("ERROR")})):i.create(e.SERVER_PATH+"/Yodlee/Callback",t))},l=function(n){angular.isDefined(t.yodleeCallback)||(t.yodleeCallback=function(t){var n=t.data;n.hasOwnProperty("code")?function(t){i.create(e.SERVER_PATH+"/Yodlee/Validate",t).then(function(e){s(t)}).catch(function(e){o.verificationError="MAXIMUM_ATTEMPTS",o.changeVerificationState("ERROR")})}(n):s(n)},r.register(n,t.yodleeCallback))};o.$onInit=function(){o.sessionPollCount=0,o.bankingPollCount=0,o.verificationError="",o.traditionalAchAllowed=!1,o.offerTraditional=!1,o.style=o.style||"DEFAULT",o.useTraditional=function(){o.changeVerificationState("TRADITIONAL")},o.changeVerificationState=function(e){o.verificationState=e,o.isLoading="INITIALIZE"===e||"ACCOUNT_LOOKUP"===e,o.offerTraditional=o.traditionalAchAllowed&&"ERROR"===e&&("MAXIMUM_ATTEMPTS"===o.verificationError||"UNAVAILABLE"===o.verificationError),o.onStateChange(o.verificationState,o.yodleeBankAccount)},o.doSessionPoll=function(){i.fetch(e.SERVER_PATH+"/Yodlee/Session").then(function(e){if("SUCCESS"===e.data.status){var a=t.location.protocol+"//"+t.location.host+t.location.pathname,r="locationurl="+encodeURIComponent(a);o.frameSrc=e.data.postUrl,o.frameParams={app:e.data.app,rsession:e.data.rsession,token:e.data.token,redirectReq:!0,extraParams:r},l(o.frameSrc),o.changeVerificationState("READY")}else"PENDING"===e.data.status?++o.sessionPollCount<30?n(o.doSessionPoll,2e3):(o.verificationError="GENERAL",o.changeVerificationState("ERROR")):"FAILURE"===e.data.status&&(o.verificationError="GENERAL",o.changeVerificationState("ERROR"))}).catch(function(e){o.verificationError="UNAVAILABLE",o.changeVerificationState("ERROR")})},o.doBankingPoll=function(){var t={type:o.transferParameters.type,method:o.transferParameters.method,currencyType:o.transferParameters.moneyAmount.currencyType};i.fetch(e.SERVER_PATH+"/Yodlee/Banking",t).then(function(e){"SUCCESS"===e.data.status?(o.yodleeBankAccount={bankAccountNumber:{accountNumberType:"NONE",accountNumber:e.data.accountNumber,substituteAccountNumber:e.data.substituteAcctNumReceived},accountType:e.data.accountType,bank:{bankName:e.data.bankName,routingNumbers:[{routingNumberType:"ABA",routingNumber:e.data.routingNumber}]},finTechVerifyId:e.data.FintechVerifyID},o.changeVerificationState("COMPLETE")):"PENDING"===e.data.status?++o.bankingPollCount<30?n(o.doBankingPoll,2e3):(o.verificationError="GENERAL",o.changeVerificationState("ERROR")):"FAILURE"===e.data.status&&(o.verificationError="GENERAL",o.changeVerificationState("ERROR"))}).catch(function(e){angular.isDefined(e.data.errors)&&("ineligible"===e.data.errors.bank?o.verificationError="INELIGIBLE_BANK":"mismatch"===e.data.errors.title&&(o.verificationError="TITLE_MISMATCH")),""===o.verificationError&&(o.verificationError="GENERAL"),o.changeVerificationState("ERROR")})},o.changeVerificationState("INITIALIZE"),i.create(e.SERVER_PATH+"/Yodlee/Session").then(function(e){o.traditionalAchAllowed=e.data.traditionalAchAllowed,o.doSessionPoll()}).catch(function(e){o.traditionalAchAllowed=e.data.traditionalAchAllowed,o.verificationError="UNAVAILABLE",o.changeVerificationState("ERROR")})},o.$onDestroy=function(){t.yodleeCallback=void 0,r.unregister(o.frameSrc)}}]})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.isLoading"></loading-overlay>\n\n<div ng-if="$ctrl.verificationState === \'READY\'">\n    <load-iframe ng-if="::$ctrl.style === \'DEFAULT\'" url="$ctrl.frameSrc" params="$ctrl.frameParams" method="post" frame-height="500"></load-iframe>\n    <load-iframe ng-if="::$ctrl.style === \'PAGE\'" url="$ctrl.frameSrc" params="$ctrl.frameParams" method="post" page-frame="true"></load-iframe>\n</div>\n\n<div ng-if="$ctrl.verificationState === \'COMPLETE\'">\n    <bank-account-details-review bank-account="$ctrl.yodleeBankAccount"></bank-account-details-review>\n</div>\n\n<div ng-if="$ctrl.verificationState === \'ERROR\'">\n    <div class="row">\n        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n            <div class="alert alert-danger">\n                <p>{{\'thirdPartyBankVerification.error.\' + $ctrl.verificationError | translate}}</p>\n                <p ng-if="$ctrl.offerTraditional">{{\'thirdPartyBankVerification.useTraditional\' | translate}}</p>\n                <br>\n                <am-button ng-if="$ctrl.offerTraditional" btn-type="primary" btn-text="{{\'bankVerificationMethod.TRADITIONAL\' | translate}}" on-click="$ctrl.useTraditional()"></am-button>\n            </div>\n        </div>\n    </div>\n    <div ng-if="$ctrl.verificationError === \'TITLE_MISMATCH\'" class="row">\n        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n            <p translate="thirdPartyBankVerification.mismatchDesc" translate-values="{ break: \'<br>\', strongStart : \'<strong>\', strongEnd: \'</strong>\' }" class="text-center"></p>\n        </div>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("bankAccountInformationForm",{bindings:{bankCountry:"<",beneficiaryBankAccount:"=",beneficiaryBankLink:"=?",transferParameters:"<",instructionRules:"<",isBroker:"<?"},template:n(947),controller:["FundingService",function(e){var t=this,n=function(e){return angular.isDefined(e)&&angular.isDefined(e.alpha3)?e.alpha3:""},a=function(){t.bankCountryRules=e.getBankCountryRules(t.bankCountry,t.instructionRules)},r=function(){return{accountNumberType:t.bankCountryRules.allowedAccountNumberTypes[0],accountNumber:"",accountNumberConfirm:""}};t.$onInit=function(){t.isBroker=t.isBroker||!1,angular.isUndefined(t.beneficiaryBankAccount)&&(t.beneficiaryBankAccount={}),angular.isUndefined(t.beneficiaryBankAccount.bankAccountNumber)&&(t.beneficiaryBankAccount.bankAccountNumber=r()),t.isIbanSearch=function(){return"IBAN"===t.beneficiaryBankAccount.bankAccountNumber.accountNumberType},a()},t.$onChanges=function(e){if(e.bankCountry){a();var i=n(e.bankCountry.previousValue),o=n(e.bankCountry.currentValue);""!==i&&i!==o&&(t.beneficiaryBankAccount.bankAccountNumber=r(),delete t.beneficiaryBankAccount.bank,delete t.beneficiaryBankLink)}}}]})}},function(e,t){e.exports='\x3c!-- Bank Account Type --\x3e\r\n<am-form-select ng-if="$ctrl.instructionRules.accountRules.allowedAccountTypes.length > 0" ng-model="$ctrl.beneficiaryBankAccount.accountType" name="accountType" options="$ctrl.instructionRules.accountRules.allowedAccountTypes" label-text="{{\'transfer.label.bankAccountType\' | translate}}" empty-option-text="{{\'transfer.field.accountType\' | translate}}" option-key="\'bankAccountType.\'" required></am-form-select>\r\n\r\n\x3c!-- Bank Account Number Type --\x3e\r\n<am-form-select ng-show="$ctrl.bankCountryRules.allowedAccountNumberTypes.length > 1" name="accountNumberType" ng-model="$ctrl.beneficiaryBankAccount.bankAccountNumber.accountNumberType" options="$ctrl.bankCountryRules.allowedAccountNumberTypes" label-text="{{!$ctrl.isBroker ? \'transfer.label.bankAccountNumberType\' : \'transfer.label.brokerBankAccountNumberType\' | translate}}" option-key="\'bankAccountNumberType.\'" hide-empty-option="true" required></am-form-select>\r\n\r\n<div ng-if="::$ctrl.instructionRules.beneficiaryChangeRestricted">\r\n    <am-form-label label-text="{{\'bankAccountNumberType.\' + $ctrl.beneficiaryBankAccount.bankAccountNumber.accountNumberType | translate}}" value-text="{{$ctrl.beneficiaryBankAccount.bankAccountNumber | amBankAccountNumber}}"></am-form-label>\r\n    <bank-search-form beneficiary-bank="$ctrl.beneficiaryBankAccount.bank" beneficiary-bank-link="$ctrl.beneficiaryBankLink" transfer-parameters="$ctrl.transferParameters" bank-country-rules="$ctrl.bankCountryRules" beneficiary-change-restricted="$ctrl.instructionRules.beneficiaryChangeRestricted" is-broker-instruction="$ctrl.isBroker"></bank-search-form>\r\n</div>\r\n\r\n<div ng-if="::!$ctrl.instructionRules.beneficiaryChangeRestricted">\r\n    <iban-search-form ng-if="$ctrl.isIbanSearch()" beneficiary-bank-account="$ctrl.beneficiaryBankAccount" beneficiary-bank-link="$ctrl.beneficiaryBankLink" transfer-parameters="$ctrl.transferParameters" bank-country-rules="$ctrl.bankCountryRules" is-broker-instruction="$ctrl.isBroker"></iban-search-form>\r\n    \r\n    <div ng-if="!$ctrl.isIbanSearch()">\r\n        <am-form-bank-account-number bank-account-number="$ctrl.beneficiaryBankAccount.bankAccountNumber" is-broker="$ctrl.isBroker"></am-form-bank-account-number>\r\n        <bank-search-form beneficiary-bank="$ctrl.beneficiaryBankAccount.bank" beneficiary-bank-link="$ctrl.beneficiaryBankLink" transfer-parameters="$ctrl.transferParameters" bank-country-rules="$ctrl.bankCountryRules" beneficiary-change-restricted="$ctrl.instructionRules.beneficiaryChangeRestricted" is-broker-instruction="$ctrl.isBroker"></bank-search-form>\r\n    </div>\r\n</div>\r\n'},function(e,t,n){e.exports=function(e){e.component("amFormBankAccountNumber",{bindings:{bankAccountNumber:"<",isBroker:"<",bank:"<?"},template:n(949),controller:function(){var e=this;e.$onInit=function(){e.hasPrefix=function(){return angular.isDefined(e.bank)&&"HONG_KONG_DOMESTIC"===e.bankAccountNumber.accountNumberType},e.getPrefix=function(){if(e.hasPrefix()&&!angular.isUndefined(e.bank.routingNumbers)){for(var t=void 0,n=0;n<e.bank.routingNumbers.length;++n)if("HONG_KONG"===e.bank.routingNumbers[n].routingNumberType){t=e.bank.routingNumbers[n];break}return angular.isUndefined(t)?"":"("+t.routingNumber.substring(0,3)+") "+t.routingNumber.substring(3)+" -"+String.fromCharCode(160)}},e.isConfirmNeeded=function(){return"IBAN"!==e.bankAccountNumber.accountNumberType&&"CLABE"!==e.bankAccountNumber.accountNumberType},e.accountMask=function(){return e.hasPrefix()?"'mask' : '*{10}', 'placeholder': '', 'definitions': { '*' : { 'validator': '[0-9]' } }":angular.isUndefined(e.bankAccountNumber.accountNumberType)?"'alias': 'bankAccountNumber'":"'alias': 'bankAccountNumber_"+e.bankAccountNumber.accountNumberType+"'"},e.getPlaceHolder=function(){var t=e.bankAccountNumber.accountNumberType;return e.hasPrefix()?"bankAccountNumber.placeholder.NONE":"UNITED_KINGDOM"===t||"HONG_KONG"===t||"NEW_ZEALAND"===t||"SINGAPORE"===t||"HONG_KONG_DOMESTIC"===t?"bankAccountNumber.placeholder."+t:""}}}})}},function(e,t){e.exports='<div data-private ng-if="!$ctrl.hasPrefix() || $ctrl.getPrefix().length > 0">\r\n    <am-form-input name="bankAccountNumber" input-mask="$ctrl.accountMask()" ng-model="$ctrl.bankAccountNumber.accountNumber" type="text" label-text="{{(!$ctrl.isBroker ? \'bankAccountNumberType.\' : \'transfer.label.brokerBankAccount.\') + $ctrl.bankAccountNumber.accountNumberType | translate}}" input-prefix="$ctrl.getPrefix()" ph-text="{{$ctrl.getPlaceHolder() | translate}}" required></am-form-input>\r\n    <am-form-input-confirm ng-if="$ctrl.isConfirmNeeded()" input-mask="$ctrl.accountMask()" name="bankAccountNumberConfirm" ng-model="$ctrl.bankAccountNumber.accountNumberConfirm" confirm-model="$ctrl.bankAccountNumber.accountNumber" label-text="{{\'transfer.label.bankAccountConfirm\' | translate}}" mismatch-error="mismatchAccountNumbers" ph-text="{{$ctrl.getPlaceHolder() | translate}}" input-prefix="$ctrl.getPrefix()"></am-form-input-confirm>\r\n</div>'},function(e,t){e.exports=function(e){e.component("bankDetailsReview",{bindings:{bank:"<",hideAddress:"<?",hideRequestReviewInfo:"<"},template:function(){var e="";return e+='<am-form-label data-private ng-if="$ctrl.bank.bankName.length" label-text="{{\'bank.label.bankName\' | translate}}" value-text="{{$ctrl.bank.bankName}}"></am-form-label>',e+='<am-form-label ng-if="!$ctrl.hideAddress && $ctrl.bank.bankAddress.country.isoCode && !$ctrl.hideRequestReviewInfo" data-private ng-if="$ctrl.bank.bankAddress.country.isoCode" label-text="{{\'bank.label.bankAddress\' | translate}}" value-text="{{$ctrl.bank.bankAddress | amAddress}}"></am-form-label>',e+='<div ng-if="!routingNumber.manual" ng-repeat="routingNumber in $ctrl.bank.routingNumbers | amRoutingNumbers">',e+='   <routing-number-review routing-number="routingNumber"></routing-number-review>',e+="</div>",e+='<div data-private ng-if="$ctrl.bank.bankTaxId && $ctrl.bank.bankTaxId.idNumber && $ctrl.bank.bankTaxId.idNumber.length && !$ctrl.bank.bankTaxId.manual">',e+='   <am-form-label label-text="{{\'bank.taxId.type.\' + $ctrl.bank.bankTaxId.taxIdType | translate}}" value-text="{{$ctrl.bank.bankTaxId.idNumber}}"></am-form-label>',e+="</div>",e+='<div data-private ng-if="$ctrl.bank.additionalAccountNumber && !$ctrl.bank.additionalAccountNumber.manual">',e+='   <am-form-label label-text="{{\'bankAccountNumberType.\' + $ctrl.bank.additionalAccountNumber.accountNumberType | translate}}" value-text="{{$ctrl.bank.additionalAccountNumber.accountNumber}}"></am-form-label>',e+="</div>",e},controller:function(){var e=this;e.$onInit=function(){e.hideAddress=e.hideAddress||!1}}}),e.component("bankAccountDetailsReview",{bindings:{bankAccount:"<",hideBankAddress:"<?",hideRequestReviewInfo:"<"},controller:["$translate","amBankAccountNumberFilter",function(e,t){var n=this;n.$onInit=function(){n.getBankAccountNumText=function(){var a=t(n.bankAccount.bankAccountNumber);return n.bankAccount.bankAccountNumber.substituteAccountNumber&&(a+="<br>",a+='<p class="text-small text-gray margin-top-10"><i class="fa fa-lg fa-info-circle"></i>',a+=e.instant("jpmSubstituteAcctWarning",{strongStart:"<strong>",strongEnd:"</strong>",lineBreak:"<br>"}),a+="</p>"),a}}}],template:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return template='<bank-details-review bank="$ctrl.bankAccount.bank" hide-address="$ctrl.hideBankAddress" hide-request-review-info="$ctrl.hideRequestReviewInfo"></bank-details-review>',template+='<div data-private ng-if="$ctrl.bankAccount.accountTaxId && $ctrl.bankAccount.accountTaxId.idNumber && $ctrl.bankAccount.accountTaxId.idNumber.length">',template+='   <am-form-label label-text="{{\'taxId.type.\' + $ctrl.bankAccount.accountTaxId.taxIdType | translate}}" value-text="{{$ctrl.bankAccount.accountTaxId.idNumber}}"></am-form-label>',template+="</div>",template+='<div data-private ng-if="$ctrl.bankAccount.accountTitle.length">',template+='   <am-form-label label-text="{{\'bank.label.bankAccountTitle\' | translate}}" value-text="{{$ctrl.bankAccount.accountTitle}}"></am-form-label>',template+="</div>",template+='<div data-private ng-if="$ctrl.bankAccount.accountAddress">',template+='   <am-form-label label-text="{{\'bank.label.bankAccountAddress\' | translate}}" value-text="{{$ctrl.bankAccount.accountAddress | amAddress}}"></am-form-label>',template+="</div>",template+='<div data-private ng-if="$ctrl.bankAccount.bankAccountNumber.accountNumber.length && !$ctrl.bankAccount.bankAccountNumber.manual">',template+='   <am-form-label ng-if="$ctrl.bankAccount.bankAccountNumber.accountNumberPrefix.length" label-text="{{\'bankAccountNumberPrefix.optional\' | translate}}" value-text="{{$ctrl.bankAccount.bankAccountNumber.accountNumberPrefix}}"></am-form-label>',template+='   <am-form-label label-text="{{\'bankAccountNumberType.\' + $ctrl.bankAccount.bankAccountNumber.accountNumberType | translate}}" value-is-html="true" value-text="$ctrl.getBankAccountNumText()"></am-form-label>',template+="</div>",template+="<div data-private ng-if=\"$ctrl.bankAccount.accountType && $ctrl.bankAccount.accountType !== 'UNSPECIFIED' && !$ctrl.hideRequestReviewInfo\">",template+="   <am-form-label label-text=\"{{'bank.label.bankAccountType' | translate}}\" value-text=\"{{'bankAccountType.' + $ctrl.bankAccount.accountType | translate}}\" ></am-form-label>",template+="</div>",template})}),e.component("bankLinkReview",{bindings:{bankLink:"<"},template:function(){var e="";return e+="<p><strong>{{'bankLinkType.' + $ctrl.bankLink.type | translate}}</strong></p>",e+='<div class="margin-top-10"></div>',e+='<bank-account-details-review bank-account="$ctrl.bankLink.account"></bank-account-details-review>',e+='<bank-link-review ng-if="$ctrl.bankLink.nextLink && $ctrl.showNextLink()" bank-link="$ctrl.bankLink.nextLink"></bank-link-review>',e},controller:["FundingService",function(e){var t=this;t.$onInit=function(){t.showNextLink=function(){return!t.bankLink||"INTERMEDIARY"!==t.bankLink.type||e.shouldDisplayCorrespondent(t.bankLink)}}}]}),e.component("routingNumberReview",{bindings:{routingNumber:"<"},template:'<am-form-label data-private label-text="{{\'routingNumber.type.\' + $ctrl.routingNumber.routingNumberType | translate}}" value-text="{{$ctrl.routingNumberDisplay()}}"></am-form-label>',controller:["FundingService",function(e){var t=this;t.$onInit=function(){t.routingNumberDisplay=function(){return e.getFormattedRoutingNumber(t.routingNumber)}}}]})}},function(e,t){e.exports=function(e){e.component("amFormRoutingNumber",{require:{modelCtrl:"ngModel",parentForm:"^^?form"},bindings:{routingNumber:"=ngModel",inputName:"@?name",isRequired:"<?",searchFunction:"&?"},template:function(){return'<am-form-input data-private name="{{$ctrl.inputName}}" ng-model="$ctrl.routingNumber.routingNumber" type="text" label-text="{{\'routingNumber.type.\' + $ctrl.routingNumber.routingNumberType | translate}}" input-mask="$ctrl.getRoutingMask()" ph-text="{{$ctrl.getRoutingPh()}}" is-required="$ctrl.isRequired" change-listener="$ctrl.searchFunction()"></am-form-input>'},controller:["FundingService","$translate",function(e,t){this.$onInit=function(){this.getRoutingMask=function(){return"BIC"===this.routingNumber.routingNumberType&&this.routingNumber.shortened?"'alias': 'routing_BIC8'":"'alias': 'routing_"+this.routingNumber.routingNumberType+"'"},this.getRoutingPh=function(){return"BIC"===this.routingNumber.routingNumberType&&this.routingNumber.shortened?t.instant("routingNumber.placeholder.BIC8"):t.instant("routingNumber.placeholder."+this.routingNumber.routingNumberType)}}}]})}},function(e,t,n){e.exports=function(e){e.component("amFormThirdPartyBankVerification",{bindings:{beneficiaryBankAccount:"=",instructionParameters:"<",transferParameters:"<"},template:n(953),controller:["$translate","ModalService",function(e,t){var n=this;n.$onInit=function(){angular.isUndefined(n.beneficiaryBankAccount)&&(n.beneficiaryBankAccount={}),n.openBankVerification=function(){var a={title:e.instant("modal.title.VerifyBankAccount"),modalData:{pendingText:e.instant("yodlee.confirm.credentials"),noSuccessScreen:!0}};t.openConfirmModal(a).then(function(e){"SUCCESS"===e&&n.thirdPartyVerification()})},n.thirdPartyVerification=function(){var a={title:e.instant("modal.title.VerifyBankAccount"),templateUrl:"third-party-bank-verification-modal.component",modalData:{transferParameters:n.transferParameters}};t.openModal(a).then(function(e){angular.isUndefined(e)||("TRADITIONAL"!==e?(n.bankVerificationForm.$setValidity("isBankValid",!0),n.beneficiaryBankAccount.bankAccountNumber=e.bankAccountNumber,n.beneficiaryBankAccount.accountType=e.accountType,n.beneficiaryBankAccount.bank=e.bank,n.beneficiaryBankAccount.finTechVerifyId=e.finTechVerifyId):n.instructionParameters.verificationMethod="TRADITIONAL")})}},n.$postLink=function(){n.bankVerificationForm.$setValidity("isBankValid",!1)}}]})}},function(e,t){e.exports='<div ng-form="$ctrl.bankVerificationForm">\r\n    <div ng-if="!$ctrl.beneficiaryBankAccount.bankAccountNumber.accountNumber">\r\n        <div class="row">\r\n            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\r\n                <div class="alert alert-warning">\r\n                    <ul>\r\n                        <li>{{\'thirdPartyBankVerification.matchingTitleRequirement\' | translate}}</li>\r\n                        <li>{{\'thirdPartyBankVerification.disclaimer.verifyBank\' | translate}}</li>\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <div class="row">\r\n                <div class="col-6">\r\n                    <am-button on-click="$ctrl.openBankVerification()" btn-type="primary" btn-size="large" no-resize="true" btn-text="{{\'thirdPartyBankVerification.verifyBankAccount\' | translate}}"></am-button>\r\n                    <am-form-error name="_bankSelection" ng-model="$ctrl.beneficiaryBank" error-prefix="transfer.field.error.thirdPartyBankVerification.beneficiaryBank."></am-form-error>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div ng-if="$ctrl.beneficiaryBankAccount.bankAccountNumber.accountNumber">\r\n        <bank-account-details-review ng-if="$ctrl.beneficiaryBankAccount.bankAccountNumber.accountNumber" bank-account="$ctrl.beneficiaryBankAccount"></bank-account-details-review>\r\n        <div class="form-group">\r\n            <div class="row">\r\n                <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4">\r\n                    <am-button on-click="$ctrl.openBankVerification()" no-resize="true" btn-text="{{\'bank.search.changeReceivingBank\' | translate}}"></am-button>\r\n                </div>\r\n            </div>\r\n            <br />\r\n        </div>\r\n    </div>\r\n</div>'},function(e,t,n){e.exports=function(e){n(955)(e)}},function(e,t){e.exports=function(e){e.component("brokerAccountReview",{bindings:{brokerAccount:"<",instructionType:"<?"},template:function(){var e="";return e+='<div ng-if="$ctrl.brokerAccount.broker.brokerName">',e+="   <am-form-label label-text=\"{{($ctrl.isAssetTransfer ? 'transfer.label.brokerName' : 'broker.label.brokerName' | translate)}}\" value-text=\"{{$ctrl.getBrokerName()}}\"></am-form-label>",e+="</div>",e+='<div ng-if="$ctrl.brokerAccount.broker.brokerAddress.street1 && !($ctrl.isAssetTransfer)">',e+='   <am-form-label label-text="{{\'broker.label.brokerAddress\' | translate}}" value-text="{{$ctrl.brokerAccount.broker.brokerAddress | amAddress}}"></am-form-label>',e+="</div>",e+='<div ng-if="$ctrl.brokerAccount.broker.brokerAddress.country && $ctrl.isAssetTransfer">',e+="    <am-form-label label-text=\"{{'broker.label.financialInstitutionCountry' | translate}}\" value-text=\"{{('country.' + $ctrl.brokerAccount.broker.brokerAddress.country.alpha3) | translate}}\"></am-form-label>",e+="</div>",e+='<div ng-if="$ctrl.brokerAccount.accountNumber">',e+='   <am-form-label label-text="{{(\'broker.label.\' + $ctrl.brokerAccount.accountNumberType) | translate}}" value-text="{{$ctrl.brokerAccount.accountNumber}}"></am-form-label>',e+="</div>",e+='<div ng-if="$ctrl.brokerAccount.accountTitle">',e+="   <am-form-label label-text=\"{{($ctrl.isAssetTransfer ? 'broker.label.financialInstitutionAccountTitle' : 'broker.label.brokerAccountTitle' | translate)}}\" value-text=\"{{$ctrl.brokerAccount.accountTitle}}\"></am-form-label>",e+="</div>",e+='<div ng-if="$ctrl.brokerAccount.accountTaxId && !($ctrl.isAssetTransfer) && !($ctrl.isSrnAuTransfer)">',e+='   <am-form-label label-text="{{\'broker.label.brokerAccountTaxId\' | translate}}" value-text="{{$ctrl.brokerAccount.accountTaxId.idNumber | amFieldMask}}"></am-form-label>',e+="</div>",e+="<div ng-if=\"$ctrl.brokerAccount.accountType && $ctrl.brokerAccount.accountType != 'NOT_INFORMED'\">",e+="   <am-form-label label-text=\"{{'broker.label.brokerAccountType' | translate}}\" value-text=\"{{'brokerAccount.type.' + $ctrl.brokerAccount.accountType | translate}}\"></am-form-label>",e+="</div>",e},controller:function(){var e=this;e.$onInit=function(){e.getBrokerName=function(){return angular.isDefined(e.brokerAccount.broker.brokerId)&&e.brokerAccount.broker.brokerId.length>0?e.brokerAccount.broker.brokerName+" (#"+e.brokerAccount.broker.brokerId+")":e.brokerAccount.broker.brokerName},e.isAssetTransfer="ASSET"===e.instructionType,e.isSrnAuTransfer="SRN_NUMBER"===e.brokerAccount.accountNumberType}}})}},function(e,t,n){e.exports=function(e){n(957)(e),n(959)(e),n(960)(e)}},function(e,t,n){e.exports=function(e){e.component("brokerGiftSharesAssetSelection",{require:{$itemManipulator:"^^amItemManipulator",$brokerGiftSharesTransferForm:"^^brokerGiftSharesTransferForm"},template:n(958),controller:["FundingService",function(e){var t=this;t.selectedAsset=void 0;var n=function(n){for(var a=0;a<n.entries.length;++a){var r=n.entries[a],i=e.getConId(r.details),o=e.getAssetId(r.details,"SYMBOL");void 0!=t.selectedAsset&&i===t.selectedAsset&&(n.entries[a].isSelected=!0),n.entries[a].conId=i,n.entries[a].symbol=o}};t.$onInit=function(){t.parameters=t.$brokerGiftSharesTransferForm.transferParameters,t.showPositionTable=function(){return t.$itemManipulator.entries.length>0||(e=t.$itemManipulator.getFilterService(),!angular.isUndefined(e)&&!angular.isUndefined(e.filters.positionText)&&e.filters.positionText.enabled);var e},t.assetSelected=function(e){t.$brokerGiftSharesTransferForm.onAssetSelect(e)},t.$itemManipulator.itemHooks.load.push(n),t.$itemManipulator.itemHooks.update.push(n);var e={accountId:t.parameters.pabAccount,transferParameters:{type:t.parameters.type,method:t.parameters.method}};t.$itemManipulator.itemControl.load(e)}}]})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.$itemManipulator.loadInProgress"></loading-overlay>\n<div align="center">\n    <am-form-label label-text="{{\'brokerGiftShares.assetSelection.pabLabel\' | translate}}: " value-text="<span><strong>{{$ctrl.parameters.pabAccount}}</strong></span>"></am-form-label>\n</div>\n<div class="row padding-top-15" ng-if="!$ctrl.$itemManipulator.loadInProgress && !$ctrl.showPositionTable()">\n    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n        <div class="alert alert-warning">\n            <p>{{\'transfer.noPositions\' | translate}}</p>\n        </div>\n    </div>\n</div>\n\n<div class="form-group padding-top-15" ng-if="$ctrl.showPositionTable()">\n    <div class="row" ng-if="$ctrl.$itemManipulator.entries.length > 0">\n        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n            <div class="alert alert-info">\n                <p translate="transfer.position.positionBalances.brokergiftshares.filtered" translate-values="{ strongStart : \'<strong>\', strongEnd : \'</strong>\' }"></p>\n            </div>\n        </div>\n    </div>\n\n    <div class="row padding-top-15">\n        <div class="col-xs-12 col-sm-12 col-md-3 col-lg-3">\n            <freeform-text-filter filter-id="positionText" placeholder-key-prefix="data.filter.option.placeholder."></freeform-text-filter>\n            <br>\n        </div>\n    </div>\n\n    <div class="row">\n        \n        <div ng-if="$ctrl.$itemManipulator.entries.length > 0" class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n            <table width="100%" cellpadding="0" cellspacing="0" border="0" class="table">\n                <thead>\n                    <tr>\n                        <th width="5%">&nbsp;</th>\n                        <th width="15%" align="left">{{\'transfer.label.availableQuantity\' | translate}}</th>\n                        <th width="20%" align="left">{{\'asset.search.label.assetType\' | translate}}</th>\n                        <th width="35%" align="left">{{\'asset.search.label.description\' | translate}}</th>\n                        <th align="left">{{\'asset.search.label.identifiers\' | translate}}</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    <tr ng-repeat="asset in $ctrl.$itemManipulator.entries" ng-class="{ \'active\' : $ctrl.selectedAsset === asset.conId }">\n                        <td align="center">\n                            <input name="assetRadio" ng-change="$ctrl.assetSelected(asset)" ng-model="$ctrl.selectedAsset" type="radio" value="{{asset.conId}}" i-check />\n                        </td>\n                        <td align="left">{{asset.availableQuantity}}</td>\n                        <td align="left">{{\'asset.type.\' + asset.details.type | translate}}</td>\n                        <td align="left">{{asset.details.description}}</td>\n                        <td align="left"><position-id-review position-details="asset.details"></position-id-review></td>\n                    </tr>\n                </tbody>\n            </table>\n            <br>\n            <pagination-controls></pagination-controls>\n        </div>\n    </div>\n</div>'},function(e,t){e.exports=function(e){e.component("brokerGiftSharesCsvUploadButton",{bindings:{updateTransferData:"<?",totalAvailableQuantity:"<",buttonText:"@?"},template:'<am-button btn-text="{{$ctrl.buttonText}}" on-click="$ctrl.openCsvUploadModal()"></am-button>',controller:["$translate","ModalService",function(e,t){var n=this;n.$onInit=function(){n.buttonText=n.buttonText||e.instant("partial.upload.csvButton"),n.openCsvUploadModal=function(){var a={title:e.instant("partial.upload.title"),templateUrl:"broker-gift-shares-csv-upload-modal.component",modalData:{totalAvailableQuantity:n.totalAvailableQuantity}};t.openModal(a).then(function(e){angular.isDefined(e)&&n.updateTransferData(e)})}}}]})}},function(e,t,n){e.exports=function(e){e.component("brokerGiftSharesHistoryPage",{require:{$itemManipulator:"^^amItemManipulator"},template:n(961),controller:["ModalService","$translate",function(e,t){var n=this;n.$onInit=function(){n.showPositionTable=function(){return n.$itemManipulator.entries.length>0},n.openCsvUploadModal=function(n){var a={title:t.instant("brokerGiftShares.showHistory.modalTitle"),templateUrl:"broker-gift-shares-history-modal.component",modalData:{retailRequestId:n.id,fromAccount:n.accountId,symbol:n.transferParameters.symbol,data:n.transferParameters.transferData,state:n.state}};e.openModal(a)},n.getAlertClass=function(e){return"REJECTED"===e?"alert alert-danger":"PROCESSED"===e?"alert alert-success":"alert alert-gray"},n.getStatus=function(e){return"ACKNOWLEDGED"===e.state&&angular.isDefined(e.transferParameters.futureProcessingDate)&&e.transferParameters.futureProcessingDate.length>0?"REQUESTED (Will be processed on "+e.transferParameters.futureProcessingDate+" when settled positions are expected)":e.state},n.$itemManipulator.itemControl.load()}}]})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.$itemManipulator.loadInProgress"></loading-overlay>\n<div class="row" ng-if="!$ctrl.$itemManipulator.loadInProgress && !$ctrl.showPositionTable()">\n    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n        <div class="alert alert-warning">\n            <p>{{\'brokerGiftShares.history.noRequests\' | translate}}</p>\n        </div>\n    </div>\n</div>\n\n<div class="form-group" ng-if="$ctrl.showPositionTable()">\n    <div class="row" ng-if="$ctrl.$itemManipulator.entries.length > 0">\n        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n            <div class="alert alert-info">\n                <p translate="brokerGiftShares.history.pageTitle" translate-values="{ strongStart : \'<strong>\', strongEnd : \'</strong>\' }"></p>\n            </div>\n        </div>\n    </div>\n    \n    <div class="row padding-top-15">\n        <div ng-if="$ctrl.$itemManipulator.entries.length > 0" class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n            <table width="100%" cellpadding="0" cellspacing="0" border="0" class="table">\n                <thead>\n                    <tr>\n                        <th width="15%" align="center">{{\'brokerGiftShares.history.columnHeader.requestId\' | translate}}</th>\n                        <th width="20%" align="center">{{\'brokerGiftShares.history.columnHeader.whenRequested\' | translate}}</th>\n                        <th width="20%" align="center">{{\'brokerGiftShares.history.columnHeader.whenProcessed\' | translate}}</th>\n                        <th width="15%" align="center">{{\'brokerGiftShares.history.columnHeader.numClients\' | translate}}</th>\n                        <th width="15%" align="center">{{\'brokerGiftShares.history.columnHeader.status\' | translate}}</th>\n                        <th align="center">{{\'brokerGiftShares.history.columnHeader.viewDetails\' | translate}}</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    <tr ng-repeat="request in $ctrl.$itemManipulator.entries">\n                        <td align="center">{{request.id}}</td>\n                        <td align="center">{{request.requestTime}}</td>\n                        <td align="center">{{request.processedTime}}</td>\n                        <td align="center">{{request.transferParameters.transferData.length}}</td>\n                        <td align="center"  ng-class="$ctrl.getAlertClass(request.state)">{{$ctrl.getStatus(request) | translate}}</td>\n                        <td align="center">\n                            <am-button btn-type="icon" btn-icon="fa-eye" tooltip-text="{{\'word.info\' | translate}}" tooltip-side="right" on-click="$ctrl.openCsvUploadModal(request)"></am-button>\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n            <br>\n            <pagination-controls></pagination-controls>\n        </div>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){n(963)(e),n(965)(e),n(967)(e),n(969)(e),n(971)(e),n(973)(e),n(975)(e),n(977)(e),n(979)(e),n(308)(e)}},function(e,t,n){e.exports=function(e){e.component("cashBalanceLabel",{bindings:{amount:"<",currency:"<",isFetching:"<",balanceKey:"@",explanation:"<?"},template:n(964),controller:["$translate","currencyFilter","ModalService","AlphaTestService",function(e,t,n,a){var r=this;r.explain=function(){r.isShowExplanation()&&n.openModal({title:e.instant("balance.account.explanation.title"),dialogClass:"modal-xl modal-dialog-scrollable",templateUrl:"withdrawable-amount-explanation.component",modalData:{details:r.explanation}})},r.getBalanceText=function(){var n="<span class='"+(r.amount>0?"text-success":"text-danger")+"'>"+t(r.amount,r.currency+" ")+"</span>";if(r.isShowExplanation()){var a=e.instant("balance.account.explanation.tooltip"),i='<a> <i class="hidden-xs hidden-sm fa-question-circle fa btn-icon" data-toggle="tooltip" data-placement="top" title="'+a+'"></i></a>';n+=i+='<p class="hidden-md hidden-lg"><a>'+a+"</a></p>"}return n},r.$onInit=function(){r.isAlphaEnabledForExplanation=!1,a.fetch("CASHIERSYS-1739").then(function(e){e&&e.data&&e.data.isEnabled&&(r.isAlphaEnabledForExplanation=!0)})},r.isShowExplanation=function(){return r.isAlphaEnabledForExplanation&&r.explanation&&r.explanation.showClient()}}]})}},function(e,t){e.exports='<am-form-label ng-if="$ctrl.isFetching" label-text="{{$ctrl.balanceKey | translate}}" value-text="" value-icon="fa-spinner fa-spin"></am-form-label>\r\n<am-form-label ng-click="$ctrl.explain()" ng-if="!$ctrl.isFetching" label-text="{{$ctrl.balanceKey | translate}}" value-text="$ctrl.getBalanceText()" value-is-html="true"></am-form-label>'},function(e,t,n){e.exports=function(e){e.component("cashMethodChoice",{bindings:{transferType:"<",transferMethod:"<",transferCurrency:"<",ibEntity:"<",isLite:"<",showDebitCardHold:"<",onClick:"&"},template:n(966),controller:["$translate","ACTIVE_CONTEXT","ApplicationContext","CashMethodTextService","FundingService","ModalService","NavigationService","NavigationAction",function(e,t,n,a,r,i,o,s){var l=this;l.$onInit=function(){l.isWebsiteContext=t===n.WEBSITE,l.isLite=l.isLite||!1,l.showDebitCardHold=l.showDebitCardHold||!1,l.shouldDisplayNewAchText=function(){return"USD"===l.transferCurrency&&"DEPOSIT"===l.transferType&&"ACH"===l.transferMethod},l.shouldDisplayNewAchText()?l.overriddenTransferMethod="ACH_BANK_LINKAGE":l.overriddenTransferMethod=l.transferMethod,l.getButtonText=function(){return l.isWebsiteContext?e.instant("cashMethod.button.websiteUseThis"):a.getButtonText(l.transferType,l.overriddenTransferMethod)},l.getButtonClass=function(){var e="w-100";return l.isWebsiteContext&&(e+=" btn-outline"),e},l.getButtonType=function(){return l.isWebsiteContext?"primary":"default"},l.onClickTransactionMethod=function(){"MOBILE_CHECK"===l.transferMethod?l.navigateToIbkrMobileGuide():l.onClick()},l.navigateToIbkrMobileGuide=function(){o.setNavigationValidator(void 0),o.navigate({path:"https://ibkr.info/node/3427",navigateAction:s.POPUP})},l.view=function(){var e=l.shouldDisplayNewAchText()?"ach-vs-rfp-info.component":"cash-method-info.component",t={type:l.transferType,method:l.overriddenTransferMethod,currency:l.transferCurrency,ibEntity:l.ibEntity,isLite:l.isLite,showDebitCardHold:l.showDebitCardHold},n={title:l.getMethodName(),dialogClass:"modal-lg",templateUrl:e,modalData:t};i.openModal(n)},l.getMethodName=function(){var e={type:l.transferType,method:l.overriddenTransferMethod,moneyAmount:{currencyType:l.transferCurrency}};return a.getMethodDisplayName(e,l.ibEntity)},l.getMethodDetails=function(){return a.getMethodDetailsText(l.transferType,l.overriddenTransferMethod,l.transferCurrency)},l.getSpeedText=function(){return a.getSpeedText(l.transferType,l.transferCurrency,l.overriddenTransferMethod,l.isLite,l.ibEntity)},l.getFeesText=function(){return a.getFeesText(l.transferType,l.overriddenTransferMethod,l.transferCurrency)},l.getStepsText=function(){return a.getStepsText(l.transferType,l.overriddenTransferMethod,l.transferCurrency)},l.isIraNotification=function(){return r.isIraNotification(l.transferMethod)}}}]})}},function(e,t){e.exports='<div class="fund-method">\n    <div class="row">\n        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n            <div class="row align-items-center">\n                <div class="col-xs-12 col-sm-12 col-md-8 col-lg-9">\n                    <h3>{{$ctrl.getMethodName()}}</h3>\n                    <p>{{$ctrl.getMethodDetails()}}</p>\n                </div>\n                <div class="col-xs-12 col-sm-12 col-md-4 col-lg-3">\n                    <p><am-button btn-class="{{$ctrl.getButtonClass()}}" btn-type="{{$ctrl.getButtonType()}}" btn-text="{{$ctrl.getButtonText()}}" on-click="$ctrl.onClickTransactionMethod()"></am-button></p>\n                </div>\n            </div>\n        </div>\n    </div>\n    <hr ng-if="!$ctrl.isIraNotification()" />\n    <div class="row" ng-if="!$ctrl.isIraNotification()">\n        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4">\n            <fund-method-summary field-text="$ctrl.getSpeedText()">\n                <div ng-if="$ctrl.transferType === \'DEPOSIT\' && $ctrl.transferMethod !== \'MOBILE_CHECK\'">\n                    <br/>\n                    <a href="javascript:void(0);" class="text-small" target="_self" ng-click="$ctrl.view()" translate="word.moreInformation"></a>\n                </div>\n            </fund-method-summary>\n        </div>\n        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4">\n            <fund-method-summary field-text="$ctrl.getFeesText()"></fund-method-summary>\n        </div>\n        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4">\n            <fund-method-summary field-text="$ctrl.getStepsText()"></fund-method-summary>\n        </div>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("cashMethodHeading",{bindings:{transferParameters:"<",isUnmappedDeposit:"<?",instruction:"<?",cryptoProvider:"<?"},template:n(968),controller:["$translate","FundingService","FundingFaqService","NavigationService",function(e,t,n,a){var r=this,i=function(){var e=r.transferParameters.method;return angular.isDefined(r.instruction)&&"WISE"===r.instruction.instructionType?"WISE_TRANSFER":-1!==e.indexOf("WIRE")||-1!==e.indexOf("NEFT")||-1!==e.indexOf("RTGS")?"WIRE":-1!==e.indexOf("CHECK")?"CHECK":-1!==e.indexOf("ACH")||-1!==e.indexOf("SEPA")||-1!==e.indexOf("LVP")||-1!==e.indexOf("EFT")?"ACH":-1!==e.indexOf("BILL")||-1!==e.indexOf("BPAY")?"BILLPAY":r.isPea()?"PEA."+r.transferParameters.operationType:e};r.$onInit=function(){r.getHeadingText=function(){var t="cashTransfer.headingText."+i()+"."+r.transferParameters.type,n=e.instant(t);if(n!==t)return n;if("CRYPTO_CASH_TRANSFER"===r.transferParameters.method){var a="cashTransfer.headingText."+r.cryptoProvider+"."+i()+"."+r.transferParameters.type,o=e.instant(a);if(o!==a)return o}return e.instant("cashTransfer.headingText."+r.transferParameters.type)},r.getProcessText=function(){if("EDDA"===i()&&angular.isDefined(r.instruction))return e.instant("cashTransfer.processText.EDDA.savedInstruction.DEPOSIT");var t="cashTransfer.processText."+i()+"."+r.transferParameters.type,n=e.instant(t);return n!==t?n:e.instant("cashTransfer.processText."+r.transferParameters.type)},r.goToTransactionHistory=function(){a.menuNavigate("TransactionHistory")},r.isWireDeposit=function(){return"WIRE"===i()&&"DEPOSIT"===r.transferParameters.type},r.isWiseDeposit=function(){return t.isWiseMethod(r.transferParameters.method)&&"DEPOSIT"===r.transferParameters.type},r.isCheckDeposit=function(){return"CHECK"===i()&&"DEPOSIT"===r.transferParameters.type},r.isEddaDeposit=function(){return"EDDA"===i()&&"DEPOSIT"===r.transferParameters.type},r.isPea=function(){return"PEA"===r.transferParameters.fundTransferType&&angular.isDefined(r.transferParameters.operationType)},r.isEddaDeposit()&&(r.eddaFaqLink=n.getEddaFaqLink)}}]})}},function(e,t){e.exports='<div ng-if="::!$ctrl.isUnmappedDeposit" class="text-dark">\n    <div ng-if="::$ctrl.isWireDeposit()">\n        <h2 translate="cashTransfer.headingText.WIRE.DEPOSIT.STEPS"></h2>\n        <p translate="cashTransfer.subheading.step_1"></p>\n        <p translate="cashTransfer.subheading.step_2"></p>\n        <p translate="cashTransfer.subheading.step_3"></p>\n        <p translate="cashTransfer.subheading.step_4" translate-values="{ linkStart: \'<a href=&quot;javascript:void(0);&quot; ng-click=&quot;$ctrl.goToTransactionHistory()&quot;>\', linkEnd: \'</a>\'}" translate-compile></p>\n    </div>\n    \n    <div ng-if="::$ctrl.transferParameters.method === \'WISE_BANK_NOTIFICATION\'">\n        <h2 translate="{{\'cashTransfer.headingText.\' + $ctrl.transferParameters.method + \'.DEPOSIT.STEPS\'}}"></h2>\n        <p translate="cashTransfer.subheading.wise.step_1"></p>\n        <p translate="cashTransfer.subheading.wise.step_2"></p>\n        <p translate="cashTransfer.subheading.wise.step_3"></p>\n        <p translate="cashTransfer.subheading.wise.step_4" translate-values="{ linkStart: \'<a href=&quot;javascript:void(0);&quot; ng-click=&quot;$ctrl.goToTransactionHistory()&quot;>\', linkEnd: \'</a>\'}" translate-compile></p>\n    </div>\n    \n    <div ng-if="::$ctrl.transferParameters.method === \'WISE_BALANCE\'">\n        <h2 translate="{{\'cashTransfer.headingText.\' + $ctrl.transferParameters.method + \'.DEPOSIT.STEPS\'}}"></h2>\n        <p translate="cashTransfer.subheading.wiseBalance.step_1"></p>\n        <p translate="cashTransfer.subheading.wiseBalance.step_2"></p>\n        <p translate="cashTransfer.subheading.wiseBalance.step_3" translate-values="{ linkStart: \'<a href=&quot;javascript:void(0);&quot; ng-click=&quot;$ctrl.goToTransactionHistory()&quot;>\', linkEnd: \'</a>\'}" translate-compile></p>\n    </div>\n    \n    <div ng-if="::$ctrl.isEddaDeposit()">\n        <h6 class="text-muted" ng-if="::!$ctrl.isSavedInstruction">{{::$ctrl.getHeadingText()}}</h6>\n        <h6 class="text-muted">{{::$ctrl.getProcessText()}}</h6>\n        <h6 class="text-muted" translate="cashTransfer.subheading.edda.faq" translate-values="{ eddaLinkStart: \'<a href=&quot;{{$ctrl.eddaFaqLink()}}&quot; target=&quot;_blank&quot;>\', linkEnd: \'</a>\'}"></h6>\n    </div>\n    \n    <div ng-if="::!$ctrl.isWireDeposit() && !$ctrl.isWiseDeposit() && !$ctrl.isEddaDeposit()">\n        <div ng-if="::$ctrl.isCheckDeposit()" class="alert alert-info" >\n            <p class="text-grey">{{\'cashTransfer.mobileCheckText\' | translate}}</p>\n            <p><a href="https://ibkr.info/node/3427" target="_blank" translate="mobileChecksMoreInfo"></a></p>\n        </div>\n        \n        <h3 ng-if="::$ctrl.isPea()">{{::$ctrl.getHeadingText()}}</h3>\n        \n        <div ng-if="::!$ctrl.isPea()">\n            <h2>{{::$ctrl.getHeadingText()}}</h2>\n            <h2 ng-if="::$ctrl.transferParameters.type !== \'INTERNAL\'">{{::$ctrl.getProcessText()}}</h2>\n        </div>\n    </div>\n</div>\n<div ng-if="::$ctrl.isUnmappedDeposit" class="text-dark">\n    <h2 translate="cashTransfer.heading.unmapped"></h2>\n    <p translate="cashTransfer.subheading.unmapped"></p>\n</div>'},function(e,t,n){e.exports=function(e){e.component("cashMethodShortFaq",{bindings:{type:"<",currency:"<",method:"<",instructionVerificationMethod:"<?",hideHeading:"<?",showDebitCardHold:"<?",cryptoProvider:"<?"},template:n(970),controller:["$translate","CashMethodTextService","FundingService",function(e,t,n){var a=this,r=function(){var n,r,i="cashTransfer.faqLabel."+(n=a.method,r=a.currency,t.getLocalTxnMethodName(n,r)?t.getLocalTxnMethodName(n,r):function(e){if("DEPOSIT"===a.type){if(-1!==e.indexOf("WIRE"))return"WIRE";if(-1!==e.indexOf("CHECK"))return"CHECK"}return e}(n))+"."+a.type,o=e.instant(i);return o!==i?o:e.instant("cashTransfer.faqLabel."+a.type)};a.$onInit=function(){a.isAchType="ACH"===a.method||"EFT"===a.method,a.isIraType=n.isIraNotification(a.method),a.hideHeading=a.hideHeading||!1,a.instructionVerificationMethod=a.instructionVerificationMethod||"",a.getFaqLabelText=r,a.getFeesText=t.getFeesText,a.getTradingHoldText=t.getTradingHoldText,a.getWithdrawalHoldText=t.getWithdrawHoldText,a.getDebitCardHoldText=t.getDebitHoldText,a.getTimingText=t.getTimingText,a.getFaqLinkTag=function(){return{linkStart:'<a target="_blank" href="https://www.ibkr.com/article?id=28225581">',linkEnd:"</a>"}},a.isWireDeposit=function(){var e=a.method;return"DEPOSIT"===a.type&&(-1!==e.indexOf("WIRE")||-1!==e.indexOf("NEFT")||-1!==e.indexOf("RTGS"))},a.isWise=function(){return n.isWiseMethod(a.method)}}}]})}},function(e,t){e.exports='<h6 class="text-dark-gray" ng-if="::!$ctrl.hideHeading && $ctrl.method !== \'EDDA\'">{{::$ctrl.getFaqLabelText()}}</h6>\n<p ng-if="::!$ctrl.hideHeading && $ctrl.method === \'EDDA\'"><strong>{{::$ctrl.getFaqLabelText()}}</strong></p>\n<div class="text-dark-gray" ng-if="::$ctrl.isAchType && $ctrl.instructionVerificationMethod !== \'\'">\n    <div class="margin-top-10"></div>\n    <p>\n        <span><strong translate="cashTransfer.label.description"></strong>: </span>\n        <span translate="bankVerificationDesc.{{$ctrl.instructionVerificationMethod}}"></span>\n    </p>\n</div>\n<div class="text-dark-gray" ng-if="::$ctrl.isIraType">\n    <div class="margin-top-10"></div>\n    <p>\n        <span><strong translate="cashTransfer.label.description"></strong>: </span>\n        <span translate="deposit.method.description.{{$ctrl.method}}"></span>\n    </p>\n</div>\n<div class="text-dark-gray" ng-if="!$ctrl.isIraType" ng-switch on="$ctrl.type">\n    <div ng-switch-when="DEPOSIT">\n        <div class="margin-top-10"></div>\n        <p>\n            <span><strong translate="cashTransfer.label.fees"></strong>: </span>\n            <span translate="{{$ctrl.getFeesText($ctrl.type, $ctrl.method, $ctrl.currency).text}}"></span>\n        </p>\n        <div ng-if="::$ctrl.getTimingText($ctrl.method) !== \'\'">\n            <div class="margin-top-10"></div>\n            <p>\n                <span><strong translate="cashTransfer.label.timing"></strong>: </span>\n                <span translate="{{$ctrl.getTimingText($ctrl.method)}}"></span>\n            </p>\n        </div>\n        <div class="margin-top-10"></div>\n        <p>\n            <span class="text-dark-gray"><strong translate="cashTransfer.label.tradingHold"></strong>: </span>\n            <span translate="{{$ctrl.getTradingHoldText($ctrl.method, $ctrl.currency)}}"></span>\n        </p>\n        <div class="margin-top-10"></div>\n        <p>\n            <span><strong translate="cashTransfer.label.withdrawHold"></strong>: </span>\n            <span translate="{{$ctrl.getWithdrawalHoldText($ctrl.method, $ctrl.currency)}}"></span>\n        </p>\n        <div ng-if="$ctrl.showDebitCardHold && $ctrl.getDebitCardHoldText($ctrl.method, $ctrl.currency).length > 0">\n            <div class="margin-top-10"></div>\n            <p>\n                <span><strong translate="cashTransfer.label.debitHold"></strong>: </span>\n                <span translate="{{$ctrl.getDebitCardHoldText($ctrl.method, $ctrl.currency)}}"></span>\n            </p>\n        </div>\n        <div ng-if="::$ctrl.isWireDeposit()">\n            <div class="margin-top-10"></div>\n            <p translate="cashTransfer.deposit.wire.faqlink" translate-values="{{ $ctrl.getFaqLinkTag() }}"></p>\n        </div>\n        \n        <div ng-if="::$ctrl.isWise()">\n            <div class="margin-top-10"></div>\n            <p class="text-xs" translate="cashTransfer.deposit.wise.disclaimer"></p>\n        </div>\n    </div>\n    <div ng-switch-when="WITHDRAWAL">\n        <div class="margin-top-10"></div>\n        <p>\n            <span><strong translate="cashTransfer.label.fees"></strong>: </span>\n            <span translate="{{$ctrl.getFeesText($ctrl.type, $ctrl.method, $ctrl.currency).text}}"></span>\n        </p>\n    </div>\n    <div ng-switch-when="INTERNAL">\n        <div ng-switch on="$ctrl.method">\n            <div ng-switch-when="CRYPTO_CASH_TRANSFER">\n                <div class="margin-top-10"></div>\n                <ul ng-if="$ctrl.cryptoProvider === \'IBL_ZH\'">\n                    <li translate="cashTransfer.faq.CRYPTO_CASH_TRANSFER.IBL_ZH.1" translate-values="{ cryptoSegmentType : (\'clearingSegmentEntity.type.\' + $ctrl.cryptoProvider | translate) }"></li>\n                    <li translate="cashTransfer.faq.CRYPTO_CASH_TRANSFER.IBL_ZH.2"></li>\n                    <li translate="cashTransfer.faq.CRYPTO_CASH_TRANSFER.IBL_ZH.3" translate-values="{ cryptoSegmentType : (\'clearingSegmentEntity.type.\' + $ctrl.cryptoProvider | translate) }"></li>\n                    <li translate="cashTransfer.faq.CRYPTO_CASH_TRANSFER.IBL_ZH.4"></li>\n                    <li translate="cashTransfer.faq.CRYPTO_CASH_TRANSFER.IBL_ZH.5"></li>\n                </ul>\n                <ul ng-if="$ctrl.cryptoProvider === \'IBL_PAXOS\'">\n                    <li translate="cashTransfer.faq.CRYPTO_CASH_TRANSFER.IBL_PAXOS.1"></li>\n                    <li translate="cashTransfer.faq.CRYPTO_CASH_TRANSFER.IBL_PAXOS.2"></li>\n                    <li translate="cashTransfer.faq.CRYPTO_CASH_TRANSFER.IBL_PAXOS.3"></li>\n                    <li translate="cashTransfer.faq.CRYPTO_CASH_TRANSFER.IBL_PAXOS.4"></li>\n                    <li translate="cashTransfer.faq.CRYPTO_CASH_TRANSFER.IBL_PAXOS.5" translate-values="{ dangerTextStart : \'<span class=&quot;text-danger&quot;>\', dangerTextEnd : \'</span>\' }"></li>\n                    <li translate="cashTransfer.faq.CRYPTO_CASH_TRANSFER.IBL_PAXOS.6" translate-values="{ listStart : \'<ul>\', listEnd : \'</ul>\', listItemStart : \'<li>\', listItemEnd : \'</li>\' }"></li>\n                </ul>\n            </div>\n            <div ng-switch-default>\n                <div class="margin-top-10"></div>\n                <p>\n                    <span><strong translate="cashTransfer.label.arrivalTime"></strong>: </span>\n                    <span translate="internalTransfer.method.arrivalTime"></span>\n                </p>\n            </div>\n        </div>\n        \n    </div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("impactCashMethodChoice",{bindings:{transferType:"<",transferMethod:"<",transferCurrency:"<",onClick:"&"},template:n(972),controller:["CONTENT_HOST","CashMethodTextService","$translate",function(e,t,n){var a=this;a.$onInit=function(){a.contentHost=e,a.getButtonText=function(){return t.getButtonText(a.transferType,a.transferMethod)}},a.getTxnMethodName=function(){if(t.getLocalTxnMethodName(a.transferMethod,a.transferCurrency)){var e="transfer.impact.method."+a.transferCurrency+"."+t.getLocalTxnMethodName(a.transferMethod,a.transferCurrency)+".name";return e!==n.instant(e)?e:"transfer.impact.method."+t.getLocalTxnMethodName(a.transferMethod,a.transferCurrency)+".name"}return"transfer.impact.method."+a.transferMethod+".name"}}]})}},function(e,t){e.exports="<h2 translate=\"{{$ctrl.getTxnMethodName()}}\" translate-values=\"{ currencyType : $ctrl.transferCurrency }\"></h2>\n<br>\n<div ng-if=\"$ctrl.transferMethod === 'WIRE_NOTIFICATION'\">\n    <p><img ng-src=\"{{'https://' + $ctrl.contentHost + '/images/am/impact-wire-01.svg'}}\" />&nbsp;&nbsp;{{'transfer.impact.method.' + $ctrl.transferMethod + '.line1' | translate}}</p>\n    <br>\n    <p><img ng-src=\"{{'https://' + $ctrl.contentHost + '/images/am/impact-wire-02.svg'}}\" />&nbsp;&nbsp;{{'transfer.impact.method.' + $ctrl.transferMethod + '.line2' | translate}}</p>\n    <br>\n    <p><img ng-src=\"{{'https://' + $ctrl.contentHost + '/images/am/impact-wire-03.svg'}}\" />&nbsp;&nbsp;{{'transfer.impact.method.' + $ctrl.transferMethod + '.line3' | translate}}</p>\n    <br>\n</div>\n<div ng-if=\"$ctrl.transferMethod === 'WIRE'\">\n    <ul>\n        <li>{{'transfer.impact.method.' + $ctrl.transferMethod + '.line1' | translate}}</li>\n        <li>{{'transfer.impact.method.' + $ctrl.transferMethod + '.line2' | translate}}</li>\n        <li>{{'transfer.impact.method.' + $ctrl.transferMethod + '.line3' | translate}}</li>\n    </ul>\n    <br>\n</div>\n<p><am-button btn-type=\"primary\" btn-text=\"{{$ctrl.getButtonText()}}\" on-click=\"$ctrl.onClick()\"></am-button></p>"},function(e,t,n){e.exports=function(e){e.component("withdrawableBalance",{bindings:{balanceData:"<"},template:n(974),controller:["$translate","AlphaTestService",function(e,t){var n=this;n.$onInit=function(){n.transferParameters=n.balanceData.transferParameters,n.transferRules=n.balanceData.transferRules,n.isAlphaForWithdrawalRestrictionEnabled=!1,n.showWithdrawalRestrictionFullTxt=!1,t.fetch("REGAM-18140").then(function(e){n.isAlphaForWithdrawalRestrictionEnabled=e.data.isEnabled}),n.showWithdrawalRestrictionWarning=function(){return n.isAlphaForWithdrawalRestrictionEnabled&&n.balanceData.withdrawableExplanation&&n.balanceData.withdrawableExplanation.requestedCurrencyRestrictedFromWithdrawal},n.toggleWithdrawalRestrictionText=function(){n.showWithdrawalRestrictionFullTxt=!n.showWithdrawalRestrictionFullTxt},n.isShowAutoFxWarning=function(){return angular.isDefined(n.transferRules)&&n.transferRules.autoFxRules&&n.transferRules.autoFxRules.autoFxWithdrawal},n.getFaqNumber=function(){return new Map([["JP","4858"],["CE","4581"]]).get(n.balanceData.ibEntity)},n.getWithdrawableBalanceLabelKey=function(){return"DIRECT_DEBIT"===n.transferParameters.method?"balance.account.directDebit.cash":"balance.account.cash"}}}]})}},function(e,t){e.exports='<div ng-switch on="$ctrl.transferParameters.type">\n    <div ng-switch-when="WITHDRAWAL">\n        <div ng-if="$ctrl.showWithdrawalRestrictionWarning() && !$ctrl.showWithdrawalRestrictionFullTxt" class="alert alert-warning">\n                <span>\n                    <i am-tooltip class="fas fa-exclamation-triangle tooltips"></i>\n                    <span translate="transfer.warning.withdrawal.temporaryRestriction.shortText" translate-values="{ currency: $ctrl.transferParameters.moneyAmount.currencyType}"></span>\n                </span>\n                <a class="text-small" href="javascript:void(0);" target="_self" translate="viewMore" ng-click="$ctrl.toggleWithdrawalRestrictionText()"></a>\n        </div>\n            \n        <div ng-if="$ctrl.showWithdrawalRestrictionWarning() && $ctrl.showWithdrawalRestrictionFullTxt" class="alert alert-warning" >\n            <span>\n                <i am-tooltip class="fas fa-exclamation-triangle tooltips"></i>\n                <span translate="transfer.warning.withdrawal.temporaryRestriction.longText" translate-values="{ currency: $ctrl.transferParameters.moneyAmount.currencyType, lineBreak: \'<br/>\'}"></span>\n            </span>\n            </br>\n            <div class="text-right">\n                <a class="text-small" href="javascript:void(0);" target="_self" translate="viewLess" ng-click="$ctrl.toggleWithdrawalRestrictionText()"></a>\n            </div>\n        </div>\n        \n        <div class="alert alert-warning" ng-if="$ctrl.isShowAutoFxWarning() && $ctrl.getFaqNumber()">\n            <p translate="transfer.autoFx.warning" translate-values="{ currency: $ctrl.transferParameters.moneyAmount.currencyType, breakTag: \'<br />\', startLinkTag: \'<a href=&quot;https://ibkr.info/article/{{$ctrl.getFaqNumber()}}&quot; target=&quot;_new&quot;>\', endLinkTag: \'</a>\' , \'listItemStart\': \'<li>\', \'listItemEnd\': \'</li>\', \'listStart\': \'<ul>\', \'listEnd\': \'</ul>\'}"></p>\n        </div>\n        <div class="alert alert-warning" ng-if="$ctrl.isShowAutoFxWarning() && !$ctrl.getFaqNumber()">\n            <p translate="transfer.autoFx.general.warning" translate-values="{ currency: $ctrl.transferParameters.moneyAmount.currencyType, breakTag: \'<br />\', \'listItemStart\': \'<li>\', \'listItemEnd\': \'</li>\', \'listStart\': \'<ul>\', \'listEnd\': \'</ul>\'}"></p>\n        </div>\n        <div ng-if="$ctrl.balanceData.failedBalances">\n            <am-form-label label-text="{{$ctrl.getWithdrawableBalanceLabelKey() | translate}}" value-text="{{\'balance.error.cashBalance\' | translate}}"></am-form-label>\n        </div>\n        <div ng-if="($ctrl.balanceData.transferableAmounts || $ctrl.balanceData.fetchingBalances) && !$ctrl.balanceData.failedBalances">\n            <div ng-if="$ctrl.balanceData.transferableAmounts.withdrawableAmount === $ctrl.balanceData.transferableAmounts.withdrawableNoBorrow">\n                <cash-balance-label is-fetching="$ctrl.balanceData.fetchingBalances" balance-key="{{$ctrl.getWithdrawableBalanceLabelKey()}}" amount="$ctrl.balanceData.transferableAmounts.withdrawableAmount" currency="$ctrl.transferParameters.moneyAmount.currencyType" explanation="$ctrl.balanceData.withdrawableExplanation"></cash-balance-label>\n            </div>\n            <div ng-if="$ctrl.balanceData.transferableAmounts.withdrawableAmount !== $ctrl.balanceData.transferableAmounts.withdrawableNoBorrow">\n                <cash-balance-label is-fetching="$ctrl.balanceData.fetchingBalances" balance-key="balance.account.margin.withdrawableAmount" amount="$ctrl.balanceData.transferableAmounts.withdrawableAmount" currency="$ctrl.transferParameters.moneyAmount.currencyType" explanation="$ctrl.balanceData.withdrawableExplanation"></cash-balance-label>\n                <cash-balance-label is-fetching="$ctrl.balanceData.fetchingBalances" balance-key="balance.account.margin.withdrawableNoBorrow" amount="$ctrl.balanceData.transferableAmounts.withdrawableNoBorrow" currency="$ctrl.transferParameters.moneyAmount.currencyType"></cash-balance-label>\n            </div>\n        </div>        \n    </div>\n    <div ng-switch-when="INTERNAL">    \n        <am-form-label ng-if="$ctrl.balanceData.failedBalances" label-text="{{\'balance.account.internal\' | translate}}" value-text="{{\'balance.error.cashBalance\' | translate}}"></am-form-label>\n                \n        <div ng-if="($ctrl.balanceData.transferableAmounts || $ctrl.balanceData.fetchingBalances) && !$ctrl.balanceData.failedBalances">\n            <div ng-if="$ctrl.balanceData.transferableAmounts.withdrawableAmount === $ctrl.balanceData.transferableAmounts.withdrawableNoBorrow">\n                <cash-balance-label is-fetching="$ctrl.balanceData.fetchingBalances" balance-key="balance.account.internal" amount="$ctrl.balanceData.transferableAmounts.withdrawableAmount" currency="$ctrl.transferParameters.moneyAmount.currencyType"></cash-balance-label>\n            </div>    \n            <div ng-if="$ctrl.balanceData.transferableAmounts.withdrawableAmount !== $ctrl.balanceData.transferableAmounts.withdrawableNoBorrow">\n                <cash-balance-label is-fetching="$ctrl.balanceData.fetchingBalances" balance-key="balance.account.margin.internal" amount="$ctrl.balanceData.transferableAmounts.withdrawableAmount" currency="$ctrl.transferParameters.moneyAmount.currencyType"></cash-balance-label>\n                <cash-balance-label is-fetching="$ctrl.balanceData.fetchingBalances" balance-key="balance.account.margin.internalNoBorrow" amount="$ctrl.balanceData.transferableAmounts.withdrawableNoBorrow" currency="$ctrl.transferParameters.moneyAmount.currencyType"></cash-balance-label>\n            </div>\n        </div>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("transferMethodChoice",{bindings:{transferParameters:"<",bankAccount:"<",eddaEsigRejectionDetails:"<",usRfpDetails:"<"},template:n(976),require:{progressBar:"^^?fundingSequenceProgress"},controller:["$scope","CashMethodTextService","ResourceService","$translate","ACTIVE_CONTEXT","ApplicationContext",function(t,n,a,r,i,o){var s=this;s.$onInit=function(){"ACH"===s.transferParameters.method&&(s.usRfpDetails?s.underlyingMethods=["RFP","ACH"]:s.underlyingMethods=["ACH"],s.transferParameters.underlyingMethod=s.underlyingMethods[0]),s.isApplicationSequence=i===o.STANDALONE,s.eddaEsigRejectionDetails&&s.eddaEsigRejectionDetails.eddaIneligibleBankCode&&s.eddaEsigRejectionDetails.eddaRejectionBannerTextKey&&(s.eddaIneligibleBankCode=s.eddaEsigRejectionDetails.eddaIneligibleBankCode,s.eddaRejectionBannerKey=s.eddaEsigRejectionDetails.eddaRejectionBannerTextKey),s.getMethodDisplayClass=function(){return"ACH"===s.transferParameters.method||"RFP"===s.transferParameters.method?"row":"row border-top"},s.getMethodDescriptionTextClass=function(e){return"RFP"===e&&s.disableRfpChoice?"text-muted":"text-grey"},s.getMethodNameClass=function(e){return"RFP"===e&&s.disableRfpChoice?"fw-bold text-muted":"fw-bold"},s.isIneligibleBankSelected=function(){return s.eddaIneligibleBankCode&&s.eddaIneligibleBankCode===s.bankAccount.bank.routingNumbers[0].routingNumber.slice(0,3)},s.fetchMethods=function(){return s.transferParameters.underlyingMethod=null,s.underlyingMethods=[],a.fetch(e.SERVER_PATH+"/TransferFunds/UnderlyingMethods",{currency:s.transferParameters.moneyAmount.currencyType,bankCode:s.bankAccount.bank.routingNumbers[0].routingNumber.slice(0,3),type:s.transferParameters.type,eddaIneligibleBankCode:s.eddaIneligibleBankCode}).then(function(e){angular.isDefined(e.data.methods)&&(s.underlyingMethods=e.data.methods,s.underlyingMethods.length>0&&(s.transferParameters.underlyingMethod=s.underlyingMethods[0]))})},s.getMethodText=function(e){return"RFP"===e||"ACH"===e?r.instant("underlyingMethod.name."+e):r.instant("cashTransfer.method."+e)},s.getMethodInfo=function(e){return"RFP"===e?r.instant("underlyingMethod.info."+e,{maxAmount:s.usRfpDetails.bankLimit}):r.instant("underlyingMethod.info."+e)},s.isAchOrRfpDeposit=function(){return"ACH"===s.transferParameters.method||"RFP"===s.transferParameters.method},s.calculateProgressBarPoints=function(){!s.progressBar||"ACH"!==s.transferParameters.underlyingMethod&&"RFP"!==s.transferParameters.underlyingMethod||s.progressBar.calculateProgressBarPoints({transferMethod:s.transferParameters.underlyingMethod,currentStepName:"AchSavedInstructionCashTransfer"})},s.getFaqId=function(e){return n.getTransactionMethodFaqId(e)}},t.$watch(function(){return s.transferParameters&&"HK_BANK_NOTIFICATION"===s.transferParameters.method?s.transferParameters&&s.bankAccount&&s.bankAccount.bank.bankName?s.transferParameters.moneyAmount.currencyType+s.bankAccount.bank.routingNumbers[0].routingNumber.slice(0,3):null:s.usRfpDetails&&s.transferParameters&&angular.isDefined(s.transferParameters.moneyAmount)&&angular.isDefined(s.transferParameters.moneyAmount.amount)?s.transferParameters.moneyAmount.amount:null},function(e,t){s.transferParameters&&"HK_BANK_NOTIFICATION"===s.transferParameters.method?function(e,t){e?s.fetchMethods():(s.underlyingMethods=[],s.transferParameters.underlyingMethod=null)}(e):s.usRfpDetails&&function(e,t){if(null!==e&&s.usRfpDetails&&e>s.usRfpDetails.bankLimit?s.disableRfpChoice=!0:s.disableRfpChoice=!1,s.disableRfpChoice)for(var n=0;n<s.underlyingMethods.length;n++)if("RFP"!==s.underlyingMethods[n]){s.transferParameters.underlyingMethod=s.underlyingMethods[n];break}}(e)}),t.$watch(function(){return s.transferParameters?s.transferParameters.underlyingMethod:null},function(e,t){e&&s.calculateProgressBarPoints()})}]})}},function(e,t){e.exports='<div ng-if="$ctrl.underlyingMethods.length > 0 && !$ctrl.isAchOrRfpDeposit()">\n    <hr>\n    <h5 translate="underlyingMethod.headingText"></h5>\n    <br ng-if="!$ctrl.isIneligibleBankSelected()"> \n    <div ng-if="$ctrl.isIneligibleBankSelected()" class="alert alert-danger">\n        <span>\n            <i class="fa fa-lg fa-info-circle"></i>\n            <span translate="{{$ctrl.eddaRejectionBannerKey}}" translate-values="{ lineBreak : \'<br>\' }"></span>\n        </span>\n        <br>\n    </div>\n</div>\n<br ng-if="$ctrl.underlyingMethods.length > 0 && $ctrl.isAchOrRfpDeposit()">\n\n<generic-form-data class="funding-method-details" ng-if="$ctrl.underlyingMethods.length > 0" name="underlyingMethodForm" ng-model="$ctrl.transferParameters.underlyingMethod" label-text="{{\'transfer.label.underlyingMethod\' | translate}}">\n    <div class="{{$ctrl.getMethodDisplayClass()}}" ng-repeat="underlyingMethod in $ctrl.underlyingMethods">\n        <div class="col-xs-1 col-sm-1 col-md-1 col-lg-1">\n            <p class="text-center">\n                <input ng-disabled="underlyingMethod === \'RFP\' && $ctrl.disableRfpChoice" name="method" type="radio" i-check ng-model="$ctrl.transferParameters.underlyingMethod" value="{{underlyingMethod}}" />\n            </p>\n        </div>\n        <div class="col-xs-10 col-sm-11 col-md-11 col-lg-11">\n            <p ng-if="underlyingMethod === \'EDDA\'" class="fw-bold" translate="recommendedMethod.EDDA" translate-values="{ successStart: \'<span class=&quot;text-success&quot;>\', successEnd: \'</span>\' }"></p>\n            <p ng-if="underlyingMethod !== \'EDDA\'" class="{{$ctrl.getMethodNameClass(underlyingMethod)}}">{{$ctrl.getMethodText(underlyingMethod)}}</p>\n            <p class="{{$ctrl.getMethodDescriptionTextClass(underlyingMethod)}}" >{{$ctrl.getMethodInfo(underlyingMethod)}}</p>\n            <p ng-if="$ctrl.getFaqId(underlyingMethod)" class="text-left"><a href="https://www.ibkr.com/faq?id={{$ctrl.getFaqId(underlyingMethod)}}" target="_blank" translate="word.learnMore"></a></p>\n            <br>\n        </div>\n    </div>\n</generic-form-data>\n'},function(e,t,n){e.exports=function(e){e.component("hkEsigDisclosures",{template:n(978)})}},function(e,t){e.exports=' <div>\n    <div class="row">\n        <div class="col-xs-2 col-sm-2 col-md-2 col-lg-2 pt-0">\n            <div align="center">\n                <img src="/images/am/user-checked.svg" border="0" />\n            </div>\n        </div>\n        <div class="col-xs-10 col-sm-10 col-md-10 col-lg-10 p-0">\n            <h6 translate="hkSig.bankLink.heading.1"></h6>\n            <ul>\n                <li translate="hkSig.bankLink.instructions.1"></li>\n                <li translate="hkSig.bankLink.instructions.2"></li>\n            </ul>\n         </div>\n     </div>\n    <br>\n    <div class="row">\n        <div class="col-xs-2 col-sm-2 col-md-2 col-lg-2 pt-0">\n            <div align="center">\n                <img src="/images/am/exchange.svg" border="0" />\n            </div>\n        </div>\n        <div class="col-xs-10 col-sm-10 col-md-10 col-lg-10 p-0">\n            <h6 translate="hkSig.bankLink.heading.2"></h6>\n            <ul>\n                <li translate="hkSig.bankLink.instructions.3"></li>\n                <li translate="hkSig.bankLink.instructions.4"></li>\n            </ul>\n         </div>\n     </div>\n    <br>\n    <div class="row">\n        <div class="col-xs-2 col-sm-2 col-md-2 col-lg-2 pt-0">\n            <div align="center">\n                <img src="/images/am/warning.svg" border="0" />\n            </div>\n        </div>\n        <div class="col-xs-10 col-sm-10 col-md-10 col-lg-10 p-0">\n            <h6 translate="hkSig.bankLink.heading.3"></h6>\n            <ul>\n                <li translate="hkSig.bankLink.instructions.5"></li>\n                <li translate="hkSig.bankLink.instructions.6"></li>\n            </ul>\n         </div>\n     </div>\n </div>'},function(e,t,n){e.exports=function(e){e.component("fundingSequenceProgress",{template:n(980),transclude:!0,controller:["$scope","DynamicSequenceService","FundingSequenceBarService","AlphaTestService",function(e,t,n,a){var r=this;r.$onInit=function(){r.progressBarDataPoints=[],r.calculateProgressBarPoints=function(e){r.progressBarDataPoints=n.getSequenceBarPoints(e)}},e.$watch(function(){return angular.isDefined(t.getSequenceData())?t.getSequenceData().stepIndex:null},function(e,t){!angular.isUndefined(e)&&null!==e&&angular.isDefined(r.progressBarDataPoints)&&(r.progressBarDataPoints=[])})}]})}},function(e,t){e.exports='<div ng-if="$ctrl.progressBarDataPoints.length > 0" class="row">\n    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-10 offset-lg-1">\n        <div  class="progress-steps-horizontal">\n                <div class="row" >\n                    <div class="col-12 col-md-4" ng-repeat="point in $ctrl.progressBarDataPoints">\n                        <div class="{{point.stepClass}}">\n                            <div ng-if="!point.isSuccessOrFailure" class="icon"><span class="icon-num">{{point.stepIndex + 1}}</span></div>\n                            <div ng-if="point.isSuccessOrFailure" class="icon"><i class="{{point.stepIcon}}"></i></div>\n                            <div class="step-text">\n                                <p>{{point.stepText | translate}}<br /> <span ng-if="point.stepSubText" class="fs-8">{{\'word.referenceNumber\' | translate}}: <strong>{{point.stepSubText}}</strong></span></p>\n                            </div>\n                            <div ng-if="!$last" class="progress-line">&nbsp;</div>\n                        </div>\n                    </div>\n                </div>\n        </div>\n    </div>\n</div>\n\x3c!-- AM Dynamic Sequence starts here --\x3e\n<ng-transclude></ng-transclude>'},function(e,t){e.exports='<div>\n   <div class="row">\n         <div class="form-label-container col-xs-12 col-sm-6 col-md-6 col-lg-4">\n              <label class="control-label" translate="transfer.label.attachment.attachDocument"></label>\n         </div>\n         <div class="form-input-container col-xs-12 col-sm-6 col-md-6 col-lg-8">\n              <am-file-input name="operatorAttachment" ng-model="$ctrl.operatorAttachment" rules="$ctrl.fileRules" show-rules="true" is-required="true" multiple="false" model-listener="$ctrl.uploadDocuments()"></am-file-input>\n         </div>\n   </div>\n   <div class="row">\n        <div class="form-label-container col-xs-12 col-sm-6 col-md-6 col-lg-4">\n             <label class="control-label" translate="transfer.label.attachment.visible"></label>\n        </div>\n        <div class="form-input-container col-xs-12 col-sm-6 col-md-6 col-lg-8">\n             <input i-check type="checkbox" ng-model="$ctrl.attachmentData.showToCust">\n        </div>\n   </div>\n   <am-form-input name="message" ng-model="$ctrl.attachmentData.message" label-text="{{\'transfer.label.attachment.message\' | translate}}"></am-form-input>\n</div>'},function(e,t,n){e.exports=function(e){n(983)(e),n(985)(e),n(987)(e),n(989)(e)}},function(e,t,n){e.exports=function(e){e.component("debitCardDetailsReview",{bindings:{cardDetails:"<"},template:n(984),controller:["$translate",function(e){this.$onInit=function(){var e,t;this.displayName=(e=this.cardDetails.entity.name,t="",e.middle.length>0?t+=e.first+" "+e.middle+" "+e.last:t+=e.first+" "+e.last,e.suffix.length>0&&(t+=" "+e.suffix),t),this.isActivated=function(){return"ACTIVATED"===this.cardDetails.status}}}]})}},function(e,t){e.exports='<div class="form-review">\r\n    <am-form-label label-text="{{\'debitCard.cardDetails.label.prnNo\' | translate}}" value-text="{{$ctrl.cardDetails.prn}}"></am-form-label>\r\n    <am-form-label label-text="{{\'debitCard.cardDetails.label.name\' | translate}}" value-text="{{$ctrl.displayName}}"></am-form-label>\r\n    <am-form-label ng-if="::!$ctrl.isActivated()" label-text="{{\'debitCard.cardDetails.label.activationCode\' | translate}}" value-text="$ctrl.cardDetails.activationCode"></am-form-label>\r\n    <am-form-label label-text="{{\'debitCard.cardDetails.label.cardStatus\' | translate}}" value-text="{{\'debitCard.cardStatus.active\' | translate}}" value-icon="fa-check-circle" value-class="text-success"></am-form-label>\r\n    <am-form-label label-text="{{\'debitCard.cardDetails.label.lockStatus\' | translate}}" value-text="{{\'debitCard.cardStatus.lockStatus.\' + $ctrl.cardDetails.locked | translate}}"></am-form-label>\r\n    <am-form-label label-text="{{\'debitCard.cardDetails.label.accountId\' | translate}}" value-text="{{$ctrl.cardDetails.accountId}}"></am-form-label>\r\n</div>'},function(e,t,n){e.exports=function(e){e.component("debitCardActivationInstruction",{bindings:{offeringType:"<",activationCode:"<",cardStatus:"<"},template:n(986),controller:["ModalService","PageService",function(e,t){var n=this;n.$onInit=function(){n.print=t.print,n.isCardInactive=function(){return angular.isDefined(this.cardStatus)&&("CANCELED"===this.cardStatus||"REPLACED"===this.cardStatus)},n.viewTransactions=function(){e.closeModal("viewTransactions")}}}]})}},function(e,t){e.exports='<div ng-if="::$ctrl.isCardInactive()">\n    <p class="text-center">\n        <span translate="debitCard.instruction.cancel.line1"></span>\n        <br>\n        <span ng-if="$ctrl.cardStatus === \'CANCELED\'" translate="debitCard.instruction.cancel.line2" translate-values="{strongStart: \'<strong>\', strongEnd: \'</strong>\', lineBreak: \'<br>\'}"></span>\n    </p>\n    <p class="text-center">\n        <span class="text-small" translate="debitCard.instruction.cancel.line3"></span>\n        <span class="text-small"><a href="javascript:void(0)" ng-click="$ctrl.viewTransactions()"> {{\'debitCard.instruction.cancel.line4\' | translate}}</a></span>\n    </p>\n</div>\n\n<div ng-if="::!$ctrl.isCardInactive()" class="text-center">\n    <p translate="debitCard.instruction.new.line1"></p>\n    <p><strong translate="debitCard.instruction.new.line2.{{$ctrl.offeringType}}"></strong></p>\n    <p><span class="text-large" translate="debitCard.instruction.new.serviceCenterNo"></span></p>\n    <p translate="debitCard.instruction.new.line3" translate-values="{strongStart: \'<strong>\', strongEnd: \'</strong>\'}"></p>\n    <p translate="debitCard.instruction.new.line4.{{$ctrl.offeringType}}" translate-values="{strongStart: \'<strong>\', strongEnd: \'</strong>\'}"></p>\n    <p><span class="text-large"> {{\'debitCard.label.activationCode\' | translate }} : <strong>{{$ctrl.activationCode}}</strong></span></p>\n    <p><am-button on-click="$ctrl.print()" btn-type="" btn-text="{{\'debitCard.instruction.new.print\' | translate}}"></am-button></p>\n    <br>\n    <p class="text-small" translate="debitCard.instruction.new.warning" translate-values="{strongStart: \'<strong>\', strongEnd: \'</strong>\'}"></p>\n</div>\n'},function(e,t,n){e.exports=function(e){e.component("debitCardNotes",{restrict:"A",transclude:!0,bindings:{offeringType:"<"},template:n(988),controller:["CONTENT_HOST","AgreementService",function(e,t){var n=this;n.$onInit=function(){n.contentHost=e,n.viewAgreement=function(){var e="DEBIT"===n.offeringType?"DebitCard":"PrepaidCard";t.viewAgreement(e)}}}]})}},function(e,t){e.exports='<div class="notes">\n    <p><strong translate="debitCard.note.heading"></strong></p>\n    <ng-transclude></ng-transclude>\n    <ul>\n        <li translate="debitCard.note.1"></li>\n        <li translate="debitCard.note.2.{{$ctrl.offeringType}}"></li>\n        <li translate="debitCard.note.3.{{$ctrl.offeringType}}"></li>\n        <li translate="debitCard.note.4.{{$ctrl.offeringType}}"></li>\n        <li translate="debitCard.note.11.{{$ctrl.offeringType}}"></li>\n        <li ng-if="$ctrl.offeringType === \'PREPAID\'" translate="debitCard.note.12"></li>\n        <li><a href="javascript:void(0);" ng-click="$ctrl.viewAgreement()" translate="debitCard.note.9"></a></li>\n    </ul>\n</div>'},function(e,t,n){e.exports=function(e){e.component("debitCardSignup",{bindings:{profile:"<"},template:n(990),controller:["CONTENT_HOST","DebitCardService",function(e,t){var n=this;n.$onInit=function(){n.contentHost=e,n.requestPrimaryCard=t.requestPrimaryCard,n.offeringType=n.profile.offeringType}}]})}},function(e,t){e.exports='<div class="row">\n    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n        <section class="panel">\n            <div class="panel-body panel-padding beloc-card-welcome">\n                <div page-structure="innerContent">\n                    <div class="row">\n                        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-7">\n                            <div class="intro">\n                                <h2 translate="debitCard.apply.heading.home.{{$ctrl.offeringType}}"></h2>\n                                <p><am-button btn-type="primary" btn-text="{{\'word.enrollNow\' | translate}}" on-click="$ctrl.requestPrimaryCard()"></am-button></p>\n                                <br/>\n                            </div>\n                        </div>\n                        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-5">\n                            <div class="beloc-card-lg">\n                                <img ng-if="$ctrl.offeringType === \'DEBIT\'" src="https://{{::$ctrl.contentHost}}/images/am/am-debit-card-number-sm.png" alt="IB Debit Mastercard" border="0" />\n                                <img ng-if="$ctrl.offeringType === \'PREPAID\'" src="https://{{::$ctrl.contentHost}}/images/am/am-prepaid-card-number-sm.png" alt="IB Prepaid Mastercard" border="0" />\n                            </div>\n                        </div>\n                    </div>\n                    <div class="divider"></div>\n                    <div class="row">\n                        <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">\n                            <ul class="paralist">\n                                <li translate="debitCard.benefits.1" translate-values="{superscriptStart: \'<sup>\', superscriptEnd: \'</sup>\', linkStart: \'<a href=&quot;https://\' + $ctrl.contentHost + \'/en/index.php?f=1340&quot; target=&quot;_blank&quot;>\', linkEnd: \'</a>\'}"></li>\n                                <li translate="debitCard.benefits.2" translate-values="{superscriptStart: \'<sup>\', superscriptEnd: \'</sup>\'}"></li>\n                                <li translate="debitCard.benefits.3"></li>\n                            </ul>\n                        </div>\n                        <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">\n                            <ul class="paralist">\n                                <li translate="debitCard.benefits.4"></li>\n                                <li ng-if="$ctrl.offeringType === \'DEBIT\'" translate="debitCard.benefits.5"></li>\n                            </ul>\n                        </div>\n                    </div>\n                    <br />\n                    <div class="row">\n                        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n                            <div class="alert alert-warning">\n                                <p translate="debitCard.restriction.ibKey.{{$ctrl.offeringType}}"></p>\n                                <p>\n                                    <span translate="debitCard.restriction.ibKey.download.1" translate-values="{linkStart: \'<a href=&quot;https://\' + $ctrl.contentHost + \'/en/index.php?f=1300#trytoday-drop&quot; target=&quot;_blank&quot;>\', linkEnd: \'</a>\'}"></span>\n                                    <span class="qr-code-set">\n                                        <img src="/images/web/ibkr-mobile-app-store-detection-1.svg" alt="IBKR Mobile QR code for either Apple or Android" loading="lazy" class="mt-20 qr-code" style="max-width:10%;"/>\n                                        <p class="text-small text-gray" translate="debitCard.restriction.ibKey.download.2"></p>\n                                    </span>\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n                    <br />\n                    <debit-card-notes offering-type="$ctrl.offeringType">\n                        <ol>\n                            <li ng-if="$ctrl.offeringType === \'DEBIT\'" translate="debitCard.note.5.DEBIT" translate-values="{linkStart: \'<a href=&quot;https://\' + $ctrl.contentHost + \'/en/index.php?f=46376&quot; target=&quot;_blank&quot;>\', linkEnd: \'</a>\'}"></li>\n                            <li ng-if="$ctrl.offeringType === \'PREPAID\'" translate="debitCard.note.5.PREPAID" translate-values="{linkStart: \'<a href=&quot;https://\' + $ctrl.contentHost + \'/compare&quot; target=&quot;_blank&quot;>\', linkEnd: \'</a>\'}"></li>\n                            <li ng-if="$ctrl.offeringType === \'PREPAID\'" translate="debitCard.note.6.PREPAID" translate-values="{ bLinkStart: \'<a href=&quot;https://www.bankrates.com/&quot; target=&quot;_blank&quot;>\', cLinkStart: \'<a href=&quot;https://www.creditcards.com/&quot; target=&quot;_blank&quot;>\', linkEnd: \'</a>\'}"></li>\n                            <li translate="debitCard.note.7"></li>\n                        </ol>\n                        <hr>\n                    </debit-card-notes>\n                </div>\n            </div>\n        </section>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){n(992)(e)}},function(e,t,n){e.exports=function(e){e.component("depotSwitchTransferReview",{bindings:{transferParameters:"<"},template:n(993),controller:function(){var e=this;e.showData=function(){return e.transferData.length>0},e.$onInit=function(){e.transferData=e.transferParameters.transferData||{}}}})}},function(e,t){e.exports='<div ng-if="$ctrl.showData()" class="row">\n    <div class="col-lg-offset-2 col-lg-8 col-md-offset-2 col-md-8">\n        <table width="100%" cellpadding="0" cellspacing="0" border="0" class="table">\n            <thead>\n                <tr>\n                    <th width="10%">{{\'asset.search.label.quantity\' | translate}}</th>\n                    <th width="15%">{{\'asset.search.label.assetType\' | translate}}</th>\n                    <th width="20%">{{\'asset.search.label.description\' | translate}}</th>\n                    <th width="20%">{{\'asset.search.label.identifiers\' | translate}}</th>\n                    <th width="10%">{{\'depotSwitch.label.depotCurrency\' | translate}}</th>\n                </tr>\n            </thead>\n            <tbody>\n                <tr ng-repeat="data in $ctrl.transferData track by $index">\n                    <td>{{data.quantity}}</td>\n                    <td>{{\'asset.type.\' + data.positionDetails.type | translate}}</td>\n                    <td>{{data.positionDetails.description}}</td>\n                    <td><position-id-review position-details="data.positionDetails"></position-id-review></td>\n                    <td>{{data.destination.depot+\'/\'+data.destination.currency}}</td>\n                </tr>\n            </tbody>\n        </table>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){n(995)(e)}},function(e,t,n){e.exports=function(e){n(996)(e)}},function(e,t,n){e.exports=function(e){e.component("internalDestinationSelection",{bindings:{transferParameters:"<",allowedDestinationAccounts:"<",destAccountsAboveThreshold:"<",showPicker:"<"},template:n(997),controller:["ResourceService","AlphaTestService",function(t,n){var a=this;a.$onInit=function(){n.fetch("REGAM-5085").then(function(e){a.regam5085=e.data.isEnabled}),a.toAccountUpdated=function(){a.transferParameters.toAccount=a.allowedDestinationAccounts[0].accountId};var r="FUNDS_TRANSFER"===a.transferParameters.method?"InternalFundsTransfer":"InternalPositionTransfer";a.pickerSource="/AccountManagement/"+r+"/PickerData/"+a.transferParameters.fromAccount,a.validateDestinationAccount=function(){var n="";"FUNDS_TRANSFER"===a.transferParameters.method?n="/InternalFundsTransfer":"POSITION"===a.transferParameters.method&&(n="/InternalPositionTransfer");var r={fromAccount:a.transferParameters.fromAccount,toAccount:a.destinationToSearch};return t.create(e.SERVER_PATH+n+"/isValidDestination",r).then(function(e){a.invalidDestination=!1,a.transferParameters.toAccount=a.destinationToSearch}).catch(function(e){a.invalidDestination=angular.isDefined(e.data.errors)})},a.searchChange=function(){delete a.transferParameters.toAccount}}}]})}},function(e,t){e.exports='<am-form-select ng-if="$ctrl.regam5085 && !$ctrl.destAccountsAboveThreshold && !$ctrl.showPicker" name="toAccount"\n    ng-model="$ctrl.transferParameters.toAccount" options="$ctrl.allowedDestinationAccounts" no-translate="true"\n    label-text="{{\'transfer.label.destinationAccount\' | translate}}" hide-empty-option="true"\n    option-key="$ctrl.getInternalDestinationOption" required>\n</am-form-select>\n\n<am-form-picker\n    ng-if="!$ctrl.destAccountsAboveThreshold && $ctrl.showPicker && $ctrl.regam5085"\n    ng-model="$ctrl.allowedDestinationAccounts"\n    picker-source="{{$ctrl.pickerSource}}"\n    label-text="{{\'transfer.label.destinationAccount\' | translate}}" force-reload="true" max-entry-count="1"\n    model-listener="$ctrl.toAccountUpdated()"    \n    name = "toAccount"></am-form-picker>\n    \n<generic-form-data ng-if="$ctrl.destAccountsAboveThreshold && $ctrl.regam5085"\n    label-text="{{\'transfer.label.destinationAccount\' | translate}}" name="destinationSearch" label-align="top">\n    <div class="row">\n        <am-input class="col-md-10 col-lg-10" ph-text="{{\'transfer.placeholder.destinationSearch\' | translate}}"\n            name="toAccount" ng-model="$ctrl.destinationToSearch" type="text" required\n            model-listener="$ctrl.searchChange()">\n        </am-input>\n        <am-button class="col-md-2 col-lg-2" btn-text="{{\'word.search\' | translate}}" btn-type="primary"\n            on-click="$ctrl.validateDestinationAccount()"></am-button>\n        <div ng-if="$ctrl.invalidDestination" class="col-md-10 col-lg-10 alert alert-danger">\n            <p>{{\'transfer.error.destinationAccount\' | translate}}</p>\n        </div>\n    </div>\n</generic-form-data>'},function(e,t,n){e.exports=function(e){n(999)(e)}},function(e,t,n){e.exports=function(e){e.component("eddaCountdownTimer",{bindings:{waitTime:"<"},template:n(1e3),controller:function(){var e=this;e.$onInit=function(){e.timerClassName="countdown-bar countdown-"+e.waitTime+"s",e.getTimerText=function(){return e.waitTime>=60?e.getWaitTimeInMinutes():"0:"+(e.waitTime<10?"0"+e.waitTime:e.waitTime)},e.getWaitTimeInMinutes=function(){var t=Math.floor(e.waitTime/60);if(e.waitTime%60==0)return t+":00";var n=Number(e.waitTime)-60;return t+":"+(n<10?"0"+n:n)}}}})}},function(e,t){e.exports='<div class="countdown-timer">\r\n    <svg class="countdown">\r\n        <circle cx="90" cy="90" r="75" />\r\n        <circle class="{{$ctrl.timerClassName}}" cx="90" cy="90" r="75" />\r\n        <text id="timer" class="countdown-clock" x="90" y="90" alignment-baseline="central" text-anchor="middle">{{$ctrl.getTimerText()}}</text>\r\n    </svg>\r\n</div>'},function(e,t,n){e.exports=function(e){n(1002)(e)}},function(e,t){e.exports=function(e){e.component("fundingModuleError",{bindings:{error:"@"},template:['<div class="alert alert-warning">',"   <p>{{ $ctrl.error }}</p>","</div>"].join(""),controller:["$translate",function(t){var n=this;n.$onInit=function(){e.name;var a,r,i;n.error=n.error||(a="module.load.error",r="Sorry, something went wrong. Please try again later",(i=t.instant(a))!==a?i:r)}}]})}},function(e,t,n){e.exports=function(e){n(1004)(e)}},function(e,t){e.exports=function(e){e.component("financialInstitutionReview",{bindings:{financialInstitution:"<"},template:function(){var e="";return e+='<div ng-if="$ctrl.financialInstitution.broker.brokerName">',e+='   <am-form-label label-text="{{\'transfer.label.brokerName\' | translate}}" value-text="{{$ctrl.financialInstitution.broker.brokerName}}"></am-form-label>',e+="</div>",e+='<div ng-if="$ctrl.financialInstitution.accountNumber">',e+='   <am-form-label label-text="{{\'transfer.label.brokerAccount\' | translate}}" value-text="{{$ctrl.financialInstitution.accountNumber}}"></am-form-label>',e+="</div>",e}})}},function(e,t,n){e.exports=function(e){n(1006)(e),n(1008)(e)}},function(e,t,n){e.exports=function(e){e.component("fullServiceCashTransferHistory",{require:{$itemManipulator:"^^amItemManipulator"},template:n(1007),controller:["$translate","DynamicSequenceService","ModalService",function(e,t,n){var a=this;a.$onInit=function(){a.showHistoryTable=function(){return a.$itemManipulator.entries.length>0},a.openHistoryDetailsModal=function(t){var a={title:e.instant("simpleIraTransfer.showHistory.modalTitle"),templateUrl:"bulk-transfer-history-modal.component",modalData:{fundingId:t.fundingId,method:"FULL_SERVICE_FUNDING"}};n.openModal(a)},a.getAlertClass=function(e){return"FAILURE"===e?"alert alert-danger":"SUCCESS"===e?"alert alert-success":"alert alert-gray"},a.$itemManipulator.itemControl.load()}}]})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.$itemManipulator.loadInProgress"></loading-overlay>\n<div class="row" ng-if="!$ctrl.$itemManipulator.loadInProgress && !$ctrl.showHistoryTable()">\n    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n        <div class="alert alert-warning">\n            <p>{{\'simpleIraTransfer.history.noRequests\' | translate}}</p>\n        </div>\n    </div>\n</div>\n\n<div class="form-group" ng-if="$ctrl.showHistoryTable()">\n    <div class="row padding-top-15">\n        <div ng-if="$ctrl.$itemManipulator.entries.length > 0" class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n            <table width="100%" cellpadding="0" cellspacing="0" border="0" class="table">\n                <thead>\n                       <tr>\n                         <th width="20%" align="left">{{\'cashTransfer.internal.simpleIraTransferHistory.label.referenceNumber\' | translate}}</th>\n                         <th width="20%" align="left">{{\'cashTransfer.internal.simpleIraTransferHistory.label.requested\' | translate}}</th>\n                         <th width="20%" align="left">{{\'cashTransfer.internal.simpleIraTransferHistory.label.processed\' | translate}}</th>\n                         <th width="20%" align="left">{{\'cashTransfer.internal.simpleIraTransferHistory.label.size\' | translate}}</th>\n                         <th width="15%" align="left">{{\'cashTransfer.internal.simpleIraTransferHistory.label.status\' | translate}}</th>\n                         <th width="5%" align="left">&nbsp;</th>\n                       </tr>\n                </thead>\n                <tbody>\n                    <tr ng-repeat="request in $ctrl.$itemManipulator.entries">\n                        <td align="left">{{request.fundingId}}</td>\n                        <td align="left">{{request.requested}}</td>\n                        <td align="left">{{request.processed}}</td>\n                        <td align="left">{{request.requestSize}}</td>\n                        <td align="left"  ng-class="$ctrl.getAlertClass(request.status)">{{\'simpleIraTransfer.state.\' + request.state | translate}}</td>\n                        <td align="center">\n                            <am-button btn-type="icon" btn-icon="fa-eye" tooltip-text="{{\'word.info\' | translate}}" tooltip-side="right" on-click="$ctrl.openHistoryDetailsModal(request)"></am-button>\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n            <br>\n            <pagination-controls></pagination-controls>\n        </div>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("singleFullServiceCashTransfer",{bindings:{transferRule:"<",transfer:"=",onRemove:"&"},template:n(1009),controller:["ResourceService","InternalTransferService",function(t,n){var a=this;a.$onInit=function(){a.transfer.type="INTERNAL",a.transfer.method="FUNDS_TRANSFER",a.getInternalSourceOption=function(e){return n.getAccountDisplayText(a.transferRule.accountDisplayMap[e])},angular.isDefined(a.transfer.toAccount)&&(a.allowedDestinationAccounts=[a.transfer.toAccount]),a.getInternalDestinationOption=function(e){return n.getAccountDisplayText(a.transferRule.accountDisplayMap[e])},a.onSourceAccountChanged=function(){angular.isDefined(a.transfer.fromAccount)?function(){a.fetchInProgress=!0;var n={method:"FULL_SERVICE_FUNDING",fromAccount:a.transfer.fromAccount};t.create(e.SERVER_PATH+"/InternalFundsTransfer/Destinations",n).then(function(e){angular.isDefined(e.data)&&(a.allowedDestinationAccounts=e.data.allowedDestinationAccounts,a.destinationTitles=e.data.destinationTitles,a.warnings=e.data.warnings)}).finally(function(){a.fetchInProgress=!1})}():a.allowedDestinationAccounts=[]}}}]})}},function(e,t){e.exports='<div class="row">\n     <div class="col-12 col-sm-3">\n          <div>\n              <label class="control-label" translate="transfer.label.sourceAccount"></label>\n          </div>\n          <div>\n              <am-select name="fromAccount" ng-model="$ctrl.transfer.fromAccount" options="$ctrl.transferRule.allowedSourceAccounts" no-translate="true" hide-empty-option="true" option-key="$ctrl.getInternalSourceOption" ng-change="$ctrl.onSourceAccountChanged()" required></am-select>\n          </div>\n     </div>\n     <div class="col-12 col-sm-3">\n          <div>\n             <label class="control-label" translate="transfer.label.destinationAccount"></label>\n          </div>\n          <div>\n             <am-select name="toAccount" ng-model="$ctrl.transfer.toAccount" options="$ctrl.allowedDestinationAccounts" no-translate="true" hide-empty-option="true" option-key="$ctrl.getInternalDestinationOption" required></am-select>\n          </div>\n     </div>\n     <div class="col-12 col-sm-2">\n           <div>\n              <label class="control-label" translate="cashTransfer.internal.singleSimpleIraTransfer.label.amount"></label>\n           </div>\n           <div>\n              <am-input class="w-100 h-100" name="amount" ng-model="$ctrl.transfer.moneyAmount.amount" input-mask-alias="transferAmount" is-required="true"></am-input>\n           </div>      \n     </div>\n     <div class="col-12 col-sm-3">\n           <div>\n              <label class="control-label" translate="word.note"></label>\n           </div>\n           <div>\n              <am-input class="w-100 h-100" name="clientNote" type="text" ng-model="$ctrl.transfer.clientNote"></am-input>\n           </div>\n     </div>\n     <div class="col-12 col-sm-1">\n           <div>\n               &nbsp;\n           </div>\n           <div>\n               <am-button btn-type="icon" btn-icon="fa fa-times" on-click="$ctrl.onRemove()"></am-button>\n           </div>\n     </div>\n</div>\n<hr>'},function(e,t,n){e.exports=function(e){n(1011)(e),n(1014)(e),n(1017)(e),n(1020)(e),n(1022)(e),n(1024)(e)}},function(e,t,n){e.exports=function(e){n(1012)(e)}},function(e,t,n){e.exports=function(e){e.component("achAmountConfirmation",{bindings:{pendingRequest:"<",onCompletion:"<"},template:n(1013),controller:["ModalService","AmInterfaceService","ResourceService","UserPlatformService","ACTIVE_CONTEXT","ApplicationContext",function(t,n,a,r,i,o){var s=this,l=function(){return s.isLoading||angular.isUndefined(s.achConfirmForm)||!s.achConfirmForm.$valid},c=function(){for(var e=n.getPendingItems(),t=0;t<e.length;++t){var a=e[t];angular.isDefined(a.request)&&a.request.id===s.pendingRequest.id&&n.finishPendingItem(a)}},u=function(){s.isLoading=!0,a.update(e.SERVER_PATH+"/AchConfirmation",s.confirmData).then(function(e){s.confirmResult=e.data.result,"FAIL_MAX"!==s.confirmResult&&"SUCCESS"!==s.confirmResult&&"SUCCESS_WARN_PENDING_POI_TASK"!==s.confirmResult&&"SUCCESS_WARN_DEPOSIT_NOT_ALLOWED"!==s.confirmResult||c()}).finally(function(){p(),s.isLoading=!1})},d=function(){s.isLoading=!0,a.delete(e.SERVER_PATH+"/RetailRequest/"+s.requestId).then(function(e){c(),s.onCompletion("CANCEL")},function(e){s.confirmResult="INTERNAL"}).finally(function(){s.isLoading=!1})},p=function(){var e=[];"FAIL_MAX"===s.confirmResult||"SUCCESS"===s.confirmResult||"SUCCESS_WARN_DEPOSIT_NOT_ALLOWED"===s.confirmResult?e.push({label:"word.close",fn:function(){s.onCompletion(s.confirmResult)},alignment:"right"}):"SUCCESS_WARN_PENDING_POI_TASK"===s.confirmResult?(e.push({label:"word.close",fn:function(){s.onCompletion(s.confirmResult)},alignment:"right"}),t.isModalOpen()&&r.isWeb()&&i===o.AM_DEPENDENCY&&e.push({label:"funding.achInstructionCompletion.buttons.gotopendingitems",fn:function(){n.navigateToPendingItems(),t.closeModal(!0)},alignment:"left"})):angular.isDefined(s.confirmType)&&(e.push({label:"word.cancelRequest",fn:d,alignment:"left",btnType:"default"}),e.push({label:"word.verify",fn:u,alignment:"right",btnType:"primary",isDisabled:l})),t.isModalOpen()?t.setModalButtons(e):s.buttons=e};s.$onInit=function(){s.requestId=s.pendingRequest.id,s.confirmData={requestId:s.requestId},s.confirmResult="",s.isLoading=!0,a.fetch(e.SERVER_PATH+"/AchConfirmation/"+s.requestId).then(function(e){s.confirmType=e.data.confirmationType}).finally(function(){p(),s.isLoading=!1})}}]})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.isLoading"></loading-overlay>\n\n\x3c!-- The ACH instruction has not been confirmed --\x3e\n<div ng-show="$ctrl.confirmResult !== \'SUCCESS\' && $ctrl.confirmResult !== \'SUCCESS_WARN_PENDING_POI_TASK\' && $ctrl.confirmResult !== \'SUCCESS_WARN_DEPOSIT_NOT_ALLOWED\'" ng-form="$ctrl.achConfirmForm">\n    <p translate="ach.confirm.instructions" translate-values="{ instructionName : $ctrl.pendingRequest.transferInstruction.instructionName, strongStart : \'<strong>\', strongEnd : \'</strong>\' }"></p>\n    <br />\n\n    <div ng-if="$ctrl.confirmType === \'TWO_CREDIT\'">\n        <am-form-input name="credit1" type="text" ng-model="$ctrl.confirmData.credit1" input-mask-alias="achAmount" label-text="{{\'ach.confirm.label.credit1\' | translate}}" required></am-form-input>\n        <am-form-input name="credit2" type="text" ng-model="$ctrl.confirmData.credit2" input-mask-alias="achAmount" label-text="{{\'ach.confirm.label.credit2\' | translate}}" required></am-form-input>\n    </div>\n    <div ng-if="$ctrl.confirmType === \'DEBIT_CREDIT\'">\n        <am-form-input name="debit1" type="text" ng-model="$ctrl.confirmData.debit1" input-mask-alias="achAmount" label-text="{{\'ach.confirm.label.debit\' | translate}}" required></am-form-input>\n        <am-form-input name="credit1" type="text" ng-model="$ctrl.confirmData.credit1" input-mask-alias="achAmount" label-text="{{\'ach.confirm.label.credit\' | translate}}" required></am-form-input>\n    </div>\n\n    <div ng-if="$ctrl.confirmResult.length" class="row">\n        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n            <div class="alert alert-danger">\n                {{\'ach.confirm.error.\' + $ctrl.confirmResult | translate}}\n            </div>\n        </div>\n    </div>\n</div>\n\n\x3c!-- The ACH instruction has been successfully confirmed --\x3e\n<div ng-show="$ctrl.confirmResult === \'SUCCESS\'" class="row">\n    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n        <div class="alert alert-success">\n            {{\'ach.confirm.success\' | translate}}\n        </div>\n    </div>\n</div>\n\n\x3c!-- The ACH instruction has been successfully confirmed by amounts, but user still needs to complete POI/selfie task before using it--\x3e\n<div ng-show="$ctrl.confirmResult === \'SUCCESS_WARN_PENDING_POI_TASK\'" class="row">\n    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n        <div class="alert alert-success">\n            {{\'ach.confirm.warn.poi.task\' | translate}}\n        </div>\n    </div>\n</div>\n\n\x3c!-- The ACH instruction has been successfully confirmed by amounts, but user is not allowed to do deposits as he has an unsuccessfully completed selfie task --\x3e\n<div ng-show="$ctrl.confirmResult === \'SUCCESS_WARN_DEPOSIT_NOT_ALLOWED\'" class="row">\n    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n        <div class="alert alert-success">\n            {{\'ach.confirm.warn.deposits.not.allowed\' | translate}}\n        </div>\n    </div>\n</div>\n\n<button-list ng-if="$ctrl.buttons" buttons="$ctrl.buttons"></button-list>\n\n<div ng-show="$ctrl.confirmResult !== \'SUCCESS\' && $ctrl.confirmResult !== \'SUCCESS_WARN_PENDING_POI_TASK\'  && $ctrl.confirmResult !== \'SUCCESS_WARN_DEPOSIT_NOT_ALLOWED\'">    \n    <hr>\n    <div class="form-review-condensed">\n        <instruction-review instruction="$ctrl.pendingRequest.transferInstruction"></instruction-review>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){n(1015)(e)}},function(e,t,n){e.exports=function(e){e.component("fopAuthorizationInstructions",{bindings:{authorizationData:"<"},template:n(1016),controller:["$translate","ModalService",function(e,t){var n=this;n.$onInit=function(){n.showAuthorizationForm=function(){var a={title:e.instant("modal.title.AuthorizationForm"),templateUrl:"fop-authorization-modal.component",dialogClass:"modal-lg",modalData:{request:n.authorizationData}};t.openModal(a)},n.showLetterOfAuthorization=function(){var a={title:e.instant("modal.title.LetterOfAuthorization"),templateUrl:"letter-of-authorization-modal.component",dialogClass:"modal-lg",modalData:{request:n.authorizationData}};t.openModal(a)}}}]})}},function(e,t){e.exports='<div class="instructions">\n    <div class="instructions-heading">\n        <i class="fa fa-lg fa-info-circle "></i>\n        {{\'word.instructions\' | translate}}\n    </div>\n    <div class="instructions-body form-review">\n        <div ng-if="$ctrl.authorizationData.transferParameters.method === \'FOP\'">\n            <p>{{\'transfer.position.instruction.fop.heading\' | translate}}</p>\n            <p translate="transfer.position.instruction.fop.sendShares"\n                translate-values="{ strongStart : \'<strong>\', strongEnd : \'</strong>\' }"></p>\n            <p>{{\'transfer.position.instruction.fop.authorizationForm\' | translate}}</p>\n            <p>\n                <am-button btn-text="{{\'word.viewForm\' | translate}}" btn-type="primary"\n                    on-click="$ctrl.showAuthorizationForm()"></am-button>\n            </p>\n        </div>\n        <div ng-if="$ctrl.authorizationData.transferParameters.method === \'ASSET_TRANSFER\'">\n            <p><strong>{{\'transfer.position.instruction.iat.fiInstruct\' | translate}}</strong></p>\n            <br />\n            <p>{{\'transfer.position.instruction.iat.authorizationForm\' | translate}}</p>\n            <p>\n                <am-button btn-text="{{\'word.viewForm\' | translate}}" btn-type="primary"\n                    on-click="$ctrl.showLetterOfAuthorization()"></am-button>\n            </p>\n            <br />\n            <p>{{\'transfer.position.instruction.iat.fiFollow\' | translate}}</p>\n        </div>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){n(1018)(e)}},function(e,t,n){e.exports=function(e){e.component("instructionPanel",{bindings:{instructions:"<",headingText:"@",sectionId:"@",noteText:"@?",onDelete:"<?",onEdit:"<?"},template:n(1019),controller:["$translate","FundingInstructionService","CsTicketService",function(e,t,n){var a=this;a.$onInit=function(){a.deleteInformation=function(e){t.deleteSavedInformation(e).then(function(t){if(angular.isDefined(t)&&"SUCCESS"===t.status&&a.onDelete&&(a.onDelete(e),angular.isDefined(t.deletedInstructions)))for(var n=0;n<t.deletedInstructions.length;++n)a.onDelete(t.deletedInstructions[n])})},a.editInformation=function(e){t.editSavedInformation(e).then(function(t){angular.isDefined(t)&&"SUCCESS"===t.status&&a.onEdit&&a.onEdit(e)})},a.getInstructionNameText=t.getInstructionNameText,a.getSubText=t.getInstructionSubText,a.navigateToSupport=function(e){n.openTicket(0,e.accountId)}}}]})}},function(e,t){e.exports='<section class="panel">\r\n    <div class="panel-heading">\r\n        <span class="heading">{{$ctrl.headingText}}</span>\r\n    </div>\r\n    <div class="panel-body panel-padding">\r\n        <div page-structure="innerContent">\r\n            <div ng-if="$ctrl.noteText.length" class="alert alert-info">\r\n                {{$ctrl.noteText}}\r\n            </div>\r\n            <div class="accordion" id="{{$ctrl.sectionId}}">\r\n                <div class="accordion-item" ng-repeat="information in $ctrl.instructions track by $index">\r\n                    <h2 class="accordion-header" id="{{$ctrl.sectionId}}-{{$index}}">\r\n                        <button class="accordion-button collapsed" type="button" data-toggle="collapse" data-target="#collapse{{$ctrl.sectionId}}-{{$index}}" aria-expanded="false" aria-controls="collapse{{$ctrl.sectionId}}-{{$index}}">\r\n                            {{$ctrl.getInstructionNameText(information.instruction)}}\r\n                            <span class="hidden-sm hidden-md hidden-lg"><br/></span>\r\n                            <span class="text-small">{{$ctrl.getSubText(information.instruction)}}</span>\r\n                        </button>\r\n                        <span class="btn-group-right"> \r\n                            <am-button btn-type="icon" on-click="$ctrl.editInformation(information)" btn-icon="fa-pencil-alt" is-disabled="!information.editable" tooltip-text="{{\'word.edit\' | translate}}" ></am-button> \r\n                            <am-button btn-type="icon" on-click="$ctrl.deleteInformation(information)" btn-icon="fa-times" is-disabled="!information.deletable || information.scheduledTransactions.length" tooltip-text="{{\'word.delete\' | translate}}"></am-button>\r\n                        </span>\r\n                    </h2>\r\n                    <div id="collapse{{$ctrl.sectionId}}-{{$index}}" class="accordion-collapse collapse" aria-labelledby="{{$ctrl.sectionId}}-{{$index}}" data-parent="">\r\n                        <div class="accordion-body">\r\n                            <div ng-if="information.pendingReason !== \'NONE\' && information.pendingReason !== \'SCB_NOT_CONFIRMED\' && information.pendingReason !== \'CLIENT_RESPONSE\'" class="alert alert-info">\r\n                                {{\'instruction.pending.\' + information.pendingReason | translate}} \r\n                            </div>\r\n                            <div ng-if="information.pendingReason === \'CLIENT_RESPONSE\'" class="alert alert-info row align-items-center p-0">\r\n                                <div class="col-xs-12 col-sm-10 col-md-10 col-lg-10 p-10">\r\n                                    <span>{{\'instruction.pending.\' + information.pendingReason | translate}}</span>\r\n                                </div>\r\n                                <div class="col-xs-12 col-sm-2 col-md-2 col-lg-2 p-10" align="center">\r\n                                    <am-button btn-size="small" on-click="$ctrl.navigateToSupport(information)" btn-type="primary" btn-text="{{\'instruction.pending.messageCenter.button\' | translate}}"></am-button>\r\n                                </div>\r\n                             </div>\r\n                            <instruction-review instruction="information.instruction"></instruction-review>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</section>'},function(e,t,n){e.exports=function(e){n(3)(e,"instructionForm",{bindings:{instructionParameters:"<",instructionRules:"<",transferParameters:"<?",transferRules:"<?"},template:n(1021)},function(){return[n.e(27).then(n.t.bind(null,1934,7)),n.e(27).then(n.t.bind(null,1935,7)),n.e(27).then(n.t.bind(null,1936,7)),n.e(27).then(n.t.bind(null,1937,7)),n.e(27).then(n.t.bind(null,1938,7)),n.e(27).then(n.t.bind(null,1939,7)),n.e(27).then(n.t.bind(null,1940,7)),n.e(27).then(n.t.bind(null,1941,7)),n.e(27).then(n.t.bind(null,1942,7)),n.e(27).then(n.t.bind(null,1943,7)),Promise.resolve().then(n.t.bind(null,308,7))]})}},function(e,t){e.exports='<div ng-switch on="$ctrl.instructionParameters.instructionType">\n    \x3c!-- Recurring Instruction --\x3e\n    <div ng-switch-when="RECURRING">\n        <recurring-instruction-form instruction-parameters="$ctrl.instructionParameters" instruction-rules="$ctrl.instructionRules" transfer-parameters="$ctrl.transferParameters"></recurring-instruction-form>\n    </div>\n    \n    \x3c!-- Position Instruction --\x3e\n    <div ng-switch-when="POSITION|ASSET" ng-switch-when-separator="|">\n        <position-instruction-form instruction-parameters="$ctrl.instructionParameters" transfer-parameters="$ctrl.transferParameters" instruction-rules="$ctrl.instructionRules" transfer-rules="$ctrl.transferRules"></position-instruction-form>\n    </div>\n    \n    \x3c!-- Cash Instruction --\x3e\n    <div ng-switch-default>\n        <div ng-if="$ctrl.instructionRules.instructionCreationAllowed" ng-switch on="$ctrl.transferRules.instructionRequirements">\n            <div ng-switch-when="OPTIONAL">\n                <am-form-switch ng-model="$ctrl.instructionParameters.createInstruction" label-text="{{\'transfer.label.saveBankInformation\' | translate}}"></am-form-switch>\n            </div>\n            <div ng-switch-when="REQUIRED">\n                <am-form-label ng-if="!$ctrl.transferRules.combinedAllowed && ($ctrl.transferParameters.method !== \'EDDA\' || $ctrl.instructionRules.allowedCurrencyTypes.length === 1)" label-text="{{\'word.currency\' | translate}}" value-text="{{$ctrl.transferParameters.moneyAmount.currencyType}}"></am-form-label>\n                <am-form-select ng-if="::!$ctrl.transferRules.combinedAllowed && $ctrl.instructionRules.allowedCurrencyTypes.length > 1" name="currencyType" ng-model="$ctrl.transferParameters.moneyAmount.currencyType" options="$ctrl.instructionRules.allowedCurrencyTypes" label-text="{{\'transfer.label.currency\' | translate}}" option-key="\'currency.\'" hide-empty-option="true" required></am-form-select>\n            </div>\n        </div>\n\n        <div ng-switch on="$ctrl.transferParameters.method">\n            <div ng-switch-when="ACH|EFT|SEPA|LVP" ng-switch-when-separator="|">\n                <ach-instruction-form instruction-parameters="$ctrl.instructionParameters" instruction-rules="$ctrl.instructionRules" transfer-parameters="$ctrl.transferParameters"></ach-instruction-form>\n            </div>\n\n            <div ng-switch-when="WIRE|ZENGIN|NEFT|RTGS" ng-switch-when-separator="|">\n                <wire-instruction-form instruction-parameters="$ctrl.instructionParameters" instruction-rules="$ctrl.instructionRules" transfer-parameters="$ctrl.transferParameters"></wire-instruction-form>\n            </div>\n\n             <div ng-switch-when="CHECK">\n                <check-instruction-form instruction-parameters="$ctrl.instructionParameters" instruction-rules="$ctrl.instructionRules" transfer-parameters="$ctrl.transferParameters"></check-instruction-form>\n            </div>\n\n            <div ng-switch-when="HK_BANK_NOTIFICATION|FPS_NOTIFICATION|EDDA" ng-switch-when-separator="|">\n                <hk-bank-form wide-form instruction-parameters="$ctrl.instructionParameters" instruction-rules="$ctrl.instructionRules" transfer-parameters="$ctrl.transferParameters"></hk-bank-form>\n            </div>\n            \n            <div ng-switch-when="SG_BANK_NOTIFICATION">\n                <sg-bank-notification-form wide-form instruction-parameters="$ctrl.instructionParameters" instruction-rules="$ctrl.instructionRules" transfer-parameters="$ctrl.transferParameters"></sg-bank-notification-form>\n            </div>\n            \n            \x3c!--\n                XXX\n                If a method-specific form isn\'t detected, a notification\n                instruction is the default\n            --\x3e\n            <div ng-switch-default>\n                <notification-instruction-form instruction-parameters="$ctrl.instructionParameters" instruction-rules="$ctrl.instructionRules" transfer-parameters="$ctrl.transferParameters"></notification-instruction-form>\n            </div>\n        </div>\n        \n        <div ng-if="$ctrl.transferRules.operatorNoteRequired && $ctrl.instructionRules.instructionCreationAllowed && $ctrl.instructionParameters.createInstruction">\n             <am-form-textarea name="operatorNote" ng-model="$ctrl.instructionParameters.operatorNote" label-text="{{\'transfer.label.operatorNote\' | translate}}" cols="100" required></am-form-textarea>\n             <am-form-input ng-if="$ctrl.transferParameters.method === \'CHECK\'" name="ticketNumber" ng-model="$ctrl.instructionParameters.ticketNumber" label-text="{{\'transfer.label.ticketNumber\' | translate}}" required></am-form-input>\n             <withdrawal-doc-upload ng-if="$ctrl.transferParameters.method === \'CHECK\'" attachment-data="$ctrl.instructionParameters.operatorAttachmentData" ></withdrawal-doc-upload>\n        </div>\n        <hr>\n    </div>\n</div>\n'},function(e,t,n){e.exports=function(e){n(3)(e,"instructionReview",{bindings:{instruction:"<",hideStatus:"<?",hideRequestReviewInfo:"<"},template:n(1023)},function(){return[n.e(0).then(n.t.bind(null,1944,7)),n.e(0).then(n.t.bind(null,1945,7)),n.e(0).then(n.t.bind(null,1946,7)),n.e(0).then(n.t.bind(null,1947,7)),n.e(0).then(n.t.bind(null,1948,7)),n.e(0).then(n.t.bind(null,1949,7)),n.e(0).then(n.t.bind(null,1950,7)),n.e(0).then(n.t.bind(null,1951,7)),n.e(0).then(n.t.bind(null,1952,7))]})}},function(e,t){e.exports='<div ng-switch on="$ctrl.instruction.instructionType">\n    <div ng-switch-when="ACH|RFP" ng-switch-when-separator="|">\n        <ach-instruction-review instruction="$ctrl.instruction" hide-request-review-info="$ctrl.hideRequestReviewInfo"></ach-instruction-review>\n    </div>\n    \n    <div ng-switch-when="NOTIFICATION">\n        <notification-instruction-review instruction="$ctrl.instruction"></notification-instruction-review>\n    </div>\n\n    <div ng-switch-when="POSITION|ASSET" ng-switch-when-separator="|">\n        <position-instruction-review instruction="$ctrl.instruction"></position-instruction-review>\n    </div>\n\n    <div ng-switch-when="RECURRING">\n        <recurring-instruction-review instruction="$ctrl.instruction"></recurring-instruction-review>\n    </div>\n    \n    <div ng-switch-when="WIRE">\n        <wire-instruction-review instruction="$ctrl.instruction" hide-request-review-info="$ctrl.hideRequestReviewInfo"></wire-instruction-review>\n    </div>\n\n    <div ng-switch-when="CHECK">\n        <check-instruction-review instruction="$ctrl.instruction"></check-instruction-review>\n    </div>\n\n    <div ng-switch-when="INTERNAL_TRANSFER_LINKAGE">\n        <internal-transfer-linkage-review instruction="$ctrl.instruction"></internal-transfer-linkage-review>\n    </div>\n    \n    <div ng-switch-when="EDDA">\n        <edda-instruction-review instruction="$ctrl.instruction" hide-status="$ctrl.hideStatus"></edda-instruction-review>\n    </div>\n    \n    <div ng-switch-when="WISE">\n        <wise-instruction-review instruction="$ctrl.instruction"></wise-instruction-review>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){n(1025)(e)}},function(e,t,n){e.exports=function(e){e.component("tbszPositionInstructionForm",{bindings:{transferInstruction:"<",instructionRules:"<",operationType:"<"},template:n(1026),controller:[function(){var e=this;e.$onInit=function(){e.getBrokerOption=function(e){return e.brokerName}}}]})}},function(e,t){e.exports='<am-form-select name="broker" ng-model="$ctrl.transferInstruction.contraBrokerAccount.broker" chosen-select option-key="$ctrl.getBrokerOption" options="$ctrl.instructionRules.availableBrokers" label-text="{{\'tbsz.\' + $ctrl.operationType + \'.receivingBroker\' | translate}}"  empty-option-text="{{ \'tbsz.field.BrokerNotFound\' | translate }}"></am-form-select>\n<am-form-input name="accountNumber"  ng-model="$ctrl.transferInstruction.contraBrokerAccount.accountNumber" type="text" label-text="{{\'tbsz.\' + $ctrl.operationType + \'.accountId\' | translate}}" required></am-form-input>\n<am-form-input name="customerNumber"  ng-model="$ctrl.transferInstruction.contraBrokerAccount.customerNumber" type="text" label-text="{{\'tbsz.\' + $ctrl.operationType + \'.customerId\' | translate}}" required></am-form-input>\n'},function(e,t,n){e.exports=function(e){n(1028)(e),n(1030)(e),n(1032)(e),n(1034)(e),n(1036)(e),n(1038)(e)}},function(e,t,n){e.exports=function(e){e.component("iraDetailsTable",{bindings:{transferRules:"<",transferType:"<",hideHeading:"<"},template:n(1029),controller:["$translate","currencyFilter","IraContributionService",function(e,t,n){var a=this;a.$onInit=function(){a.iraInformation=function(e,a){var r,i={},o=e.iraRules,s=o.isa||angular.isDefined(e)&&e.destinationIsa,l=angular.isDefined(o.allowedIraDepositTypes)&&o.allowedIraDepositTypes.length>0,c=l&&angular.isDefined(e)&&e.destinationCanadian;if(r=o.canadian||c?"CAD ":s?"GBP ":"USD ","DEPOSIT"===a||"INTERNAL"===a&&(s||l)){var u={};for(var d in o.allowedContributionYears)if(o.allowedContributionYears.hasOwnProperty(d))for(var p=o.allowedContributionYears[d],g=0;g<p.length;++g)u[p[g]]=!0;var f="DEPOSIT"===a?Object.keys(u):Object.keys(o.maximumAllowedContributions);for(var m in f){var v=f[m],h={},b=o.expectedSourceIraType;if(h["Tax Year"]=n.getDisplayYear(v,o),"SEP"===b||"SEP_INHERITED"===b){var y=o.maximumAllowedEmployeeContributions[v]+o.yearToDateEmployeeContributions[v],D=(o.maximumAllowedEmployeeContributions[v],o.yearToDateEmployeeContributions[v]),E=o.maximumAllowedEmployerContributions[v]+o.yearToDateEmployerContributions[v],x=(o.maximumAllowedEmployerContributions[v],o.yearToDateEmployerContributions[v]);h["Maximum Employee Contribution Limit"]=y>0?t(y,r):"-",h["Year to Date Employee Contribution"]=t(D,r),h["Maximum Employer Contribution Limit"]=E>0?t(E,r):"-",h["Year to Date Employer Contribution"]=t(x,r)}else{var A=o.yearToDateContributions[v],C=o.maximumAllowedContributions[v];if(-1==C)var T=o.maximumAllowedContributions[v];else T=o.maximumAllowedContributions[v]+o.yearToDateContributions[v];h["Maximum Contribution Limit"]=T>0?t(T,r):"-",h["Allowed Contribution Limit"]=C>=0?t(C,r):"-",h["Year to Date Contribution"]=t(A,r)}i[v]=h}}else if("WITHDRAWAL"===a){var S=o.yearToDateTotal;for(var v in S)(h={})["Tax Year"]=n.getDisplayYear(v,o),h["Year to Date Total"]=t(o.yearToDateTotal[v],r),i[v]=h}return i}(a.transferRules,a.transferType),a.getTransferHeading=function(){return"DEPOSIT"!==a.transferType||a.transferRules.iraRules.isa?"DEPOSIT"===a.transferType&&a.transferRules.iraRules.isa||a.transferRules.destinationIsa?e.instant("funding.createCashTransfer.heading.isacontribution"):"WITHDRAWAL"===a.transferType?e.instant("iraInformation.heading.distribution"):"INTERNAL"===a.transferType&&angular.isDefined(a.transferRules.iraRules.allowedIraDepositTypes)&&a.transferRules.iraRules.allowedIraDepositTypes.length>0?e.instant("iraInformation.heading.contribution"):void 0:e.instant("iraInformation.heading.contribution")}}}]})}},function(e,t){e.exports='<div class="table-responsive" >\n    <h4 ng-if="!$ctrl.hideHeading">{{::$ctrl.getTransferHeading()}}</h4>\n    <p ng-if="$ctrl.hideHeading" class="text-dark">{{::$ctrl.getTransferHeading()}}</p>\n    <table class="table table-bordered table-condensed" width="100%" cellpadding="0" cellspacing="0" border="0">\n        <thead>\n            <tr ng-repeat="iraPerYearInfo in ::$ctrl.iraInformation" ng-if="$first">\n                <th valign="middle" align="center" ng-repeat="(iraParameter, iraData) in ::iraPerYearInfo">\n                    {{::iraParameter}}\n                </th>\n            </tr>\n        </thead>\n        <tbody>\n            <tr ng-repeat="iraPerYearInfo in ::$ctrl.iraInformation">\n                <td valign="middle" align="center" ng-repeat="iraData in ::iraPerYearInfo" ng-class="{ \'text-bold\' : ($first || $last) }">\n                    {{::iraData}}\n                </td>\n            </tr>\n        </tbody>\n    </table>\n    <br>\n</div>'},function(e,t,n){e.exports=function(e){e.component("amFormTaxWithholding",{require:{parentForm:"^^form"},bindings:{federalTaxWithholdingRate:"=",stateTaxWithholdingRate:"=",iraWithholdingRules:"<",amount:"<"},template:n(1031),controller:["$translate","IraWithholdingService",function(e,t){var n=this,a=function(){return angular.isUndefined(n.amount)?0:n.amount};n.$onInit=function(){n.currencyType=n.currencyType||"USD",n.federalWithholdingRule=n.iraWithholdingRules.federalWithholdingRule,n.stateWithholdingRule=n.iraWithholdingRules.stateWithholdingRule,n.withholdingState=n.iraWithholdingRules.withholdingState,n.currencyType=n.iraWithholdingRules.currencyType;var r=n.federalWithholdingRule&&"FORCE_NEVER"!==n.federalWithholdingRule.withholdingRequirement;n.withholdFederalTax=r,n.federalTaxWithholdingRate=r?t.getMinimumWithholdingRate(n.federalWithholdingRule,a()):0;var i=!1;if(angular.isDefined(n.stateWithholdingRule)){var o=n.stateWithholdingRule.withholdingRequirement;i="FORCE_ALWAYS"===o||"FORCE_IF_FEDERAL"===o&&r}n.withholdStateTax=i,n.stateTaxWithholdingRate=i?t.getMinimumWithholdingRate(n.stateWithholdingRule,a(),n.federalTaxWithholdingRate):0,n.isFederalWithholdingDisabled=!t.isWithholdingOptional(n.federalWithholdingRule),n.isStateWithholdingDisabled=!t.isWithholdingOptional(n.stateWithholdingRule),n.isWithholdingOptional=t.isWithholdingOptional,n.isWithholdingModifiable=t.isWithholdingModifiable,n.getWithholdingAmountText=function(n){var r;r="MINIMUM_FEDERAL_WITHHOLDING_PERCENT"===n.withholdingAmountRequirement?n.minimum:t.getMinimumWithholdingRate(n,a());var i="transfer.withholding.amountRequirements."+(t.isWithholdingOptional(n)?"voluntary.":"")+n.withholdingAmountRequirement;return e.instant(i,{amount:r})},n.getFederalWithholding=function(){return.01*a()*n.federalTaxWithholdingRate},n.getStateWithholding=function(){return.01*a()*n.stateTaxWithholdingRate},n.isFederalRangeActive=function(e){return!!n.withholdFederalTax&&t.getMinimumWithholdingRate(n.federalWithholdingRule,a())===e.withholdingRate},n.isStateRangeActive=function(e){return!!n.withholdStateTax&&t.getMinimumWithholdingRate(n.stateWithholdingRule,a(),n.federalTaxWithholdingRate)===e.withholdingRate},n.onWithholdFederalTaxChange=function(){var e=n.withholdFederalTax;"FORCE_IF_FEDERAL"===n.stateWithholdingRule.withholdingRequirement&&(n.isStateWithholdingDisabled=e,n.isStateWithholdingDisabled&&(n.withholdStateTax=!0)),e?(n.parentForm.federalTaxWithholdingRate&&n.parentForm.federalTaxWithholdingRate.$setDirty(),n.federalTaxWithholdingRate=t.getMinimumWithholdingRate(n.federalWithholdingRule,a())):(n.federalTaxWithholdingRate=0,n.parentForm.federalTaxWithholdingRate&&n.parentForm.federalTaxWithholdingRate.$setValidity("minimum_amount",!0))},n.onWithholdStateTaxChange=function(){n.withholdStateTax?(n.parentForm.stateTaxWithholdingRate&&n.parentForm.stateTaxWithholdingRate.$setDirty(),n.stateTaxWithholdingRate=t.getMinimumWithholdingRate(n.stateWithholdingRule,a(),n.federalTaxWithholdingRate)):(n.stateTaxWithholdingRate=0,n.parentForm.stateTaxWithholdingRate&&n.parentForm.stateTaxWithholdingRate.$setValidity("minimum_amount",!0))},n.validateWithholdings=function(){a();if(n.withholdFederalTax){var e=t.getMinimumWithholdingRate(n.federalWithholdingRule,a());"GRADUATED_FORCED_CUMULATIVE_DISTRIBUTION_PERCENT"===n.federalWithholdingRule.withholdingAmountRequirement&&(n.federalTaxWithholdingRate=e);var r=n.federalTaxWithholdingRate>=e;n.parentForm.federalTaxWithholdingRate&&n.parentForm.federalTaxWithholdingRate.$setValidity("minimum_amount",r)}if(n.withholdStateTax){e=t.getMinimumWithholdingRate(n.stateWithholdingRule,a(),n.federalTaxWithholdingRate);"GRADUATED_FORCED_CUMULATIVE_DISTRIBUTION_PERCENT"===n.stateWithholdingRule.withholdingAmountRequirement&&(n.stateTaxWithholdingRate=e);r=n.stateTaxWithholdingRate>=e;n.parentForm.stateTaxWithholdingRate&&(n.parentForm.stateTaxWithholdingRate.$setDirty(),n.parentForm.stateTaxWithholdingRate.$setValidity("minimum_amount",r))}},n.onWithholdFederalTaxChange()},n.$onChanges=function(e){e.amount&&angular.isFunction(n.validateWithholdings)&&n.validateWithholdings()}}]})}},function(e,t){e.exports='\x3c!--\r\n    Federal Withholding\r\n--\x3e\r\n<div ng-if="$ctrl.federalWithholdingRule.withholdingRequirement !== \'FORCE_NEVER\'">\r\n    <br />\r\n    <h6 class="subtitle">{{\'transfer.heading.federalWithholding\' | translate}}</h6>\r\n    <p>{{\'transfer.withholding.requirements.federal.\' + $ctrl.federalWithholdingRule.withholdingRequirement | translate}}</p>\r\n    <p ng-if="$ctrl.federalWithholdingRule.withholdingAmountRequirement !== \'NONE\'">{{$ctrl.getWithholdingAmountText($ctrl.federalWithholdingRule)}}</p>\r\n\r\n    <div ng-if="$ctrl.federalWithholdingRule.withholdingAmountRequirement === \'GRADUATED_MINIMUM_TOTAL_DISTRIBUTION_PERCENT\' || $ctrl.federalWithholdingRule.withholdingAmountRequirement === \'GRADUATED_FORCED_CUMULATIVE_DISTRIBUTION_PERCENT\'">\r\n        <br />\r\n        <table class="table">\r\n            <tr>\r\n                <th align="left">{{\'transfer.label.amount\' | translate}}</th>\r\n                <th align="left">{{\'transfer.label.withholdingRate\' | translate}}</th>\r\n            </tr>\r\n            <tr ng-repeat="range in $ctrl.federalWithholdingRule.graduatedRanges" ng-class="{ \'success\' : $ctrl.isFederalRangeActive(range) }">\r\n                <td>\r\n                    {{(range.minimum | currency:$ctrl.currencyType + \' \':2) + (range.maximum >= 0 ? \' - \' + (range.maximum | currency:\'\') : \'+\')}}\r\n                </td>\r\n                <td>{{range.withholdingRate}}%</td>\r\n            </tr>\r\n        </table>\r\n    </div>\r\n    <br />\r\n\r\n    <am-form-switch ng-if="$ctrl.isWithholdingOptional($ctrl.federalWithholdingRule)" name="withholdFederalTax" ng-model="$ctrl.withholdFederalTax" model-listener="$ctrl.onWithholdFederalTaxChange()" label-text="{{\'transfer.label.withholdFederal\' | translate}}" is-disabled="$ctrl.isFederalWithholdingDisabled"></am-form-switch>\r\n\r\n    <am-form-input name="federalTaxWithholdingRate" ng-model="$ctrl.federalTaxWithholdingRate" model-listener="$ctrl.validateWithholdings()" label-text="{{\'transfer.label.withholdingAmount\' | translate}}" input-mask-alias="am_percentage" is-disabled="!$ctrl.withholdFederalTax || !$ctrl.isWithholdingModifiable($ctrl.federalWithholdingRule)" is-required="$ctrl.withholdFederalTax"></am-form-input>\r\n\r\n    <am-form-label label-text="{{\'transfer.label.totalFederalWithholding\' | translate}}" value-text="{{$ctrl.getFederalWithholding() | currency:$ctrl.currencyType + \' \':2}}"></am-form-label>\r\n</div>\r\n\r\n\x3c!--\r\n    State Withholding \r\n--\x3e\r\n<div ng-if="$ctrl.stateWithholdingRule.withholdingRequirement !== \'FORCE_NEVER\'">\r\n    <br />\r\n    <h6 class="subtitle">{{\'transfer.heading.stateWithholding\' | translate}}</h6>\r\n    <p translate="{{\'transfer.withholding.requirements.state.\' + $ctrl.stateWithholdingRule.withholdingRequirement}}" translate-values="{ state : $ctrl.withholdingState.dbName }"></p>\r\n    <p ng-if="$ctrl.stateWithholdingRule.withholdingAmountRequirement !== \'NONE\'">{{$ctrl.getWithholdingAmountText($ctrl.stateWithholdingRule)}}</p>\r\n\r\n    <div ng-if="$ctrl.stateWithholdingRule.withholdingAmountRequirement === \'GRADUATED_MINIMUM_TOTAL_DISTRIBUTION_PERCENT\' || $ctrl.stateWithholdingRule.withholdingAmountRequirement === \'GRADUATED_FORCED_CUMULATIVE_DISTRIBUTION_PERCENT\'">\r\n        <br />\r\n        <table class="table">\r\n            <tr>\r\n                <th align="left">{{\'transfer.label.amount\' | translate}}</th>\r\n                <th align="left">{{\'transfer.label.withholdingRate\' | translate}}</th>\r\n            </tr>\r\n            <tr ng-repeat="range in $ctrl.stateWithholdingRule.graduatedRanges" ng-class="{ \'success\' : $ctrl.isStateRangeActive(range) }">\r\n                <td>\r\n                    {{(range.minimum | currency:$ctrl.currencyType + \' \':2) + (range.maximum >= 0 ? \' - \' + (range.maximum | currency:\'\') : \'+\')}}\r\n                </td>\r\n                <td>{{range.withholdingRate}}%</td>\r\n            </tr>\r\n        </table>\r\n    </div>\r\n    <br />\r\n\r\n    <am-form-switch ng-if="$ctrl.isWithholdingOptional($ctrl.stateWithholdingRule)" name="withholdStateTax" ng-model="$ctrl.withholdStateTax" model-listener="$ctrl.onWithholdStateTaxChange()" label-text="{{\'transfer.label.withholdState\' | translate}}" is-disabled="$ctrl.isStateWithholdingDisabled"></am-form-switch>\r\n\r\n    <am-form-input name="stateTaxWithholdingRate" ng-model="$ctrl.stateTaxWithholdingRate" model-listener="$ctrl.validateWithholdings()" label-text="{{\'transfer.label.withholdingAmount\' | translate}}" input-mask-alias="am_percentage" is-disabled="!$ctrl.withholdStateTax || !$ctrl.isWithholdingModifiable($ctrl.stateWithholdingRule)" is-required="$ctrl.withholdStateTax"></am-form-input>\r\n\r\n    <am-form-label label-text="{{\'transfer.label.totalStateWithholding\' | translate}}" value-text="{{$ctrl.getStateWithholding() | currency:$ctrl.currencyType + \' \':2}}"></am-form-label>\r\n</div>'},function(e,t,n){e.exports=function(e){e.component("iraActivityHistory",{template:n(1033),bindings:{activityHistory:"<",ytdTotal:"<?",activityType:"<",activityYear:"<"},controller:["$translate",function(e){var t=this;t.$onInit=function(){t.activityType=e.instant("iraActivity.label."+t.activityType)}}]})}},function(e,t){e.exports='<div class="row mt-3">\n    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n        <div ng-if="$ctrl.activityHistory.length">\n            <div class="table-responsive">\n                <table class="table table-bordered table-condensed">\n                    <thead>\n                        <tr>\n                            <th align="left" valign="middle" width="60%">{{\n                                "iraActivity.label.activityType" | translate }}</th>\n                            <th align="right" valign="middle" width="20%">{{\n                                "iraActivity.label.date" | translate }}</th>\n                            <th align="right" valign="middle" width="20%">{{\n                                "iraActivity.label.amount" | translate }}</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr ng-repeat="activity in $ctrl.activityHistory">\n                            <td align="left" valign="middle">{{activity.typeDescription\n                                | translate}}</td>\n                            <td align="right" valign="middle">{{activity.processedDate}}</td>\n                            <td align="right" valign="middle">{{activity.amount |\n                                number:2}} USD</td>\n                        </tr>\n                        <tr ng-if="$ctrl.ytdTotal" class="bg-light-gray">\n                            <td></td>\n                            <td align="right" valign="middle"><strong>{{\n                                    "iraActivity.label.ytd" | translate }}</strong></td>\n                            <td align="right" valign="middle"><strong>{{$ctrl.ytdTotal\n                                    | number:2}} USD</strong></td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n        </div>\n        <div ng-if="!$ctrl.activityHistory.length" class="alert alert-gray">\n            <p class="text-center" translate="iraActivity.heading.history.nodata"\n                translate-values="{activityType: $ctrl.activityType, activityYear: $ctrl.activityYear, strongStart: \'<strong>\', strongEnd: \'</strong>\' }"></p>\n        </div>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("iraConversionRequestErrors",{bindings:{errors:"<"},template:n(1035)})}},function(e,t){e.exports='<div class="alert alert-danger">\n    <p ng-if="$ctrl.errors.length === 1 && $ctrl.errors[0].type === \'CUSTOM_BACKEND_ERROR\' ">\n        {{$ctrl.errors[0].stringValue}} \n    </p> \n    <p ng-if="$ctrl.errors.length === 1 && $ctrl.errors[0].type !== \'CUSTOM_BACKEND_ERROR\' "> \n        {{ \'ira.error.account.\' + $ctrl.errors[0].type | translate}} \n    </p> \n    <ul ng-if="$ctrl.errors.length > 1"> \n        <li ng-repeat="error in $ctrl.errors"> \n            <p ng-if="error.type === \'CUSTOM_BACKEND_ERROR\' "> \n                {{error.stringValue}} \n            </p> \n            <p ng-if="error.type !== \'CUSTOM_BACKEND_ERROR\' "> \n                {{ \'ira.error.account.\' + error.type | translate}} \n            </p> \n        </li> \n    </ul> \n</div> \n<br>'},function(e,t,n){e.exports=function(e){e.component("iraConversionPosBalanceSelection",{require:{$itemManipulator:"^^amItemManipulator",$positionTransferForm:"^^iraConversionPosTransferForm",parentForm:"^^form"},template:n(1037),controller:["FundingService",function(e){var t=this,n=function(n){for(var a=0;a<n.entries.length;++a){var r=n.entries[a],i=t.$positionTransferForm.getSelectedAsset(r.details);angular.isDefined(i)?(i.availableQuantity=r.availableQuantity,i.availableBondQuantity=r.availableBondQuantity,i.isSelected=!0,n.entries[a]=i):r.quantity=0;var o=e.getConId(r.details);n.entries[a].conId=o}t.$itemManipulator.loadInProgress=!1},a=function(){var e=t.$itemManipulator.getFilterService();return!angular.isUndefined(e)&&!angular.isUndefined(e.filters.positionText)&&e.filters.positionText.enabled};t.$onInit=function(){if(t.$itemManipulator.loadInProgress=!0,t.showSelections=function(){return e=t.$itemManipulator.services.PAGINATION,angular.isDefined(e)&&e.hasPageControls||a();var e},t.showPositionTable=function(){return t.$itemManipulator.entries.length>0||a()},t.assetSelected=function(e){e.isSelected?e.quantity=t.getAvailableQuantity(e):(t.parentForm["assetQuantity_"+e.conId].$setValidity("invalid",!0),e.quantity=0),t.$positionTransferForm.onBalanceSelect(e)},t.assetQuantityChanged=function(e){var n="assetQuantity_"+e.conId,a=+e.quantity,r=t.getAvailableQuantity(e);r<0&&(a<r||a>=0)?t.parentForm[n].$setValidity("invalid",!1):r>0&&(a>r||a<=0)?t.parentForm[n].$setValidity("invalid",!1):t.parentForm[n].$setValidity("invalid",!0),t.$positionTransferForm.recompAssetTotal()},t.getAssetMask=function(e){var n=t.$positionTransferForm.transferRules.fractionalTransferSupported;return"SHORT"===e.quantityType?n?"positionAmountNegative":"quantityNegative":n?"positionAmountPositive":"quantityPositive"},t.getAvailableQuantity=function(e){return angular.isDefined(t.quantityRules)&&t.quantityRules[e.details.type].bondQuantity?e.availableBondQuantity:e.availableQuantity},t.quantityRules={},angular.isDefined(t.$positionTransferForm.transferRules.assetQuantityRules))for(var e=0;e<t.$positionTransferForm.transferRules.assetQuantityRules.length;++e){var r=t.$positionTransferForm.transferRules.assetQuantityRules[e];t.quantityRules[r.assetRules.type]=r}t.$itemManipulator.itemHooks.load.push(n),t.$itemManipulator.itemHooks.update.push(n);var i=t.$positionTransferForm.transferParameters;t.$itemManipulator.itemControl.customUpdate("AllowedPositionService",{transferParameters:{type:i.type,method:i.method}})}}]})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.$itemManipulator.loadInProgress"></loading-overlay>\n\n<div class="row" ng-if="!$ctrl.$itemManipulator.loadInProgress && !$ctrl.showPositionTable()">\n    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n        <div class="alert alert-warning">\n            <p>{{\'transfer.noPositions\' | translate}}</p>\n        </div>\n    </div>\n</div>\n\n<div class="form-group" ng-if="$ctrl.showPositionTable()">\n    <div class="row" ng-if="$ctrl.$itemManipulator.entries.length > 0">\n        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n            <div class="alert alert-info">\n                <p translate="transfer.position.positionBalances.filtered" translate-values="{ strongStart : \'<strong>\', strongEnd : \'</strong>\' }"></p>\n            </div>\n        </div>\n    </div>\n\n    <div class="row">\n        <div class="col-xs-12 col-sm-12 col-md-3 col-lg-3">\n            <freeform-text-filter filter-id="positionText" placeholder-key-prefix="data.filter.option.placeholder."></freeform-text-filter>\n            <br>\n        </div>\n    </div>\n\n    <div class="row">\n        <div ng-if="$ctrl.$itemManipulator.entries.length === 0" class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n            <div class="alert alert-gray">\n                <p>{{\'transfer.noPositions\' | translate}}</p>\n            </div>\n        </div>\n        \n        <div ng-if="$ctrl.$itemManipulator.entries.length > 0" class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n            <table width="100%" cellpadding="0" cellspacing="0" border="0" class="table">\n                <thead>\n                    <tr>\n                        <th width="5%">&nbsp;</th>\n                        <th width="15%" align="left">{{\'asset.search.label.quantity\' | translate}}</th>\n                        <th width="15%" align="left">{{\'transfer.label.availableQuantity\' | translate}}</th>\n                        <th width="15%" align="left">{{\'asset.search.label.assetType\' | translate}}</th>\n                        <th width="30%" align="left">{{\'asset.search.label.description\' | translate}}</th>\n                        <th align="left">{{\'asset.search.label.identifiers\' | translate}}</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    <tr ng-repeat="asset in $ctrl.$itemManipulator.entries" ng-class="{ \'active\' : asset.isSelected }">\n                        <td align="center">\n                            <input ng-change="$ctrl.assetSelected(asset)" ng-model="asset.isSelected" type="checkbox" i-check />\n                        </td>\n                        <td align="left">\n                            <am-input name="{{\'assetQuantity_\' + asset.conId}}" ng-model="asset.quantity" input-mask-alias="{{$ctrl.getAssetMask(asset)}}" type="text" change-listener="$ctrl.assetQuantityChanged(asset)" is-required="asset.isSelected" is-disabled="!asset.isSelected"></am-input>\n                        </td>\n                        <td align="left">/&nbsp;{{$ctrl.getAvailableQuantity(asset)}}</td>\n                        <td align="left">{{\'asset.type.\' + asset.details.type | translate}}</td>\n                        <td align="left">{{asset.details.description}}</td>\n                        <td align="left"><position-id-review position-details="asset.details"></position-id-review></td>\n                    </tr>\n                </tbody>\n            </table>\n            <br>\n            <pagination-controls></pagination-controls>\n        </div>\n    </div>\n</div>\n'},function(e,t,n){e.exports=function(e){e.component("iraConversionPosTransferForm",{require:{parentForm:"^^form"},bindings:{total:"="},template:n(1039),controller:["$scope","$translate","CONTENT_HOST","FundingService","ModalService","ResourceService","PositionTransferService","DynamicSequenceService",function(e,t,n,a,r,i,o,s){var l=this;l.subtotal=0;var c=function(){l.total=l.total-l.subtotal,l.subtotal=0;for(var e=0;e<l.transferParameters.assets.length;++e){for(var t=l.transferParameters.assets[e],n=!1,a=0;a<l.transferRules.assetQuantityRules.length;++a){var r=l.transferRules.assetQuantityRules[a];r.assetRules.type===t.details.type&&(n=r.bondQuantity)}var i=0;if(i=!0===n?Number(t.quantity):Number(t.quantity)*(Number(t.mktValue)/Number(t.availableQuantity)),"USD"!==t.currency){var o=l.transferRules.exchangeRates[t.currency];i*=Number(o)}l.subtotal=l.subtotal+i}return l.total=l.total+l.subtotal,l.total};l.$onInit=function(){l.transferParameters=s.getSequenceData().transferParameters,l.instructionParameters=s.getSequenceData().instructionParameters||{instructionType:"POSITION"},l.transferRules=s.getSequenceData().iraConversionRules,l.transferParameters.assets=l.transferParameters.assets||[],l.rawAssets=[];for(var e=0;e<l.transferParameters.assets.length;++e){var n=l.transferParameters.assets[e];l.rawAssets.push(n.details)}if(l.assetRules=[],angular.isDefined(l.transferRules.assetQuantityRules))for(e=0;e<l.transferRules.assetQuantityRules.length;++e){var i=l.transferRules.assetQuantityRules[e];l.assetRules.push(i.assetRules)}l.assetFilter={type:"TRANSFER",transferParameters:{type:l.transferParameters.type,method:l.transferParameters.method}},"INTERNAL"===l.transferParameters.type&&(l.isSourceLocked=!0,l.isDestinationLocked=!0,l.getInternalAccountDisplay=function(e){return l.transferRules.accountDisplayMap[e]}),l.recompAssetTotal=function(){c()},l.onBalanceSelect=function(e){if(e.isSelected){if(!function(e){if("USD"!==e.currency){var t=e.currency;if(l.transferRules.exchangeRates[t]<=0)return!1}return!0}(e))return void l.parentForm.$setValidity("validAssets",!1);l.transferParameters.assets.push(e)}else{var t=l.transferParameters.assets.indexOf(e);l.transferParameters.assets.splice(t,1)}c()},l.getSelectedAssets=function(){return l.transferParameters.assets},l.getSelectedAsset=function(e){var t=a.getAssetIndex(l.transferParameters.assets,e,function(e){return e.details});return-1!==t?l.transferParameters.assets[t]:void 0},l.csvAssetAdded=function(e){for(var t=0;t<e.length;t++){var n=a.getAssetIndex(l.transferParameters.assets,e[t].details,function(e){return e.details});e.full?delete e[t].quantity:"SHORT"===e[t].quantityType&&e[t].quantity>0?e[t].quantity*=-1:"LONG"===e[t].quantityType&&e[t].quantity<0&&(e[t].quantity*=-1),-1!==n?l.transferParameters.assets[n]=e[t]:l.transferParameters.assets.push(e[t])}},l.assetAdded=function(e){for(var n,i=0;i<l.transferRules.assetQuantityRules.length;++i){var o=l.transferRules.assetQuantityRules[i];o.assetRules.type===e.type&&(n=o)}var s,c=a.getAssetIndex(l.transferParameters.assets,e,function(e){return e.details});s=-1!==c?angular.copy(l.transferParameters.assets[c]):{details:e,full:!1,quantityType:"LONG"};var u={title:t.instant("asset.quantity.title"),templateUrl:"asset-quantity-modal.component",modalData:{transferAsset:s,quantityRules:n}};r.openModal(u).then(function(e){-1===c?angular.isUndefined(e)?l.rawAssets.splice(l.rawAssets.length-1,1):l.transferParameters.assets.push(e):angular.isDefined(e)&&(l.transferParameters.assets[c]=e)})},l.removeAsset=function(e){l.transferParameters.assets.splice(e,1),l.rawAssets.splice(e,1)}},l.$onDestroy=function(){l.parentForm.$setValidity("validAssets",!0)}}]})}},function(e,t){e.exports='\x3c!-- Asset Selection --\x3e\n<am-item-manipulator manipulator-id="PositionTransferBalance" item-template="ira-conversion-pos-balance-selection.component"></am-item-manipulator>\n<h6 class="subtitle">{{\'ira.header.partial.conversion.partialTotalEquity\' | translate }}</h6>\n<am-form-label name="partialTotal" label-text="{{\'ira.label.conversionEquity\' | translate}}" value-text="{{$ctrl.total | currency:\'USD\' + \' \':2}}"></am-form-label>\n'},function(e,t,n){e.exports=function(e){n(1041)(e),n(1043)(e)}},function(e,t,n){e.exports=function(e){e.component("fundMethodSearch",{bindings:{baseCountry:"@?"},template:n(1042),controller:["$translate","$filter","CashMethodTextService","ModalService","NavigationAction","NavigationService","PageService","ResourceService",function(t,n,a,r,i,o,s,l){var c=this,u=function(){if(!angular.isUndefined(c.type)&&""!==c.type){var t={type:c.type};if("POSITION_INBOUND"!==c.type){if(!c.colr)return c.currencies=[],void(c.methods=[]);t.colr=c.colr.alpha3}c.fetchingCurrencies=!0,l.fetch(e.SERVER_PATH+"/Methods/Currencies",t).then(function(e){var t=e.data.currencies;c.currencies=n("orderByTranslated")(t,"currency."),c.currency=e.data.domestic||c.currencies[0],c.ibEntity=e.data.ibEntity},angular.noop).finally(function(){c.showWarning=!c.currencies.length,c.fetchingCurrencies=!1})}},d=function(){return"IRA"===c.type&&c.colr&&"CAN"===c.colr.alpha3},p=function(){var t={type:c.type,baseCountry:c.baseCountry};if("POSITION_INBOUND"!==c.type){if(t.currency=c.currency,!c.colr)return;t.colr=c.colr.alpha3}else t.region=c.region;c.fetchingMethods=!0,l.fetch(e.SERVER_PATH+"/Methods",t).then(function(e){c.methods=e.data.methods,c.transferType=e.data.transferType},angular.noop).finally(function(){c.showWarning=!c.methods.length,c.showPositionTransfer="POSITION_INBOUND"===c.type||d(),c.fetchingMethods=!1})},g=function(e){var n={title:t.instant("funding.website.modal.title"),templateUrl:"portal-redirection-modal.component",modalData:{isPositionTransfer:"POSITION_INBOUND"===c.type||c.isCaIra(),type:c.transferType,currency:c.currency,method:e}};r.openModal(n)},f=function(){return"POSITION_INBOUND"===c.type?function(){if(!angular.isUndefined(c.type)&&""!==c.type){var t={type:c.type,baseCountry:c.baseCountry};c.fetchingRegions=!0,l.fetch(e.SERVER_PATH+"/Methods/Regions",t).then(function(e){c.regions=e.data.regions,c.region=e.data.domestic||c.regions[0]},angular.noop).finally(function(){c.fetchingRegions=!1})}}():void(angular.isUndefined(c.type)||""===c.type||(c.fetchingCountries=!0,l.fetch(e.SERVER_PATH+"/Methods/Countries",{type:c.type,baseCountry:c.baseCountry}).then(function(e){c.countries=e.data.countries,c.colr=e.data.domestic},angular.noop).finally(function(){c.fetchingCountries=!1,c.showWarning=!c.countries.length})))};c.$onInit=function(){c.fetchCurrencies=u,c.fetchMethods=p,c.showRelevant=f,c.select=g,c.showRelevantData=f,c.showWarning=!1,c.isCaIra=d,c.fetchingInitData=!0,l.fetch(e.SERVER_PATH+"/Methods/InitData",{baseCountry:c.baseCountry}).then(function(e){c.types=e.data.types},angular.noop).finally(function(){c.fetchingInitData=!1})}}]})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.fetchingInitData"></loading-overlay>\n<div class="row" ng-form="$ctrl.fundingMethodSearch">\n    <div class="col-12">\n        <div class="row">\n            <div class="col-12 col-md-4" ng-if="$ctrl.types.length">\n                <label class="control-label" translate="funding.website.label.type"></label>\n                <am-select name="type" ng-model="$ctrl.type" options="$ctrl.types" option-key="\'fundingMethod.type.\'" model-listener="$ctrl.showRelevantData()" hide-empty-option="true" required></am-select>\n                <br/>\n            </div>\n            <div class="col-12 col-md-4" ng-show="$ctrl.type !== \'POSITION_INBOUND\'">\n                <loading-overlay ng-if="$ctrl.fetchingCountries"></loading-overlay>\n                <label class="control-label" translate="funding.website.label.colr"></label>\n                <am-country-select ng-if="!$ctrl.fetchingCountries && $ctrl.countries.length" name="colr" ng-model="$ctrl.colr" countries="$ctrl.countries" model-listener="$ctrl.fetchCurrencies()" hide-empty-option="true" hide-ip-country="($ctrl.type === \'IRA\')"></am-country-select>\n                <br/>\n            </div>\n            <div class="col-12 col-md-4" ng-show="$ctrl.type === \'POSITION_INBOUND\'">\n                <loading-overlay ng-if="$ctrl.fetchingRegions"></loading-overlay>\n                <label class="control-label" translate="funding.website.label.colr"></label>\n                <am-select ng-if="!$ctrl.fetchingRegions && $ctrl.regions.length" name="region" ng-model="$ctrl.region" options="$ctrl.regions" option-key="\'positionTransfer.region.\'" model-listener="$ctrl.fetchMethods()" hide-empty-option="true" required></am-select>\n                <br/>\n            </div>\n            <div class="col-12 col-md-4" ng-show="$ctrl.type === \'DEPOSIT\'">\n                <loading-overlay ng-if="$ctrl.fetchingCurrencies"></loading-overlay>\n                <label class="control-label" translate="funding.website.label.currency"></label>\n                <am-select ng-if="!$ctrl.fetchingCurrencies && $ctrl.currencies.length" name="currency" ng-model="$ctrl.currency" options="$ctrl.currencies" option-key="\'currency.\'" model-listener="$ctrl.fetchMethods()" hide-empty-option="true" required></am-select>\n                <br/>\n            </div>\n        </div>\n        <div ng-if="$ctrl.showWarning" class="alert alert-warning">\n            <p translate="funding.website.warning.text"></p>\n        </div>\n    </div>\n</div>\n<br/>\n<div ng-if="$ctrl.methods.length">\n    <hr ng-if="!$ctrl.showPositionTransfer"/>\n    <br/>\n    <div id="fundingMethodsList">\n        <loading-overlay ng-if="$ctrl.fetchingMethods"></loading-overlay>\n        <cash-method-choice ng-if="!$ctrl.showPositionTransfer" ng-repeat="method in $ctrl.methods" transfer-type="$ctrl.transferType" transfer-method="method" transfer-currency="$ctrl.currency" ib-entity="$ctrl.ibEntity" on-click="$ctrl.select(method)"></cash-method-choice>\n        <div class="funding-methods" ng-if="$ctrl.showPositionTransfer">\n            <div ng-repeat="method in $ctrl.methods">\n                <position-method-choice type="$ctrl.transferType" method="method" region="$ctrl.region" on-click="$ctrl.select(method)"></position-method-choice>\n                <hr ng-if="!$last" />\n            </div>\n        </div>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("fundMethodSummary",{transclude:!0,bindings:{fieldText:"&"},template:n(1044),controller:function(){var e=this;e.$onInit=function(){e.fieldText=e.fieldText||function(){return{}}}}})}},function(e,t){e.exports='<div class="row">\n    <div class="col-xs-4 col-sm-3 col-md-3 col-lg-3">\n        <p class="icon">\n            <img ng-src="{{::$ctrl.fieldText().imgPath}}" border="0"/>\n            <span ng-class="$ctrl.fieldText().labelClass">{{::$ctrl.fieldText().label}}</span>\n        </p>\n    </div>\n    <div class="col-xs-8 col-sm-9 col-md-9 col-lg-9">\n        <p class="details">\n            <span translate="{{$ctrl.fieldText().text}}"></span>\n            <ng-transclude></ng-transclude>\n        </p>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){n(1046)(e)}},function(e,t,n){e.exports=function(e){e.component("microcapStockVerifier",{bindings:{allAssetRules:"<",transferParameters:"<"},template:n(1047),controller:["$translate","ModalService",function(e,t){var n=this;n.$onInit=function(){n.openMicroCapVerificationModal=function(){var a={title:e.instant("microcap.search.title"),templateUrl:"microcap-verification-modal.component",modalData:{transferParameters:n.transferParameters,allAssetRules:n.allAssetRules}};t.openModal(a)}}}]})}},function(e,t){e.exports='<div class="form-group">\r\n     <div class="row">\r\n          <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\r\n               <a href="javascript:void(0)" ng-click="$ctrl.openMicroCapVerificationModal()">{{\'microcapVerification.link.text1\' | translate}} </a>{{\'microcapVerification.link.text2\' | translate}}\r\n          </div>\r\n     </div>\r\n</div>\r\n'},function(e,t,n){e.exports=function(e){n(1049)(e)}},function(e,t,n){e.exports=function(e){n(3)(e,"notificationDestination",{bindings:{destination:"<"},template:n(1050)},function(){return[n.e(28).then(n.t.bind(null,1953,7)),n.e(28).then(n.t.bind(null,1954,7)),n.e(28).then(n.t.bind(null,1955,7)),n.e(28).then(n.t.bind(null,1956,7)),n.e(28).then(n.t.bind(null,1957,7)),n.e(28).then(n.t.bind(null,1958,7)),n.e(28).then(n.t.bind(null,1959,7)),n.e(28).then(n.t.bind(null,1960,7)),n.e(28).then(n.t.bind(null,1961,7)),n.e(28).then(n.t.bind(null,1962,7)),n.e(28).then(n.t.bind(null,1963,7)),n.e(28).then(n.t.bind(null,1964,7)),n.e(28).then(n.t.bind(null,1965,7)),n.e(28).then(n.t.bind(null,1966,7)),n.e(28).then(n.t.bind(null,1967,7))]})}},function(e,t){e.exports='<ng-switch on="$ctrl.destination.method">\n    <bill-pay-destination ng-switch-when="BILL_PAY_NOTIFICATION" destination="$ctrl.destination"></bill-pay-destination>\n    <bpay-destination ng-switch-when="BPAY_NOTIFICATION" destination="$ctrl.destination"></bpay-destination>\n    <wire-destination ng-switch-when="WIRE_NOTIFICATION|ZENGIN_WIRE_NOTIFICATION|SG_BANK_NOTIFICATION" ng-switch-when-separator="|" destination="$ctrl.destination"></wire-destination>\n    <hk-bank-destination ng-switch-when="HK_BANK_NOTIFICATION" destination="$ctrl.destination"></hk-bank-destination>\n    <check-destination ng-switch-when="CHECK_NOTIFICATION" destination="$ctrl.destination"></check-destination>\n    <direct-rollover-destination ng-switch-when="DIRECT_ROLLOVER_NOTIFICATION|TRUSTEE_TO_TRUSTEE_NOTIFICATION" ng-switch-when-separator="|" destination="$ctrl.destination"></direct-rollover-destination>\n    <ccb-destination ng-switch-when="CCB_FUNDS_TRANSFER_NOTIFICATION" destination="$ctrl.destination"></ccb-destination>\n    <fps-destination ng-switch-when="FPS_NOTIFICATION" destination="$ctrl.destination"></fps-destination>\n    <lvp-destination ng-switch-when="LVP" destination="$ctrl.destination"></lvp-destination>\n    <wise-destination ng-switch-when="WISE_BANK_NOTIFICATION" destination="$ctrl.destination"></wise-destination>\n</ng-switch>\n\n<hr>\n<p ng-repeat="note in ::$ctrl.destination.notes|filter:{severity: \'LOW\'}" class="text-small text-gray" ng-bind-html="note | amNote | renderHTML"></p>'},function(e,t,n){e.exports=function(e){n(1052)(e)}},function(e,t,n){e.exports=function(e){var t=n(4).component.ComponentLoadEvent;e.component("appPdfConfiguration",{bindings:{backFn:"@",completeFn:"@"},template:n(1053),controller:["ResourceService","ComponentService","$translate",function(n,a,r){var i=this,o=function(){window[completeFn]=i.originalCompleteFn};i.submitPdfConfigurationInfo=function(){i.isPageLoading=!0;var t={pdfConfigurationInfo:i.pdfConfigurationInfo};n.create(e.SERVER_PATH+"/PdfConfiguration",t).then(function(e){i.isPageLoading=!1,i.goNext()},function(e){i.isPageLoading=!1}).finally(function(){})},i.isContinueDisabled=function(){return angular.isUndefined(i.pdfConfigurationInfo)||angular.isUndefined(i.pdfConfigurationInfo.fundingElection)||"UNKNOWN"===i.pdfConfigurationInfo.fundingElection},i.$onInit=function(){i.goBack=function(){o(),window[i.backFn]()},i.goNext=function(){window[i.completeFn](),o()},i.originalCompleteFn=window[completeFn]||void 0,window[i.completeFn]=function(){i.submitPdfConfigurationInfo()},n.fetch(e.SERVER_PATH+"/PdfConfiguration").then(function(e){i.pdfConfigurationInfo=e.data.pdfConfigurationInfo||{},i.rules=e.data.rules,i.fetchedPdfConfigurationInfo=!0},function(e){i.errors=e.data.errors||[],i.fetchedPdfConfigurationInfo=!1}).finally(function(){r.onReady().then(function(){var e=new t("pdfconfig",i.fetchedPdfConfigurationInfo);e.submit=i.submit,a.notifyLoad(e)})})},i.$onDestroy=function(){o()}}]})}},function(e,t){e.exports='<div ng-form="$ctrl.appPdfConfigurationForm">\r\n        <div page-structure>\r\n        \r\n        <div class="row">\r\n            <div class="col">\r\n                <h1>\r\n                    {{\'pdfConfig.header\' | translate}}\r\n                </h1>\r\n                <p>\r\n                    {{\'pdfConfig.info\' | translate}}\r\n                </p>\r\n            </div>\r\n        </div>\r\n        <div class="rows-dashed" ng-if="$ctrl.pdfConfigurationInfo.fundingElection!=\'FUND_CLIENT\'">\r\n                <div ng-repeat="type in $ctrl.rules.allowedFundingElectionTypes">\r\n                    <div class="row">\r\n                        <div class="col-xs-2 col-sm-1 col-md-1 col-lg-1">\r\n                            <p class="text-center">\r\n                                <input ng-model="$ctrl.pdfConfigurationInfo.fundingElection" name="type" type="radio" value="{{type}}" i-check required />\r\n                            </p>\r\n                        </div>\r\n                        <div class="col-xs-10 col-sm-11 col-md-11 col-lg-11">\r\n                            <p>\r\n                                <strong>{{\'pdfConfig.fundingElection.\' + type | translate}}</strong>\r\n                            </p>\r\n                            <small ng-if="type==\'FUND_CLIENT\'" class="text-muted" translate="{{ (\'fundClient.info\') }}">\r\n                            </small>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <app-fund-transfer ng-if="$ctrl.pdfConfigurationInfo.fundingElection==\'FUND_CLIENT\'"></app-fund-transfer>    \r\n        </div>\r\n        \x3c!-- These buttons show only if the funding sequence option is not selected because that has its own buttons --\x3e\r\n        <div page-buttons ng-if="$ctrl.pdfConfigurationInfo.fundingElection!=\'FUND_CLIENT\'">\r\n            <div class="col-xs-4 col-sm-4 col-md-4 col-lg-2 order-2 order-sm-1">\r\n                <div class="panel-btn-left">\r\n                    <p>\r\n                        <am-button btn-class="btn-back" on-click="$ctrl.goBack()" btn-text="{{\'word.back\' | translate}}"></am-button>\r\n                    </p>\r\n                </div>\r\n            </div>    \r\n            <div class="col-xs-8 col-sm-8 col-md-8 col-lg-10 order-1 order-sm-2">\r\n                <div class="panel-btn-right">\r\n                    <p>\r\n                        <am-button btn-class="btn-continue" btn-type="success" on-click="$ctrl.submitPdfConfigurationInfo()" is-disabled="$ctrl.isContinueDisabled()"  btn-text="{{\'word.continue\' | translate}}"></am-button>\r\n                    </p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>'},function(e,t,n){e.exports=function(e){n(1055)(e),n(1057)(e),n(1058)(e),n(1060)(e),n(1061)(e),n(1063)(e)}},function(e,t,n){e.exports=function(e){e.component("peaEarlyWithdrawalAcceptableDocuments",{bindings:{reason:"<"},template:n(1056),controller:["$translate",function(e){var t=this;t.$onInit=function(){t.getAcceptableDocuments=function(){for(var n,a,r,i=[],o=1;n=o++,void 0,void 0,a="pea.acceptableDocumentation."+t.reason+"."+n,r=e.instant(a),a!==r&&(i.push(r),1););return i}}}]})}},function(e,t){e.exports='<h6>{{\'pea.acceptableDocumentation.heading\' | translate}}</h6>\n<ol type="i">\n    <li ng-repeat="document in $ctrl.getAcceptableDocuments()">{{document}}</li>\n</ol>'},function(e,t){e.exports=function(e){e.component("peaEarlyWithdrawalClosure",{template:'<large-warning><p class="text-center" translate="pea.earlyWithdrawalDetails.accountClosure" translate-values="$ctrl.translateValues" translate-compile></p></large-warning><br>',controller:["$injector","$translate","BreadcrumbAction","NavigationService",function(e,t,n,a){var r=this;r.$onInit=function(){r.translateValues={closeAccountLink:'<a href="javascript:void(0)" ng-click="$ctrl.goToAccountClosure()">',linkEnd:"</a>"},r.goToAccountClosure=function(){try{e.get("AmConfigurationService").getConfigPageEntry("CloseAccount").then(function(e){e.breadcrumb=n.CLEAR,a.setNavigationValidator(void 0),a.navigate(e)})}catch(e){}}}}]})}},function(e,t,n){e.exports=function(e){e.component("peaEarlyWithdrawalDocumentationForm",{bindings:{earlyWithdrawalDetails:"<",rules:"<"},template:n(1059),controller:["FileUploadService",function(e){var t=this;t.$onInit=function(){t.getDocumentationRules=function(){return t.rules.documentationRules[t.earlyWithdrawalDetails.withdrawalReason]},t.onDocumentationChange=function(){t.earlyWithdrawalDetails.withdrawalDocumentation=[];var n=t.documentationFiles;if(n&&n.length>0&&n[0]){var a=t.earlyWithdrawalDetails.withdrawalDocumentation;e.serialize(n[0]).then(function(e){return a.push(e)})}}}}]})}},function(e,t){e.exports='<am-form-label label-text="{{\'transfer.label.pea.earlyWithdrawalReason\' | translate}}" value-text="{{\'peaEarlyWithdrawalReason.\' + $ctrl.earlyWithdrawalDetails.withdrawalReason | translate}}" single-line></am-form-label>\n<pea-early-withdrawal-reason-info reason="$ctrl.earlyWithdrawalDetails.withdrawalReason" rules="$ctrl.rules" context="transfer"></pea-early-withdrawal-reason-info>\n<br>\n<div class="form-group">\n    <div class="row">\n        <div class="col">\n            <am-file-input name="withdrawalDocumentation" ng-model="$ctrl.documentationFiles" rules="$ctrl.getDocumentationRules().fileRules" show-rules="true" model-listener="$ctrl.onDocumentationChange()"></am-file-input>\n        </div>\n    </div>\n</div>\n<pea-early-withdrawal-acceptable-documents reason="$ctrl.earlyWithdrawalDetails.withdrawalReason"></pea-early-withdrawal-acceptable-documents>'},function(e,t){e.exports=function(e){e.component("peaEarlyWithdrawalReasonInfo",{bindings:{reason:"<",rules:"<",context:"@?"},template:"<p ng-if=\"$ctrl.getReasonNotes() !== ''\">{{$ctrl.getReasonNotes()}}</p><p>{{$ctrl.getDocumentationText()}}</p>",controller:["$translate",function(e){var t=this;t.$onInit=function(){t.context=t.context||"info",t.getDocumentationRules=function(){return t.rules.documentationRules[t.reason]},t.getReasonNotes=function(){var n="pea.earlyWithdrawalReason.notes."+t.reason,a=e.instant(n);return n!==a?a:""},t.getDocumentationText=function(){var n=t.getDocumentationRules();return angular.isDefined(n)&&n.allowedDeferralDays>0?e.instant("pea.earlyWithdrawalDocumentation."+t.context+".deferred",{deferralDays:n.allowedDeferralDays}):e.instant("pea.earlyWithdrawalDocumentation."+t.context+".immediate")}}}]})}},function(e,t,n){e.exports=function(e){e.component("peaOverview",{bindings:{operationType:"<"},template:n(1062),controller:["PeaTransferService",function(e){var t=this;t.$onInit=function(){t.loading=!0,e.fetchOverview(t.operationType).promise.then(function(e){return t.overview=e.data.overview}).finally(function(){return t.loading=!1})}}]})}},function(e,t){e.exports='<loading-spinner ng-if="$ctrl.loading"></loading-spinner>\n\n<large-warning ng-if="!$ctrl.loading && !$ctrl.overview" size="2">\n    <h4 class="text-center" translate="transfer.pea.warning.overviewUnavailable"></h4>\n    <br>\n</large-warning>\n\n<div align-form="right" ng-if="$ctrl.overview">\n    <div ng-if="::$ctrl.operationType === \'CONTRIBUTION\'">\n        <am-form-label label-text="{{\'transfer.label.pea.overview.totalContribution\' | translate}}" value-text="{{$ctrl.overview.totalContribution | amMoneyAmount}}"></am-form-label>\n        <am-form-label label-text="{{\'transfer.label.pea.overview.remainingContributionAllowance\' | translate}}" value-text="{{$ctrl.overview.remainingContributionAllowance | amMoneyAmount}}"></am-form-label>\n    </div>\n    <div ng-if="::$ctrl.operationType === \'WITHDRAWAL\'">\n        <am-form-label label-text="{{\'transfer.label.pea.overview.accountValue\' | translate}}" value-text="{{$ctrl.overview.accountValue | amMoneyAmount}}"></am-form-label>\n        <am-form-label label-text="{{\'transfer.label.pea.overview.contributionBase\' | translate}}" value-text="{{$ctrl.overview.contributionBase | amMoneyAmount}}"></am-form-label>\n        <am-form-label label-text="{{\'transfer.label.pea.overview.taxableGains\' | translate}}" value-text="{{$ctrl.overview.taxableGains | amMoneyAmount}}"></am-form-label>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("peaWithdrawalSummary",{bindings:{withdrawalAmount:"<",withdrawalReason:"<"},template:n(1064),controller:["$translate","$timeout","amMoneyAmountFilter","PeaTransferService",function(e,t,n,a){var r=this;r.$onInit=function(){r.summaryTimeout=void 0,r.summaryRequest=null,r.getWithholdingLabel=function(t){return e.instant("transfer.label.pea.withholding.type."+t.type)+" ("+t.rate.toFixed(2)+"%)"},r.getWithholdingValue=function(e){return n(e.amount)},r.getTotalWithholdingLabel=function(){return e.instant("transfer.label.pea.withholding.total")+" ("+r.summary.totalWithholdingRate.toFixed(2)+"%)"},r.getTotalWithholdingValue=function(){return n(r.summary.totalWithholdingAmount)}},r.$onChanges=function(e){if(e.withdrawalAmount){angular.isDefined(r.summaryRequest)&&null!==r.summaryRequest&&r.summaryRequest.abort(),angular.isDefined(r.summaryTimeout)&&t.cancel(r.summaryTimeout);var n=e.withdrawalAmount.currentValue;if(angular.isUndefined(n)||null===n||0===n)return void delete r.summary;r.summaryTimeout=t(function(){r.loading=!0;var e=r.summaryRequest=a.fetchWithdrawalSummary(r.withdrawalReason,n);e.promise.then(function(e){return r.summary=e.data.summary}).catch(function(t){e.aborted||delete r.summary}).finally(function(){e.aborted||(r.summaryRequest=null,r.loading=!1,r.fetched=!0)})},900)}}}]})}},function(e,t){e.exports='<loading-spinner ng-if="$ctrl.loading"></loading-spinner>\n\n<large-warning ng-if="!$ctrl.loading && !$ctrl.summary && $ctrl.fetched" size="2">\n    <h4 class="text-center" translate="transfer.pea.warning.withdrawalSummaryUnavailable"></h4>\n    <br>\n</large-warning>\n\n<div align-form="right" ng-if="$ctrl.summary">\n    <am-form-label ng-repeat="withholding in $ctrl.summary.withholding" label-text="{{$ctrl.getWithholdingLabel(withholding)}}" value-text="{{$ctrl.getWithholdingValue(withholding)}}"></am-form-label>\n    <am-form-label label-text="{{$ctrl.getTotalWithholdingLabel()}}" value-text="{{$ctrl.getTotalWithholdingValue()}}"></am-form-label>\n    <am-form-label label-text="{{\'transfer.label.pea.withholding.netAmount\' | translate}}" value-text="{{$ctrl.summary.netWithdrawalAmount | amMoneyAmount}}"></am-form-label>\n</div>'},function(e,t,n){e.exports=function(e){n(1066)(e),n(1067)(e),n(1068)(e),n(1070)(e),n(1071)(e)}},function(e,t){e.exports=function(e){e.component("assetDescReview",{bindings:{assetDetails:"<",quantityType:"<?"},template:"<span>{{$ctrl.getDescription()}}</span>",controller:["$translate",function(e){var t=this;t.$onInit=function(){t.getDescription=function(){return"CASH"===t.assetDetails.type?"UNKNOWN"===t.quantityType?"-":e.instant("asset.search.cash.quantity."+t.quantityType):"STOCK"!==t.assetDetails.type&&"OPTION"!==t.assetDetails.type?t.assetDetails.description:angular.isUndefined(t.assetDetails.exchanges)||0===t.assetDetails.exchanges.length?t.assetDetails.description:t.assetDetails.description.endsWith(t.assetDetails.exchanges[0])?t.assetDetails.description:t.assetDetails.description+" / "+t.assetDetails.exchanges[0]}}}]})}},function(e,t){e.exports=function(e){e.component("csvUploadButton",{bindings:{assets:"=",assetRules:"<",csvAssetAdded:"<?",buttonText:"@?",assetFilter:"<?"},template:'<am-button btn-text="{{$ctrl.buttonText}}" on-click="$ctrl.openCSVUploadModal()"></am-button>',controller:["$translate","ModalService","FundingService",function(e,t,n){var a=this;a.$onInit=function(){(angular.isUndefined(a.assets)||null===a.assets)&&(a.assets=[]),a.assetAdded=a.assetAdded||function(e){t.closeModal()},a.buttonText=a.buttonText||e.instant("partial.upload.csvButton"),a.openCSVUploadModal=function(){var r={title:e.instant("partial.upload.title"),templateUrl:"position-transfer-csv-upload-modal.component",modalData:{assetFilter:a.assetFilter,assetRules:a.assetRules}};t.openModal(r).then(function(e){if(angular.isDefined(e)){for(var t=0;t<e.length;t++){-1===n.getAssetIndex(a.assets,e[t].details)&&a.assets.push(e[t].details)}a.csvAssetAdded(e)}})}}}]})}},function(e,t,n){e.exports=function(e){e.component("positionTransferFaq",{template:n(1069),controller:["CONTENT_HOST",function(e){var t=this;t.$onInit=function(){t.contentHost=e}}]})}},function(e,t){e.exports='<div class="container-faq">\n    <div class="row">\n        <div class="col-2" align="center">\n            <img src="https://{{::$ctrl.contentHost}}/images/am/icons8-easy-2x.png" alt="Tip" border="0" />\n        </div>\n        <div class="col-10">\n            <h6 translate="positionTransfer.usefultip.heading"></h6>\n            <p><strong translate="positionTransfer.usefultip.subheading"></strong></p>\n        </div>\n    </div>\n    <p class="text-gray" translate="positionTransfer.usefultip.text"></p>\n</div>'},function(e,t){e.exports=function(e){e.component("positionIdReview",{bindings:{positionDetails:"<"},template:function(){var e="";return e+='<span ng-if="assetId.type !== \'CONTRACT_ID\'" ng-repeat="assetId in $ctrl.positionDetails.ids">',e+="{{'asset.id.' + assetId.type | translate}}: {{assetId.id}}",e+="<br>",e+="</span>",e}})}},function(e,t,n){e.exports=function(e){e.component("positionMethodChoice",{bindings:{type:"<",method:"<",region:"<",isUsIra:"<?",onClick:"&"},template:n(1072),controller:["ACTIVE_CONTEXT","ApplicationContext","ResourceService","PositionMethodTextService","ModalService","AgreementService",function(t,n,a,r,i,o){var s=this;s.$onInit=function(){s.iraFop="POSITION_INBOUND"===s.type&&"FOP"===s.method&&angular.isDefined(s.isUsIra)&&s.isUsIra,s.isWebsiteContext=t===n.WEBSITE,s.getMethodName=function(){return r.getMethodSelectionName(s.method,s.type)},s.getMethodDetails=function(){return r.getMethodDetailsText(s.type,s.method)},s.getSpeedText=function(){return r.getSpeedText(s.type,s.method)},s.getFeesText=function(){return r.getFeesText(s.type,s.method,s.region)},s.getStepsText=function(){return r.getStepsText(s.type,s.method,s.iraFop)},s.view=function(){var e={title:s.getMethodName(),dialogClass:"modal-lg",templateUrl:"position-method-info.component",modalData:{type:s.type,method:s.method,iraFop:s.iraFop}};i.openModal(e)},s.downloadIraTransferForm=function(){s.isLoading=!0,a.fetch(e.SERVER_PATH+"/Agreement/Form/4415").then(function(e){var t=e.data.agreements;o.downloadPdfAgreement(t[0])}).finally(function(){s.isLoading=!1})},s.addLinkTag=function(){return{linkStart:'<a href="javascript:void(0);" ng-click="$ctrl.downloadIraTransferForm()">',linkEnd:"</a>"}},s.getButtonClass=function(){var e="w-100";return s.isWebsiteContext&&(e+=" btn-outline"),e},s.getButtonType=function(){return s.isWebsiteContext?"primary":"default"}}}]})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.isLoading"></loading-overlay>\n<div class="fund-method">\n    <div class="row">\n        <div class="col-12">\n            <div class="row align-items-center">\n                <div class="col-12 col-md-8 col-lg-9">\n                    <h3 ng-bind="$ctrl.getMethodName()"></h3>\n                    <p ng-if="!$ctrl.iraFop" ng-bind-html="$ctrl.getMethodDetails() | renderHTML"></p>\n                    <p ng-if="$ctrl.iraFop" translate="positionTransfer.inbound.details.IRA.FOP" translate-values="$ctrl.addLinkTag()" translate-compile></p>\n                </div>\n                <div class="col-12 col-md-4 col-lg-3">\n                    <p><am-button btn-class="{{$ctrl.getButtonClass()}}" btn-type="{{$ctrl.getButtonType()}}" btn-text="{{ \'cashMethod.button.select\' | translate}}" on-click="$ctrl.onClick()"></am-button></p>\n                </div>\n            </div>\n        </div>\n    </div>\n    <hr/>\n    <div class="row">\n        <div class="col-12 col-md-4 col-lg-4">\n            <fund-method-summary field-text="$ctrl.getSpeedText()">\n                <br/>\n                <a href="javascript:void(0);" class="text-small" target="_self" ng-click="$ctrl.view()" translate="word.moreInformation"></a>\n            </fund-method-summary>\n        </div>\n        <div class="col-12 col-md-4 col-lg-4">\n            <fund-method-summary field-text="$ctrl.getFeesText()"></fund-method-summary>\n        </div>\n        <div class="col-12 col-md-4 col-lg-4">\n            <fund-method-summary field-text="$ctrl.getStepsText()"></fund-method-summary>\n        </div>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){n(1074)(e),n(1076)(e)}},function(e,t,n){e.exports=function(e){e.component("reviewRecurringInvestment",{bindings:{recurringInvestment:"<"},template:n(1075),controller:[function(){var e=this;e.$onInit=function(){e.assetDescription=e.recurringInvestment.positionDetails.description}}]})}},function(e,t){e.exports='<generic-form-data name="identifier" label-text="{{ \'word.asset\' | translate }}">\n    <span>\n        {{\'asset.search.label.description\' | translate}}: <asset-desc-review asset-details="$ctrl.recurringInvestment.positionDetails"></asset-desc-review>\n    </span>\n    <br />\n    <position-id-review position-details="$ctrl.recurringInvestment.positionDetails"></position-id-review>\n</generic-form-data>\n\n<am-form-label label-text="{{\'recurringInvestment.label.startDate\' | translate}}" value-text="{{$ctrl.recurringInvestment.recurringTransferInstruction.startDate}}"></am-form-label>\n\n<div ng-if="!$ctrl.recurringInvestment.endless && $ctrl.recurringInvestment.recurringTransferInstruction.endDate">\n    <am-form-label label-text="{{\'recurringInvestment.label.endDate\' | translate}}" value-text="{{$ctrl.recurringInvestment.recurringTransferInstruction.endDate}}"></am-form-label>\n</div>\n\n<div ng-if="!$ctrl.recurringInvestment.endless && $ctrl.recurringInvestment.installments > 0">\n    <am-form-label label-text="{{\'recurringInvestment.label.installment\' | translate}}" value-text="{{$ctrl.recurringInvestment.installments}}"></am-form-label>\n</div>\n\n<div ng-if="$ctrl.recurringInvestment.endless">\n    <am-form-label label-text="{{\'recurringInvestment.label.endDate\' | translate}}" value-text="{{\'recurringInvestment.label.endless\' | translate}}"></am-form-label>\n</div>\n\n<generic-form-data label-text="{{\'recurringInvestment.label.amount\' | translate}}">\n    <label>{{$ctrl.recurringInvestment.amount}} <span ng-if="$ctrl.recurringInvestment.currency !== \'UNKNOWN\'">{{$ctrl.recurringInvestment.currency}}</span></label>\n</generic-form-data>\n\n<div ng-if="$ctrl.recurringInvestment.feeType !== \'NONE\'">\n    <am-form-label label-text="{{\'recurringInvestment.label.feeType\' | translate}}" value-text="{{\'recurringInvestment.feeType.\' + $ctrl.recurringInvestment.feeType | translate}}"></am-form-label>\n</div>\n\n<div ng-if="$ctrl.recurringInvestment.recurringTransferInstruction.instruction.instructionId === 0">\n    <am-form-label label-text="{{\'recurringInvestment.label.paymentMethod\' | translate}}" value-text="{{\'cashTransfer.title.DEPOSIT.FREE_CASH\' | translate}}"></am-form-label>\n</div>\n\n<instruction-review ng-if="$ctrl.recurringInvestment.recurringTransferInstruction.instruction.instructionId !== 0" instruction="$ctrl.recurringInvestment.recurringTransferInstruction.instruction"></instruction-review>\n\n<am-form-label label-text="{{\'recurringInvestment.label.frequency\' | translate}}" value-text="{{$ctrl.recurringInvestment.recurringTransferInstruction.frequency}}"></am-form-label>\n\n<generic-form-data ng-if="$ctrl.recurringInvestment.charges.commission != 0" label-text="{{\'recurringInvestment.label.commission\' | translate}}">\n    <label>{{$ctrl.recurringInvestment.charges.commission}} <span ng-if="$ctrl.recurringInvestment.currency !== \'UNKNOWN\'">{{$ctrl.recurringInvestment.currency}}</span></label>\n</generic-form-data>\n\n<generic-form-data ng-if="$ctrl.recurringInvestment.charges.vat != 0" label-text="{{\'recurringInvestment.label.vat\' | translate}}">\n    <label>{{$ctrl.recurringInvestment.charges.vat}} <span ng-if="$ctrl.recurringInvestment.currency !== \'UNKNOWN\'">{{$ctrl.recurringInvestment.currency}}</span></label>\n</generic-form-data>\n'},function(e,t,n){e.exports=function(e){e.component("recurringInvestmentSummary",{bindings:{recurringInvestment:"<",isActive:"<",editRecurringInvestment:"&",deleteRecurringInvestment:"&",viewRecurringInvestmentDetails:"&",showFeeType:"<"},template:n(1077),controller:["FundingService","RecurringInvestmentService",function(e,t){var n=this;n.$onInit=function(){n.getAssetSymbol=e.getAssetSymbol,n.canEdit=t.canEditRecurringInvestment,n.edit=function(e){n.editRecurringInvestment({recurringInvestmentId:e.schedTransId})},n.delete=function(e){n.deleteRecurringInvestment({recurringInvestment:e})},n.view=function(e){n.viewRecurringInvestmentDetails({recurringInvestment:e})}}}]})}},function(e,t){e.exports='<table width="100%" cellpadding="0" cellspacing="0" border="0" class="table">\n        <tbody ng-class="{\'bg-light-gray\': !$ctrl.isActive}">\n            <tr>\n                <td valign="middle" align="left" class="fs-9 text-gray text-uppercase">{{\'asset.search.label.identifiers\' | translate}}</td>\n                <td valign="middle" align="right">\n                    <div ng-if="asset.details.type !== \'CASH\'">\n                        <asset-desc-review asset-details="$ctrl.recurringInvestment.positionDetails"></asset-desc-review><br />\n                        <span>{{\'asset.id.SYMBOL\' | translate}}: {{ $ctrl.getAssetSymbol($ctrl.recurringInvestment.positionDetails.ids) }}</span>\n                    </div>\n                    <div ng-if="asset.details.type === \'CASH\'">\n                        <span>-</span>\n                    </div>\n                </td>\n            </tr>\n            <tr>\n                <td valign="middle" align="left" class="fs-9 text-gray text-uppercase">{{\'recurringInvestment.label.amount\' | translate}}</td>\n                <td valign="middle" align="right">\n                {{$ctrl.recurringInvestment.amount}}\n                    <span ng-if="$ctrl.recurringInvestment.purchaseMethod == \'CASH\' && $ctrl.recurringInvestment.currency !== \'UNKNOWN\'">\n                        {{$ctrl.recurringInvestment.currency}}\n                    </span>\n                    <span ng-if="$ctrl.recurringInvestment.purchaseMethod == \'SHARES\'">\n                        {{\'tradeUnitType.SHARES\' | translate}}\n                    </span>\n                </td>\n            </tr>\n            <tr ng-if="$ctrl.showFeeType">\n                <td valign="middle" align="left" class="fs-9 text-gray text-uppercase">{{\'recurringInvestment.label.feeType\' | translate}}</td>\n                <td valign="middle" align="right">{{\'recurringInvestment.feeType.\' + $ctrl.recurringInvestment.feeType | translate }}</td>\n            </tr>\n            <tr>\n                <td valign="middle" align="left" class="fs-9 text-gray text-uppercase">{{\'recurringInvestment.label.frequency\' | translate}}</td>\n                <td valign="middle" align="right">{{$ctrl.recurringInvestment.recurringTransferInstruction.frequency}}</td>\n            </tr>\n            <tr>\n                <td valign="middle" align="left" class="fs-9 text-gray text-uppercase">{{\'recurringInvestment.label.startDate\' | translate}}</td>\n                <td valign="middle" align="right">{{$ctrl.recurringInvestment.recurringTransferInstruction.startDate}}</td>\n            </tr>\n            <tr ng-if="$ctrl.isActive">\n                <td valign="middle" align="left" class="fs-9 text-gray text-uppercase">{{\'recurringInvestment.label.nextMaturityDate\' | translate}}</td>\n                <td valign="middle" align="right">{{$ctrl.recurringInvestment.nextMaturityDate}}</td>\n            </tr>\n            <tr>\n                <td valign="middle" align="left" class="fs-9 text-gray text-uppercase">{{\'recurringInvestment.label.lastTradeDate\' | translate}}</td>\n                <td valign="middle" align="right">\n                    <div ng-if="!$ctrl.recurringInvestment.lastTradeDate">\n                        <span>--</span>\n                    </div>\n                    {{$ctrl.recurringInvestment.lastTradeDate}}\n                </td>\n            </tr>\n            <tr>\n                <td valign="middle" align="left" class="fs-9 text-gray text-uppercase">{{\'recurringInvestment.label.endDate\' | translate}}</td>\n                <td valign="middle" align="right">\n                    <div ng-if="!$ctrl.recurringInvestment.recurringTransferInstruction.endDate">\n                        <span>{{\'recurringInvestment.label.endless\' | translate}}</span>\n                    </div>\n                    {{$ctrl.recurringInvestment.recurringTransferInstruction.endDate}}\n                </td>\n            </tr>\n        </tbody>\n</table>\n</br>\n<div class="row">\n    <div ng-if="!$ctrl.isActive" class="col">\n        <am-button btn-class = "w-100" btn-type="secondary" btn-text="{{\'word.history\' | translate}}" on-click="$ctrl.view($ctrl.recurringInvestment)"></am-button>\n    </div>\n    <div ng-if="$ctrl.isActive" class="col-12 col-sm-4">\n        <am-button btn-class = "w-100" btn-type="secondary" btn-text="{{\'word.history\' | translate}}" on-click="$ctrl.view($ctrl.recurringInvestment)"></am-button>\n    </div>\n    <div ng-if="$ctrl.isActive" class="col-12 col-sm-4">\n        <am-button btn-class = "w-100" btn-type="primary" btn-text="{{\'word.modify\' | translate}}" on-click="$ctrl.edit($ctrl.recurringInvestment)" is-disabled="!$ctrl.canEdit($ctrl.recurringInvestment)"></am-button>\n    </div>\n    <div ng-if="$ctrl.isActive" class="col-12 col-sm-4">\n        <am-button btn-class = "w-100 btn-danger" btn-type="primary" btn-text="{{\'word.cancel\' | translate}}" on-click="$ctrl.delete($ctrl.recurringInvestment)"></am-button>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){n(1079)(e)}},function(e,t,n){e.exports=function(e){e.component("fundingRequestReview",{bindings:{request:"<"},template:n(1080),controller:["FundingService","FundingInstructionService",function(e,t){this.$onInit=function(){var n=this;n.getInstructionNameText=t.getInstructionNameText,n.getReviewType=function(){return e.isRecurringRequest(n.request)?"RECURRING":e.isInstructionRequest(n.request)?"INSTRUCTION":"TRANSFER"}}}]})}},function(e,t){e.exports='<div ng-switch on="$ctrl.getReviewType()">\n    <div ng-switch-when="RECURRING">\n        <am-form-label label-text="{{\'transfer.label.recurringName\' | translate}}" value-text="{{$ctrl.request.transferInstruction.instructionName}}"></am-form-label>\n        <instruction-review instruction="$ctrl.request.transferInstruction"></instruction-review>\n    </div>\n\n    <div ng-switch-when="INSTRUCTION">\n        <am-form-label label-text="{{\'transfer.field.instructionName\' | translate}}" value-text="{{$ctrl.getInstructionNameText($ctrl.request.transferInstruction)}}"></am-form-label>\n        <instruction-review instruction="$ctrl.request.transferInstruction"></instruction-review>\n    </div>\n\n    <div ng-switch-when="TRANSFER">\n        <transfer-review transfer-parameters="$ctrl.request.transferParameters"></transfer-review>\n        <instruction-review ng-if="$ctrl.request.transferInstruction" instruction="$ctrl.request.transferInstruction"></instruction-review>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){n(1082)(e),n(1084)(e)}},function(e,t,n){e.exports=function(e){e.component("simpleIraCashTransferHistory",{require:{$itemManipulator:"^^amItemManipulator"},template:n(1083),controller:["$translate","DynamicSequenceService","ModalService",function(e,t,n){var a=this;a.$onInit=function(){a.showHistoryTable=function(){return a.$itemManipulator.entries.length>0},a.openHistoryDetailsModal=function(t){var a={title:e.instant("simpleIraTransfer.showHistory.modalTitle"),templateUrl:"bulk-transfer-history-modal.component",modalData:{fundingId:t.fundingId,method:"SIMPLE_IRA_FUNDING"}};n.openModal(a)},a.getAlertClass=function(e){return"FAILURE"===e?"alert alert-danger":"SUCCESS"===e?"alert alert-success":"alert alert-gray"},a.$itemManipulator.itemControl.load()}}]})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.$itemManipulator.loadInProgress"></loading-overlay>\n<div class="row" ng-if="!$ctrl.$itemManipulator.loadInProgress && !$ctrl.showHistoryTable()">\n    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n        <div class="alert alert-warning">\n            <p>{{\'simpleIraTransfer.history.noRequests\' | translate}}</p>\n        </div>\n    </div>\n</div>\n\n<div class="form-group" ng-if="$ctrl.showHistoryTable()">\n    <div class="row padding-top-15">\n        <div ng-if="$ctrl.$itemManipulator.entries.length > 0" class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n            <table width="100%" cellpadding="0" cellspacing="0" border="0" class="table">\n                <thead>\n                       <tr>\n                         <th width="20%" align="left">{{\'cashTransfer.internal.simpleIraTransferHistory.label.referenceNumber\' | translate}}</th>\n                         <th width="20%" align="left">{{\'cashTransfer.internal.simpleIraTransferHistory.label.requested\' | translate}}</th>\n                         <th width="20%" align="left">{{\'cashTransfer.internal.simpleIraTransferHistory.label.processed\' | translate}}</th>\n                         <th width="10%" align="left">{{\'cashTransfer.internal.simpleIraTransferHistory.label.size\' | translate}}</th>\n                         <th width="20%" align="left">{{\'cashTransfer.internal.simpleIraTransferHistory.label.total\' | translate}}</th>\n                         <th width="5%" align="left">{{\'cashTransfer.internal.simpleIraTransferHistory.label.status\' | translate}}</th>\n                         <th width="5%" align="left">&nbsp;</th>\n                       </tr>\n                </thead>\n                <tbody>\n                    <tr ng-repeat="request in $ctrl.$itemManipulator.entries">\n                        <td align="left">{{request.fundingId}}</td>\n                        <td align="left">{{request.requested}}</td>\n                        <td align="left">{{request.processed}}</td>\n                        <td align="left">{{request.requestSize}}</td>\n                        <td align="left">{{request.totalContributions}}</td>\n                        <td align="left"  ng-class="$ctrl.getAlertClass(request.state)">{{\'simpleIraTransfer.state.\' + request.state | translate}}</td>\n                        <td align="center">\n                            <am-button btn-type="icon" btn-icon="fa-eye" tooltip-text="{{\'word.info\' | translate}}" tooltip-side="right" on-click="$ctrl.openHistoryDetailsModal(request)"></am-button>\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n            <br>\n            <pagination-controls></pagination-controls>\n        </div>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("singleSimpleIraCashTransfer",{bindings:{transferRule:"<",contribution:"=",onRemove:"&",onPopulate:"&",updateYtd:"&"},template:n(1085),controller:["IraContributionService",function(e){var t=this;t.$onInit=function(){t.getContributionYear=e.getContributionYear,function(){for(var e=document.getElementById("toAccounts"),n="",a=0;a<t.transferRule.allowedDestinationAccounts.length;a++)n+='<option value="'+t.transferRule.allowedDestinationAccounts[a]+'" />';e.innerHTML=n}(),t.contribution.fromAccount=t.transferRule.allowedSourceAccounts[0],t.contribution.type="INTERNAL",t.contribution.method="FUNDS_TRANSFER"}}]})}},function(e,t){e.exports='<div class="row">\n     <div class="col-12 col-sm-2">\n           <div>\n               <label class="control-label" translate="cashTransfer.internal.singleSimpleIraTransfer.label.toAccount"></label>\n           </div>\n           <div>\n               <input name="toAccount" class="w-100 h-100" list="toAccounts" type="search" ng-model="$ctrl.contribution.toAccount" ng-change="$ctrl.onPopulate()" required></input>\n                <datalist id="toAccounts">\n                </datalist>\n          </div> \n     </div>\n     <div class="col-12 col-sm-2">\n           <div>\n               <label class="control-label" translate="cashTransfer.internal.singleSimpleIraTransfer.label.accountTitle"></label>\n           </div>\n           <div>\n               <input name="accountTitle" class="w-100 h-100" ng-model="$ctrl.contribution.accountTitle" disabled>\n           </div> \n     </div>\n     <div class="col-12 col-sm-1">\n           <div>\n               <label class="control-label" translate="cashTransfer.internal.singleSimpleIraTransfer.label.ytd"></label>\n           </div>\n           <div>\n               <input name="ytdAmount" class="w-100 h-100" ng-model="$ctrl.contribution.ytdAmount" disabled></input>\n           </div>\n     </div>\n     <div class="col-12 col-sm-1">\n           <div>\n              <label class="control-label" translate="cashTransfer.internal.singleSimpleIraTransfer.label.amount"></label>\n           </div>\n           <div>\n              <am-input name="amount" class="w-100 h-100" ng-model="$ctrl.contribution.moneyAmount.amount" input-mask-alias="transferAmount" is-required="true"></am-input>\n           </div>      \n     </div>\n     <div class="col-12 col-sm-3">\n           <div>\n              <label class="control-label" translate="cashTransfer.internal.singleSimpleIraTransfer.label.type"></label>\n           </div>\n           <div>\n              <am-select name="iraDepositType" ng-model="$ctrl.contribution.iraParameters.iraDepositType" options="$ctrl.transferRule.iraRules[$ctrl.contribution.toAccount].allowedIraDepositTypes" option-key="\'iraDepositType.\'" hide-empty-option="true" ng-change="$ctrl.updateYtd()" required></am-select>\n           </div>\n     </div>\n     <div class="col-12 col-sm-2">\n           <div>\n              <label class="control-label" translate="cashTransfer.internal.singleSimpleIraTransfer.label.contributionYear"></label>\n           </div>\n           <div>\n              <am-select name="contributionYear" ng-model="$ctrl.contribution.iraParameters.contributionYear" options="$ctrl.transferRule.iraRules[$ctrl.contribution.toAccount].allowedContributionYears[$ctrl.contribution.iraParameters.iraDepositType]" is-disabled="angular.isUndefined($ctrl.contribution.toAccount)" no-translate="true" option-key="$ctrl.getContributionYear" hide-empty-option="true" ng-change="$ctrl.updateYtd()" required></am-select>\n           </div>\n     </div>\n     <div class="col-12 col-sm-1">\n           <div>\n               &nbsp;\n           </div>\n           <div>\n               <am-button btn-type="icon" btn-icon="fa fa-times" on-click="$ctrl.onRemove()"></am-button>\n           </div>\n     </div>\n</div>\n<hr>'},function(e,t,n){e.exports=function(e){n(1087)(e),n(1089)(e),n(1091)(e),n(1093)(e),n(1095)(e),n(1097)(e),n(1099)(e)}},function(e,t,n){e.exports=function(e){e.component("transactionModifyForm",{require:{parentForm:"^^form"},bindings:{transaction:"<"},template:n(1088)})}},function(e,t){e.exports='<div ng-if="$ctrl.transaction.type === \'DEPOSIT\'">\n    <am-form-input name="amount" input-mask-alias="amountPositive" ng-model="$ctrl.transaction.amount" type="text" label-text="{{\'transfer.label.amount\' | translate}}" required></am-form-input>\n    <div ng-if="!$ctrl.transaction.esignRestricted && $ctrl.transaction.beneficiaryBankAccount">\n        <am-form-input ng-if="$ctrl.transaction.method !== \'BILL_PAY\'" ng-model="$ctrl.transaction.beneficiaryBankAccount.bank.bankName" name="bankName" maxlength="64" type="text" ph-text="{{\'transfer.placeholder.sendingInstitution\' | translate}}" label-text="{{\'transfer.label.sendingInstitution\' | translate}}" required></am-form-input>\n        <am-form-input ng-model="$ctrl.transaction.beneficiaryBankAccount.bankAccountNumber.accountNumber" name="bankAccountNumber" maxlength="64" type="text" label-text="{{\'transfer.label.accountNumber\' | translate}}" is-required="$ctrl.transaction.isAcctNoRequired"></am-form-input>\n    </div>\n    <div ng-if="$ctrl.transaction.clientReferenceAllowed">\n        <am-form-input ng-model="$ctrl.transaction.clientReference" name="clientReference" maxlength="1000" type="text" label-text="{{\'transfer.label.clientReference\' | translate}}"></am-form-input>\n    </div>\n</div>\n<div ng-if="$ctrl.transaction.type === \'POSITION_INBOUND\' && $ctrl.transaction.contraBrokerAccount.accountNumberType !== \'SRN_NUMBER\'">\n    <am-form-input ng-model="$ctrl.transaction.contraBrokerAccount.accountNumber" name="accountNumber" label-text="{{\'broker.label.brokerAccount\' | translate}}" required maxlength="32"></am-form-input>\n</div>\n<div ng-if="$ctrl.transaction.contraBrokerAccount.accountNumberType === \'SRN_NUMBER\'">\n    <am-form-input ng-model="$ctrl.transaction.contraBrokerAccount.accountNumber" name="accountNumber" label-text="{{\'broker.label.SRN_NUMBER\' | translate}}" required maxlength="32"></am-form-input>\n</div>'},function(e,t,n){e.exports=function(e){e.component("transactionReview",{bindings:{transaction:"<",onUpdateIraTaxYear:"<?",displayOptions:"<"},template:n(1090),controller:["ResourceService","AlphaTestService",function(t,n){var a=this;a.$onInit=function(){a.showDates=a.displayOptions.showDates,a.hasOriginWithdrawalDate=function(){var e=a.transaction.transferParameters.method;return"ACH"===e||"RFP"===e},a.showIsaInstruction=function(){return!angular.isUndefined(a.transaction)&&"ISA"===a.transaction.transferParameters.method&&("CANCELED"!==a.transaction.status&&"REJECTED"!==a.transaction.status)},a.showFopAuthorizationInstructions=function(){return!!a.regam15287&&("POSITION_INBOUND"===a.transaction.transferParameters.type&&(("ASSET_TRANSFER"===a.transaction.transferParameters.method||"FOP"===a.transaction.transferParameters.method)&&("CANCELED"!==a.transaction.status&&"REJECTED"!==a.transaction.status&&"EXPIRED"!==a.transaction.status)))},a.fopAuthorizationData={id:a.transaction.transactionId,requestTime:a.transaction.requestDate,accountId:a.transaction.accountId,transferParameters:a.transaction.transferParameters,transferInstruction:a.transaction.transferInstruction},n.fetch("REGAM-15287").then(function(e){a.regam15287=e.data.isEnabled});a.getSwiftMessage=function(){angular.isUndefined(a.swiftMessage)&&(a.isSwiftMessageLoading=!0,t.fetch(e.SERVER_PATH+"/ClientTransactionReview/Transaction/"+a.transaction.transactionId+"?loadSwiftMessage").then(function(e){a.swiftMessage=e.data.swiftMessage}).finally(function(){a.isSwiftMessageLoading=!1}))},a.isWithdrawalDateSame=function(){var e=a.transaction.availableForWithdrawalRestricted,t=a.transaction.availableForWithdrawalUnrestricted;if(angular.isDefined(e)&&angular.isDefined(t)&&e===t)return!0}}}]})}},function(e,t){e.exports='\x3c!-- General Fields --\x3e\n<am-form-label label-text="{{\'word.referenceNumber\' | translate}}" value-text="{{$ctrl.transaction.transactionId}}"></am-form-label>\n\n<am-form-label ng-if="$ctrl.transaction.uetr.length > 0" label-text="{{\'transaction.field.uetr\' | translate}}" value-text="{{$ctrl.transaction.uetr}}<br><span class=\'text-small text-muted\'>{{\'transaction.desc.uetr\' | translate}}</span>"></am-form-label>\n<am-form-label label-text="{{\'transaction.field.status\' | translate}}" value-text="{{\'transaction.status.\' + $ctrl.transaction.status | translate}}"></am-form-label>\n<div ng-if="$ctrl.showDates && $ctrl.transaction.transferParameters.method !== \'DIRECT_DEPOSIT\'" ng-switch="$ctrl.transaction.transferParameters.method">\n    <div ng-switch-when=\'DEBIT_CARD\'>\n        <am-form-label ng-if="!$ctrl.transaction.isLynxReview" label-text="{{\'transaction.field.date\' | translate}}" value-text="{{$ctrl.transaction.requestDate}}"></am-form-label>\n        <am-form-label ng-if="$ctrl.transaction.isLynxReview && $ctrl.transaction.requestDateTimestamp" label-text="{{\'transaction.field.transactionTime\' | translate}}" value-text="{{$ctrl.transaction.requestDateTimestamp}}"></am-form-label>\n    </div>\n    <div ng-switch-default>\n        <am-form-label ng-if="!$ctrl.transaction.isLynxReview" label-text="{{\'transaction.field.requestDate\' | translate}}" value-text="{{$ctrl.transaction.requestDate}}"></am-form-label>\n        <am-form-label ng-if="$ctrl.transaction.isLynxReview && $ctrl.transaction.requestDateTimestamp" label-text="{{\'transaction.field.depositTime\' | translate}}" value-text="{{$ctrl.transaction.requestDateTimestamp}}"></am-form-label>\n    </div>\n</div>    \n<am-form-label label-text="{{\'transaction.field.accountId\' | translate}}" value-text="{{$ctrl.transaction.accountId}}"></am-form-label>\n<am-form-label label-text="{{\'transaction.field.accountTitle\' | translate}}" value-text="{{$ctrl.transaction.accountTitle}}"></am-form-label>\n<am-form-label ng-if = "$ctrl.transaction.sourceType === \'INSTRUCTION_REVIEW\'" label-text="{{\'transaction.field.currencyType\' | translate}}" value-text="{{$ctrl.transaction.transferInstruction.currencyType}}"></am-form-label>\n<am-form-label ng-if = "$ctrl.transaction.sourceType === \'INSTRUCTION_REVIEW\'" label-text="{{\'transaction.field.amount\' | translate}}" value-text="{{$ctrl.transaction.transferParameters.moneyAmount.amount}}"></am-form-label>\n\n\n\x3c!-- Deposit Fields --\x3e\n<div ng-if="$ctrl.transaction.transferParameters.type === \'DEPOSIT\'">\n    <div ng-if="$ctrl.showDates">\n        <am-form-label ng-if="$ctrl.transaction.depositArrival" label-text="{{\'transaction.field.dateReceived\' | translate}}" value-text="{{$ctrl.transaction.depositArrival}}"></am-form-label>\n        <am-form-label ng-if="$ctrl.transaction.creditedToEquity" label-text="{{\'transaction.field.dateAvailableForTrading\' | translate}}" value-text="{{$ctrl.transaction.creditedToEquity}}"></am-form-label>\n    \n        <div ng-if="$ctrl.hasOriginWithdrawalDate() && !$ctrl.isWithdrawalDateSame()">\n            <am-form-label ng-if="$ctrl.transaction.availableForWithdrawalRestricted" label-text="{{\'transaction.field.dateAvailableForWithdrawalOriginal\' | translate}}" value-text="{{$ctrl.transaction.availableForWithdrawalRestricted}}"></am-form-label>\n            <am-form-label ng-if="$ctrl.transaction.availableForWithdrawalUnrestricted" label-text="{{\'transaction.field.dateAvailableForWithdrawalOther\' | translate}}" value-text="{{$ctrl.transaction.availableForWithdrawalUnrestricted}}"></am-form-label>\n        </div>\n\n        <div ng-if="!$ctrl.hasOriginWithdrawalDate() || $ctrl.isWithdrawalDateSame()">\n            <am-form-label  ng-if="$ctrl.transaction.availableForWithdrawalUnrestricted" label-text="{{\'transaction.field.dateAvailableForWithdrawal\' | translate}}" value-text="{{$ctrl.transaction.availableForWithdrawalUnrestricted}}"></am-form-label>\n        </div>\n    </div>\n    <am-form-label ng-if="$ctrl.transaction.isLynxReview" label-text="{{\'transaction.field.isInitialDeposit\' | translate}}" value-text="{{($ctrl.transaction.initialDepBrokerReview ? \'word.yes\' : \'word.no\') | translate}}"></am-form-label>\n</div>\n\n\x3c!-- Withdrawal Fields --\x3e\n<div ng-if="$ctrl.transaction.transferParameters.type === \'WITHDRAWAL\'">\n    <div ng-switch="$ctrl.transaction.transferParameters.method">\n        <div ng-switch-when=\'DEBIT_CARD\'>\n            <am-form-label ng-if="$ctrl.showDates && $ctrl.transaction.debitedFromEquity" label-text="{{\'transaction.field.datePosted\' | translate}}" value-text="{{$ctrl.transaction.debitedFromEquity}}"></am-form-label>\n            <am-form-label ng-if="$ctrl.transaction.transferParameters.merchantDetails" label-text="{{\'transaction.field.merchantDetails\' | translate}}" value-text="{{$ctrl.transaction.transferParameters.merchantDetails}}"></am-form-label>\n            <am-form-label ng-if="$ctrl.transaction.transferParameters.mcc" label-text="{{\'transaction.field.mcc\' | translate}}" value-text="{{$ctrl.transaction.transferParameters.mcc}}"></am-form-label>\n        </div>\n        <div ng-switch-when=\'BILL_PAY\'>\n            <am-form-label ng-if="$ctrl.transaction.transferParameters.payeeDetails" label-text="{{\'transaction.field.payeeDetails\' | translate}}" value-text="{{$ctrl.transaction.transferParameters.payeeDetails}}"></am-form-label>\n        </div>\n        <div ng-switch-default>\n            <am-form-label ng-if="$ctrl.showDates && $ctrl.transaction.debitedFromEquity" label-text="{{\'transaction.field.dateProcessed\' | translate}}" value-text="{{$ctrl.transaction.debitedFromEquity}}"></am-form-label>\n        </div>\n    </div>\n    <div ng-if="$ctrl.displayOptions.isWithdrawalAmountRevised">\n        <am-form-label label-text="{{\'transfer.label.amountRequested\' | translate}}" value-text="{{$ctrl.transaction.requestedWithdrawalAmount | amMoneyAmount}}"></am-form-label>\n        <am-form-label label-text="{{\'transfer.label.amountSent\' | translate}}" value-text="{{$ctrl.transaction.actualWithdrawalAmount | amMoneyAmount}}"></am-form-label>\n    </div>\n</div>\n\n\x3c!-- Position Fields --\x3e\n<div ng-if="$ctrl.showDates && ($ctrl.transaction.transferParameters.type === \'POSITION_INBOUND\' || $ctrl.transaction.transferParameters.type === \'POSITION_OUTBOUND\')">\n    <am-form-label ng-if="$ctrl.transaction.appliedToEquity" label-text="{{($ctrl.transaction.transferParameters.type === \'POSITION_INBOUND\' ? \'transaction.field.dateAvailableForTrading\' : \'transaction.field.dateProcessed\') | translate}}" value-text="{{$ctrl.transaction.appliedToEquity}}"></am-form-label>\n    <am-form-label ng-if="$ctrl.transaction.transferParameters.type === \'POSITION_INBOUND\' && $ctrl.transaction.availableForWithdrawal" label-text="{{\'transaction.field.dateAvailableForWithdrawal\' | translate}}" value-text="{{$ctrl.transaction.availableForWithdrawal}}"></am-form-label>\n</div>\n\n\x3c!-- Transfer Review --\x3e\n<transfer-review ng-if="$ctrl.transaction.sourceType !== \'INSTRUCTION_REVIEW\'" transfer-parameters="::$ctrl.transaction.transferParameters" transfer-date="::$ctrl.transaction.requestDate" no-header="true" ira-update-parameters="{updateIraContributionDetails: $ctrl.transaction.updateIraContributionDetails, onUpdateIraTaxYear: $ctrl.onUpdateIraTaxYear}" display-options="$ctrl.displayOptions"></transfer-review>\n\n<generic-form-data ng-if="::$ctrl.transaction.requestedAmount > 0" label-text="{{\'transaction.field.requestedAmount\' | translate}}">\n    <label>{{::$ctrl.transaction.requestedAmount | currency:$ctrl.transaction.transferParameters.moneyAmount.currencyType + \' \'}}</label>\n    <br>\n    <span class="text-xs text-blue" am-tooltip data-toggle="tooltip" data-placement="left" data-original-title="{{\'transaction.desc.requestedAmount\' | translate}}">{{\'transaction.info.requestedAmount\' | translate}}</span>\n</generic-form-data>\n\n<div ng-if="$ctrl.transaction.transferParameters.type === \'WITHDRAWAL\'">\n    <am-form-label ng-if="$ctrl.transaction.valueDate" label-text="{{\'transaction.field.withdrawalValueDate\' | translate}}" value-text="{{$ctrl.transaction.valueDate}}"></am-form-label>\n    <div ng-if="$ctrl.transaction.valueDateReason">\n        <p class="text-gray text-secondary"><strong>{{\'transaction.status.subtext.sent.vdReason.\' + $ctrl.transaction.valueDateReason| translate}}</strong></p>\n    </div>\n</div>\n\n\n<am-form-label ng-if="$ctrl.transaction.isLynxReview && $ctrl.transaction.ibrokWhitelistIdentifier && $ctrl.transaction.ibrokerReviewWhitelistIdentifierType !== \'BANK_ACCT_NUM\'" label-text="{{\'transfer.label.\' + $ctrl.transaction.ibrokerReviewWhitelistIdentifierType | translate}}" value-text="{{$ctrl.transaction.ibrokWhitelistIdentifier}}"></am-form-label>\n\n\n\x3c!-- Instruction Review --\x3e\n<instruction-review ng-if="::$ctrl.transaction.transferInstruction" instruction="::$ctrl.transaction.transferInstruction" hide-status="true"></instruction-review>\n\n\x3c!-- Sender Information --\x3e\n<div ng-if="$ctrl.transaction.originatingBankInfo || $ctrl.transaction.destinationBankInfo || $ctrl.transaction.byOrderOf" class="row">\n    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n        <h4>{{\'transfer.heading.senderInformation\' | translate}}</h4>\n        <div class="margin-top-10"></div>\n\n        <am-form-label ng-if="$ctrl.transaction.originatingBankInfo" label-text="{{\'transfer.label.originatingBankInfo\' | translate}}" value-text="{{$ctrl.transaction.originatingBankInfo}}"></am-form-label>\n        <am-form-label ng-if="$ctrl.transaction.destinationBankInfo" label-text="{{\'transfer.label.destinationBankInfo\' | translate}}" value-text="{{$ctrl.transaction.destinationBankInfo}}"></am-form-label>\n        <am-form-label ng-if="$ctrl.transaction.byOrderOf" label-text="{{\'transfer.label.byOrderOf\' | translate}}" value-text="{{$ctrl.transaction.byOrderOf}}"></am-form-label>\n    </div>\n</div>\n\n\x3c!-- Related Raw Data --\x3e\n<hr ng-if="$ctrl.transaction.transferParameters.method === \'WIRE\' && $ctrl.transaction.outboundSwiftMessageText.length > 0 && $ctrl.transaction.status !== \'CANCELED\'"></hr>\n<div ng-if="$ctrl.transaction.transferParameters.method === \'WIRE\' && $ctrl.transaction.outboundSwiftMessageText.length > 0 && $ctrl.transaction.status !== \'CANCELED\'"  class="row">\n    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n    <div  class="accordion">\n        <div class="accordion-item">\n            <h2 class="accordion-header">\n            <button class="accordion-button collapsed" type="button" data-toggle="collapse" data-target="#referenceInfo" aria-expanded="false" aria-controls="referenceInfo" ng-init= "toggle = true" ng-click="toggle = !toggle">\n                {{(toggle?\'transfer.heading.showReferenceInformation\': \'transfer.heading.hideReferenceInformation\')| translate}}\n                <span class="hidden-sm hidden-md hidden-lg"><br/></span>\n            </button>\n            </h2>\n            <div class="accordion-collapse collapse" id="referenceInfo">\n                <div class="accordion-body">\n                    <am-form-label ng-if="$ctrl.transaction.senderReference.length > 0" label-text="{{\'transfer.label.senderReference\' | translate}}" value-text="{{$ctrl.transaction.senderReference}}"></am-form-label>\n                    <am-form-label class= "white-space-pre-line" ng-if="$ctrl.transaction.outboundSwiftMessageText.length > 0" label-text="{{\'transfer.label.outboundSwiftMessage\' | translate}}" value-text="{{$ctrl.transaction.outboundSwiftMessageText}}"></am-form-label>\n                </div>\n            </div>     \n        </div>    \n    </div>         \n    </div>\n</div>\n\n\x3c!-- Swift Message for Client Transaction Review --\x3e\n<div ng-if="$ctrl.transaction.isLynxReview" ng-click="$ctrl.getSwiftMessage()">\n<hr></hr>    \n    <div class="row">    \n        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n        <div  class="accordion">\n            <div class="accordion-item">    \n                <h2 class="accordion-header" >\n                <button class="accordion-button collapsed" type="button" data-toggle="collapse" data-target="#referenceInfo" aria-expanded="false" aria-controls="referenceInfo" ng-init= "toggle = true" ng-click="toggle = !toggle" >\n                    {{(toggle?\'transfer.heading.showReferenceInformation\': \'transfer.heading.hideReferenceInformation\')| translate}}    \n                    <span class="hidden-sm hidden-md hidden-lg"><br/></span>\n                </button>\n                </h2>\n                <div class="accordion-collapse collapse" id="referenceInfo">\n                    <loading-overlay ng-if="$ctrl.isSwiftMessageLoading"></loading-overlay>\n                    <div class="accordion-body" ng-if="!$ctrl.isSwiftMessageLoading">\n                        <p class="white-space-pre-line text-break" ng-if="$ctrl.swiftMessage.length">{{$ctrl.swiftMessage}}</p>\n                        <p ng-if="!$ctrl.swiftMessage">{{ \'transfer.swiftMessage.notFound\' | translate}}</p>\n                    </div>    \n                </div>     \n            </div>    \n        </div>         \n        </div>\n    </div>\n</div>\n\n\x3c!-- Depot Switch Review --\x3e\n<div ng-if="$ctrl.transaction.transferParameters.type === \'DEPOT_SWITCH\'">\n    <br>\n    <depot-switch-transfer-review transfer-parameters="$ctrl.transaction.transferParameters"></depot-switch-transfer-review>\n</div>\n\n<isa-account-transfer-instructions ng-if="$ctrl.showIsaInstruction()" ira-type="$ctrl.transaction.iraType" custodian-entity="$ctrl.transaction.custodianEntity" transfer-parameters="$ctrl.transaction.transferParameters" transfer-date="$ctrl.transaction.requestDate" account-id="$ctrl.transaction.accountId" ticket-number="$ctrl.ticketNumber" entity="$ctrl.transaction.entity"></isa-account-transfer-instructions>\n<fop-authorization-instructions ng-if="$ctrl.showFopAuthorizationInstructions()" authorization-data="$ctrl.fopAuthorizationData"><fop-authorization-instructions>'},function(e,t,n){e.exports=function(e){e.component("customerServiceTicketReview",{bindings:{ticketNumber:"<",instruction:"<?"},template:n(1092),controller:["$translate","CsTicketService","ModalService",function(e,t,n){var a=this;a.$onInit=function(){a.ticketNumber=a.ticketNumber||0,a.isIraTrustee=function(){return angular.isDefined(a.instruction)&&angular.isDefined(a.instruction.beneficiary)&&"Trustee"===a.instruction.beneficiary.destinationPartyType},a.navigate=function(){n.isModalOpen()&&n.closeModal(),t.openTicket(a.ticketNumber)}}}]})}},function(e,t){e.exports='<div ng-if="!$ctrl.isIraTrustee()">\n    <hr>\n    <p>{{\'transfer.warning.withdrawal.bankInfoNeeded.ticket.line1\' | translate}}</p>\n    <p>{{\'transfer.warning.withdrawal.bankInfoNeeded.ticket.line2\' | translate}}</p>\n    <p translate="transfer.warning.withdrawal.bankInfoNeeded.ticket.line3" translate-compile translate-values="{boldStart: \'<b>\' , boldEnd: \'</b>\'}"></p>\n    <p>{{\'transfer.warning.withdrawal.bankInfoNeeded.ticket.line4\' | translate}}</p>\n    <div align="center">\n        <p><am-button btn-text="{{\'word.upload\' | translate}}" btn-type="info" on-click="$ctrl.navigate()"></am-button></p>\n    </div>\n</div>   \n<div ng-if="$ctrl.isIraTrustee()">\n    <hr>\n    <p>{{\'transfer.warning.withdrawal.iraTrustee.ticket\' | translate}}</p>\n    <p>{{\'transfer.warning.withdrawal.bankInfoNeeded.ticket.line4\' | translate}}</p>\n    <div align="center">\n        <p><am-button btn-text="{{\'word.upload\' | translate}}" btn-type="info" on-click="$ctrl.navigate()"></am-button></p>\n    </div>\n</div> '},function(e,t,n){e.exports=function(e){e.component("submitInquiryForm",{template:n(1094),bindings:{transaction:"<",inquirySummary:"=?",inquiryDetails:"=?",inquiryDocuments:"=?",showUploadFile:"<",docErrors:"=?"},require:{parentForm:"^^form"},controller:[function(){var e=this;e.$onInit=function(){e.fileRules={allowedExtensions:["pdf","png","jpg","jpeg"],maxSize:26214400},e.resetErrors=function(){e.docErrors={}}}}]})}},function(e,t){e.exports='<div class="form-group">\n\t<div class="row">\n\t\t<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n\t\t\t<am-form-input name="inquirySummary" ng-model="$ctrl.inquirySummary" label-text="{{\'transaction.inquiry.subject\' | translate}}" type="text" maxlength="100" required input-mask="disabled"></am-form-input>\n\t\t</div>\n\t</div>\n\t<div class="row">\n\t\t<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n\t\t\t<am-form-textarea name="inquiryDetails" ng-model="$ctrl.inquiryDetails" label-text="{{\'transaction.inquiry.body\' | translate}}" rows="5" cols="100" maxlength="1000" required></am-form-textarea>\n\t\t</div>\n\t</div>\n    <div ng-if="$ctrl.showUploadFile">\n    \t<div class="row">\n    \t\t<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n    \t\t\t<p>{{\'transaction.inquiry.uploadReason\' | translate}}</p>\n    \t\t\t<br/>\n    \t\t</div>\n    \t</div>\n    \t<div class="row">\n            <div class="col-xs-12 col-sm-6 col-md-6 col-lg-4">\n                <label class="control-label">{{\'transaction.inquiry.upload\' | translate}}</label>\n            </div>\n            <div class="col-xs-12 col-sm-6 col-md-6 col-lg-8">\n                <am-file-input name="inquiryDocuments" ng-model="$ctrl.inquiryDocuments" rules="$ctrl.fileRules" show-rules="true" is-required="true" multiple="false" server-errors="$ctrl.docErrors" model-listener="$ctrl.resetErrors()"></am-file-input>\n            </div>\n        </div>\n        <div ng-if="$ctrl.docErrors" class="row">\n\t        <div class="col-xs-12 col-sm-6 col-md-6 col-lg-4"></div>\n\t        <div class="col-xs-12 col-sm-6 col-md-6 col-lg-8">\n\t            <div class="alert alert-danger" ng-repeat="(key, value) in $ctrl.docErrors">\n\t                <p>{{\'field.error.\' + value | translate}}</p>         \n\t            </div>\n\t        </div>\n    </div>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("iraTransactionUpdateForm",{require:{parentForm:"^^form"},bindings:{transaction:"<",updatedParameters:"<"},template:n(1096),controller:["IraContributionService","$translate","ResourceService",function(t,n,a){var r=this;r.$onInit=function(){r.isLoading=!0,a.fetch(e.SERVER_PATH+"/TransactionHistory/Transaction/"+r.transaction.transactionId+"?updateIraRules").then(function(e){r.iraContributionUpdateRules=e.data;var n=r.transaction.valueDate.split("-"),a=new Date(n[0],n[1]-1,n[2]);r.currentTaxYearValue=t.getContributionYear(r.iraContributionUpdateRules.currentTaxYear,!1,a),r.allowedContributionYears=[];for(var i=r.iraContributionUpdateRules.currentIraDepositType,o=r.iraContributionUpdateRules.iraDepositRules.allowedContributionYears[i]||[],s=0;s<o.length;s++)o[s]!==r.iraContributionUpdateRules.currentTaxYear&&r.allowedContributionYears.push({yearValue:t.getContributionYear(o[s],!1,a),iraTaxYear:o[s]});r.isLoading=!1},function(e){r.errors=e.data.errors,r.isLoading=!1}),r.getContributionYear=function(e){return e.yearValue}}}]})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.isLoading"></loading-overlay>\n<div ng-if="! $ctrl.isLoading">\n    <am-form-input type="text" label-text="{{ \'transaction.updateIra.currentTaxYear\' | translate }}" ng-model="$ctrl.currentTaxYearValue" is-disabled="true"></am-form-input>\n    <am-form-select ng-model="$ctrl.updatedParameters.contributionYear" label-text="{{ \'transaction.updateIra.newTaxYear\' | translate }}" options="$ctrl.allowedContributionYears" option-key="$ctrl.getContributionYear" no-translate="true"></am-form-select>\n</div>'},function(e,t,n){e.exports=function(e){e.component("manualBankAcctForm",{template:n(1098),bindings:{manualBankAcctNumber:"="},require:{parentForm:"^^form"}})}},function(e,t){e.exports='<div data-private>\n    <am-form-input name="bankAccountNumber" ng-model="$ctrl.manualBankAcctNumber" type="text" label-text="{{\'bankAccountNumberType.NONE\' | translate}}" ph-text="{{\'clientTransaction.addBankAcctNumber.placeholder\' | translate}}" minlength="6" maxlength="32" required></am-form-input>\n</div>\n'},function(e,t,n){e.exports=function(e){e.component("transactionWarning",{bindings:{transaction:"<"},template:n(1100),controller:["ModalService","NavigationService","$translate","CsTicketService","CashMethodTextService",function(e,t,n,a,r){var i=this;i.$onInit=function(){i.cashieringWarning=i.transaction.cashieringWarning,i.getActionParameters=function(){var e={};return"LINK_WISE"===i.cashieringWarning.action?(e.method="WISE_BALANCE",e.type="DEPOSIT",e.moneyAmount={},e.moneyAmount.currencyType=i.transaction.transferParameters.moneyAmount.currencyType):"GET_ACH_INSTRUX"===i.cashieringWarning.action?(e.method="DIRECT_DEPOSIT",e.type="DEPOSIT",e.moneyAmount={},e.moneyAmount.currencyType=i.transaction.transferParameters.moneyAmount.currencyType):"VIEW_DEP_METHODS"===i.cashieringWarning.action?(e.type="DEPOSIT",e.moneyAmount={},e.moneyAmount.currencyType=i.transaction.transferParameters.moneyAmount.currencyType):"GET_WIRE_INSTRUX"===i.cashieringWarning.action?(e.method="WIRE_NOTIFICATION",e.type="DEPOSIT",e.moneyAmount=i.transaction.transferParameters.moneyAmount):"VIEW_CURRENCIES"===i.cashieringWarning.action&&(e.type="DEPOSIT"),e},i.isActionRequired=function(){return"NONE"!==i.cashieringWarning.action},i.getWarningIconClass=function(){return"WARN"===i.cashieringWarning.warningType?"fa fa-lg fa-exclamation-triangle":"fa fa-lg fa-info-circle"},i.getWarningTextClass=function(){return"ERROR"===i.cashieringWarning.warningType||"ACTION_REQUIRED"===i.cashieringWarning.warningType?"alert alert-danger":"alert alert-info"},i.getButtonType=function(){return"ERROR"===i.cashieringWarning.warningType||"ACTION_REQUIRED"===i.cashieringWarning.warningType?"danger":"primary"},i.getWarningText=function(){var e="fundingWarning."+i.cashieringWarning.warningName+".warning",t=n.instant(e,{lineBreak:"<br>",transactionMethod:r.getMethodName(i.transaction.transferParameters),currency:i.transaction.transferParameters.moneyAmount.currencyType});return t!==e?t:i.cashieringWarning.defaultText},i.getActionButtonText=function(){return n.instant("fundingWarning.action."+i.cashieringWarning.action+".button")},i.redirectToTransferFunds=function(){var n={autoSelect:i.transaction.accountId},a={sequenceParameters:{transferDetails:i.transferDetails}};t.menuNavigate("TransferFunds",a,n),e.closeModal()},i.viewInquiry=function(){e.isModalOpen()&&e.closeModal(),a.openTicket(i.transaction.ticketNumbers[0],i.transaction.accountId)},i.onClick=function(){"VIEW_INQUIRY"===i.cashieringWarning.action?i.viewInquiry():"LINK_WISE"!==i.cashieringWarning.action&&"GET_ACH_INSTRUX"!==i.cashieringWarning.action&&"VIEW_DEP_METHODS"!==i.cashieringWarning.action&&"GET_WIRE_INSTRUX"!==i.cashieringWarning.action&&"VIEW_CURRENCIES"!==i.cashieringWarning.action||i.redirectToTransferFunds()},i.cashieringWarning&&"NONE"!==i.cashieringWarning.action&&(i.transferDetails={},i.transferDetails.transferParameters=i.getActionParameters(),"VIEW_DEP_METHODS"!==i.cashieringWarning.action&&"VIEW_CURRENCIES"!==i.cashieringWarning.action||(i.transferDetails.showNewMethods=!0))}}]})}},function(e,t){e.exports='<div ng-if="$ctrl.isActionRequired()" class="{{::$ctrl.getWarningTextClass()}} row align-items-center p-0">\n    <div class="col-xs-12 col-sm-10 col-md-10 col-lg-10 p-10">\n        <span>\n            \x3c!-- <i class="{{::$ctrl.getWarningIconClass()}}"></i>  --\x3e\n            <span ng-bind-html="$ctrl.getWarningText() | renderHTML"></span>\n        </span>\n    </div>\n    <div class="col-xs-12 col-sm-2 col-md-2 col-lg-2 p-10" align="center">\n        <am-button btn-size="small" on-click="$ctrl.onClick()" btn-type="{{$ctrl.getButtonType()}}" btn-text="{{ $ctrl.getActionButtonText() }}"></am-button>\n    </div>\n</div>\n<div ng-if="!$ctrl.isActionRequired()" class="{{::$ctrl.getWarningTextClass()}} row align-items-center p-0">\n    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 p-10">\n        <span>\n            \x3c!-- <i class="{{::$ctrl.getWarningIconClass()}}"></i>  --\x3e\n            <span ng-bind-html="$ctrl.getWarningText() | renderHTML"></span>\n        </span>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){n(1102)(e),n(1109)(e),n(1111)(e),n(1113)(e)}},function(e,t,n){e.exports=function(e){n(1103)(e),n(1105)(e),n(1107)(e)}},function(e,t,n){e.exports=function(e){e.component("positionBalanceSelection",{require:{$itemManipulator:"^^amItemManipulator",$positionTransferForm:"^^positionTransferForm",parentForm:"^^form"},template:n(1104),controller:["FundingService",function(e){var t=this,n=function(n){for(var a=0;a<n.entries.length;++a){var r=n.entries[a],i=t.$positionTransferForm.getSelectedAsset(r.details);angular.isDefined(i)?(i.availableQuantity=r.availableQuantity,i.availableBondQuantity=r.availableBondQuantity,i.isSelected=!0,n.entries[a]=i):r.quantity=0;var o=e.getConId(r.details);n.entries[a].conId=o}},a=function(){var e=t.$itemManipulator.getFilterService();return!angular.isUndefined(e)&&!angular.isUndefined(e.filters.positionText)&&e.filters.positionText.enabled};t.$onInit=function(){t.showSelections=function(){return e=t.$itemManipulator.services.PAGINATION,angular.isDefined(e)&&e.hasPageControls||a();var e},t.showPositionTable=function(){return t.$itemManipulator.entries.length>0||a()},t.assetSelected=function(e){e.isSelected?e.quantity=t.getAvailableQuantity(e):(t.parentForm["assetQuantity_"+e.conId].$setValidity("invalid",!0),e.quantity=0),t.$positionTransferForm.onBalanceSelect(e)},t.assetQuantityChanged=function(e){var n="assetQuantity_"+e.conId,a=e.quantity,r=t.getAvailableQuantity(e);r<0&&(a<r||a>=0)?t.parentForm[n].$setValidity("invalid",!1):r>0&&(a>r||a<=0)?t.parentForm[n].$setValidity("invalid",!1):t.parentForm[n].$setValidity("invalid",!0)},t.getAssetMask=function(e){var n=t.$positionTransferForm.transferRules.fractionalTransferSupported;return"SHORT"===e.quantityType?n?"positionAmountNegative":"quantityNegative":n?"positionAmountPositive":"quantityPositive"},t.getAvailableQuantity=function(e){return t.quantityRules[e.details.type].bondQuantity?e.availableBondQuantity:e.availableQuantity},t.quantityRules={};for(var e=0;e<t.$positionTransferForm.transferRules.assetQuantityRules.length;++e){var r=t.$positionTransferForm.transferRules.assetQuantityRules[e];t.quantityRules[r.assetRules.type]=r}t.$itemManipulator.itemHooks.load.push(n),t.$itemManipulator.itemHooks.update.push(n);var i=t.$positionTransferForm.transferParameters;"INTERNAL"===i.type?t.$itemManipulator.itemControl.customUpdate("AllowedPositionService",{transferParameters:{type:i.type,method:i.method,fromAccount:i.fromAccount,toAccount:i.toAccount}}):t.$itemManipulator.itemControl.customUpdate("AllowedPositionService",{transferParameters:{type:i.type,method:i.method}})}}]})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.$itemManipulator.loadInProgress"></loading-overlay>\n\n<div class="row" ng-if="!$ctrl.$itemManipulator.loadInProgress && !$ctrl.showPositionTable()">\n    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n        <div class="alert alert-warning">\n            <p>{{\'transfer.noPositions\' | translate}}</p>\n        </div>\n    </div>\n</div>\n\n<div class="form-group" ng-if="$ctrl.showPositionTable()">\n    <div class="row" ng-if="$ctrl.$itemManipulator.entries.length > 0">\n        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n            <div class="alert alert-info">\n                <p translate="transfer.position.positionBalances.filtered" translate-values="{ strongStart : \'<strong>\', strongEnd : \'</strong>\' }"></p>\n            </div>\n        </div>\n    </div>\n\n    <div class="row">\n        <div class="col-xs-12 col-sm-12 col-md-3 col-lg-3">\n            <freeform-text-filter filter-id="positionText" placeholder-key-prefix="data.filter.option.placeholder."></freeform-text-filter>\n            <br>\n        </div>\n    </div>\n\n    <div class="row">\n        <div ng-if="$ctrl.$itemManipulator.entries.length === 0" class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n            <div class="alert alert-gray">\n                <p>{{\'transfer.noPositions\' | translate}}</p>\n            </div>\n        </div>\n        \n        <div ng-if="$ctrl.$itemManipulator.entries.length > 0" class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n            <table width="100%" cellpadding="0" cellspacing="0" border="0" class="table">\n                <thead>\n                    <tr>\n                        <th width="5%">&nbsp;</th>\n                        <th width="15%" align="left">{{\'asset.search.label.quantity\' | translate}}</th>\n                        <th width="15%" align="left">{{\'transfer.label.availableQuantity\' | translate}}</th>\n                        <th width="15%" align="left">{{\'asset.search.label.assetType\' | translate}}</th>\n                        <th width="30%" align="left">{{\'asset.search.label.description\' | translate}}</th>\n                        <th align="left">{{\'asset.search.label.identifiers\' | translate}}</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    <tr ng-repeat="asset in $ctrl.$itemManipulator.entries" ng-class="{ \'active\' : asset.isSelected }">\n                        <td align="center">\n                            <input ng-change="$ctrl.assetSelected(asset)" ng-model="asset.isSelected" type="checkbox" i-check />\n                        </td>\n                        <td align="left">\n                            <am-input name="{{\'assetQuantity_\' + asset.conId}}" ng-model="asset.quantity" input-mask-alias="{{$ctrl.getAssetMask(asset)}}" type="text" change-listener="$ctrl.assetQuantityChanged(asset)" is-required="asset.isSelected" is-disabled="!asset.isSelected"></am-input>\n                        </td>\n                        <td align="left">/&nbsp;{{$ctrl.getAvailableQuantity(asset)}}</td>\n                        <td align="left">{{\'asset.type.\' + asset.details.type | translate}}</td>\n                        <td align="left">{{asset.details.description}}</td>\n                        <td align="left"><position-id-review position-details="asset.details"></position-id-review></td>\n                    </tr>\n                </tbody>\n            </table>\n            <br>\n            <pagination-controls></pagination-controls>\n        </div>\n    </div>\n</div>\n\n<div ng-if="$ctrl.showSelections() && $ctrl.$positionTransferForm.getSelectedAssets().length > 0">\n    <hr>\n    <h4>{{\'transfer.label.selectedAssets\' | translate}}</h4>\n    <div class="row">\n        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n            <table width="100%" cellpadding="0" cellspacing="0" border="0" class="table">\n                <thead>\n                    <tr>\n                        <th width="15%" align="left">{{\'asset.search.label.quantity\' | translate}}</th>\n                        <th width="15%" align="left">{{\'asset.search.label.assetType\' | translate}}</th>\n                        <th width="40%" align="left">{{\'asset.search.label.description\' | translate}}</th>\n                        <th align="left">{{\'asset.search.label.identifiers\' | translate}}</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    <tr ng-repeat="asset in $ctrl.$positionTransferForm.getSelectedAssets()">\n                        <td align="left">{{asset.quantity}}</td>\n                        <td align="left">{{\'asset.type.\' + asset.details.type | translate}}</td>\n                        <td align="left">{{asset.details.description}}</td>\n                        <td align="left"><position-id-review position-details="asset.details"></position-id-review></td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n    </div>\n</div>\n'},function(e,t,n){e.exports=function(e){e.component("tbszBalanceSelection",{require:{$itemManipulator:"^^amItemManipulator",$tbszTransferForm:"^^tbszTransferForm",parentForm:"^^form"},template:n(1106),controller:["FundingService",function(e){var t=this,n=function(n){for(var a=0;a<n.entries.length;++a){var r=n.entries[a],i=t.getSelectedAsset(r.details);angular.isDefined(i)&&(i.isSelected=!0,"CASH"===r.details.type?i.withdrawableAmount=r.withdrawableAmount:"CASH"!==r.details.type&&(i.availableBondQuantity=r.availableBondQuantity,i.availableQuantity=r.availableQuantity,i.mktPrice=r.mktPrice,i.currency=r.currency),n.entries[a]=i);var o=e.getConId(r.details);n.entries[a].conId=o,n.entries[a].quantityType="LONG"}};t.$onInit=function(){t.transferParameters=t.$tbszTransferForm.transferParameters,t.showPositionTable=function(){return t.$itemManipulator.entries.length>0},t.transferParameters.assets=t.transferParameters.assets||[],t.onBalanceSelect=function(e){if(e.isSelected)!angular.isDefined(t.transferParameters.tbszOperation)||"ROLLOVER"!==t.transferParameters.tbszOperation&&"PARTIAL_WITHDRAWAL"!==t.transferParameters.tbszOperation||t.transferParameters.percentageBased||t.transferParameters.assets.push(e);else{var n=t.transferParameters.assets.indexOf(e);t.transferParameters.assets.splice(n,1)}},t.getPlaceholderText=function(e){return"CASH"!==e.details.type?"1-".concat(Math.floor(e.availableQuantity)):"0.00"},t.getApproximateAmount=function(e){var t=angular.isDefined(e.quantity)?e.quantity:0;return("CASH"!==e.details.type?t*e.mktPrice:t/e.withdrawableAmount*100).toFixed(2)},t.assetSelected=function(e){e.isSelected||("CASH"!==e.details.type?t.parentForm["assetQuantity_"+e.conId].$setPristine():t.parentForm["assetQuantity_"+e.details.currencyType].$setPristine(),e.quantity=void 0),t.onBalanceSelect(e)},t.assetQuantityChanged=function(e){var n=+e.quantity;if("CASH"!==e.details.type){var a="assetQuantity_"+e.conId,r=+t.getAvailableQuantity(e);r<0&&(n<r||n>=0)?t.parentForm[a].$setValidity("invalid",!1):r>0&&(n>r||n<=0)?t.parentForm[a].$setValidity("invalid",!1):t.parentForm[a].$setValidity("invalid",!0)}else{var i="assetQuantity_"+e.details.currencyType;n>+e.withdrawableAmount?t.parentForm[i].$setValidity("invalid",!1):t.parentForm[i].$setValidity("invalid",!0)}},t.getAvailableQuantity=function(e){return(t.quantityRules[e.details.type].bondQuantity?e.availableBondQuantity:e.availableQuantity).toFixed(2)},t.getMarketPrice=function(e){return e.mktPrice.toFixed(2)},t.quantityRules={};for(var a=0;a<t.$tbszTransferForm.transferRules.assetQuantityRules.length;++a){var r=t.$tbszTransferForm.transferRules.assetQuantityRules[a];t.quantityRules[r.assetRules.type]=r}t.getSelectedAssets=function(){return t.transferParameters.assets},t.getSelectedAsset=function(n){var a=e.getAssetIndex(t.getSelectedAssets(),n,function(e){return e.details});return-1!==a?t.getSelectedAssets()[a]:void 0},t.$itemManipulator.itemHooks.load.push(n),t.$itemManipulator.itemHooks.update.push(n);var i=t.$tbszTransferForm.transferParameters;t.$itemManipulator.itemControl.customUpdate("AllowedTbszAssetService",{transferParameters:{type:i.type,method:i.method,fromAccount:i.fromAccount,toAccount:i.toAccount}})}}]})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.$itemManipulator.loadInProgress"></loading-overlay>\n\n<div class="row" ng-if="!$ctrl.$itemManipulator.loadInProgress && !$ctrl.showPositionTable()">\n    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n        <div class="alert alert-warning">\n            <p>{{\'transfer.noPositions\' | translate}}</p>\n        </div>\n    </div>\n</div>\n\n<div class="form-group" ng-if="$ctrl.showPositionTable()">\n    \x3c!-- ToDo - Currently only the positions are searched, make the cash also searchable --\x3e\n    \x3c!-- <div class="row">\n        <div class="col-xs-12 col-sm-12 col-md-3 col-lg-6">\n            <freeform-text-filter filter-id="positionText" placeholder-key-prefix="data.filter.option.placeholder."></freeform-text-filter>\n            <br>\n        </div>\n    </div> --\x3e\n\n    <div class="row">\n        <div ng-if="$ctrl.$itemManipulator.entries.length === 0" class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n            <div class="alert alert-gray">\n                <p>{{\'transfer.noPositions\' | translate}}</p>\n            </div>\n        </div>\n        <div ng-if="$ctrl.$itemManipulator.entries.length > 0" class="col-xs-12 col-sm-12 col-md-12 col-lg-12">    \n            <am-form-error  name="assets"></am-form-error> \n            <div class="table-responsive">\n                <table class="table table-tbody-hover tablesorter">\n                    <thead>\n                        <tr>\n                            <th>&nbsp;</th>\n                            <th ng-repeat="sorter in $ctrl.$itemManipulator.services[\'SORTER\'].sorters" ng-click="$ctrl.$itemManipulator.toggleSort(sorter)" align="left" valign="middle" class="header" ng-class="{ \'headerSortDown\' : sorter.state == \'DESCENDING\', \'headerSortUp\' : sorter.state == \'ASCENDING\' }" >\n                                {{ \'data.sorter.name.\' + sorter.id | translate}}\n                            </th>\n                            <th align="left">{{\'asset.search.label.withdrawalAmount.\' + $ctrl.$tbszTransferForm.transferParameters.tbszOperation | translate}}</th>\n                            <th>&nbsp;</th>\n                        </tr>\n                    </thead>\n                    <tbody>    \n                        <tr ng-repeat="asset in $ctrl.$itemManipulator.entries track by $index" ng-class="{ \'active\' : asset.isSelected }">\n                            \x3c!--Selecting cash/asset --\x3e\n                            <td align="center">\n                                <input  ng-change="$ctrl.assetSelected(asset)" ng-model="asset.isSelected" type="checkbox" />\n                            </td>\n                            \x3c!--Type of cash/asset --\x3e\n                            <td align="left">{{ ((asset.details.type === \'CASH\') ? asset.details.currencyType : asset.details.description) }}</td>\n                            \x3c!--Amount of cash/asset --\x3e\n                            <td align="right">{{ ((asset.details.type === \'CASH\') ? asset.withdrawableAmount : $ctrl.getAvailableQuantity(asset)) }}</td>\n                            \x3c!--Market value --\x3e\n                            <td ng-if="asset.details.type !== \'CASH\'" align="right">\n                                <span>{{$ctrl.getMarketPrice(asset)}}</span><br/>\n                                <span class="text-xs">{{asset.currency}}</span>\n                            </td>\n                            <td ng-if="asset.details.type === \'CASH\'" align="right">\n                                &nbsp;\n                            </td>\n                            \x3c!--Input field  for  entering amount cash/asset --\x3e    \n                            <td align="left">\n                                <am-input ng-if="asset.details.type === \'CASH\'" name="{{\'assetQuantity_\' + asset.details.currencyType }}" ng-model="asset.quantity" input-mask-alias="amountPositive" type="text" change-listener="$ctrl.assetQuantityChanged(asset)" is-required="asset.isSelected" is-disabled="!asset.isSelected"  ph-text ="{{$ctrl.getPlaceholderText(asset)}}"></am-input>\n                                <am-input ng-if="asset.details.type !== \'CASH\'" name="{{\'assetQuantity_\' + asset.conId}}" ng-model="asset.quantity" input-mask-alias="quantityPositive" type="text" change-listener="$ctrl.assetQuantityChanged(asset)" is-required="asset.isSelected" is-disabled="!asset.isSelected"  ph-text ="{{$ctrl.getPlaceholderText(asset)}}"></am-input>\n                                <am-form-error name="{{\'asset_\' + (asset.details.type === \'CASH\' ? asset.details.currencyType :asset.conId)}}" ng-model="asset.quantity"></am-form-error>\n                            </td>\n                            \x3c!--Approximate value --\x3e\n                            <td align="left" ng-show="asset.isSelected">    \n                                <span ng-if="asset.details.type === \'CASH\'">~&nbsp;{{$ctrl.getApproximateAmount(asset)+\'%\'}}</span>\n                                <span ng-if="asset.details.type !== \'CASH\'">~&nbsp;{{$ctrl.getApproximateAmount(asset)}}</span> \n                                <span ng-if="asset.details.type !== \'CASH\'" class="text-xs">{{asset.currency}}</span>\n                            </td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n            <br>    \n            <pagination-controls></pagination-controls>    \n        </div>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("tbszBalanceReview",{require:{$itemManipulator:"^^amItemManipulator",$tbszTransferForm:"^^tbszTransferForm",parentForm:"^^form"},template:n(1108),controller:["FundingService",function(e){var t=this,n=function(n){for(var a=0;a<n.entries.length;++a){var r=n.entries[a],i=t.getSelectedAsset(r.details);angular.isDefined(i)&&(i.isSelected=!0,"CASH"===r.details.type?i.withdrawableAmount=r.withdrawableAmount:"CASH"!==r.details.type&&(i.availableBondQuantity=r.availableBondQuantity,i.availableQuantity=r.availableQuantity,i.mktPrice=r.mktPrice),n.entries[a]=i);var o=e.getConId(r.details);n.entries[a].conId=o,n.entries[a].quantityType="LONG"}};t.$onInit=function(){t.transferParameters=t.$tbszTransferForm.transferParameters,t.showPositionTable=function(){return t.$itemManipulator.entries.length>0},t.getCalculatedPositions=function(e){var n=t.transferParameters.positionPercentage;return angular.isUndefined(n)?0:(.01*n*t.getAvailableQuantity(e)).toFixed(2)},t.getCalculatedCash=function(e){var n=t.transferParameters.cashPercentage;return angular.isUndefined(n)?0:(.01*n*e.withdrawableAmount).toFixed(2)},t.getAvailableQuantity=function(e){return(t.quantityRules[e.details.type].bondQuantity?e.availableBondQuantity:e.availableQuantity).toFixed(2)},t.getMarketPrice=function(e){return e.mktPrice.toFixed(2)},t.quantityRules={};for(var a=0;a<t.$tbszTransferForm.transferRules.assetQuantityRules.length;++a){var r=t.$tbszTransferForm.transferRules.assetQuantityRules[a];t.quantityRules[r.assetRules.type]=r}t.getSelectedAssets=function(){return t.transferParameters.assets},t.getSelectedAsset=function(n){var a=e.getAssetIndex(t.getSelectedAssets(),n,function(e){return e.details});return-1!==a?t.getSelectedAssets()[a]:void 0},t.$itemManipulator.itemHooks.load.push(n),t.$itemManipulator.itemHooks.update.push(n);var i=t.$tbszTransferForm.transferParameters;t.$itemManipulator.itemControl.customUpdate("AllowedTbszAssetService",{transferParameters:{type:i.type,method:i.method,fromAccount:i.fromAccount,toAccount:i.toAccount}})}}]})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.$itemManipulator.loadInProgress"></loading-overlay>\n\n<div class="row" ng-if="!$ctrl.$itemManipulator.loadInProgress && !$ctrl.showPositionTable()">\n    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n        <div class="alert alert-warning">\n            <p>{{\'transfer.noPositions\' | translate}}</p>\n        </div>\n    </div>    \n</div>\n\n<div class="form-group" ng-if="$ctrl.showPositionTable()">\n    \x3c!-- ToDo - Currently only the positions are searched, make the cash also searchable --\x3e\n    \x3c!-- <div class="row">\n        <div class="col-xs-12 col-sm-12 col-md-3 col-lg-6">\n            <freeform-text-filter filter-id="positionText" placeholder-key-prefix="data.filter.option.placeholder."></freeform-text-filter>\n            <br>\n        </div>\n    </div> --\x3e\n\n    <div class="row">\n        <div ng-if="$ctrl.$itemManipulator.entries.length === 0" class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n            <div class="alert alert-gray">\n                <p>{{\'transfer.noPositions\' | translate}}</p>\n            </div>\n        </div>    \n        <div ng-if="$ctrl.$itemManipulator.entries.length > 0" class="col-xs-12 col-sm-12 col-md-12 col-lg-12">    \n        <am-form-error  name="assets"></am-form-error> \n        <div class="table-responsive">\n            <table class="table table-tbody-hover tablesorter">\n                <thead>\n                    <tr>\n                        <th ng-repeat="sorter in $ctrl.$itemManipulator.services[\'SORTER\'].sorters" ng-click="$ctrl.$itemManipulator.toggleSort(sorter)" align="left" valign="middle" class="header" ng-class="{ \'headerSortDown\' : sorter.state == \'DESCENDING\', \'headerSortUp\' : sorter.state == \'ASCENDING\' }" >\n                            {{ \'data.sorter.name.\' + sorter.id | translate}}\n                        </th>\n                        <th align="left">{{\'asset.search.label.withdrawalAmount.\' + $ctrl.$tbszTransferForm.transferParameters.tbszOperation | translate}}</th>\n                    </tr>\n                </thead>\n                <tbody>    \n                    <tr ng-repeat="asset in $ctrl.$itemManipulator.entries track by $index">\n                        \x3c!--Type of cash/asset --\x3e\n                        <td align="left">{{ ((asset.details.type === \'CASH\') ? asset.details.currencyType : asset.details.description) }}</td>\n                        \n                        \x3c!--Amount of cash/asset --\x3e\n                        <td align="right">{{ ((asset.details.type === \'CASH\') ? asset.withdrawableAmount : $ctrl.getAvailableQuantity(asset)) }}</td>\n                        \n                        \x3c!--Market value --\x3e    \n                        <td ng-if="asset.details.type !== \'CASH\'" align="right">\n                            <span>{{$ctrl.getMarketPrice(asset)}}</span><br/>\n                            <span class="text-xs">{{asset.currency}}</span>\n                        </td>\n                        <td ng-if="asset.details.type === \'CASH\'" align="right">\n                            &nbsp;\n                        </td>\n                        \n                        \x3c!-- amount cash/asset are accumulated based on the percentage input--\x3e\n                        <td align="left">\n                            <am-form-label  value-text="{{ asset.details.type === \'CASH\' ? $ctrl.getCalculatedCash(asset) :$ctrl.getCalculatedPositions(asset)}}" model="asset.totalAsset" ></am-form-label>\n                            <am-form-error name="{{\'asset_\' + (asset.details.type === \'CASH\' ? asset.details.currencyType :asset.conId)}}" ng-model="asset.quantity"></am-form-error>\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n        </div>\n        <br>\n        <pagination-controls></pagination-controls>\n        </div>\n    </div>\n</div>\n'},function(e,t,n){e.exports=function(e){n(3)(e,"transferForm",{bindings:{transferParameters:"<",transferRules:"<",instruction:"<?",isRecurring:"=?"},template:n(1110)},function(){return[n.e(29).then(n.t.bind(null,1968,7)),n.e(29).then(n.t.bind(null,1969,7)),n.e(29).then(n.t.bind(null,1970,7)),n.e(29).then(n.t.bind(null,1971,7)),n.e(29).then(n.t.bind(null,1972,7)),n.e(29).then(n.t.bind(null,1973,7)),n.e(29).then(n.t.bind(null,1974,7)),Promise.resolve().then(n.t.bind(null,308,7))]})}},function(e,t){e.exports=' <div ng-switch on="$ctrl.transferParameters.type">\n    <div ng-switch-when="INTERNAL">\n        <tbsz-transfer-form ng-if="$ctrl.transferParameters.tbszOperation ===\'ROLLOVER\' || $ctrl.transferParameters.tbszOperation ===\'PARTIAL_WITHDRAWAL\'" transfer-parameters="$ctrl.transferParameters" transfer-rules="$ctrl.transferRules"></tbsz-transfer-form>\n        <cash-transfer-form ng-if="$ctrl.transferParameters.method !== \'POSITION\'"  transfer-parameters="$ctrl.transferParameters" transfer-rules="$ctrl.transferRules" selected-instruction="$ctrl.instruction" is-recurring="$ctrl.isRecurring"></cash-transfer-form>\n        <position-transfer-form ng-if="$ctrl.transferParameters.method === \'POSITION\' && $ctrl.transferParameters.tbszOperation !==\'PARTIAL_WITHDRAWAL\' && $ctrl.transferParameters.tbszOperation !==\'ROLLOVER\'" transfer-parameters="$ctrl.transferParameters" transfer-rules="$ctrl.transferRules"></position-transfer-form>\n    </div>\n    \n    <div ng-switch-when="POSITION_INBOUND|POSITION_OUTBOUND" ng-switch-when-separator="|">\n        <position-transfer-form transfer-parameters="$ctrl.transferParameters" transfer-rules="$ctrl.transferRules"></position-transfer-form>\n    </div>    \n    \n    <div ng-switch-default>\n        <cash-transfer-form transfer-parameters="$ctrl.transferParameters" transfer-rules="$ctrl.transferRules" selected-instruction="$ctrl.instruction" is-recurring="$ctrl.isRecurring"></cash-transfer-form>\n    </div>\n</div>\n'},function(e,t,n){e.exports=function(e){n(3)(e,"transferReview",{bindings:{transferParameters:"<",transferDate:"<?",noHeader:"<?",iraUpdateParameters:"<?",displayOptions:"<"},template:n(1112)},function(){return[n.e(1).then(n.t.bind(null,1975,7)),n.e(1).then(n.t.bind(null,1976,7)),n.e(1).then(n.t.bind(null,1977,7)),n.e(1).then(n.t.bind(null,1978,7))]})}},function(e,t){e.exports='<div ng-if="::!$ctrl.noHeader">\n    <h4>{{\'transfer.heading.transferInformation\' | translate}}</h4>\n    <div class="margin-top-10"></div>\n</div>\n\n<div ng-switch="$ctrl.transferParameters.type">\n    <div ng-switch-when="DEPOSIT|CREDIT" ng-switch-when-separator="|">\n        <deposit-transfer-review transfer-parameters="$ctrl.transferParameters" transfer-date="$ctrl.transferDate" ira-update-parameters="$ctrl.iraUpdateParameters"></deposit-transfer-review>\n    </div>\n    \n    <div ng-switch-when="INTERNAL">\n        <internal-funds-transfer-review ng-if="$ctrl.transferParameters.method !== \'POSITION\'" transfer-parameters="$ctrl.transferParameters" transfer-date="$ctrl.transferDate"></internal-funds-transfer-review>\n        <position-transfer-review ng-if="$ctrl.transferParameters.method === \'POSITION\'" transfer-parameters="$ctrl.transferParameters"></position-transfer-review>\n    </div>\n    \n    <div ng-switch-when="POSITION_INBOUND|POSITION_OUTBOUND" ng-switch-when-separator="|">\n        <position-transfer-review transfer-parameters="$ctrl.transferParameters"></position-transfer-review>\n    </div>\n    \n    <div ng-switch-when="WITHDRAWAL">\n        <withdrawal-transfer-review transfer-parameters="$ctrl.transferParameters" display-options="$ctrl.displayOptions"></withdrawal-transfer-review>\n    </div>\n\n    <div ng-switch-when="ACCOUNT_TRANSFER">\n        <isa-account-transfer-review ng-if="$ctrl.transferParameters.method === \'ISA\'" transfer-parameters="$ctrl.transferParameters"></isa-account-transfer-review>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("positionTransferUploadForm",{require:{parentForm:"^^form"},bindings:{transferParameters:"<",transferRules:"<"},template:n(1114),controller:["ResourceService","AgreementService",function(t,n){var a=this;a.attachmentData={},a.$onInit=function(){a.allowedExtensions=["pdf","png","jpg","jpeg"],a.maxFileSizeInMb=25,a.uploadDocuments=function(){angular.isDefined(a.thirdPartySignatureDocument)&&angular.isDefined(a.thirdPartySignatureDocument[0])&&(a.attachmentData.thirdPartySignatureDocument=a.thirdPartySignatureDocument[0]),angular.isDefined(a.contraStatementDocument)&&angular.isDefined(a.contraStatementDocument[0])&&(a.attachmentData.contraStatementDocument=a.contraStatementDocument[0]),a.transferParameters.attachmentData=a.attachmentData},a.downloadIraTransferForm=function(){a.isLoading=!0,t.fetch(e.SERVER_PATH+"/Agreement/Form/4415").then(function(e){var t=e.data.agreements;n.downloadPdfAgreement(t[0])}).finally(function(){a.isLoading=!1})},a.addLinkTag=function(){return{linkStart:'<a href="javascript:void(0);" ng-click="$ctrl.downloadIraTransferForm()">',linkEnd:"</a>"}}}}]})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.isLoading"></loading-overlay>\n<div>\n    <hr/>\n    <h4>{{\'transfer.heading.position.documents\' | translate}}</h4>\n    <br/>\n    <div ng-if="$ctrl.transferParameters.method === \'FOP\'">\n        <div class="row">\n            <div class="col-xs-12 col-sm-6 col-md-6 col-lg-4">\n                <label class="control-label" translate="transfer.position.upload.thirdPartySignature" translate-values="$ctrl.addLinkTag()" translate-compile></label>\n            </div>\n            <div class="col-xs-12 col-sm-6 col-md-6 col-lg-8">\n                <am-file-input name="thirdPartySignatureDocument" ng-model="$ctrl.thirdPartySignatureDocument" allowed-extensions="$ctrl.allowedExtensions" max-size="$ctrl.maxFileSizeInMb * 1000000" is-required="true" multiple="false" server-errors="$ctrl.signatureDocErrors" model-listener="$ctrl.uploadDocuments()"></am-file-input>\n            </div>\n        </div>\n        <br/><br/>\n        <div class="row">\n            <div class="col-xs-12 col-sm-6 col-md-6 col-lg-4">\n                <label class="control-label">{{\'transfer.position.upload.contraStatement\' | translate}}</label>\n            </div>\n            <div class="col-xs-12 col-sm-6 col-md-6 col-lg-8">\n                <am-file-input name="contraStatementDocument" ng-model="$ctrl.contraStatementDocument" allowed-extensions="$ctrl.allowedExtensions" max-size="$ctrl.maxFileSizeInMb * 1000000" is-required="true" multiple="false" server-errors="$ctrl.contraStatementDocErrors" model-listener="$ctrl.uploadDocuments()"></am-file-input>\n            </div>\n        </div>\n    </div>\n    <div ng-if="$ctrl.transferParameters.method === \'SRN_AU\'">\n        <div class="row">\n            <div class="col-xs-12 col-sm-6 col-md-6 col-lg-4">\n                <label class="control-label">{{\'transfer.position.upload.issuerSponsoredHoldingStatement\' | translate}}</label>\n            </div>\n            <div class="col-xs-12 col-sm-6 col-md-6 col-lg-8">\n                <am-file-input name="contraStatementDocument" ng-model="$ctrl.contraStatementDocument" allowed-extensions="$ctrl.allowedExtensions" max-size="$ctrl.maxFileSizeInMb * 1000000" is-required="true" multiple="false" server-errors="$ctrl.contraStatementDocErrors" model-listener="$ctrl.uploadDocuments()"></am-file-input>\n            </div>\n        </div>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){n(1116)(e),n(1125)(e),n(1130)(e)}},function(e,t,n){e.exports=function(e){n(1117)(e),n(1119)(e),n(1121)(e),n(1123)(e)}},function(e,t,n){e.exports=function(e){e.component("wiseLinkageForm",{require:{parentForm:"^^form"},bindings:{onFinish:"<",revoked:"<?"},template:n(1118),controller:["$window","$translate","$timeout","MessageHandlerService","WiseTransferService","ModalService",function(e,t,n,a,r,i){var o=this,s=function(e){r.event("Link Start");o.linking=!0,function t(){e.closed?o.linking=!1:n(t,1500)}()};o.$onInit=function(){o.register=function(){i.openModal({title:t.instant("transfer.wise.registration.title"),templateUrl:"wise-registration-modal.component",modalData:{authInfo:o.authInfo}}).then(function(e){angular.isDefined(e)&&null!==e&&s(e)})},o.isLinking=function(){return o.linking||o.linkSubmit},o.link=function(){s(e.open(o.authInfo.authorizeUrl,"wiseLink"))},o.getHeadingText=function(){return o.revoked?t.instant("transfer.wise.linkRevoked"):t.instant("transfer.wise.linkRequired")},o.loading=!0,r.authorize().then(function(t){o.authInfo=t.data.authInfo,o.isNativeApplicant=t.data.isNativeApplicant,t.data.unavailable?o.onFinish({result:"UNAVAILABLE"}):o.authInfo&&o.authInfo.authorizeUrl?angular.isDefined(e.wiseCallback)||(e.wiseCallback=function(e){if(!(angular.isUndefined(e)||angular.isUndefined(e.data)||angular.isUndefined(e.data.wiseProfileId))){var t=e.data;r.event("Link Callback",t),"SUCCESS"===t.result?(o.linkSubmit=!0,r.linkProfile(t).then(function(e){return o.onFinish({result:"SUCCESS"})}).catch(function(e){return o.onFinish({result:e.data&&e.data.result?e.data.result:"ERROR"})})):o.onFinish({result:"ERROR"})}},a.register(e.location.origin,e.wiseCallback)):o.onFinish({result:"ERROR"})}).catch(function(e){return o.onFinish({result:"ERROR"})}).finally(function(){return o.loading=!1})},o.$onDestroy=function(){delete e.wiseCallback,angular.isDefined(o.authInfo)&&angular.isDefined(o.authInfo.authorizeUrl)&&a.unregister(e.location.origin)}}]})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.loading"></loading-overlay>\n\n<div ng-if="!$ctrl.loading" class="form-group text-center">\n    <div ng-if="!$ctrl.isLinking()">\n        <div class="row">\n            <div class="col-8 offset-2">\n                <wise-logo></wise-logo>\n            </div>\n        </div>\n        \n        <h5>{{$ctrl.getHeadingText()}}</h5>\n        <br>\n        \n        <any ng-if="!$ctrl.revoked && !$ctrl.isNativeApplicant">\n            <p translate="transfer.wise.registerTerms" translate-values="{ termsLinkStart : \'<a href=&quot;https://wise.com/terms-and-conditions&quot; target=&quot;_blank&quot;>\', linkEnd : \'</a>\', strongStart : \'<strong>\', strongEnd : \'</strong>\' }" class="text-small"></p>\n            <br>\n        \n            <am-button btn-type="primary" btn-class="w-100" on-click="$ctrl.register()" btn-text="{{\'transfer.wise.registerButton\' | translate}}"></am-button>\n            <div class="margin-10"></div>\n        </any>\n        \n        <am-button btn-type="default" btn-class="w-100" on-click="$ctrl.link()" btn-text="{{\'transfer.wise.linkButton\' | translate}}"></am-button>\n    </div>\n    \n    <h5 ng-if="$ctrl.isLinking()" class="text-center">\n        <i class="fa fa-spin fa-spinner"></i>&nbsp;{{\'transfer.wise.linking\' | translate}}\n    </h5>\n</div>'},function(e,t,n){e.exports=function(e){e.component("wiseOutboundInstructionForm",{require:{parentForm:"^^form",$wiseTransfer:"^^?wiseTransfer"},bindings:{profileId:"<",transferParameters:"<",instructionParameters:"="},template:n(1120),controller:["WiseTransferService","DynamicSequenceService",function(e,t){var n=this;n.$onInit=function(){n.instructionParameters=n.instructionParameters||{},n.loading=!0,e.fetchOutboundInstruction(n.profileId,n.transferParameters).then(function(e){n.instructionParameters=e.data.instruction,n.instructionParameters.createInstruction=!0,n.instructionParameters.isBank=!0,0!==n.instructionParameters.instructionId&&"PENDING"!==n.instructionParameters.state&&t.isSequenceActive()&&t.restartSequence({transferDetails:{transferParameters:n.transferParameters,instructionId:n.instructionParameters.instructionId,instructionType:n.instructionParameters.instructionType}})}).catch(function(e){return n.error="outbound_BANK"}).finally(function(){var e,t,a;e=angular.isDefined(n.$wiseTransfer)&&null!=n.$wiseTransfer?n.$wiseTransfer.wiseStepButtons:{},t=e.backBtn,a=e.continueBtn,n.instructionButtons=[t],n.instructionParameters.beneficiaryBankAccount&&0===n.instructionParameters.instructionId&&n.instructionButtons.push(a),n.loading=!1}),n.hasError=function(){return angular.isDefined(n.error)&&""!==n.error},n.getErrorText=function(){return e.getErrorText(n.error)}}}]})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.loading"></loading-overlay>\n\n<div class="form-group">\n    <div class="row">\n        <div class="col-xs-4 col-sm-2">\n            <wise-logo></wise-logo>\n        </div>\n    </div>\n</div>\n\n<div ng-if="$ctrl.instructionParameters.beneficiaryBankAccount && $ctrl.instructionParameters.instructionId === 0">\n    <br>\n    <instruction-review instruction="$ctrl.instructionParameters"></instruction-review>\n</div>\n\n<div ng-if="!$ctrl.loading && !$ctrl.hasError() && !$ctrl.instructionParameters.beneficiaryBankAccount" class="row">\n    <div class="col">\n        <large-warning size="2">\n            <p class="text-center" translate="transfer.wise.outbound.noBank" translate-values="{ currencyType : $ctrl.transferParameters.moneyAmount.currencyType, loginLinkStart : \'<a href=&quot;https://www.wise.com&quot; target=&quot;_blank&quot;>\', linkEnd : \'</a>\' }"></p>\n        </large-warning>\n        <br>\n    </div>\n</div>\n\n<div ng-if="$ctrl.instructionParameters.state === \'PENDING\'" class="row">\n    <div class="col">\n        <large-warning size="2">\n            <p class="text-center" translate="transfer.wise.outbound.pending"></p>\n        </large-warning>\n        <br>\n    </div>\n</div>\n\n<div ng-if="$ctrl.hasError()" class="row">\n    <div class="col">\n        <large-error size="2">\n            <p class="text-center">{{$ctrl.getErrorText()}}</p>\n        </large-error>\n        <br>\n    </div>\n</div>\n\n<div class="form-group">\n    <button-list buttons="$ctrl.instructionButtons"></button-list>\n</div>'},function(e,t,n){e.exports=function(e){e.component("wiseQuestionsForm",{require:{parentForm:"^^form",$wiseQuestions:"^^?wiseQuestions"},bindings:{questionData:"=ngModel",quote:"<",rules:"<"},template:n(1122),controller:["WiseTransferService",function(e){var t=this,n=function(e){return angular.isDefined(t.$wiseQuestions)&&null!==t.$wiseQuestions&&(t.$wiseQuestions.questionsLoading=e),e};t.$onInit=function(){t.questionData=t.questionData||{},t.answerMap={},t.getInputMask=function(e){var t="'alias': 'latin'",n=e.answerRules.minLength,a=e.answerRules.maxLength;return(n>0||a>0)&&(t+=", 'mask': 'o{",t+=n>0?n:"1",t+=",",t+=a>0?a:"+",t+="}'"),t},t.onChange=function(a){var r=t.answerMap[a.key],i=angular.isDefined(r);if(i){if("TEXT"===a.answerRules.type)t.questionData[a.key]=r;else if("SELECT"===a.answerRules.type){if(t.questionData[a.key]===r.key)return;t.questionData[a.key]=r.key}}else delete t.questionData[a.key];a.refreshOnChange&&i&&(t.loading=n(!0),e.fetchQuestionRules(t.quote.id,t.questionData).then(function(e){t.rules=e.data.rules;var n={},a={};t.rules.groupRules.forEach(function(e){e.questionRules.forEach(function(e){n[e.key]=t.questionData[e.key],a[e.key]=t.answerMap[e.key]})}),t.questionData=n,t.answerMap=a}).finally(function(){return t.loading=n(!1)}))}}}]})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.loading"></loading-overlay>\n\n<div ng-if="groupRules.questionRules.length > 0" ng-repeat="groupRules in $ctrl.rules.groupRules">\n    <h6 class="subtitle">{{groupRules.displayText}}</h6>\n\n    <div ng-repeat="questionRules in groupRules.questionRules">\n        <ng-switch on="questionRules.answerRules.type">\n            <am-form-input name="{{questionRules.key}}" ng-switch-when="TEXT" type="text" ng-model="$ctrl.answerMap[questionRules.key]" label-text="{{questionRules.displayText}}" change-listener="$ctrl.onChange(questionRules)" input-mask="$ctrl.getInputMask(questionRules)" is-required="questionRules.required"></am-form-input>\n            <am-form-select name="{{questionRules.key}}" ng-switch-when="SELECT" ng-model="$ctrl.answerMap[questionRules.key]" label-text="{{questionRules.displayText}}" options="questionRules.answerRules.allowedChoices" option-key="\'displayText\'" model-listener="$ctrl.onChange(questionRules)" is-required="questionRules.required"></am-form-select>\n        </ng-switch>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("wiseQuoteForm",{require:{parentForm:"^^form",$wiseTransfer:"^^?wiseTransfer"},bindings:{quote:"=",transferParameters:"<",temporary:"<?"},template:n(1124),controller:["$translate","$timeout","orderByFilter","WiseTransferService",function(e,t,n,a){var r=this,i=function(){return angular.isDefined(r.quote)&&angular.isDefined(r.quote.id)},o=function(){return!!r.hasError()||(!(!r.loadingRules&&!r.loadingQuote)||(!(!angular.isUndefined(r.quoteForm)&&r.quoteForm.$valid)||(!i()||r.quote.pendingUpdate||r.quote.disabled)))},s=function(){r.activeQuoteRequest=null,r.loadingQuote=!1},l=function(e){angular.isDefined(r.quote)&&(e&&(r.quote.pendingUpdate=!0),delete r.quote.id)},c=function(){null!==r.activeQuoteRequest&&r.activeQuoteRequest.cancel(),angular.isDefined(r.quoteTimeout)&&t.cancel(r.quoteTimeout)},u=function(e,n){l(i()),c();var a="amount"===e?900:0;r.quoteTimeout=t(function(){return g(n)},a)},d=function e(){var t=angular.isDefined(r.$wiseTransfer)&&null!=r.$wiseTransfer?r.$wiseTransfer.wiseStepButtons:{},n=t.backBtn,a=t.continueBtn;if(angular.isDefined(a)){a.isDisabled=o;var i=a.fn;a.fn=function(){r.transferParameters.moneyAmount=r.quote.amountDetails.sourceAmount,i()}}r.quoteButtons=[],r.isBalanceSelectionMissing()?angular.isDefined(n)&&r.quoteButtons.push(n):(r.isBalanceSelectionRequired()?r.quoteButtons.push({alignment:"left",label:"word.back",fn:function(){c(),l(),r.quote.amountDetails.sourceAmount={},r.quote.amountDetails.destinationAmount={},s(),e()},btnSize:"large"}):angular.isDefined(n)&&r.quoteButtons.push(n),angular.isDefined(a)&&r.quoteButtons.push(a))},p=function(e){return angular.isDefined(e)&&null!==e&&""!==e},g=function(t){if(p(r.amountDetails.sourceAmount.currencyType)&&p(r.amountDetails.destinationAmount.currencyType))if(n=t?r.amountDetails.sourceAmount.amount:r.amountDetails.destinationAmount.amount,angular.isDefined(n)&&null!==n&&n>0){var n,i=angular.copy(r.amountDetails);t?delete i.destinationAmount.amount:delete i.sourceAmount.amount,r.loadingQuote=!0;var o=r.amountDetails,c=r.activeQuoteRequest=a.generateQuote(r.transferParameters,i,r.temporary);c.promise.then(function(n){if(angular.isUndefined(n.data.quote)||angular.isUndefined(n.data.quote.id)||0===n.data.quote.id.length)r.error="internal";else if(r.quote=n.data.quote,r.amountDetails=r.quote.amountDetails,t?r.amountDetails.sourceAmount.amount=o.sourceAmount.amount:r.amountDetails.destinationAmount.amount=o.destinationAmount.amount,!r.quote.disabled){var a=r.amountDetails.destinationAmount.currencyType,i=r.wiseRules.destinationAmountRules.minimumAmounts[a];angular.isDefined(i)&&i>0&&r.amountDetails.destinationAmount.amount<i&&(r.quote.disabled=!0,r.quote.disabledReason=e.instant("transfer.error.wise.minimumReceive",{amount:i+" "+a}))}}).catch(function(e){c.aborted||(r.error="internal",l())}).finally(function(){c.aborted||s()})}else(null===r.activeQuoteRequest||r.activeQuoteRequest.aborted)&&s()};r.$onInit=function(){s(),r.amountDetails=r.quote.amountDetails,r.quoteTimeout=void 0,r.error="",r.selectBalanceCurrency=function(e){r.selectSourceCurrency(e),d()},r.selectSourceCurrency=function(e){r.dynamicSourceAmountRules.allowedCurrencyTypes=[e],r.amountDetails.sourceAmount.currencyType=e,r.wiseRules.destinationAmountRules.allowedCurrencyTypes.includes(e)?(r.dynamicDestinationAmountRules.allowedCurrencyTypes=[e],r.amountDetails.destinationAmount.currencyType=e):(r.dynamicDestinationAmountRules.allowedCurrencyTypes=r.wiseRules.destinationAmountRules.allowedCurrencyTypes,r.dynamicDestinationAmountRules.allowedCurrencyTypes.includes("USD")?r.amountDetails.destinationAmount.currencyType="USD":r.amountDetails.destinationAmount.currencyType=r.dynamicDestinationAmountRules.allowedCurrencyTypes[0])},r.onSourceAmountChange=function(e){return u(e,!0)},r.onDestinationAmountChange=function(e){return u(e,!1)},r.isBalanceSelectionRequired=function(){return"WISE_BALANCE"===r.transferParameters.method&&r.wiseRules.sourceAmountRules.allowedCurrencyTypes.length>1},r.isBalanceSelectionMissing=function(){return r.isBalanceSelectionRequired()&&!r.isSourceCurrencyKnown()},r.isSourceCurrencyKnown=function(){return p(r.amountDetails.sourceAmount.currencyType)},r.hasError=function(){return r.error&&r.error.length>0},r.getErrorText=function(){return a.getErrorText(r.error)},r.toggleFxExpireHours=function(){return r.showFxExpiration=!r.showFxExpiration},r.showFxRate=function(){return r.amountDetails.sourceAmount.currencyType!==r.amountDetails.destinationAmount.currencyType},r.getFormattedDeliveryEstimate=function(){return a.getFormattedDeliveryEstimate(r.quote.deliveryEstimate)},r.loadingRules=!0,a.fetchRules(r.amountDetails.profileId,r.transferParameters).then(function(e){if(r.wiseRules=e.data.rules,r.unavailable=r.wiseRules.unavailable&&!r.temporary,r.wiseRules.sourceAmountRules.allowedCurrencyTypes=n(r.wiseRules.sourceAmountRules.allowedCurrencyTypes||[]),r.wiseRules.destinationAmountRules.allowedCurrencyTypes=n(r.wiseRules.destinationAmountRules.allowedCurrencyTypes||[]),r.dynamicSourceAmountRules=angular.copy(r.wiseRules.sourceAmountRules),r.dynamicDestinationAmountRules=angular.copy(r.wiseRules.destinationAmountRules),r.temporary||"temp"!==r.quote.id){var t=r.wiseRules.sourceAmountRules;if(0===t.allowedCurrencyTypes.filter(function(e){return t.maximumAmounts[e]>0}).length){var a="DEPOSIT"===r.transferParameters.type&&"WISE_BALANCE"===r.transferParameters.method;r.error=a?"noBalances":"noAmountAllowed"}else 1===t.allowedCurrencyTypes.length&&r.selectSourceCurrency(t.allowedCurrencyTypes[0])}else g(!0)}).catch(function(e){return r.error="internal"}).finally(function(){r.loadingRules=!1,d()})}}]})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.loadingRules"></loading-overlay>\n\n<div ng-if="$ctrl.unavailable">\n    <large-warning size="2">\n        <h4 class="text-center" translate="transfer.wise.warning.unavailable"></h4>\n        <br>\n    </large-warning>\n</div>\n\n<div ng-if="!$ctrl.unavailable">\n    <div class="form-group">\n        <div class="row">\n            <div class="col-xs-4 col-sm-2">\n                <wise-logo></wise-logo>\n            </div>\n            \n            <div ng-if="$ctrl.transferParameters.method === \'WISE_BALANCE\' && $ctrl.amountDetails.sourceAmount.currencyType" class="col-xs-5 col-sm-4 offset-3 offset-sm-6">\n                <p class="text-right text-secondary">\n                    {{\'transfer.label.wise.balanceAmount\' | translate}}\n                    <br>\n                    <strong>{{$ctrl.wiseRules.sourceAmountRules.maximumAmounts[$ctrl.amountDetails.sourceAmount.currencyType] | currency:$ctrl.amountDetails.sourceAmount.currencyType + \' \'}}</strong>\n                </p>\n            </div>\n        </div>\n    </div>\n    \n    <div ng-if="!$ctrl.hasError() && !$ctrl.loadingRules" class="form-group" ng-form="$ctrl.quoteForm">\n        <am-notes ng-if="$ctrl.$wiseTransfer.warnings" severity="MEDIUM" notes="$ctrl.$wiseTransfer.warnings"></am-notes>\n        <div class="row" ng-if="$ctrl.isBalanceSelectionMissing()">\n            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n                <h4>{{\'transfer.wise.heading.chooseCurrency\' | translate}}</h4>\n                <div class="form-group" ng-repeat="currencyType in $ctrl.wiseRules.sourceAmountRules.allowedCurrencyTypes">\n                    <div class="row">\n                        <div class="col-xs-12 col-sm-12 col-md-6 offset-md-3">\n                            <a class="btn btn-default w-100" ng-click="$ctrl.selectBalanceCurrency(currencyType)">\n                                <currency-image currency-type="currencyType" source="\'WISE\'"></currency-image>\n                                &nbsp;{{$ctrl.wiseRules.sourceAmountRules.maximumAmounts[currencyType] | currency:currencyType + \' \'}}\n                            </a>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        \n        <div class="row" ng-if="$ctrl.isSourceCurrencyKnown()">\n            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n                \n                <div class="alert alert-warning" ng-if="$ctrl.amountDetails.sourceAmount.currencyType == \'MYR\'">\n                    <p>{{ \'transfer.wise.warning.myrDailyLimit\' | translate }}</p>\n                </div>\n                \n                <generic-form-data label-text="{{\'transfer.label.wise.source.\' + $ctrl.transferParameters.type + \'.\' + $ctrl.transferParameters.method | translate}}" two-lines>\n                    <money-amount field-prefix="sourceAmount" ng-model="$ctrl.amountDetails.sourceAmount" rules="$ctrl.dynamicSourceAmountRules" is-required="true" change-listener="$ctrl.onSourceAmountChange($field)" currency-source="\'WISE\'"></money-amount>\n                </generic-form-data>\n            \n                <div ng-if="$ctrl.loadingQuote">\n                    <br>\n                    <p><i class="fa fa-2x fa-spin fa-spinner"></i></p>\n                    <br>\n                </div>\n            \n                <div ng-if="!$ctrl.loadingQuote && ($ctrl.quote.id || $ctrl.quote.pendingUpdate)">\n                    <div class="transaction-process-wise">\n                        <div class="bullet-list">\n                            <div class="row">\n                                <div class="bullet">\n                                    <div class="bullet-icon"><i class="fas fa-minus-circle" aria-hidden="true"></i></div>\n                                </div>\n                                <div class="details">\n                                    <p translate="transfer.label.wise.quote.fee" translate-values="{ fee : ($ctrl.quote.totalFee | amMoneyAmount) }"></p>\n                                </div>\n                            </div>\n                            <div ng-if="$ctrl.showFxRate()" class="row">\n                                <div class="bullet">\n                                    <div class="bullet-icon"><i class="fas fa-times-circle" aria-hidden="true"></i></div>\n                                </div>\n                                <div class="details">\n                                    <p>\n                                        <span translate="transfer.label.wise.quote.rate" translate-values="{ rate : $ctrl.quote.fxRate }"></span>\n                                        &nbsp;\n                                        <span ng-if="$ctrl.quote.fxExpireHours > 0">(<a href="javascript:void(0)" ng-click="$ctrl.toggleFxExpireHours()" translate="word.numberHours" translate-values="{ hours : $ctrl.quote.fxExpireHours }"></a>)</span>\n                                    </p>\n                                </div>\n                            </div>\n                            <div ng-if="$ctrl.showFxExpiration" class="row">\n                                <div class="bullet"></div>\n                                <div class="details">\n                                    <div class="alert alert-info">\n                                        <p translate="transfer.label.wise.quote.fxExpiration" translate-values="{ amount : ($ctrl.quote.amountDetails.sourceAmount | amMoneyAmount), hours : $ctrl.quote.fxExpireHours }"></p>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            \n                <generic-form-data label-text="{{\'transfer.label.wise.destination.\' + $ctrl.transferParameters.type + \'.\' + $ctrl.transferParameters.method | translate}}" two-lines>\n                    <money-amount field-prefix="destinationAmount" ng-model="$ctrl.amountDetails.destinationAmount" rules="$ctrl.dynamicDestinationAmountRules" is-required="true" change-listener="$ctrl.onDestinationAmountChange($field)" currency-source="\'WISE\'"></money-amount>\n                    <br>\n                    <am-form-label ng-if="$ctrl.quote.deliveryEstimate.length > 0" label-text="{{\'transfer.label.wise.deliveryEstimate\' | translate}}" value-text="{{$ctrl.getFormattedDeliveryEstimate()}}"></am-form-label>\n                </generic-form-data>\n                \n                <div ng-if="$ctrl.quote.disabled" class="alert alert-danger">\n                    <p>{{$ctrl.quote.disabledReason}}</p>\n                </div>\n            </div>\n        </div>\n    </div>\n    \n    <div ng-if="$ctrl.hasError()" class="form-group">\n        <br>\n        <div class="row">\n            <div class="col">\n                <div class="alert alert-danger">\n                    <p>{{$ctrl.getErrorText()}}</p>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n<div class="form-group">\n    <button-list buttons="$ctrl.quoteButtons"></button-list>\n</div>'},function(e,t,n){e.exports=function(e){n(1126)(e),n(1128)(e)}},function(e,t,n){e.exports=function(e){e.component("wiseQuoteReview",{bindings:{quote:"<"},template:n(1127),controller:["WiseTransferService",function(e){var t=this;t.$onInit=function(){t.showFxRate=function(){return t.quote.amountDetails.sourceAmount.currencyType!==t.quote.amountDetails.destinationAmount.currencyType},t.getFormattedDeliveryEstimate=function(){return e.getFormattedDeliveryEstimate(t.quote.deliveryEstimate)}}}]})}},function(e,t){e.exports='<am-form-label label-text="{{\'transfer.label.wise.sourceAmount\' | translate}}" value-text="{{$ctrl.quote.amountDetails.sourceAmount | amMoneyAmount}}"></am-form-label>\n<am-form-label label-text="{{\'transfer.label.wise.fee\' | translate}}" value-text="{{$ctrl.quote.totalFee | amMoneyAmount}}"></am-form-label>\n<am-form-label ng-if="$ctrl.showFxRate()" label-text="{{\'transfer.label.wise.rate\' | translate}}" value-text="{{$ctrl.quote.fxRate}}"></am-form-label>\n<am-form-label label-text="{{\'transfer.label.wise.destinationAmount\' | translate}}" value-text="{{$ctrl.quote.amountDetails.destinationAmount | amMoneyAmount}}"></am-form-label>\n<am-form-label ng-if="$ctrl.quote.deliveryEstimate.length > 0" label-text="{{\'transfer.label.wise.deliveryEstimate\' | translate}}" value-text="{{$ctrl.getFormattedDeliveryEstimate()}}"></am-form-label>\n'},function(e,t,n){e.exports=function(e){e.component("wiseTransferReview",{bindings:{wiseParameters:"<"},template:n(1129)})}},function(e,t){e.exports='<am-form-label ng-if="$ctrl.wiseParameters.transferId > 0" label-text="{{\'transfer.label.wise.wiseTransferId\' | translate}}" value-text="{{$ctrl.wiseParameters.transferId}}"></am-form-label>\n<wise-quote-review quote="$ctrl.wiseParameters.quote"></wise-quote-review>'},function(e,t){e.exports=function(e){e.component("wiseLogo",{bindings:{context:"@?"},template:["$attrs",function(e){return"METHOD"===e.context?'<img ng-src="{{$ctrl.getWiseLogoPath()}}" class="img-fluid mw-100" width="50" />':'<img ng-src="{{$ctrl.getWiseLogoPath()}}" class="img-fluid" />'}],controller:["COLOR_THEME",function(e){var t=this;t.$onInit=function(){t.getWiseLogoPath=function(){return"DARK"===e.get()?"/images/am/wise_logo_dark_mode.svg":"/images/am/wise_logo_light_mode.svg"}}}]})}},function(e,t){e.exports=function(e){e.component("appBankVerification",{bindings:{accountId:"@",requestId:"@"},template:function(){var e="";return e+='<loading-overlay loading-template="candyStripe" ng-if="$ctrl.isPageLoading()"></loading-overlay>',e+='<ng-include src="$ctrl.getPageSource()" onload="$ctrl.finishPageContent()"></ng-include>',e},controller:["FundingNavigationService","PageService",function(e,t){var n=this;n.$onInit=function(){n.isPageLoading=t.isPageLoading,n.getPageSource=t.getPagePath,n.finishPageContent=t.onPartialLoad,e.goToCashRequestConfirmation(n.accountId,n.requestId)}}]})}},function(e,t){e.exports=function(e){e.component("appFundTransfer",{template:function(){var e="";return e+='<loading-overlay loading-template="candyStripe" ng-if="$ctrl.isPageLoading()"></loading-overlay>',e+='<ng-include src="$ctrl.getPageSource()" onload="$ctrl.finishPageContent()"></ng-include>',e},controller:["FundingNavigationService","PageService",function(e,t){var n=this;n.$onInit=function(){n.isPageLoading=t.isPageLoading,n.getPageSource=t.getPagePath,n.finishPageContent=t.onPartialLoad,e.goToHomePage()}}]})}},function(e,t){e.exports=function(e){e.component("appIsaAccountTransfer",{template:function(){var e="";return e+='<loading-overlay loading-template="candyStripe" ng-if="$ctrl.isPageLoading()"></loading-overlay>',e+='<ng-include src="$ctrl.getPageSource()" onload="$ctrl.finishPageContent()"></ng-include>',e},controller:["NavigationService","PageService",function(t,n){var a=this;a.$onInit=function(){var r;a.isPageLoading=n.isPageLoading,a.getPageSource=n.getPagePath,a.finishPageContent=n.onPartialLoad,r={id:"IsaAccountTransfer",path:e.FUNDING_APP_ROOT+"/sequences/accounttransfer/isaAccountTransferSequence.html"},t.navigate(r)}}]})}},function(e,t){e.exports=function(e){e.component("appPendingDepositTask",{bindings:{accountId:"@",taskNumber:"@"},template:function(){var e="";return e+='<loading-overlay loading-template="candyStripe" ng-if="$ctrl.isPageLoading()"></loading-overlay>',e+='<ng-include src="$ctrl.getPageSource()" onload="$ctrl.finishPageContent()"></ng-include>',e},controller:["FundingNavigationService","PageService",function(e,t){var n=this;n.$onInit=function(){n.isPageLoading=t.isPageLoading,n.getPageSource=t.getPagePath,n.finishPageContent=t.onPartialLoad,e.goToPendingDepositTask(n.accountId,n.taskNumber,!0)}}]})}},function(e,t){e.exports=function(e){e.component("appTransactionHistory",{template:function(){var e="";return e+='<loading-overlay loading-template="candyStripe" ng-if="$ctrl.isPageLoading()"></loading-overlay>',e+='<ng-include src="$ctrl.getPageSource()" onload="$ctrl.finishPageContent()"></ng-include>',e},controller:["NavigationService","PageService",function(t,n){var a=this;a.$onInit=function(){var r;a.isPageLoading=n.isPageLoading,a.getPageSource=n.getPagePath,a.finishPageContent=n.onPartialLoad,r={id:"TransactionHistory",path:e.FUNDING_APP_ROOT+"/pages/transaction/transactionHistory.html"},t.navigate(r)}}]})}},function(e,t){e.exports=function(e){e.component("standaloneCryptoTransfer",{template:function(){var e="";return e+='<loading-overlay loading-template="candyStripe" ng-if="$ctrl.isPageLoading()"></loading-overlay>',e+='<ng-include src="$ctrl.getPageSource()" onload="$ctrl.finishPageContent()"></ng-include>',e},controller:["FundingNavigationService","PageService",function(e,t){var n=this;n.$onInit=function(){n.isPageLoading=t.isPageLoading,n.getPageSource=t.getPagePath,n.finishPageContent=t.onPartialLoad,e.goToCryptoCashTransfer()}}]})}},function(e,t,n){e.exports=function(e){n(1138)(e),n(1139)(e)}},function(e,t){e.exports=function(e){Inputmask.extendAliases({assetId_SYMBOL:{mask:"a{1,+}",placeholder:"",definitions:{a:{validator:"[0-9a-zA-Z. ]",casing:"upper"}}},assetId_ISIN:{mask:"a{12}",placeholder:"",definitions:{a:{validator:"[0-9a-zA-Z]",casing:"upper"}}},assetId_CUSIP:{mask:"a{9}",placeholder:"",definitions:{a:{validator:"[0-9a-zA-Z]",casing:"upper"}}},assetId_CINS:{mask:"a{9}",placeholder:"",definitions:{a:{validator:"[0-9a-zA-Z]",casing:"upper"}}},assetId_COMPANY_NAME:{mask:"a{20}",placeholder:"",definitions:{a:{validator:"[0-9a-zA-Z ]"}}},assetExchange:{mask:"a{1,+}",placeholder:"",definitions:{a:{validator:"[A-Z ]",casing:"upper"}}}})}},function(e,t){e.exports=function(e){Inputmask.extendAliases({bankAccountNumber_UNITED_KINGDOM:{mask:"*{11}",placeholder:"",definitions:{"*":{validator:"[0-9-]"}}},bankAccountNumber_HONG_KONG:{mask:"*{10}",placeholder:"",definitions:{"*":{validator:"[0-9]"}}},bankAccountNumber_HONG_KONG_DOMESTIC:{mask:"*{3} - *{29}",autoUnmask:!0,placeholder:"",definitions:{"*":{validator:"[0-9]"}}},bankAccountNumber_SINGAPORE:{mask:"*{19}",placeholder:"",definitions:{"*":{validator:"[0-9]"}}},bankAccountNumber_NEW_ZEALAND:{mask:"*{7} - *{3}",autoUnmask:!0,placeholder:"",definitions:{"*":{validator:"[0-9]"}}},bankAccountNumber:{mask:"o{*}*{+}o{*}",repeat:"+",placeholder:"",definitions:{o:{validator:"[-.\\/#: ]"},"*":{validator:"[0-9A-Za-z]"}}},bankAccountNumber_NONE:{alias:"bankAccountNumber"},bankAccountNumber_CLABE:{alias:"bankAccountNumber"},bankAccountNumber_IBAN:{mask:"*{2}*{2} (*{4} ){1,+}",placeholder:"",autoUnmask:!0,showMaskOnHover:!1,showMaskOnFocus:!1,definitions:{"*":{validator:"[a-zA-Z0-9]",casing:"upper"}}},bankAccountNumber_ZENGIN:{mask:"*{7}",placeholder:"",definitions:{"*":{validator:"[0-9]"}}},bankAccountNumber_CENTRAL_BANK_RUSSIA:{mask:"9{20}",placeholder:""},thirdPartyRelationship:{mask:"*{1,35}",placeholder:"",autoUnmask:!0,definitions:{"*":{validator:"[a-zA-Z0-9/\\-?:\\\\().,'+ ]"}}},routing_ABA:{mask:"9{9}",placeholder:""},routing_BIC:{mask:"a{4}a{2}*{2}[*{3}]",placeholder:"",autoUnmask:!0,definitions:{a:{validator:"[a-zA-Z]",casing:"upper"},"*":{validator:"[a-zA-Z0-9]",casing:"upper"}}},routing_BIC8:{alias:"routing_BIC",mask:"a{4}a{2}*{2}"},routing_TRANSIT_CODE:{mask:"9{5}-9{3}",autoUnmask:!0,placeholder:"xxxxx-yyy"},routing_HONG_KONG:{mask:"9{3} / 9{3}",autoUnmask:!0,placeholder:" "},routing_JAPAN:{mask:"9{4} / 9{3}",autoUnmask:!0,placeholder:" "},routing_MICR:{mask:"9{*}",placeholder:""},routing_IFSC:{mask:"a{4}z9{6}",placeholder:"",definitions:{a:{validator:"[a-zA-Z]",casing:"upper"},z:{validator:"0"}}},routing_BSB:{mask:"9{3}-9{3}",autoUnmask:!0,placeholder:" "},routing_BIK:{mask:"9{9}",placeholder:""},routing_NEW_ZEALAND:{mask:"9{2} / 9{4}",autoUnmask:!0,placeholder:""},routing_BLZ:{mask:"9{3} 9{3} 9{2}",autoUnmask:!0,placeholder:""},routing_SORT:{mask:"9{6}",autoUnmask:!0,placeholder:""},routing_SINGAPORE:{mask:"9{4} / 9{3}",autoUnmask:!0,placeholder:""},zengin_bank:{mask:"k{*}",definitions:{k:{validator:"[･-ￜ-a-zA-Z]"}}},transferQuantity:{alias:"quantityPositive",allowPlus:!1,max:99999999999},transferAmount:{alias:"amountPositive",allowPlus:!1,max:99999999999},linkHkBranchCode:{mask:"*{3}",placeholder:"",definitions:{"*":{validator:"[0-9]"}}},linkHkAccountNumber:{mask:"*{12}",placeholder:"",definitions:{"*":{validator:"[0-9]"}}},instructionNickname:{mask:"*{5,55}",placeholder:"",definitions:{"*":{validator:"[a-zA-Z0-9/\\-?:\\\\().,'+!_ ]"}}},achAmount:{mask:"0.9{2}",placeholder:""},positionAmountPositive:{alias:"amountPositive",digits:4},positionAmountNegative:{alias:"amountNegative",digits:4}})}},function(e,t,n){e.exports=function(e){n(1141)(e)}},function(e,t){e.exports=function(e){e.filter("amRoutingNumber",["FundingService",function(e){return function(t){return e.getFormattedRoutingNumber(t)}}]),e.filter("amRoutingNumbers",["orderByFilter","filterFilter",function(e,t){return function(n){return e(t(n,function(e){return"UNKNOWN"!==e.routingNumberType}),function(e){return"BIC"===e.routingNumberType?1:0})}}]),e.filter("amBankAccountNumber",function(){return function(e){if("IBAN"!==e.accountNumberType)return e.accountNumber;for(var t="",n=0;n<e.accountNumber.length;++n)n%4==0&&(t+=" "),t+=e.accountNumber.charAt(n);return t}})}},function(e,t,n){e.exports=function(e){n(1143)(e),n(1146)(e),n(1147)(e),n(1150)(e),n(1151)(e),n(1152)(e),n(1155)(e),n(1158)(e),n(1173)(e),n(1176)(e),n(1177)(e),n(1186)(e),n(1189)(e),n(1192)(e),n(1195)(e),n(1200)(e),n(1211)(e),n(1216)(e),n(1221)(e),n(1224)(e),n(1229)(e)}},function(e,t,n){e.exports=function(e){n(1144)(e)}},function(e,t,n){e.exports=function(e){e.component("isaTransferFormModal",{template:n(1145),controller:["ModalService","PageService",function(e,t){var n=this;n.$onInit=function(){n.transferParameters=e.getModalData().transferParameters,n.transferDate=e.getModalData().transferDate,n.accountId=e.getModalData().accountId,n.entity=e.getModalData().entity,n.iraType=e.getModalData().iraType,n.custodianEntity=e.getModalData().custodianEntity,e.setModalButtons([{label:"word.print",fn:t.print,alignment:"right"}])}}]})}},function(e,t){e.exports="<p>{{$ctrl.transferDate | date:'yyyy-MM-dd'}}</p>\n<br>\n\n<am-form-label label-text=\"{{'word.accountId' | translate: {}: undefined: 'en' }}\" value-text=\"{{$ctrl.accountId}}\"></am-form-label>\n<am-form-label label-text=\"{{'word.accountType' | translate: {}: undefined: 'en' }}\" value-text=\"{{'isaAccountTransfer.label.'+ $ctrl.iraType  | translate}}\"></am-form-label>\n\n\x3c!-- Personal Information --\x3e\n<h6>{{'individual.label.personalInformation' | translate: {}: undefined: 'en' }}</h6>\n<am-form-label label-text=\"{{'entity.label.name.' + $ctrl.entity.entityType | translate: {}: undefined: 'en'}}\" value-text=\"{{$ctrl.entity | amEntityName: 'en'}}\"></am-form-label>\n<div data-private class=\"form-group\" ng-if=\"$ctrl.entity.address.country\">\n    <div class=\"row\">\n        <div class=\"col-xs-12 col-sm-12 col-md-6 col-lg-4\">\n            <label class=\"control-label\">{{'entity.label.address.' + $ctrl.entity.entityType | translate: {}: undefined: 'en'}}</label>\n        </div>\n        <div class=\"col-xs-12 col-sm-12 col-md-6 col-lg-4\">\n            <label ng-bind-html=\"$ctrl.entity.address | amAddress:'long' : 'en' | renderHTML\"></label>\n        </div>\n    </div>\n</div>\n<am-form-label data-private ng-if=\"$ctrl.entity.emailAddress\" label-text=\"{{'entity.label.emailAddress' | translate: {}: undefined: 'en' }}\" value-text=\"{{$ctrl.entity.emailAddress}}\"></am-form-label>\n<am-form-label data-private ng-repeat=\"phoneNumber in $ctrl.entity.phoneNumbers\" label-text=\"{{'entity.label.phoneNumber' | translate:{ phoneType: ('phoneNumber.type.' + phoneNumber.type | translate: {}: undefined: 'en' )}: undefined: 'en'  }}\" value-text=\"{{phoneNumber.phoneNumber}}\" value-class=\"direction-ltr\"></am-form-label>\n<am-form-label ng-if=\"::$ctrl.entity.dob\" label-text=\"{{'individual.label.dob' | translate: {}: undefined: 'en' }}\" value-text=\"{{$ctrl.entity.dob}}\"></am-form-label>\n<div data-private ng-repeat=\"taxId in $ctrl.entity.taxIds\">\n    <am-form-label label-text=\"{{'identification.type.TAX_ID' | translate: {}: undefined: 'en' }}\" value-text=\"{{taxId.idNumber + ' (' + ('country.' + taxId.idCountry.alpha3 | translate: {}: undefined: 'en' ) + ')' }}\"></am-form-label>\n</div>\n\n\x3c!-- for parent/legal guardian --\x3e    \n<div ng-if=\"::$ctrl.iraType === 'JISA'\">\n    <h6>{{ 'isaAccountTransfer.field.parentGuardianDetails' | translate: {}: undefined: 'en' }}</h6>\n    <am-form-label label-text=\"{{'entity.label.name.' + $ctrl.custodianEntity.entityType | translate: {}: undefined: 'en'}}\" value-text=\"{{$ctrl.custodianEntity | amEntityName: 'en'}}\"></am-form-label>\n    <div data-private class=\"form-group\" ng-if=\"::$ctrl.custodianEntity.address.country\">\n        <div class=\"row\">\n            <div class=\"col-xs-12 col-sm-12 col-md-6 col-lg-4\">\n                <label class=\"control-label\">{{'entity.label.address.' + $ctrl.custodianEntity.entityType | translate: {}: undefined: 'en'}}</label>\n            </div>\n            <div class=\"col-xs-12 col-sm-12 col-md-6 col-lg-4\">\n                <label ng-bind-html=\"$ctrl.custodianEntity.address | amAddress:'long' : 'en' | renderHTML\"></label>\n            </div>\n        </div>\n    </div>\n    <am-form-label ng-if=\"::$ctrl.custodianEntity.dob\" label-text=\"{{'individual.label.dob' | translate: {}: undefined: 'en' }}\" value-text=\"{{$ctrl.custodianEntity.dob}}\"></am-form-label>\n</div>\n\n\x3c!-- ISA Transfer Details --\x3e\n<h6>{{ 'isaAccountTransfer.field.accountTransferDetails' | translate: {}: undefined: 'en' }}</h6>\n<isa-account-transfer-review transfer-parameters=\"$ctrl.transferParameters\" force-language=\"en\"></isa-account-transfer-review>\n\n<div ng-if=\"::$ctrl.iraType === 'ISA'\">\n    <h6>{{ 'isaAccountTransfer.label.customerSignature' | translate: {}: undefined: 'en' }}</h6>\n    <br>\n    <br>\n    <br>\n    <br>\n    ___________________________________\n    <p><span>{{ 'word.date' | translate }}</span>, <span>{{ $ctrl.entity | amEntityName: 'en' }}</span></p>\n</div>\n\n<div ng-if=\"::$ctrl.iraType === 'JISA'\">\n    <h6>{{ 'isaAccountTransfer.label.parentGuardianSignature' | translate: {}: undefined: 'en' }}</h6>\n    <br>\n    <br>\n    <br>\n    <br>\n    ___________________________________\n    <p><span>{{ 'word.date' | translate }}</span>, <span>{{ $ctrl.custodianEntity | amEntityName: 'en' }}</span></p>\n</div>"},function(e,t,n){e.exports=function(e){n(11)(e,["acats-acct-no-acknowledge","full-equity-withdrawal-acknowledgment","funding-approval-explanation","hk-bank-confirmation","ineligible-assets","tpw-changes-confirmation","wise-transfer-confirm","promote-ibkey"],function(){return[n.e(3).then(n.t.bind(null,1979,7)),n.e(3).then(n.t.bind(null,1980,7)),n.e(3).then(n.t.bind(null,1981,7)),n.e(3).then(n.t.bind(null,1982,7)),n.e(3).then(n.t.bind(null,1983,7)),n.e(3).then(n.t.bind(null,1984,7)),n.e(3).then(n.t.bind(null,1985,7)),n.e(3).then(n.t.bind(null,1986,7))]})}},function(e,t,n){e.exports=function(e){n(1148)(e)}},function(e,t,n){e.exports=function(e){e.component("amexCardRedirectionModal",{template:n(1149),controller:["ModalService","NavigationAction","NavigationService",function(e,t,n){this.$onInit=function(){e.setModalButtons([{label:"word.continue",fn:function(){var a={navigateAction:t.POPUP,path:"https://www.americanexpress.com/en-idc/acq/landing/index.html?bank=1591"};n.navigate(a),e.closeModal()},alignment:"right",btnType:"primary"},{label:"word.stay",fn:e.closeModal,alignment:"left"}])}}]})}},function(e,t){e.exports='<p><strong translate="amex.redirection.modal.text.complete"></strong></p>\n<br>\n<p translate="amex.redirection.modal.text.proof"></p>'},function(e,t,n){e.exports=function(e){n(11)(e,["asset-search","asset-quantity"],function(){return[n.e(4).then(n.t.bind(null,1987,7)),n.e(4).then(n.t.bind(null,1988,7))]})}},function(e,t,n){e.exports=function(e){n(11)(e,["bank-link-choice","bank-search","iban-bic-confirmation","bank-selection"],function(){return[n.e(30).then(n.t.bind(null,1989,7)),n.e(30).then(n.t.bind(null,1990,7)),n.e(30).then(n.t.bind(null,1991,7)),n.e(30).then(n.t.bind(null,1992,7))]})}},function(e,t,n){e.exports=function(e){n(1153)(e)}},function(e,t,n){e.exports=function(e){e.component("billPayDisclaimerModal",{template:n(1154),controller:["$translate","AgreementService","ModalService",function(e,t,n){var a=this;a.$onInit=function(){n.setModalButtons([{label:"word.continue",alignment:"right",fn:n.closeModal}]),a.viewAgreement=function(){t.viewAgreement("BillPay").then(function(){var t={title:e.instant("user.menu.BillPay"),templateUrl:"bill-pay-disclaimer-modal.component"};n.openModal(t)})}}}]})}},function(e,t){e.exports="<loading-overlay ng-if=\"$ctrl.isInProgress\"></loading-overlay>\r\n<h4 translate=\"billPay.disclaimer.heading\"></h4>\r\n<p translate=\"billPay.disclaimer.text\" translate-values=\"{linkStart: '<a href=&quot;javascript:void(0);&quot; ng-click=&quot;$ctrl.viewAgreement()&quot;>', linkEnd: '</a>', lineBreak: '<br>', ulStartTag: '<ul>', liStartTag: '<li>', liEndTag: '</li>', ulEndTag: '</ul>'}\" translate-compile></p>\r\n"},function(e,t,n){e.exports=function(e){n(1156)(e)}},function(e,t,n){e.exports=function(e){e.component("acatsTransferRedirection",{template:n(1157)})}},function(e,t){e.exports='<p translate="acats.redirection.text.1"></p>\n<p translate="acats.redirection.text.2"></p>'},function(e,t,n){e.exports=function(e){n(1159)(e),n(1161)(e),n(1163)(e),n(1165)(e),n(1167)(e),n(1169)(e),n(1171)(e)}},function(e,t,n){e.exports=function(e){e.component("bankCountryConfirmation",{template:n(1160),controller:["ModalService",function(e){this.$onInit=function(){e.setModalButtons([{alignment:"left",label:"word.no",fn:function(){e.closeModal(!1)}},{alignment:"right",btnType:"primary",label:"word.yes",fn:function(){e.closeModal(!0)}}])}}]})}},function(e,t){e.exports='<p translate="deposit.confirmation.usBankAccountRequired"></p>'},function(e,t,n){e.exports=function(e){e.component("cashMethodInfo",{template:n(1162),controller:["CashMethodTextService","ModalService",function(e,t){var n=this;n.$onInit=function(){var a=t.getModalData().type,r=t.getModalData().method,i=t.getModalData().currency,o=t.getModalData().isLite,s=t.getModalData().showDebitCardHold,l=t.getModalData().ibEntity;n.getDescriptionText=function(){return e.getDescriptionText(a,r,i)},n.getTradingHoldText=function(){if("DEPOSIT"===a)return e.getTradingHoldText(r,i,o)},n.getWithdrawHoldText=function(){if("DEPOSIT"===a)return e.getWithdrawHoldText(r,i)},n.getDebitHoldText=function(){if("DEPOSIT"===a&&s)return e.getDebitHoldText(r,i)},n.getArrivalTimeText=function(){return e.getArrivalTimeText(r)},n.getLimitationText=function(){return e.getLimitationText(r)},n.getRestrictionText=function(){return e.getRestrictionText(r)},n.getHowText=function(){return e.getHowText(r)},n.getLimitsText=function(){return e.getLimitsText(r)},n.getTimingText=function(){return e.getTimingText(r)},n.getFeesText=function(){return e.getFeesText(a,r,i).text},n.getFaqText=function(){return e.getFaqText(i)},n.getFaqNumber=function(){var e=new Map([["CZK","4681"],["GBP","4713"],["CHF","4709"],["ILS","4720"],["SEK","4721"],["EUR","4712"],["PLN","4767"],["DKK","4769"],["NOK","4772"],["SGD","4775"],["HUF","4810"],["CNH","4820"],["HKD","4821"],["CAD","4818"],["TRY","4847"],["NZD","4844"],["AUD","4840"],["MXN","4839"],["AED","4880"],["ZAR","4881"],["USD","4878"]]);return"JP"===l&&e.set("JPY","4783"),e.get(i)}}}]})}},function(e,t){e.exports='<p ng-bind-html="$ctrl.getDescriptionText() | renderHTML"></p>\n<hr/>\n<am-form-label ng-if="$ctrl.getHowText()" label-text="{{\'cashTransfer.label.how\' | translate}}" value-text="{{$ctrl.getHowText()}}"></am-form-label>\n<am-form-label ng-if="$ctrl.getLimitsText()" label-text="{{\'cashTransfer.label.limits\' | translate}}" value-text="{{$ctrl.getLimitsText()}}"></am-form-label>\n<am-form-label ng-if="$ctrl.getTimingText()" label-text="{{\'cashTransfer.label.timing\' | translate}}" value-text="{{$ctrl.getTimingText()}}"></am-form-label>\n<am-form-label ng-if="$ctrl.getFeesText()" label-text="{{\'cashTransfer.label.fees\' | translate}}" value-text="$ctrl.getFeesText()" value-is-html="true"></am-form-label>\n<am-form-label ng-if="$ctrl.getTradingHoldText()" label-text="{{\'cashTransfer.label.tradingHold\' | translate}}" value-text="$ctrl.getTradingHoldText()" value-is-html="true"></am-form-label>\n<am-form-label ng-if="$ctrl.getWithdrawHoldText()" label-text="{{\'cashTransfer.label.withdrawHold\' | translate}}" value-text="$ctrl.getWithdrawHoldText()" value-is-html="true"></am-form-label>\n<am-form-label ng-if="$ctrl.getDebitHoldText()" label-text="{{\'cashTransfer.label.debitHold\' | translate}}" value-text="$ctrl.getDebitHoldText()" value-is-html="true"></am-form-label>\n<am-form-label ng-if="$ctrl.getArrivalTimeText()" label-text="{{\'cashTransfer.label.arrivalTime\' | translate}}" value-text="{{$ctrl.getArrivalTimeText()}}"></am-form-label>\n<am-form-label ng-if="$ctrl.getLimitationText()" label-text="{{\'cashTransfer.label.limitation\' | translate}}" value-text="{{$ctrl.getLimitationText()}}"></am-form-label>\n<am-form-label ng-if="$ctrl.getRestrictionText()" label-text="{{\'cashTransfer.label.restrictions\' | translate}}" value-text="{{$ctrl.getRestrictionText()}}"></am-form-label>\n\n</br ng-if="$ctrl.getFaqNumber()">\n<p ng-if="$ctrl.getFaqNumber()" class="text-left"><a href="https://ibkr.info/node/{{$ctrl.getFaqNumber()}}" target="_blank">{{$ctrl.getFaqText()}}</a></p>\n'},function(e,t,n){e.exports=function(e){e.component("cashInstructionInfo",{template:n(1164),controller:["ModalService",function(e){var t=this;t.$onInit=function(){if(t.instruction=e.getModalData().instruction,t.type=e.getModalData().type,t.allowAction="EDDA"===t.instruction.instructionType&&("REJECTED"===t.instruction.state||"FAILED"===t.instruction.state)&&"RESUBMIT"===t.instruction.rejectionAction,t.allowAction){var n=[];n.push({label:"word.close",alignment:"left",fn:e.closeModal}),n.push({label:"word.continue",alignment:"right",fn:function(){e.closeModal(!0)},btnType:"primary"}),e.setModalButtons(n)}}}]})}},function(e,t){e.exports='<instruction-review instruction="$ctrl.instruction" hide-status="$ctrl.instruction.instructionType === \'EDDA\' && $ctrl.type === \'WITHDRAWAL\'"></instruction-review>\n<p ng-if="$ctrl.allowAction" translate="eddaInstruction.rejected.actionText"></p>'},function(e,t,n){e.exports=function(e){e.component("withdrawableAmountExplanation",{template:n(1166),controller:["$filter","$translate","ResourceService","ModalService","numberFilter","currencyFilter","$cacheFactory","CurrencyConversionUrlService","FundingNavigationService",function(t,n,a,r,i,o,s,l,c){var u=this;u.$onInit=function(){u.isLoading=!0;var t=r.getModalData();u.details=t.details,u.savedAchInstructions={},u.fetchSavedAchInstructions(),a.create(e.SERVER_PATH+"/TransferFunds/Telemetry",{action:"Withdrawable explanation opened",details:u.details.toString()})},u.$onDestroy=function(){a.create(e.SERVER_PATH+"/TransferFunds/Telemetry",{action:"Withdrawable explanation closed"})},u.fetchSavedAchInstructions=function(){var t=s.get("currenciesAndInstructions");t||(t=s("currenciesAndInstructions")),a.fetch(e.SERVER_PATH+"/TransferFunds/CurrenciesAndInstructions",{type:"WITHDRAWAL"},!1,{cache:t}).then(function(e){if(e.data&&e.data.instructions)for(var t=0;t<e.data.instructions.length;t++){var n=e.data.instructions[t];if("ACH"===n.instructionType){for(var a=n.beneficiaryBankAccount,r=a.bankAccountNumber.accountNumber,i="",o=a.bank.routingNumbers,s=0;s<o.length;s++)"ABA"===o[s].routingNumberType&&(i=o[s].routingNumber);u.savedAchInstructions[r]={abaRoutingNum:i,instructionName:n.instructionName}}}}).finally(function(){u.isLoading=!1})},u.getCashDiffVariables=function(e){var t=e.currency;return{currency:t,totalCash:'<span class="text-dark">'+(e.autoFx.allowed?o(e.totalCashAcrossCurrencies,t+" "):i(e.cashBalances[t]))+"</span>",withdrawableCash:'<span class="text-success">'+i(e.amount)+"</span>"}},u.getDepositAvailableDate=function(e){if(!e.sameBankHoldDate)return u.getAvailableDate(e.holdDate);var n=u.getInstructionName(e);return{sameBankDate:t("date")(e.sameBankHoldDate),sameBankName:n,date:t("date")(e.holdDate),br:"<br>"}},u.getInstructionName=function(e){var t=e.abaRoutingNum+" "+e.bankAccountNum;return u.savedAchInstructions[e.bankAccountNum]&&u.savedAchInstructions[e.bankAccountNum].abaRoutingNum===e.abaRoutingNum&&(t=u.savedAchInstructions[e.bankAccountNum].instructionName),t},u.getAvailableDate=function(e){return{date:t("date")(e)}},u.getFaqLinkTag=function(){return{linkStart:'<a target="_blank" href="https://www.ibkr.com/faq?id=34486484">',linkEnd:"</a>"}},u.getConvertCurrencyText=function(e){return n.instant("balance.account.explanation.action.convertCurrency",{currency:e})},u.goToConvertCurrency=function(){l.gotoPlatformBasedCurrencyConversion()},u.filterDisplayableFreezes=function(e){for(var t=[],a=0;a<e.length;a++){var r="balance.account.explanation.freeze."+e[a].reasonCode;n.instant(r)!==r&&t.push(e[a])}return t},u.getFrozenAmount=function(e){return Math.max(e.cashAmount,e.equity)},u.getFreezeAction=function(e){return e.expirationDate?n.instant("balance.account.explanation.action.availableDate",{date:t("date")(e.expirationDate)}):"-"},u.getSize=function(e){return Object.keys(e).length},u.goToInternalFundsTransfer=function(e){var t={autoSelect:e};c.goToCashTransfer({type:"INTERNAL",method:"FUNDS_TRANSFER"},t)}}]})}},function(e,t){e.exports='<div ng-if="$ctrl.isLoading" class="text-center"><i class="fa fa-spinner fa-spin"></i></div>\n<div ng-if="!$ctrl.isLoading">\n    <p translate="{{ $ctrl.details.autoFx.allowed ? \'balance.account.explanation.autoFx.cashDifference\' : \'balance.account.explanation.cashDifference\' }}" translate-values="{{ $ctrl.getCashDiffVariables($ctrl.details) }}"></p>\n    <p ng-if="$ctrl.details.fdic" translate="balance.account.explanation.fdicParticipant"></p>\n    <br>\n\n    \x3c!-- Desktop table --\x3e\n    <div class="table-responsive hidden-xs hidden-sm">\n        <table class="table table-bordered">\n            <tr>\n                <th scope="col"><p translate="balance.account.explanation.description" class="text-dark"></p></th>\n                <th scope="col"><p translate="balance.account.explanation.amount" class="text-right text-dark"></p></th>\n                <th scope="col"><p translate="balance.account.explanation.action.heading" class="text-dark"></p></th>\n            </tr>\n\n            <tr ng-repeat="heldDeposit in $ctrl.details.heldDeposits">\n                <td ng-if="$first" rowspan="{{$ctrl.details.heldDeposits.length}}"><p translate="balance.account.explanation.heldDeposits"></p></td>\n                <td class="text-nowrap text-right"><p>{{heldDeposit.amount | currency:heldDeposit.currency + \' \'}}</p></td>\n                <td><p translate="balance.account.explanation.action.{{heldDeposit.sameBankHoldDate ? \'sameBankAvailableDate\' : \'availableDate\'}}" translate-values="{{ $ctrl.getDepositAvailableDate(heldDeposit) }}"></p></td>\n            </tr>\n\n            <tr ng-repeat="frozenAmount in $ctrl.filterDisplayableFreezes($ctrl.details.frozenAmounts)">\n                <td><p translate="balance.account.explanation.freeze.{{frozenAmount.reasonCode}}"></p></td>\n                <td class="text-nowrap text-right"><p>{{$ctrl.getFrozenAmount(frozenAmount) | currency:frozenAmount.currency + \' \'}}</p></td>\n                <td><p>{{ $ctrl.getFreezeAction(frozenAmount) }}</p></td>\n            </tr>\n\n            <tbody ng-repeat="linkedAccountBalance in $ctrl.details.linkedAccountBalances">\n            <tr ng-repeat="(curr, bal) in linkedAccountBalance.balances" ng-init="balancesSize = $ctrl.getSize(linkedAccountBalance.balances)">\n                <td ng-if="$first" rowspan="{{balancesSize}}"><p translate="balance.account.explanation.otherAccount.{{linkedAccountBalance.accountNumber.endsWith(\'F\') ? \'ukl\' : \'accountNumber\'}}" translate-values="{ accountNumber: linkedAccountBalance.accountNumber }"></td>\n                <td class="text-nowrap text-right"><p>{{bal | currency:curr + \' \'}}</p></td>\n                <td ng-if="$first" rowspan="{{balancesSize}}"><p translate-values="{linkStart: \'<a href=&quot;javascript:void(0);&quot; ng-click=&quot;$ctrl.goToInternalFundsTransfer(linkedAccountBalance.accountNumber)&quot;>\', linkEnd: \'</a>\'}" translate="balance.account.explanation.action.otherAccount" translate-compile></p></td>\n            </tr>\n            </tbody>\n\n            <tr ng-repeat="curr in $ctrl.details.otherCurrencies">\n                <td ng-if="$first" rowspan="{{$ctrl.details.otherCurrencies.length}}"><p translate="balance.account.explanation.otherCurrencies" translate-values="{ currency: $ctrl.details.currency }"></p></td>\n                <td class="text-nowrap text-right"><p>{{$ctrl.details.cashBalances[curr] | currency:curr + \' \'}}</p></td>\n                <td ng-if="$first" rowspan="{{$ctrl.details.otherCurrencies.length}}"><a ng-click="$ctrl.goToConvertCurrency()">{{$ctrl.getConvertCurrencyText($ctrl.details.currency)}}</a></td>\n            </tr>\n        </table>\n    </div>\n\n    \x3c!-- Mobile table --\x3e\n    <div class="table-responsive hidden-md hidden-lg">\n        <table class="table">\n            <tr ng-if="$ctrl.details.heldDeposits.length > 0">\n                <th colspan="2" class="text-center text-dark w-100" translate="balance.account.explanation.heldDeposits"></th>\n            </tr>\n            <tr ng-repeat-start="heldDeposit in $ctrl.details.heldDeposits">\n                <td translate="balance.account.explanation.amount" class="text-left w-25 th-label"></td>\n                <td class="text-nowrap text-right w-75">{{heldDeposit.amount | currency:heldDeposit.currency + \' \'}}</td>\n            </tr>\n            <tr>\n                <td translate="balance.account.explanation.action.heading" class="text-left w-25 th-label"></td>\n                <td class="text-right w-75" translate="balance.account.explanation.action.{{heldDeposit.sameBankHoldDate ? \'sameBankAvailableDate\' : \'availableDate\'}}" translate-values="{{ $ctrl.getDepositAvailableDate(heldDeposit) }}"></td>\n            </tr>\n            <tr ng-repeat-end="" ng-if="!$last">\n                <td class="text-center w-100" colspan="2"><br></td>\n            </tr>\n        </table>\n        <br>\n\n        <table class="table" ng-repeat-start="frozenAmount in $ctrl.filterDisplayableFreezes($ctrl.details.frozenAmounts)">\n            <tr>\n                <th colspan="2" class="text-center text-dark w-100" translate="balance.account.explanation.freeze.{{frozenAmount.reasonCode}}"></th>\n            </tr>\n            <tr>\n                <td translate="balance.account.explanation.amount" class="text-left w-25 th-label"></td>\n                <td class="text-nowrap text-right w-75">{{$ctrl.getFrozenAmount(frozenAmount) | currency:frozenAmount.currency + \' \'}}</td>\n            </tr>\n            <tr>\n                <td translate="balance.account.explanation.action.heading" class="text-left w-25 th-label"></td>\n                <td class="text-right w-75">{{ $ctrl.getFreezeAction(frozenAmount) }}</td>\n            </tr>\n        </table>\n        <br ng-repeat-end="">\n\n        <table class="table" ng-repeat-start="linkedAccountBalance in $ctrl.details.linkedAccountBalances">\n            <tr>\n                <th colspan="2" class="text-center text-dark w-100" translate="balance.account.explanation.otherAccount.{{linkedAccountBalance.accountNumber.endsWith(\'F\') ? \'ukl\' : \'accountNumber\'}}" translate-values="{ accountNumber: linkedAccountBalance.accountNumber }"></th>\n            </tr>\n            <tr ng-repeat="(curr, bal) in linkedAccountBalance.balances">\n                <td class="text-left w-25">{{curr}}</td>\n                <td class="text-right w-75">{{bal | number}}</td>\n            </tr>\n            <tr>\n                <td colspan="2" class="text-center w-100"><a ng-click="$ctrl.goToInternalFundsTransfer(linkedAccountBalance.accountNumber)" translate="balance.account.explanation.action.otherAccount"></a></td>\n            </tr>\n        </table>\n        <br ng-repeat-end="">\n\n        <table class="table">\n            <tr ng-if="$ctrl.details.otherCurrencies.length > 0">\n                <th colspan="2" class="text-center text-dark w-100" translate="balance.account.explanation.otherCurrencies" translate-values="{ currency: $ctrl.details.currency }"></th>\n            </tr>\n            <tr ng-repeat="curr in $ctrl.details.otherCurrencies">\n                <td class="text-left w-25">{{curr}}</td>\n                <td class="text-right w-75">{{$ctrl.details.cashBalances[curr] | number}}</td>\n            </tr>\n            <tr ng-if="$ctrl.details.otherCurrencies.length > 0">\n                <td colspan="2" class="text-center w-100"><a ng-click="$ctrl.goToConvertCurrency()">{{$ctrl.getConvertCurrencyText($ctrl.details.currency)}}</a></td>\n            </tr>\n        </table>\n    </div>\n    <br>\n    <p translate="balance.account.explanation.faq" translate-values="{{ $ctrl.getFaqLinkTag() }}"></p>\n</div>'},function(e,t,n){e.exports=function(e){e.component("achVsRfpInfo",{template:n(1168),controller:["CashMethodTextService","ModalService",function(e,t){var n=this;n.$onInit=function(){var a=t.getModalData().type,r=t.getModalData().method,i=t.getModalData().currency,o=t.getModalData().showDebitCardHold,s=t.getModalData().isLite;n.getDescriptionText=function(){return e.getDescriptionText(a,r,i)},n.getTradingHoldText=function(t){return e.getTradingHoldText(t,i,s)},n.getWithdrawHoldText=function(t){return e.getWithdrawHoldText(t,i)},n.getDebitHoldText=function(t){if("DEPOSIT"===a&&o)return e.getDebitHoldText(t,i)},n.getFeesText=function(t){return e.getFeesText(a,t,i).text},n.getTransactionMethodFaqId=function(t){return e.getTransactionMethodFaqId(t)}}}]})}},function(e,t){e.exports='<p ng-bind-html="$ctrl.getDescriptionText() | renderHTML"></p>\n<hr/>\n<table class="table table-bordered table-condensed" width="100%"\n    cellpadding="0" cellspacing="0" border="0">\n    <thead>\n        <tr>\n            <th></th>\n            <th valign="middle" align="center">\n                <p>\n                    <strong>{{\'underlyingMethod.name.ACH\' | translate}}</strong>\n                </p>\n            </th>\n            <th valign="middle" align="center">\n                <p>\n                    <strong>{{\'underlyingMethod.name.RFP\' | translate}}</strong>\n                </p>\n            </th>\n        </tr>\n    </thead>\n    <tbody>\n        <tr>\n            <td valign="middle" align="left">\n                <p>\n                    <strong>{{\'cashTransfer.label.fees\' | translate}}</strong>\n                </p>\n            </td>\n            <td valign="middle" align="left">\n                <p ng-bind-html="$ctrl.getFeesText(\'ACH\') | renderHTML"></p>\n            </td>\n            <td valign="middle" align="left">\n                <p ng-bind-html="$ctrl.getFeesText(\'RFP\') | renderHTML"></p>\n            </td>\n        </tr>\n        <tr>\n            <td valign="middle" align="left">\n                <p>\n                    <strong>{{\'cashTransfer.label.tradingHold\' | translate}}</strong>\n                </p>\n            </td>\n            <td valign="middle" align="left">\n                <p ng-bind-html="$ctrl.getTradingHoldText(\'ACH\') | renderHTML"></p>\n            </td>\n            <td valign="middle" align="left">\n                <p ng-bind-html="$ctrl.getTradingHoldText(\'RFP\') | renderHTML"></p>\n            </td>\n        </tr>\n        <tr>\n            <td valign="middle" align="left">\n                <p>\n                    <strong>{{\'cashTransfer.label.withdrawHold\' | translate}}</strong>\n                </p>\n            </td>\n            <td valign="middle" align="left">\n                <p ng-bind-html="$ctrl.getWithdrawHoldText(\'ACH\') | renderHTML"></p>\n            </td>\n            <td valign="middle" align="left">\n                <p ng-bind-html="$ctrl.getWithdrawHoldText(\'RFP\') | renderHTML"></p>\n            </td>\n        </tr>\n        <tr\n            ng-if="$ctrl.getDebitHoldText(\'ACH\') && $ctrl.getDebitHoldText(\'RFP\')">\n            <td valign="middle" align="left">\n                <p>\n                    <strong>{{\'cashTransfer.label.debitHold\' | translate}}</strong>\n                </p>\n            </td>\n            <td valign="middle" align="left">\n                <p ng-bind-html="$ctrl.getDebitHoldText(\'ACH\') | renderHTML"></p>\n            </td>\n            <td valign="middle" align="left">\n                <p ng-bind-html="$ctrl.getDebitHoldText(\'RFP\') | renderHTML"></p>\n            </td>\n        </tr>\n        <tr>\n            <td valign="middle" align="left">\n                <p>\n                    <strong>{{\'platform.features.more.information\' |\n                        translate}}</strong>\n                </p>\n            </td>\n            <td valign="middle" align="left">\n                <p class="text-left">\n                    <a\n                        href="https://www.ibkr.com/faq?id={{$ctrl.getTransactionMethodFaqId(\'ACH\')}}"\n                        target="_blank" translate="underlyingMethod.faq.ACH"></a>\n                </p>\n            </td>\n            <td valign="middle" align="left">\n                <p class="text-left">\n                    <a\n                        href="https://www.ibkr.com/faq?id={{$ctrl.getTransactionMethodFaqId(\'RFP\')}}"\n                        target="_blank" translate="underlyingMethod.faq.RFP"></a>\n                </p>\n            </td>\n        </tr>\n    </tbody>\n</table>'},function(e,t,n){e.exports=function(e){e.component("bulkTransferCsvUploadModal",{template:n(1170),controller:["ModalService","FileUploadService",function(t,n){var a=this;a.rows=[];a.$onInit=function(){var e;a.isError=!1,a.isLoading=!1,a.allowedExtensions=["txt","csv"],a.maxFileSizeInMb=1,a.documentSubmissionForm={},a.method=t.getModalData().method,a.fromAccount=t.getModalData().fromAccount,a.allowedDestinations=t.getModalData().allowedDestinations,a.allowedSources=t.getModalData().allowedSources,a.adminAccountId=t.getModalData().adminAccountId,a.assetMode="UPLOAD",(e=[]).push({label:"word.upload",alignment:"right",fn:a.loadDataFromUploadFile,btnType:"primary",isDisabled:a.isSearchDisabled}),t.setModalButtons(e)};a.isSearchDisabled=function(){return a.isLoading},a.loadDataFromUploadFile=function(){if(document.getElementById("csvFile").files[0]){a.isLoading=!0;var r=document.getElementById("csvFile").files[0];if(function(e){return a.allowedExtensions[0]===e||a.allowedExtensions[1]===e}(r.name.split(".").pop())){var i="/BulkFundsTransfer",o=new FormData;o.append("csvFile",r),"SIMPLE_IRA_FUNDING"===a.method?(o.append("fromAccount",a.fromAccount),o.append("allowedDestinations",a.allowedDestinations),i+="/SimpleIraTransferCsvUpload"):"FULL_SERVICE_FUNDING"===a.method&&(o.append("allowedSources",a.allowedSources),o.append("adminAccountId",a.adminAccountId),i+="/FullServiceTransferCsvUpload"),(a.activeRequest=n.uploadFileToUrl(o,e.SERVER_PATH+i)).then(function(e){a.errors=e.data.csvError,a.rows=e.data.rows,a.errors?a.isError=!0:a.isError=!1}).finally(function(){a.activeRequest=null,a.isError||(a.assetMode="HIDE",a.isLoading=!1,t.closeModal(a.rows)),a.isLoading=!1})}else a.errors=[{error:"fileNotAllowed"}],a.isError=!0,a.isLoading=!1}else a.errors=[{error:"fileNotFound"}],a.isError=!0},a.$onDestroy=function(){angular.isDefined(a.activeRequest)&&null!==a.activeRequest&&a.activeRequest.cancel()}}]})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.isLoading"></loading-overlay>\n\n<div ng-show="$ctrl.assetMode === \'UPLOAD\'">\n<div class="row">\n    <div class="col-xs-12 col-sm-12 col-md-12">\n        <p>{{\'partial.upload.desc.\' +$ctrl.method | translate}}</p>\n        <br>\n        <p>{{\'partial.upload.sample\'  | translate}}</p>\n        <center><div ng-if="$ctrl.method === \'SIMPLE_IRA_FUNDING\'"><img src="/images/am/csv-upload-example.png"></div></center>\n        <center><div ng-if="$ctrl.method === \'FULL_SERVICE_FUNDING\'"><img src="/images/am/fullservice-csv-upload-example.png"></div></center>\n        <br>\n        <div class="form-group">\n          <div class="row">\n             <div class="col-xs-12 col-sm-6 col-md-6 col-lg-4">\n                <label class="control-label">{{\'partial.upload.browseFile\' | translate}}</label>\n             </div>\n             <div class="col-xs-12 col-sm-6 col-md-6 col-lg-4">\n                <am-file-input name="csvFile" ng-model="$ctrl.csvSubmitForm.document" is-required="true" max-size="$ctrl.maxFileSizeInMb * 1000000" allowed-extension="$ctrl.allowedExtensions" multiple="false"></am-file-input>\n             </div>\n          </div>\n          <div class="row" ng-if="$ctrl.isError">\n            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n               <div class="alert alert-danger">\n                 <div ng-repeat="errors in $ctrl.errors">\n                    <p><span ng-if="errors.line">{{errors.line}} : </span><span ng-if="errors.lineNumber && !errors.columnNumber" translate="{{ \'partial.upload.error.lineDetailWithoutColumn\' }}" translate-values="{lineNumber : errors.lineNumber}"></span>\n                    <span ng-if="errors.columnNumber" translate="{{ \'partial.upload.error.lineDetailWithColumn\' }}" translate-values="{columnNumber : errors.columnNumber, lineNumber : errors.lineNumber}"></span> {{\'partial.upload.error.\' + errors.error | translate}}.</p>\n                 </div>\n                 <p>{{ \'partial.upload.error.errorMsg\' | translate }}</p>\n               </div>\n             </div>\n          </div>\n         </div>\n    </div>\n</div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("bulkTransferHistoryModal",{template:n(1172),controller:["ModalService","ResourceService",function(t,n){var a=this;a.$onInit=function(){a.fundingId=t.getModalData().fundingId,a.method=t.getModalData().method,a.getAlertClass=function(e){return"REJECTED"===e?"alert alert-danger":"PROCESSED"===e?"alert alert-success":"alert alert-gray"},a.loadInProgress=!0;var r={fundingId:a.fundingId},i="/BulkFundsTransferHistory";return"SIMPLE_IRA_FUNDING"===a.method?i+="/SimpleIraTransferHistoryDetails":"FULL_SERVICE_FUNDING"===a.method&&(i+="/FullServiceTransferHistoryDetails"),n.create(e.SERVER_PATH+i,r).then(function(e){angular.isDefined(e.data)&&(a.requests=e.data),a.loadInProgress=!1})}}]})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.loadInProgress"></loading-overlay>\n<div ng-if="$ctrl.requests && $ctrl.requests.length > 0" class="row">\n    <div class="padding-top-25 col-xs-12 col-sm-12 col-md-12 col-lg-12">\n        <table width="100%" cellpadding="0" cellspacing="0" border="0" class="table">\n            <thead>\n                <tr>\n                    <th width="15%" valign="middle">\n                        {{\'cashTransfer.internal.singleSimpleIraTransferHistory.label.requestId\' | translate}}\n                    </th>\n                    <th ng-if="$ctrl.method === \'SIMPLE_IRA_FUNDING\'" width="15%" valign="middle">\n                        {{\'cashTransfer.internal.singleSimpleIraTransferHistory.label.account\' | translate}}\n                    </th>\n                    <th ng-if="$ctrl.method === \'FULL_SERVICE_FUNDING\'" width="35%" valign="middle">\n                        {{\'cashTransfer.internal.singleFullServiceTransferHistory.label.source\' | translate}}\n                    </th>\n                    <th ng-if="$ctrl.method === \'FULL_SERVICE_FUNDING\'" width="30%" valign="middle">\n                        {{\'cashTransfer.internal.singleFullServiceTransferHistory.label.destination\' | translate}}\n                    </th>\n                    <th ng-if="$ctrl.method === \'SIMPLE_IRA_FUNDING\'" width="20%" valign="middle">\n                        {{\'cashTransfer.internal.singleSimpleIraTransferHistory.label.title\' | translate}}\n                    </th>\n                    <th width="10%" valign="middle">\n                        {{\'cashTransfer.internal.singleSimpleIraTransferHistory.label.amount\' | translate}}\n                    </th>\n                    <th ng-if="$ctrl.method === \'SIMPLE_IRA_FUNDING\'" width="20%" valign="middle">\n                        {{\'cashTransfer.internal.singleSimpleIraTransferHistory.label.type\' | translate}}\n                    </th>\n                    <th ng-if="$ctrl.method === \'SIMPLE_IRA_FUNDING\'" width="10%" valign="middle">\n                        {{\'cashTransfer.internal.singleSimpleIraTransferHistory.label.year\' | translate}}\n                    </th>\n                    <th width="10%" valign="middle">\n                        {{\'cashTransfer.internal.singleSimpleIraTransferHistory.label.status\' | translate}}\n                    </th>\n                 </tr>\n            </thead>\n            <tbody>\n                <tr ng-repeat="request in $ctrl.requests">\n                    <td align="left" valign="middle">\n                        {{request.requestId}}\n                    </td>\n                    <td ng-if="$ctrl.method === \'SIMPLE_IRA_FUNDING\'" align="left" valign="middle">\n                        {{request.employeeAccountId}}\n                    </td>\n                    <td ng-if="$ctrl.method === \'SIMPLE_IRA_FUNDING\'" align="left" valign="middle">\n                        {{request.accountTitle}}\n                    </td>\n                    <td ng-if="$ctrl.method === \'SIMPLE_IRA_FUNDING\'" align="left" valign="middle">\n                        {{request.contributionAmt}}\n                    </td>\n                    <td ng-if="$ctrl.method === \'SIMPLE_IRA_FUNDING\'" align="left" valign="middle">\n                        {{\'iraDepositType.\' + request.contributionType | translate}}\n                    </td>\n                    <td ng-if="$ctrl.method === \'SIMPLE_IRA_FUNDING\'" align="left" valign="middle">\n                        {{request.contributionYear}}\n                    </td>\n                    <td ng-if="$ctrl.method === \'FULL_SERVICE_FUNDING\'" align="left" valign="middle">\n                        {{request.sourceAccountId}}\n                    </td>\n                    <td ng-if="$ctrl.method === \'FULL_SERVICE_FUNDING\'" align="left" valign="middle">\n                        {{request.destinationAccountId}}\n                    </td>\n                    <td ng-if="$ctrl.method === \'FULL_SERVICE_FUNDING\'" align="left" valign="middle">\n                        {{request.amount}}\n                    </td>\n                    <td align="left" valign="middle" ng-class="$ctrl.getAlertClass(request.status)">\n                        {{\'simpleIraTransfer.state.\' + request.status | translate}}\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){n(1174)(e)}},function(e,t,n){e.exports=function(e){e.component("debitCardDetails",{template:n(1175),controller:["ModalService","ResourceService",function(t,n){var a=this,r=function(e){a.sequenceState=e;var n=[];"DETAILS"===e?a.isActionAllowed()?n.push({label:"word.continue",alignment:"right",fn:o,isDisabled:i}):n.push({label:"word.ok",alignment:"right",fn:l}):"ADDITIONAL_INFO"===e?(n.push({label:"word.continue",alignment:"right",fn:s,isDisabled:i}),n.push({label:"word.back",alignment:"left",fn:u})):"COMPLETION"===e?n.push({label:"word.ok",alignment:"right",fn:l}):"ERROR"===e&&n.push({label:"word.ok",alignment:"right",fn:u}),t.setModalButtons(n)},i=function(){return a.isInProgress||angular.isUndefined(a.cardAction)||0===a.cardAction.length||"replace"===a.cardAction&&"ADDITIONAL_INFO"===a.sequenceState&&angular.isUndefined(a.replaceReason)},o=function(){a.isInProgress=!0,r("ADDITIONAL_INFO"),"replace"===a.cardAction&&(a.reasons=["LOST","STOLEN"]),a.isInProgress=!1},s=function(){if(a.isInProgress=!0,"cancel"===a.cardAction&&n.delete(e.SERVER_PATH+"/DebitCard",{prn:a.debitCardDetails.prn,reason:a.cancelReason}).then(function(e){r("COMPLETION")},function(e){r("ERROR")}).finally(function(){a.isInProgress=!1}),"replace"===a.cardAction){if(a.suspended)return;n.update(e.SERVER_PATH+"/DebitCard",{prn:a.debitCardDetails.prn,reason:a.replaceReason}).then(function(e){r("COMPLETION")},function(e){r("ERROR")}).finally(function(){a.isInProgress=!1})}},l=function(){t.closeModal(a.cardAction)},c=function(){t.closeModal("viewTransactions")},u=function(){a.isInProgress=!0,a.cardAction=void 0,r("DETAILS"),a.isInProgress=!1};a.$onInit=function(){a.debitCardDetails=t.getModalData().cardDetails,a.offeringType=t.getModalData().offeringType,a.viewTransactions=c,a.suspended=t.getModalData().suspended,a.isActivated=function(){return"ACTIVATED"===a.debitCardDetails.status},a.isActionAllowed=function(){return angular.isDefined(a.debitCardDetails.prn)&&0!==a.debitCardDetails.prn&&"ACTIVATED"===a.debitCardDetails.status},r("DETAILS"),a.isInProgress=!1}}]})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.isInProgress"></loading-overlay>\r\n<div class="row">\r\n    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\r\n        <div ng-show="$ctrl.sequenceState === \'DETAILS\'">\r\n            \x3c!--  TODO: check if expired cards are required\r\n         <div ng-if="$ctrl.debitCardStatus === \'EXPIRED\'">\r\n            <div class="alert alert-warning">\r\n                <p class="text-center" translate="debitCard.manage.card.expired.line1" translate-values="{strongStart: \'<strong>\', strongEnd: \'</strong>\', lineBreak: \'<br>\'}"></p>\r\n                <br>\r\n                <p class="text-center text-small" translate="debitCard.manage.card.expired.line2" translate-values="{linkStart: \'<a href=&quot;javascript:void(0);&quot; ng-click=&quot;$ctrl.viewTransactions()&quot;>\', linkEnd: \'</a>\'}"></p>\r\n            </div>\r\n        </div>\r\n         --\x3e\r\n            <div ng-if="$ctrl.isActivated()">\r\n                <h6 class="subtitle">\r\n                    {{\'debitCard.manage.subheading.details\' | translate}} <span class="btn-group-right"> <a href="javascript:void(0);" target="_self" class="btn btn-sm btn-default" ng-click="$ctrl.viewTransactions()">{{\'debitCard.manage.viewTransactions.label\' | translate}}</a>\r\n                    </span>\r\n                </h6>\r\n                <debit-card-details-review card-details="$ctrl.debitCardDetails"></debit-card-details-review>\r\n            </div>\r\n            <div ng-if="!$ctrl.isActivated()">\r\n                <div class="alert alert-warning">\r\n                    <debit-card-activation-instruction offering-type="$ctrl.offeringType" activation-code="$ctrl.debitCardDetails.activationCode" card-status="$ctrl.debitCardDetails.status"></debit-card-activation-instruction>\r\n                </div>\r\n            </div>\r\n            <br>\r\n            <div ng-if="$ctrl.isActionAllowed()">\r\n                <h6 class="subtitle" translate="debitCard.manage.subheading.actions"></h6>\r\n                <p translate="debitCard.manage.action.label" translate-values="{secondaryTextStart: \'<span class=&quot;text-secondary&quot;>\', secondaryTextEnd: \'</span>\'}"></p>\r\n                <div class="row" ng-if="$ctrl.isActivated() && !$ctrl.suspended">\r\n                    <div class="col-xs-2 col-sm-1 col-md-1 col-lg-1">\r\n                        <p class="text-center">\r\n                            <input ng-model="$ctrl.cardAction" name="action" type="radio" value="replace" i-check />\r\n                        </p>\r\n                    </div>\r\n                    <div class="col-xs-10 col-sm-11 col-md-11 col-lg-11">\r\n                        <p>\r\n                            <strong translate="debitCard.manage.action.replace"></strong>\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n                <div class="row">\r\n                    <div class="col-xs-2 col-sm-1 col-md-1 col-lg-1">\r\n                        <p class="text-center">\r\n                            <input ng-model="$ctrl.cardAction" name="action" type="radio" value="cancel" i-check />\r\n                        </p>\r\n                    </div>\r\n                    <div class="col-xs-10 col-sm-11 col-md-11 col-lg-11">\r\n                        <p>\r\n                            <strong translate="debitCard.manage.action.cancel"></strong>\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div ng-show="$ctrl.sequenceState === \'ADDITIONAL_INFO\'">\r\n            <div ng-if="$ctrl.cardAction === \'cancel\'">\r\n                <div align="center">\r\n                    <i class="fa fa-4x fa-warning text-gray" aria-hidden="true"></i>\r\n                </div>\r\n                <h4 class="text-center" translate="debitCard.manage.cancel.warning1"></h4>\r\n                <br>\r\n                <am-form-textarea ng-model="$ctrl.cancelReason" label-text="{{\'debitCard.manage.cancel.reason.label\' | translate}}" cols="50" maxlength="300"></am-form-textarea>\r\n                <br>\r\n                <div class="alert alert-warning">\r\n                    <p class="text-center" translate="debitCard.manage.cancel.warning2"></p>\r\n                </div>\r\n                <br>\r\n            </div>\r\n            <div ng-if="$ctrl.cardAction === \'replace\'">\r\n                <div align="center">\r\n                    <i class="fa fa-4x fa-warning text-gray" aria-hidden="true"></i>\r\n                </div>\r\n                <h4 class="text-center" translate="debitCard.manage.replace.warning1"></h4>\r\n                <br>\r\n                <am-form-select ng-model="$ctrl.replaceReason" options="$ctrl.reasons" vertical="false" label-text="{{\'debitCard.manage.replace.label\' | translate}}" empty-option-text="{{\'word.chooseOne\' | translate}}" option-key="\'debitCard.manage.replace.reason.\'" required></am-form-select>\r\n                <br>\r\n                <div class="alert alert-warning">\r\n                    <p translate="debitCard.manage.replace.warning2" translate-values="{strongStart: \'<strong>\', strongEnd: \'</strong>\'}"></p>\r\n                    <br>\r\n                    <p translate="debitCard.manage.replace.warning3"></p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div ng-show="$ctrl.sequenceState === \'COMPLETION\'">\r\n            <div align="center">\r\n                <i class="fa fa-4x fa-check-circle text-success" aria-hidden="true"></i>\r\n            </div>\r\n            <div ng-if="$ctrl.cardAction === \'cancel\'">\r\n                <h1 class="text-center text-success" translate="debitCard.manage.cancel.completion1"></h1>\r\n                <h3 class="text-center" translate="debitCard.manage.cancel.completion2"></h3>\r\n            </div>\r\n            <div ng-if="$ctrl.cardAction === \'replace\'">\r\n                <h1 class="text-center text-success" translate="debitCard.manage.replace.completion1"></h1>\r\n                <h3 class="text-center" translate="debitCard.manage.replace.completion2"></h3>\r\n                <hr>\r\n                <p translate="debitCard.manage.replace.completion3"></p>\r\n                </br>\r\n                <p translate="debitCard.manage.replace.completion4" translate-values="{strongStart: \'<strong>\', strongEnd: \'</strong>\'}"></p>\r\n            </div>\r\n        </div>\r\n        <div ng-show="$ctrl.sequenceState === \'ERROR\'">\r\n            <div class="alert alert-danger">\r\n                <p>{{\'internal.error.request_submit\' | translate}}</p>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'},function(e,t,n){e.exports=function(e){n(11)(e,["cash-transfer-error"],function(){return[n.e(5).then(n.t.bind(null,1993,7))]})}},function(e,t,n){e.exports=function(e){n(1178)(e),n(1179)(e),n(1181)(e),n(1183)(e),n(1184)(e),n(1185)(e)}},function(e,t){e.exports=function(e){e.component("achAmountConfirmationModal",{template:'<ach-amount-confirmation pending-request="$ctrl.pendingRequest" on-completion="$ctrl.onCompletion"></ach-amount-confirmation>',controller:["ModalService",function(e){var t=this;t.$onInit=function(){t.pendingRequest=e.getModalData().request,t.onCompletion=function(t){e.closeModal(t)}}}]})}},function(e,t,n){e.exports=function(e){e.component("instructionDeleteModal",{template:n(1180),controller:["$translate","FundingFaqService","ModalService","NavigationService","ResourceService","FundingInstructionService",function(t,n,a,r,i,o){var s=this,l=function(e,t){var n={status:e,deletedInstructions:t};a.setModalResult(n)},c=function(){s.isLoading=!0,function(){if(0===s.information.pendingRequestId||s.information.hkRestricted){var t,n=s.information.instruction;t="ASSET"===n.instructionType?n.instructionName:n.instructionId;var a={instructionType:n.instructionType,instructionId:t,accountId:s.information.accountId};return i.delete(e.SERVER_PATH+"/FundingInstructions/",a)}return i.delete(e.SERVER_PATH+"/RetailRequest/"+s.information.pendingRequestId)}(s.information).then(function(e){s.state="SUCCESS",l(s.state,e.data.deletedInstructions)},function(e){s.errors=e,s.state="ERROR",l(s.state,[])}).finally(function(){d(),s.isLoading=!1})},u=function(){a.closeModal();r.menuNavigate("TransferFunds",{sequenceParameters:{transferDetails:{transferParameters:{type:"WITHDRAWAL",moneyAmount:{currencyType:"INR"},method:"NEFT"}}}})},d=function(){var e=[];"PENDING"===s.state?(e.push({label:"word.no",alignment:"left",fn:a.closeModal,btnClass:"btn-default"}),e.push({label:"word.yes",alignment:"right",fn:c,btnClass:"btn-default"})):"RESTRICTED"===s.state?"NEFT"===s.restriction?(e.push({label:"word.cancel",alignment:"left",fn:a.closeModal}),e.push({label:"instruction.create.button",alignment:"right",btnType:"primary",fn:u})):e.push({label:"word.close",alignment:"right",fn:a.closeModal,btnClass:"btn-default"}):e.push({label:"word.ok",alignment:"right",fn:a.closeModal,btnClass:"btn-default"}),a.setModalButtons(e)};s.$onInit=function(){s.information=a.getModalData().information,s.state="PENDING",s.isLoading=!0,s.restriction="NONE",s.errors={},function(t){var n;n="ASSET"===t.instructionType?t.instructionName:t.instructionId;var a={instructionType:t.instructionType,instructionId:n};return i.fetch(e.SERVER_PATH+"/FundingInstructions/DeletionAllowed/",a)}(s.information.instruction).then(function(e){s.restriction=e.data.restriction,"NONE"!=s.restriction&&(s.state="RESTRICTED")}).finally(function(){!function(e){if(s.pendingText,s.successText,e.hkRestricted)s.pendingText=t.instant("instruction.delete.pendingText.hkRestricted"),s.successText=t.instant("instruction.delete.successText.hkRestricted");else if("EDDA"===e.instruction.instructionType){var a={dangerStart:"<span class='text-danger'><strong>",dangerEnd:"</strong></span>",lineBreak:"<br/>",linkStart:'<a href="'+n.getEddaFaqLink()+'" target="_blank">',linkEnd:"</a>"};s.pendingText=t.instant("instruction.delete.pendingText.processed.EDDA",a),s.successText=t.instant("instruction.delete.successText.EDDA")}else{var r=o.getInstructionNameText(e.instruction);"INTERNAL_TRANSFER_LINKAGE"===e.instruction.instructionType||"WISE"===e.instruction.instructionType?s.pendingText=t.instant("instruction.delete.pending",{instructionName:r+" "+o.getInstructionSubText(e.instruction)}):s.pendingText=t.instant("instruction.delete.pending",{instructionName:r}),s.successText=t.instant("instruction.delete.success",{instructionName:r})}s.restrictedText,"NONE"!==s.restriction&&(s.restrictedText=t.instant("instruction.delete.restrictedText."+s.restriction)),s.errorText=t.instant("internal.error.request_submit")}(s.information),d(),s.isLoading=!1})}}]})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.isLoading"></loading-overlay>\n\n<div ng-show="$ctrl.state === \'PENDING\'">\n    <div ng-if="$ctrl.information.instruction.instructionType === \'EDDA\'">\n        <instruction-review instruction="$ctrl.information.instruction"></instruction-review>\n        <hr>\n    </div>\n    <p ng-bind-html="::$ctrl.pendingText | renderHTML"></p>\n</div>\n\n<div ng-show="$ctrl.state === \'RESTRICTED\'">\n    <div class="row">\n        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n            <div class="alert alert-warning">\n                <p>{{::$ctrl.restrictedText}}</p>\n            </div>\n        </div>\n    </div>\n</div>\n\n<div ng-show="$ctrl.state === \'ERROR\'">\n    <div class="row">\n        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n            <div class="alert alert-danger">\n                <p>{{::$ctrl.errorText}}</p>\n                <p ng-if="$ctrl.errors.length == 1" ng-bind-html="$ctrl.errors[0] | renderHTML"></p>\n                <ul ng-if="$ctrl.errors.length > 1">\n                    <li ng-repeat="error in $ctrl.errors" ng-bind-html="error | renderHTML"></li>\n                </ul>\n            </div>\n        </div>\n    </div>\n</div>\n\n<div ng-show="$ctrl.state === \'SUCCESS\'">\n    <div class="row">\n        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n            <div class="alert alert-success">\n                <p>{{::$ctrl.successText}}</p>\n            </div>\n        </div>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("instructionEditModal",{template:n(1182),controller:["$translate","ModalService","NavigationService","ResourceService",function(t,n,a,r){var i=this,o=function(){return i.isLoading||angular.equals(i.information.instruction.instructionName,i.clonedInformation.instruction.instructionName)},s=function(e,t){var a={status:e,editedInstructions:t};n.setModalResult(a)},l=function(){i.isLoading=!0;var t=i.information.instruction,n=e.SERVER_PATH+"/FundingInstructions/"+t.instructionType+"/"+i.information.accountId+"/";n+="ASSET"===t.instructionType?t.instructionName:t.instructionId,r.update(n,i.clonedInformation.instruction).then(function(e){i.isSuccess=!0,i.information.instruction.instructionName=i.clonedInformation.instruction.instructionName,s("SUCCESS",[])},function(e){i.errors=e.data.errors,i.isError=angular.isDefined(i.errors.internal),s("ERROR",[])}).finally(function(){i.isLoading=!1,c()})},c=function(){var e=[];i.isSuccess||i.isError?e.push({label:"word.close",alignment:"right",fn:n.closeModal}):e.push({label:"word.save",alignment:"right",fn:l,btnType:"primary",isDisabled:o}),n.setModalButtons(e)};i.$onInit=function(){i.isLoading=!0,i.information=n.getModalData().information,i.clonedInformation=angular.copy(i.information),i.errors={},c(),i.isLoading=!1,this.isSuccess=!1,this.isError=!1}}]})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.isLoading"></loading-overlay>\n\n<div ng-if="!$ctrl.isLoading" ng-show="!$ctrl.isSuccess && !$ctrl.isError" ng-form="$ctrl.instructionEditForm">\n <p>{{\'instruction.edit.nickname.desc\' | translate }}</p><br> \n <am-form-input name="instructionName"  ng-model="$ctrl.clonedInformation.instruction.instructionName" type="text" label-text="{{\'transfer.label.instructionNickname\' | translate}}" input-mask-alias="instructionNickname" required server-errors="$ctrl.errors"></am-form-input>\n <instruction-review instruction="$ctrl.information.instruction"></instruction-review>\n</div>\n\n<div class="row" ng-if="$ctrl.isError" >\n    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n        <div class="alert alert-danger">\n            <p>{{\'internal.error.\' + $ctrl.errors[\'internal\'] | translate}}</p>         \n        </div>\n    </div>\n</div>\n\n<div class="row" ng-show="$ctrl.isSuccess">\n    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n        <div class="alert alert-success">\n            <p>{{\'instruction.edit.success\' | translate }}</p>\n        </div>\n    </div>\n</div>\n'},function(e,t){e.exports=function(e){e.component("instructionReviewModal",{template:'<instruction-review instruction="$ctrl.instruction"></instruction-review>',controller:["ModalService",function(e){var t=this;t.$onInit=function(){t.instruction=e.getModalData().instruction}}]})}},function(e,t){e.exports=function(e){e.component("invalidInstructionModal",{template:'<p ng-bind-html="$ctrl.getText() | renderHTML"></p>',controller:["ModalService","DynamicTranslationService","AmInterfaceService","UserPlatformService","ACTIVE_CONTEXT","ApplicationContext","CsTicketService","FundingNavigationService",function(e,t,n,a,r,i,o,s){var l=this;l.$onInit=function(){l.instruction=e.getModalData().instruction,l.getText=function(){return t.getDisplayText(l.instruction.verificationText)},"FIXABLE"===l.instruction.verificationState?"ACH_CUST_PROOF_ID_TASK_INCOMPLETE"===l.instruction.invalidReason?a.isWeb()&&r===i.AM_DEPENDENCY&&e.setModalButtons([{alignment:"right",label:"funding.achInstructionCompletion.buttons.gotopendingitems",btnType:"primary",fn:function(){n.navigateToPendingItems(),e.closeModal(!0)}}]):e.setModalButtons([{alignment:"right",label:"word.verify",btnType:"primary",fn:function(){e.closeModal(!0)}}]):"PENDING"===l.instruction.verificationState&&("CLIENT_RESPONSE"===l.instruction.invalidPendingReason?e.setModalButtons([{alignment:"right",label:"instruction.pending.messageCenter.button",btnType:"primary",fn:function(){o.openTicket(0,l.instruction.accountId),e.closeModal()}}]):"NOT_CONFIRMED"===l.instruction.invalidPendingReason?e.setModalButtons([{alignment:"right",label:"word.pendingItems",btnType:"primary",fn:function(){s.goToCashRequestConfirmation(l.instruction.accountId,l.instruction.request.id),e.closeModal()}}]):e.setModalButtons([{alignment:"right",label:"word.close",btnType:"primary",fn:function(){e.closeModal()}}]))}}]})}},function(e,t){e.exports=function(e){e.component("thirdPartyBankVerificationModal",{template:'<yodlee-verification transfer-parameters="$ctrl.transferParameters" on-state-change="$ctrl.onYodleeStateChange"></yodlee-verification>',controller:["$translate","ModalService",function(e,t){var n=this;n.$onInit=function(){n.transferParameters=t.getModalData().transferParameters,n.onYodleeStateChange=function(n,a){"TRADITIONAL"!==n?"COMPLETE"!==n?"ERROR"===n&&t.setModalButtons([{alignment:"right",label:e.instant("word.close"),fn:t.closeModal}]):t.closeModal(a):t.closeModal("TRADITIONAL")}}}]})}},function(e,t,n){e.exports=function(e){n(1187)(e)}},function(e,t,n){e.exports=function(e){e.component("portalRedirectionModal",{template:n(1188),controller:["ModalService","NavigationAction","NavigationService",function(e,t,n){this.$onInit=function(){e.setModalButtons([{label:"funding.website.modal.button",alignment:"right",btnType:"primary",fn:function(){var a,r,i={path:(a="/sso/Login",r=e.getModalData().isPositionTransfer,a+=r?"?action=TransferPositions":"?action=TransferFunds",a+="&type="+e.getModalData().type,r||(a+="&currency="+e.getModalData().currency),a+="&method="+e.getModalData().method),navigateAction:t.REDIRECT};n.navigate(i)}}])}}]})}},function(e,t){e.exports='<div class="row">\n    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n        <h5 class="text-center" translate="funding.website.modal.text" translate-values="{ lineBreak: \'<br/>\' }"></h5>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){n(1190)(e)}},function(e,t,n){e.exports=function(e){e.component("microcapVerificationModal",{template:n(1191),controller:["ResourceService","ModalService",function(t,n){var a=this,r=function(){return a.isSearchInProgress||!a.microcapStockVerificationForm.$valid},i=function(){a.assetMode="SEARCH",o()},o=function(){var e=[];"SELECT"===a.assetMode?(e.push({label:"word.searchAgain",alignment:"left",fn:i}),e.push({label:"word.close",alignment:"right",fn:n.closeModal})):e.push({label:"word.search",alignment:"right",fn:a.performSearch,btnType:"primary",isDisabled:r}),n.setModalButtons(e)};a.$onInit=function(){a.activeAssetRequest=null,a.isSearchInProgress=!1,a.allAssetRules=n.getModalData().allAssetRules,a.transferParameters=n.getModalData().transferParameters,a.assetMode="SEARCH",a.searchError="",a.assetDetails={},a.criteria={assetTypes:["STOCK"],assetIds:[{}],exchanges:[""]},a.assetFilter={type:"TRANSFER",transferParameters:a.transferParameters},a.assetRules={};for(var r=0;r<a.allAssetRules.length;++r){var i=a.allAssetRules[r];"STOCK"===i.type&&(a.assetRules=i,a.criteria.assetIds=[{type:"SYMBOL"}])}a.getIdTypeMask=function(){return"'alias': 'assetId_"+a.criteria.assetIds[0].type+"'"},a.getIdTypePhKey=function(){return"asset.id."+a.criteria.assetIds[0].type},a.onIdTypeChange=function(){angular.isUndefined(a.microcapStockVerificationForm)||angular.isUndefined(a.microcapStockVerificationForm.idValue)||(delete a.criteria.assetIds[0].id,a.microcapStockVerificationForm.idValue.$setPristine())},a.performSearch=function(){a.searchError="",a.isSearchInProgress=!0,a.isSearchInProgress=!0,(a.activeAssetRequest=t.create(e.SERVER_PATH+"/AssetSearch",{criteria:a.criteria,filter:a.assetFilter},!0)).promise.then(function(e){var t=e.data.result;if("FOUND_RESULTS"===t.resultType){var n=t.assets;a.assetList=n,a.assetMode="SELECT",o()}else a.searchError=t.resultType}).finally(function(){a.activeAssetRequest=null,a.isSearchInProgress=!1})},o()},a.$onDestroy=function(){angular.isDefined(a.activeAssetRequest)&&null!==a.activeAssetRequest&&a.activeAssetRequest.cancel()}}]})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.isSearchInProgress"></loading-overlay>\r\n\r\n\x3c!--\r\n    Initial search screen where the customer specifies their search\r\n    criteria.\r\n--\x3e\r\n<div ng-show="$ctrl.assetMode === \'SEARCH\'" ng-form="$ctrl.microcapStockVerificationForm">\r\n    <p>\r\n        {{\'asset.search.microcapSearch\' | translate}}\r\n    </p>\r\n    <br />\r\n    <am-form-select name="idType" ng-model="$ctrl.criteria.assetIds[0].type" options="$ctrl.assetRules.allowedIdTypes" label-text="{{\'asset.search.label.searchType\' | translate}}" option-key="\'asset.search.field.searchType.\'" hide-empty-option="true" model-listener="$ctrl.onIdTypeChange()"></am-form-select>\r\n    <am-form-input name="idValue" ng-model="$ctrl.criteria.assetIds[0].id" label-text="{{$ctrl.getIdTypePhKey() | translate}}" input-mask="$ctrl.getIdTypeMask()" hook-enter="$ctrl.performSearch()" required></am-form-input>\r\n    <am-form-input name="exchange" ng-model="$ctrl.criteria.exchanges[0]" label-text="{{\'asset.search.label.exchange\' | translate}}" input-mask-alias="assetExchange" hook-enter="$ctrl.performSearch()"></am-form-input>\r\n    <div ng-if="$ctrl.searchError.length" class="alert alert-danger">\r\n        {{\'asset.search.error.\' + $ctrl.searchError | translate}}\r\n    </div>\r\n</div>\r\n\x3c!--\r\n    Search results screen where the customer can see the stock that matches their search including microcap status\r\n--\x3e\r\n<div ng-show="$ctrl.assetMode === \'SELECT\'">\r\n    <p translate="asset.search.microcapSearchResult"></p>\r\n    <br />\r\n    <div class="table-responsive">\r\n        <table width="100%" cellpadding="0" cellspacing="0" border="0" class="table table-hover tablesorter">\r\n            <thead>\r\n                <tr>\r\n                    <th align="left">{{\'asset.search.label.assetType\' | translate}}</th>\r\n                    <th align="left">{{\'asset.search.label.description\' | translate}}</th>\r\n                    <th align="left">{{\'asset.search.label.identifiers\' | translate}}</th>\r\n                    <th align="left">{{\'asset.search.label.microcap\' | translate}}</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr ng-repeat="asset in $ctrl.assetList">\r\n                    <td align="left">{{\'asset.type.\' + asset.type | translate}}</td>\r\n                    <td align="left">{{asset.description}}</td>\r\n                    <td align="left"><position-id-review position-details="asset"></position-id-review></td>\r\n                    <td align="left" ng-if="asset.microCap">{{\'word.yes\' | translate}}</td>\r\n                    <td align="left" ng-if="!asset.microCap">{{\'word.no\' | translate}}</td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n</div>'},function(e,t,n){e.exports=function(e){n(1193)(e)}},function(e,t,n){e.exports=function(e){e.component("speiInstructionModal",{template:n(1194),controller:["CONTENT_HOST","ModalService",function(e,t){var n=this;n.$onInit=function(){n.contentHost=e,n.clabeAcctNo=t.getModalData().alternateBankAccount.bankAccountNumber.accountNumber}}]})}},function(e,t){e.exports='<p>Estimado cliente,</p>\n<br/>\n<p>Si usted va a realizar una trasferencia a través del "SPEI (SISTEMA DE PAGOS ELECTRÓNICOS INTERBANCARIOS)" usted va a requerir nuestra cuenta</p>\n<br/>\n<p><strong>CLABE # {{$ctrl.clabeAcctNo}}</strong></p>\n<br/>\n<p>Para la apropiada acreditación de los fondos a su cuenta, es extremadamente importante que realice los siguientes pasos:</p>\n<ol>\n    <li>En la línea de asunto o concepto de la trasferencia, ingrese su número de cuenta de IB (Por ejemplo: U123456789) y el titular (nombre) de su cuenta.</li>\n    <li>En el campo de referencia, por favor incluya solamente los primeros siete dígitos de la parte numérica de su cuenta de IB. Por ejemplo: Si su cuenta es U123456789, solo ingrese 1234567. Es extremadamente importante que el campo de referencia incluya sólo la parte numérica de su cuenta de IB.</li>\n</ol>\n<br/>\n<p>Importante: Si el campo de referencia se completa automáticamente, por favor borre ése número, e ingrese los primeros siete números de su cuenta de IB como indicado en el paso 2.</p>\n<br/>\n<p>Atentamente,</p>\n<p>IBKR Servicios al Cliente en Español</p>\n<p>561 803 4570</p>'},function(e,t,n){e.exports=function(e){n(1196)(e),n(1198)(e)}},function(e,t,n){e.exports=function(e){e.component("confirmSmsAuthentication",{template:n(1197),controller:["$translate","CONTENT_HOST","ModalService","ResourceService",function(e,t,n,a){var r=this,i=function(){n.openModal({title:e.instant("mobileNumber.token.heading"),templateUrl:"mobile-number-token-verification.component",modalData:n.getModalData()})};r.$onInit=function(){var e;r.contentHost=t,r.mobileNumber=n.getModalData().mobileNumber,r.accountId=n.getModalData().accountId,r.entityId=n.getModalData().entityId,(e=[]).push({label:"ach.verifyMobile.button.confirm",alignment:"right",fn:i,btnType:"primary"}),e.push({label:"word.cancel",alignment:"left",fn:n.closeModal}),n.setModalButtons(e)}}]})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.isLoading"></loading-overlay>\n<div class="row">\n    <div class="col-xs-12 col-sm-2 col-md-2 col-lg-2">\n        <div align="center">\n            <p><img src="https://{{::$ctrl.contentHost}}/images/am/sms_twofactor-2x.png" alt="SMS two-factor" border="0" /></p>\n        </div>\n    </div>\n    <div class="col-xs-12 col-sm-10 col-md-10 col-lg-10">\n        <p><strong translate="ach.verifyMobile.text.1"></strong></p>\n        <p>{{ \'ach.verifyMobile.text.2\' | translate }} {{::$ctrl.mobileNumber.phoneNumber}}</p>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("mobileNumberTokenVerification",{template:n(1199),controller:["$translate","ModalService","ResourceService",function(t,n,a){var r=this,i=function(){o().then(function(){r.resendStatus="SUCCESS"}).catch(function(){r.resendStatus="FAIL"})},o=function(){return r.errors={},angular.isDefined(r.confirmTokenForm)&&angular.isDefined(r.confirmTokenForm.token)&&r.confirmTokenForm.token.$setPristine(),r.isLoading=!0,a.update(e.SERVER_PATH+"/PhoneNumber/Confirm/Mobile",{mobileNumber:r.mobileNumber,accountId:r.accountId}).finally(function(){r.isLoading=!1})},s=function(){r.isLoading=!0,a.update(e.SERVER_PATH+"/PhoneNumber/Confirm/Token/",{token:r.token,mobileNumber:r.mobileNumber,entityId:r.entityId}).then(function(e){n.closeModal(!0)},function(e){r.errors=e.data.errors}).finally(function(){r.isLoading=!1})};r.$onInit=function(){r.mobileNumber=n.getModalData().mobileNumber,r.accountId=n.getModalData().accountId,r.entityId=n.getModalData().entityId,r.resendStatus="",r.errors={},r.getServerErrors=function(){return r.errors},n.setModalButtons([{label:"word.close",alignment:"left",fn:n.closeModal},{label:"word.resendConfirmation",alignment:"right",fn:i,isDisabled:function(){return r.isLoading}},{label:"word.continue",alignment:"right",fn:s,btnType:"primary",isDisabled:function(){return r.isLoading}}]),o().catch(function(e){var a={title:t.instant("mobileNumber.token.heading"),modalData:{errors:[t.instant("internal.error.request_submit")]}};n.openErrorModal(a)})}}]})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.isLoading"></loading-overlay>\n\n<div ng-form="$ctrl.confirmTokenForm" form-server-errors="$ctrl.getServerErrors()">\n    <p translate="mobileNumber.token.label" translate-values="{ \'mobileNumber\' : \'{{$ctrl.mobileNumber.phoneNumber}}\' }"></p>\n    <br>\n    \n    <am-form-input name="token" ng-model="$ctrl.token" type="text" label-text="{{\'mobileNumber.confirmationCode\' | translate}}" maxlength="5" required></am-form-input>\n    \n    <div ng-if="$ctrl.resendStatus !== \'\'" class="alert" ng-class="{ \'alert-success\' : ($ctrl.resendStatus === \'SUCCESS\'), \'alert-danger\' : ($ctrl.resendStatus === \'FAIL\') }">\n        <p translate="{{$ctrl.resendStatus === \'SUCCESS\' ? \'token.resend.success\' : \'token.resend.error\'}}" translate-values="{ \'destination\' : \'<strong>\' + $ctrl.mobileNumber.phoneNumber + \'</strong>\' }" class="text-center">\n        </p>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){n(1201)(e),n(1203)(e),n(1205)(e),n(1207)(e),n(1209)(e)}},function(e,t,n){e.exports=function(e){e.component("fopAuthorizationModal",{template:n(1202),controller:["ModalService","PageService",function(e,t){var n=this;n.$onInit=function(){n.request=e.getModalData().request,n.contraBrokerAccount=n.request.transferInstruction.contraBrokerAccount,n.brokerageContact={street1:"P.O. Box 5235",city:"Greenwich",state:"CT",country:{alpha3:"USA"},postalCode:"06831"},e.setModalButtons([{label:"word.print",fn:t.print,alignment:"right"}])}}]})}},function(e,t){e.exports='<p>{{\'transfer.position.authorization.fop.formHeading\' | translate}}</p>\r\n<br />\r\n<am-form-label label-text="{{\'transaction.field.requestDate\' | translate}}" value-text="{{$ctrl.request.requestTime}}"></am-form-label>\r\n<am-form-label label-text="{{\'word.referenceNumber\' | translate}}" value-text="{{$ctrl.request.id}}"></am-form-label>\r\n<am-form-label label-text="{{\'word.accountId\' | translate}}" value-text="{{$ctrl.request.accountId}}"></am-form-label>\r\n<broker-account-review broker-account="$ctrl.contraBrokerAccount"></broker-account-review>\r\n\r\n<transfer-review transfer-parameters="$ctrl.request.transferParameters"></transfer-review>\r\n\r\n<h4>{{\'transfer.position.authorization.heading.customerSignature\' | translate}}</h4>\r\n<br />\r\n<br />\r\n<br />\r\n\r\n<h4>{{\'transfer.position.authorization.heading.brokerageContact\' | translate}}</h4>\r\n<p translate="transfer.position.authorization.label.clearOps"></p>\r\n<br />\r\n<am-form-label label-text="{{\'word.telephone\' | translate}}" value-text="203-618-5800"></am-form-label>\r\n<am-form-label label-text="{{\'word.fax\' | translate}}" value-text="203-618-5891"></am-form-label>\r\n<p>\r\n    {{ \'transfer.position.authorization.label.ibllc\' | translate }}\r\n    <br />\r\n    <span ng-bind-html="$ctrl.brokerageContact | amAddress:\'long\' | renderHTML"></span>\r\n</p>'},function(e,t,n){e.exports=function(e){e.component("letterOfAuthorizationModal",{template:n(1204),controller:["ModalService","PageService",function(e,t){var n=this;n.$onInit=function(){n.request=e.getModalData().request,n.contraBrokerAccount=n.request.transferInstruction.contraBrokerAccount,e.setModalButtons([{label:"word.print",fn:t.print,alignment:"right"}])}}]})}},function(e,t){e.exports="<p>{{$ctrl.request.requestTime}}</p>\r\n<p>{{$ctrl.contraBrokerAccount.broker.brokerName}}</p>\r\n<br />\r\n<p>{{'transfer.position.authorization.iat.letterStart' | translate}}</p>\r\n<br />\r\n<p translate=\"transfer.position.authorization.iat.letterContent\" translate-values=\"{ accountTitle : $ctrl.contraBrokerAccount.accountTitle, accountId : $ctrl.request.accountId, emailLink : '<a href=&quot;mailto:fop-transfer-in@interactivebrokers.com&quot;>fop-transfer-in@interactivebrokers.com</a>', spanStart : '<span class=&quot;font-italic&quot;>', spanEnd : '</span>' }\"></p>\r\n\r\n<transfer-review transfer-parameters=\"$ctrl.request.transferParameters\"></transfer-review>\r\n\r\n<h4>{{'transfer.position.authorization.heading.customerSignature' | translate}}</h4>"},function(e,t,n){e.exports=function(e){e.component("positionMethodInfo",{template:n(1206),controller:["PositionMethodTextService","ModalService",function(e,t){var n=this;n.$onInit=function(){n.type=t.getModalData().type,n.method=t.getModalData().method,n.iraFop=t.getModalData().iraFop,n.getWithdrawHoldText=function(){return e.getWithdrawHoldText(n.type,n.method)}}}]})}},function(e,t){e.exports='<div ng-if="$ctrl.type === \'POSITION_INBOUND\'">\n    <div ng-if="$ctrl.method === \'ACATS\'">\n        <p translate="positionTransfer.inbound.info.ACATS.1"></p>\n        <p translate="positionTransfer.inbound.info.ACATS.2"></p>\n        <p translate="positionTransfer.inbound.info.ACATS.3"></p>\n        <p translate="positionTransfer.inbound.info.ACATS.4"></p>\n        <p translate="positionTransfer.inbound.info.ACATS.5"></p>\n    </div>\n    <div ng-if="$ctrl.method === \'ATON\'">\n        <p translate="positionTransfer.inbound.info.ATON.1"></p>\n        <p translate="positionTransfer.inbound.info.ATON.2" translate-values="{ strongStart: \'<strong>\', strongEnd: \'</strong>\' }"></p>\n        <p translate="positionTransfer.inbound.info.ATON.3" translate-values="{ strongStart: \'<strong>\', strongEnd: \'</strong>\' }"></p>\n    </div>\n    <div ng-if="$ctrl.method === \'ASSET_TRANSFER\'">\n        <p translate="positionTransfer.inbound.info.ASSET_TRANSFER.1"></p>\n        <p translate="positionTransfer.inbound.info.ASSET_TRANSFER.2"></p>\n        <p translate="positionTransfer.inbound.info.ASSET_TRANSFER.3"></p>\n    </div>\n    <div ng-if="$ctrl.method === \'DRS\'">\n        <p translate="positionTransfer.inbound.info.DRS.1"></p>\n        <p translate="positionTransfer.inbound.info.DRS.2" translate-values="{ strongStart: \'<strong>\', strongEnd: \'</strong>\' }"></p>\n        <p translate="positionTransfer.inbound.info.DRS.3" translate-values="{ linkStart: \'<a href=&quot;https://ndcdyn.interactivebrokers.com/lib/cstools/chat/?q=faq://pageId=111474389&quot; target=&quot;_new&quot;>\', linkEnd: \'</a>\' }"></p>\n        <p translate="positionTransfer.inbound.info.DRS.4"></p>\n        <p translate="positionTransfer.inbound.info.DRS.5"></p>\n    </div>\n    <div ng-if="$ctrl.method === \'DWAC\'">\n        <p translate="positionTransfer.inbound.info.DWAC.1.text"></p>\n        <ul>\n            <li translate="positionTransfer.inbound.info.DWAC.1.1"></li>\n            <li translate="positionTransfer.inbound.info.DWAC.1.2" translate-values="{ strongStart: \'<strong>\', strongEnd: \'</strong>\' }"></li>\n            <li translate="positionTransfer.inbound.info.DWAC.1.3" translate-values="{ strongStart: \'<strong>\', strongEnd: \'</strong>\' }"></li>\n        </ul>\n        <p translate="positionTransfer.inbound.info.DWAC.2"></p>\n        <p translate="positionTransfer.inbound.info.DWAC.3"></p>\n    </div>\n    <div ng-if="$ctrl.method === \'FOP\'">\n        <p translate="positionTransfer.inbound.info.FOP.1"></p>\n        <p translate="positionTransfer.inbound.info.FOP.2"></p>\n        <p ng-if="!$ctrl.iraFop" translate="positionTransfer.inbound.info.FOP.3"></p>\n        <p ng-if="$ctrl.iraFop" translate="positionTransfer.inbound.info.FOP.IRA.3"></p>\n        <p translate="positionTransfer.inbound.info.FOP.4"></p>\n    </div>\n    <div ng-if="$ctrl.method === \'SRN_AU\'">\n        <p translate="positionTransfer.inbound.info.SRN_AU.1"></p>\n        <p translate="positionTransfer.inbound.info.SRN_AU.2"></p>\n        <p translate="positionTransfer.inbound.info.SRN_AU.3"></p>\n    </div>\n    <hr/>\n    <am-form-label ng-if="$ctrl.getWithdrawHoldText()" label-text="{{\'cashTransfer.label.withdrawHold\' | translate}}" value-text="{{$ctrl.getWithdrawHoldText()}}"></am-form-label>\n</div>\n<div ng-if="$ctrl.type === \'POSITION_OUTBOUND\'">\n    <div ng-if="$ctrl.method === \'ASSET_TRANSFER\'">\n        <p translate="positionTransfer.outbound.info.ASSET_TRANSFER.1"></p>\n        <p translate="positionTransfer.outbound.info.ASSET_TRANSFER.2"></p>\n    </div>\n    <div ng-if="$ctrl.method === \'DWAC\'">\n        <p translate="positionTransfer.outbound.info.DWAC.1.text"></p>\n        <ul>\n            <li translate="positionTransfer.outbound.info.DWAC.1.1"></li>\n            <li translate="positionTransfer.outbound.info.DWAC.1.2" translate-values="{ strongStart: \'<strong>\', strongEnd: \'</strong>\' }"></li>\n            <li translate="positionTransfer.outbound.info.DWAC.1.3" translate-values="{ strongStart: \'<strong>\', strongEnd: \'</strong>\' }"></li>\n        </ul>\n        <p translate="positionTransfer.outbound.info.DWAC.2"></p>\n    </div>\n    <div ng-if="$ctrl.method === \'FOP\'">\n        <p translate="positionTransfer.outbound.info.FOP.1"></p>\n        <p translate="positionTransfer.outbound.info.FOP.2"></p>\n    </div>\n    <div ng-if="$ctrl.method === \'DRS\'">\n        <p translate="positionTransfer.outbound.info.DRS.1"></p>\n    </div>\n    <div ng-if="$ctrl.method === \'SRN_AU\'">\n        <p translate="positionTransfer.outbound.info.SRN_AU.1"></p>\n        <p translate="positionTransfer.outbound.info.SRN_AU.2"></p>\n        <p translate="positionTransfer.outbound.info.SRN_AU.3"></p>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("positionTransferInstructionModal",{template:n(1208),controller:["CONTENT_HOST","ModalService",function(e,t){var n=this;n.$onInit=function(){n.contentHost=e;var a=t.getModalData().type;n.method=t.getModalData().method,n.transferForm="TRANSFER_FORM_INDIA","POSITION_OUTBOUND"===a&&(n.transferForm=n.transferForm+"_OUT")}}]})}},function(e,t){e.exports='<div ng-if="::$ctrl.method === \'INDIA_ASSET_TRANSFER\'">\n    <h1 class="text-center" translate="transfer.position.indiaAssetTransfer.header"></h1>\n    <div class="instructions">\n        <div class="instructions-heading">\n            <i class="fa fa-lg fa-info-circle"></i> {{\'word.instructions\' | translate}}\n        </div>\n        <div class="instructions-body text-center">\n            <p translate="transfer.position.indiaAssetTransfer.label"></p>\n            <br/>\n             <a href="https://{{::$ctrl.contentHost}}/download/{{$ctrl.transferForm}}.pdf" class="btn btn-primary">\n                <i class="fa fa-arrow-down margin-right-10"></i>{{\'word.downloadForm\' | translate}}\n            </a>\n        </div>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("positionTransferCsvUploadModal",{template:n(1210),controller:["ModalService","FileUploadService",function(t,n){var a=this;a.assetToAdded=[],a.selectAll=!1;var r=function(){a.assetMode="UPLOAD",i()},i=function(){var e=[];"UPLOAD"===a.assetMode?e.push({label:"word.submit",alignment:"right",fn:a.loadDataFromUploadFile,btnType:"primary",isDisabled:a.isSearchDisabled}):(e.push({label:"word.uploadAgain",alignment:"left",fn:r}),e.push({label:"word.submit",alignment:"right",fn:a.csvAssetToAdded,btnType:"primary"})),t.setModalButtons(e)};a.$onInit=function(){a.allowedAssetTypes=[],a.isError=!1,a.isSearchInProgress=!1,a.allowedExtensions=["txt","csv"],a.maxFileSizeInMb=1,a.documentSubmissionForm={},a.assetFilter=t.getModalData().assetFilter,a.assetRules=t.getModalData().assetRules;for(var e=0;e<a.assetRules.length;++e)"BILL"!==a.assetRules[e].type&&a.allowedAssetTypes.push(a.assetRules[e].type);a.assetMode="UPLOAD",i()},a.handleAsset=function(e){e.isChecked?a.assetToAdded.push(e):(a.selectAll=!1,a.assetToAdded.splice(a.assetToAdded.indexOf(e),1))},a.csvAssetToAdded=function(){t.closeModal(a.assetToAdded)};a.isSearchDisabled=function(){return a.isSearchInProgress},a.handleSelectAll=function(){if(a.assetToAdded=[],a.selectAll)for(assetIndex in a.fetchedValidAsset){(e=a.fetchedValidAsset[assetIndex]).isChecked=!0,a.assetToAdded.push(e)}else for(assetIndex in a.fetchedValidAsset){var e;(e=a.fetchedValidAsset[assetIndex]).isChecked=!1}},a.loadDataFromUploadFile=function(){if(document.getElementById("csvFile").files[0]){a.isSearchInProgress=!0;var t=document.getElementById("csvFile").files[0];if(function(e){return a.allowedExtensions[0]===e||a.allowedExtensions[1]===e}(t.name.split(".").pop())){var r=new FormData;r.append("csvFile",t),r.append("filter",angular.toJson(a.assetFilter)),(a.activeAssetRequest=n.uploadFileToUrl(r,e.SERVER_PATH+"/CsvUpload")).then(function(e){a.errors=e.data.csvError,a.fetchedValidAsset=e.data.validAssets,a.fetchedInValidAsset=e.data.inValidAssets,a.errors?a.isError=!0:a.isError=!1}).finally(function(){a.activeAssetRequest=null,a.isError||(a.assetMode="SELECT",i()),a.isSearchInProgress=!1})}else a.errors=[{error:"fileNotAllowed"}],a.isError=!0,a.isSearchInProgress=!1}else a.errors=[{error:"fileNotFound"}],a.isError=!0},a.$onDestroy=function(){angular.isDefined(a.activeAssetRequest)&&null!==a.activeAssetRequest&&a.activeAssetRequest.cancel()}}]})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.isSearchInProgress"></loading-overlay>\n\n<div ng-show="$ctrl.assetMode === \'UPLOAD\'">\n    <div class="row">\n        <div class="col">\n            <p>{{\'partial.upload.description\' | translate}}</p>\n            <ul class="paralist">\n                <li ng-repeat = "assetType in $ctrl.allowedAssetTypes">\n                    <strong>{{\'partial.upload.\' + assetType + \'.name\' | translate}}:</strong> {{\'partial.upload.\' + assetType + \'.heading\' | translate}}\n                </li>\n            </ul>\n            <p>{{\'partial.upload.sample\'  | translate}}</p>\n            <div align="center"><img src="/images/am/partialUploadExample.png" alt="CSV Example" border="0"></div>\n            <br>\n            \n            <div class="form-group">\n                <div class="row">\n                    <div class="col">\n                        <label class="control-label">{{\'partial.upload.browseFile\' | translate}}</label>\n                    </div>\n                </div>\n                <div class="row">\n                    <div class="col">\n                        <am-file-input name="csvFile" ng-model="$ctrl.csvSubmitForm.document" is-required="true" max-size="$ctrl.maxFileSizeInMb * 1000000" allowed-extension="$ctrl.allowedExtensions" multiple="false"></am-file-input>\n                    </div>\n                </div>\n                <div class="row" ng-if="$ctrl.isError">\n                    <div class="col">\n                        <div class="alert alert-danger">\n                            <div ng-repeat="errors in $ctrl.errors">\n                                <p><span ng-if="errors.line">{{errors.line}} : </span><span ng-if="errors.columnNumber" translate="{{ \'partial.upload.error.lineDetail\' }}" translate-values="{columnNumber : errors.columnNumber, lineNumber : errors.lineNumber}"></span> {{\'partial.upload.error.\' + errors.error | translate}}.</p>\n                            </div>\n                            <p>{{ \'partial.upload.error.errorMsg\' | translate }}</p>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n<div ng-show="$ctrl.assetMode === \'SELECT\'">\n    <p translate="asset.search.selectResult"></p>\n    <br />\n    <div class="table-responsive">\n        <table width="100%" cellpadding="0" cellspacing="0" border="0" class="table table-hover tablesorter">\n            <thead>\n                <tr>\n                    <th align="left">{{\'asset.search.label.assetType\' | translate}}</th>\n                    <th align="left">{{\'asset.search.label.description\' | translate}}</th>\n                    <th align="left" ng-if="$ctrl.criteria.assetTypes[0] === \'STOCK\'">\n                        {{\'word.currency\' | translate}}\n                    </th>\n                    <th align="left">{{\'asset.search.label.identifiers\' | translate}}</th>\n                    <th align="left">{{\'asset.search.label.quantity\' | translate}}</th>\n                    <th align="left">{{\'asset.search.label.eligible\' | translate}}</th>\n                    <th align="left">{{\'asset.search.label.checkbox\' | translate}}</th>\n                </tr>\n            </thead>\n            <tbody>\n                <tr ng-if="$ctrl.fetchedValidAsset.length > 1">\n                    <td></td>\n                    <td></td>\n                    <td ng-if="$ctrl.criteria.assetTypes[0] === \'STOCK\'"></td>\n                    <td></td>\n                    <td></td>\n                    <td></td>\n                    <td><input type="checkbox" ng-model="$ctrl.selectAll" ng-change="$ctrl.handleSelectAll()">&nbsp;{{\'word.selectAll\' | translate}}</td>\n                </tr>\n                <tr ng-click="$ctrl.selectAsset(asset)" ng-repeat="asset in $ctrl.fetchedValidAsset">\n                    <td align="left">{{\'asset.type.\' + asset.details.type | translate}}</td>\n                    <td align="left">{{asset.details.description}}</td>\n                    <td align="left" ng-if="$ctrl.criteria.assetTypes[0] === \'STOCK\'">\n                        {{asset.details.currencyType !== \'UNKNOWN\' ? asset.details.currencyType : \'\'}}\n                    </td>\n                    <td align="left"><position-id-review position-details="asset.details"></position-id-review></td>\n                    <td align="left">{{asset.quantity}}</td>\n                    <td align="left">{{\'word.yes\' | translate}}</td>\n                    <td><input type="checkbox" ng-model="asset.isChecked" ng-change="$ctrl.handleAsset(asset)"></td>\n                </tr>\n                <tr ng-repeat="asset in $ctrl.fetchedInValidAsset">\n                    <td align="left">{{\'asset.type.\' + asset.details.type | translate}}</td>\n                    <td align="left">{{asset.details.description}}</td>\n                    <td align="left" ng-if="$ctrl.criteria.assetTypes[0] === \'STOCK\'">\n                        {{asset.details.currencyType !== \'UNKNOWN\' ? asset.details.currencyType : \'\'}}\n                    </td>\n                    <td align="left"><position-id-review position-details="asset.details"></position-id-review></td>\n                    <td align="left">{{asset.quantity}}</td>\n                    <td align="left">{{\'word.no\' | translate}}</td>\n                    <td><input type="checkbox" ng-disabled = "true"></td>\n                </tr>\n            </tbody>\n        </table>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){n(1212)(e),n(1214)(e)}},function(e,t,n){e.exports=function(e){e.component("transactionModal",{template:n(1213),controller:["$translate","$filter","$window","currencyFilter","ACTIVE_CONTEXT","AmInterfaceService","ApplicationContext","FundingService","FundingNavigationService","ResourceService","PageService","NavigationService","ModalService","AlphaTestService","UserPlatformService","CsTicketService","PositionTransferService","NavigationAction","FileUploadService","CashMethodTextService","WiseTransferService","IS_MOBILE",function(t,n,a,r,i,o,s,l,c,u,d,p,g,f,m,v,h,b,y,D,E,x){var A=this,C=function(e,t,n,a){return{text:e,success:t,indent:n,desc:a}},T=function(e){var t=function(e){for(var t=o.getPendingItems(),n=0;n<t.length;++n){var a=t[n];if(a.id===e.toString())return a}}(e);t&&function(e){o.navigateToPendingItem(e),g.closeModal()}(t)};A.$onInit=function(){A.activeAction="",A.errors={},A.graph=[],A.successMsg="",A.isActionPending=!0,A.isDynamicFaqShown=!1,A.allowedExtensions=["pdf","png","jpg","jpeg"],A.maxFileSizeInMb=25,A.isWeb=m.isWeb();var x=function(n,a){if("ADD_ACCOUNT"===n)A.manualBankAcctNumber="",w("addBankAcctNumber");else{if(A.isTransactionLoading=!0,angular.isDefined(A.bankStatement)&&"APPROVE"===n){var r=new FormData;r.append("inquirySummary",t.instant("transaction.bank.statement.summary",{referenceNumber:A.transaction.transactionId}));var i=A.bankStatement,o=1;angular.forEach(i,function(e){r.append("document"+o++,e)}),r.append("transactionSourceType",A.transaction.sourceType),r.append("clientAccountId",A.transaction.accountId),r.append("transferParameters",angular.toJson(A.transaction.transferParameters?A.transaction.transferParameters:{})),r.append("transactionDate",A.transaction.requestDate),r.append("retailRequestId",A.transaction.id.webRequestId),y.uploadFileToUrl(r,e.SERVER_PATH+"/TransactionTicket/Inquiry").then(function(e){},function(e){A.bankStatementUploadError=e.data.errors})}u.update(AM_APP_ROOT+"/ClientTransactionReview/",{clientTransactionId:A.transaction.transactionId,clientTransactionStatus:n,transactionType:a,manualBankAcctNumber:A.manualBankAcctNumber}).then(function(e){"APPROVE_ALWAYS"===n&&angular.isDefined(A.manualBankAcctNumber)&&A.manualBankAcctNumber.length&&angular.isDefined(A.transaction.transferInstruction)&&(A.transaction.transferInstruction.beneficiaryBankAccount.bankAccountNumber.accountNumber=A.manualBankAcctNumber),A.activeAction=a+"."+n},function(e){"addBankAcctNumber"===A.activeAction&&I(),A.errors=e.data.errors}).finally(function(){A.isTransactionLoading=!1,A.isActionPending=!1,H()})}};A.calculateGraph=function(){if(A.graph=[],"DEPOSIT"===A.transaction.transferParameters.type){if("C"!==A.transaction.transactionId.charAt(0)){var e=A.transaction.transferParameters.method,n="DEPOSIT";"ACH"!==e&&"EFT"!==e&&"RFP"!==e&&"EDDA"!==e&&(n="NOTIFICATION");var a=t.instant("transaction.tracking.initiated."+n);A.graph.push(C(a,!0,!1,A.transaction.requestDate))}if("AVAILABLE"!==A.transaction.status&&!A.transaction.isLynxReview){var i=t.instant("transaction.tracking.received");A.graph.push(C(i,angular.isDefined(A.transaction.depositArrival),!1,A.transaction.depositArrival))}if(A.showExclamationIcon()){var o=t.instant("transaction.tracking.attention");o+='&nbsp;<i class="fa fa-exclamation-triangle text-warning"></i>',A.graph.push(C(o,!1,!1,A.transaction.depositArrival))}if(!A.transaction.isLynxReview){var s="AVAILABLE"===A.transaction.status,l=t.instant("transaction.tracking.available");A.graph.push(C(l,s,!1,A.transaction.creditedToEquity))}var c=function(e){return angular.isUndefined(e)||null===e||""===e};A.graph.sort(function(e,t){var n=c(e.desc),a=c(t.desc);return n||a?n&&!a?1:!n&&a?-1:0:parseInt(e.desc.replaceAll("-",""))-parseInt(t.desc.replaceAll("-",""))})}var u="RETURNED"===A.transaction.status;if("WITHDRAWAL"===A.transaction.transferParameters.type){var d,p;a=t.instant("transaction.tracking.initiated."+A.transaction.transferParameters.type);if(A.graph.push(C(a,!0,!1,A.transaction.requestDate)),"SETTLED"===A.transaction.status?(d=t.instant("transaction.tracking.transit.SETTLED"),p=!0):(d=t.instant("transaction.tracking.transit.SENT"),p="SENT"===A.transaction.status||angular.isDefined(A.transaction.gpiEvents)&&A.transaction.gpiEvents.length>0),A.graph.push(C(d,p,!1,A.transaction.debitedFromEquity)),angular.isDefined(A.transaction.gpiEvents)&&A.transaction.gpiEvents.length>0){for(var g=!1,f=0;f<A.transaction.gpiEvents.length;++f){var m=A.transaction.gpiEvents[f],v=A.getGpiBank(m),h=m.senderTimestampUtc;"UNKNOWN"!==m.status&&(h+="<br>",h+=t.instant("gpiEventStatus."+m.status)),h+="<br>",h+=r(m.amount.amount,m.amount.currencyType+" ");var b=A.getGpiFee(m);"-"!==b&&(h+='<span class="pipe">&middot;</span>',h+=t.instant("cashTransfer.label.fees")+": ",h+=b);var y=A.getGpiFxRate(m);"-"!==y&&(h+='<span class="pipe">&middot;</span>',h+=t.instant("word.exchangeRate")+": ",h+=y),m.finalEvent&&(g=!0),A.graph.push(C(v,!0,!m.finalEvent,h))}if(A.trackerFinalPointEnabled){if(u){var D=t.instant("transaction.tracking.complete"),E=t.instant("transaction.tracking.return.completed");A.graph.push(C(D,!0,!1,E))}else if(!g)if("CANCELED"!==A.transaction.status){D=t.instant("transaction.tracking.complete");A.graph.push(C(D,void 0,!1,!1))}else{var x=t.instant("transaction.tracking.cancelled");A.graph.push(C(x,!0,!1,!1))}}else if(g){if(u){D=t.instant("transaction.tracking.complete"),E=t.instant("transaction.tracking.return.completed");A.graph.push(C(D,!0,!1,E))}}else if("CANCELED"!==A.transaction.status){var D=t.instant("transaction.tracking.complete");A.graph.push(C(D,void 0,!1,!1))}else{x=t.instant("transaction.tracking.cancelled");A.graph.push(C(x,!0,!1,!1))}}else if(A.trackerFinalPointEnabled&&u){D=t.instant("transaction.tracking.complete"),E=t.instant("transaction.tracking.return.completed");A.graph.push(C(D,!0,!1,E))}else if(angular.isDefined(A.transaction.estimatedArrival)){i=t.instant("transaction.tracking.estimatedArrival");A.graph.push(C(i,A.transaction.pastArrivalEstimate,!1,A.transaction.estimatedArrival))}}A.graph.length>0&&A.graph[0].success&&A.graph[A.graph.length-1].success&&A.graph.forEach(function(e){return e.success=!0})},A.isSplitNotification=function(){return"FPS"===A.transaction.transferParameters.method||l.isWiseMethod(A.transaction.transferParameters.method)},A.isSplitScreen=function(){return!angular.isUndefined(A.transaction)&&(!angular.isDefined(A.transaction.destination)&&("INSTRUCTION_REVIEW"!==A.transaction.sourceType&&("WITHDRAWAL"===A.transaction.transferParameters.type?"CHECK"!==A.transaction.method:"DEPOSIT"===A.transaction.transferParameters.type&&(0!==A.graph.length&&(1!==A.graph.length||"AVAILABLE"!==A.transaction.status)))))},A.showAdditionalDates=function(){return"DEPOSIT"===A.transaction.transferParameters.type&&("RETURNED"!==A.transaction.status&&"REJECTED"!==A.transaction.status&&(A.transaction.availableForWithdrawalRestricted||A.transaction.availableForWithdrawalUnrestricted))},A.isWithdrawalDateSame=function(){var e=A.transaction.availableForWithdrawalRestricted,t=A.transaction.availableForWithdrawalUnrestricted;if(angular.isDefined(e)&&angular.isDefined(t)&&e===t)return!0},A.hasErrors=function(){return Object.keys(this.errors).length},A.getGpiBank=function(e){return angular.isDefined(e.bank)&&angular.isDefined(e.bank.bankName)&&e.bank.bankName.length>0?e.bank.bankName:angular.isDefined(e.bank)&&angular.isDefined(e.bank.routingNumbers)&&e.bank.routingNumbers.length>0?e.bank.routingNumbers[0].routingNumber:""},A.getGpiFee=function(e){if(angular.isUndefined(e.fees)||0===e.fees.length)return"-";var t=e.fees[e.fees.length-1];return 0===t.amount?"-":n("currency")(t.amount,t.currencyType+" ")},A.getGpiFxRate=function(e){return angular.isUndefined(e.fxRate)||0===e.fxRate?"-":e.fxPair+": "+e.fxRate},A.showExclamationIcon=function(){return angular.isDefined(A.transaction)&&"NEEDS_ATTENTION"===A.transaction.status},A.showPartialtransferOption=function(){return angular.isDefined(A.transaction)&&angular.isDefined(A.transaction.brokerResponse)&&A.transaction.brokerResponse.eligibleAssets.length>0&&A.transaction.brokerResponse.newRequestId<=0},A.resolve=function(){if(A.showExclamationIcon())if(8187===A.transaction.transferParameters.formNumber)c.goToPendingDepositTask(A.transaction.accountId,A.transaction.transferParameters.taskNumber),g.closeModal();else if(8181===A.transaction.transferParameters.formNumber){if(i===s.STANDALONE){var e=window.uploadPodFn,t=window[e];return g.closeModal(),void t(A.transaction.transferParameters.taskNumber)}T(A.transaction.transferParameters.taskNumber)}},A.getFaqFrameSrc=function(e){return"/lib/cstools/faq/#/content/"+e.faqId+"?isEmbedded=true&faqPreference=am-transaction-history"},A.getFaqTitle=function(e){var n="transaction.faq.config."+e.configId,a=t.instant(n);return a===n?e.title:a},A.isDynamicFaqApplicable=function(){return!!A.showWithdrawalEtaFaq()},A.showWithdrawalEtaFaq=function(){return!(!angular.isDefined(A.transaction.estimatedArrival)||"WITHDRAWAL"!==A.transaction.transferParameters.type||"SENT"!==A.transaction.status||A.transaction.pastArrivalEstimate)},A.isDocUploadEnabled=!1,f.fetch("REGAM-17105").then(function(e){e&&e.data&&e.data.isEnabled&&(A.isDocUploadEnabled=!0)});var S=function(){if(A.errors={},"cancel"===A.activeAction)u.delete(e.SERVER_PATH+A.transactionResource+"/Transaction/"+A.transaction.transactionId).then(function(e){o.finishPendingRequest(A.transaction.transactionId),g.setModalResult(A.activeAction),A.transaction=e.data},function(e){A.errors=e.data.errors}).finally(function(){I()});else if("modify"===A.activeAction)u.update(e.SERVER_PATH+A.transactionResource+"/Transaction/"+A.transaction.transactionId,A.updatedTransaction).then(function(e){g.setModalResult(A.activeAction),A.transaction=e.data,I()},function(e){A.transaction=e.data,A.errors=e.data.errors,angular.isUndefined(A.errors.validation)&&I()});else if("stop"===A.activeAction){var t={id:"StopPayment",path:"/funding.webapp/sequences/stoppayment/stopPayment.html",pageData:{transaction:A.transaction,sequenceParameters:{accountId:A.transaction.accountId}},skipFetch:!0};p.navigate(t),g.closeModal()}else if("resubmit"===A.activeAction)u.create(e.SERVER_PATH+A.transactionResource+"/Transaction/"+A.transaction.transactionId).then(function(e){g.setModalResult(A.activeAction),A.transaction=e.data},function(e){A.errors=e.data.errors}).finally(function(){I()});else if("help"===A.activeAction)M();else if("inquiry"===A.activeAction){A.isTransactionLoading=!0;var n=new FormData;if(n.append("inquirySummary",A.inquirySummary),n.append("inquiryDetails",A.inquiryDetails),!angular.isUndefined(A.inquiryDocuments)){var a=A.inquiryDocuments,r=1;angular.forEach(a,function(e){n.append("document"+r++,e)})}n.append("accountId",A.transaction.accountId),n.append("transferParameters",angular.toJson(A.transaction.transferParameters?A.transaction.transferParameters:{})),n.append("transactionDate",A.transaction.requestDate),n.append("cashierEntryId",A.transaction.id.cashieringId),n.append("retailRequestId",A.transaction.id.webRequestId),n.append("ibFundingMethod",A.transaction.ibFundingMethod),y.uploadFileToUrl(n,e.SERVER_PATH+"/TransactionTicket/Inquiry").then(function(e){angular.isUndefined(A.transaction.ticketNumbers)&&(A.transaction.ticketNumbers=[]),A.transaction.ticketNumbers.push(e.data),A.successMsg="transaction.success.inquiry",I()},function(e){angular.isUndefined(e.data.errors.documentFile)?(A.errors=e.data.errors,I()):A.docErrors=e.data.errors}).finally(function(){A.isTransactionLoading=!1})}else if("updateIra"===A.activeAction){var i={updatedContributionYear:A.updatedIraParameters.contributionYear.iraTaxYear};u.update(e.SERVER_PATH+A.transactionResource+"/Transaction/"+A.transaction.transactionId,i).then(function(e){A.successMsg="transaction.success.updateIra",A.transaction=e.data},function(e){A.errors=e.data.errors}).finally(function(){I()})}else"addBankAcctNumber"===A.activeAction&&x("APPROVE_ALWAYS",A.transaction.transferParameters.type)},I=function(){A.activeAction="",H()},w=function(e){A.activeAction=e,H(),"help"===A.activeAction&&a.scroll(0,0)},F=function(){w("cancel")},$=function(){w("stop")},k=function(){w("resubmit")},R=function(){A.updatedTransaction={type:A.transaction.transferParameters.type},"DEPOSIT"==A.transaction.transferParameters.type?(A.updatedTransaction.amount=A.transaction.transferParameters.moneyAmount.amount,A.updatedTransaction.esignRestricted=A.transaction.esignRestricted,A.updatedTransaction.method=A.transaction.transferParameters.method,angular.isDefined(A.transaction.transferInstruction)&&(A.updatedTransaction.beneficiaryBankAccount=A.transaction.transferInstruction.beneficiaryBankAccount),A.transaction.clientReferenceAllowed&&(A.updatedTransaction.clientReferenceAllowed=A.transaction.clientReferenceAllowed,A.updatedTransaction.clientReference=A.transaction.transferParameters.clientReference)):"POSITION_INBOUND"!=A.transaction.transferParameters.type&&"SRN_AU"!=A.transaction.transferParameters.method||!angular.isDefined(A.transaction.transferInstruction)||(A.updatedTransaction.contraBrokerAccount=A.transaction.transferInstruction.contraBrokerAccount),w("modify")};A.onUpdateIraTaxYear=function(){A.updatedIraParameters={},w("updateIra")},A.formattedAvailableForWithdrawalRestricted=function(){return l.getTzFormattedEdtDate(A.transaction.availableForWithdrawalRestricted)},A.formattedAvailableForWithdrawalUnrestricted=function(){return l.getTzFormattedEdtDate(A.transaction.availableForWithdrawalUnrestricted)};var N=function(){A.transaction.transferParameters.rejectedRequestId=A.transaction.brokerResponse.rejectedRequestId,A.transaction.transferParameters.full=!1,h.initiateTransfer(A.transaction.transferParameters,A.transaction.transferInstruction),g.closeModal()},P=function(){g.isModalOpen()&&g.closeModal(),v.openTicket(A.transaction.ticketNumbers[0],A.transaction.accountId)},_=function(){p.navigate({navigateAction:b.POPUP,path:"https://interactivebrokers.com/en/index.php?f=46352"})},B=function(){if(!angular.isUndefined(A.transaction.faqConfigs)&&A.transaction.faqConfigs.length)w("help");else{var t={transferParameters:A.transaction.transferParameters,transactionStatus:A.transaction.status,accountId:A.transaction.accountId};u.create(e.SERVER_PATH+"/TransactionTicket/FaqConfigs",t).then(function(e){A.transaction.faqConfigs=e.data,A.isDynamicFaqShown=A.isDynamicFaqApplicable(),A.transaction.faqConfigs.length||A.isDynamicFaqShown?w("help"):M()},function(e){M()})}},M=function(){var e="transaction.type."+(A.transaction.returnedEntry?"returned.":"")+A.transaction.transferParameters.type;A.inquirySummary=t.instant("transaction.inquiry.summary",{transactionType:t.instant(e),method:D.getMethodName(A.transaction.transferParameters)})+": "+A.transaction.transactionId,A.inquiryDetails="",A.showUploadFile=!1,A.inquiryDocuments=[],A.docErrors=[],"DEPOSIT"!==A.transaction.transferParameters.type||"WIRE"!==A.transaction.transferParameters.method&&"BILL_PAY"!==A.transaction.transferParameters.method||"PENDING"!==A.transaction.status||!A.isDocUploadEnabled?w("inquiry"):(A.showUploadFile=!0,w("inquiry"))},q=function(){return angular.isUndefined(A.modifyForm)||!A.modifyForm.$valid},O=function(){return angular.isUndefined(A.submitInquiryForm)||!A.submitInquiryForm.$valid||A.showUploadFile&&!(!angular.isUndefined(A.inquiryDocuments)&&A.inquiryDocuments.length>0)||A.isTransactionLoading},L=function(){return angular.isUndefined(A.manualBankAcctForm)||!A.manualBankAcctForm.$valid},U=function(){var e={autoSelect:A.transaction.accountId},t={sequenceParameters:{transferDetails:{transferParameters:A.transaction.transferParameters,instructionId:A.transaction.transferInstruction.instructionId,instructionType:A.transaction.transferInstruction.instructionType}}};p.menuNavigate("TransferFunds",t,e),g.closeModal()},H=function(){var e=[],n=m.isSimplifiedPlatform()||m.isIbkrMobile();if(A.transaction.isLynxReview||"INSTRUCTION_REVIEW"===A.transaction.sourceType)if("addBankAcctNumber"===A.activeAction)e=[{label:"clientTransaction.DEPOSIT.BANK_ACCT_NUM.APPROVE_ALWAYS",alignment:"right",fn:S,btnType:"primary",isDisabled:L},{label:"word.back",alignment:"left",fn:I}];else if(A.isActionPending)for(var a=A.transaction.transferParameters.type,r=A.transaction.allowedActions,i=function(t){var n={};"APPROVE_ALWAYS"===r[t]?n.label="clientTransaction."+a+"."+A.transaction.ibrokerReviewWhitelistIdentifierType+"."+r[t]:n.label="clientTransaction."+a+"."+r[t],n.fn=function(){x(r[t],a)},"REJECT"===r[t]?(n.alignment="left",n.btnType="default",n.btnIcon="fa fa-exclamation-triangle"):(n.alignment="right","APPROVE"!==r[t]&&(n.btnType="primary")),e.push(n)},o=0;o<r.length;o++)i(o);else e.push({label:"word.close",alignment:"right",fn:function(){g.closeModal("REVIEWED")}});else if(""!==A.activeAction)e="updateIra"===A.activeAction?[{label:"word.submit",alignment:"right",fn:S,btnType:"primary"},{label:"word.cancel",alignment:"left",fn:I}]:"modify"===A.activeAction?[{label:"word.submit",alignment:"right",fn:S,btnType:"primary",isDisabled:q},{label:"word.cancel",alignment:"left",fn:I}]:"help"===A.activeAction?[{label:"transaction.button.BROWSE_FAQ",alignment:"right",fn:_},{label:"transaction.button.MORE_HELP",alignment:"right",fn:S,btnType:"primary"},{label:"word.cancel",alignment:"left",fn:I}]:"inquiry"===A.activeAction?[{label:"transaction.inquiry.submit",alignment:"right",fn:S,btnType:"primary",isDisabled:O},{label:"word.cancel",alignment:"left",fn:I}]:[{label:"word.yes",alignment:"right",fn:S,btnType:"primary"},{label:"word.no",alignment:"left",fn:I}];else if(!angular.isUndefined(A.transaction.ticketNumbers)&&A.transaction.ticketNumbers.length?e.push({label:"transaction.button.VIEW_INQUIRY",alignment:"right",fn:P}):A.transaction.inquiryCreationAllowed&&e.push({label:"transaction.button.GET_HELP",alignment:"right",fn:B}),n||e.push({label:"word.print",alignment:"left",fn:d.print}),"CANCELED"!==A.transaction.status&&(A.transaction.cancelable&&e.push({label:"word.cancelRequest",alignment:"right",fn:F}),A.transaction.resubmitable&&e.push({label:"transaction.button.RESUBMIT",alignment:"right",fn:k}),A.transaction.stopable&&e.push({label:"transaction.button.STOP_PAYMENT",alignment:"right",fn:$}),A.transaction.modifiable&&e.push({label:"transaction.button.MODIFY",alignment:"right",fn:R}),A.showPartialtransferOption()&&e.push({label:"transaction.button.PARTIAL_TRANSFER",alignment:"right",fn:N}),"REJECTED"===A.transaction.status&&"EDDA"===A.transaction.transferParameters.method&&e.push({label:"transfer.resubmitTransfer",alignment:"right",fn:U}),"DEPOSIT"===A.transaction.transferParameters.type&&l.isWiseMethod(A.transaction.transferParameters.method))){var s=A.transaction.transferParameters.wiseParameters;if(s&&"OUTGOING_PAYMENT_SENT"===s.status){var c="NONE";e.push({label:function(){return"ERROR"===c?t.instant("transaction.button.RECEIPT_FAILED"):t.instant("transaction.button.RECEIPT")},alignment:"left",fn:function(){c="LOADING",E.downloadReceipt(A.transaction.transactionId,A.transaction.accountId).then(function(){return c="NONE"}).catch(function(){return c="ERROR"})},isDisabled:function(){return"NONE"!==c},btnIcon:function(){return"ERROR"===c?"fa-exclamation-triangle text-danger":"LOADING"===c?"fa-spin fa-spinner":"far fa-file-pdf"}})}}g.setModalButtons(e)},W=g.getModalData().transaction;A.transactionResource=g.getModalData().transactionResource||"",A.transactionResource.length>0&&(A.isTransactionLoading=!0,A.trackerFinalPointEnabled=!0,u.fetch(e.SERVER_PATH+A.transactionResource+"/Transaction/"+W.transactionId).then(function(e){A.transaction=e.data,A.calculateGraph(),H(),"modify"===d.getCurrentPage().serverParams.transactionMode&&(delete d.getCurrentPage().serverParams.transactionMode,A.transaction.modifiable&&R()),"NOT_CONFIRMED"===A.transaction.status&&A.transaction.confirmable&&(A.confirmRequest=function(){g.closeModal(),c.goToCashRequestConfirmation(A.transaction.accountId,A.transaction.id.webRequestId)})}).finally(function(){A.isTransactionLoading=!1})),A.isEligibleForViewInquiry=function(){return"VIEW_INQUIRY"!==A.transaction.cashieringWarning.action||angular.isDefined(A.transaction.ticketNumbers)&&A.transaction.ticketNumbers.length},A.isFundingWarningShown=function(){return angular.isDefined(A.transaction)&&A.transaction.cashieringWarning&&!m.isSimplifiedPlatform()&&!A.transaction.isLynxReview&&A.isEligibleForViewInquiry()},A.isActualWithdrawalAmountPresent=function(){return A.transaction&&A.transaction.actualWithdrawalAmount&&"UNKNOWN"!==A.transaction.actualWithdrawalAmount.currency},A.isRequestedWithdrawalAmountPresent=function(){return A.transaction&&A.transaction.requestedWithdrawalAmount&&"UNKNOWN"!==A.transaction.requestedWithdrawalAmount.currency},A.isWithdrawalAmountRevised=function(){return A.isActualWithdrawalAmountPresent()&&A.isRequestedWithdrawalAmountPresent()&&A.transaction.actualWithdrawalAmount.amount!==A.transaction.requestedWithdrawalAmount.amount},A.goToPendingItems=function(){o.navigateToPendingItems(),g.closeModal()},A.showAu10tixWarning=function(){return angular.isDefined(A.transaction)&&A.transaction.au10tixPending}}}]})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.isTransactionLoading"></loading-overlay>\n<div ng-class="{\'trans-track\' : $ctrl.activeAction !== \'help\' }" ng-show="!$ctrl.isTransactionLoading">\n    \x3c!-- Status heading --\x3e\n    <div class="row">\n        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n            <div ng-if="$ctrl.activeAction === \'\' && !$ctrl.hasErrors()">\n                <p class="text-center" ng-if="$ctrl.showExclamationIcon(transaction)"><i class="fa fa-3x fa-exclamation-triangle text-warning"></i></p>\n                <h3 ng-bind-html="$ctrl.transaction.statusDesc | renderHTML" class="text-center text-dark"></h3>\n                <div ng-if="$ctrl.transaction.alertText" ng-bind-html="$ctrl.transaction.alertText | renderHTML" class="alert alert-info text-center"></div>\n                <p ng-if="$ctrl.transaction.statusSubText && !$ctrl.transaction.confirmable" ng-bind-html="$ctrl.transaction.statusSubText | renderHTML" class="text-center"></p>\n                <p class="text-center" ng-if="$ctrl.showExclamationIcon(transaction)">\n                    <br/>\n                    <am-button on-click="$ctrl.resolve()" btn-text="{{\'word.resolveIssue\' | translate}}" btn-type="primary" btn-size="large"></am-button>\n                </p>\n                <div ng-if="$ctrl.transaction.confirmable" class="alert alert-info">\n                    <div class="row">\n                        <div class="col-8">\n                            <p ng-bind-html="$ctrl.transaction.statusSubText | renderHTML"></p>\n                        </div>\n                        <div class="col-4">\n                            <p class="text-right"><am-button on-click="$ctrl.confirmRequest()" btn-text="{{\'word.confirmRequest\' | translate}}" btn-type="primary" btn-size="large"></am-button></p>\n                        </div>\n                    </div>\n                </div>\n                <div ng-if="$ctrl.showAu10tixWarning()" class=" alert alert-info">\n                    <div class="row align-items-center">\n                        <div class="col-8">\n                            <p translate="transaction.warning.au10tix" translate-values="{strongStart: \'<strong>\', strongEnd: \'</strong>\'}"></p>\n                        </div>\n                        <div ng-if="$ctrl.isWeb" class="col-4">\n                            <p class="text-right"><am-button on-click="$ctrl.goToPendingItems()" btn-text="{{\'transaction.button.PENDING_ITEMS\' | translate}}" btn-type="primary" btn-size="large"></am-button></p>\n                        </div>\n                    </div>\n                </div>\n                <p class="text-center" ng-if="$ctrl.successMsg">{{ $ctrl.successMsg | translate }}</p>\n            </div>\n            <div ng-if="$ctrl.activeAction === \'\' && $ctrl.hasErrors()">\n                <large-error>\n                    <h3 class="text-center text-dark" ng-repeat="(key, value) in $ctrl.errors">\n                        {{\'transaction.error.\' + key | translate}}\n                    </h3>\n                </large-error>\n            </div>\n            <div ng-if="$ctrl.activeAction !== \'\'">\n                <h3 class="text-center text-dark">\n                    {{\'transaction.confirm.\' + $ctrl.activeAction + \'.title\' | translate}}\n                </h3>\n                <p class="text-center" ng-if="$ctrl.activeAction === \'WITHDRAWAL.APPROVE\' && $ctrl.bankStatementUploadError">{{ \'transaction.error.bankStatementUpload\' | translate }}</p>\n                <p ng-if="$ctrl.activeAction === \'stop\'" class="text-center" translate="transaction.confirm.stop.subtext">\n                </p>\n                <p ng-if="$ctrl.activeAction === \'stop\'"  class="text-center" translate="transaction.confirm.stop.subtext2" translate-values="{ linkStart: \'<a href=&quot;https://www.interactivebrokers.com/en/index.php?f=14718&quot; target=&quot;_blank&quot;><strong>\', linkEnd: \'</strong></a>\' }">\n                </p>\n            </div>\n            <br>\n            <br>\n        </div>\n    </div>\n\n    <div ng-switch on="$ctrl.activeAction">\n        <div ng-switch-when="modify" ng-form="$ctrl.modifyForm">\n            <transaction-modify-form transaction="$ctrl.updatedTransaction"></transaction-modify-form>\n        </div>\n        <div ng-switch-when="updateIra" ng-form="$ctrl.iraTransactionUpdateForm">\n            <ira-transaction-update-form transaction="$ctrl.transaction" updated-parameters="$ctrl.updatedIraParameters"></ira-transaction-update-form>\n        </div>\n\t\t<div ng-switch-when="help">\n\t\t\t<div class="accordion accordion-faq-ibot" id="accordionFAQName">\n                <div class="accordion-item" ng-if="$ctrl.showWithdrawalEtaFaq()">\n                    <h2 class="accordion-header" id="FAQName-eta">\n                        <button class="accordion-button" type="button" data-toggle="collapse" data-target="#collapseFAQName-eta" aria-expanded="true" aria-controls="collapseFAQName-eta" translate="transaction.faq.withdrawalEta.title"></button>\n                    </h2>\n                    <div id="collapseFAQName-eta" class="accordion-collapse collapse show" aria-labelledby="FAQName-eta" data-parent="#accordionFAQName">\n                        <div class="accordion-body">\n                            <div class="mt-10">\n                                <p class="text-center" translate="transaction.faq.withdrawalEta.desc" translate-values="{arrivalDate: $ctrl.transaction.estimatedArrival}" translate-compile></p>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\t\t\t\t<div class="accordion-item" ng-repeat="faqConfig in $ctrl.transaction.faqConfigs track by $index">\n\t\t\t\t\t<h2 class="accordion-header" id="{{\'FAQName-\' + $index}}">\n\t\t\t\t\t\t<button class="accordion-button" ng-class="{\'collapsed\' : (!$first || $ctrl.isDynamicFaqShown)}" type="button" data-toggle="collapse" data-target="#{{\'collapseFAQName-\' + $index}}" aria-expanded="{{$first && !$ctrl.isDynamicFaqShown}}" aria-controls="{{\'collapseFAQName-\' + $index}}">{{ $ctrl.getFaqTitle(faqConfig) }}</button>\n\t\t\t\t\t</h2>\n\t\t\t\t\t<div id="{{\'collapseFAQName-\' + $index}}" class="accordion-collapse collapse" ng-class="{\'show\' : ($first && !$ctrl.isDynamicFaqShown)}" aria-labelledby="{{\'FAQName-\' + $index}}" data-parent="#accordionFAQName">\n\t\t\t\t\t\t<div class="accordion-body">\n\t\t\t\t\t\t\t<load-iframe name="{{\'faqConfigFrame\' + $index}}" url="$ctrl.getFaqFrameSrc(faqConfig)" method="GET" frame-height="400"></load-iframe>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n        <div ng-switch-when="inquiry" ng-form="$ctrl.submitInquiryForm">\n            <submit-inquiry-form transaction="$ctrl.transaction" inquiry-summary="$ctrl.inquirySummary" inquiry-details="$ctrl.inquiryDetails" inquiry-documents="$ctrl.inquiryDocuments" doc-errors="$ctrl.docErrors" show-upload-file="$ctrl.showUploadFile"></submit-inquiry-form>\n        </div>\n        <div ng-switch-when="addBankAcctNumber" ng-form="$ctrl.manualBankAcctForm">\n            <manual-bank-acct-form manual-bank-acct-number="$ctrl.manualBankAcctNumber"></manual-bank-acct-form>\n        </div>\n        <div ng-switch-default>\n            <transaction-warning ng-if="$ctrl.isFundingWarningShown()" transaction="$ctrl.transaction"></transaction-warning>\n            <div ng-if="$ctrl.isSplitScreen()">\n            \n                <div class="row">\n                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-6">\n                        <div class="trans-chart">\n                            <h5>{{\'transaction.heading.tracking\' | translate}}</h5>\n                            <br>\n                            <div class="trans-bullets">\n                                <div class="row" ng-repeat="point in $ctrl.graph" ng-class="{ \'success\' : point.success, \'indent\' : point.indent }">\n                                    <div class="bullet">\n                                        <p><i class="fa fa-circle"></i></p>\n                                    </div>\n                                    <div class="details">\n                                        <p>\n                                            <span ng-bind-html="point.text | renderHTML"></span>\n                                            <br>\n                                            <span ng-if="point.desc" ng-bind-html="point.desc | renderHTML"></span>\n                                        </p>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-6">\n                        <div class="trans-details">\n                            <h5>{{\'transaction.heading.details\' | translate}}</h5>\n                            <br>\n                            <div class="form-review">\n                                <transaction-review ng-if="!$ctrl.isTransactionLoading" transaction="$ctrl.transaction" on-update-ira-tax-year="$ctrl.onUpdateIraTaxYear" display-options="{showDates: false, isWithdrawalAmountRevised: $ctrl.isWithdrawalAmountRevised()}"></transaction-review>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                \n            \n                <div class="row">\n                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n                        <div ng-if="$ctrl.showAdditionalDates()">\n                            <hr>\n                            <h6>{{\'transaction.heading.additionalDates\' | translate}}</h6>\n                            \n                            <div ng-if="$ctrl.transaction.transferParameters.method === \'ACH\' && !$ctrl.isWithdrawalDateSame()">\n                            \t<p ng-if="$ctrl.transaction.availableForWithdrawalRestricted" translate="transaction.desc.dateAvailableForWithdrawalOriginalDesc" translate-values="{availableForWithdrawalDate: $ctrl.formattedAvailableForWithdrawalRestricted()}" translate-compile></p>\n                            \t<p ng-if="$ctrl.transaction.availableForWithdrawalUnrestricted" translate="transaction.desc.dateAvailableForWithdrawalOtherDesc" translate-values="{availableForWithdrawalDate: $ctrl.formattedAvailableForWithdrawalUnrestricted()}" translate-compile></p>\n                            </div>\n\n                            <div ng-if="$ctrl.transaction.transferParameters.method !== \'ACH\' || $ctrl.isWithdrawalDateSame() ">\n                                <p ng-if="$ctrl.transaction.availableForWithdrawalUnrestricted " translate="transaction.desc.dateAvailableForWithdrawalDesc" translate-values="{availableForWithdrawalDate: $ctrl.formattedAvailableForWithdrawalUnrestricted()}" translate-compile></p>\n                            </div>\n                                                  \n                        </div>\n                    </div>\n                </div>\n\n            </div>\n        \n            <div ng-if="!$ctrl.isSplitScreen()">\n                \x3c!-- Transaction details --\x3e\n                <div class="row">\n                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n                        <transaction-review ng-if="!$ctrl.isTransactionLoading" transaction="$ctrl.transaction" on-update-ira-tax-year="$ctrl.onUpdateIraTaxYear" display-options="{showDates: true, isWithdrawalAmountRevised: $ctrl.isWithdrawalAmountRevised()}"></transaction-review>\n                        <div class="form-group" ng-if="$ctrl.transaction.sourceType === \'INSTRUCTION_REVIEW\' && $ctrl.activeAction ===\'\'">\n                            <div class="row">\n                                <div class="col-xs-12 col-sm-6 col-md-6 col-lg-4">\n                                    <label class="control-label">{{\'partial.upload.bankStatement\' | translate}}</label>\n                                </div>\n                                <div class="col-xs-12 col-sm-6 col-md-6 col-lg-8">\n                                    <am-file-input name="bankStatementUpload" ng-model="$ctrl.bankStatement" allowed-extensions="$ctrl.allowedExtensions" max-size="$ctrl.maxFileSizeInMb * 1000000" multiple="false"></am-file-input>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                \n                \x3c!-- Notification Destination --\x3e\n                <div ng-if="$ctrl.transaction.destination" class="row">\n                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n                        <hr ng-if="::$ctrl.isSplitNotification()">\n                        <notification-destination destination="::$ctrl.transaction.destination"></notification-destination>\n                    </div>\n                </div>\n\n                \x3c!-- REGAM-15158 --\x3e\n                <div ng-if="$ctrl.transaction.transferParameters.method === \'MOBILE_CHECK\'" class="row">\n                    <div class="col-12">\n                        <p class="text-small text-gray" translate="transfer.warning.deposit.thirdParty" translate-values="{ linkStart: \'<a href=&quot;https://www.interactivebrokers.com/lib/cstools/faq/#/content/28221565?articleId=69650265&quot; target=&quot;_new&quot;>\', linkEnd: \'</a>\' }"></p>\n                    </div>\n                </div>\n\n                <div class="row" ng-if="$ctrl.showPartialtransferOption()">\n                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n                        <hr>\n                        <h6>{{\'transaction.status.desc.brokerResponse\' | translate}}</h6>\n                        <ul>\n                            <li ng-repeat="nonTransferableAsset in $ctrl.transaction.brokerResponse.nonTransferableAssets">{{nonTransferableAsset}}</li>\n                        </ul>\n                    </div>\n                </div>\n            </div>\n            \n        </div>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("transactionRedirectModal",{template:n(1215),controller:["ModalService","NavigationService",function(e,t){var n=this;n.closeModal=function(){e.closeModal()},n.redirectToTransactionHistory=function(){n.closeModal(),t.menuNavigate("TransactionHistory")},n.$onInit=function(){e.setModalButtons([{label:"word.no",alignment:"right",fn:n.closeModal,btnType:"default"},{label:"word.yes",alignment:"left",fn:n.redirectToTransactionHistory,btnType:"primary"}])}}]})}},function(e,t){e.exports="<p>{{ 'transaction.note.redirectToTransactionHistory' | translate }}</p>"},function(e,t,n){e.exports=function(e){n(1217)(e),n(1219)(e)}},function(e,t,n){e.exports=function(e){e.component("deleteRecurringInvestmentModal",{template:n(1218),controller:["ModalService","ResourceService","$filter",function(t,n,a){var r=this,i=function(e,n){var a={status:e,cancelDate:n};t.setModalResult(a)},o=function(){return(angular.isUndefined(r.cancelImmediately)||!1===r.cancelImmediately)&&angular.isUndefined(r.cancelDate)};r.closeModal=function(){r.isRedirect?history.back():t.closeModal()};var s=function(){var e=[];"PENDING"===r.state?(e.push({label:"word.back",alignment:"left",fn:r.closeModal,btnClass:"btn-default"}),e.push({label:"recurringInvestment.cancel.confirm",alignment:"right",fn:l,btnClass:"btn-danger",isDisabled:o})):e.push({label:"word.done",alignment:"right",fn:t.closeModal,btnType:"primary"}),t.setModalButtons(e)};r.toggleCancelDate=function(){r.cancelImmediately?r.cancelDate=a("date")(new Date,"yyyy-MM-dd"):r.cancelDate=void 0},r.editRecurringInvestment=function(){r.state="EDIT",i(r.state),t.closeModal()};var l=function(){r.isLoading=!0,function(){if(angular.isDefined(r.cancelDate)&&!r.cancelImmediately){var t=a("date")(new Date,"yyyy-MM-dd");r.cancelImmediately=t===r.cancelDate}return angular.isDefined(r.cancelImmediately)&&r.cancelImmediately?n.delete(e.SERVER_PATH+"/RecurringInvestment/",{schedTransId:r.recurringInvestment.schedTransId}).then(function(e){r.state="DELETE_SUCCESS",i(r.state)},function(e){r.state="ERROR",i(r.state)}):angular.isDefined(r.cancelDate)?n.update(e.SERVER_PATH+"/RecurringInvestment/",{schedTransId:r.recurringInvestment.schedTransId,endDate:r.cancelDate}).then(function(e){r.state="EDIT_DATE_SUCCESS",i(r.state,r.cancelDate)},function(e){r.errors=e.data.errors,angular.isDefined(r.errors.cancelDate)?(r.isDateError=!0,r.isMaximumDateError="maximum_date"===r.errors.cancelDate):(r.state="ERROR",i(r.state))}):void 0}().finally(function(){s(),r.isLoading=!1})};r.$onInit=function(){r.isLoading=!0,r.state="PENDING",r.recurringInvestment=t.getModalData().recurringInvestment,r.rules=t.getModalData().rules,r.isRedirect=t.getModalData().isRedirect,r.assetDescription=r.recurringInvestment.positionDetails.description,s(),r.isLoading=!1}}]})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.isLoading"></loading-overlay>\n\n<div ng-show="$ctrl.state === \'PENDING\'" ng-form="$ctrl.deleteRecurringInvestmentForm">\n    <p translate="recurringInvestment.cancel.text1" translate-values="{ \'boldStart\' : \'<strong>\', \'boldEnd\' : \'</strong>\', \'assetDescription\' : $ctrl.assetDescription}"></p>\n    <p translate="recurringInvestment.cancel.text2" translate-values="{\'assetDescription\' : $ctrl.assetDescription}"></p>\n    <br />\n    <div class="form-group">\n        <generic-form-data name="cancelDate" label-text="{{\'recurringInvestment.label.cancelDate\' | translate}}" error-prefix="recurringInvestment.cancelDate.error.">\n            <am-date-picker selected-date="$ctrl.cancelDate" min-date="$ctrl.rules.minCancelDate" max-date="$ctrl.rules.maxCancelDate" is-disabled="$ctrl.cancelImmediately" is-required="true"></am-date-picker>\n        </generic-form-data>\n        <br>\n        <div class="row">\n            <div class="col-xs-12 col-sm-6 col-md-6 col-lg-8">\n                <div class="form-group form-icheck">\n                    <input type="checkbox" class="form-check-input" ng-model="$ctrl.cancelImmediately" ng-change="$ctrl.toggleCancelDate()" i-check />\n                    <label class="form-check-label">\n                        {{\'word.effectiveImmediately\' | translate}}\n                    </label>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <p class="etxt-small text-gray"> {{\'recurringInvestment.cancel.text3\' | translate}} <a href="javascript:void(0);" target="_self" ng-click="$ctrl.editRecurringInvestment()" translate="recurringInvestment.cancel.text4"></a></p>\n\n    <div ng-if="$ctrl.isDateError ">\n        <br />\n        <div class="row">\n            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n                <div class="alert alert-danger">\n                    <p ng-if="!$ctrl.isMaximumDateError">{{\'recurringInvestment.cancel.minDate\' | translate}}</p>\n                    <p ng-if="$ctrl.isMaximumDateError">{{\'field.error.maximum_date\' | translate}}</p>\n                </div>\n            </div>\n        </div>\n    </div>\n\n</div>\n\n<div ng-show="$ctrl.state === \'ERROR\'">\n    <div class="row">\n        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n            <div class="alert alert-danger">\n                <p>{{\'recurringInvestment.cancel.error\' | translate}}</p>\n            </div>\n        </div>\n    </div>\n</div>\n\n<div ng-show="$ctrl.state === \'DELETE_SUCCESS\' || $ctrl.state === \'EDIT_DATE_SUCCESS\'">\n    <div class="row">\n        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n            <div class="alert alert-success bg-success-5 bc-success">\n                <p class="mb-0 text-font-color"><i class="fa-solid fa-circle-check text-success me-10"></i>{{\'recurringInvestment.cancel.success\' | translate}}</p>\n            </div>\n        </div>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("viewRecurringInvestmentDetails",{template:n(1220),controller:["ModalService","ResourceService","$filter","$translate",function(t,n,a,r){var i=this;i.$onInit=function(){i.isLoading=!0,i.isError=!1,i.recurringInvestment=t.getModalData().recurringInvestment,i.isTradeFailedOrCancelled=function(e){return e.status.indexOf("Failed")>-1||e.status.indexOf("Canceled")>-1},i.getFormattedDate=function(e){return a("date")(new Date(e),"yyyy-MM-dd")},i.getStatusText=function(e){return"Filled"===e.status?e.status:"Update"===e.status?o(e.memo):"Pending"===e.status?r.instant("recurringInvestment.label.orderSubmitted"):e.status+" - "+o(e.memo)};var o=function(e){var t=r.instant("recurringInvestment.label.endless");return e?e.replaceAll("31-DEC-99",t):""};n.fetch(e.SERVER_PATH+"/RecurringInvestment/TradeDetails",{schedTransId:i.recurringInvestment.schedTransId}).then(function(e){i.tradeDetails=e.data.tradeDetails},function(e){i.errors=e.data.errors,i.isError=angular.isDefined(i.errors.internal)}).finally(function(){i.isLoading=!1}),t.setModalButtons([{label:"word.done",alignment:"right",fn:t.closeModal,btnType:"primary"}])}}]})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.isLoading"></loading-overlay>\n<div ng-if="!$ctrl.isError" class="form-group">\n    <span>\n        {{\'asset.search.label.description\' | translate}}: <asset-desc-review asset-details="$ctrl.recurringInvestment.positionDetails"></asset-desc-review>\n    </span>\n    <br />\n    <position-id-review position-details="$ctrl.recurringInvestment.positionDetails"></position-id-review>\n\n    <br />\n    <div clas="row" ng-if="$ctrl.tradeDetails.length === 0">\n        <div class="col-12">\n            <div class="alert-no-results">\n                <p>{{ \'recurringInvestment.text.noTrades\' | translate}}</p>\n            </div>\n        </div>\n    </div>\n    <div class="row" ng-if="$ctrl.tradeDetails.length">\n        <div class="col-12 table-responsive pre-scrollable">\n            <table width="100%" cellpadding="0" cellspacing="0" border="0" class="table">\n                <thead>\n                    <tr>\n                        <th align="left">{{\'word.date\' | translate}}</th>\n                        <th align="left">{{\'word.status\' | translate}}</th>\n                        <th align="center">{{\'word.quantity\' | translate}}</th>\n                        <th align="center">{{\'word.price\' | translate}}</th>\n                        <th align="center">{{\'word.commission\' | translate}}</th>\n                        <th align="center">{{\'word.amount\' | translate}}</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    <tr ng-repeat="trade in $ctrl.tradeDetails" ng-class="{ \'alert alert-danger\' : $ctrl.isTradeFailedOrCancelled(trade) }">\n                        <td valign="middle">{{ $ctrl.getFormattedDate(trade.instructionDate) }}</td>\n                        <td valign="middle">{{ $ctrl.getStatusText(trade) }}<br />\n                        </td>\n                        <td align="center" valign="middle">\n                            <div ng-if="trade.quantity === 0">\n                                <span>--</span>\n                            </div>\n                            <div ng-if="trade.quantity !== 0">\n                                {{trade.quantity}}\n                            </div>\n                        </td>\n                        <td align="center" valign="middle">\n                            <div ng-if="trade.price === 0">\n                                <span>--</span>\n                            </div>\n                            <div ng-if="trade.price !== 0">\n                                {{trade.price}}\n                            </div>\n                        </td>\n                        <td align="center" valign="middle">\n                            <div ng-if="trade.commission === 0">\n                                <span>--</span>\n                            </div>\n                            <div ng-if="trade.commission !== 0">\n                                {{trade.commission}}\n                            </div>\n                        </td>\n                        <td align="center" valign="middle">\n                            <div ng-if="trade.amount === 0">\n                                <span>--</span>\n                            </div>\n                            <div ng-if="trade.amount !== 0">\n                                {{trade.amount}} <span ng-if="trade.currency && trade.currency !== \'UNKNOWN\'">{{trade.currency}}</span>\n                            </div>\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n    </div>\n</div>\n<div class="row" ng-if="$ctrl.isError">\n    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n        <div class="alert alert-danger">\n            <p>{{\'internal.error.\' + $ctrl.errors[\'internal\'] | translate}}</p>\n        </div>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){n(1222)(e)}},function(e,t,n){e.exports=function(e){e.component("wiseRegistrationModal",{template:n(1223),controller:["$translate","$window","WiseTransferService","ModalService",function(e,t,n,a){var r=this,i={alignment:"left",btnType:"default",fn:a.closeModal,label:"word.close",isDisabled:function(){return r.loading}},o=function(){a.setModalButtons([i]),r.loading=!0,n.register().then(function(t){r.regInfo=t.data.regInfo,r.regInfo&&r.regInfo.registerUrl?(r.state="LINK",a.setTitle(e.instant("transfer.wise.registration.registerTitle")),a.setModalButtons([])):(r.state="ERROR",r.regInfo&&822===r.regInfo.errorCode&&(a.setTitle(e.instant("transfer.wise.registration.alreadyRegisteredTitle")),a.setModalButtons([])))}).catch(function(){r.state="ERROR"}).finally(function(){r.loading=!1})};r.$onInit=function(){r.authInfo=a.getModalData().authInfo,r.state="CONSENT",r.register=function(){a.closeModal(t.open(r.regInfo.registerUrl,"wiseLink"))},r.link=function(){a.closeModal(t.open(r.authInfo.authorizeUrl,"wiseLink"))},a.setModalButtons([i,{alignment:"right",btnType:"primary",fn:o,label:"word.continue",isDisabled:function(){return!r.consent||r.loading}}])}}]})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.loading"></loading-overlay>\n\n<div class="row">\n    <div class="col">\n        <div ng-if="$ctrl.state === \'CONSENT\'">\n            <p>{{\'transfer.wise.registration.pii\' | translate}}</p>\n            <br>\n            <input ng-model="$ctrl.consent" type="checkbox" i-check />&nbsp;{{\'transfer.wise.registration.piiConsent\' | translate}}\n        </div>\n        \n        <div ng-if="$ctrl.state === \'LINK\'" class="text-center">\n            <p>{{\'transfer.wise.registration.ready\' | translate}}</p>\n            <br>\n            <a class="btn btn-primary" href="javascript:void(0)" ng-click="$ctrl.register()">{{\'transfer.wise.registration.registerButton\' | translate}}</a>\n        </div>\n        \n        <div ng-if="$ctrl.state === \'ERROR\'">\n            <div ng-if="$ctrl.regInfo.errorCode === 822" class="text-center">\n                <p>{{\'transfer.wise.registration.alreadyRegistered\' | translate}}</p>\n                <br>\n                <a class="btn btn-primary" href="javascript:void(0)" ng-click="$ctrl.link()">{{\'transfer.wise.linkButton\' | translate}}</a>\n            </div>\n            \n            <div ng-if="$ctrl.regInfo.errorCode !== 822">\n                <div class="alert alert-danger">\n                    <p>{{\'internal.error.request_process\' | translate}}</p>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'},function(e,t,n){e.exports=function(e){n(1225)(e),n(1227)(e)}},function(e,t,n){e.exports=function(e){e.component("brokerGiftSharesCsvUploadModal",{template:n(1226),controller:["ModalService","FileUploadService",function(t,n){var a=this;a.rows=[];a.$onInit=function(){var e;a.isError=!1,a.isSearchInProgress=!1,a.allowedExtensions=["txt","csv"],a.maxFileSizeInMb=1,a.documentSubmissionForm={},a.totalAvailableQuantity=t.getModalData().totalAvailableQuantity,a.assetMode="UPLOAD",(e=[]).push({label:"word.upload",alignment:"right",fn:a.loadDataFromUploadFile,btnType:"primary",isDisabled:a.isSearchDisabled}),t.setModalButtons(e)};a.isSearchDisabled=function(){return a.isSearchInProgress},a.loadDataFromUploadFile=function(){if(document.getElementById("csvFile").files[0]){a.isSearchInProgress=!0;var r=document.getElementById("csvFile").files[0];if(function(e){return a.allowedExtensions[0]===e||a.allowedExtensions[1]===e}(r.name.split(".").pop())){var i=new FormData;i.append("csvFile",r),i.append("totalAvailableQuantity",a.totalAvailableQuantity),(a.activeAssetRequest=n.uploadFileToUrl(i,e.SERVER_PATH+"/BrokerGiftShares/BrokerGiftSharesCsvUpload")).then(function(e){a.errors=e.data.csvError,a.rows=e.data.rows,a.errors?a.isError=!0:a.isError=!1}).finally(function(){a.activeAssetRequest=null,a.isError||(a.assetMode="HIDE",a.isSearchInProgress=!1,t.closeModal(a.rows)),a.isSearchInProgress=!1})}else a.errors=[{error:"fileNotAllowed"}],a.isError=!0,a.isSearchInProgress=!1}else a.errors=[{error:"fileNotFound"}],a.isError=!0},a.$onDestroy=function(){angular.isDefined(a.activeAssetRequest)&&null!==a.activeAssetRequest&&a.activeAssetRequest.cancel()}}]})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.isSearchInProgress"></loading-overlay>\n\n<div ng-show="$ctrl.assetMode === \'UPLOAD\'">\n<div class="row">\n    <div class="col-xs-12 col-sm-12 col-md-12">\n        <p>{{\'partial.upload.description\' | translate}}</p>\n        <ul class="paralist">\n        <li>\n            {{\'partial.upload.BrokerGiftShares\' | translate}}\n        </li>\n        </ul>\n        <br>\n        <br>\n    </div>\n    <div class="form-group">\n        <div class="row">\n            <div class="col-xs-12 col-sm-6 col-md-6 col-lg-4">\n                <label class="control-label">{{\'partial.upload.browseFile\' | translate}}</label>\n            </div>\n            <div class="col-xs-12 col-sm-6 col-md-6 col-lg-4">\n                <am-file-input name="csvFile" ng-model="$ctrl.csvSubmitForm.document" is-required="true" max-size="$ctrl.maxFileSizeInMb * 1000000" allowed-extension="$ctrl.allowedExtensions" multiple="false"></am-file-input>\n            </div>\n        </div>\n        <div class="row" ng-if="$ctrl.isError">\n        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n            <div class="alert alert-danger">\n            <div ng-repeat="errors in $ctrl.errors">\n                <p><span ng-if="errors.line">{{errors.line}} : </span><span ng-if="errors.lineNumber && !errors.columnNumber" translate="{{ \'partial.upload.error.lineDetailWithoutColumn\' }}" translate-values="{lineNumber : errors.lineNumber}"></span>\n                <span ng-if="errors.columnNumber" translate="{{ \'partial.upload.error.lineDetailWithColumn\' }}" translate-values="{columnNumber : errors.columnNumber, lineNumber : errors.lineNumber}"></span> {{\'partial.upload.error.\' + errors.error | translate}}.</p>\n            </div>\n                <p>{{ \'partial.upload.error.errorMsg\' | translate }}</p>\n            </div>\n        </div>\n    </div>\n    </div>\n</div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("brokerGiftSharesHistoryModal",{template:n(1228),controller:["ModalService","ResourceService",function(e,t){var n=this;n.$onInit=function(){n.isSearchInProgress=!1,n.retailRequestId=e.getModalData().retailRequestId,n.fromAccount=e.getModalData().fromAccount,n.data=e.getModalData().data,n.symbol=e.getModalData().symbol,n.requestState=e.getModalData().state,n.getAlertClass=function(e){return"FAILED"===e?"alert alert-danger":"SUCCESSFUL"===e?"alert alert-success":"alert alert-gray"}}}]})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.isSearchInProgress"></loading-overlay>\n\n<div ng-if="$ctrl.data && $ctrl.data.length > 0" class="row">\n\n    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n            <span>\n                <h4>{{\'brokerGiftShares.history.giftDetailsHeader\' | translate}}</h4>\n            </span>\n        </div>\n        <div class="padding-top-25">&nbsp;</div>\n    </div>\n    <div class="padding-top-25 col-xs-12 col-sm-12 col-md-12 col-lg-12">\n        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n            <span>\n                {{\'brokerGiftShares.history.fromAccount\' | translate}}: {{$ctrl.fromAccount}}\n            </span>\n        </div>\n        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n            <span>\n                {{\'brokerGiftShares.history.symbol\' | translate}}: {{$ctrl.symbol}}\n            </span>\n        </div>\n        <div class="padding-top-25">&nbsp;</div>\n    </div>\n    <div class="padding-top-25">&nbsp;</div>\n    <div class="padding-top-25 col-xs-12 col-sm-12 col-md-12 col-lg-12">\n        <table width="100%" cellpadding="0" cellspacing="0" border="0" class="table">\n            <thead>\n                <tr>\n                    <th width="25%" valign="middle">\n                        {{\'brokerGiftShares.history.clientAccount\' | translate}}\n                    </th>\n                    <th width="20%" valign="middle">\n                        {{\'brokerGiftShares.upload.quantity\' | translate}}\n                    </th>\n                    <th width="20%" valign="middle">\n                        {{\'brokerGiftShares.history.columnHeader.status\' | translate}}\n                    </th>\n                    <th ng-if="$ctrl.requestState === \'REJECTED\'" valign="middle">\n                        {{\'word.error\' | translate}}\n                    </th>\n                 </tr>\n            </thead>\n            <tbody>\n                <tr ng-repeat="dataRow in $ctrl.data">\n                    <td align="left" valign="middle">\n                        {{dataRow.accountId}}\n                    </td>\n                    <td align="left" valign="middle">\n                        {{dataRow.quantity}}\n                    </td>\n                    <td align="left" valign="middle">\n                        {{dataRow.status}}\n                    </td>\n                    <td ng-if="$ctrl.requestState === \'REJECTED\'" align="left" valign="middle">\n                        <div ng-if="dataRow.errors && dataRow.errors.length > 0" class="alert alert-danger">\n                            <span ng-repeat="error in dataRow.errors">\n                                {{\'brokerGiftShares.errors.\' + error | translate}}<br>\n                            </span>\n                        </div>\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){n(1230)(e),n(1232)(e),n(1234)(e),n(1236)(e)}},function(e,t,n){e.exports=function(e){e.component("iraUnknownProviderModal",{template:n(1231),controller:["ModalService",function(e){var t=this;t.unknownProvider="";t.isSubmitDisabled=function(){return""===t.unknownProvider.trim()},t.$onInit=function(){var n;(n=[]).push({label:"word.submit",alignment:"right",fn:t.onSubmit,btnType:"primary",isDisabled:t.isSubmitDisabled}),n.push({label:"word.cancel",alignment:"right",fn:t.onCancel}),e.setModalButtons(n)},t.onSubmit=function(){e.closeModal(t.unknownProvider)},t.onCancel=function(){t.unknownProvider="",e.closeModal(t.unknownProvider)}}]})}},function(e,t){e.exports='<div class="row">\n    <div class="col-lg-8 col-lg-offset-2 col-md-8 col-md-offset-2 col-sm-8 col-sm-offset-2">\n        <label class="form-label">{{\'rollover.ira.unknownProvider.modal.text\' | translate}}</label>\n    </div><br>\n    <div class="col-lg-8 col-lg-offset-2 col-md-8 col-md-offset-2 col-sm-8 col-sm-offset-2">\n        <am-input type="text" ng-model="$ctrl.unknownProvider"></am-input>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("iraRolloverNotInKindFirstModal",{template:n(1233),controller:["ModalService","DynamicSequenceService","$translate","$window",function(e,t,n,a){var r=this;r.unknownProvider="";r.cancelTransaction=function(){t.getSequenceData().exitWarning=!1,e.closeModal("CANCEL")},r.openSecondModal=function(){var a={title:n.instant("rollover.ira.notInKind.secondPopup.title"),templateUrl:"ira-rollover-not-in-kind-second-modal.component",modalData:{transferParameters:r.transferParameters,instructionParameters:r.instructionParameters,ibkrIraType:r.ibkrIraType}};e.openModal(a).then(function(n){"FUNDING"===n?e.closeModal("FUNDING"):"CANCEL"===n?e.closeModal("CANCEL"):t.stepBack()})},r.openAccount=function(){a.location.href="/Universal/Application?type=IRA"},r.$onInit=function(){var t;r.transferParameters=e.getModalData().transferParameters,r.instructionParameters=e.getModalData().instructionParameters,r.ibkrIraType=e.getModalData().ibkrIraType,angular.isDefined(r.instructionParameters.contraBrokerAccount.broker.unknownProvider)&&""!==r.instructionParameters.contraBrokerAccount.broker.unknownProvider?r.provider=r.instructionParameters.contraBrokerAccount.broker.unknownProvider:r.provider=r.instructionParameters.contraBrokerAccount.broker.brokerName,r.sourceIra=n.instant("rollover.ira.type."+r.instructionParameters.contraBrokerAccount.accountType),r.destIra=n.instant("ira.type."+r.ibkrIraType),(t=[]).push({label:"rollover.ira.button.text.cancelTransaction",alignment:"right",fn:r.cancelTransaction,btnType:"primary",btnClass:"btn-danger"}),t.push({label:"word.back",alignment:"left",fn:r.goBack}),e.setModalButtons(t)},r.goBack=function(){e.closeModal("")}}]})}},function(e,t){e.exports='<div>\n    <div class="row">\n        <label class="control-label" translate="rollover.ira.notInKind.firstPopup.firstText" translate-values="{ provider : $ctrl.provider, iraTypeSource : $ctrl.sourceIra }"></label> \n    </div>\n    <div class="row">\n        <ol>\n            <li translate="rollover.ira.notInKind.firstPopup.secondText.first" translate-values="{ provider : $ctrl.provider, iraTypeSource : $ctrl.sourceIra, iraTypeDest : $ctrl.destIra }"></li>\n            <li ng-if="$ctrl.transferParameters.tpAccountTypeExistsAtIb" translate="rollover.ira.notInKind.firstPopup.secondText.second" translate-values="{ iraTypeSource : $ctrl.sourceIra }"></li>\n        </ol>\n    </div>\n    <div class="row">\n        <label class="control-label" translate="rollover.ira.notInKind.firstPopup.thirdText" translate-values="{ iraTypeSource : $ctrl.sourceIra }"></label>\n    </div>\n    <div ng-if="$ctrl.transferParameters.tpAccountTypeExistsAtIb" class="row padding-top-50">\n        <div class="col-lg-offset-2 col-lg-5 col-md-offset-2 col-md-5 col-sm-12">\n            <am-button on-click="$ctrl.openSecondModal()" btn-type="primary" btn-size="large" btn-text="{{\'rollover.ira.button.text.liquidate\' | translate}}"></am-button>\n        </div>\n        <div class="col-lg-3 col-md-3 col-sm-12">\n            <am-button on-click="$ctrl.openAccount()" btn-type="primary" btn-size="large" btn-text="{{\'rollover.ira.button.text.openAnAccount\' | translate}}"></am-button>\n        </div>\n    </div>\n    <div ng-if="!$ctrl.transferParameters.tpAccountTypeExistsAtIb" class="row padding-top-50">\n        <div class="col-lg-offset-4 col-lg-5 col-md-offset-4 col-md-5 col-sm-12">\n            <am-button on-click="$ctrl.openSecondModal()" btn-type="primary" btn-size="large" btn-text="{{\'rollover.ira.button.text.liquidate\' | translate}}"></am-button>\n        </div>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("iraRolloverNotInKindSecondModal",{template:n(1235),controller:["ModalService","FundingNavigationService","DynamicSequenceService","$translate",function(e,t,n,a){var r=this;r.unknownProvider="";r.cancelTransaction=function(){n.getSequenceData().exitWarning=!1,e.closeModal("CANCEL")},r.createDepositRequest=function(){n.getSequenceData().exitWarning=!1,e.closeModal("FUNDING")},r.$onInit=function(){var t;r.transferParameters=e.getModalData().transferParameters,r.instructionParameters=e.getModalData().instructionParameters,r.ibkrIraType=e.getModalData().ibkrIraType,angular.isDefined(r.instructionParameters.contraBrokerAccount.broker.unknownProvider)&&""!==r.instructionParameters.contraBrokerAccount.broker.unknownProvider?r.provider=r.instructionParameters.contraBrokerAccount.broker.unknownProvider:r.provider=r.instructionParameters.contraBrokerAccount.broker.brokerName,(t=[]).push({label:"rollover.ira.button.text.cancelTransaction",alignment:"right",fn:r.cancelTransaction,btnType:"primary",btnClass:"btn-danger"}),t.push({label:"word.continue",alignment:"right",fn:r.createDepositRequest,btnType:"primary"}),t.push({label:"word.back",alignment:"left",fn:r.onBack}),e.setModalButtons(t)},r.onBack=function(){var t={title:a.instant("rollover.ira.notInKind.firstPopup.title"),templateUrl:"ira-rollover-not-in-kind-first-modal.component",modalData:{transferParameters:r.transferParameters,instructionParameters:r.instructionParameters,ibkrIraType:r.ibkrIraType}};e.openModal(t)}}]})}},function(e,t){e.exports='<div>\n    <div class="row">\n        <label class="control-label" translate="rollover.ira.notInKind.secondPopup.firstText" translate-values="{ provider : $ctrl.provider }"></label> \n    </div><br>\n    <div class="row padding-top-35">\n        <label class="control-label" translate="rollover.ira.notInKind.secondPopup.secondText"></label>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("iraRolloverAccountTypeNotListedModal",{template:n(1237),controller:["ModalService","DynamicSequenceService",function(e,t){var n=this;n.createDepositRequest=function(){t.getSequenceData().exitWarning=!1,e.closeModal("FUNDING")},n.$onInit=function(){var t;n.transferParameters=e.getModalData().transferParameters,n.instructionParameters=e.getModalData().instructionParameters,n.ibkrIraType=e.getModalData().ibkrIraType,angular.isDefined(n.instructionParameters.contraBrokerAccount.broker.unknownProvider)&&""!==n.instructionParameters.contraBrokerAccount.broker.unknownProvider?n.provider=n.instructionParameters.contraBrokerAccount.broker.unknownProvider:n.provider=n.instructionParameters.contraBrokerAccount.broker.brokerName,(t=[]).push({label:"rollover.ira.button.text.cancelTransaction",alignment:"right",fn:n.onCancel,btnType:"primary",btnClass:"btn-danger"}),t.push({label:"word.continue",alignment:"right",fn:n.createDepositRequest,btnType:"primary"}),t.push({label:"word.back",alignment:"left",fn:n.onBack}),e.setModalButtons(t)},n.onCancel=function(){t.getSequenceData().exitWarning=!1,e.closeModal("CANCEL")},n.onBack=function(){e.closeModal()}}]})}},function(e,t){e.exports='<div class="row">\n    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n        <label class="control-label" translate="rollover.ira.notInKind.AccountTypeNotListed.popup.firstText" translate-values="{ provider : $ctrl.provider, iraTypeDest : $ctrl.ibkrIraType }"></label> \n    </div><br>\n    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 padding-top-35">\n        <label class="control-label" translate="rollover.ira.notInKind.AccountTypeNotListed.popup.secondText" translate-values="{ provider : $ctrl.provider }"></label>\n    </div><br>\n    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 padding-top-35">\n        <label class="control-label" translate="rollover.ira.notInKind.AccountTypeNotListed.popup.thirdText"></label>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){n(1239)(e),n(1241)(e),n(1242)(e),n(1244)(e),n(1246)(e),n(1247)(e),n(1249)(e),n(1250)(e),n(1255)(e)}},function(e,t,n){e.exports=function(e){n(1240)(e)}},function(e,t){e.exports=function(e){e.component("achAmountConfirmationPage",{template:function(){var e="";return e+="<div page-structure>",e+="<h4>{{'ach.confirm.heading' | translate}}</h4>",e+="<br>",e+='<ach-amount-confirmation pending-request="$ctrl.pendingRequest" on-completion="$ctrl.onCompletion"></ach-amount-confirmation>',e+="</div>",e},controller:["PageService","NavigationService",function(e,t){var n=this;n.$onInit=function(){n.pendingRequest=e.getCurrentPage().pageData.request,n.onCompletion=function(e){t.navigateToPrevBreadcrumb()}}}]})}},function(e,t,n){e.exports=function(e){e.controller("DebitCardManagementController",n(5)(e,function(){return[n.e(9).then(n.t.bind(null,1994,7))]}))}},function(e,t,n){e.exports=function(e){n(1243)(e)}},function(e,t){e.exports=function(e){e.controller("fbFbController",["SESSION_ID","UserService","ResourceService",function(t,n,a){var r=this;r.$onInit=function(){r.isLoading=!0,a.fetch(e.SERVER_PATH+"/FbFb").then(function(e){r.fbFbUrl="/SignClient/Redirect",r.fbFbParams={action:"FBFB",user_name:n.getUser().username,taxId:t,region:e.data.region}}).finally(function(){r.isLoading=!1})}}])}},function(e,t,n){e.exports=function(e){n(1245)(e)}},function(e,t){e.exports=function(e){e.controller("fundingInstructionsCtrl",["PageService","PendingItemService","ResourceService",function(t,n,a){var r=this,i=function(){return 0===r.instructions.pending.length&&0===r.instructions.bank.length&&0===r.instructions.broker.length&&0===r.instructions.recurring.length&&0===r.instructions.settlement.length&&0===r.instructions.check.length&&0===r.instructions.linkage.length};r.$onInit=function(){r.onDelete=function(e){var t=e.instruction;if(0!==e.pendingRequestId){for(var a=r.instructions.pending,o=-1,s=0;s<a.length&&-1===o;++s)a[s].instruction.instructionId===t.instructionId&&(o=s);-1!==o&&a.splice(o,1),n.finishPendingRequest(e.pendingRequestId),r.noInstructions=i()}else!function(e){var t;t="RECURRING"===e.instructionType?r.instructions.recurring:"POSITION"===e.instructionType||"ASSET"===e.instructionType?r.instructions.broker:"CHECK"===e.instructionType?r.instructions.check:"INTERNAL_TRANSFER_LINKAGE"===e.instructionType?r.instructions.linkage:r.instructions.bank;for(var n="ASSET"===e.instructionType,a=-1,o=0;o<t.length&&-1===a;++o)n?t[o].instruction.instructionName===e.instructionName&&(a=o):t[o].instruction.instructionId===e.instructionId&&(a=o);if(-1!==a&&t.splice(a,1),"RECURRING"===e.instructionType&&angular.isDefined(e.instruction)&&0!==e.instruction.instructionId){var s=-1;for(o=0;o<r.instructions.bank.length&&-1===s;++o)r.instructions.bank[o].instruction.instructionId===e.instruction.instructionId&&(s=o);if(-1!==s){var l=-1,c=r.instructions.bank[s];for(o=0;o<c.scheduledTransactions.length&&-1===l;++o)c.scheduledTransactions[o]===e.instructionId&&(l=o);-1!==l&&c.scheduledTransactions.splice(l,1)}}r.noInstructions=i()}(t)},r.fetchInstructions=function(){a.fetch(e.SERVER_PATH+"/FundingInstructions").then(function(e){r.instructions=e.data,r.noInstructions=i()}).finally(function(){t.setIsPageLoading(!1)})},r.instructions={pending:[],bank:[],broker:[],recurring:[],settlement:[],check:[],linkage:[],rejected:[]},t.setOnPageLoad(r.fetchInstructions)}}])}},function(e,t,n){e.exports=function(e){e.controller("TransactionHistoryController",n(5)(e,function(){return[n.e(31).then(n.t.bind(null,1995,7)),n.e(31).then(n.t.bind(null,1996,7)),n.e(31).then(n.t.bind(null,1997,7)),n.e(31).then(n.t.bind(null,1998,7))]}))}},function(e,t,n){e.exports=function(e){n(1248)(e)}},function(e,t){e.exports=function(e){e.controller("RecurringInvestmentCtrl",["PageService","ResourceService","$translate","ModalService","FundingService","NavigationService","CONTENT_HOST","BreadcrumbAction","RecurringInvestmentService","$filter","WHITE_BRANDING_DETAILS","AlphaTestService",function(t,n,a,r,i,o,s,l,c,u,d,p){var g=this,f=function(t){var n={id:"AddRecurringInvestment",path:"am-dynamic-sequence.component",skipFetch:!0,pageData:{sequenceSource:e.SERVER_PATH+"/RecurringInvestment/Sequence",sequenceType:i.getConId(t),wbType:g.wbType,isRedirect:g.isRedirect}};o.navigate(n)};g.$onInit=function(){g.viewCancelledInvestments=!1,g.contentHost=s,g.getAssetSymbol=i.getAssetSymbol,g.selectedIndex=void 0,g.openKbArticle=c.openKbArticle,g.wbType="",g.whiteBranded=d.isBranded()||!1,g.errors={},g.errorKey="",g.canEdit=c.canEditRecurringInvestment,g.hasCustomErrors=function(){return angular.isDefined(g.errors)&&Object.keys(g.errors).length>0},g.editRecurringInvestment=function(t){var n={id:"EditRecurringInvestment",path:e.FUNDING_APP_ROOT+"/sequences/recurringinvestment/recurringInvestmentSequence.html",skipFetch:!0,pageData:{sequenceType:"/Edit/"+t,wbType:g.wbType,isRedirect:g.isRedirect}};o.navigate(n)},g.deleteRecurringInvestment=function(e,t,n){g.selectedIndex=t,c.deleteRecurringInvestment(e,g.rules,g.isRedirect).then(function(n){angular.isDefined(n)&&("DELETE_SUCCESS"===n.status?(g.recurringInvestments.splice(t,1),angular.isDefined(g.cancelledInvestments)&&(e.recurringTransferInstruction.endDate=u("date")(new Date,"yyyy-MM-dd"),g.cancelledInvestments.push(e))):"EDIT_DATE_SUCCESS"===n.status?e.recurringTransferInstruction.endDate=n.cancelDate:"EDIT"===n.status&&g.editRecurringInvestment(e.schedTransId))}).finally(function(){g.selectedIndex=void 0}),angular.isDefined(n)&&n.stopPropagation()},g.goToTradingPermissions=function(){g.tradingPermissionPage.breadcrumb=l.REPLACE,g.tradingPermissionPage.menu="clear",o.navigate(g.tradingPermissionPage)},g.viewRecurringInvestmentDetails=function(e,t){g.selectedIndex=t;var n={title:a.instant("modal.title.ViewRecurringInvestmentDetails"),templateUrl:"view-recurring-investment-details.component",modalData:{recurringInvestment:e}};r.openModal(n).finally(function(){g.selectedIndex=void 0})},g.openSearchModal=function(){g.isLoading=!0;var e=!1;p.fetch("REGAM-19808").then(function(t){e=t.data.isEnabled}).finally(function(){g.isLoading=!1,e?f():c.openAssetSearchModal(g.assetRules,f)})},g.initializeRecurringInvestment=function(){var a=t.getCurrentPage().serverParams;a&&(a.recurringInvestmentId||a.conId)?(t.getCurrentPage().serverParams={},g.wbType=a.wbType,g.isRedirect="CP"===a.source,a.recurringInvestmentId?a.cancelInvestment&&"true"===a.cancelInvestment?g.fetchRecurringInvestments().then(function(){if(g.canTradeinFraction){var e=-1;g.recurringInvestments.some(function(t,n){return t.schedTransId==a.recurringInvestmentId&&(e=n)}),g.deleteRecurringInvestment(g.recurringInvestments[e],e)}}).finally(function(){t.setIsPageLoading(!1)}):g.editRecurringInvestment(a.recurringInvestmentId):n.fetch(e.SERVER_PATH+"/RecurringInvestment/fetchAsset",{conId:a.conId}).then(function(e){f(e.data.positionDetails)},function(e){e.data.errors&&(e.data.errors.error&&(g.errorKey=e.data.errors.error,"tradeInFractionRequired"===g.errorKey&&(g.tradingPermissionPage=e.data.tradingPermissionPage)),e.data.errors.restricted&&(g.errorKey="ineligibleUser"),e.data.errors.ineligible&&(g.errors=e.data.errors),g.hasError=!0,t.setIsPageLoading(!1))})):g.fetchRecurringInvestments().finally(function(){t.setIsPageLoading(!1)})},g.getErrorTranslateValues=function(){var e={};return"tradeInFractionRequired"===g.errorKey?e.linkStart='<a href="javascript:void(0);" ng-click="$ctrl.goToTradingPermissions()">':e.linkStart='<a href="javascript:void(0);" ng-click="$ctrl.openKbArticle()">',e.linkEnd="</a>",e},g.fetchRecurringInvestments=function(){return n.fetch(e.SERVER_PATH+"/RecurringInvestment/ExistingRecurringInvestments").then(function(e){g.canTradeinFraction=e.data.canTradeinFraction,g.canTradeinFraction?(g.recurringInvestments=e.data.activeRecurringInvestments,g.assetRules=e.data.assetRules,g.showFeeType=e.data.showFeeType):g.tradingPermissionPage=e.data.tradingPermissionPage,g.rules=e.data.rules},function(e){g.hasError=!0,e.data.errors&&e.data.errors.restricted&&(g.errorKey="ineligibleUser"),g.errors=e.data.errors})};var m=!1;g.isfetching=!1,g.fetchCancelledRecurringInvestments=function(){m||(g.isfetching=!0,n.fetch(e.SERVER_PATH+"/RecurringInvestment/CancelledRecurringInvestments").then(function(e){g.cancelledInvestments=e.data.cancelledInvestments,g.showFeeType=e.data.showFeeType,g.isfetching=!1}),m=!0)},g.toggleCanceledInvestments=function(){g.viewCanceledInvestments=!g.viewCanceledInvestments},t.setOnPageLoad(g.initializeRecurringInvestment)}}])}},function(e,t,n){e.exports=function(e){e.controller("BrokerGiftSharesController",n(5)(e,function(){return[n.e(7).then(n.t.bind(null,1999,7))]}))}},function(e,t,n){e.exports=function(e){n(1251)(e),n(1252)(e),n(1253)(e)}},function(e,t){e.exports=function(e){e.controller("ClientTransactionReviewTypeCtrl",["NavigationService","ResourceService",function(t,n){var a=this;a.$onInit=function(){a.isloading=!0,n.fetch(e.SERVER_PATH+"/ClientTransactionReview/").then(function(e){a.types=e.data.transactionTypes},function(e){a.errors=e.data.errors}).finally(function(){a.isloading=!1,1===a.types.length&&a.reviewTransaction(a.types[0])}),a.getImage=function(e){return"DEPOSIT"===e?"icon-deposit.svg":"WITHDRAWAL"==e?"icon-withdraw.svg":void 0},a.reviewTransaction=function(n){var a={id:"DEPOSIT"===n?"ClientDepositReview":"ClientWithdrawalReview",path:e.FUNDING_APP_ROOT+"/pages/lynx/clientTransactionReview.html",serverPath:e.SERVER_PATH+"/ClientTransactionReview",pageData:{transactionType:n}};t.navigate(a)},a.select=function(e){a.reviewTransaction(e)}}}])}},function(e,t){e.exports=function(e){e.controller("clientTransactionReviewController",["$q","PageService",function(t,n){var a=this;a.$onInit=function(){a.itemSource=e.SERVER_PATH+"/ClientTransactionReview/Data",a.transactionLoad=t.defer(),a.manipulatorId=n.getCurrentPage().id,n.setOnPageLoad(function(){a.transactionLoad.promise.finally(function(){n.setIsPageLoading(!1)})})}}])}},function(e,t,n){e.exports=function(e){e.component("clientTransactionReviewData",{require:{$itemManipulator:"^^amItemManipulator"},template:n(1254),controller:["$translate","CashMethodTextService","ModalService","PageService","ResourceService",function(t,n,a,r,i){var o=this;o.$onInit=function(){o.transactionPreferences={};var s=r.getCurrentPage().pageData.transactionType;o.isDataLoaded=!1,o.loadTransactions=function(){if(!o.isDataLoaded){var e={};e.transactionId=r.getCurrentPage().serverParams.transactionId,e.transactionType=s,o.$itemManipulator.itemControl.load(e)}},o.$itemManipulator.itemHooks.load.push(function(e){o.isDataLoaded=!0}),o.isColumnEnabled=function(e){var t=o.transactionPreferences.columnPreferences;return!angular.isUndefined(t)&&!angular.isUndefined(t[e])&&t[e].enabled},o.showTransaction=function(e){var r;r={title:t.instant("transaction.type."+e.transferParameters.type)+" - "+n.getMethodName(e.transferParameters),templateUrl:"transaction-modal.component",dialogClass:"modal-xl",modalData:{transactionResource:"/ClientTransactionReview",transaction:e}},a.openModal(r).then(function(e){angular.isUndefined(e)||o.$itemManipulator.itemControl.reset()})},o.getMethodDisplayText=function(e){return n.getMethodName(e.transferParameters)},i.fetch(e.SERVER_PATH+"/ClientTransactionReview/Preferences",{transactionType:s}).then(function(e){o.transactionPreferences=e.data.preferences,o.loadTransactions()})}}]})}},function(e,t){e.exports='<section class="panel">\n    <div class="panel-body panel-padding">        \n        <div  ng-show="$ctrl.isDataLoaded">    \n            <div class="row">    \n                <div class="col-xs-12 col-sm-12 col-md-3 col-lg-3">\n                    <freeform-text-filter filter-id="transactionText" placeholder-key-prefix="data.filter.option.placeholder."></freeform-text-filter>\n                </div> \n            </div>\n            <br>\n            <div class="row">     \n                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n                    <div class="row">\n                        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n                            <div ng-if="$ctrl.$itemManipulator.entries.length > 0" class="table-responsive">\n                                <table width="100%" cellpadding="0" cellspacing="0" border="0" class="table table-tbody-hover tablesorter">\n                                    <thead>\n                                        <tr>\n                                            <th ng-click="$ctrl.$itemManipulator.toggleSort(sorter)" align="left" valign="middle" class="header" ng-class="{ \'headerSortDown\' : sorter.state == \'DESCENDING\', \'headerSortUp\' : sorter.state == \'ASCENDING\' }" ng-repeat="sorter in $ctrl.$itemManipulator.services[\'SORTER\'].sorters">\n                                                {{\'data.sorter.name.\' + sorter.id | translate}}\n                                            </th>\n                                        </tr>\n                                    </thead>\n                                    <tbody ng-click="$ctrl.showTransaction(transaction)" ng-repeat="transaction in $ctrl.$itemManipulator.entries">\n                                        <tr>\n                                            <td ng-if="$ctrl.isColumnEnabled(\'date\')" align="left" valign="middle">{{transaction.requestDate}}</td>\n                                            <td ng-if="$ctrl.isColumnEnabled(\'accountId\')" align="left" valign="middle">{{transaction.accountId}}</td>\n                                            <td ng-if="$ctrl.isColumnEnabled(\'method\')" align="left" valign="middle">{{$ctrl.getMethodDisplayText(transaction)}}</td>\n                                            <td ng-if="$ctrl.isColumnEnabled(\'type\')" align="left" valign="middle">{{\'transaction.type.\' + transaction.transferParameters.type | translate}}</td>\n                                            <td ng-if="$ctrl.isColumnEnabled(\'accountTitle\')" align="left" valign="middle">{{transaction.accountTitle}}</td>\n                                            <td ng-if="$ctrl.isColumnEnabled(\'amount\')" align="left" valign="middle">\n                                                <span ng-if="transaction.transferParameters.moneyAmount">\n                                                    {{transaction.transferParameters.moneyAmount | amMoneyAmount}}\n                                                </span>\n                                            </td>\n                                            <td ng-if="$ctrl.isColumnEnabled(\'senderName\')" align="left" valign="middle">{{transaction.transferInstruction.beneficiaryBankAccount.accountTitle}}</td>\n                                            <td ng-if="$ctrl.isColumnEnabled(\'bankName\')" align="left" valign="middle">{{transaction.transferInstruction.beneficiaryBankAccount.bank.bankName}}</td>\n                                            <td ng-if="$ctrl.isColumnEnabled(\'bankAccountNumber\')" align="left" valign="middle">{{transaction.transferInstruction.beneficiaryBankAccount.bankAccountNumber.accountNumber}}</td>\n                                            <td ng-if="$ctrl.isColumnEnabled(\'status\')" align="left" valign="middle">{{\'transaction.status.\' + transaction.status | translate}}</td>\n                                        </tr>\n                                        \n                                    </tbody>\n                                </table>\n                            </div>\n                            <div ng-if="$ctrl.$itemManipulator.entries.length === 0" class="alert-no-results-lg">\n                                <p>{{\'transaction.noResults\' | translate}}</p>\n                            </div>\n                            <br />\n                        </div>\n                    </div>\n                    <pagination-controls></pagination-controls>\n                </div>\n            </div>    \n        </div>    \n        <loading-overlay ng-if="$ctrl.$itemManipulator.itemControl.isLoadInProgress()"></loading-overlay>\n    </div>\n</section>\n'},function(e,t,n){e.exports=function(e){n(1256)(e)}},function(e,t,n){e.exports=function(e){e.component("iraActivity",{template:n(1257),controller:["ResourceService","PageService","$translate",function(e,t,n){var a=this;a.$onInit=function(){function r(e,t){return new Date(e.processedDate).getTime()-new Date(t.processedDate).getTime()}a.currentYear=(new Date).getFullYear(),a.years=function(){for(var e=[],t=2016;t<=a.currentYear;t++)e.push(t);return e}(),a.selectedYear=a.currentYear,a.isUsIra=!0,a.fetchIraActivity=function(){e.fetch(AM_APP_ROOT+"/IraActivity",{activityYear:a.selectedYear}).then(function(e){var t=e.data.iraActivities;t?(a.activityYear=t.activityYear,a.contributionDetails=t.contributionDetails,a.distributionDetails=t.distributionDetails,a.contributionTransactions=t.contributionTransactions,a.contributionTransactions.sort(r),a.distributionTransactions=t.distributionTransactions,a.distributionTransactions.sort(r),a.otherTransactions=t.otherTransactions,a.otherTransactions.sort(r),a.contributionInformation=n.instant("iraActivity.heading.history.contributionInformation",{maximumContributionLimit:a.contributionDetails.maximumContributionLimit,activityYear:a.activityYear,strongStart:"<strong>",strongEnd:"</strong>"})):a.isUsIra=!1},function(e){a.errors=e.data.errors}).finally(function(){t.setIsPageLoading(!1)})},t.setOnPageLoad(function(){a.fetchIraActivity()})}}]})}},function(e,t){e.exports='<div ng-if="$ctrl.isUsIra">\n    <div class="row">\n        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n            <div class="d-flex align-items-center">\n                <h6 class="mr-3">\n                    <strong>{{\'iraActivity.label.searchByTaxYear\' | translate}}</strong>\n                </h6>\n                <span class="mr-3"> <am-select ng-model="$ctrl.selectedYear"\n                        options="$ctrl.years"\n                        empty-option-text="{{\'iraActivity.label.selectTaxYear\' | translate}}"></am-select>\n                </span>\n                <am-button btn-type="primary"\n                    btn-text="{{\'word.search\' | translate}}"\n                    on-click="$ctrl.fetchIraActivity()"></am-button>\n            </div>\n            <br />\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n            <section class="panel">\n                <div class="panel-body panel-padding">\n                    <div class="row">\n                        <div\n                            class="col-xs-12 col-sm-12 col-md-12 col-lg-10 col-lg-offset-1">\n                            <div>\n                                <h4>{{\'iraActivity.title.CONTRIBUTION\' | translate}}</h4>\n                                <p ng-bind-html="$ctrl.contributionInformation | renderHTML"></p>\n                                <ira-activity-history\n                                    activity-history="$ctrl.contributionTransactions"\n                                    ytd-total="$ctrl.contributionDetails.contributedAmount"\n                                    activity-type="\'CONTRIBUTION\'"\n                                    activity-year="$ctrl.activityYear"></ira-activity-history>\n                            </div>\n                            <div>\n                                <hr>\n                                <h4>{{\'iraActivity.title.DISTRIBUTION\' | translate}}</h4>\n                                <ira-activity-history\n                                    activity-history="$ctrl.distributionTransactions"\n                                    ytd-total="$ctrl.distributionDetails.distributedAmount"\n                                    activity-type="\'DISTRIBUTION\'"\n                                    activity-year="$ctrl.activityYear"></ira-activity-history>\n                            </div>\n                            <div>\n                                <hr>\n                                <h4>{{\'iraActivity.title.OTHER_ACTIVITY\' | translate}}</h4>\n                                <ira-activity-history activity-history="$ctrl.otherTransactions"\n                                    activity-type="\'OTHER\'" activity-year="$ctrl.activityYear"></ira-activity-history>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </section>\n        </div>\n    </div>\n</div>\n<div ng-if="!$ctrl.isUsIra">\n    <div class="row">\n        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n            <div class="alert alert-gray">\n                <p class="text-center">{{\'iraActivity.heading.notUsIra\' |\n                    translate}}</p>\n            </div>\n        </div>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){n(1259)(e),n(1261)(e),n(1263)(e),n(1264)(e),n(1266)(e),n(1268)(e),n(1269)(e),n(1270)(e),n(1271)(e),n(1272)(e),n(1273)(e),n(1274)(e),n(1275)(e),n(1276)(e),n(1277)(e),n(1278)(e),n(1279)(e),n(1280)(e),n(1281)(e)}},function(e,t,n){e.exports=function(e){n(1260)(e);n(2)(e,["pending-isa-account-transfer","isa-account-transfer-details","isa-account-transfer-review-page","isa-account-transfer-completion"],function(){return[n.e(18).then(n.t.bind(null,2e3,7)),n.e(18).then(n.t.bind(null,2001,7)),n.e(18).then(n.t.bind(null,2002,7)),n.e(18).then(n.t.bind(null,2003,7))]})}},function(e,t){e.exports=function(e){function t(e,t){var n=this;n.$onInit=function(){n.isApplication=e===t.STANDALONE;var a=window.cancelFn;n.cancel=a||angular.noop}}e.controller("IsaAccountTransferSeqCtrl",t),t.$inject=["ACTIVE_CONTEXT","ApplicationContext"]}},function(e,t,n){e.exports=function(e){n(1262)(e)}},function(e,t){e.exports=function(e){function t(e,t,n,a,r,i){var o=this;o.$onInit=function(){var s;o.isPageLoading=a.isPageLoading,o.errors={},o.disclaimerViewed=!1,o.fetchParams=function(){a.setIsPageLoading(!0);var e=n.getSequenceData().jwt,i=n.getSequenceData().url,s=t.location.host,l="";r.fetch(i+"/auth/token",{frameOption:s,jwt:e}).then(function(e){l=e.data.shortToken}).finally(function(){o.galileoUrl=i,o.params={frameOption:s,jwt:e,shortToken:l},a.setIsPageLoading(!1)})},s={title:e.instant("user.menu.BillPay"),templateUrl:"bill-pay-disclaimer-modal.component"},i.openModal(s).then(function(){o.fetchParams(),o.disclaimerViewed=!0})}}e.controller("BillPayServiceController",t),t.$inject=["$translate","$window","DynamicSequenceService","PageService","ResourceService","ModalService"]}},function(e,t,n){e.exports=function(e){n(2)(e,["broker-gift-shares-transfer-form","broker-gift-shares-transfer-upload","broker-gift-shares-transfer-completion"],function(){return[n.e(11).then(n.t.bind(null,2004,7)),n.e(11).then(n.t.bind(null,2005,7)),n.e(11).then(n.t.bind(null,2006,7))]})}},function(e,t,n){e.exports=function(e){n(1265)(e);n(2)(e,["ach-bank-selection","ach-bank-verification","ach-bank-verification-choice","ach-instruction-completion","cash-authorization-completion","cash-instruction-agreement","cash-method-selection","cash-instruction-completion","cash-instruction-submission","cash-transfer-authorization","cash-transfer-completion","cash-type-selection","create-cash-transfer","crypto-cash-ineligibility","crypto-plus-enrollment","deposit-modification","edda-deposit-completion","edda-instruction-completion","edda-instruction-resubmission","edda-service-unavailable","instant-ach-verification","late-rollover-agreement","rfp-completion","notification-completion","saved-instruction-cash-transfer","unmapped-notification-completion","wise-questions","wise-transfer","wise-two-factor","ira-rollover-type-selection","ira-provider-selection","ira-account-type-selection","ira-steps-info","ira-rollover-asset-selection","ira-rollover-check-for-partial","ira-rollover-add-account-number","ira-rollover-validate-account-title","ira-rollover-upload-form","ira-rollover-transfer-review","ira-rollover-cash-transfer","ira-rollover-not-in-kind","ira-rollover-completion","edda-combined-request-completion","bulk-internal-cash-transfer","bulk-internal-cash-transfer-review","bulk-internal-cash-transfer-completion","ach-saved-instruction-cash-transfer","rfp-transfer-acknowledgement"],function(){return[n.e(32).then(n.t.bind(null,2007,7)),n.e(32).then(n.t.bind(null,2008,7)),n.e(32).then(n.t.bind(null,2009,7)),n.e(32).then(n.t.bind(null,2010,7)),n.e(32).then(n.t.bind(null,2011,7)),n.e(32).then(n.t.bind(null,2012,7)),n.e(32).then(n.t.bind(null,2013,7)),n.e(32).then(n.t.bind(null,2014,7)),n.e(32).then(n.t.bind(null,2015,7)),n.e(32).then(n.t.bind(null,2016,7)),n.e(32).then(n.t.bind(null,2017,7)),n.e(32).then(n.t.bind(null,2018,7)),n.e(32).then(n.t.bind(null,2019,7)),n.e(32).then(n.t.bind(null,2020,7)),n.e(32).then(n.t.bind(null,2021,7)),n.e(32).then(n.t.bind(null,2022,7)),n.e(32).then(n.t.bind(null,2023,7)),n.e(32).then(n.t.bind(null,2024,7)),n.e(32).then(n.t.bind(null,2025,7)),n.e(32).then(n.t.bind(null,2026,7)),n.e(32).then(n.t.bind(null,2027,7)),n.e(32).then(n.t.bind(null,2028,7)),n.e(32).then(n.t.bind(null,2029,7)),n.e(32).then(n.t.bind(null,2030,7)),n.e(32).then(n.t.bind(null,2031,7)),n.e(32).then(n.t.bind(null,2032,7)),n.e(32).then(n.t.bind(null,2033,7)),n.e(32).then(n.t.bind(null,2034,7)),n.e(32).then(n.t.bind(null,2035,7)),n.e(32).then(n.t.bind(null,2036,7)),n.e(32).then(n.t.bind(null,2037,7)),n.e(32).then(n.t.bind(null,2038,7)),n.e(32).then(n.t.bind(null,2039,7)),n.e(32).then(n.t.bind(null,2040,7)),n.e(32).then(n.t.bind(null,2041,7)),n.e(32).then(n.t.bind(null,2042,7)),n.e(32).then(n.t.bind(null,2043,7)),n.e(32).then(n.t.bind(null,2044,7)),n.e(32).then(n.t.bind(null,2045,7)),n.e(32).then(n.t.bind(null,2046,7)),n.e(32).then(n.t.bind(null,2047,7)),n.e(32).then(n.t.bind(null,2048,7)),n.e(32).then(n.t.bind(null,2049,7)),n.e(32).then(n.t.bind(null,2050,7)),n.e(32).then(n.t.bind(null,2051,7))]})}},function(e,t){e.exports=function(e){function t(t,n,a,r,i){var o=this,s=function(e){return angular.isDefined(e)&&null!==e};o.$onInit=function(){o.sequenceSource=e.SERVER_PATH+"/TransferFunds/Sequence/";var l=window.cancelFn,c=window.completeFn,u=i.getCurrentPage().pageData||{};u.sequenceFunctions={},angular.isDefined(window[l])?u.sequenceFunctions.cancelFn=window[l]:angular.isDefined(l)&&angular.isFunction(l)&&(u.sequenceFunctions.cancelFn=l),angular.isDefined(window[c])&&!u.overrideCompleteFn?u.sequenceFunctions.completeFn=window[c]:angular.isDefined(c)&&angular.isFunction(c)&&(u.sequenceFunctions.completeFn=c),i.getCurrentPage().pageData=u;var d=i.getCurrentPage().helpId;i.getCurrentPage().helpId=function(){var e=r.getSequenceData();return angular.isDefined(e.transferParameters)&&"IRA_ROLLOVER"===e.transferParameters.type?"IraRollover":d},i.getCurrentPage().title=function(){var e=r.getSequenceData();if(angular.isDefined(e)){var i=function(e,r,i){var o=e.type,l=e.method;return angular.isDefined(r)&&"WITHDRAWAL"===o&&n.isWiseInstruction(r)?t.instant("transaction.method.WISE_OUTBOUND"):s(e.tbszOperation)&&"UNKNOWN"!==e.tbszOperation?t.instant("transaction.title."+e.tbszOperation):"PEA"===e.fundTransferType&&s(e.operationType)&&"UNKNOWN"!==e.operationType?t.instant("transaction.title."+e.fundTransferType+"."+e.operationType):"INTERNAL"!==o&&"UNKNOWN"!==l||"SIMPLE_IRA_FUNDING"===l||"CRYPTO_CASH_TRANSFER"===l?a.getMethodPageTitle(e,i):t.instant("transaction.type."+o)};if(angular.isDefined(e.request)&&angular.isDefined(e.operationType))return t.instant("transaction.title."+e.operationType);if(angular.isDefined(e.transferParameters)&&"IRA_ROLLOVER"===e.transferParameters.type)return t.instant("rollover.ira.sequence.title");if("AchSavedInstructionCashTransfer"===e.id)return t.instant("cashTransfer.title.DEPOSIT.LinkedBankAccount");if(angular.isDefined(e.transferDetails)&&angular.isDefined(e.transferDetails.transferParameters))return i(l=e.transferDetails.transferParameters,c=e.selectedInstruction||e.transferDetails.instructionParameters,e.ibEntity);if(angular.isDefined(e.request)&&angular.isDefined(e.request.transferParameters)){var o,l=angular.copy(e.request.transferParameters),c=e.request.transferInstruction;return angular.isDefined(e.destination)?(o=e.destination.ibEntity,l.method=e.destination.method):o=e.ibEntity,i(l,c,o)}if(angular.isDefined(e.request)&&angular.isDefined(e.request.transferInstruction)){c=e.request.transferInstruction;if(n.isWiseInstruction(c))return t.instant("transaction.method.WISE_OUTBOUND")}}return t.instant("page.title.TransferFunds")}}}e.controller("TransferFundsSequenceCtrl",t),t.$inject=["$translate","WiseTransferService","CashMethodTextService","DynamicSequenceService","PageService"]}},function(e,t,n){e.exports=function(e){n(1267)(e)}},function(e,t){e.exports=function(e){function t(e,t,n,a,r){var i=this;i.$onInit=function(){i.destination=t.getSequenceData().destination,i.restart=function(){1===a.getBreadcrumbs().length?t.restartSequence():r.navigateToPrevBreadcrumb()},t.configureButtons({extraButtons:[{alignment:"left",onClick:function(){var e=t.getSequenceData().request.transferParameters||{};n.goBack(e)},btnText:e.instant("word.back")},{alignment:"right",onClick:i.restart,btnText:e.instant("word.finish"),btnType:"primary"}]})}}e.controller("CcbCompletionController",t),t.$inject=["$translate","DynamicSequenceService","FundingNavigationService","PageService","NavigationService"]}},function(e,t,n){e.exports=function(e){n(2)(e,["debit-card-additional-card","debit-card-agreement","debit-card-completion","debit-card-entity-selection","debit-card-ib-key","debit-card-review","debit-card-sign-up"],function(){return[n.e(13).then(n.t.bind(null,2052,7)),n.e(13).then(n.t.bind(null,2053,7)),n.e(13).then(n.t.bind(null,2054,7)),n.e(13).then(n.t.bind(null,2055,7)),n.e(13).then(n.t.bind(null,2056,7)),n.e(13).then(n.t.bind(null,2057,7)),n.e(13).then(n.t.bind(null,2058,7))]})}},function(e,t,n){e.exports=function(e){n(2)(e,["depot-switch-details","depot-switch-review","depot-switch-completion"],function(){return[n.e(19).then(n.t.bind(null,2059,7)),n.e(19).then(n.t.bind(null,2060,7)),n.e(19).then(n.t.bind(null,2061,7))]})}},function(e,t,n){e.exports=function(e){n(2)(e,["direct-ach-instructions"],function(){return[n.e(14).then(n.t.bind(null,2062,7))]})}},function(e,t,n){e.exports=function(e){n(2)(e,["icm-agreement"],function(){return[n.e(15).then(n.t.bind(null,2063,7))]})}},function(e,t,n){e.exports=function(e){n(2)(e,["operator-authorization","sign-client-confirmation"],function(){return[n.e(33).then(n.t.bind(null,2064,7)),n.e(33).then(n.t.bind(null,2065,7))]})}},function(e,t,n){e.exports=function(e){n(2)(e,["ira-conversion-pick-positions","ira-destination-account","ira-recharacterization","ira-request-status","ira-sequence-completion","ira-sequence-review"],function(){return[n.e(17).then(n.t.bind(null,2066,7)),n.e(17).then(n.t.bind(null,2067,7)),n.e(17).then(n.t.bind(null,2068,7)),n.e(17).then(n.t.bind(null,2069,7)),n.e(17).then(n.t.bind(null,2070,7)),n.e(17).then(n.t.bind(null,2071,7))]})}},function(e,t,n){e.exports=function(e){n(2)(e,["internal-transfer-linkage","internal-transfer-validation","internal-transfer-linkage-completion"],function(){return[n.e(19).then(n.t.bind(null,2072,7)),n.e(19).then(n.t.bind(null,2073,7)),n.e(19).then(n.t.bind(null,2074,7))]})}},function(e,t,n){e.exports=function(e){n(2)(e,["pea-early-withdrawal-details","pea-operation-type"],function(){return[n.e(20).then(n.t.bind(null,2075,7)),n.e(21).then(n.t.bind(null,2076,7))]})}},function(e,t,n){e.exports=function(e){n(2)(e,["position-authorization-completion","position-instruction-completion","position-method-selection","position-transfer-completion","position-transfer-authorization","position-transfer-details","position-transfer-signature","position-type-selection","position-failed-verification"],function(){return[n.e(34).then(n.t.bind(null,2077,7)),n.e(34).then(n.t.bind(null,2078,7)),n.e(34).then(n.t.bind(null,2079,7)),n.e(34).then(n.t.bind(null,2080,7)),n.e(34).then(n.t.bind(null,2081,7)),n.e(34).then(n.t.bind(null,2082,7)),n.e(34).then(n.t.bind(null,2083,7)),n.e(34).then(n.t.bind(null,2084,7))]})}},function(e,t,n){e.exports=function(e){n(2)(e,["recurring-investment-configuration","recurring-investment-review","recurring-investment-completion","recurring-investment-error"],function(){return[n.e(23).then(n.t.bind(null,2085,7)),n.e(23).then(n.t.bind(null,2086,7)),n.e(23).then(n.t.bind(null,2087,7)),n.e(23).then(n.t.bind(null,2088,7))]})}},function(e,t,n){e.exports=function(e){n(2)(e,["eu-rfp-bank-selection","eu-rfp-consent","eu-rfp-deposit-completion","eu-rfp-instruction-completion"],function(){return[n.e(24).then(n.t.bind(null,2089,7)),n.e(24).then(n.t.bind(null,2090,7)),n.e(24).then(n.t.bind(null,2091,7)),n.e(24).then(n.t.bind(null,2092,7))]})}},function(e,t,n){e.exports=function(e){n(2)(e,["stop-payment-request","stop-payment-completion"],function(){return[n.e(25).then(n.t.bind(null,2093,7)),n.e(25).then(n.t.bind(null,2094,7))]})}},function(e,t,n){e.exports=function(e){n(2)(e,["tbsz-transfer-funds","tbsz-transfer-out","tbsz-transfer-in","tbsz-transfer-out-completion","tbsz-transfer-in-completion","tbsz-transfer-pending"],function(){return[n.e(26).then(n.t.bind(null,2095,7)),n.e(26).then(n.t.bind(null,2096,7)),n.e(26).then(n.t.bind(null,2097,7)),n.e(26).then(n.t.bind(null,2098,7)),n.e(26).then(n.t.bind(null,2099,7)),n.e(26).then(n.t.bind(null,2100,7))]})}},function(e,t,n){e.exports=function(e){n(2)(e,["plaid-authentication","plaid-ach-review"],function(){return[n.e(22).then(n.t.bind(null,2101,7)),n.e(22).then(n.t.bind(null,2102,7))]})}},function(e,t,n){e.exports=function(e){n(1283)(e),n(1285)(e),n(1288)(e),n(1289)(e),n(1290)(e),n(1291)(e),n(1292)(e),n(1293)(e),n(1294)(e),n(1295)(e),n(1297)(e),n(1298)(e),n(1299)(e),n(1300)(e),n(1301)(e),n(1302)(e),n(1303)(e),n(1304)(e),n(1307)(e),n(1308)(e),n(1309)(e),n(1310)(e),n(1331)(e),n(1332)(e),n(1333)(e),n(1334)(e),n(1335)(e)}},function(e,t,n){e.exports=function(e){n(1284)(e)}},function(e,t){e.exports=function(e){e.factory("AchConfirmationService",["$translate","UserPlatformService","NavigationService","ModalService",function(e,t,n,a){var r={confirmAmounts:function(r){if(!t.isSimplifiedPlatform())return a.openModal({title:e.instant("ach.confirm.heading"),templateUrl:"ach-amount-confirmation-modal.component",modalData:{request:r}});n.navigate({title:function(){return e.instant("ach.confirm.heading")},path:"ach-amount-confirmation-page.component",skipFetch:!0,pageData:{request:r}})}};return r}])}},function(e,t,n){e.exports=function(e){n(1286)(e),n(1287)(e)}},function(e,t){e.exports=function(e){e.factory("BankDetailsService",function(){var e={getRoutingNumber:function(e,t){for(var n=0;n<e.routingNumbers.length;++n){var a=e.routingNumbers[n];if(a.routingNumberType===t)return a}}};return e})}},function(e,t){e.exports=function(e){e.factory("BankSearchService",["ResourceService",function(t){var n={fetchBeneficiaryBanks:function(n,a){var r={bankDetails:n,transferParameters:a};return t.create(e.SERVER_PATH+"/Banks",r,!0)},fetchIbanBanks:function(n,a,r){var i={bankAccountNumber:n,country:a,transferParameters:r};return t.create(e.SERVER_PATH+"/Banks/Iban",i,!0)},fetchLinkedBanks:function(n,a,r,i){var o={bankDetails:n,transferParameters:a,linkType:r,ownerBic:i};return t.create(e.SERVER_PATH+"/Banks/Links",o,!0)},fetchManualCorrespondent:function(n,a){var r={bankDetails:n,transferParameters:a};return t.create(e.SERVER_PATH+"/Banks/ManualCorrespondent",r,!0)},fetchParentInstitutions:function(n,a){var r={country:n,transferParameters:a};return t.create(e.SERVER_PATH+"/Banks/Parents",r,!0)},fetchBranches:function(n,a,r){var i={bankDetails:{bankAddress:{country:a},parentRecordKey:n.recordKey},transferParameters:r};return t.create(e.SERVER_PATH+"/Banks/Branches",i,!0)}};return n}])}},function(e,t){e.exports=function(e){function t(t,n){var a={createRequest:function(){var a={id:"CreateRequest",title:t.instant("page.title.BrokerGiftSharesForm"),path:e.FUNDING_APP_ROOT+"/sequences/brokergiftshares/brokerGiftSharesSequence.html",pageData:{sequenceType:"/Apply"},skipFetch:!0};n.navigate(a)},showHistory:function(){var a={id:"ShowHistory",title:t.instant("page.title.BrokerGiftSharesHistory"),path:e.FUNDING_APP_ROOT+"/pages/brokergiftshares/brokerGiftSharesHistory.html",pageData:{sequenceType:"/Add"},skipFetch:!0};n.navigate(a)},navigateToHome:function(){var a={id:"navigateHome",title:t.instant("page.title.BrokerGiftShares"),path:e.FUNDING_APP_ROOT+"/pages/brokergiftshares/brokerGiftShares.html",pageData:{sequenceType:"/Add"},skipFetch:!0};n.navigate(a)}};return a}e.factory("BrokerGiftSharesService",t),t.$inject=["$translate","NavigationService"]}},function(e,t){e.exports=function(e){function t(e,t,n,a,r,i){var o={},s={strongStart:"<strong>",strongEnd:"</strong>",lineBreak:"<br/>",linkEnd:"</a>",unorderedListStart:"<ul>",unorderedListEnd:"</ul>",listItemStart:"<li>",listItemEnd:"</li>"},l=function(e){return"MOBILE_CHECK"===e?"MOBILE_CHECK":"ACH"===e||"EFT"===e?"ACH":-1!==e.indexOf("WIRE")||-1!==e.indexOf("ZENGIN")||-1!==e.indexOf("HK_BANK")||-1!==e.indexOf("SG_BANK")||-1!==e.indexOf("NEFT")||-1!==e.indexOf("RTGS")?"WIRE":-1!==e.indexOf("CHECK")?"CHECK":-1!==e.indexOf("BILL_PAY")||-1!==e.indexOf("BPAY")?"BILL_PAY":e},c=function(t){var n=e.instant(t,s);return n!==t?n:void 0};return o.getSpeedText=function(t,a,r,i,o){var c={},u=l(r);if("DEPOSIT"===t&&"ACH"===r)c.text=e.instant(t.toLowerCase()+".speed."+r+"."+(i?"lite":"pro"),s);else if("DEPOSIT"===t&&"EFT"===r)c.text=e.instant(t.toLowerCase()+".speed."+r,s);else if("DEPOSIT"===t&&"CHECK"===u&&"HKD"===a)c.text=e.instant(t.toLowerCase()+".speed."+a+"."+u,s);else if("WITHDRAWAL"===t){var d=t.toLowerCase()+".speed";d+="ACH"===u||"SEPA"===u?".sameday":"LVP"===u?"GBP"===a?".twofourdays":"HKD"===a?".twothreebusinessdays":".onetwodays":"WIRE"===u?"LLC"!==o||"USD"!==a&&"EUR"!==a&&"GBP"!==a?"."+u:".sameday":"DIRECT_DEBIT"===u?".onetwodays":"."+u,c.text=e.instant(d,s)}else c.text=e.instant(t.toLowerCase()+".speed."+u,s);return"DEPOSIT"===t?-1!==u.indexOf("WIRE")&&"HKD"!==a&&"CNH"!==a||"RFP"===r||"EDDA"===r?(c.label=e.instant("cashMethod.speed.label.fastest"),c.labelClass="text-success",c.imgPath="/images/am/funding-icon-fastest.svg"):"ACH_BANK_LINKAGE"===r||"DIRECT_DEPOSIT"===r||"BILL_PAY"===u||"CCB_FUNDS_TRANSFER_NOTIFICATION"===r||n.isWiseMethod(r)||-1!==u.indexOf("WIRE")&&("HKD"===a||"CNH"===a)||"FPS_NOTIFICATION"===r?(c.label=e.instant("cashMethod.speed.label.fast"),c.labelClass="text-success",c.imgPath="/images/am/funding-icon-fast.svg"):"ACH"!==r&&"EFT"!==r&&-1===r.indexOf("CHECK")||(c.label=e.instant("cashMethod.speed.label.slow"),c.labelClass="text-yellow",c.imgPath="/images/am/funding-icon-slow.svg"):"WITHDRAWAL"===t&&("DIRECT_DEBIT"===u||"ACH"===u||"WIRE"===u||"SEPA"===r||"LVP"===r||n.isWiseMethod(r)?(c.label=e.instant("cashMethod.speed.label.fast"),c.labelClass="text-success",c.imgPath="/images/am/funding-icon-fast.svg"):"CHECK"===u&&(c.label=e.instant("cashMethod.speed.label.slow"),c.labelClass="text-yellow",c.imgPath="/images/am/funding-icon-slow.svg")),c},o.getFeesText=function(r,i,o){var c={},u=l(i);if("DEPOSIT"===r)c.text="BPAY_NOTIFICATION"===i||"CCB_FUNDS_TRANSFER_NOTIFICATION"===i?e.instant("deposit.fees."+i,s):e.instant("deposit.fees."+u,s),"ACH_BANK_LINKAGE"===i||"DIRECT_DEPOSIT"===i||"ACH"===i||"EFT"===i||-1!==i.indexOf("CHECK")||-1!==i.indexOf("BILL_PAY")||"FPS_NOTIFICATION"===i||"RFP"===i||"EDDA"===i?(c.label=e.instant("cashMethod.label.fees.free"),c.labelClass="text-success",c.imgPath="/images/am/funding-icon-no-fees.svg"):(-1!==u.indexOf("WIRE")||-1!==i.indexOf("BPAY")||"CCB_FUNDS_TRANSFER_NOTIFICATION"===i||n.isWiseMethod(i))&&(c.label=e.instant("cashMethod.label.fees.fees"),c.labelClass="text-red",c.imgPath="/images/am/funding-icon-fees.svg");else if("WITHDRAWAL"===r){var d=a.getWithdrawalFee(i,o);0===d?"NEFT"===i||"RTGS"===i||"DIRECT_DEBIT"===i?(c.text=e.instant("withdrawal.fees.nofees"),c.label=e.instant("cashMethod.label.fees.free"),c.labelClass="text-success",c.imgPath="/images/am/funding-icon-no-fees.svg"):(c.text=e.instant("withdrawal.fees.unknownAmount"),"WISE_OUTBOUND"===u&&(c.text+=" "+e.instant("withdrawal.fees.additional."+u)),c.label=e.instant("cashMethod.label.fees.fees"),c.labelClass="text-red",c.imgPath="/images/am/funding-icon-fees.svg"):(s.feeAmount=t(d,o+" "),c.text=e.instant("withdrawal.fees.ibkr",s),"WIRE"!==u&&"CHECK"!==u&&("LVP"!==u||"HKD"!=o&&"CNH"!=o)||(c.text+=" "+e.instant("withdrawal.fees.additional."+u)),c.label=e.instant("cashMethod.label.fees.fees"),c.labelClass="text-red",c.imgPath="/images/am/funding-icon-fees.svg")}return c},o.getStepsText=function(t,n,a){var r={},l=o.getTransactionMethodKey(n,a);return"DEPOSIT"===t?(r.text=e.instant(t.toLowerCase()+".steps."+l,s),"DIRECT_DEPOSIT"===n?(r.label=e.instant("cashMethod.label.steps.1"),r.labelClass="text-success",r.imgPath="/images/am/funding-icon-1-step-bank.svg"):"ACH"===n||"EFT"===n||"WISE_BALANCE"===n||"MOBILE_CHECK"===n?(r.label=e.instant("cashMethod.label.steps.1"),r.labelClass="text-success",r.imgPath="/images/am/funding-icon-1-step-ibkr.svg"):-1!==l.indexOf("BANK_TRANSFER")||-1!==l.indexOf("WIRE")||-1!==n.indexOf("CHECK")||-1!==n.indexOf("BILL_PAY")||-1!==n.indexOf("BPAY")||"FPS_NOTIFICATION"===n||"CCB_FUNDS_TRANSFER_NOTIFICATION"===n||"RFP"===n||"WISE_BANK_NOTIFICATION"===n?(r.label=e.instant("cashMethod.label.steps.2"),r.labelClass="text-yellow",r.imgPath="/images/am/funding-icon-2-step.svg"):"EDDA"===n?(r.label=e.instant("cashMethod.label.steps.2"),r.labelClass="text-yellow",r.imgPath="/images/am/2step_IBKR.png"):"ACH_BANK_LINKAGE"===n&&(r.label=e.instant("cashMethod.label.steps.3"),r.labelClass="text-yellow",r.imgPath="/images/am/funding-icon-2-step.svg")):"WITHDRAWAL"===t&&(r.label=e.instant("cashMethod.label.steps.1"),r.labelClass="text-success",r.imgPath="/images/am/funding-icon-1-step-ibkr.svg",s.sldLinkStart='<a href="'+i.getBaseUrl()+'/securelogin/sls/withdrawallimits.htm" target="_blank">',"DIRECT_DEBIT"===n?(r.label=e.instant("cashMethod.label.steps.3"),r.labelClass="text-success",r.imgPath="/images/am/funding-icon-2-step.svg",r.text=e.instant("withdrawal.steps.DIRECT_DEBIT",s)):r.text="WISE_OUTBOUND"===n?e.instant("withdrawal.steps.wise",s):e.instant("withdrawal.steps.general",s)),r},o.getTradingHoldText=function(t,n,a){var r=l(t);return"CHECK"===r&&"HKD"===n?e.instant("deposit.tradingHold."+n+"."+r,s):c("ACH"===t?"deposit.tradingHold."+t+"."+(a?"lite":"pro"):"EFT"===t?"deposit.tradingHold."+t:"deposit.tradingHold."+r)},o.getWithdrawHoldText=function(t,n){var a=l(t);return"EFT"===t?e.instant("deposit.withdrawHold."+t,s):"BILL_PAY"===a&&"CAD"===n||"CHECK"===a&&"HKD"===n?e.instant("deposit.withdrawHold."+n+"."+a,s):"BPAY_NOTIFICATION"===t?e.instant("deposit.withdrawHold."+t,s):c("deposit.withdrawHold."+a)},o.getDebitHoldText=function(t,n){var a=l(t);return"EFT"===t?e.instant("deposit.debitHold."+t,s):"BILL_PAY"===a&&"CAD"===n||"CHECK"===a&&"HKD"===n?e.instant("deposit.debitHold."+n+"."+a,s):"BPAY_NOTIFICATION"===t?e.instant("deposit.debitHold."+t,s):c("deposit.debitHold."+a)},o.getArrivalTimeText=function(e){return n.isIraNotification(e)?c("deposit.arrivalTime.IRA"):""},o.getLimitationText=function(e){return n.isIraNotification(e)?c("deposit.limitations.IRA"):""},o.getRestrictionText=function(e){return c("deposit.restriction."+e)},o.getDescriptionText=function(t,a,i){var l=angular.copy(s);if("FPS_NOTIFICATION"===a){var c,u=r.getCurrentLanguage();c="zh_CN"===u?"schi":"zh_TW"===u?"chi":"eng",l.linkStart='<a href="https://fps.hkicl.com.hk/'+c+'/fps/consumers/overview.php" target="_blank">'}return n.isIraNotification(a)?e.instant(t.toLowerCase()+".method.description."+a):e.instant(t.toLowerCase()+".info."+o.getTransactionMethodKey(a,i),s)},o.getMethodDetailsText=function(t,a,r){if("HK_BANK_NOTIFICATION"===a)return e.instant(t.toLowerCase()+".details."+a);if(n.isIraNotification(a))return e.instant(t.toLowerCase()+".method.description."+a);var i=t.toLowerCase()+".details."+r+"."+o.getTransactionMethodKey(a,r),s=e.instant(i);return s!==i?s:e.instant(t.toLowerCase()+".details."+o.getTransactionMethodKey(a,r))},o.getFaqText=function(t){return e.instant("faq.title.funding.send.general",{currency:t})},o.getTransactionMethodKey=function(e,t){return o.getLocalTxnMethodName(e,t)?o.getLocalTxnMethodName(e,t):l(e)},o.getLocalTxnMethodName=function(e,t,n){if(e&&t){var a=["CZK","GBP","CHF","ILS","SEK","EUR","PLN","DKK","NOK","SGD","JPY","HUF","CNH","HKD","TRY","NZD","AUD","MXN","AED","ZAR"];if(n){if("ZENGIN_WIRE_NOTIFICATION"==e&&-1!==a.indexOf(t))return"ZENGIN_WIRE_NOTIFICATION";var r=l(e);if("DEPOSIT"==n&&"WIRE"===r&&-1!==a.indexOf(t))return"BANK_TRANSFER"}else{if("WIRE_NOTIFICATION"==e&&-1!==a.indexOf(t))return"BANK_TRANSFER";if("ZENGIN_WIRE_NOTIFICATION"==e&&-1!==a.indexOf(t))return"BANK_TRANSFER"}}return null},o.getHowText=function(e){return"EDDA"===e?c("deposit.how."+e):""},o.getLimitsText=function(e){return"EDDA"===e?c("deposit.limits."+e):""},o.getTimingText=function(e){return"EDDA"===e?c("deposit.timing."+e):""},o.getButtonText=function(t,n){return"DEPOSIT"===t?"ACH"===n||"EFT"===n?e.instant("deposit.method.button.connect"):-1!==n.indexOf("WIRE")||-1!==n.indexOf("CHECK")||-1!==n.indexOf("BILL_PAY")?e.instant("deposit.method.button.instructions"):e.instant("deposit.method.button."+n):"WITHDRAWAL"===t?"DIRECT_DEBIT"===n?e.instant("word.continue"):e.instant("withdraw.method.button"):""},o.getLvpSubText=function(e,t){return"GBP"==t||"HKD"==t||"CNH"==t||"SGD"==t?t+"."+e:"NZD"==t?"ACH":""},o.getMethodName=function(t,n){var a=(t=t||{}).type,r=t.method,i=(t.moneyAmount||{}).currencyType;if(o.getLocalTxnMethodName(r,i,a))return o.getLocalMethodText("transaction.method.",r,i,a);var s="transaction.method."+i+"."+r,l=e.instant(s);if(l!==s)return l;var c="transaction.method."+n+"."+r,u=e.instant(c);return u!==c?u:e.instant("transaction.method."+r)},o.getMethodDisplayName=function(t,n){var a=(t=t||{}).type,r=t.method,i=(t.moneyAmount||{}).currencyType;if(o.getLocalTxnMethodName(r,i,a))return o.getLocalMethodText("cashTransfer.method.",r,i,a);var s="cashTransfer.method."+n+"."+r,l=e.instant(s);if(l!==s)return l;var c="cashTransfer.method."+i+"."+r,u=e.instant(c);if(u!==c)return u;var d="cashTransfer.method."+r,p=e.instant(d);return p!==d?p:o.getMethodName(t)},o.getLocalMethodText=function(t,n,a,r){var i=t+a+"."+o.getLocalTxnMethodName(n,a,r),s=e.instant(i);return i!==s?s:e.instant(t+o.getLocalTxnMethodName(n,a,r))},o.getMethodPageTitle=function(t,n){var a=(t=t||{}).type,r=t.method,i=(t.moneyAmount||{}).currencyType;if("HK_BANK_NOTIFICATION"===r)return e.instant("cashTransfer.title.DEPOSIT.HK_BANK_NOTIFICATION");if("LVP"===r&&("CNH"===i||"HKD"===i)||"RFP"===r)return o.getMethodDisplayName(t,n);if("DEPOSIT"===a&&"LVP"===r){var s=angular.copy(t);return s.method="WIRE",o.getMethodPageTitle(s)}if(o.getLocalTxnMethodName(r,i,a))return o.getMethodDisplayName(t,n);var l="cashTransfer.title."+a+"."+n+"."+r,c=e.instant(l);if(c!==l)return c;var u="cashTransfer.title."+a+"."+i+"."+r,d=e.instant(u);if(d!==u)return d;var p="cashTransfer.title."+a+"."+r,g=e.instant(p);return g!==p?g:e.instant("transaction.type."+a)},o.getTransactionMethodFaqId=function(e){return new Map([["ACH","47455653"],["RFP","206475607"]]).get(e)},o}e.factory("CashMethodTextService",t),t.$inject=["$translate","currencyFilter","FundingService","FundingReferenceService","LanguageService","HelpService"]}},function(e,t){e.exports=function(e){e.factory("CashTransferService",["$filter","$translate","ACTIVE_CONTEXT","ApplicationContext","WiseTransferService","CashMethodTextService","DynamicSequenceService","ModalService",function(e,t,n,a,r,i,o,s){var l={},c=function(e){return"RESTRICTED_ACH_FIRST_DEPOSIT_AMOUNT"==e||"RESTRICTED_ACH_DEPOSIT_DEVICE"===e},u=function(e){if(angular.isDefined(e)&&"DEPOSIT"===e.type){var t=e.formNumber;return 8184===t||8185===t||8186===t}return!1};l.getInitialRecurringInstruction=function(e){if(!angular.isUndefined(e)&&null!==e)return{instructionType:"RECURRING",startDate:e.minStartDate,noEndDate:!0}};var d=function(e){var t=$(e).parent();if(0===t.length)return!1;var n=t.closest(".ng-hide");return 0===n.length||n.parent().is("#amPageContent")};return l.isBankSelectionFormActive=function(){return d("input[name=_bankSelection]")},l.isIbanSearchActive=function(){return d("iban-search-form")},l.getInitializer=function(e,t){return new function(e,t){this.transferParameters=e,this.instructionParameters=t,this.initialize=function(n,a){n.iraRules&&(this.transferParameters.iraParameters={},"WITHDRAWAL"===e.type&&(n.iraRules.allowedDistributionTypes.length>1?-1!==n.iraRules.allowedDistributionTypes.indexOf("NORMAL")&&(this.transferParameters.iraParameters.distributionType="NORMAL"):1==n.iraRules.allowedDistributionTypes.length&&(this.transferParameters.iraParameters.distributionType=n.iraRules.allowedDistributionTypes[0]))),angular.isUndefined(t.verificationMethod)&&(this.instructionParameters.verificationMethod=o.getSequenceData().achVerificationMethod)}}(e,t)},l.submitTransferDetails=function(e){var n={transferDetails:e},a=function(e){n.acknowledgments=e,o.stepForward(n).catch(r)},r=function(n){if(n.data){for(var r=n.data.customErrors||[],i=-1,u=0;u<r.length;++u)if(r[u].startsWith("RES:MISSING_BANK")){i=u;break}if(-1!==i&&(l.isBankSelectionFormActive()?(r.splice(i,1),o.getSequenceData().errors._bankSelection="required"):l.isIbanSearchActive()&&n.data.errors&&n.data.errors.bankAccountNumber&&r.splice(i,1)),0!==r.length){var d=[],p=[],g=[],f=!1;for(u=0;u<r.length;++u){var m=r[u];if(m.startsWith("ACK:")){var v=(m=m.substring(4)).indexOf(":"),h=m.substring(0,v),b={};b.name=h,b.acknowledged=!1,v=(m=m.substring(v+1)).indexOf(":");for(var y=m.indexOf("|");-1!==v&&y>v;){var D=m.substring(0,v),E=m.substring(v+1,y);b[D]="true"===E||"false"!==E&&E,v=(m=m.substring(y+1)).indexOf(":"),y=m.indexOf("|")}b.message=m,d.push(b)}else if(m.startsWith("RES:")){v=(m=m.substring(4)).indexOf(":"),h=m.substring(0,v);m=m.substring(v+1),p.push(m),f=c(h)}else p.push(m)}if(d.length>0){var x=function(a){(function(e,n,a){if(function(e){return"HIGH_RISK_NEEDS_DEPOSIT_VERIFICATION"===e||"UNRELATED_COUNTRY"===e||"UKRAINE_PERSONAL_REMITTANCE"===e}(e.name))return s.openWarningModal({templateUrl:"funding-approval-explanation-modal.component",modalData:{reviewReason:e.name,inputLanguage:n.inputLanguage}});if("FULL_EQUITY_WITHDRAWAL"===e.name)return s.openWarningModal({title:t.instant("word.attention"),templateUrl:"full-equity-withdrawal-acknowledgment-modal.component",modalData:{acknowledgment:e,transferDetails:a}});if("HK_BANK_CONFIRM"===e.name)return s.openInfoModal({title:t.instant("transfer.linkHkBank.confirmBank"),templateUrl:"hk-bank-confirmation-modal.component",modalData:{bankAccount:n.instructionParameters.beneficiaryBankAccount}});if("WISE_TRANSFER_CONFIRM"===e.name)return s.openInfoModal({title:t.instant("cashTransfer.confirmation.wise.title"),templateUrl:"wise-transfer-confirm-modal.component",modalData:{transferParameters:n.transferDetails.transferParameters}});if("TPW_CHANGES"===e.name)return s.openWarningModal({title:t.instant("withdrawal.modal.title.tpwChanges"),templateUrl:"tpw-changes-confirmation-modal.component"});if("IB_KEY_CANDIDATE"===e.name)return s.openModal({title:t.instant("withdrawal.modal.title.promoteibkey"),templateUrl:"promote-ibkey-modal.component"});if("INELIGIBLE_ASSETS"===e.name)return s.openWarningModal({templateUrl:"ineligible-assets-modal.component",modalData:{ineligibleAssets:n.ineligibleAssets,acknowledgmentName:e.name,transferParameters:a.transferParameters}});var r={alignment:"right",btnType:"primary",fn:function(){s.closeModal(!0)}},i=s.getDefaultCloseButton();return"MARGIN_COMPLIANT_MARGIN_LOAN_WARNING"===e.name||"FULLY_PAID_ASSETS_INTO_MARGIN_ACCT"===e.name?r.label="word.ok":"IRA_DEPOSIT_TYPE_CONFIRMATION"===e.name||"RU_DIVIDENDS_CONSENT"===e.name?r.label="word.confirm":"NOT_USING_WITHDRAW_ALL"===e.name?(r.label="transfer.error.notUsingWithdrawAll.continueButton",i.label="transfer.error.notUsingWithdrawAll.cancelButton"):r.label="word.continue",s.openWarningModal({modalData:{errors:[e.message]},templateUrl:"error-modal.component",buttons:[i,r]})})(a,n.data,e).then(function(e){if(angular.isDefined(e)&&!1!==e){if(angular.isObject(e))for(var t=Object.keys(e),n=0;n<t.length;++n){var r=t[n];a[r]=e[r]}else e&&(a.acknowledged=!0);A()}})},A=function(){var e=d[0];delete e.message,g.push(e),d.shift(),d.length>0?x(d[0]):a(g)};x(d[0])}else s.openErrorModal({modalData:{errors:p,slsError:f},templateUrl:"cash-transfer-error-modal.component"})}}};a([])},l.isRecurringAllowed=function(e,t,n,a){if(angular.isUndefined(e))return!1;if("WITHDRAWAL"===t.type&&"CHECK"===t.method&&n)return!1;if(!n&&"DEPOSIT"===t.type&&angular.isDefined(a)&&!a.createInstruction)return!1;if(angular.isDefined(t.iraParameters))if("DEPOSIT"===t.type){if(-1===e.allowedIraDepositTypes.indexOf(t.iraParameters.iraDepositType))return!1;if(angular.isDefined(t.iraParameters.contributionYear)&&"CURRENT"!==t.iraParameters.contributionYear)return!1}else if("WITHDRAWAL"===t.type)return-1!==e.allowedIraDistributionTypes.indexOf(t.iraParameters.distributionType);return!0},l.getContinueBtnText=function(e){if(angular.isUndefined(e)||angular.isUndefined(e.transferParameters))return t.instant("word.continue");var n=e.transferParameters;if("INTERNAL"===n.type){var a=e.transferParameters.tbszOperation;if(angular.isDefined(a)&&null!==a)return t.instant("word.submit")}if("DEPOSIT"===n.type){if(u(n)||"EDDA"===n.method)return t.instant("word.confirm");if(i.getLocalTxnMethodName(n.method,n.moneyAmount.currencyType))return t.instant("cashTransfer.deposit.details.button."+i.getLocalTxnMethodName(n.method,n.moneyAmount.currencyType));if(-1!==n.method.indexOf("WIRE"))return t.instant("cashTransfer.deposit.details.button.wire");if(-1!==n.method.indexOf("CHECK"))return t.instant("cashTransfer.deposit.details.button.check");if(-1!==n.method.indexOf("WISE"))return t.instant("word.continue");if(/.*NOTIFICATION/.test(n.method))return t.instant("cashTransfer.deposit.details.button.default");if((-1!==n.method.indexOf("ACH")||-1!==n.method.indexOf("EFT"))&&(0===e.instructionId||e.editInstruction))return t.instant("cashTransfer.deposit.details.button.saveBank")}return"WITHDRAWAL"!==n.type||"CHECK"===n.method||0!==e.instructionId&&!e.editInstruction?"CRYPTO_CASH_TRANSFER"===n.method?t.instant("cashTransfer.button.crypto.internal"):t.instant("word.createValue",{value:t.instant("transaction.type."+n.type)}):t.instant("cashTransfer.deposit.details.button.saveBank")},l.showFaq=function(e,t){return"CRYPTO_CASH_TRANSFER"===e.method||n!==a.STANDALONE&&((!angular.isDefined(e.formNumber)||0===e.formNumber)&&("EDDA"!==e.method||!angular.isDefined(t)||null===t||0===t.instructionId))},l.getUnmappedDepositActionTxt=function(e){return i.getLocalTxnMethodName(e.method,e.moneyAmount.currencyType)?t.instant("cashTransfer.deposit.details.action."+i.getLocalTxnMethodName(e.method,e.moneyAmount.currencyType)+".instruction.unmapped"):t.instant("cashTransfer.deposit.details.action.instruction.unmapped")},l.getCashTransferTextMap=function(e,n,a){var o={};if("DEPOSIT"===e.type&&(u(e)?o.amountKey=t.instant("cashTransfer.deposit.details.action.amount.unmapped"):-1!==e.method.indexOf("CHECK")?o.amountKey=t.instant("cashTransfer.deposit.details.action.amount.check"):-1!==e.method.indexOf("BILL")||-1!==e.method.indexOf("BPAY")?o.amountKey=t.instant("cashTransfer.deposit.details.action.amount.billpay"):-1!==e.method.indexOf("ACH")||-1!==e.method.indexOf("EFT")?o.amountKey=t.instant("cashTransfer.deposit.details.action.amount.ach"):"RFP"===e.method?o.amountKey=t.instant("cashTransfer.deposit.details.action.amount.rfp"):"EDDA"===e.method?o.amountKey=void 0:o.amountKey=t.instant("cashTransfer.deposit.details.action.amount.default"),n.instructionBased&&(u(e)?o.instructionKey=l.getUnmappedDepositActionTxt(e):i.getLocalTxnMethodName(e.method,e.moneyAmount.currencyType)?o.instructionKey=t.instant("cashTransfer.deposit.details.action.instruction."+i.getLocalTxnMethodName(e.method,e.moneyAmount.currencyType)):-1!==e.method.indexOf("WIRE")?o.instructionKey=t.instant("cashTransfer.deposit.details.action.instruction.wire"):"EDDA"===e.method&&angular.isUndefined(a)?o.instructionKey=t.instant("cashTransfer.deposit.details.action.instruction.edda"):o.instructionKey=t.instant("cashTransfer.deposit.details.action.instruction.default"))),"WITHDRAWAL"===e.type&&(-1!==e.method.indexOf("WIRE")||-1!==e.method.indexOf("NEFT")||-1!==e.method.indexOf("RTGS")||-1!==e.method.indexOf("ZENGIN")?o.amountKey=t.instant("cashTransfer.withdraw.details.action.amount.wire"):-1!==e.method.indexOf("CHECK")?o.amountKey=t.instant("cashTransfer.withdraw.details.action.amount.check"):-1===e.method.indexOf("ACH")&&-1===e.method.indexOf("LVP")&&-1===e.method.indexOf("SEPA")&&-1===e.method.indexOf("EFT")||(o.amountKey=t.instant("cashTransfer.withdraw.details.action.amount.ach")),n.instructionBased))if(angular.isDefined(a)&&r.isWiseInstruction(a))o.instructionKey=t.instant("cashTransfer.withdraw.details.action.instruction.wise");else if(-1!==e.method.indexOf("WIRE")||-1!==e.method.indexOf("NEFT")||-1!==e.method.indexOf("RTGS")||-1!==e.method.indexOf("ZENGIN"))o.instructionKey=t.instant("cashTransfer.withdraw.details.action.instruction.wire");else if(-1!==e.method.indexOf("CHECK"))o.instructionKey=t.instant("cashTransfer.withdraw.details.action.instruction.check");else if(-1!==e.method.indexOf("ACH")||-1!==e.method.indexOf("LVP")||-1!==e.method.indexOf("SEPA")||-1!==e.method.indexOf("EFT")){var s=i.getMethodName(e);o.instructionKey=t.instant("cashTransfer.withdraw.details.action.instruction.ach",{method:s})}return o},l}])}},function(e,t){e.exports=function(e){e.factory("WithdrawableAmountService",[function(){var e=function(e,t){var n=this;for(var a in n.amount=e.withdrawableAmount||0,n.amountNoBorrow=e.withdrawableNoBorrow||0,n.currency=t||"",n.fdic=e.fdic||!1,n.details=JSON.parse(e.explanation||"{}"),n.details.balanceDetails=n.details.balanceDetails||{},n.cashBalances=n.details.balanceDetails.cashBalances||{},n.cashBalances[n.currency]||(n.cashBalances[n.currency]=0),n.totalCashAcrossCurrencies=n.details.balanceDetails.totalCashAcrossCurrencies,n.heldDeposits=n.details.balanceDetails.heldDeposits||[],n.frozenAmounts=n.details.balanceDetails.frozenAmounts||[],n.linkedAccountBalances=n.details.balanceDetails.linkedAccountBalances||[],n.otherCurrencies=[],n.cashBalances)a!==n.currency&&n.cashBalances[a]>=1&&n.otherCurrencies.push(a);n.showClient=function(){return n.details.showClient},n.autoFx=n.details.autoFxDetails||{},n.requestedCurrencyRestrictedFromWithdrawal=n.details.requestedCurrencyRestrictedFromWithdrawal||!1};return e.prototype.toString=function(){return JSON.stringify({amount:this.amount,amountNoBorrow:this.amountNoBorrow,currency:this.currency,fdic:this.fdic,cashBalances:this.cashBalances,totalCashAcrossCurrencies:this.totalCashAcrossCurrencies,frozenAmounts:this.frozenAmounts,showClient:this.showClient(),autoFx:this.autoFx,heldDeposits:this.heldDeposits.map(function(e){return{amount:e.amount,currency:e.currency,holdDate:e.holdDate,sameBankHoldDate:e.sameBankHoldDate}}),requestedCurrencyRestrictedFromWithdrawal:this.requestedCurrencyRestrictedFromWithdrawal})},{parse:function(t,n){return new e(t||{},n||"")}}}])}},function(e,t){e.exports=function(e){function t(t,n){var a={fetchCashBalances:function(a,r,i){var o={transferParameters:a,transferRules:r};if("INTERNAL"===a.type){if(angular.isUndefined(a.fromAccount)||null===a.fromAccount||""===a.fromAccount)return o;if(angular.isUndefined(a.toAccount)||null===a.toAccount||""===a.toAccount)return o}var s={transferParameters:a};return angular.isDefined(i)&&angular.isDefined(i.beneficiaryBankAccount)&&(s.bankAccount=i.beneficiaryBankAccount),o.fetchingBalances=!0,t.create(e.SERVER_PATH+"/TransferFunds/Balances",s).then(function(e){o.transferableAmounts=e.data,o.failedBalances=angular.isUndefined(o.transferableAmounts)||angular.isUndefined(o.transferableAmounts.withdrawableAmount),o.ibEntity=e.data.ibEntity,o.failedBalances||(o.withdrawableExplanation=n.parse(o.transferableAmounts,o.transferParameters.moneyAmount.currencyType))}).catch(function(e){return o.failedBalances=!0}).finally(function(){return o.fetchingBalances=!1}),o}};return a}e.factory("CashBalanceService",t),t.$inject=["ResourceService","WithdrawableAmountService"]}},function(e,t){function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,r(a.key),a)}}function r(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}e.exports=function(e){e.factory("FundingSequenceBarService",[function(){var e=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.stepName=t,this.stepIndex=n,this.stepText="funding.progressBar.stepText."+this.stepName,this.stepClass="step",this.isSuccessOrFailure=!1,this.stepSubText=""}var t,n,r;return t=e,(n=[{key:"markSuccess",value:function(){this.isSuccessOrFailure=!0,this.stepClass=this.stepClass+" success",this.stepIcon="fa-solid fa-circle-check"}},{key:"markFailure",value:function(){this.isSuccessOrFailure=!0,this.stepClass=this.stepClass+" failure",this.stepIcon="fa-solid fa-circle-exclamation",this.stepText="funding.progressBar.stepText.RequestRejected"}},{key:"activateStep",value:function(){this.stepClass=this.stepClass+" active"}},{key:"setSubText",value:function(e){this.stepSubText=e}}])&&a(t.prototype,n),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),t=new e("AchSavedInstructionCashTransfer",0),n=[t,new e("RfpTransferAcknowledgement",1),new e("RfpCompletion",2)],r=new e("signClientConfirm",1),i={RFP:n,ACH:[t,r,new e("CashTransferCompletion",2)],ACH_RECURR:[t,r,new e("CashInstructionCompletion",2)]},o={getIndexOfStep:function(e,t){var n=-1;return t?(t.forEach(function(t){t.stepName===e&&(n=t.stepIndex)}),n):n},getConfiguredPoints:function(e,t){return i[e]},handleFinalStepPoint:function(e,t,n,a){n&&t&&t.setSubText(n),!e||"CashTransferCompletion"!==e.stepName&&"CashInstructionCompletion"!==e.stepName||e.markSuccess(),e&&"RfpCompletion"===e.stepName&&a&&("COMPLETED"===a?e.markSuccess():"REJECTED"!==a&&"ERROR"!==a||e.markFailure())},getSequenceBarPoints:function(t){var n=t.transferMethod,a=t.currentStepName,r=t.optionalReferenceNumber,i=t.optionalStatus,s=[],l=o.getConfiguredPoints(n,a),c=o.getIndexOfStep(a,l);return-1===c?s:(l.forEach(function(t){var n=new e(t.stepName,t.stepIndex);n.stepIndex<c&&n.markSuccess(),n.stepIndex===c&&n.activateStep(),n.stepIndex===c&&n.stepIndex===l.length-1&&o.handleFinalStepPoint(n,s[0],r,i),s.push(n)}),s)}};return o}])}},function(e,t){e.exports=function(e){function t(t,n){var a={requestPrimaryCard:function(){var a={id:"RequestPrimaryCard",title:t.instant("page.title.RequestPrimaryCard"),path:e.FUNDING_APP_ROOT+"/sequences/icm/icmSequence.html",pageData:{sequenceType:"/Apply"},skipFetch:!0};n.navigate(a)},requestAdditionalCard:function(){var a={id:"RequestAdditionalCard",title:t.instant("page.title.RequestAdditionalCard"),path:e.FUNDING_APP_ROOT+"/sequences/debitcard/debitCardSequence.html",pageData:{sequenceType:"/Add"},skipFetch:!0};n.navigate(a)}};return a}e.factory("DebitCardService",t),t.$inject=["$translate","NavigationService"]}},function(e,t,n){e.exports=function(e){n(1296)(e)}},function(e,t){e.exports=function(e){e.factory("IbDestinationService",["$translate","amAddressFilter","amBankAccountNumberFilter","BankDetailsService",function(e,t,n,a){var r={getBankHtml:function(e,n){if("HK"===(n=n||"DEFAULT")){var r=a.getRoutingNumber(e.bank,"HONG_KONG"),i=angular.isDefined(r)?r.routingNumber.substring(0,3):"";return e.bank.bankName+" ("+i+")"}var o=e.bank.bankName;return o+="<br>",o+=t(e.bank.bankAddress,"long")},getBankAccountTitleHtml:function(e,n){if("HK"===(n=n||"DEFAULT"))return e.accountTitle;var a=e.accountTitle;return a+="<br>",a+=t(e.accountAddress,"long")},getBankAccountNumberHtml:function(t,i){if("HK"===(i=i||"DEFAULT")){var o=a.getRoutingNumber(t.bankAccount.bank,"HONG_KONG"),s=angular.isDefined(o)?o.routingNumber.substring(3):"",l=t.bankAccount.bankAccountNumber.accountNumber.replaceAll("-","");return s.length>0&&l.length>s.length&&s===l.substring(0,s.length)&&(l=l.substring(s.length)),s+" - "+l}if("CAD"===t.currencyType&&"CAN"===t.bankAccount.bank.bankAddress.country.alpha3){var c='<div class="row">';return c+='<div class="col-4"><p class="text-right"><span>'+(u=t.bankAccount.bankAccountNumber.accountNumber).substring(0,5)+"</span></p></div>",c+='<div class="col-4"><p><span>'+u.substring(5)+"</span></div>",c+="</div>",c+='<div class="row">',c+='<div class="col-4"><p class="text-small text-gray text-right"><span>'+e.instant("routingNumber.type.TRANSIT_CODE")+"</span></p></div>",c+='<div class="col-4"><p class="text-small text-gray"><span>'+e.instant("transfer.label.accountNumber")+"</span></p></div>",c+="</div>"}if("HU"===i){var u;c='<div class="row">';return c+='<div class="col-3"><p><span>'+(u=t.bankAccount.bankAccountNumber.accountNumber).substring(4,7)+"</span></p></div>",c+='<div class="col-4"><p><span>'+u.substring(7,11)+"</span></p></div>",c+='<div class="col-5"><p><span>'+u.substring(11)+"</span></div>",c+="</div>",c+='<div class="row">',c+='<div class="col-3"><p class="text-small text-gray"><span>'+e.instant("transfer.label.bankCode")+"</span></p></div>",c+='<div class="col-4"><p class="text-small text-gray"><span>'+e.instant("transfer.label.branchCode")+"</span></p></div>",c+='<div class="col-5"><p class="text-small text-gray"><span>'+e.instant("transfer.label.accountNumber")+"</span></p></div>",c+="</div>"}c=n(t.bankAccount.bankAccountNumber);return c+="<br>",c+='<div class="margin-top-10"></div>',t.usingVan&&(c+='<p class="text-small text-gray"><i class="fa fa-info-circle"></i>&nbsp;',c+=r.getVanWarningText(t),c+="</p>"),c},getVanWarningText:function(t){var n=t.bankAccount.bankAccountNumber.accountNumber,a=t.beneficiaryAccount;if(n.includes(a)){var r=n.search(a),i=n.substring(0,r),o=n.substring(r);return e.instant("transfer.warning.deposit.notification.vanWithAcct",{van:n,lineBreak:"<br/>",ibAcctNo:o,citiAcctNo:i,strongStart:"<strong>",strongEnd:"</strong>"})}return e.instant("transfer.warning.deposit.notification.van")}};return r}])}},function(e,t){e.exports=function(e){function t(e){var t={getEddaFaqLink:function(){var t=e.getCurrentLanguage();return"https://ibkr.info"+("zh_CN"===t?"/zh-hans/article":"zh_TW"===t?"/zh-hant/article":"/node")+"/4757"}};return t}e.factory("FundingFaqService",t),t.$inject=["LanguageService"]}},function(e,t){e.exports=function(e){function t(e,t,n,a){var r={openSavedInformationModal:function(e,t){return a.openInfoModal({title:r.getInstructionNameText(e),templateUrl:"cash-instruction-info.component",modalData:{instruction:e,type:t}})},deleteSavedInformation:function(t){var n={title:"EDDA"===t.instruction.instructionType?e.instant("modal.title.EddaDeleteInstruction",{instructionName:t.instruction.instructionName}):e.instant("modal.title.DeleteInstruction"),templateUrl:"instruction-delete-modal.component",modalData:{information:t}};return a.openModal(n)},editSavedInformation:function(t){var n={title:e.instant("modal.title.EditInstruction"),templateUrl:"instruction-edit-modal.component",modalData:{information:t}};return a.openModal(n)},getInstructionSubText:function(a){if(n.isWiseInstruction(a))return"ALL"!==a.currencyType?"("+a.currencyType+")":"";if("INTERNAL_TRANSFER_LINKAGE"===a.instructionType)return"("+a.sourceAccount+" -> "+a.destinationAccount+")";if("RECURRING"===a.instructionType){var r=t.getMethodName(a.transferParameters);return"("+a.transferParameters.moneyAmount.currencyType+" "+r+")"}var i="";if(angular.isDefined(a.currencyType)&&"UNKNOWN"!==a.currencyType&&(i+=a.currencyType),angular.isDefined(a.subMethod))if("LVP"==a.subMethod){var o=t.getLvpSubText(a.subMethod,a.currencyType);i+=(i.length?" ":"")+e.instant("transaction.method."+o)}else i+=(i.length?" ":"")+e.instant("transaction.method."+a.subMethod);else angular.isDefined(a.method)&&(i+=(i.length?" ":"")+e.instant("transaction.method."+a.method));return"NOTIFICATION"!==a.instructionType&&"EDDA"!==a.instructionType||(i+=(i.length?" ":"")+e.instant("instruction.type."+a.instructionType)),i.length?"("+i+")":""},getInstructionNameText:function(e){if(!n.isWiseInstruction(e))return e.instructionName;var a=n.getAssociatedParameters(e);return t.getMethodName(a)},getInstructionMethodText:function(a,r){if(n.isWiseInstruction(a))return"";var i={type:r};if(angular.isDefined(a.associatedMethod))i.method=a.associatedMethod;else if("DEPOSIT"===r){if("RFP"===a.instructionType)i.method=a.instructionType;else if(angular.isDefined(a.subMethod))i.method=a.subMethod;else if("EDDA"===a.instructionType)return e.instant("instruction.type.EDDA")}else"WITHDRAWAL"===r&&("CHECK"===a.instructionType||"EDDA"===a.instructionType?i.method=a.instructionType:i.method=a.subMethod);return i.moneyAmount={currencyType:a.currencyType},t.getMethodName(i)},getInstructionStateText:function(t,n){var a=t.verificationState;return"UNFIXABLE_DISABLED"===a?e.instant("word.disabled"):"FIXABLE"===a||"UNFIXABLE_NO_ACCESS"===a?e.instant("word.verificationRequired"):"ACH"===t.instructionType&&("PENDING"===a&&"ACH_AMOUNTS"===t.invalidPendingReason||"DEPOSIT"===n&&"PENDING_AU10TIX"===t.achInstructionVerificationState)?e.instant("word.verificationRequired"):"EDDA"===t.instructionType&&"NONE"!==t.state?e.instant("eddaInstrution.state."+t.state):"PENDING"===a?e.instant("word.pending"):""}};return r}e.factory("FundingInstructionService",t),t.$inject=["$translate","CashMethodTextService","WiseTransferService","ModalService"]}},function(e,t){e.exports=function(e){function t(t,n,a,r,i){var o={},s=function(e){return{sequenceParameters:{transferDetails:{transferParameters:e}}}},l=function(e){return angular.isDefined(e)&&null!==e},c=function(e,t,n,a){l(t)&&(e.pageData=t),l(n)&&(e.serverParams=n),l(a)&&(e.breadcrumb=a)},u=function(t,n,a){var r={id:"TransferFunds",path:e.FUNDING_APP_ROOT+"/sequences/cash/transferFundsSequence.html"};return c(r,t,n,a),r},d=function(e,t,n){var a=u(e,t,n);i.navigate(a)},p=function(t,n,a){var r=function(t,n,a){var r={id:"TransferPositions",path:e.FUNDING_APP_ROOT+"/sequences/position/transferPositionsSequence.html"};return c(r,t,n,a),r}(t,n,a);i.navigate(r)};return o.restartCashSequence=function(e){e=e||{},r.restartSequence({transferDetails:{transferParameters:e}})},o.goBack=function(e){var n=r.getSequenceData().stepIndex,i=r.getSequenceData().complete,s=t===a.STANDALONE;if(0===n||1===n||s&&i){var l="PARTIAL_WITHDRAWAL"===e.tbszOperation||"ROLLOVER"===e.tbszOperation;("INTERNAL"!==e.type||"FUNDS_TRANSFER"!==e.method&&!l)&&delete e.method,o.restartCashSequence(e)}else n>1&&r.stepBack()},o.goToHomePage=function(e){d(null,null,e)},o.goToCryptoCashTransfer=function(){var e=s({type:"INTERNAL",method:"CRYPTO_CASH_TRANSFER"});e.sequenceParameters.forceDetails=!0;var t=u(e);t.skipFetch=!0,i.navigate(t)},o.goToCashTransfer=function(e,t){var n=s(e);d(n,t)},o.goToPendingDepositTask=function(e,t,n,a){var r={};r.sequenceType="/PendingDepositTask/"+t,r.overrideCompleteFn=n||!1,angular.isDefined(a)&&null!==a&&(r.pendingItem=a);var i={};i.autoSelect=e,d(r,i)},o.goToCashRequestConfirmation=function(e,t){d({sequenceType:"/"+t},{autoSelect:e})},o.goToPositionRequestConfirmation=function(e,t){p({sequenceType:"/"+t},{autoSelect:e})},o.completeFundingSequence=function(e){!function(e){if(angular.isUndefined(e)||null===e)return!1;var t=e.split("/");return Number(t[t.length-1])>0}(r.getSequenceSource())?r.restartSequence():(n.finishPendingRequest(e),i.navigateToPrevBreadcrumb())},o}e.factory("FundingNavigationService",t),t.$inject=["ACTIVE_CONTEXT","AmInterfaceService","ApplicationContext","DynamicSequenceService","NavigationService"]}},function(e,t){e.exports=function(e){function t(){var e={getLvpCutoffTime:function(e){switch(e){case"GBP":return"15:00";case"HKD":case"CNH":return"15:30";case"NZD":return"18:00";case"SGD":return"15:30";default:return""}},getLvpSettlementDate:function(e){switch(e){case"GBP":return"T + 2";case"HKD":case"CNH":return"T + 1";case"NZD":return"T";case"SGD":return"T + 2";default:return""}},getWithdrawalFee:function(e,t){switch(t){case"USD":if("WIRE"===e)return 10;if("CHECK"===e)return 4;if("ACH"===e||"EFT"===e)return 1;break;case"CAD":if("WIRE"===e)return 12;if("EFT"===e)return 2;break;case"MXN":if("WIRE"===e)return 100;break;case"CHF":if("WIRE"===e)return 11;break;case"CZK":if("WIRE"===e)return 300;break;case"DKK":if("WIRE"===e)return 30;break;case"EUR":if("WIRE"==e)return 8;if("SEPA"===e)return 1;break;case"GBP":if("WIRE"===e)return 7;if("LVP"===e)return 1;break;case"HUF":if("WIRE"===e)return 6e3;break;case"ILS":if("WIRE"===e)return 30;break;case"NOK":if("WIRE"===e)return 50;break;case"PLN":if("WIRE"===e)return 40;break;case"RUB":if("WIRE"===e)return 330;break;case"SEK":if("WIRE"===e)return 50;break;case"ZAR":if("WIRE"===e)return 200;break;case"AUD":if("WIRE"===e)return 15;break;case"CNH":if("WIRE"===e)return 60;if("LVP"===e)return 7;break;case"HKD":if("WIRE"===e)return 95;if("LVP"===e)return 8;break;case"JPY":if("WIRE"===e||"ZENGIN"===e)return 1600;break;case"NZD":case"SGD":if("WIRE"===e)return 15;if("LVP"===e)return 1;break;case"AED":if("WIRE"===e)return 18}return 0}};return e}e.factory("FundingReferenceService",t),t.$inject=[]}},function(e,t){e.exports=function(e){function t(e,t,n,a,r,i){var o={getTextVariables:function(o){if(angular.isUndefined(o))return{};var s={successStart:"<span class='text-success'><strong>",successEnd:"</strong></span>",nonBreakingSpace:"&nbsp;"};"ASSET_TRANSFER"===o.type&&angular.isDefined(o.transferInstruction.contraBrokerAccount)&&(s.financialInstitution=o.transferInstruction.contraBrokerAccount.broker.brokerName);if(angular.isUndefined(o.transferInstruction)&&angular.isUndefined(o.transferParameters))return s.method=e.instant("retailRequestType."+o.type),s;if(r.isInstructionRequest(o))s.method=e.instant("transaction.method."+function(e){return"ACH_CHG"===e.type?"LVP"===e.transferInstruction.subMethod?n.getLvpSubText(e.transferInstruction.subMethod,e.transferInstruction.currencyType):e.transferInstruction.subMethod:"BANK_CHG"===e.type?e.transferInstruction.subMethod:"ASSET_INSTRUCTION"===e.type?"ASSET_TRANSFER":"FOP_INSTR_CHG"===e.type?e.transferInstruction.method:e.type}(o));else{var l;r.isRecurringRequest(o)?l=o.transferInstruction.transferParameters:angular.isDefined(o.transferInstruction)&&a.isWiseInstruction(o.transferInstruction)?(l=angular.copy(o.transferParameters)).method=a.getAssociatedParameters(o.transferInstruction).method:l=o.transferParameters,s.method=function(t){if(!t||!t.method||!t.type)return"";var a=n.getMethodName(t),o=t.iraParameters;return o&&o.iraDepositType&&"DIRECT_ROLLOVER"!==o.iraDepositType&&"TRUSTEE_TRANSFER"!==o.iraDepositType?(a+=" (",i.isContribution(o.iraDepositType)&&(o.displayYear?a+=o.displayYear+" ":a+=i.getContributionYear(o.contributionYear)+" "),a+=e.instant("iraDepositType."+o.iraDepositType),a+=")"):r.isNotificationMethod(t.method)?a:"DEPOSIT"!==t.type&&"WITHDRAWAL"!==t.type?"POSITION_INBOUND"===t.type||"POSITION_OUTBOUND"===t.type?e.instant("position.direction."+t.type)+" "+a:"INTERNAL"!==t.type?a:angular.isDefined(t.tbszOperation)&&"UNKNOWN"!==t.tbszOperation?e.instant("transaction.method."+t.tbszOperation):e.instant("internal.transfer.type")+" "+a:"EDDA"===t.method?e.instant("transaction.method.setup.EDDA"):a+" "+e.instant("transaction.type."+t.type)}(l),s.beneficiaryAccount=o.accountId;var c,u=angular.isDefined(l.wiseParameters)&&angular.isDefined(l.wiseParameters.quote)&&angular.isDefined(l.wiseParameters.quote.amountDetails)&&angular.isDefined(l.wiseParameters.quote.amountDetails.sourceAmount);if(l.moneyAmount)"ALL"===(c=l.targetCurrency?l.targetCurrency:"RMB"===l.moneyAmount.currencyType?"CUP"===l.method?"CNY":"CNH":u?l.wiseParameters.quote.amountDetails.sourceAmount.currencyType:l.moneyAmount.currencyType)?s.amount=e.instant("currency.ALL"):u?(s.amount=t(l.wiseParameters.quote.amountDetails.sourceAmount.amount,c+"&nbsp;"),s.currencyType=c):(s.amount=t(l.moneyAmount.amount,c+"&nbsp;"),s.currencyType=c);if("CRYPTO_CASH_TRANSFER"===l.method){var d=l.fromAccount===o.accountId?l.toAccount:l.fromAccount;s.cryptoSegmentType=e.instant("clearingSegmentEntity.type."+r.getCryptoClearingSegmentEntity(d))}}return s}};return o}e.factory("FundingRequestTextService",t),t.$inject=["$translate","currencyFilter","CashMethodTextService","WiseTransferService","FundingService","IraContributionService"]}},function(e,t){e.exports=function(e){function t(e,t,n,a,r,i,o,s){var l={setIbkrLiteInitialFunding:function(e){l.ibkrLiteInitialFunding=e||!1},getFormattedRoutingNumber:function(e){return angular.isUndefined(e)||angular.isUndefined(e.routingNumberType)||angular.isUndefined(e.routingNumber)?"":"TRANSIT_CODE"===e.routingNumberType?e.routingNumber.substr(4)+"-"+e.routingNumber.substr(1,3):"BSB"===e.routingNumberType?e.routingNumber.substr(0,3)+"-"+e.routingNumber.substr(3):"JAPAN"===e.routingNumberType?e.routingNumber.substr(0,4)+" / "+e.routingNumber.substr(4):"HONG_KONG"===e.routingNumberType?e.routingNumber.substr(0,3)+" / "+e.routingNumber.substr(3):e.routingNumber},getUnformattedRoutingNumber:function(e){if(angular.isUndefined(e)||angular.isUndefined(e.routingNumberType)||angular.isUndefined(e.routingNumber))return"";if("TRANSIT_CODE"===e.routingNumberType&&8==e.routingNumber.length){var t=e.routingNumber.substr(0,5);return"0"+e.routingNumber.substr(5)+t}return e.routingNumber},isNotificationMethod:function(e){return!angular.isUndefined(e)&&/.*NOTIFICATION/.test(e)},isMicroCapPositionTransfer:function(e){return!angular.isUndefined(e.transferParameters)&&!angular.isUndefined(e.transferParameters.microCap)&&e.transferParameters.microCap},isIndianMethod:function(e){return"NEFT"===e||"RTGS"===e},isWiseMethod:function(e){return"WISE_BALANCE"===e||"WISE_BANK_NOTIFICATION"===e||"WISE_OUTBOUND"===e},isInstructionRequest:function(e){if(angular.isUndefined(e))return!1;var t=e.type;return"DEPOSIT_SRC"===t||"BANK_CHG"===t||"FOP_INSTR_CHG"===t||"ASSET_INSTRUCTION"===t||"ACH_CHG"===t},isRecurringRequest:function(e){return angular.isDefined(e)&&"SCHED_TRANS"===e.type},getRequestTransactionType:function(e){return"DEPOSIT"===e||"DEPOSIT_SRC"===e?"DEPOSIT":"WITHDRAW"===e||"BANK_CHG"===e||"CHECK_DESTINATION"===e?"WITHDRAWAL":"ACATS"===e||"ATON"===e||"FOP"===e||"DWAC"===e||"DRS"===e||"ASSET_TRANSFER"===e||"FOP_INSTR_CHG"===e||"ASSET_INSTRUCTION"==e?"POSITION_INBOUND":"ACH_CHG"===e?"WITHDRAWAL":"FUNDSTRANSFER"===e||"POS_TRANSFER"===e||"HFCIP_TRANSFER"===e||"HFCIP_REDEMPTION"===e?"INTERNAL":""},getMaskedTaxId:function(e){return t(e.idNumber)},getMaskedTaxIdOrNone:function(n){return"999999999"===n.idNumber||"999999998"===n.idNumber?e.instant("word.none"):t(n.idNumber)},getBankCountryRules:function(e,t){if(angular.isUndefined(e)||angular.isUndefined(t))return{};if(angular.isUndefined(t.accountRules)||angular.isUndefined(t.accountRules.bankRules))return{};var n=t.accountRules.bankRules;return angular.isUndefined(n.bankCountryRules)?{}:n.bankCountryRules[e.alpha3]},shouldShowBankLinks:function(e){if(angular.isUndefined(e)||angular.isUndefined(e.beneficiaryBankAccount)||angular.isUndefined(e.beneficiaryBankLink))return!1;for(var t=e.beneficiaryBankLink;angular.isDefined(t)&&"INTERMEDIARY"!==t.type;)t=t.nextLink;if(angular.isDefined(t)&&"INTERMEDIARY"===t.type)return!0;for(t=e.beneficiaryBankLink;angular.isDefined(t)&&"CORRESPONDENT"!==t.type;)t=t.nextLink;return!angular.isUndefined(t)&&!l.doesRoutingInfoMatch(e.beneficiaryBankAccount.bank,t.account.bank)},shouldDisplayCorrespondent:function(e){for(var t=e;angular.isDefined(t)&&"CORRESPONDENT"!==t.type;)t=t.nextLink;return!angular.isUndefined(t)&&!l.doesRoutingInfoMatch(e.account.bank,t.account.bank)},doesRoutingInfoMatch:function(e,t){for(var n=void 0,a=0;a<e.routingNumbers.length;++a){"BIC"===(i=e.routingNumbers[a]).routingNumberType&&(n=i)}if(angular.isUndefined(n))return!1;var r=void 0;for(a=0;a<t.routingNumbers.length;++a){var i;"BIC"===(i=t.routingNumbers[a]).routingNumberType&&(r=i)}return!angular.isUndefined(r)&&n.routingNumber===r.routingNumber},injectManualBankFields:function(e,t,n){if("CAD"===t&&!n&&!angular.isUndefined(e.bankAddress)&&"CAN"===e.bankAddress.country.alpha3){for(var a=!1,r=0;r<e.routingNumbers.length;++r)"TRANSIT_CODE"===e.routingNumbers[r].routingNumberType&&(a=!0);if(!a)return e.routingNumbers[e.routingNumbers.length]={routingNumber:"",routingNumberType:"TRANSIT_CODE",manual:!0},!0}if("RUB"===t){var i=!1;if(n||angular.isUndefined(e.bankAddress)||"RUS"===e.bankAddress.country.alpha3||(e.bankTaxId={idNumber:"",taxIdType:"INN",manual:!0},i=!0),n||!angular.isUndefined(e.bankAddress)&&"RUS"===e.bankAddress.country.alpha3){var o=!1;for(r=0;r<e.routingNumbers.length;++r)"BIK"===e.routingNumbers[r].routingNumberType&&(o=!0);o||(e.routingNumbers[e.routingNumbers.length]={routingNumber:"",routingNumberType:"BIK",manual:!0}),e.additionalAccountNumber={accountNumber:"",accountNumberType:"CENTRAL_BANK_RUSSIA",manual:!0},i=!0}return i}return!1},clearManualBankFields:function(e){if(e.routingNumbers)for(var t=0;t<e.routingNumbers.length;++t)e.routingNumbers[t].routingNumber=l.getUnformattedRoutingNumber(e.routingNumbers[t]),e.routingNumbers[t].manual=!1;e.additionalAccountNumber&&(e.additionalAccountNumber.manual=!1),e.bankTaxId&&(e.bankTaxId.manual=!1)},getConId:function(e){if(angular.isUndefined(e))return"";for(var t=0;t<(e.ids||[]).length;++t){var n=e.ids[t];if("CONTRACT_ID"===n.type)return n.id}return""},getAssetId:function(e,t){for(var n=0;n<e.ids.length;++n){var a=e.ids[n];if(a.type===t)return a.id}return""},getAssetIndex:function(e,t,n){if(angular.isUndefined(n)&&(n=function(e){return e}),"CASH"===t.type){for(var a=0;a<e.length;++a){if("CASH"===(i=n(e[a])).type&&i.currencyType===t.currencyType)return a}return-1}var r=l.getConId(t);if(""===r)return-1;for(a=0;a<e.length;++a){var i;if("CASH"!==(i=n(e[a])).type&&l.getConId(i)===r)return a}return-1},isRegeResponseRequired:function(e,t){var n=l.getBankCountryRules(t.bankCountry,e);return e.regeRulesApplicable&&!n.regeExempted&&t.beneficiaryBankAccount},checkInstructionName:function(e){return!(!e.createInstruction||!angular.isDefined(e.beneficiaryBankAccount))&&((angular.isUndefined(e.instructionName)||0===e.instructionName.length)&&(e.instructionName=l.getBankInfoNameSuggestion(e.beneficiaryBankAccount)),angular.isDefined(e.instructionName)&&e.instructionName.length>0)},getBankInfoNameSuggestion:function(e){if(angular.isDefined(e)){var t=angular.isDefined(e.bank)?e.bank.bankName:"",n=angular.isDefined(e.bankAccountNumber)?e.bankAccountNumber.accountNumber:"";return 0===t.length||n.length<7?"":t.substring(0,18)+"..."+n.substring(n.length-4)}return""},isWireWithdrawal:function(e,t){return"WITHDRAWAL"===t&&("WIRE"===e||"ZENGIN"===e||"NEFT"===e||"RTGS"===e)},isIraNotification:function(e){return"DIRECT_ROLLOVER_NOTIFICATION"===e||"TRUSTEE_TO_TRUSTEE_NOTIFICATION"===e},getAssetSymbol:function(e){for(var t=0;t<e.length;t++)if("SYMBOL"===e[t].type)return e[t].id;return""},getCryptoClearingSegmentEntity:function(e){if(null!==e&&!angular.isUndefined(e))return-1!==e.indexOf("-P")?"IBL_PAXOS":-1!==e.indexOf("-Z")?"IBL_ZH":void 0},getTzFormattedEdtDate:function(e){var t={year:"numeric",month:"2-digit",day:"2-digit",timeZone:"America/New_York"};return l.isClientInUsOrCanadaTimezone()||(t.timeZoneName="short"),o.toLocaleDate(e+"T00:00:00-05:00",t)},isClientInUsOrCanadaTimezone:function(){var e=(new Date).getTimezoneOffset();return e/60>=3&&e/60<=8},getCadTransactionRestrictionText:function(t,n){return t.amount>0?e.instant("transfer.warning."+n+".cad.limit",{limit:s(t),lineBreak:"<br>"}):e.instant("transfer.warning."+n+".cad.reject",{lineBreak:"<br/>"})},getStrengthAndSecurityTextForCad:function(t){return e.instant("transfer.warning.strengthAndSecurity.cad",{limit:s(t),lineBreak:"<br>"})}};return l}e.factory("FundingService",t),t.$inject=["$translate","amFieldMaskFilter","currencyFilter","FundingReferenceService","IraContributionService","LanguageService","DateTimeService","amMoneyAmountFilter"]}},function(e,t){e.exports=function(e){e.factory("InternalTransferService",["$q","$translate","ResourceService",function(t,n,a){var r={},i={getAccountValues:function(n){for(var i={},o=0;o<n.length;++o){var s=n[o];angular.isDefined(r[s])&&(i[s]=r[s])}if(Object.keys(i).length===n.length){var l=t.defer();return l.resolve(i),l.promise}return a.create(e.SERVER_PATH+"/InternalTransferDisplay",n).then(function(e){var t=e.data.displays;return angular.merge(r,t),t})},getAccountDisplayText:function(e){var t=e.indexOf("/");if(t>0&&t<e.length-1){var a="transfer.internal.segment."+e.substring(0,t),r={acctId:e.substring(t+1)},i=n.instant(a,r);if(i!==a)return i}var o="transfer.internal.segment."+e,s=n.instant(o);return s!==o?s:e}};return i}])}},function(e,t,n){e.exports=function(e){n(1305)(e),n(1306)(e)}},function(e,t){e.exports=function(e){e.factory("IraContributionService",function(){var e={},t=function(e){return angular.isDefined(e)&&null!==e};return e.getContributionYear=function(e,t,n){if(angular.isUndefined(t)&&(t=!1),angular.isUndefined(n)&&(n=new Date),n.setHours(0,0,0,0),"CURRENT"===e){if(t){var a=n.getFullYear();return new Date(a,3,5)>=n?a-1+"/"+a:a+"/"+(a+1)}return n.getFullYear()}return"PRIOR"===e?n.getFullYear()-1:"PRIOR_2"===e?n.getFullYear()-2:0},e.getDisplayYear=function(e,n){if(!t(n)||!t(n.transferYearLookup))return e;var a=n.transferYearLookup[e];return t(a)?a.displayYear:e},e.formatCashierTaxYearToIsa=function(e){return e+"/"+(e+1)},e.isContribution=function(e){return"CONTRIBUTION"===e||"EMPLOYER_SEP_CONTRIBUTION"===e||"EMPLOYEE_SEP_CONTRIBUTION"===e||"SPOUSAL_CONTRIBUTION"===e},e})}},function(e,t){e.exports=function(e){e.factory("IraWithholdingService",function(){var e={getGraduatedWithholdingRate:function(e,t){if(angular.isUndefined(e))return 0;for(var n=void 0,a=0;a<e.graduatedRanges.length;++a){var r=e.graduatedRanges[a];t>=r.minimum&&(t<=r.maximum||-1==r.maximum)&&(n=r)}return angular.isUndefined(n)?0:n.withholdingRate},getForcedWithholdingRate:function(t,n){return angular.isUndefined(t)?0:"GRADUATED_FORCED_CUMULATIVE_DISTRIBUTION_PERCENT"===t.withholdingAmountRequirement?e.getGraduatedWithholdingRate(t,parseFloat(n)+t.cumulativeAmount):"FORCED_TOTAL_DISTRIBUTION_PERCENT"===t.withholdingAmountRequirement?t.minimum:0},getMinimumWithholdingRate:function(t,n,a){return angular.isUndefined(a)&&(a=0),angular.isUndefined(t)?0:"MINIMUM_TOTAL_DISTRIBUTION_PERCENT"===t.withholdingAmountRequirement?t.minimum:"GRADUATED_MINIMUM_TOTAL_DISTRIBUTION_PERCENT"===t.withholdingAmountRequirement?e.getGraduatedWithholdingRate(t,parseFloat(n)):"MINIMUM_FEDERAL_WITHHOLDING_PERCENT"===t.withholdingAmountRequirement?.01*t.minimum*a:e.getForcedWithholdingRate(t,n)},isWithholdingOptional:function(e){return!angular.isUndefined(e)&&("FORCE_ALWAYS"!==e.withholdingRequirement&&"FORCE_NEVER"!==e.withholdingRequired)},isWithholdingModifiable:function(e){return!angular.isUndefined(e)&&("FORCED_TOTAL_DISTRIBUTION_PERCENT"!==e.withholdingAmountRequirement&&"GRADUATED_FORCED_CUMULATIVE_DISTRIBUTION_PERCENT"!==e.withholdingAmountRequirement)}};return e})}},function(e,t){e.exports=function(e){function t(t){var n={fetchOverview:function(n){return t.fetch(e.SERVER_PATH+"/PeaInternalFunds/Overview",{operationType:n},!0)},fetchWithdrawalSummary:function(n,a){return t.create(e.SERVER_PATH+"/PeaInternalFunds/WithdrawalSummary",{withdrawalReason:n,withdrawalAmount:a},!0)}};return n}e.factory("PeaTransferService",t),t.$inject=["ResourceService"]}},function(e,t){e.exports=function(e){function t(e,t){var n={},a={strongStart:"<strong>",strongEnd:"</strong>",lineBreak:"<br/>",linkEnd:"</a>"},r=function(e){return-1!==e.indexOf("ASSET_TRANSFER")?"ASSET_TRANSFER":e},i=function(t){var n=e.instant(t,a);return n!==t?n:void 0};n.getMethodSelectionName=function(t,n){var a;return a="DRS"===t||"DWAC"===t?"positionTransfer.method."+("POSITION_OUTBOUND"===n?"outbound":"inbound")+"."+t:"positionTransfer.method."+r(t),e.instant(a)},n.getMethodDetailsText=function(e,t){return"POSITION_INBOUND"===e?i("positionTransfer.inbound.details."+r(t)):"POSITION_OUTBOUND"===e?i("positionTransfer.outbound.details."+r(t)):""},n.getSpeedText=function(t,n){var a={},i=r(n);return"POSITION_INBOUND"===t?a.text=e.instant("positionTransfer.inbound.speed."+i):"POSITION_OUTBOUND"===t&&(a.text=e.instant("positionTransfer.outbound.speed."+i)),"ASSET_TRANSFER"===i||"ATON"===i?(a.label=e.instant("cashMethod.speed.label.slow"),a.labelClass="text-yellow",a.imgPath="/images/am/funding-icon-slow.svg"):(a.label=e.instant("cashMethod.speed.label.fast"),a.labelClass="text-success",a.imgPath="/images/am/funding-icon-fast.svg"),a},n.getFeesText=function(n,s,l){var c={},u=r(s);if("POSITION_INBOUND"===n)c.text=i("DRS"===s?"positionTransfer.inbound.fees."+l+"."+u:"positionTransfer.inbound.fees."+u);else if("POSITION_OUTBOUND"===n){if("POSITION_OUTBOUND"===n&&"ASSET_TRANSFER"===s){var d="https://"+t+"/en/index.php?f=14718#security-transfer-fees";a.linkStart='<a href="'+d+'" target="_blank">'}c.text=i("positionTransfer.outbound.fees."+u)}return o(s,n)?(c.label=e.instant("cashMethod.label.fees.fees"),c.labelClass="text-red",c.imgPath="/images/am/funding-icon-fees.svg"):(c.label=e.instant("cashMethod.label.fees.free"),c.labelClass="text-success",c.imgPath="/images/am/funding-icon-no-fees.svg"),c};var o=function(e,t){return"DRS"===e||"DWAC"===e||"POSITION_OUTBOUND"===t&&("ASSET_TRANSFER"===e||"SRN_AU"===e)};return n.getStepsText=function(t,n,a){var o={},s=r(n);return a?o.text=i("positionTransfer.inbound.steps.IRA.FOP"):"POSITION_INBOUND"===t?o.text=i("positionTransfer.inbound.steps."+s):"POSITION_OUTBOUND"===t&&(o.text=i("positionTransfer.outbound.steps."+s)),"ASSET_TRANSFER"===s||"DWAC"===n||"FOP"===n?(o.label=e.instant("cashMethod.label.steps.2"),o.labelClass="text-yellow",o.imgPath="/images/am/funding-icon-2-step.svg"):(o.label=e.instant("cashMethod.label.steps.1"),o.labelClass="text-success",o.imgPath="/images/am/funding-icon-1-step-bank.svg"),o},n.getWithdrawHoldText=function(e,t){if("POSITION_INBOUND"===e)return i("positionTransfer.inbound.withdrawHold."+t)},n}e.factory("PositionMethodTextService",t),t.$inject=["$translate","CONTENT_HOST"]}},function(e,t){e.exports=function(e){function t(t,n,a,r,i){var o={initiateTransfer:function(n,o){var s={id:"TransferPositions",path:e.FUNDING_APP_ROOT+"/sequences/position/transferPositionsSequence.html",title:t.instant("user.menu.TransferPositions"),skipFetch:!1,pageData:{sequenceParameters:{transferParameters:n,instructionParameters:o}},breadcrumb:a.REPLACE,menu:r.getMenuEntry("TransferPositions")};i.navigate(s)},goToHomePage:function(e){o.initiateTransfer({type:e},{})},isInstructableMethod:function(e,t){return"POSITION_INBOUND"===e?"INDIA_ASSET_TRANSFER"===t||"FUTURES_TRANSFER"===t||"ACATS_PTF"===t||"CADRS"===t||"ISI_TRANSFER"===t:"POSITION_OUTBOUND"===e&&("INDIA_ASSET_TRANSFER"===t||"FUTURES_TRANSFER"===t||"CADRS"===t||"ISI_TRANSFER"===t||"CHARITABLE_DONATION"===t)}};return o}e.factory("PositionTransferService",t),t.$inject=["$translate","AlphaTestService","BreadcrumbAction","MenuService","NavigationService"]}},function(e,t,n){var a=n(12);e.exports=function(e){e.factory("FundingIbKeyService",["ResourceService",function(e){var t={generateQrCode:function(t){return angular.isDefined(t)||(t=angular.element("#qrcode")[0]),e.fetch("/sso/qr-codes",{ACTION:"GENERATE"}).then(function(e){return!(!e||!e.data.QR_CODE_URL)&&(a.toCanvas(t,e.data.QR_CODE_URL,{},function(e){e&&console.error(e)}),!0)}).catch(function(e){JSON.stringify(e)})}};return t}])}},function(e,t){e.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},function(e,t,n){var a=n(8),r=n(6),i=n(310),o=n(1313),s=n(1314),l=n(1315),c=n(1316),u=n(1317),d=n(401),p=n(1318),g=n(1321),f=n(1322),m=n(7),v=n(1323),h=n(309);function b(e,t,n){var a,r,i=e.size,o=f.getEncodedBits(t,n);for(a=0;a<15;a++)r=1==(o>>a&1),a<6?e.set(a,8,r,!0):a<8?e.set(a+1,8,r,!0):e.set(i-15+a,8,r,!0),a<8?e.set(8,i-a-1,r,!0):a<9?e.set(8,15-a-1+1,r,!0):e.set(8,15-a-1,r,!0);e.set(i-8,8,1,!0)}function y(e,t,n){var i=new o;n.forEach(function(t){i.put(t.mode.bit,4),i.put(t.getLength(),m.getCharCountIndicator(t.mode,e)),t.write(i)});var s=8*(r.getSymbolTotalCodewords(e)-d.getTotalCodewordsCount(e,t));for(i.getLengthInBits()+4<=s&&i.put(0,4);i.getLengthInBits()%8!=0;)i.putBit(0);for(var l=(s-i.getLengthInBits())/8,c=0;c<l;c++)i.put(c%2?17:236,8);return function(e,t,n){for(var i=r.getSymbolTotalCodewords(t),o=d.getTotalCodewordsCount(t,n),s=i-o,l=d.getBlocksCount(t,n),c=l-i%l,u=Math.floor(i/l),g=Math.floor(s/l),f=g+1,m=u-g,v=new p(m),h=0,b=new Array(l),y=new Array(l),D=0,E=new a(e.buffer),x=0;x<l;x++){var A=x<c?g:f;b[x]=E.slice(h,h+A),y[x]=v.encode(b[x]),h+=A,D=Math.max(D,A)}var C,T,S=new a(i),I=0;for(C=0;C<D;C++)for(T=0;T<l;T++)C<b[T].length&&(S[I++]=b[T][C]);for(C=0;C<m;C++)for(T=0;T<l;T++)S[I++]=y[T][C];return S}(i,e,t)}function D(e,t,n,a){var i;if(h(e))i=v.fromArray(e);else{if("string"!=typeof e)throw new Error("Invalid data");var o=t;if(!o){var d=v.rawSplit(e);o=g.getBestVersionForData(d,n)}i=v.fromString(e,o||40)}var p=g.getBestVersionForData(i,n);if(!p)throw new Error("The amount of data is too big to be stored in a QR Code");if(t){if(t<p)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+p+".\n")}else t=p;var f=y(t,n,i),m=r.getSymbolSize(t),D=new s(m);return function(e,t){for(var n=e.size,a=c.getPositions(t),r=0;r<a.length;r++)for(var i=a[r][0],o=a[r][1],s=-1;s<=7;s++)if(!(i+s<=-1||n<=i+s))for(var l=-1;l<=7;l++)o+l<=-1||n<=o+l||(s>=0&&s<=6&&(0===l||6===l)||l>=0&&l<=6&&(0===s||6===s)||s>=2&&s<=4&&l>=2&&l<=4?e.set(i+s,o+l,!0,!0):e.set(i+s,o+l,!1,!0))}(D,t),function(e){for(var t=e.size,n=8;n<t-8;n++){var a=n%2==0;e.set(n,6,a,!0),e.set(6,n,a,!0)}}(D),function(e,t){for(var n=l.getPositions(t),a=0;a<n.length;a++)for(var r=n[a][0],i=n[a][1],o=-2;o<=2;o++)for(var s=-2;s<=2;s++)-2===o||2===o||-2===s||2===s||0===o&&0===s?e.set(r+o,i+s,!0,!0):e.set(r+o,i+s,!1,!0)}(D,t),b(D,n,0),t>=7&&function(e,t){for(var n,a,r,i=e.size,o=g.getEncodedBits(t),s=0;s<18;s++)n=Math.floor(s/3),a=s%3+i-8-3,r=1==(o>>s&1),e.set(n,a,r,!0),e.set(a,n,r,!0)}(D,t),function(e,t){for(var n=e.size,a=-1,r=n-1,i=7,o=0,s=n-1;s>0;s-=2)for(6===s&&s--;;){for(var l=0;l<2;l++)if(!e.isReserved(r,s-l)){var c=!1;o<t.length&&(c=1==(t[o]>>>i&1)),e.set(r,s-l,c),-1==--i&&(o++,i=7)}if((r+=a)<0||n<=r){r-=a,a=-a;break}}}(D,f),isNaN(a)&&(a=u.getBestMask(D,b.bind(null,D,n))),u.applyMask(a,D),b(D,n,a),{modules:D,version:t,errorCorrectionLevel:n,maskPattern:a,segments:i}}t.create=function(e,t){if(void 0===e||""===e)throw new Error("No input text");var n,a,o=i.M;return void 0!==t&&(o=i.from(t.errorCorrectionLevel,i.M),n=g.from(t.version),a=u.from(t.maskPattern),t.toSJISFunc&&r.setToSJISFunction(t.toSJISFunc)),D(e,n,o,a)}},function(e,t){function n(){this.buffer=[],this.length=0}n.prototype={get:function(e){var t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(var n=0;n<t;n++)this.putBit(1==(e>>>t-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},e.exports=n},function(e,t,n){var a=n(8);function r(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new a(e*e),this.data.fill(0),this.reservedBit=new a(e*e),this.reservedBit.fill(0)}r.prototype.set=function(e,t,n,a){var r=e*this.size+t;this.data[r]=n,a&&(this.reservedBit[r]=!0)},r.prototype.get=function(e,t){return this.data[e*this.size+t]},r.prototype.xor=function(e,t,n){this.data[e*this.size+t]^=n},r.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},e.exports=r},function(e,t,n){var a=n(6).getSymbolSize;t.getRowColCoords=function(e){if(1===e)return[];for(var t=Math.floor(e/7)+2,n=a(e),r=145===n?26:2*Math.ceil((n-13)/(2*t-2)),i=[n-7],o=1;o<t-1;o++)i[o]=i[o-1]-r;return i.push(6),i.reverse()},t.getPositions=function(e){for(var n=[],a=t.getRowColCoords(e),r=a.length,i=0;i<r;i++)for(var o=0;o<r;o++)0===i&&0===o||0===i&&o===r-1||i===r-1&&0===o||n.push([a[i],a[o]]);return n}},function(e,t,n){var a=n(6).getSymbolSize;t.getPositions=function(e){var t=a(e);return[[0,0],[t-7,0],[0,t-7]]}},function(e,t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var n=3,a=3,r=40,i=10;function o(e,n,a){switch(e){case t.Patterns.PATTERN000:return(n+a)%2==0;case t.Patterns.PATTERN001:return n%2==0;case t.Patterns.PATTERN010:return a%3==0;case t.Patterns.PATTERN011:return(n+a)%3==0;case t.Patterns.PATTERN100:return(Math.floor(n/2)+Math.floor(a/3))%2==0;case t.Patterns.PATTERN101:return n*a%2+n*a%3==0;case t.Patterns.PATTERN110:return(n*a%2+n*a%3)%2==0;case t.Patterns.PATTERN111:return(n*a%3+(n+a)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}}t.isValid=function(e){return null!=e&&""!==e&&!isNaN(e)&&e>=0&&e<=7},t.from=function(e){return t.isValid(e)?parseInt(e,10):void 0},t.getPenaltyN1=function(e){for(var t=e.size,a=0,r=0,i=0,o=null,s=null,l=0;l<t;l++){r=i=0,o=s=null;for(var c=0;c<t;c++){var u=e.get(l,c);u===o?r++:(r>=5&&(a+=n+(r-5)),o=u,r=1),(u=e.get(c,l))===s?i++:(i>=5&&(a+=n+(i-5)),s=u,i=1)}r>=5&&(a+=n+(r-5)),i>=5&&(a+=n+(i-5))}return a},t.getPenaltyN2=function(e){for(var t=e.size,n=0,r=0;r<t-1;r++)for(var i=0;i<t-1;i++){var o=e.get(r,i)+e.get(r,i+1)+e.get(r+1,i)+e.get(r+1,i+1);4!==o&&0!==o||n++}return n*a},t.getPenaltyN3=function(e){for(var t=e.size,n=0,a=0,i=0,o=0;o<t;o++){a=i=0;for(var s=0;s<t;s++)a=a<<1&2047|e.get(o,s),s>=10&&(1488===a||93===a)&&n++,i=i<<1&2047|e.get(s,o),s>=10&&(1488===i||93===i)&&n++}return n*r},t.getPenaltyN4=function(e){for(var t=0,n=e.data.length,a=0;a<n;a++)t+=e.data[a];return Math.abs(Math.ceil(100*t/n/5)-10)*i},t.applyMask=function(e,t){for(var n=t.size,a=0;a<n;a++)for(var r=0;r<n;r++)t.isReserved(r,a)||t.xor(r,a,o(e,r,a))},t.getBestMask=function(e,n){for(var a=Object.keys(t.Patterns).length,r=0,i=1/0,o=0;o<a;o++){n(o),t.applyMask(o,e);var s=t.getPenaltyN1(e)+t.getPenaltyN2(e)+t.getPenaltyN3(e)+t.getPenaltyN4(e);t.applyMask(o,e),s<i&&(i=s,r=o)}return r}},function(e,t,n){var a=n(8),r=n(1319);function i(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}i.prototype.initialize=function(e){this.degree=e,this.genPoly=r.generateECPolynomial(this.degree)},i.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");var t=new a(this.degree);t.fill(0);var n=a.concat([e,t],e.length+this.degree),i=r.mod(n,this.genPoly),o=this.degree-i.length;if(o>0){var s=new a(this.degree);return s.fill(0),i.copy(s,o),s}return i},e.exports=i},function(e,t,n){var a=n(8),r=n(1320);t.mul=function(e,t){var n=new a(e.length+t.length-1);n.fill(0);for(var i=0;i<e.length;i++)for(var o=0;o<t.length;o++)n[i+o]^=r.mul(e[i],t[o]);return n},t.mod=function(e,t){for(var n=new a(e);n.length-t.length>=0;){for(var i=n[0],o=0;o<t.length;o++)n[o]^=r.mul(t[o],i);for(var s=0;s<n.length&&0===n[s];)s++;n=n.slice(s)}return n},t.generateECPolynomial=function(e){for(var n=new a([1]),i=0;i<e;i++)n=t.mul(n,[1,r.exp(i)]);return n}},function(e,t,n){var a=n(8);if(a.alloc)var r=a.alloc(512),i=a.alloc(256);else r=new a(512),i=new a(256);!function(){for(var e=1,t=0;t<255;t++)r[t]=e,i[e]=t,256&(e<<=1)&&(e^=285);for(t=255;t<512;t++)r[t]=r[t-255]}(),t.log=function(e){if(e<1)throw new Error("log("+e+")");return i[e]},t.exp=function(e){return r[e]},t.mul=function(e,t){return 0===e||0===t?0:r[i[e]+i[t]]}},function(e,t,n){var a=n(6),r=n(401),i=n(310),o=n(7),s=n(402),l=n(309),c=a.getBCHDigit(7973);function u(e,t){return o.getCharCountIndicator(e,t)+4}function d(e,t){var n=0;return e.forEach(function(e){var a=u(e.mode,t);n+=a+e.getBitsLength()}),n}t.from=function(e,t){return s.isValid(e)?parseInt(e,10):t},t.getCapacity=function(e,t,n){if(!s.isValid(e))throw new Error("Invalid QR Code version");void 0===n&&(n=o.BYTE);var i=8*(a.getSymbolTotalCodewords(e)-r.getTotalCodewordsCount(e,t));if(n===o.MIXED)return i;var l=i-u(n,e);switch(n){case o.NUMERIC:return Math.floor(l/10*3);case o.ALPHANUMERIC:return Math.floor(l/11*2);case o.KANJI:return Math.floor(l/13);case o.BYTE:default:return Math.floor(l/8)}},t.getBestVersionForData=function(e,n){var a,r=i.from(n,i.M);if(l(e)){if(e.length>1)return function(e,n){for(var a=1;a<=40;a++)if(d(e,a)<=t.getCapacity(a,n,o.MIXED))return a}(e,r);if(0===e.length)return 1;a=e[0]}else a=e;return function(e,n,a){for(var r=1;r<=40;r++)if(n<=t.getCapacity(r,a,e))return r}(a.mode,a.getLength(),r)},t.getEncodedBits=function(e){if(!s.isValid(e)||e<7)throw new Error("Invalid QR Code version");for(var t=e<<12;a.getBCHDigit(t)-c>=0;)t^=7973<<a.getBCHDigit(t)-c;return e<<12|t}},function(e,t,n){var a=n(6),r=a.getBCHDigit(1335);t.getEncodedBits=function(e,t){for(var n=e.bit<<3|t,i=n<<10;a.getBCHDigit(i)-r>=0;)i^=1335<<a.getBCHDigit(i)-r;return 21522^(n<<10|i)}},function(e,t,n){var a=n(7),r=n(1324),i=n(1325),o=n(1326),s=n(1327),l=n(403),c=n(6),u=n(1328);function d(e){return unescape(encodeURIComponent(e)).length}function p(e,t,n){for(var a,r=[];null!==(a=e.exec(n));)r.push({data:a[0],index:a.index,mode:t,length:a[0].length});return r}function g(e){var t,n,r=p(l.NUMERIC,a.NUMERIC,e),i=p(l.ALPHANUMERIC,a.ALPHANUMERIC,e);return c.isKanjiModeEnabled()?(t=p(l.BYTE,a.BYTE,e),n=p(l.KANJI,a.KANJI,e)):(t=p(l.BYTE_KANJI,a.BYTE,e),n=[]),r.concat(i,t,n).sort(function(e,t){return e.index-t.index}).map(function(e){return{data:e.data,mode:e.mode,length:e.length}})}function f(e,t){switch(t){case a.NUMERIC:return r.getBitsLength(e);case a.ALPHANUMERIC:return i.getBitsLength(e);case a.KANJI:return s.getBitsLength(e);case a.BYTE:return o.getBitsLength(e)}}function m(e,t){var n,l=a.getBestModeForData(e);if((n=a.from(t,l))!==a.BYTE&&n.bit<l.bit)throw new Error('"'+e+'" cannot be encoded with mode '+a.toString(n)+".\n Suggested mode is: "+a.toString(l));switch(n!==a.KANJI||c.isKanjiModeEnabled()||(n=a.BYTE),n){case a.NUMERIC:return new r(e);case a.ALPHANUMERIC:return new i(e);case a.KANJI:return new s(e);case a.BYTE:return new o(e)}}t.fromArray=function(e){return e.reduce(function(e,t){return"string"==typeof t?e.push(m(t,null)):t.data&&e.push(m(t.data,t.mode)),e},[])},t.fromString=function(e,n){for(var r=function(e,t){for(var n={},r={start:{}},i=["start"],o=0;o<e.length;o++){for(var s=e[o],l=[],c=0;c<s.length;c++){var u=s[c],d=""+o+c;l.push(d),n[d]={node:u,lastCount:0},r[d]={};for(var p=0;p<i.length;p++){var g=i[p];n[g]&&n[g].node.mode===u.mode?(r[g][d]=f(n[g].lastCount+u.length,u.mode)-f(n[g].lastCount,u.mode),n[g].lastCount+=u.length):(n[g]&&(n[g].lastCount=u.length),r[g][d]=f(u.length,u.mode)+4+a.getCharCountIndicator(u.mode,t))}}i=l}for(p=0;p<i.length;p++)r[i[p]].end=0;return{map:r,table:n}}(function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];switch(r.mode){case a.NUMERIC:t.push([r,{data:r.data,mode:a.ALPHANUMERIC,length:r.length},{data:r.data,mode:a.BYTE,length:r.length}]);break;case a.ALPHANUMERIC:t.push([r,{data:r.data,mode:a.BYTE,length:r.length}]);break;case a.KANJI:t.push([r,{data:r.data,mode:a.BYTE,length:d(r.data)}]);break;case a.BYTE:t.push([{data:r.data,mode:a.BYTE,length:d(r.data)}])}}return t}(g(e,c.isKanjiModeEnabled())),n),i=u.find_path(r.map,"start","end"),o=[],s=1;s<i.length-1;s++)o.push(r.table[i[s]].node);return t.fromArray(function(e){return e.reduce(function(e,t){var n=e.length-1>=0?e[e.length-1]:null;return n&&n.mode===t.mode?(e[e.length-1].data+=t.data,e):(e.push(t),e)},[])}(o))},t.rawSplit=function(e){return t.fromArray(g(e,c.isKanjiModeEnabled()))}},function(e,t,n){var a=n(7);function r(e){this.mode=a.NUMERIC,this.data=e.toString()}r.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(e){var t,n,a;for(t=0;t+3<=this.data.length;t+=3)n=this.data.substr(t,3),a=parseInt(n,10),e.put(a,10);var r=this.data.length-t;r>0&&(n=this.data.substr(t),a=parseInt(n,10),e.put(a,3*r+1))},e.exports=r},function(e,t,n){var a=n(7),r=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function i(e){this.mode=a.ALPHANUMERIC,this.data=e}i.getBitsLength=function(e){return 11*Math.floor(e/2)+e%2*6},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(e){var t;for(t=0;t+2<=this.data.length;t+=2){var n=45*r.indexOf(this.data[t]);n+=r.indexOf(this.data[t+1]),e.put(n,11)}this.data.length%2&&e.put(r.indexOf(this.data[t]),6)},e.exports=i},function(e,t,n){var a=n(8),r=n(7);function i(e){this.mode=r.BYTE,this.data=new a(e)}i.getBitsLength=function(e){return 8*e},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(e){for(var t=0,n=this.data.length;t<n;t++)e.put(this.data[t],8)},e.exports=i},function(e,t,n){var a=n(7),r=n(6);function i(e){this.mode=a.KANJI,this.data=e}i.getBitsLength=function(e){return 13*e},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(e){var t;for(t=0;t<this.data.length;t++){var n=r.toSJIS(this.data[t]);if(n>=33088&&n<=40956)n-=33088;else{if(!(n>=57408&&n<=60351))throw new Error("Invalid SJIS character: "+this.data[t]+"\nMake sure your charset is UTF-8");n-=49472}n=192*(n>>>8&255)+(255&n),e.put(n,13)}},e.exports=i},function(e,t,n){"use strict";var a={single_source_shortest_paths:function(e,t,n){var r={},i={};i[t]=0;var o,s,l,c,u,d,p,g=a.PriorityQueue.make();for(g.push(t,0);!g.empty();)for(l in s=(o=g.pop()).value,c=o.cost,u=e[s]||{})u.hasOwnProperty(l)&&(d=c+u[l],p=i[l],(void 0===i[l]||p>d)&&(i[l]=d,g.push(l,d),r[l]=s));if(void 0!==n&&void 0===i[n]){var f=["Could not find a path from ",t," to ",n,"."].join("");throw new Error(f)}return r},extract_shortest_path_from_predecessor_list:function(e,t){for(var n=[],a=t;a;)n.push(a),e[a],a=e[a];return n.reverse(),n},find_path:function(e,t,n){var r=a.single_source_shortest_paths(e,t,n);return a.extract_shortest_path_from_predecessor_list(r,n)},PriorityQueue:{make:function(e){var t,n=a.PriorityQueue,r={};for(t in e=e||{},n)n.hasOwnProperty(t)&&(r[t]=n[t]);return r.queue=[],r.sorter=e.sorter||n.default_sorter,r},default_sorter:function(e,t){return e.cost-t.cost},push:function(e,t){var n={value:e,cost:t};this.queue.push(n),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};e.exports=a},function(e,t,n){var a=n(404);t.render=function(e,t,n){var r=n,i=t;void 0!==r||t&&t.getContext||(r=t,t=void 0),t||(i=function(){try{return document.createElement("canvas")}catch(e){throw new Error("You need to specify a canvas element")}}()),r=a.getOptions(r);var o=a.getImageWidth(e.modules.size,r),s=i.getContext("2d"),l=s.createImageData(o,o);return a.qrToImageData(l.data,e,r),function(e,t,n){e.clearRect(0,0,t.width,t.height),t.style||(t.style={}),t.height=n,t.width=n,t.style.height=n+"px",t.style.width=n+"px"}(s,i,o),s.putImageData(l,0,0),i},t.renderToDataURL=function(e,n,a){var r=a;void 0!==r||n&&n.getContext||(r=n,n=void 0),r||(r={});var i=t.render(e,n,r),o=r.type||"image/png",s=r.rendererOpts||{};return i.toDataURL(o,s.quality)}},function(e,t,n){var a=n(404);function r(e,t){var n=e.a/255,a=t+'="'+e.hex+'"';return n<1?a+" "+t+'-opacity="'+n.toFixed(2).slice(1)+'"':a}function i(e,t,n){var a=e+t;return void 0!==n&&(a+=" "+n),a}t.render=function(e,t,n){var o=a.getOptions(t),s=e.modules.size,l=e.modules.data,c=s+2*o.margin,u=o.color.light.a?"<path "+r(o.color.light,"fill")+' d="M0 0h'+c+"v"+c+'H0z"/>':"",d="<path "+r(o.color.dark,"stroke")+' d="'+function(e,t,n){for(var a="",r=0,o=!1,s=0,l=0;l<e.length;l++){var c=Math.floor(l%t),u=Math.floor(l/t);c||o||(o=!0),e[l]?(s++,l>0&&c>0&&e[l-1]||(a+=o?i("M",c+n,.5+u+n):i("m",r,0),r=0,o=!1),c+1<t&&e[l+1]||(a+=i("h",s),s=0)):r++}return a}(l,s,o.margin)+'"/>',p='viewBox="0 0 '+c+" "+c+'"',g='<svg xmlns="http://www.w3.org/2000/svg" '+(o.width?'width="'+o.width+'" height="'+o.width+'" ':"")+p+' shape-rendering="crispEdges">'+u+d+"</svg>\n";return"function"==typeof n&&n(null,g),g}},function(e,t){e.exports=function(e){e.factory("RecurringInvestmentService",["ModalService","$translate","ResourceService","FundingService","PageService","$window","WHITE_BRANDING_DETAILS",function(t,n,a,r,i,o,s){var l={},c=s.isBranded()||!1;l.deleteRecurringInvestment=function(e,a,r){var i={title:n.instant("modal.title.DeleteRecurringInvestment"),templateUrl:"delete-recurring-investment-modal.component",modalData:{recurringInvestment:e,isRedirect:r||!1,rules:a}};return t.openModal(i)},l.openKbArticle=function(){o.open("https://www.ibkr.info/article/4470","_blank")},l.canEditRecurringInvestment=function(e){return"PERPETUAL"!==e.feeType};var u=function(e){var t=e.data.errors,a="";if(angular.isDefined(t)){var r=Object.values(t);if(angular.isArray(r)&&r.length>0)for(var i=0;i<r.length;i++)a=a+" "+n.instant("recurringInvestment.error."+r[i])}var o=c?"":" "+n.instant("recurringInvestment.text.kbarticle",{linkStart:'<a href=https://www.ibkr.info/article/4470 target="_blank">',linkEnd:"</a>"});return e.data.isAssetTradeInFractions?{error:n.instant("recurringInvestment.text.cannotTradeAsset")+a+o}:{error:n.instant("recurringInvestment.text.assetNotTradeInFractions")+o}};return l.openAssetSearchModal=function(o,s){var l={title:n.instant("asset.search.title"),templateUrl:"asset-search-modal.component",modalData:{assetRules:o,assetAdded:function(n){if(angular.isDefined(n))return a.fetch(e.SERVER_PATH+"/RecurringInvestment/canTradeAsset",{conId:r.getConId(n)}).then(function(e){if(!e.data.isAssetTradeInFractions||!e.data.canAccountTradeAsset)return u(e);s(n),t.closeModal()},function(e){return u(e)}).finally(function(){i.setIsPageLoading(!1)})}}};t.openModal(l)},l}])}},function(e,t){e.exports=function(e){function t(e){var t={getInstructionDisplay:function(t){var n,a;if(angular.isUndefined(t.beneficiaryBankAccount))a="UNSPECIFIED",n="";else{a=t.beneficiaryBankAccount.accountType;var r=t.beneficiaryBankAccount.bankAccountNumber;n=r&&r.accountNumber?r.accountNumber.length>4?r.accountNumber.substring(r.accountNumber.length-4):r.accountNumber:""}var i=t.instructionName;return"UNSPECIFIED"!==a&&(i+="<br>",i+='<span class="text-gray">',i+=e.instant("bankAccountType."+a),n.length>0&&(i+=" ("+n+")"),i+="</span>"),i}};return t}e.factory("RfpTransferService",t),t.$inject=["$translate"]}},function(e,t){e.exports=function(e){function t(t,n,a,r){var i={fetchStatement:function(){return a.fetch(e.SERVER_PATH+"/TbszTransfer/DownloadStatement")},downloadStatement:function(e){if(!angular.isUndefined(e)&&null!==e){var n=t.decodeBase64(e.fileContent);t.download("customer-statement.html",n,"text/html")}},openDownloadErrorModal:function(){var e={modalData:{errors:[r.instant("tbsz.transferOut.statement.unavailable")]}};n.openErrorModal(e)}};return i}e.factory("TbszTransferService",t),t.$inject=["FileDownloadService","ModalService","ResourceService","$translate"]}},function(e,t){e.exports=function(e){function t(t,n,a,r,i,o,s,l,c){var u=n.location.origin+e.SERVER_PATH+"/WiseCallback",d={},p={fetchProfiles:function(){return(angular.isUndefined(d.lastFetch)||(new Date-d.lastFetch)/1e3>=30)&&(d.lastFetch=new Date,d.promise=r.fetch(e.SERVER_PATH+"/Wise/Profiles")),d.promise},fetchRules:function(t,n){return r.create(e.SERVER_PATH+"/Wise/Rules",{profileId:t,transferParameters:n})},authorize:function(){return r.create(e.SERVER_PATH+"/Wise/Authorize",{redirectUri:u})},register:function(){return r.create(e.SERVER_PATH+"/Wise/Register",{redirectUri:u})},linkProfile:function(t){return r.create(e.SERVER_PATH+"/Wise/Profiles",t).finally(function(){return delete d.lastFetch})},generateQuote:function(t,n,a){return r.create(e.SERVER_PATH+"/Wise/Quote",{transferParameters:{type:t.type,method:t.method,moneyAmount:t.moneyAmount},amountDetails:n,temporary:a},!0)},fetchQuestionRules:function(t,n){return r.create(e.SERVER_PATH+"/Wise/QuestionRules",{quoteId:t,questionData:n})},confirmRequest:function(t,n){var a=e.SERVER_PATH+"/WiseConfirmation/"+n+"?applicantId="+t;return p.scaRequest(a)},fetchOutboundInstruction:function(t,n){return r.create(e.SERVER_PATH+"/Wise/OutboundInstruction",{profileId:t,transferParameters:n})},downloadReceipt:function(t,n){var a={requestId:t,accountId:n};return r.create(e.SERVER_PATH+"/Wise/Receipts",a,!1,{headers:{Accept:"application/pdf"}}).then(function(e){var n=l.decodeBase64(e.data);l.download("Receipt_"+t+".pdf",n,"application/pdf")})},scaRequest:function(e){return i.injectJavascript("wise_sca","https://unpkg.com/@transferwise/approve-api-action-helpers@latest/dist/main.js").then(function(){var a=t.defer(),r=n.twApproveApiActionHelpers.Mode,i=o.isExternalQa()?r.SANDBOX:r.PRODUCTION;return n.twApproveApiActionHelpers.create({mode:i})(e,{method:"GET"}).then(a.resolve).catch(a.reject),a.promise})},getErrorText:function(e){var t="transfer.wise.error."+e,n=a.instant(t);return t!==n?n:a.instant("internal.error.request_process")},getMessageOrigin:function(){return o.isExternalQa()?"https://sandbox.transferwise.tech":"https://wise.com"},getFormattedDeliveryEstimate:function(e){return c.toLongLocaleDate(e,{timeZoneName:"short"})},getAssociatedParameters:function(e){var t={};return"DEBIT"===e.usageType?(t.type="DEPOSIT",t.method=e.associatedMethod):(t.type="WITHDRAWAL",t.method="WISE_OUTBOUND"),t.moneyAmount={currencyType:e.currencyType},t},isWiseInstruction:function(e){return"WISE"===e.instructionType},event:function(t,n){r.create(e.SERVER_PATH+"/Wise/Event",{eventName:t,eventData:n})}};return p}e.factory("WiseTransferService",t),t.$inject=["$q","$window","$translate","ResourceService","JsService","EnvironmentService","LanguageService","FileDownloadService","DateTimeService"]}},function(e,t){e.exports=function(e){function t(t){var n={recordPlaidEvent:function(n){return t.create(e.SERVER_PATH+"/Plaid/Event",{plaidEvent:n})},requestLinkToken:function(n){return t.create(e.SERVER_PATH+"/Plaid/LinkToken",{transferParameters:n})}};return n}e.factory("PlaidService",t),t.$inject=["ResourceService"]}},function(e,t,n){"use strict";var a=angular.module("ibmarketing.investmentconfig",[]);a.WEBAPP_ROOT="/investmentconfig.webapp",a.SERVER_PATH="/AccountManagement",a.config(["$translatePartialLoaderProvider",function(e){e.addPart("/investmentconfig.webapp/i18n/inv_experience_guidance")}]),n(1337)(a),n(1470)(a),n(1499)(a),n(1680)(a)},function(e,t,n){e.exports=function(e){n(1338)(e),n(1346)(e),n(1357)(e),n(1360)(e),n(1363)(e),n(1374)(e),n(1377)(e),n(1382)(e),n(1384)(e),n(1385)(e),n(1387)(e),n(1389)(e),n(1391)(e),n(1393)(e),n(1395)(e),n(1397)(e),n(1399)(e),n(1401)(e),n(1404)(e),n(1407)(e),n(1409)(e),n(1411)(e),n(1413)(e),n(1414)(e),n(1415)(e),n(1418)(e),n(1420)(e),n(1422)(e),n(1424)(e),n(1426)(e),n(1429)(e),n(1430)(e),n(1432)(e),n(1436)(e),n(1439)(e),n(1440)(e),n(1442)(e),n(1444)(e),n(1449)(e),n(1452)(e),n(1454)(e),n(1455)(e),n(1456)(e),n(1458)(e),n(1459)(e),n(1462)(e),n(1463)(e),n(1465)(e),n(1467)(e),n(1468)(e)}},function(e,t,n){e.exports=function(e){n(1339)(e),n(1341)(e),n(1343)(e),n(1344)(e)}},function(e,t,n){e.exports=function(e){e.component("capabilityDowngrade",{bindings:{capabilityDowngrades:"<"},template:n(1340),controller:["$translate","CONTENT_HOST",function(e,t){var n=this;n.$onInit=function(){n.capabilityDowngrades=n.capabilityDowngrades||[],n.contentHost=t,n.getCapabilityText=function(){return(n.capabilityDowngrades||[]).map(function(t){return e.instant("capability.type."+t.capability)}).filter(function(e,t,n){return n.indexOf(e)===t}).join(", ")}}}]})}},function(e,t){e.exports='<div class="row">\n\t<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n\t\t<p translate="capability.downgrade.message" translate-value-start-tag="<strong>" translate-value-end-tag="</strong>" translate-value-capabilities="{{$ctrl.getCapabilityText()}}"></p>\n\t</div>\n</div>\n<div class="alert alert-gray">\n    <p>\n        <ul>\n            <li ng-repeat="downgrade in $ctrl.capabilityDowngrades" ng-if="downgrade && downgrade.capability !== \'UNKNOWN\' ">\n                <p ng-if="downgrade.capabilityLevel === \'UNKNOWN\'" translate="{{\'capability.downgrade.\' + downgrade.capability}}" translate-values="{ breakTag: \'<br />\', startTag: \'<a href=&quot;https://\' + $ctrl.contentHost + \'/en/index.php?f=24176&quot; target=&quot;_new&quot;>\', endTag: \'</a>\' }"></p>\n                <p ng-if="downgrade.capabilityLevel !== \'UNKNOWN\'" translate="capability.downgrade.capabilityLevel" translate-values="{capability: (\'capability.type.\' + downgrade.capability | translate), capabilityLevel: (\'capabilityLevel.type.\' + downgrade.capabilityLevel | translate), strongStart: \'<strong>\', strongEnd: \'</strong>\'}"></p>\n            </li>\n        </ul>   \n    </p>\n</div>'},function(e,t,n){e.exports=function(e){e.component("capabilityDowngradeReview",{bindings:{downgrades:"<"},template:n(1342),controller:[function(){var e=this;e.$onInit=function(){e.downgrades=e.downgrades||[]}}]})}},function(e,t){e.exports='<div class="row">\n\t<div class="col-12 col-sm-12 col-md-3 col-lg-3">\n\t\t<p class="review-title">{{ \'capability.downgrade.header\' | translate }}</p>\n\t</div>\n\t<div class="col-12 col-sm-12 col-md-7 col-lg-7">\n\t\t<p class="review-value">\n\t\t\t<span ng-repeat="downgrade in $ctrl.downgrades">\n\t\t\t\t{{ \'capability.type.\' + downgrade.capability | translate }}<span ng-if="!$last">{{ \', \' }}</span>\n\t\t\t</span>\n\t\t</p>\n\t</div>\n\t<div class="col-12 col-sm-12 col-md-2 col-lg-2">\n\t\n\t</div>\n</div>\n<hr>\n<br>'},function(e,t){e.exports=function(e){e.component("capabilitySelectionForm",{require:{formServerErrorsCtrl:"^^?formServerErrors"},bindings:{capabilities:"=ngModel",allowedCapabilities:"<"},templateUrl:e.WEBAPP_ROOT+"/components/capabilities/capabilitySelectionForm.html",controller:["$timeout",function(e){var t=this,n=function(e){var n=t.allowedCapabilities.indexOf(e);t.allowedCapabilities.splice(n,1)},a={OPTION:["STOCK"],FOP:["FUTURE","MARGIN"],SSF:["STOCK","FUTURE","MARGIN"],FUTURE:["MARGIN"]};t.$onInit=function(){for(var r in t.capabilities||(t.capabilities=[]),t.getServerErrors=function(){return t.formServerErrorsCtrl&&t.formServerErrorsCtrl.getServerErrors()||{}},t.toggleAddButton=function(){t.displayAddButton=!t.displayAddButton},t.addCapability=function(){if(!angular.isUndefined(t.currentCapability)){var e=t.currentCapability;if(a[e]){var r=a[e];angular.forEach(r,function(e){var a;a=e,t.capabilities.indexOf(a)<0&&t.allowedCapabilities.indexOf(a)>=0&&(t.capabilities.push(a),n(a))})}t.capabilities.push(e),n(e),t.currentCapability=void 0}},t.isRemoveDisabled=function(e){if(angular.isUndefined(e))return!1;var n=!1;return angular.forEach(a,function(a,r){var i=t.capabilities.indexOf(r);i>=0&&(i=a.indexOf(e))>=0&&(n=!0)}),n},t.removeCapability=function(e){var n=t.capabilities.indexOf(e);t.capabilities.splice(n,1),(n=t.allowedCapabilities.indexOf(e))<0&&t.allowedCapabilities.push(e),t.currentCapability=void 0},t.onCapabilityChange=function(){var n=t.currentCapability;angular.isDefined(n)&&null!=n&&n.length>0&&e(function(){t.addCapability(),t.displayAddButton=!0},100)},t.capabilities)n(r);t.displayAddButton=!0,t.currentCapability=void 0}}]})}},function(e,t,n){e.exports=function(e){e.component("downgradingCapabilityModal",{template:n(1345),controller:["ModalService",function(e){var t=this;t.$onInit=function(){t.removedCapabilities=e.getModalData().removedCapabilities||[]}}]})}},function(e,t){e.exports='<capability-downgrade capability-downgrades="$ctrl.removedCapabilities"></capability-downgrade>\n<div class="row">\n\t<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n\t\t<p>{{ \'capability.downgrade.confirm\' | translate}}</p>\n\t</div>\n</div>'},function(e,t,n){e.exports=function(e){n(1347)(e),n(1350)(e),n(1353)(e),n(1355)(e)}},function(e,t,n){e.exports=function(e){var t=n(4).component.ComponentLoadEvent;e.component("financialInfoForm",{bindings:{globalAccountId:"@?",readOnly:"<?"},template:["$element","$attrs",function(e,t){var a="true"===t.readOnly||!1;return n(a?1348:1349)}],controller:["$timeout","$translate","ComponentService","ModalService","FinancialInfoService",function(e,n,a,r,i){var o=this,s=function(){var t=jQuery.Deferred();return i.submit(o.financialInfo).then(function(e){t.resolve(e)},function(a){if(o.errors=a.errors||[],o.exams=a.exams||[],o.capabilityExams=a.capabilityExams||[],o.customErrors=a.customErrors||[],o.customErrors&&o.customErrors.length>0||o.exams&&o.exams.length>0||o.capabilityExams&&o.capabilityExams.length>0){var i={contentClass:"modal-gray",title:n.instant("word.attention"),templateUrl:"financial-info-error-modal.component",modalData:{errors:o.customErrors,exams:o.exams,capabilityExams:o.capabilityExams}};r.openModal(i)}e(function(){t.reject(a)},0,!0)}).finally(function(){}),t.promise()};o.$onInit=function(){o.readOnly=o.readOnly||!1,o.exams=o.exams||[],o.capabilityExams=o.capabilityExams||[],o.customErrors=o.customErrors||[],o.errors={},o.fetchedFinancialInfo=!1,o.getServerErrors=function(){return o.errors},i.fetch({globalAccountId:o.globalAccountId}).then(function(e){o.financialInfo=e.financialInfo,o.rules=e.rules,o.finInfoQuestionnaires=e.finInfoQuestionnaires||[],o.notes=e.notes||[],o.fetchedFinancialInfo=!0},function(e){o.fetchedFinancialInfo=!1}).finally(function(){n.onReady().then(function(){var e=new t("investmentConfig",o.fetchedFinancialInfo);e.submit=s,a.notifyLoad(e)})})}}]})}},function(e,t){e.exports='<div>\r\n    \x3c!-- \r\n        Financial Net Worth\r\n    --\x3e\r\n    <financial-net-worth-review ng-if="$ctrl.financialInfo.financialAssets" financial-net-worth="$ctrl.financialInfo.financialAssets"></financial-net-worth-review>\r\n    \x3c!-- \r\n        Investment Objectives\r\n    --\x3e\r\n    <investment-objectives-review ng-if="$ctrl.financialInfo.objectives.length > 0" objectives="$ctrl.financialInfo.objectives"></investment-objectives-review>\r\n    \x3c!--\r\n        Investment Experience\r\n    --\x3e\r\n    <investment-experiences-review ng-if="$ctrl.financialInfo.experiences" experiences="$ctrl.financialInfo.experiences"></investment-experiences-review>\r\n</div>'},function(e,t){e.exports='<div ng-form="$ctrl.financialInfoConfigForm" form-server-errors="$ctrl.getServerErrors()">\r\n    \x3c!-- \r\n        Financial Info Exams\r\n    --\x3e\r\n    <am-exam ng-if="$ctrl.exams.length > 0" exam-types="$ctrl.exams"></am-exam>\r\n    \x3c!-- \r\n\t\tCapability Exams\r\n\t--\x3e\r\n\t<capability-exam ng-if="$ctrl.capabilityExams.length > 0" exams="$ctrl.capabilityExams"></capability-exam>\r\n    \x3c!-- \r\n        Financial Info Custom Errors\r\n    --\x3e\r\n    <financial-info-error ng-if="$ctrl.customErrors.length > 0" errors="$ctrl.customErrors"></financial-info-error>\r\n    \x3c!-- \r\n        Financial Assets\r\n    --\x3e\r\n    <am-form-financial-net-worth ng-if="$ctrl.rules.assetRules" ng-model="$ctrl.financialInfo.financialAssets" rules="$ctrl.rules.assetRules" questionnaires="$ctrl.finInfoQuestionnaires"></am-form-financial-net-worth>\r\n    \x3c!-- \r\n        Investment Objectives\r\n    --\x3e\r\n    <am-form-investment-objectives ng-if="$ctrl.rules.objectiveRules" ng-model="$ctrl.financialInfo.objectives" rules="$ctrl.rules.objectiveRules"></am-form-investment-objectives>\r\n    \x3c!--\r\n        Investment Experiences\r\n    --\x3e\r\n    <am-form-investment-experiences ng-if="$ctrl.rules.experienceRules" ng-model="$ctrl.financialInfo.experiences" rules="$ctrl.rules.experienceRules"></am-form-investment-experiences>\r\n    \x3c!-- \r\n    \tNotes\r\n    --\x3e\r\n    <am-notes ng-if="$ctrl.notes.length > 0" severity="MEDIUM" notes="$ctrl.notes"></am-notes>\r\n</div>'},function(e,t,n){e.exports=function(e){e.component("financialInfoPanel",{bindings:{financialInfo:"<",configurable:"<"},template:["UserPlatformService",function(e){return e.isSimplifiedPlatform()?n(1351):n(1352)}],controller:["NavigationService",function(t){var n=this;n.$onInit=function(){n.currency=n.financialInfo.financialAssets.currency,n.annualIncome=n.financialInfo.financialAssets.annualNetIncome,n.liquidNetWorth=n.financialInfo.financialAssets.liquidNetWorth,n.netWorth=n.financialInfo.financialAssets.estimatedNetWorth,n.totalAssets=n.financialInfo.financialAssets.totalAssets,n.sourcesOfWealth=n.financialInfo.sourcesOfWealth,n.configure=function(){var n={id:"FinancialInfo",path:e.WEBAPP_ROOT+"/sequences/financialinfo/financialInfoSequence.html",skipFetch:!0};t.navigate(n)}}}]})}},function(e,t){e.exports='<div class="link-row link-icon link-hover" ng-click="$ctrl.configure()">\n\t<div class="link-text">\n\t\t<p>\n\t\t\t<span class="link-label">{{ \'manageAccount.header.financialInfo\' | translate }}</span>\n\t\t\t<span class="link-sublabel">{{ \'financialInfo.label.subtext\' | translate }}</span>\n\t\t</p>\n\t</div>\n\t<div class="btn-group-right">\n\t\t<ul class="btn-icons">\n\t\t\t<li>\n\t\t\t\t<am-button btn-type="icon" btn-icon="fas fa-angle-right"></am-button>\n\t\t\t</li>\n\t\t</ul>\n\t</div>\n</div>'},function(e,t){e.exports='<section class="panel b-0">\r\n    <div class="panel-heading">\r\n        <span class="heading">{{\'manageAccount.header.financialInfo\'| translate}}</span>\r\n        <span class="btn-group-right" ng-if="$ctrl.configurable">\r\n            <am-button btn-type="icon" on-click="$ctrl.configure()" btn-icon="fa-cog" tooltip-text="{{\'word.configure\'| translate}}"></am-button>\r\n            <am-help sub-id="FinancialInfo"></am-help>\r\n        </span>\r\n    </div>\r\n    <div class="panel-body">\r\n        <div class="row">\r\n            <div class="col">\r\n                <div class="link-set">\r\n                    <div class="link-row" ng-if="$ctrl.annualIncome !== undefined">\r\n                        <div class="link-text d-block">\r\n                            <div class="row">\r\n                                <div class="col">\r\n                                    <p>\r\n                                        <span class="link-label">{{ \'financialData.label.annualIncome\' | translate:{currency: $ctrl.currency} }}</span>\r\n                                    </p>\r\n                                </div>\r\n                                <div class="col">\r\n                                    <p>\r\n                                        <span class="link-sublabel">{{ $ctrl.annualIncome.rangeLabel}}</span>\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="link-row" ng-if="$ctrl.netWorth !== undefined">\r\n                        <div class="link-text d-block">\r\n                            <div class="row">\r\n                                <div class="col">\r\n                                    <p>\r\n                                        <span class="link-label">{{ \'financialData.label.netWorth\' | translate:{currency: $ctrl.currency} }}</span>\r\n                                    </p>\r\n                                </div>\r\n                                <div class="col">\r\n                                    <p>\r\n                                        <span class="link-sublabel">{{ $ctrl.netWorth.rangeLabel}}</span>\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="link-row" ng-if="$ctrl.liquidNetWorth !== undefined">\r\n                        <div class="link-text d-block">\r\n                            <div class="row">\r\n                                <div class="col">\r\n                                    <p>\r\n                                        <span class="link-label">{{ \'financialData.label.liquidNetWorth\' | translate:{currency: $ctrl.currency} }}</span>\r\n                                    </p>\r\n                                </div>\r\n                                <div class="col">\r\n                                    <p>\r\n                                        <span class="link-sublabel">{{ $ctrl.liquidNetWorth.rangeLabel}}</span>\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="link-row" ng-if="$ctrl.financialInfo.objectives.length > 0">\r\n                        <div class="link-text d-block">\r\n                            <div class="row">\r\n                                <div class="col">\r\n                                    <p>\r\n                                        <span class="link-label">{{\'financialInfo.label.objectives\'| translate}}</span>\r\n                                    </p>\r\n                                </div>\r\n                                <div class="col">\r\n                                    <p>\r\n                                        <span class="link-sublabel">\r\n                                            <span ng-repeat="objective in $ctrl.financialInfo.objectives| filter: {selected: true}">\r\n                                                {{ \'investmentObjective.type.\' + objective.type | translate }}<span ng-if="!$last">{{ \', \'}}</span>\r\n                                            </span>\r\n                                        </span>\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="link-row" ng-if="$ctrl.sourcesOfWealth.length > 0">\r\n                        <div class="link-text d-block">\r\n                            <div class="row">\r\n                                <div class="col">\r\n                                    <p>\r\n                                        <span class="link-label">{{\'financialData.label.sourceOfFund\'| translate}}</span>\r\n                                    </p>\r\n                                </div>\r\n                                <div class="col">\r\n                                    <div ng-repeat="source in $ctrl.sourcesOfWealth">\r\n                                        <span class="link-sublabel">\r\n                                            {{source.percentage > 0 ? (source.percentage + \'% - \') : \'\'}}\r\n                                            {{\'sourceOfWealth.\' + source.type| translate}}\r\n                                        </span>\r\n                                        <br>\r\n                                        <span ng-if="source.description.length > 0" class="text-muted">\r\n                                            {{source.description}}\r\n                                        </span>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</section>\r\n'},function(e,t,n){e.exports=function(e){e.component("financialInfoReview",{bindings:{financialInfo:"<"},template:n(1354),controller:["FinancialInfoService","ACTIVE_CONTEXT","ApplicationContext",function(e,t,n){var a=this;a.$onInit=function(){a.currency=a.financialInfo.financialAssets.currency,a.annualIncome=a.financialInfo.financialAssets.annualNetIncome,a.liquidNetWorth=a.financialInfo.financialAssets.liquidNetWorth,a.netWorth=a.financialInfo.financialAssets.estimatedNetWorth,a.totalAssets=a.financialInfo.financialAssets.totalAssets,a.financialInfoSelectedObjectives=a.financialInfo.objectives.filter(function(e){return e.selected}),a.getYearRangeText=e.getYearRangeText,a.getTradeRangeText=e.getTradeRangeText,a.isValidExperience=e.isValidExperience,a.isValidNetWorth=e.isValidNetWorth,a.getAssetTypeText=e.getAssetTypeText,a.isAM=t===n.AM_DEPENDENCY,a.showSourcesOfWealth=function(){return a.isAM&&a.financialInfo.sourcesOfWealth.length>0}}}]})}},function(e,t){e.exports='<div class="form-review">\r\n\t\x3c!-- \r\n\t\tAnnual Income\r\n\t--\x3e\r\n\t<am-form-label ng-if="::$ctrl.isValidNetWorth($ctrl.annualIncome)" label-text="{{ \'financialData.label.annualIncome\' | translate:{currency: $ctrl.currency} }}" value-text="{{ $ctrl.annualIncome.rangeLabel }}"></am-form-label>\r\n\t\x3c!-- \r\n\t\tNet Worth\r\n\t--\x3e\r\n\t<am-form-label ng-if="::$ctrl.isValidNetWorth($ctrl.netWorth)" label-text="{{ \'financialData.label.netWorth\' | translate:{currency: $ctrl.currency} }}" value-text="{{ $ctrl.netWorth.rangeLabel }}"></am-form-label>\r\n\t\x3c!-- \r\n\t\tLiquid Net Worth\r\n\t--\x3e\r\n\t<am-form-label ng-if="::$ctrl.isValidNetWorth($ctrl.liquidNetWorth)" label-text="{{ \'financialData.label.liquidNetWorth\' | translate:{currency: $ctrl.currency} }}" value-text="{{ $ctrl.liquidNetWorth.rangeLabel }}"></am-form-label>\r\n\t\x3c!-- \r\n\t\tTotal Assets\r\n\t--\x3e\r\n\t<am-form-label ng-if="::$ctrl.isValidNetWorth($ctrl.totalAssets)" label-text="{{ \'financialData.label.totalAssets\' | translate:{currency: $ctrl.currency} }}" value-text="{{ $ctrl.totalAssets.rangeLabel }}"></am-form-label>\r\n\t\x3c!-- \r\n\t\tInvestment Objectives\r\n\t--\x3e\r\n\t<div class="form-group" ng-if="$ctrl.financialInfoSelectedObjectives.length > 0">\r\n\t    <div class="row">\r\n\t        <div class="col-xs-12 col-sm-12 col-md-6 col-lg-4">\r\n\t            <label class="control-label">{{ \'financialInfo.label.objectives\' | translate}}</label>\r\n\t        </div>\r\n\t        <div class="col-xs-12 col-sm-12 col-md-6 col-lg-8">\r\n\t            <label>\r\n\t                <span ng-repeat="objective in $ctrl.financialInfoSelectedObjectives">\r\n\t                    {{ \'investmentObjective.type.\' + objective.type | translate }}\r\n\t                    <span ng-if="!$last">{{ \', \' }}</span>\r\n\t                </span>\r\n\t            </label>\r\n\t        </div>\r\n\t    </div>\r\n\t</div>\r\n\t\x3c!-- \r\n\t\tInvestment Experiences\r\n\t--\x3e\r\n\t<div class="form-group" ng-if="::$ctrl.isValidExperience(experience)" ng-repeat="(asset, experience) in $ctrl.financialInfo.experiences">\r\n\t\t<div class="row">\r\n\t\t\t<div class="col-xs-12 col-sm-12 col-md-6 col-lg-4">\r\n\t\t\t\t<label class="control-label">{{ $ctrl.getAssetTypeText(experience.label, asset) }}</label>\r\n\t\t\t</div>\r\n\t\t\t<div class="col-xs-12 col-sm-12 col-md-2 col-lg-2">\r\n\t\t\t\t<label>{{ $ctrl.getYearRangeText(experience.years) }}</label>\r\n\t\t\t</div>\r\n\t\t\t<div class="col-xs-12 col-sm-12 col-md-2 col-lg-2">\r\n\t\t\t\t<label>{{ $ctrl.getTradeRangeText(experience.trades) }}</label>\r\n\t\t\t</div>\r\n\t\t\t<div class="col-xs-12 col-sm-12 col-md-2 col-lg-4">\r\n\t\t\t\t<label>{{(\'investmentExperience.knowledge.\' + experience.knowledge | translate)}}</label>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n<br/>\r\n\x3c!-- \r\n\tSources of Wealth\r\n--\x3e\r\n<sources-of-wealth-review ng-if="$ctrl.showSourcesOfWealth()" sources-of-wealth="$ctrl.financialInfo.sourcesOfWealth"></sources-of-wealth-review>'},function(e,t,n){e.exports=function(e){e.component("financialInfoSummary",{template:n(1356),controller:["$q","AM_BRANCH","PageService","ResourceService","NavigationService","FinancialInfoService",function(e,t,n,a,r,i){var o=this;o.$onInit=function(){o.cancelLoading=!1,o.isCoreBranch="CORE"===t,o.configure=i.configure,o.navigateBack=r.navigateToPrevBreadcrumb;var s=function(){var t=[];return t.push(a.fetch(AM_APP_ROOT+"/FinancialInfo").then(function(e){o.configurable=e.data.configurable,o.financialNetWorth=e.data.financialInfo.financialAssets||void 0,o.sourcesOfWealth=e.data.financialInfo.sourcesOfWealth||[],o.objectives=e.data.financialInfo.objectives||[],o.experiences=e.data.financialInfo.experiences||{},o.objectiveRules=e.data.rules.objectiveRules||void 0,o.isValidExperiencePresent=i.isValidExperiencePresent(o.experiences)})),e.all(t)};n.setOnPageLoad(function(){s().finally(function(){o.cancelLoading||n.setIsPageLoading(!1)})})},o.$onDestroy=function(){o.cancelLoading=!0}}]})}},function(e,t){e.exports='<div page-structure="fullPanel" no-border="true">\n\t<div class="trading-permissions">\n\t\t<h2>{{ \'manageAccount.header.financialInfo\' | translate }}</h2>\n\t\t<br>\n\t\t<p>{{ \'financialInfo.message.summary\' | translate }}</p>\n\t\t<hr>\n\t\t<br>\n\t\t\x3c!-- \n\t\t\tFinancial Net Worth Review\n\t\t--\x3e\n\t\t<financial-net-worth-review ng-if="$ctrl.financialNetWorth" financial-net-worth="$ctrl.financialNetWorth" configurable="$ctrl.configurable" configure-fn="$ctrl.configure(\'FINANCIAL_DATA\')" revised="true"></financial-net-worth-review>\n\t\t\x3c!-- \n\t\t\tSOW Review\n\t\t--\x3e\n\t\t<sources-of-wealth-review ng-if="$ctrl.sourcesOfWealth.length > 0" sources-of-wealth="$ctrl.sourcesOfWealth" configurable="$ctrl.configurable" configure-fn="$ctrl.configure(\'SOW\')" revised="true"></sources-of-wealth-review>\n\t\t\x3c!-- \n\t\t\tInvestment Objective Review\n\t\t--\x3e\n\t\t<investment-objectives-review ng-if="$ctrl.objectives.length > 0 && $ctrl.objectiveRules" objectives="$ctrl.objectives" configurable="$ctrl.configurable" configure-fn="$ctrl.configure(\'OBJECTIVE\')" revised="true"></investment-objectives-review>\n\t\t\x3c!-- \n\t\t\tInvestment Experience Review\n\t\t--\x3e\n\t\t<investment-experiences-review ng-if="$ctrl.isValidExperiencePresent" experiences="$ctrl.experiences" configurable="$ctrl.configurable" configure-fn="$ctrl.configure(\'EXPERIENCE\')" revised="true"></investment-experiences-review>\n\t</div>\n</div>\n<div ng-if="$ctrl.configurable" page-buttons>\n\t<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6 order-2 order-sm-1">\n\t\t<div ng-if="::$ctrl.isCoreBranch" class="panel-btn-left">\n\t\t\t<am-button on-click="$ctrl.navigateBack()" btn-text="{{ \'word.back\' | translate }}"></am-button>\n\t\t</div>\n\t</div>\n\t<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6 order-1 order-sm-2">\n\t\t<div class="panel-btn-right">\n\t\t\t<am-button on-click="$ctrl.configure()" btn-type="{{ \'primary\' }}" btn-text="{{ \'word.continue\' | translate }}"></am-button>\n\t\t</div>\n\t</div>\n</div>'},function(e,t,n){e.exports=function(e){n(1358)(e)}},function(e,t,n){e.exports=function(e){e.component("hardStopWarning",{bindings:{warnings:"<"},template:n(1359),controller:["$translate",function(e){var t=this;t.$onInit=function(){t.warnings=t.warnings||[],t.getCapabilities=function(t){return(t.capabilities||[]).map(function(t){return e.instant("capability.type."+t)}).join(", ")}}}]})}},function(e,t){e.exports="<div class=\"alert alert-warning\" ng-repeat=\"warning in $ctrl.warnings\">\n\t<p>{{ 'hardStopWarning.message.1' | translate }}</p>\n\t<p><strong>{{ $ctrl.getCapabilities(warning) }}</strong></p>\n\t<p>{{ 'hardStopWarning.message.2' | translate }}</p>\n\t<p>{{ 'hardStopWarning.message.3' | translate }}</p>\n\t<p>{{ 'hardStopWarning.message.4' | translate }}</p>\n</div>"},function(e,t,n){e.exports=function(e){n(1361)(e)}},function(e,t,n){e.exports=function(e){e.component("capabilityMandatoryTask",{bindings:{mandatoryTasks:"<",experiences:"<?"},template:n(1362),controller:["$translate","ModalService","FinancialInfoService",function(e,t,n){var a=this;a.$onInit=function(){a.mandatoryTasks=a.mandatoryTasks||[],a.experiences=a.experiences||void 0,a.completeTask=function(e){if("QUIZ"!==e.type)throw"Invalid capability mandatory task detected "+a.mandatoryTask.type;!function(e){n.completeKnowledgeQuiz(a.experiences[e.assetType],e.quiz).then(function(t){if(!angular.isUndefined(t)){var n=a.mandatoryTasks.findIndex(function(t){return t.formNumber===e.formNumber});a.mandatoryTasks.splice(n,1)}})}(e)},a.getCapabilities=function(t){return(t.capabilities||[]).map(function(t){return e.instant("capability.type."+t)}).join(", ")}}}]})}},function(e,t){e.exports='<div class="alert alert-info" ng-repeat="mandatoryTask in $ctrl.mandatoryTasks">\n\t<div class="row">\n\t\t<div class="col-xs-12 col-sm-12 col-md-9 col-lg-9">\n\t\t\t<p translate="{{\'capability.mandatoryTask.meesage\'}}" translate-values="{capabilities: $ctrl.getCapabilities(mandatoryTask), startStrongTag: \'<strong>\', endStrongTag: \'</strong>\', formTitle: (\'form.title.\' + mandatoryTask.formNumber | translate)}"></p>\n\t\t</div>\n\t\t<div class="col-xs-12 col-sm-12 col-md-3 col-lg-3">\n\t\t\t<p class="btn-group-right">\n\t\t\t\t<am-button on-click="$ctrl.completeTask(mandatoryTask)" btn-type="primary" btn-text="{{\'word.verb.complete\' | translate }}"></am-button>\n\t\t\t</p>\n\t\t</div>\n\t</div>\n</div>'},function(e,t,n){e.exports=function(e){n(1364)(e),n(1366)(e),n(1368)(e),n(1370)(e),n(1372)(e)}},function(e,t,n){e.exports=function(e){e.component("exchangeLocationReview",{bindings:{qualified:"<?",requested:"<?",downgraded:"<?",removed:"<?"},template:n(1365),controller:[function(){var e=this;e.$onInit=function(){e.qualified=e.qualified||[],e.requested=e.requested||[],e.downgraded=e.downgraded||[],e.removed=e.removed||[]}}]})}},function(e,t){e.exports='\x3c!-- \n\tQualified Exchanges\n--\x3e\n<div ng-if="$ctrl.qualified.length > 0">\n\t<div class="row">\n\t\t<div class="col-12 col-sm-12 col-md-3 col-lg-3">\n\t\t\t<p class="review-title">{{ \'tradingPermissionProfile.label.existing\' | translate }}</p>\n\t\t</div>\n\t\t<div class="col-12 col-sm-12 col-md-7 col-lg-7">\n\t\t\t<p class="review-label" ng-repeat="exchange in $ctrl.qualified">\n\t\t\t\t<span>{{ \'tradingExchange.location.\' + exchange.location | translate }}</span>\n\t\t\t\t<span>{{ \' - \' }}</span>\n\t\t\t\t<span>{{ \'tradingExchange.type.\' + exchange.productType | translate }}</span>\n\t\t\t</p>\n\t\t</div>\n\t\t<div class="col-12 col-sm-12 col-md-2 col-lg-2">\n\t\t</div>\n\t</div>\n\t<br>\n\t<hr>\n\t<br>\n</div>\n\x3c!-- \n\tRequested Exchanges\n--\x3e\n<div ng-if="$ctrl.requested.length > 0">\n\t<div class="row">\n\t\t<div class="col-12 col-sm-12 col-md-3 col-lg-3">\n\t\t\t<p class="review-title">{{ \'tradingPermissionProfile.label.requested\' | translate }}</p>\n\t\t</div>\n\t\t<div class="col-12 col-sm-12 col-md-7 col-lg-7">\n\t\t\t<p class="review-label" ng-repeat="exchange in $ctrl.requested">\n\t\t\t\t<span>{{ \'tradingExchange.location.\' + exchange.location | translate }}</span>\n\t\t\t\t<span>{{ \' - \' }}</span>\n\t\t\t\t<span>{{ \'tradingExchange.type.\' + exchange.productType | translate }}</span>\n\t\t\t</p>\n\t\t</div>\n\t\t<div class="col-12 col-sm-12 col-md-2 col-lg-2">\n\t\t</div>\n\t</div>\n\t<br>\n\t<hr>\n\t<br>\n</div>\n\x3c!-- \n\tDowngraded Exchanges\n--\x3e\n<div ng-if="$ctrl.downgraded.length > 0">\n\t<div class="row">\n\t\t<div class="col-12 col-sm-12 col-md-3 col-lg-3">\n\t\t\t<p class="review-title">{{ \'tradingPermissionProfile.label.downgraded\' | translate }}</p>\n\t\t</div>\n\t\t<div class="col-12 col-sm-12 col-md-7 col-lg-7">\n\t\t\t<p class="review-label" ng-repeat="exchange in $ctrl.downgraded">\n\t\t\t\t<span>{{ \'tradingExchange.location.\' + exchange.location | translate }}</span>\n\t\t\t\t<span>{{ \' - \' }}</span>\n\t\t\t\t<span>{{ \'tradingExchange.type.\' + exchange.productType | translate }}</span>\n\t\t\t</p>\n\t\t</div>\n\t\t<div class="col-12 col-sm-12 col-md-2 col-lg-2">\n\t\t</div>\n\t</div>\n\t<br>\n\t<hr>\n\t<br>\n</div>\n\x3c!-- \n\tRemoved Exchanges\n--\x3e\n<div ng-if="$ctrl.removed.length > 0">\n\t<div class="row">\n\t\t<div class="col-12 col-sm-12 col-md-3 col-lg-3">\n\t\t\t<p class="review-title">{{ \'tradingPermissionProfile.label.removed\' | translate }}</p>\n\t\t</div>\n\t\t<div class="col-12 col-sm-12 col-md-7 col-lg-7">\n\t\t\t<p class="review-label" ng-repeat="exchange in $ctrl.removed">\n\t\t\t\t<span>{{ \'tradingExchange.location.\' + exchange.location | translate }}</span>\n\t\t\t\t<span>{{ \' - \' }}</span>\n\t\t\t\t<span>{{ \'tradingExchange.type.\' + exchange.productType | translate }}</span>\n\t\t\t</p>\n\t\t</div>\n\t\t<div class="col-12 col-sm-12 col-md-2 col-lg-2">\n\t\t</div>\n\t</div>\n\t<br>\n\t<hr>\n\t<br>\n</div>'},function(e,t,n){e.exports=function(e){e.component("exchangeLocations",{bindings:{permissions:"<"},template:n(1367),controller:[function(){var e=this,t=function(e){return e.requested},n=function(e){return e.disabled};e.$onInit=function(){e.permissions=e.permissions||[],e.regionPermissions={},e.allRegionalPermissions={},e.onChange=function(n,a){n.downgraded=n.qualified&&!n.requested,e.allRegionalPermissions[a].requested=e.regionPermissions[a].every(t);var r=e.permissions.find(function(e){return"US_FRACTIONAL_SHARES"===e.code});"IB_FRAC_STK"!==n.code||angular.isUndefined(r)||(r.requested=n.requested,r.downgraded=r.qualified&&!r.requested)},e.enableRegionalPermissions=function(t,n){for(var a=0;a<n.length;a++){var r=n[a];r.disabled||(r.requested=e.allRegionalPermissions[t].requested,r.downgraded=r.qualified&&!r.requested)}},e.regionPermissions=function(e,t){for(var n={},a=e.reduce(function(e,n){var a=n[t];return e[a]=e[a]||[],e[a].push(n),e},{}),r=Object.keys(a),i=0;i<r.length;i++)n[r[i]]=a[r[i]];return n}(e.permissions,"region")||{},Object.keys(e.regionPermissions).forEach(function(a){var r=e.regionPermissions[a];e.allRegionalPermissions[a]=e.allRegionalPermissions[a]||{},e.allRegionalPermissions[a].requested=r.every(t),e.allRegionalPermissions[a].disabled=r.every(n)})}}]})}},function(e,t){e.exports='<div ng-if="$ctrl.permissions.length > 0" ng-repeat="(region, permissions) in $ctrl.regionPermissions">\n\t<div class="form-group form-icheck" ng-if="(permissions | filter:{hidden: false}).length > 0">\n\t\t<input type="checkbox" ng-model="$ctrl.allRegionalPermissions[region].requested" i-check ng-disabled="$ctrl.allRegionalPermissions[region].disabled" ng-change="$ctrl.enableRegionalPermissions(region, permissions)">\n\t\t<label class="form-check-label">\n\t\t\t<strong>{{ \'tradingExchange.region.\' + region | translate }}</strong>\n\t\t</label>\n\t</div>\n\t<div class="row">\n\t\t<div ng-if="::!permission.hidden" name="{{ permission.code }}" class="col-12 col-sm-6" ng-repeat="permission in permissions">\n\t\t\t<div class="form-group form-icheck">\n\t\t\t\t<input type="checkbox" ng-model="permission.requested" i-check ng-disabled="permission.disabled" ng-change="$ctrl.onChange(permission, region)">\n\t\t\t\t<label class="form-check-label">\n\t\t\t\t\t{{ \'tradingExchange.location.\' + permission.location | translate }}\n\t\t\t\t\t<span ng-if="permission.pending && permission.requested" class="stamp stamp-warning margin-left-5">{{ \'word.pending\' | translate }}</span>\n\t\t\t\t</label>\n\t\t\t</div>\t\t\n\t\t</div>\n\t</div>\n\t<hr ng-if="!$last">\n</div>'},function(e,t,n){e.exports=function(e){e.component("tradingProductRequirement",{bindings:{productType:"@"},template:n(1369)})}},function(e,t){e.exports='<h5 translate="tradingPermissionProfile.requirement.header" translate-values="{productType: (\'tradingExchange.type.\' + $ctrl.productType | translate)}"></h5>\n<br>\n<p translate="tradingPermissionProfile.requirement.1" translate-values="{productType: (\'tradingExchange.type.\' + $ctrl.productType | translate)}"></p>\n<br>\n<p translate="tradingPermissionProfile.requirement.2" translate-values="{ startTag: \'<strong>\', endTag: \'</strong>\' }"></p>'},function(e,t,n){e.exports=function(e){e.component("tradingProductSummary",{template:n(1371),controller:["$q","$translate","CONTENT_HOST","BreadcrumbAction","PageService","ResourceService","NavigationService","TradingProductService","PendingItemService",function(t,n,a,r,i,o,s,l,c){var u=this,d=function(){return t.resolve("restricted")};u.$onInit=function(){u.contentHost=a,u.selections=[],u.cancelLoading=!1,u.getProductImage=l.getProductImage,u.getProductInfo=l.getProductInfo,u.completeTutorial=c.navigateToPendingItem,u.getClass=function(e){var t=(e.permissions||[]).some(function(e){return e.pending}),n=(e.permissions||[]).some(function(e){return e.qualified});return t?"pending":n?"active":"non-active"},u.getBannerClass=function(e){return(e.permissions||[]).some(function(e){return e.pending})?"pending":"blank"},u.getImageClass=function(e){return"NEXTSHARE"===e?"tp-nextshares":""},u.displayProductAction=function(e){if("OPTION"!==e.productType)return!0;var t=(e.permissions||[]).some(function(e){return e.pending}),n=(e.permissions||[]).some(function(e){return e.qualified});return!t&&n},u.getButtonText=function(e){return(e.permissions||[]).some(function(e){return e.requested})?n.instant("tradingProductSummary.label.add"):n.instant("tradingProductSummary.label.request")},u.getInfoTooltipText=function(e){return"CRYPTO"===e.productType&&"IBL_ZH"===e.segmentEntity?n.instant("crypto.infoIcon.IBL_ZH"):n.instant("word.info")},u.configure=function(t){var a={id:"TradingProduct",title:n.instant("page.title.tradingProduct",{productType:n.instant("tradingExchange.type."+t)}),path:"am-dynamic-sequence.component",skipFetch:!0,pageData:{sequenceSource:e.SERVER_PATH+"/TradingPermissionProfile/Sequence",sequenceType:"/"+t,hideHelp:!0}};s.navigate(a)};var p=function(){var n=[];return n.push(o.fetch(e.SERVER_PATH+"/TradingPermissionProfile").then(function(e){u.selections=e.data.selections||[]}).catch(d)),n.push(o.fetch(e.SERVER_PATH+"/TradingPermissionTask").then(function(e){u.loginMessages=e.data.loginMessages||[],u.pendingTutorials=e.data.pendingTutorials||[],u.exams=e.data.exams||[],u.riskForms=e.data.riskForms||[]}).catch(d)),n.push(o.fetch(e.SERVER_PATH+"/TradingPermissionHelp").then(function(e){u.helpTopics=e.data.helpTopics||[]}).catch(d)),t.all(n)};u.completeLoginMessages=function(e){var t={id:e.messageType,title:n.instant("loginMessageType."+e.messageType),path:"template/page/loginmessage/realTimeLoginMessageSequence.html",pageData:{sequenceParameters:{id:e.id}},skipFetch:!0,breadcrumb:r.REPLACE};s.navigate(t)},u.completeExam=function(t){var n={id:"Exam."+t,path:"exam-sequence.component",pageData:{sequenceSource:e.SERVER_PATH+"/Exam/Sequence/"+t},serverPath:e.SERVER_PATH+"/CapabilityTutorial"};return s.navigate(n)},u.completeRiskForms=function(){var t={id:"AsicObligation",path:"asic-obligation-sequence.component",serverPath:e.SERVER_PATH+"/AsicObligation"};return s.navigate(t)},u.navigate=function(e){return s.navigate(e)},i.setOnPageLoad(function(){p().finally(function(){u.cancelLoading||i.setIsPageLoading(!1)})})},u.$onDestroy=function(){u.cancelLoading=!0}}]})}},function(e,t){e.exports='<div page-structure="fullPanel" no-border="true">\n\t<div class="trading-permissions">\n\t\t<h2>{{ \'tradingProductSummary.header\' | translate }}</h2>\n\t\t<p translate="tradingProductSummary.message" translate-values="{breakTag: \'<br>\', startTag: \'<strong>\', endTag: \'</strong>\', linkStart: \'<a href=&quot;https://\' + $ctrl.contentHost + \'/lib/cstools/faq/#/tag/tp_asset_bundle_restrictions&quot; target=&quot;_blank&quot;>\', linkEnd: \'</a>\'}"></p>\n\t\t\x3c!-- \n\t\t\tPending Tasks\n\t\t--\x3e\n\t\t<div class="alert alert-warning" ng-if="$ctrl.loginMessages.length > 0 || $ctrl.exams.length > 0 || $ctrl.pendingTutorials.length > 0 || $ctrl.riskForms.length > 0">\n\t\t\t<p>{{ \'tradingProductSummary.warning.pendingTask\' | translate }}</p>\n\t\t\t<br>\n\t\t\t<br>\n\t\t\t\x3c!-- \n\t\t\t\tLogin Messages\n\t\t\t--\x3e\n\t\t\t<div ng-if="$ctrl.loginMessages.length > 0" ng-repeat="loginMessage in $ctrl.loginMessages">\n\t\t\t\t<div class="row pi-overview">\n\t\t\t\t\t<div class="col-xs-12 col-sm-12 col-md-9 col-lg-10">\n\t\t\t\t\t\t<p ng-if="loginMessage.messageType === \'CFTC_OCR\'" translate="loginTask.introduction.CFTC_OCR" translate-value-start-tag="<a href=&quot;http://ibkb.interactivebrokers.com/node/2274&quot; target=&quot;_blank&quot;>" translate-value-end-tag="</a>"></p>\n\t\t\t\t\t\t<p ng-if="loginMessage.messageType === \'MIFIR_INFO\'" translate="loginTask.introduction.MIFIR_INFO"></p>\n\t\t\t\t\t\t<p ng-if="loginMessage.messageType === \'MIFIR_INFO_CMDTY\'" translate="loginTask.introduction.MIFIR_INFO_CMDTY"></p>\n\t\t\t\t\t\t<p ng-if="loginMessage.messageType === \'CHINA_CONNECT\'" translate="loginTask.introduction.CHINA_CONNECT"></p>\n\t\t\t\t\t\t<p ng-if="loginMessage.messageType === \'FATCA_CRS\'" translate="loginTask.introduction.FATCA_CRS"></p>\n\t\t\t\t\t\t<p ng-if="loginMessage.messageType === \'PMRGN_DOWNGRADE_REVIEW\'" translate="loginTask.message.PMRGN_DOWNGRADE_REVIEW"></p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="col-xs-12 col-sm-12 col-md-3 col-lg-2">\n\t\t\t\t\t\t<div class="pi-buttons">\n\t\t\t\t\t\t\t<am-button on-click="$ctrl.completeLoginMessages(loginMessage)" btn-type="primary" btn-text="{{ \'word.verb.complete\' | translate }}"></am-button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<hr>\n\t\t\t</div>\n\t\t\t\x3c!-- \n\t\t\t\tSIP Exam\n\t\t\t--\x3e\n\t\t\t<div ng-if="$ctrl.exams.length > 0" ng-repeat="exam in $ctrl.exams">\n\t\t\t\t<div class="row pi-overview">\n\t\t\t\t\t<div class="col-xs-12 col-sm-12 col-md-9 col-lg-10">\n\t\t\t\t\t\t<p>{{ \'form.title.\' + exam | translate }}</p>\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="col-xs-12 col-sm-12 col-md-3 col-lg-2">\n\t\t\t\t\t\t<div class="pi-buttons">\n\t\t\t\t\t\t\t<am-button on-click="$ctrl.completeExam(exam)" btn-text="{{ \'word.verb.complete\' | translate }}"></am-button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<hr>\n\t\t\t</div>\n\t\t\t\x3c!-- \n\t\t\t\tCapability Tutorial\n\t\t\t--\x3e\n\t\t\t<div ng-if="$ctrl.pendingTutorials.length > 0" ng-repeat="item in $ctrl.pendingTutorials">\n\t\t\t\t<div class="row pi-overview">\n\t\t\t\t\t<div class="col-xs-12 col-sm-12 col-md-9 col-lg-10">\n\t\t\t\t\t\t<strong>{{ \'capability.task.\' + item.formNumber | translate }}</strong>\n\t\t\t\t\t\t<span class="hidden-sm hidden-md hidden-lg">\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span class="text-gray margin-left-10 margin-right-10 hidden-xs">/</span>\n\t\t\t\t\t\t<span class="text-gray">\n\t\t\t\t\t\t\t<em>{{::item.accountId}}</em>\n\t\t\t\t\t\t</span>\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="col-xs-12 col-sm-12 col-md-3 col-lg-2">\n\t\t\t\t\t\t<div class="pi-buttons">\n\t\t\t\t\t\t\t<am-button on-click="$ctrl.completeTutorial(item)" btn-text="{{ \'word.verb.complete\' | translate }}"></am-button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<hr>\n\t\t\t</div>\n\t\t\t\x3c!-- \n\t\t    \tPending ASIC Risk forms\n\t\t    --\x3e\n\t\t\t<div ng-if="$ctrl.riskForms.length > 0">\n\t\t\t\t<div class="row pi-overview">\n\t\t\t\t\t<div class="col-xs-12 col-sm-12 col-md-9 col-lg-10">\n\t\t\t\t\t\t<p>{{ \'pendingItemType.PENDING_OBLIGATION\' | translate }}</p>\n\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t<li class="text-dark text-small" ng-repeat="riskForm in $ctrl.riskForms">{{ \'form.title.\' + riskForm | translate }}</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="col-xs-12 col-sm-12 col-md-3 col-lg-2">\n\t\t\t\t\t\t<div class="pi-buttons">\n\t\t\t\t\t\t\t<am-button on-click="$ctrl.completeRiskForms()" btn-text="{{ \'word.verb.complete\' | translate }}"></am-button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<hr>\n\t\t\t</div>\n\t\t</div>\n\t\t<br>\n\t\t\x3c!-- \n\t\t\tProducts\n\t\t--\x3e\n\t\t<div class="tp-buttons" ng-if="$ctrl.selections.length > 0">\n\t\t\t<div class="tp-product" ng-class="$ctrl.getClass(selection)" ng-repeat="selection in $ctrl.selections">\n\t\t\t\t<a href="{{ $ctrl.getProductInfo(selection.productType) }}" target="_blank" class="icon-info" ng-if="$ctrl.getProductInfo(selection.productType).length > 0">\n\t\t\t\t\t<i class="fa-info-circle fa" am-tooltip data-placement="left" data-original-title="{{$ctrl.getInfoTooltipText(selection)}}"></i>\n\t\t\t\t</a>\n\t\t\t\t<div class="tp-content">\n\t\t\t\t\t<div class="tp-img" ng-class="$ctrl.getImageClass(selection.productType)">\n\t\t\t\t\t\t<img alt="{{selection.productType}}" ng-src="{{ $ctrl.getProductImage(selection.productType) }}" border="0">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="tp-text">\n\t\t\t\t\t\t<h6>{{ \'tradingExchange.type.\' + selection.productType | translate }}</h6>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="banner configure" ng-if="(selection.pageEntries | objectLength) > 0" ng-repeat="(value, pageEntry) in selection.pageEntries">\n\t\t\t\t\t<a href="javascript:void(0);" target="_self" class="btn btn-primary" ng-click="$ctrl.navigate(pageEntry)">\n\t\t\t\t\t\t<span>{{ \'tradingProductSummary.productBox.value.\' + value | translate }}</span>\n\t\t\t\t\t\t<i class="fa-solid fa-pencil"></i>\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t\t<div class="banner" ng-class="$ctrl.getBannerClass(selection)" ng-if="(selection.permissions | filter:{ pending: true }).length > 0">\n\t\t\t\t\t<p>{{ \'word.pending\' | translate }}</p>\n\t\t\t\t</div>\n\t\t\t\t<a href="javascript:void(0);" target="_self" class="btn btn-primary" ng-click="$ctrl.configure(selection.productType)" ng-disabled="$ctrl.pendnigTasks.length > 0">{{ $ctrl.getButtonText(selection) }}</a>\n\t\t\t</div>\n\t\t</div>\n\t\t<br>\n\t\t<hr>\n\t\t<br>\n\t\t<trading-product-summary-help help-topics="$ctrl.helpTopics"></trading-product-summary-help>\n\t</div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("tradingProductSummaryHelp",{bindings:{helpTopics:"<"},template:n(1373),controller:["CONTENT_HOST",function(e){var t=this;t.$onInit=function(){t.contentHost=e}}]})}},function(e,t){e.exports="<h6>\n\t<strong>{{ 'tradingProductSummary.faq.header' | translate }}</strong>\n</h6>\n<p ng-repeat=\"help in $ctrl.helpTopics\">\n\t<a href=\"{{'https://' + $ctrl.contentHost + help.faqLink}}\" target=\"_blank\">{{ 'tradingProductSummary.faq.' + help.type | translate }}</a>\n</p>"},function(e,t,n){e.exports=function(e){n(1375)(e)}},function(e,t,n){e.exports=function(e){e.component("capabilityRiskAcceptanceTasks",{bindings:{riskAcceptanceTasks:"<",counter:"=",configureLaterFn:"&?"},template:n(1376),controller:["$timeout",function(e){var t=this;t.$onInit=function(){t.riskAcceptanceTasks=t.riskAcceptanceTasks||[],t.counter=t.counter||60,t.configureLaterFn=t.configureLaterFn||void 0,t.configureLater=function(e){t.configureLaterFn({capability:e.capability})},function n(){0===t.counter?e.cancel(t.timer):(t.timer=e(n,1e3),t.counter--)}()}}]})}},function(e,t){e.exports='<div class="alert alert-info" style="background: none;" ng-repeat="task in $ctrl.riskAcceptanceTasks">\n\t<div class="row">\n\t\t<div class="col-xs-12 col-sm-12" ng-class="{\'col-md-8 col-lg-8\': $ctrl.configureLaterFn, \'col-md-12 col-lg-12\': !$ctrl.configureLaterFn}">\n\t\t\t<p translate="capability.riskAcceptance.message" translate-values="{capability : (\'capability.type.\' + task.capability | translate), strongStart: \'<strong>\', strongEnd: \'</strong>\'}"></p>\n\t\t</div>\n\t\t<div class="col-xs-12 col-sm-12 col-md-4 col-lg-4">\n\t\t\t<p class="btn-group-right" ng-if="$ctrl.configureLaterFn">\n                <am-button on-click="$ctrl.configureLater(task)" btn-text="{{ \'capability.label.remove\' | translate:{\'capability\': (\'capability.type.\' + task.capability | translate)} }}"></am-button>\n            </p>\n\t\t</div>\n\t</div>\n</div>\n<div class="alert alert-gray">\n\t<ul>\n\t\t<li>{{ \'capability.riskAcceptance.risk1\' | translate }}</li>\n\t\t<li>{{ \'capability.riskAcceptance.risk2\' | translate }}</li>\n\t\t<li>\n\t\t\t{{ \'capability.riskAcceptance.risk3\' | translate }}\n\t\t\t<span class="margin-left-5" ng-if="$ctrl.counter > 0">{{ $ctrl.counter }}</span>\n\t\t</li>\n\t</ul>\n</div>'},function(e,t,n){e.exports=function(e){n(1378)(e),n(1380)(e)}},function(e,t,n){e.exports=function(e){e.component("capabilityLevelsReview",{bindings:{levels:"<"},template:n(1379),controller:[function(){var e=this;e.$onInit=function(){e.levels=e.levels||{}}}]})}},function(e,t){e.exports='<div>\n\t<div class="row">\n\t\t<div class="col-12 col-sm-12 col-md-3 col-lg-3">\n\t\t\t<p class="review-title">{{ \'Capability Levels\' | translate }}</p>\n\t\t</div>\n\t\t<div class="col-12 col-sm-12 col-md-7 col-lg-7">\n\t\t\t<p class="review-label" ng-repeat="(capability, level) in $ctrl.levels" ng-if="level !== \'UNKNOWN\'">\n\t\t\t\t<span>{{ \'capability.type.\' + capability | translate }}</span>\n\t\t\t\t<span>{{ \' - \' }}</span>\n\t\t\t\t<span>{{ \'capabilityLevel.type.\' + level | translate }}</span>\n\t\t\t</p>\n\t\t</div>\n\t\t<div class="col-12 col-sm-12 col-md-2 col-lg-2">\n\t\t</div>\n\t</div>\n\t<br>\n\t<hr>\n\t<br>\n</div>'},function(e,t,n){e.exports=function(e){e.component("optionLevelForm",{require:{parentForm:"^^form"},bindings:{level:"=ngModel",levels:"<",accountCapability:"<",ibEntity:"<"},template:n(1381),controller:["ACTIVE_CONTEXT",function(e){var t=this,n={OPTION_LEVEL_1:"LOW",OPTION_LEVEL_2:"MEDIUM",OPTION_LEVEL_3:"HIGH",OPTION_LEVEL_4:"EXTREME"};t.$onInit=function(){t.level=t.level||"UNKNOWN",t.levels=t.levels||[],t.accountCapability=t.accountCapability||void 0,t.isApplication="STANDALONE"===e,t.isOptionLevelDisabled=function(e){return!("JP"===t.ibEntity||"OPTION_LEVEL_4"!==e||!angular.isUndefined(t.accountCapability)&&"CASH"!==t.accountCapability.accountType)&&(t.level="OPTION_LEVEL_4"===t.level?"OPTION_LEVEL_3":t.level,!0)},t.getRiskLevel=function(e){return n[e]}}}]})}},function(e,t){e.exports='<div ng-if="$ctrl.isApplication">\n\t<p><strong>{{ \'optionLevels.header\' | translate }}</strong></p>\n\t<hr>\n</div>\n<div ng-if="!$ctrl.isApplication">\n\t<h4>{{ \'optionLevels.header\' | translate }}</h4>\n\t<br>\n\t<hr>\n\t<br>\n</div>\n<div ng-repeat="availableLevel in $ctrl.levels">\n\t<div class="row align-items-start">\n\t\t<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n\t\t\t<p ng-class="{\'text-gray\' : $ctrl.isOptionLevelDisabled(availableLevel)}">\n\t\t\t\t<input name="OPTION_Level" ng-model="$ctrl.level" type="radio" value="{{availableLevel}}" i-check required ng-disabled="$ctrl.isOptionLevelDisabled(availableLevel)"/>\n\t\t\t\t<span class="margin-left-5"></span>\n\t\t\t\t<strong>{{ \'optionLevels.type.\' + availableLevel | translate}}</strong>\n\t\t\t\t<span>{{ (\'optionLevels.subtext.\' + availableLevel | translate) + \':\' }}</span>\n\t\t\t\t<span class="margin-left-5" ng-if="$ctrl.getRiskLevel(availableLevel) === \'LOW\'">\n\t\t\t\t\t<i class="fas fa-circle fa-2xs success"></i>\n\t\t\t\t\t<i class="fas fa-circle fa-2xs gray-30"></i>\n\t\t\t\t\t<i class="fas fa-circle fa-2xs gray-30"></i>\n\t\t\t\t\t<i class="fas fa-circle fa-2xs gray-30"></i>\n\t\t\t\t</span>\n\t\t\t\t<span class="margin-left-5" ng-if="$ctrl.getRiskLevel(availableLevel) === \'MEDIUM\'">\n\t\t\t\t\t<i class="fas fa-circle fa-2xs success"></i>\n\t\t\t\t\t<i class="fas fa-circle fa-2xs success"></i>\n\t\t\t\t\t<i class="fas fa-circle fa-2xs gray-30"></i>\n\t\t\t\t\t<i class="fas fa-circle fa-2xs gray-30"></i>\n\t\t\t\t</span>\n\t\t\t\t<span class="margin-left-5" ng-if="$ctrl.getRiskLevel(availableLevel) === \'HIGH\'">\n\t\t\t\t\t<i class="fas fa-circle fa-2xs warning"></i>\n\t\t\t\t\t<i class="fas fa-circle fa-2xs warning"></i>\n\t\t\t\t\t<i class="fas fa-circle fa-2xs warning"></i>\n\t\t\t\t\t<i class="fas fa-circle fa-2xs gray-30"></i>\n\t\t\t\t</span>\n\t\t\t\t<span class="margin-left-5" ng-if="$ctrl.getRiskLevel(availableLevel) === \'EXTREME\'">\n\t\t\t\t\t<i class="fas fa-circle fa-2xs danger"></i>\n\t\t\t\t\t<i class="fas fa-circle fa-2xs danger"></i>\n\t\t\t\t\t<i class="fas fa-circle fa-2xs danger"></i>\n\t\t\t\t\t<i class="fas fa-circle fa-2xs danger"></i>\n\t\t\t\t</span>\n\t\t\t</p>\n\t\t</div>\n\t</div>\n\t<div class="row align-items-start" ng-if="availableLevel === \'OPTION_LEVEL_1\'">\n\t\t<div class="col-xs-12 col-sm-4 col-md-4 col-lg-4">\n\t\t\t<ul>\n\t\t\t\t<li ng-class="{\'text-gray\' : $ctrl.isOptionLevelDisabled(availableLevel)}">{{ \'optionLevels.label.coveredCall\' | translate }}</li>\n\t\t\t</ul>\n\t\t</div>\n\t\t<div class="col-xs-12 col-sm-4 col-md-4 col-lg-4">\n\t\t\t<ul>\n\t\t\t\t<li ng-class="{\'text-gray\' : $ctrl.isOptionLevelDisabled(availableLevel)}">{{ \'optionLevels.label.buyWrite\' | translate }}</li>\n\t\t\t</ul>\n\t\t</div>\n\t\t<div class="col-xs-12 col-sm-4 col-md-4 col-lg-4">\n\t\t</div>\n\t</div>\n\t<div class="row align-items-start" ng-if="availableLevel === \'OPTION_LEVEL_2\'">\n\t\t<div class="col-xs-12 col-sm-4 col-md-4 col-lg-4">\n\t\t\t<ul>\n\t\t\t\t<li ng-class="{\'text-gray\' : $ctrl.isOptionLevelDisabled(availableLevel)}">{{ \'optionLevels.label.longCall\' | translate }}</li>\n\t\t\t\t<li ng-class="{\'text-gray\' : $ctrl.isOptionLevelDisabled(availableLevel)}">{{ \'optionLevels.label.longPut\' | translate }}</li>\n\t\t\t\t<li ng-class="{\'text-gray\' : $ctrl.isOptionLevelDisabled(availableLevel)}">{{ \'optionLevels.label.coveredPut\' | translate }}</li>\n\t\t\t\t<li ng-class="{\'text-gray\' : $ctrl.isOptionLevelDisabled(availableLevel)}">{{ \'optionLevels.label.protectiveCall\' | translate }}</li>\n\t\t\t\t<li ng-class="{\'text-gray\' : $ctrl.isOptionLevelDisabled(availableLevel)}">{{ \'optionLevels.label.protectivePut\' | translate }}</li>\n\t\t\t</ul>\n\t\t</div>\n\t\t<div class="col-xs-12 col-sm-4 col-md-4 col-lg-4">\n\t\t\t<ul>\n\t\t\t\t<li ng-class="{\'text-gray\' : $ctrl.isOptionLevelDisabled(availableLevel)}">{{ \'optionLevels.label.longStaddle\' | translate }}</li>\n\t\t\t\t<li ng-class="{\'text-gray\' : $ctrl.isOptionLevelDisabled(availableLevel)}">{{ \'optionLevels.label.longStrangle\' | translate }}</li>\n\t\t\t\t<li ng-class="{\'text-gray\' : $ctrl.isOptionLevelDisabled(availableLevel)}">{{ \'optionLevels.label.conversion\' | translate }}</li>\n\t\t\t\t<li ng-class="{\'text-gray\' : $ctrl.isOptionLevelDisabled(availableLevel)}">{{ \'optionLevels.label.longCallSpread\' | translate }}</li>\n\t\t\t\t<li ng-class="{\'text-gray\' : $ctrl.isOptionLevelDisabled(availableLevel)}">{{ \'optionLevels.label.longPutSpread\' | translate }}</li>\n\t\t\t</ul>\n\t\t</div>\n\t\t<div class="col-xs-12 col-sm-4 col-md-4 col-lg-4">\n\t\t\t<ul>\n\t\t\t\t<li ng-class="{\'text-gray\' : $ctrl.isOptionLevelDisabled(availableLevel)}">{{ \'optionLevels.label.longIronCondor\' | translate }}</li>\n\t\t\t\t<li ng-class="{\'text-gray\' : $ctrl.isOptionLevelDisabled(availableLevel)}">{{ \'optionLevels.label.longBoxSpread\' | translate }}</li>\n\t\t\t\t<li ng-class="{\'text-gray\' : $ctrl.isOptionLevelDisabled(availableLevel)}">{{ \'optionLevels.label.collar\' | translate }}</li>\n\t\t\t\t<li ng-class="{\'text-gray\' : $ctrl.isOptionLevelDisabled(availableLevel)}">{{ \'optionLevels.label.shortCollar\' | translate }}</li>\n\t\t\t</ul>\n\t\t</div>\n\t</div>\n\t<div class="row align-items-start" ng-if="availableLevel === \'OPTION_LEVEL_3\'">\n\t\t<div class="col-xs-12 col-sm-4 col-md-4 col-lg-4">\n\t\t\t<ul>\n\t\t\t\t<li ng-class="{\'text-gray\' : $ctrl.isOptionLevelDisabled(availableLevel)}">{{ \'optionLevels.label.shortPut\' | translate }}</li>\n\t\t\t\t<li ng-class="{\'text-gray\' : $ctrl.isOptionLevelDisabled(availableLevel)}">{{ \'optionLevels.label.synthetic\' | translate }}</li>\n\t\t\t\t<li ng-class="{\'text-gray\' : $ctrl.isOptionLevelDisabled(availableLevel)}">{{ \'optionLevels.label.reversal\' | translate }}</li>\n\t\t\t\t<li ng-class="{\'text-gray\' : $ctrl.isOptionLevelDisabled(availableLevel)}">{{ \'optionLevels.label.shortCallSpread\' | translate }}</li>\n\t\t\t</ul>\n\t\t</div>\n\t\t<div class="col-xs-12 col-sm-4 col-md-4 col-lg-4">\n\t\t\t<ul>\n\t\t\t\t<li ng-class="{\'text-gray\' : $ctrl.isOptionLevelDisabled(availableLevel)}">{{ \'optionLevels.label.shortPutSpread\' | translate }}</li>\n\t\t\t\t<li ng-class="{\'text-gray\' : $ctrl.isOptionLevelDisabled(availableLevel)}">{{ \'optionLevels.label.shortIronCandor\' | translate }}</li>\n\t\t\t\t<li ng-class="{\'text-gray\' : $ctrl.isOptionLevelDisabled(availableLevel)}">{{ \'optionLevels.label.longButterfly\' | translate }}</li>\n\t\t\t\t<li ng-class="{\'text-gray\' : $ctrl.isOptionLevelDisabled(availableLevel)}">{{ \'optionLevels.label.unbalancedButterfly\' | translate }}</li>\n\t\t\t</ul>\n\t\t</div>\n\t\t<div class="col-xs-12 col-sm-4 col-md-4 col-lg-4">\n\t\t\t<ul>\n\t\t\t\t<li ng-class="{\'text-gray\' : $ctrl.isOptionLevelDisabled(availableLevel)}">{{ \'optionLevels.label.shortButterfly\' | translate }}</li>\n\t\t\t\t<li ng-class="{\'text-gray\' : $ctrl.isOptionLevelDisabled(availableLevel)}">{{ \'optionLevels.label.calendarSpreadDebit\' | translate }}</li>\n\t\t\t\t<li ng-class="{\'text-gray\' : $ctrl.isOptionLevelDisabled(availableLevel)}">{{ \'optionLevels.label.diagonalSpread\' | translate }}</li>\n\t\t\t</ul>\n\t\t</div>\n\t</div>\n\t<div class="row align-items-start" ng-if="availableLevel === \'OPTION_LEVEL_4\'">\n\t\t<div class="col-xs-12 col-sm-4 col-md-4 col-lg-4">\n\t\t\t<ul>\n\t\t\t\t<li ng-class="{\'text-gray\' : $ctrl.isOptionLevelDisabled(availableLevel)}">{{ \'optionLevels.label.shortnakedCall\' | translate }}</li>\n\t\t\t\t<li ng-class="{\'text-gray\' : $ctrl.isOptionLevelDisabled(availableLevel)}">{{ \'optionLevels.label.shortStraddle\' | translate }}</li>\n\t\t\t</ul>\n\t\t</div>\n\t\t<div class="col-xs-12 col-sm-4 col-md-4 col-lg-4">\n\t\t\t<ul>\n\t\t\t\t<li ng-class="{\'text-gray\' : $ctrl.isOptionLevelDisabled(availableLevel)}">{{ \'optionLevels.label.shortStrangle\' | translate }}</li>\n\t\t\t\t<li ng-class="{\'text-gray\' : $ctrl.isOptionLevelDisabled(availableLevel)}">{{ \'optionLevels.label.shortSynthetic\' | translate }}</li>\n\t\t\t</ul>\n\t\t</div>\n\t\t<div class="col-xs-12 col-sm-4 col-md-4 col-lg-4">\n\t\t\t<ul>\n\t\t\t\t<li ng-class="{\'text-gray\' : $ctrl.isOptionLevelDisabled(availableLevel)}">{{ \'optionLevels.label.calendarSpreadCredit\' | translate }}</li>\n\t\t\t\t<li ng-class="{\'text-gray\' : $ctrl.isOptionLevelDisabled(availableLevel)}">{{ \'optionLevels.label.diagonalSpreadLong\' | translate }}</li>\n\t\t\t</ul>\n\t\t</div>\n\t</div>\n\t<div class="alert alert-gray" ng-if="$ctrl.isOptionLevelDisabled(availableLevel)">\n\t\t<div class="row">\n\t\t\t<div class="col-xs-12 col-sm-1 col-md-1 col-lg-1">\n\t\t\t\t<p><i class="fas fa-exclamation-circle"></i></p>\n\t\t\t</div>\n\t\t\t<div class="col-xs-12 col-sm-11 col-md-11 col-lg-11">\n\t\t\t\t<p translate="optionLevels.note.margin" translate-values="{level: (\'optionLevels.type.\' + availableLevel | translate)}"></p>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<hr ng-if="!$last">\n</div>'},function(e,t,n){e.exports=function(e){e.component("tradingAccountCapabilityForm",{require:{parentForm:"^^form"},bindings:{accountCapability:"=ngModel",rules:"<"},template:n(1383),controller:["$translate","CONTENT_HOST","IS_MOBILE","WHITE_BRANDING_DETAILS","ModalService","TradingAccountTypeService",function(e,t,n,a,r,i){var o=this,s={CASH:1,MARGIN:2,PORTFOLIO_MARGIN:3,INVESTMENT_ACCOUNT:4,TRADING_ACCOUNT:5,GP_MARGIN:6,LEVERAGED_TRADING_ACCOUNT:7,PROFESSIONAL_ACCOUNT:8,SMSF_ACCOUNT:9};o.$onInit=function(){o.accountCapability=o.accountCapability||{},o.contentHost=t,o.isMobile=n,o.displayHelp=(o.rules.allowedAccountCapabilities||[]).some(function(t){var n=t?t.accountType:"";if(""===n)return!1;var a="tradingAccountTypeProfile.helpMessage."+n;return e.instant(a)!==a});var l=o.accountCapability.accountType;o.onCapabilityChanged=function(){o.rules.marginDowngradeConsent&&"CASH"===o.accountCapability.accountType?r.openModal({contentClass:"modal-gray",title:e.instant("word.warning"),templateUrl:"folio-margin-downgrade-modal.component",dialogClass:"modal-md",modalData:{accountCapability:o.accountCapability,previousAccountType:l}}).then(function(e){angular.isUndefined(e)||(o.accountCapability=e.accountCapability,o.accountCapability.questionnaire=e.questionnaire,l=o.accountCapability.accountType)}):l=o.accountCapability.accountType},o.getTradingAccountType=function(e){return i.getTradingAccountType(e,o.rules)},o.getPopoverContent=function(){var t="<div>";t+='<ul class="paralist">';for(var n=0;n<(o.rules.allowedAccountCapabilities||[]).length;n++){var r=(o.rules.allowedAccountCapabilities||[])[n],i="tradingAccountTypeProfile.helpMessage."+(r?r.accountType:"");e.instant(i)!==i&&(t+="<li>"+e.instant(i,{strongStartTag:"<strong>",strongEndTag:"</strong>"})+"</li>")}return t+="</ul>",a.isBranded()||(t+="<p>"+e.instant("tradingAccountTypeProfile.helpMessage.link",{linkStart:'<a href="https://www.interactivebrokers.com/en/trading/margin.php" target="_blank">',linkEnd:"</a>"})+"</p>"),t+="</div>"},o.openModal=function(){var t={title:e.instant("tradingAccountTypeProfile.label.type"),templateUrl:"info-modal.component",modalData:{infoContent:o.getPopoverContent()},buttons:[]};r.openInfoModal(t)},(o.rules.allowedAccountCapabilities||[]).sort(function(e,t){return(s[e.accountType]||Number.POSITIVE_INFINITY)-(s[t.accountType]||Number.POSITIVE_INFINITY)})}}]})}},function(e,t){e.exports='<h6 class="subtitle" aria-level="2">\n\t{{ \'tradingAccountTypeProfile.label.accountType.\' + $ctrl.rules.style | translate }}\n\t<span ng-if="::$ctrl.displayHelp">\n        <a href="javascript:void(0);" class="btn-icon" role="button" aria-label="{{ \'word.moreInformation\' | translate }}">\n            <i ng-if="!$ctrl.isMobile" class="fa fa-question-circle" data-popover="{{$ctrl.getPopoverContent()}}" popover-html="true" popover-trigger="{{\'mouseenter\'}}" popover-placement="right"></i>\n            <i ng-if="$ctrl.isMobile" class="fa fa-question-circle" ng-click="$ctrl.openModal()"></i>\n        </a>\n    </span>\n</h6>\n\x3c!-- \n\tAccount Type dropdown\n--\x3e\n<am-select ng-model="$ctrl.accountCapability" name="accountCapabilitySelect" options="$ctrl.rules.allowedAccountCapabilities" option-key="$ctrl.getTradingAccountType" track-by-id="accountType" hide-empty-option="true" model-listener="$ctrl.onCapabilityChanged()"></am-select>\n<br>\n\x3c!--\n\tCFD promotion notes\n--\x3e\n<div class="alert alert-warning" ng-if="$ctrl.rules.applicationCfdPromotion">\n\t<p translate="tradingAccountTypeProfile.warning.applicationCfdPromotion" translate-values="{ breakTag : \'<br />\', marginLinkTagStart: \'<a href=&quot;https://ibkr.info/article/3352&quot; target=&quot;_blank&quot;>\',  marginLinkTagEnd: \'</a>\', cfdLinkTagStart: \'<a href=&quot;https://\' + $ctrl.contentHost + \'/en/index.php?f=38596&hm=au&ex=au&rgt=1&rsk=0&pm=0&rst=040404010101080101&quot; target=&quot;_blank&quot;>\', cfdLinkTagEnd: \'</a>\' }"></p>\n</div>\n\x3c!-- \n\tP-Margin Notes\n--\x3e\n<div class="alert alert-warning" ng-if="$ctrl.accountCapability.accountType === \'PORTFOLIO_MARGIN\' && !$ctrl.rules.assignedPortfolioMargin">\n\t<p translate="tradingAccountTypeProfile.warning.portfolioMarginUpgrade" translate-values="{ breakTag: \'<br>\' }"></p>\n</div>\n\x3c!-- \n\tP-Margin Downgrade warning\n--\x3e\n<div ng-if="$ctrl.accountCapability.accountType === \'MARGIN\' && $ctrl.rules.assignedPortfolioMargin">\n\t<div class="text-center">\n\t\t<i class="fa fa-2x fa-exclamation-triangle text-gray"></i>\n\t\t<h5>{{ \'tradingAccountTypeProfile.header.downgrade\' | translate }}</h5>\n\t\t<br />\n\t\t<p translate="{{\'tradingAccountTypeProfile.warning.downgrade\' }}" translate-values="{ breakTag : \'<br />\' }"></p>\n\t</div>\n</div>'},function(e,t){e.exports=function(e){e.component("tradingAccountTypeReview",{bindings:{accountType:"<"},template:['<div class="form-bordered">','    <div class="row">','        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">',"            <p>","                <strong>{{ ('tradingAccountTypeProfile.label.type' | translate) + ': ' }}</strong>","                <span>{{ 'tradingAccountTypeProfile.type.' + $ctrl.accountType | translate}}</span>","            </p>","        </div>","    </div>","</div>","<br>"].join("")})}},function(e,t,n){e.exports=function(e){e.component("positionViolation",{bindings:{positions:"<"},template:n(1386),controller:function(){var e=this;e.$onInit=function(){e.positions=e.positions||[]}}})}},function(e,t){e.exports='<h6 class="subtitle">{{ \'accountTypeDowngradeRequest.header.positionViolation\' | translate }}</h6>\n<p>{{ \'accountTypeDowngradeRequest.message.positionViolation\' | translate }}</p>\n<br>\n<div class="table-responsive">\n\t<table cellpadding="0" cellspacing="0" border="0" class="table table-hover tablesorter">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th align="left">{{\'accountTypeDowngradeRequest.label.instruments\' | translate}}</th>\n\t\t\t\t<th align="center">{{\'accountTypeDowngradeRequest.label.positions\' | translate}}</th>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr ng-repeat="position in $ctrl.positions">\n\t\t\t\t<td align="left">\n\t\t\t\t\t<span class="text-red">{{ position.description }}</span>\n\t\t\t\t</td>\n\t\t\t\t<td align="center">\n\t\t\t\t\t<span class="text-red">{{ position.quantity }}</span>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n</div>'},function(e,t,n){e.exports=function(e){e.component("cashViolation",{bindings:{balances:"<"},template:n(1388),controller:function(){var e=this;e.$onInit=function(){e.balances=e.balances||[]}}})}},function(e,t){e.exports="<h6 class=\"subtitle\">{{ 'accountTypeDowngradeRequest.header.cashViolation' | translate }}</h6>\n<p>{{ 'accountTypeDowngradeRequest.message.cashViolation' | translate }}</p>\n<br>\n<ul>\n\t<li ng-repeat=\"balance in $ctrl.balances\">\n\t\t<strong class=\"text-red\">{{ ('currency.' + balance.amount.currencyType) | translate }}</strong>\n\t</li>\n</ul>\n"},function(e,t,n){e.exports=function(e){e.component("capabilityAcknowledgement",{bindings:{acknowledgements:"<",configureLaterFn:"&?"},template:n(1390),controller:["$translate",function(e){var t=this;t.$onInit=function(){t.acknowledgements=t.acknowledgements||[],t.configureLaterFn=t.configureLaterFn||void 0,t.getDisplayText=function(t){var n={strongStart:"<strong>",strongEnd:"</strong>",capability:e.instant("capability.type."+t.capability),form:e.instant("form.title."+t.formNumber),qualifiedCapabilityLevel:e.instant("capabilityLevel.type."+t.qualifiedCapabilityLevel),requestedCapabilityLevel:e.instant("capabilityLevel.type."+t.requestedCapabilityLevel)};return e.instant("capability.acknowledgement."+t.type,n)},t.configureLater=function(e){t.configureLaterFn({capability:e})}}}]})}},function(e,t){e.exports='<div class="alert alert-info" style="background: none;" ng-repeat="acknowledgement in $ctrl.acknowledgements">\n    <div class="row">\n        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n        \t<div ng-switch on="acknowledgement.capability">\n        \t\t<div ng-switch-when="CRYPTO">\n        \t\t\t<crypto-risk-acknowledgement></crypto-risk-acknowledgement>\n        \t\t</div>\n\t\t\t\t<div ng-switch-default>\n\t\t\t\t\t<p ng-bind-html="::$ctrl.getDisplayText(acknowledgement) | renderHTML"></p>\n\t\t\t\t</div>        \t\t\n        \t</div>\n        </div>\n    </div>\n    <div ng-if="acknowledgement.type === \'CAPABILITY_LEVEL\' && acknowledgement.capability === \'OPTION\'">\n    \t<hr>\n    \t<option-level-acknowledgement-descriptor capability-level="{{acknowledgement.qualifiedCapabilityLevel}}"></option-level-acknowledgement-descriptor>\n    </div>\n    <div ng-if="$ctrl.configureLaterFn">\n    \t<hr>\n    \t<p>{{ \'capability.message.remove\' | translate }}</p>\n\t\t<p>\n            <am-button on-click="$ctrl.configureLater(acknowledgement.capability)" btn-text="{{ \'capability.label.remove\' | translate:{\'capability\': (\'capability.type.\' + acknowledgement.capability | translate)} }}"></am-button>\n        </p>    \n    </div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("cryptoRiskAcknowledgement",{template:n(1392)})}},function(e,t){e.exports="<strong>{{ 'cryptoRiskAcknowledgement.header' | translate }}</strong>\n<ul class=\"paralist\">\n\t<li>\n\t\t<p>\n\t\t\t<strong>{{ ('cryptoRiskAcknowledgement.label.priceVolatility' | translate) + ': '}}</strong>\n\t\t\t<span>{{ 'cryptoRiskAcknowledgement.message.priceVolatility' | translate }}</span>\n\t\t</p>\n\t</li>\n\t<li>\n\t\t<p>\n\t\t\t<strong>{{ ('cryptoRiskAcknowledgement.label.consumerProtections' | translate) + ': '}}</strong>\n\t\t\t<span>{{ 'cryptoRiskAcknowledgement.message.consumerProtections' | translate }}</span>\n\t\t</p>\n\t</li>\n\t<li>\n\t\t<p>\n\t\t\t<strong>{{ ('cryptoRiskAcknowledgement.label.digitalAssetHoldings' | translate) + ': '}}</strong>\n\t\t\t<span>{{ 'cryptoRiskAcknowledgement.message.digitalAssetHoldings' | translate }}</span>\n\t\t</p>\n\t</li>\n\t<li>\n\t\t<p>\n\t\t\t<strong>{{ ('cryptoRiskAcknowledgement.label.advice' | translate) + ': '}}</strong>\n\t\t\t<span>{{ 'cryptoRiskAcknowledgement.message.advice' | translate }}</span>\n\t\t</p>\n\t</li>\n\t<li>\n\t\t<p>\n\t\t\t<strong>{{ ('cryptoRiskAcknowledgement.label.liquidityRisk' | translate) + ': '}}</strong>\n\t\t\t<span>{{ 'cryptoRiskAcknowledgement.message.liquidityRisk' | translate }}</span>\n\t\t</p>\n\t</li>\n</ul>"},function(e,t,n){e.exports=function(e){e.component("optionLevelAcknowledgementDescriptor",{bindings:{capabilityLevel:"@"},template:n(1394),controller:[function(){this.$onInit=function(){}}]})}},function(e,t){e.exports="<div ng-if=\"$ctrl.capabilityLevel === 'OPTION_LEVEL_1'\">\n\t<div class=\"row\">\n\t\t<div class=\"col-xs-12 col-sm-12 col-md-12 col-lg-12\">\n\t\t\t<p translate=\"optionLevels.label.includes\" translate-values=\"{level: ('optionLevels.type.OPTION_LEVEL_1' | translate), strongStart: '<strong>', strongEnd: '</strong>'}\">\n\t\t\t\t<span>{{':'}}</span>\n\t\t\t</p>\n\t\t</div>\n\t</div>\n\t<div class=\"row align-items-start\">\n\t\t<div class=\"col-xs-12 col-sm-4 col-md-4 col-lg-4\">\n\t\t\t<ul>\n\t\t\t\t<li>{{ 'optionLevels.label.coveredCall' | translate }}</li>\n\t\t\t</ul>\n\t\t</div>\n\t\t<div class=\"col-xs-12 col-sm-4 col-md-4 col-lg-4\">\n\t\t\t<ul>\n\t\t\t\t<li>{{ 'optionLevels.label.buyWrite' | translate }}</li>\n\t\t\t</ul>\n\t\t</div>\n\t\t<div class=\"col-xs-12 col-sm-4 col-md-4 col-lg-4\">\n\t\t</div>\n\t</div>\n</div>\n<div ng-if=\"$ctrl.capabilityLevel === 'OPTION_LEVEL_2'\">\n\t<div class=\"row\">\n\t\t<div class=\"col-xs-12 col-sm-12 col-md-12 col-lg-12\">\n\t\t\t<p translate=\"optionLevels.label.includes\" translate-values=\"{level: ('optionLevels.type.OPTION_LEVEL_2' | translate), strongStart: '<strong>', strongEnd: '</strong>'}\">\n\t\t\t\t<span>{{':'}}</span>\n\t\t\t</p>\t\t\n\t\t</div>\n\t</div>\n\t<div class=\"row align-items-start\">\n\t\t<div class=\"col-xs-12 col-sm-4 col-md-4 col-lg-4\">\n\t\t\t<ul>\n\t\t\t\t<li>{{ 'optionLevels.label.coveredCall' | translate }}</li>\n\t\t\t\t<li>{{ 'optionLevels.label.longCall' | translate }}</li>\n\t\t\t\t<li>{{ 'optionLevels.label.longPut' | translate }}</li>\n\t\t\t\t<li>{{ 'optionLevels.label.coveredPut' | translate }}</li>\n\t\t\t\t<li>{{ 'optionLevels.label.protectiveCall' | translate }}</li>\n\t\t\t\t<li>{{ 'optionLevels.label.protectivePut' | translate }}</li>\n\t\t\t</ul>\n\t\t</div>\n\t\t<div class=\"col-xs-12 col-sm-4 col-md-4 col-lg-4\">\n\t\t\t<ul>\n\t\t\t\t<li>{{ 'optionLevels.label.buyWrite' | translate }}</li>\n\t\t\t\t<li>{{ 'optionLevels.label.longStaddle' | translate }}</li>\n\t\t\t\t<li>{{ 'optionLevels.label.longStrangle' | translate }}</li>\n\t\t\t\t<li>{{ 'optionLevels.label.conversion' | translate }}</li>\n\t\t\t\t<li>{{ 'optionLevels.label.longCallSpread' | translate }}</li>\n\t\t\t</ul>\n\t\t</div>\n\t\t<div class=\"col-xs-12 col-sm-4 col-md-4 col-lg-4\">\n\t\t\t<ul>\n\t\t\t\t<li>{{ 'optionLevels.label.longPutSpread' | translate }}</li>\t\t\t\t\n\t\t\t\t<li>{{ 'optionLevels.label.longIronCondor' | translate }}</li>\n\t\t\t\t<li>{{ 'optionLevels.label.longBoxSpread' | translate }}</li>\n\t\t\t\t<li>{{ 'optionLevels.label.collar' | translate }}</li>\n\t\t\t\t<li>{{ 'optionLevels.label.shortCollar' | translate }}</li>\n\t\t\t</ul>\n\t\t</div>\n\t</div>\n</div>\n<div ng-if=\"$ctrl.capabilityLevel === 'OPTION_LEVEL_3'\">\n\t<div class=\"row\">\n\t\t<div class=\"col-xs-12 col-sm-12 col-md-12 col-lg-12\">\n\t\t\t<p translate=\"optionLevels.label.includes\" translate-values=\"{level: ('optionLevels.type.OPTION_LEVEL_3' | translate), strongStart: '<strong>', strongEnd: '</strong>'}\">\n\t\t\t\t<span>{{':'}}</span>\n\t\t\t</p>\t\t\n\t\t</div>\n\t</div>\n\t<div class=\"row align-items-start\">\n\t\t<div class=\"col-xs-12 col-sm-4 col-md-4 col-lg-4\">\n\t\t\t<ul>\n\t\t\t\t<li>{{ 'optionLevels.label.coveredCall' | translate }}</li>\n\t\t\t\t<li>{{ 'optionLevels.label.longCall' | translate }}</li>\n\t\t\t\t<li>{{ 'optionLevels.label.longPut' | translate }}</li>\n\t\t\t\t<li>{{ 'optionLevels.label.coveredPut' | translate }}</li>\n\t\t\t\t<li>{{ 'optionLevels.label.protectiveCall' | translate }}</li>\n\t\t\t\t<li>{{ 'optionLevels.label.protectivePut' | translate }}</li>\n\t\t\t\t<li>{{ 'optionLevels.label.shortPut' | translate }}</li>\n\t\t\t\t<li>{{ 'optionLevels.label.synthetic' | translate }}</li>\n\t\t\t\t<li>{{ 'optionLevels.label.reversal' | translate }}</li>\n\t\t\t</ul>\n\t\t</div>\n\t\t<div class=\"col-xs-12 col-sm-4 col-md-4 col-lg-4\">\n\t\t\t<ul>\n\t\t\t\t<li>{{ 'optionLevels.label.buyWrite' | translate }}</li>\n\t\t\t\t<li>{{ 'optionLevels.label.longStaddle' | translate }}</li>\n\t\t\t\t<li>{{ 'optionLevels.label.longStrangle' | translate }}</li>\n\t\t\t\t<li>{{ 'optionLevels.label.conversion' | translate }}</li>\n\t\t\t\t<li>{{ 'optionLevels.label.longCallSpread' | translate }}</li>\n\t\t\t\t<li>{{ 'optionLevels.label.shortCallSpread' | translate }}</li>\t\n\t\t\t\t<li>{{ 'optionLevels.label.shortPutSpread' | translate }}</li>\n\t\t\t\t<li>{{ 'optionLevels.label.shortIronCandor' | translate }}</li>\n\t\t\t\t<li>{{ 'optionLevels.label.longButterfly' | translate }}</li>\n\t\t\t</ul>\n\t\t</div>\n\t\t<div class=\"col-xs-12 col-sm-4 col-md-4 col-lg-4\">\n\t\t\t<ul>\n\t\t\t\t<li>{{ 'optionLevels.label.longPutSpread' | translate }}</li>\t\t\t\t\n\t\t\t\t<li>{{ 'optionLevels.label.longIronCondor' | translate }}</li>\n\t\t\t\t<li>{{ 'optionLevels.label.longBoxSpread' | translate }}</li>\n\t\t\t\t<li>{{ 'optionLevels.label.collar' | translate }}</li>\n\t\t\t\t<li>{{ 'optionLevels.label.shortCollar' | translate }}</li>\n\t\t\t\t<li>{{ 'optionLevels.label.unbalancedButterfly' | translate }}</li>\n\t\t\t\t<li>{{ 'optionLevels.label.shortButterfly' | translate }}</li>\n\t\t\t\t<li>{{ 'optionLevels.label.calendarSpreadDebit' | translate }}</li>\n\t\t\t\t<li>{{ 'optionLevels.label.diagonalSpread' | translate }}</li>\n\t\t\t</ul>\n\t\t</div>\n\t</div>\n</div>"},function(e,t,n){e.exports=function(e){e.component("amFormFinancialNetWorth",{require:{parentForm:"^^form"},bindings:{assets:"=ngModel",rules:"<",hideDescription:"<?",skipped:"=?",questionnaires:"<?"},template:n(1396),controller:["$translate","ACTIVE_CONTEXT","IS_MOBILE","ModalService",function(e,t,n,a){var r=this;r.$onInit=function(){r.hideDescription=r.hideDescription||!1,r.skipped=r.skipped||!1,r.standalone="STANDALONE"===t,r.assets.questionnaires=r.questionnaires||[],r.isMobile=n,r.getAssetRangeText=function(e){return e.rangeLabel},r.getPopoverContent=function(){var t="<div>";return t+='<ul class="paralist">',t+="<li>"+e.instant("financialData.helpMessage.annualIncome",{strongStartTag:"<strong>",strongEndTag:"</strong>"})+"</li>",t+="<li>"+e.instant("financialData.helpMessage.netWorth",{strongStartTag:"<strong>",strongEndTag:"</strong>"})+"</li>",t+="<li>"+e.instant("financialData.helpMessage.liquidNetWorth",{strongStartTag:"<strong>",strongEndTag:"</strong>"})+"</li>",t+="</ul>",t+="</div>"},r.openModal=function(){var t={title:e.instant("financialData.header"),templateUrl:"info-modal.component",modalData:{infoContent:r.getPopoverContent()},buttons:[]};a.openInfoModal(t)},r.getPopoverTrigger=function(){return n?"click":"mouseenter"},r.openConversionModal=function(t){var n={title:e.instant("financialData.label.currencyConversion"),templateUrl:"financial-net-worth-conversion-modal.component",dialogClass:"modal-md",modalData:{currency:t,baseCurrency:r.assets.baseCurrency,liquidNetWorthRanges:r.rules.allowedLiquidNetWorthRanges,netWorthRanges:r.rules.allowedNetWorthRanges,annualIncomeRanges:r.rules.allowedAnnualIncomeRanges}};a.openModal(n).then(function(e){e&&(r.assets.annualNetIncome=e.annualIncome||r.assets.annualNetIncome,r.assets.estimatedNetWorth=e.netWorth||r.assets.estimatedNetWorth,r.assets.liquidNetWorth=e.liquidNetWorth||r.assets.liquidNetWorth)})}}}]})}},function(e,t){e.exports='<h6 class="subtitle" aria-level="2" ng-if="::!$ctrl.hideDescription">\r\n    {{ ($ctrl.rules.displayStyle === \'ORG\') ? \'financialData.orgHeader\' : \'financialData.header\' | translate }}\r\n    <span class="margin-left-5" ng-if="::$ctrl.rules.entityName">\r\n        {{ \'(\' + $ctrl.rules.entityName + \')\' }}\r\n    </span>\r\n    <span ng-if="::$ctrl.rules.skippable" class="text-small panel-group-right">\r\n        {{ \'word.skip\' | translate }}\r\n        <input name="skipped" ng-model="$ctrl.skipped" type="checkbox" i-check />\r\n    </span>\r\n    <span ng-if="::$ctrl.standalone && $ctrl.rules.displayStyle != \'ORG\'">\r\n        <a href="javascript:void(0);" class="btn-icon" role="button" aria-label="{{ \'word.moreInformation\' | translate }}">\r\n            <i ng-if="!$ctrl.isMobile" class="fa fa-question-circle" data-popover="{{$ctrl.getPopoverContent()}}" popover-html="true" popover-trigger="{{$ctrl.getPopoverTrigger()}}" popover-placement="right"></i>\r\n            <i ng-if="$ctrl.isMobile" class="fa fa-question-circle" ng-click="$ctrl.openModal()"></i>\r\n        </a>\r\n    </span>\r\n</h6>\r\n<p ng-if="::!$ctrl.hideDescription">{{ \'financialData.message.\' + $ctrl.rules.displayStyle | translate }}</p>\r\n<p ng-if="::$ctrl.rules.currencyConversionAllowed">\r\n    <am-button btn-text="{{\'financialData.label.currencyConversion\' | translate}}" btn-type="primary" btn-size="small" btn-icon="fa-question-circle" on-click="$ctrl.openConversionModal($ctrl.assets.currency)"></am-button>\r\n</p>\r\n<br>\r\n<div ng-if="::$ctrl.rules.displayRangeIdNote" class="alert alert-gray">\r\n    <p>{{ \'financialData.note.rangeId\' | translate }}</p>\r\n</div>\r\n<div ng-if="::$ctrl.rules.displayCurrencyChangeNote" class="alert alert-gray">\r\n    <p>{{ \'financialData.note.currency\' | translate:{currency: $ctrl.assets.currency} }}</p>\r\n</div>\r\n\x3c!-- \r\n    General style financial net worth form\r\n--\x3e\r\n<general-financial-net-worth-form ng-if="$ctrl.rules.displayStyle != \'ORG\'" ng-model="$ctrl.assets" rules="$ctrl.rules"></general-financial-net-worth-form>\r\n\x3c!-- \r\n    ORG style financial net worth form\r\n--\x3e\r\n<org-financial-net-worth-form ng-if="$ctrl.rules.displayStyle == \'ORG\'" ng-model="$ctrl.assets" rules="$ctrl.rules"></org-financial-net-worth-form>\r\n\x3c!-- \r\n    Questionnaire\r\n--\x3e\r\n<questionnaire-form ng-repeat="finInfoQuestionnaire in $ctrl.assets.questionnaires" name="{{finInfoQuestionnaire.name}}" ng-model="finInfoQuestionnaire" single-column="true" display-title="true"></questionnaire-form>'},function(e,t,n){e.exports=function(e){e.component("generalFinancialNetWorthForm",{require:{parentForm:"^amFormFinancialNetWorth"},bindings:{assets:"=ngModel",rules:"<"},template:n(1398),controller:["ACTIVE_CONTEXT",function(e){var t=this;t.$onInit=function(){t.skipped=t.parentForm.skipped||!1,t.getAssetRangeText=t.parentForm.getAssetRangeText}}]})}},function(e,t){e.exports='\x3c!-- \n    Annual Net Income\n--\x3e\n<am-form-select name="annualIncome" ng-if="::$ctrl.rules.allowedAnnualIncomeRanges.length > 0" ng-model="$ctrl.assets.annualNetIncome" options="$ctrl.rules.allowedAnnualIncomeRanges" option-key="$ctrl.getAssetRangeText" track-by-id="rangeId" is-disabled="$ctrl.skipped || $ctrl.rules.disabled" label-text="{{ \'financialData.label.annualIncome\' | translate:{currency: $ctrl.assets.currency} }}" no-translate="true" required></am-form-select>\n\x3c!-- \n    Net Worth\n--\x3e\n<am-form-select name="netWorth" ng-if="::$ctrl.rules.allowedNetWorthRanges.length > 0" ng-model="$ctrl.assets.estimatedNetWorth" options="$ctrl.rules.allowedNetWorthRanges" option-key="$ctrl.getAssetRangeText" track-by-id="rangeId" is-disabled="$ctrl.skipped || $ctrl.rules.disabled" label-text="{{ \'financialData.label.netWorth\' | translate:{currency: $ctrl.assets.currency} }}" no-translate="true" required></am-form-select>\n\x3c!-- \n    Liquid Net Worth\n--\x3e\n<am-form-select name="liquidNetWorth" ng-if="::$ctrl.rules.allowedLiquidNetWorthRanges.length > 0" ng-model="$ctrl.assets.liquidNetWorth" options="$ctrl.rules.allowedLiquidNetWorthRanges" option-key="$ctrl.getAssetRangeText" track-by-id="rangeId" is-disabled="$ctrl.skipped || $ctrl.rules.disabled" label-text="{{ \'financialData.label.liquidNetWorth\' | translate:{currency: $ctrl.assets.currency} }}" no-translate="true" required></am-form-select>\n\x3c!-- \n    Total Assets\n--\x3e\n<am-form-select name="totalAssets" ng-if="::$ctrl.rules.allowedTotalAssetsRanges.length > 0" ng-model="$ctrl.assets.totalAssets" options="$ctrl.rules.allowedTotalAssetsRanges" option-key="$ctrl.getAssetRangeText" track-by-id="rangeId" is-disabled="$ctrl.skipped || $ctrl.rules.disabled" label-text="{{ \'financialData.label.totalAssets\' | translate:{currency: $ctrl.assets.currency} }}" no-translate="true" required></am-form-select>\n\x3c!-- \n    Source of Funds\n--\x3e\n<am-form-input name="sourceOfFunds" ng-if="::$ctrl.rules.sourceOfFundsRequired" ng-model="$ctrl.assets.sourceOfFunds" is-disabled="$ctrl.skipped || $ctrl.rules.disabled" label-text="{{ \'financialData.label.sourceOfFund\' | translate }}" max-length="100" required></am-form-input>\n\x3c!-- \n    Source of Funds\n--\x3e\n<am-form-input name="reasonForNlvUpdate" ng-if="::$ctrl.rules.reasonForNlvUpdateRequired" ng-model="$ctrl.assets.reasonForNlvUpdate" is-disabled="$ctrl.skipped || $ctrl.rules.disabled" label-text="{{ \'financialData.label.reasonForNlvUpdate\' | translate }}" max-length="100" required></am-form-input>\n<br>'},function(e,t,n){e.exports=function(e){e.component("orgFinancialNetWorthForm",{require:{parentForm:"^amFormFinancialNetWorth"},bindings:{assets:"=ngModel",rules:"<"},template:n(1400),controller:["ACTIVE_CONTEXT",function(e){var t=this;t.$onInit=function(){t.skipped=t.parentForm.skipped||!1,t.getAssetRangeText=t.parentForm.getAssetRangeText}}]})}},function(e,t){e.exports='\x3c!-- \n    Annual Income\n--\x3e\n<div class="margin-bottom-10" ng-if="::$ctrl.rules.allowedAnnualIncomeRanges.length > 0">\n    <h6>{{ \'financialData.label.annualIncome\' | translate:{currency: $ctrl.assets.currency} }}</h6>\n    <p translate="{{\'financialData.labelDesc.annualIncome\'}}" translate-values="{strongStart: \'<strong>\', strongEnd: \'</strong>\'}"></p>\n    <div class="row">\n        <div class="col-xs-12 col-sm-4 col-md-4 col-lg-4">\n            <am-select name="annualIncome" ng-model="$ctrl.assets.annualNetIncome" options="$ctrl.rules.allowedAnnualIncomeRanges" option-key="$ctrl.getAssetRangeText" track-by-id="rangeId" is-disabled="$ctrl.skipped || $ctrl.rules.disabled" no-translate="true" required></am-select>\n        </div>\n    </div>\n    <br />\n</div>\n\x3c!-- \n    Net Worth\n--\x3e\n<div class="margin-bottom-10" ng-if="::$ctrl.rules.allowedNetWorthRanges.length > 0">\n    <h6>{{ \'financialData.label.netWorth\' | translate:{currency: $ctrl.assets.currency} }}</h6>\n    <p translate="{{\'financialData.labelDesc.netWorth\'}}" translate-values="{strongStart: \'<strong>\', strongEnd: \'</strong>\'}"></p>\n    <div class="row">\n        <div class="col-xs-12 col-sm-4 col-md-4 col-lg-4">\n            <am-select name="netWorth" ng-model="$ctrl.assets.estimatedNetWorth" options="$ctrl.rules.allowedNetWorthRanges" option-key="$ctrl.getAssetRangeText" track-by-id="rangeId" is-disabled="$ctrl.skipped || $ctrl.rules.disabled" no-translate="true" required></am-select>\n        </div>\n    </div>\n    <br />\n</div>\n\x3c!-- \n    Liquid Net Worth\n--\x3e\n<div class="margin-bottom-10" ng-if="::$ctrl.rules.allowedLiquidNetWorthRanges.length > 0">\n    <h6>{{ \'financialData.label.liquidNetWorthOrg\' | translate:{currency: $ctrl.assets.currency} }}</h6>\n    <p translate="{{\'financialData.labelDesc.liquidNetWorth\'}}" translate-values="{strongStart: \'<strong>\', strongEnd: \'</strong>\'}"></p>\n    <div class="row">\n        <div class="col-xs-12 col-sm-4 col-md-4 col-lg-4">\n            <am-select name="liquidNetWorth" ng-model="$ctrl.assets.liquidNetWorth" options="$ctrl.rules.allowedLiquidNetWorthRanges" option-key="$ctrl.getAssetRangeText" track-by-id="rangeId" is-disabled="$ctrl.skipped || $ctrl.rules.disabled"  no-translate="true" required></am-select>\n        </div>\n    </div>\n    <br />\n</div>\n\x3c!-- \n    Total Assets\n--\x3e\n<div class="margin-bottom-10" ng-if="::$ctrl.rules.allowedTotalAssetsRanges.length > 0">\n    <h6>{{ \'financialData.label.totalAssets\' | translate:{currency: $ctrl.assets.currency} }}</h6>\n    <div class="row">\n        <div class="col-xs-12 col-sm-4 col-md-4 col-lg-4">\n            <am-select name="totalAssets" ng-model="$ctrl.assets.totalAssets" options="$ctrl.rules.allowedTotalAssetsRanges" option-key="$ctrl.getAssetRangeText" track-by-id="rangeId" is-disabled="$ctrl.skipped || $ctrl.rules.disabled" no-translate="true" required></am-select>\n        </div>\n    </div>\n    <br />\n</div>\n\x3c!-- \n    Source of Funds\n--\x3e\n<div class="margin-bottom-10" ng-if="::$ctrl.rules.sourceOfFundsRequired">\n    <h6>{{ \'financialData.label.sourceOfFund\' | translate }}</h6>\n    <div class="row">\n        <div class="col-xs-12 col-sm-4 col-md-4 col-lg-4">\n            <am-input name="sourceOfFunds" ng-model="$ctrl.assets.sourceOfFunds" is-disabled="$ctrl.skipped || $ctrl.rules.disabled" max-length="100" required></am-input>\n        </div>\n    </div>\n    <br />\n</div>\n\x3c!-- \n    Reason for NLV update\n--\x3e\n<div class="margin-bottom-10" ng-if="::$ctrl.rules.reasonForNlvUpdateRequired">\n    <h6>{{ \'financialData.label.reasonForNlvUpdate\' | translate }}</h6>\n    <div class="row">\n        <div class="col-xs-12 col-sm-4 col-md-4 col-lg-4">\n            <am-input name="reasonForNlvUpdate" ng-model="$ctrl.assets.reasonForNlvUpdate" is-disabled="$ctrl.skipped || $ctrl.rules.disabled" max-length="100" required></am-input>\n        </div>\n    </div>\n    <br />\n</div>\n<br />'},function(e,t,n){e.exports=function(e){e.component("financialNetWorthReview",{bindings:{financialNetWorth:"<",configurable:"<?",configureFn:"&?"},template:["$attrs",function(e){return(e.revised||"").length>0?n(1402):n(1403)}],controller:["FinancialInfoService",function(e){var t=this;t.$onInit=function(){t.configurable=t.configurable||!1,t.configureFn=t.configureFn||void 0,t.currency=t.financialNetWorth.currency,t.annualIncome=t.financialNetWorth.annualNetIncome,t.liquidNetWorth=t.financialNetWorth.liquidNetWorth,t.netWorth=t.financialNetWorth.estimatedNetWorth,t.totalAssets=t.financialNetWorth.totalAssets,t.sourceOfFunds=t.financialNetWorth.sourceOfFunds,t.reasonForNlvUpdate=t.financialNetWorth.reasonForNlvUpdate,t.isValidNetWorth=e.isValidNetWorth}}]})}},function(e,t){e.exports='<div class="row">\n\t<div class="col-12 col-sm-12 col-md-3 col-lg-3">\n\t\t<p class="review-title">{{ \'financialData.header\' | translate }}</p>\n\t</div>\n\t<div class="col-12 col-sm-12 col-md-7 col-lg-7">\n\t\t<div class="row" ng-if="$ctrl.annualIncome !== undefined">\n\t\t\t<div class="col-12 col-sm-5 col-md-5 col-lg-5">\n\t\t\t\t<p class="review-label">{{\'financialData.label.annualIncome\' | translate:{currency: $ctrl.currency} }}</p>\n\t\t\t</div>\n\t\t\t<div class="col-12 col-sm-7 col-md-7 col-lg-7">\n\t\t\t\t<p class="review-label">{{ $ctrl.annualIncome.rangeLabel }}</p>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="row" ng-if="$ctrl.netWorth !== undefined">\n\t\t\t<div class="col-12 col-sm-5 col-md-5 col-lg-5">\n\t\t\t\t<p class="review-label">{{ \'financialData.label.netWorth\' | translate:{currency: $ctrl.currency} }}</p>\n\t\t\t</div>\n\t\t\t<div class="col-12 col-sm-7 col-md-7 col-lg-7">\n\t\t\t\t<p class="review-label">{{ $ctrl.netWorth.rangeLabel }}</p>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="row" ng-if="$ctrl.liquidNetWorth !== undefined">\n\t\t\t<div class="col-12 col-sm-5 col-md-5 col-lg-5">\n\t\t\t\t<p class="review-label">{{ \'financialData.label.liquidNetWorth\' | translate:{currency: $ctrl.currency} }}</p>\n\t\t\t</div>\n\t\t\t<div class="col-12 col-sm-7 col-md-7 col-lg-7">\n\t\t\t\t<p class="review-label">{{ $ctrl.liquidNetWorth.rangeLabel }}</p>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div class="col-12 col-sm-12 col-md-2 col-lg-2">\n\t\t<p class="review-btn" ng-if="::$ctrl.configurable && $ctrl.configureFn">\n\t\t\t<am-button btn-type="primary" on-click="$ctrl.configureFn()" btn-text="{{ \'word.edit\' | translate }}"></am-button>\n\t\t</p>\n\t</div>\n</div>\n<hr>\n<br>'},function(e,t){e.exports='<h6 class="subtitle">{{\'financialData.header\' | translate }}</h6>\n\x3c!-- \n\tAnnual Income\n--\x3e\n<am-form-label ng-if="::$ctrl.isValidNetWorth($ctrl.annualIncome)" label-text="{{ \'financialData.label.annualIncome\' | translate:{currency: $ctrl.currency} }}" value-text="{{ $ctrl.annualIncome.rangeLabel }}"></am-form-label>\n\x3c!-- \n\tNet Worth\n--\x3e\n<am-form-label ng-if="::$ctrl.isValidNetWorth($ctrl.netWorth)" label-text="{{ \'financialData.label.netWorth\' | translate:{currency: $ctrl.currency} }}" value-text="{{ $ctrl.netWorth.rangeLabel }}"></am-form-label>\n\x3c!-- \n\tLiquid Net Worth\n--\x3e\n<am-form-label ng-if="::$ctrl.isValidNetWorth($ctrl.liquidNetWorth)" label-text="{{ \'financialData.label.liquidNetWorth\' | translate:{currency: $ctrl.currency} }}" value-text="{{ $ctrl.liquidNetWorth.rangeLabel }}"></am-form-label>\n\x3c!-- \n\tTotal Assets\n--\x3e\n<am-form-label ng-if="::$ctrl.isValidNetWorth($ctrl.totalAssets)" label-text="{{ \'financialData.label.totalAssets\' | translate:{currency: $ctrl.currency} }}" value-text="{{ $ctrl.totalAssets.rangeLabel }}"></am-form-label>\n\x3c!-- \n\tSource of Funds\n--\x3e\n<am-form-label ng-if="::$ctrl.sourceOfFunds" label-text="{{ \'financialData.label.sourceOfFund\' | translate }}" value-text="{{ $ctrl.sourceOfFunds }}"></am-form-label>\n\x3c!-- \n\tReason For NLV Update\n--\x3e\n<am-form-label ng-if="::$ctrl.reasonForNlvUpdate" label-text="{{ \'financialData.label.sourceOfFund\' | translate }}" value-text="{{ $ctrl.reasonForNlvUpdate }}"></am-form-label>\n<br>'},function(e,t,n){e.exports=function(e){e.component("cashForexReview",{bindings:{cashForexDetails:"<"},template:["$attrs",function(e){return(e.revised||"").length>0?n(1405):n(1406)}]})}},function(e,t){e.exports='<div class="row">\n\t<div class="col-12 col-sm-12 col-md-3 col-lg-3">\n\t\t<p class="review-title">{{ \'cashForex.header.qualification\' | translate }}</p>\n\t</div>\n\t<div class="col-12 col-sm-12 col-md-7 col-lg-7">\n\t\t<div class="row">\n\t\t\t<div class="col-xs-12 col-sm-12 col-md-8 col-lg-10">\n\t\t\t\t<p translate="cashForex.question.forexDealer" translate-values="{startTag: \'<a href=&quot;http://www.nfa.futures.org/nfamanual/NFAManual.aspx?RuleID=SECTION%2011&Section=7&quot; target=&quot;_blank&quot;>\', endTag: \'</a>\'}"></p>\n\t\t\t</div>\n\t\t\t<div class="col-xs-12 col-sm-12 col-md-4 col-lg-2">\n\t\t\t\t<p><strong>{{$ctrl.cashForexDetails.forexDealer ? (\'word.yes\' | translate) : (\'word.no\' | translate)}}</strong></p>\n\t\t\t</div>\n\t\t\t<br ng-if="$ctrl.cashForexDetails.forexDealer">\n\t\t</div>\n\t\t<div class="row" ng-if="$ctrl.cashForexDetails.forexDealer">\n\t\t\t<div class="col-xs-12 col-sm-12 col-md-8 col-lg-10">\n\t\t\t\t<p translate="cashForex.question.marginCertification" translate-values="{startTag: \'<a href=&quot;http://www.nfa.futures.org/nfamanual/NFAManual.aspx?RuleID=SECTION%2012&Section=7&quot; target=&quot;_blank&quot;>\', endTag: \'</a>\'}"></p>\n\t\t\t</div>\n\t\t\t<div class="col-xs-12 col-sm-12 col-md-4 col-lg-2">\n\t\t\t\t<p><strong>{{ $ctrl.cashForexDetails.marginCertification ? (\'word.doAgree\' | translate) : (\'word.dontAgree\' | translate)}}</strong></p>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div class="col-12 col-sm-12 col-md-2 col-lg-2">\n\t\t<p class="review-btn" ng-if="false">\n\t\t\t<am-button btn-text="{{\'tradingProductSummary.label.add\' | translate}}" on-click=""></am-button>\n\t\t</p>\n\t</div>\n</div>\n<br>\n<hr>\n<br>'},function(e,t){e.exports='<h6 class="subtitle">{{ \'cashForex.header.qualification\' | translate }}</h6>\n<div class="row">\n\t<div class="col-xs-12 col-sm-12 col-md-8 col-lg-10">\n\t\t<p translate="cashForex.question.forexDealer" translate-values="{startTag: \'<a href=&quot;http://www.nfa.futures.org/nfamanual/NFAManual.aspx?RuleID=SECTION%2011&Section=7&quot; target=&quot;_blank&quot;>\', endTag: \'</a>\'}"></p>\n\t</div>\n\t<div class="col-xs-12 col-sm-12 col-md-4 col-lg-2">\n\t\t<p><strong>{{$ctrl.cashForexDetails.forexDealer ? (\'word.yes\' | translate) : (\'word.no\' | translate)}}</strong></p>\n\t</div>\n\t<br ng-if="$ctrl.cashForexDetails.forexDealer">\n</div>\n<div class="row" ng-if="$ctrl.cashForexDetails.forexDealer">\n\t<div class="col-xs-12 col-sm-12 col-md-8 col-lg-10">\n\t\t<p translate="cashForex.question.marginCertification" translate-values="{startTag: \'<a href=&quot;http://www.nfa.futures.org/nfamanual/NFAManual.aspx?RuleID=SECTION%2012&Section=7&quot; target=&quot;_blank&quot;>\', endTag: \'</a>\'}"></p>\n\t</div>\n\t<div class="col-xs-12 col-sm-12 col-md-4 col-lg-2">\n\t\t<p><strong>{{ $ctrl.cashForexDetails.marginCertification ? (\'word.doAgree\' | translate) : (\'word.dontAgree\' | translate)}}</strong></p>\n\t</div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("currencyConversion",{template:n(1408),controller:["$window","CurrencyConversionUrlService",function(e,t,n){var a=this;a.$onInit=function(){a.isOneBar=e.onebar||!1,a.goToCurrencyConversion=function(){n.gotoPlatformBasedCurrencyConversion()}}}]})}},function(e,t){e.exports='<div ng-if="$ctrl.isOneBar" class="container-faq">\n    <div class="form-group">\n        <div class="row align-items-center">\n            <div class="col-xs-2 col-sm-2 col-md-2 col-lg-2"> \n                <div align="center">\n                    <img class="w-100" src="/images/am/currency-exchange.svg" alt="Conversion" border="0" />\n                </div>\n            </div>\n            <div class="col-xs-10 col-sm-10 col-md-10 col-lg-10">\n                <h6>{{\'currencyConversion.header\' | translate}}</h6>\n                <p>{{\'currencyConversion.desc\' | translate}}</p>\n            </div>\n        </div>\n        <br>\n        <am-button btn-class="w-100 " btn-size="large" btn-text="{{\'currencyConversion.btn\' | translate}}" on-click="$ctrl.goToCurrencyConversion()" btn-type="primary"></am-button>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("capabilitySkippableErrors",{bindings:{errors:"<",skipFn:"&"},template:n(1410),controller:[function(){var e=this;e.$onInit=function(){e.errors=e.errors||{},e.skip=function(t){e.skipFn({capability:t})}}}]})}},function(e,t){e.exports='<div class="alert alert-info" ng-repeat="(capability, values) in $ctrl.errors">\n\t<div class="text-center">\n\t\t<h5>{{ \'capability.type.\' + capability | translate }}</h5>\n\t\t<div ng-repeat="value in values">\n\t\t\t<p>{{ value }}</p>\n\t\t</div>\n\t\t<div ng-if="$ctrl.skipFn">\n\t\t\t<hr>\n\t\t\t<p>{{ \'capability.message.skippable\' | translate:{capability: (\'capability.type.\' + capability | translate )} }}</p>\n\t\t\t<p>\n\t            <am-button on-click="$ctrl.skip(capability)" btn-text="{{ \'capability.label.remove\' | translate:{\'capability\': (\'capability.type.\' + capability | translate)} }}"></am-button>\n\t        </p>\t\t\n\t\t</div>\t\n\t</div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("financialInfoError",{bindings:{errors:"<",category:"@?",skipDisclosure:"<?"},template:n(1412),controller:["WHITE_BRANDING_DETAILS",function(e){var t=this;t.$onInit=function(){t.errors=t.errors||[],t.category=t.category||"",t.isBranded=e.isBranded()||!1,t.whiteBrandingTitle=e.getTitle()||"IBKR"}}]})}},function(e,t){e.exports='<div class="alert alert-warning" ng-if="::$ctrl.category === \'\'">\n    <p ng-if="$ctrl.errors.length === 1" ng-bind-html="$ctrl.errors[0] | renderHTML"></p>\n    <ul ng-if="$ctrl.errors.length > 1">\n        <li ng-repeat="error in $ctrl.errors track by $index" ng-bind-html="error | renderHTML"></li>\n    </ul>\n    <br>\n    <p ng-if="::!$ctrl.skipDisclosure" translate="capability.error.message" translate-values="{strongStart: \'<strong>\', strongEnd: \'</strong>\', whiteBrandingTitle: $ctrl.whiteBrandingTitle}"></p>\n</div>\n<div class="alert alert-warning" ng-if="::$ctrl.category === \'TP_UPGRADE\'">\n\t<div class="row">\n\t\t<div class="col-xs-12 col-sm-12 col-md-2 col-lg-2">\n\t\t\t<p><i class="fas fa-3x fa-exclamation-triangle"></i></p>\n\t\t</div>\n\t\t<div class="col-xs-12 col-sm-12 col-md-10 col-lg-10">\n\t\t\t<p ng-if="$ctrl.errors.length === 1" ng-bind-html="$ctrl.errors[0] | renderHTML"></p>\n\t\t    <ul ng-if="$ctrl.errors.length > 1">\n\t\t        <li ng-repeat="error in $ctrl.errors track by $index" ng-bind-html="error | renderHTML"></li>\n\t\t    </ul>\n    \t\t<br>\n    \t\t<p ng-if="::!$ctrl.skipDisclosure" translate="capability.error.message" translate-values="{strongStart: \'<strong>\', strongEnd: \'</strong>\', whiteBrandingTitle: $ctrl.whiteBrandingTitle}"></p>\n\t\t</div>\n\t</div>\n</div>\n'},function(e,t){e.exports=function(e){e.component("tradingExchangeRestrictions",{bindings:{restrictions:"<"},template:['<div class="alert alert-gray" style="background: none" ng-if="$ctrl.restrictions.length > 0">',"    <p>","        <strong>{{ ('word.Notes' | translate) + ': ' }}</strong>","        {{ 'tradingPermissionProfile.label.additionalProducts' | translate }}","    </p>","    <ul>",'        <li ng-repeat="restriction in $ctrl.restrictions">','            <p translate="{{ \'tradingPermissionProfile.restriction.\' + restriction.value }}" translate-values="restriction.params"></p>',"        </li>","    </ul>","</div>"].join("")})}},function(e,t){e.exports=function(e){e.component("tradingPermissionProfileWarning",{template:['<div class="row">','    <div class="col-xs-12 col-lg-12 col-md-12 col-sm-12">',"        <p>{{$ctrl.warning}}</p>","    </div>","</div>"].join(""),controller:["ModalService",function(e){var t=this;t.$onInit=function(){t.warning=e.getModalData().warning}}]})}},function(e,t,n){e.exports=function(e){e.component("capabilityExam",{bindings:{exams:"<",configureLaterFn:"&?"},template:["ACTIVE_CONTEXT","ApplicationContext",function(e,t){return e===t.STANDALONE?n(1416):n(1417)}],controller:["ModalService","$translate",function(e,t){var n=this;n.$onInit=function(){n.completeExam=function(a){var r;r="CRYPTO_TEACHING_EXAM"===a?"am-exam-questionnaire.component":"BOND_TEACHING_EXAM_LLC"===a?"am-exam-questionnaire.component":"STOCK_TEACHING_EXAM"===a?"am-exam-questionnaire.component":"CFD_TEACHING_EXAM"===a?"am-exam-questionnaire.component":"am-exam-questions.component";var i={title:t.instant("exam.type."+a),templateUrl:r,dialogClass:"modal-lg",modalData:{examType:a}};e.openModal(i).then(function(e){if(e){var t=n.exams.findIndex(function(e){return e.exam===a});n.exams.splice(t,1)}})},n.configureLater=function(e){n.configureLaterFn({exam:e})},n.getExamText=function(e){return t.instant("exam.type."+e.exam)},n.getCapabilities=function(e){return(e.capabilities||[]).map(function(e){return t.instant("capability.type."+e)}).join(", ")}}}]})}},function(e,t){e.exports='<div class="alert alert-info" ng-repeat="capabilityExam in $ctrl.exams">\n\t<div class="row">\n\t\t<div class="col-xs-12 col-sm-12 col-md-9 col-lg-9">\n\t\t\t<p translate="{{\'capability.exam.message\'}}" translate-values="{capabilities: $ctrl.getCapabilities(capabilityExam), startStrongTag: \'<strong>\', endStrongTag: \'</strong>\'}"></p>\n\t\t</div>\n\t\t<div class="col-xs-12 col-sm-12 col-md-3 col-lg-3">\n\t\t\t<p class="btn-group-right">\n\t\t\t\t<am-button on-click="$ctrl.completeExam(capabilityExam.exam)" btn-type="primary" btn-text="{{\'exam.type.\' + capabilityExam.exam | translate }}"></am-button>\n\t\t\t</p>\n\t\t</div>\n\t</div>\n\t<hr ng-if="$ctrl.configureLaterFn">\n\t<div class="row" ng-if="$ctrl.configureLaterFn">\n\t\t<div class="col-xs-12 col-sm-12 col-md-9 col-lg-9">\n\t\t\t<p>{{ \'investmentconfig.error.configureLater\' | translate }}</p>\n\t\t</div>\n\t\t<div class="col-xs-12 col-sm-12 col-md-3 col-lg-3">\n\t\t\t<p class="btn-group-right">\n\t\t\t\t<am-button on-click="$ctrl.configureLater(capabilityExam.exam)" btn-text="{{ \'word.configureLater\' | translate }}"></am-button>\n\t\t\t</p>\n\t\t</div>\n\t</div>\n</div>'},function(e,t){e.exports='<div class="alert alert-info" ng-repeat="capabilityExam in $ctrl.exams">\n\t<div class="row">\n\t\t<div class="col-xs-12 col-sm-12 col-md-2 col-lg-2">\n\t\t\t<p><i class="fas fa-3x fa-info-circle text-blue"></i></p>\n\t\t</div>\n\t\t<div class="col-xs-12 col-sm-12 col-md-7 col-lg-7">\n\t\t\t<p translate="{{\'capability.exam.upgradeMessage\'}}" translate-values="{capabilities: $ctrl.getCapabilities(capabilityExam), exam: $ctrl.getExamText(capabilityExam), startStrongTag: \'<strong>\', endStrongTag: \'</strong>\', lineBreak: \'<br />\'}"></p>\n\t\t</div>\n\t\t<div class="col-xs-12 col-sm-12 col-md-3 col-lg-3">\n\t\t\t<p class="btn-group-right">\n\t\t\t\t<am-button on-click="$ctrl.completeExam(capabilityExam.exam)" btn-type="primary" btn-text="{{ \'exam.label.startExam\' | translate }}"></am-button>\n\t\t\t</p>\n\t\t</div>\n\t</div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("amExam",{bindings:{examTypes:"<",configureLaterFn:"&?"},template:n(1419),controller:["ModalService","$translate",function(e,t){var n=this;n.$onInit=function(){n.completeExam=function(a){var r={title:t.instant("exam.type."+a),templateUrl:"am-exam-questions.component",dialogClass:"modal-lg",modalData:{examType:a}};e.openModal(r).then(function(e){if(e){var t=n.examTypes.indexOf(a);n.examTypes.splice(t,1)}})},n.configureLater=function(e){n.configureLaterFn({exam:e})}}}]})}},function(e,t){e.exports="<div class=\"alert alert-info\" ng-repeat=\"exam in $ctrl.examTypes\">\r\n\t<div class=\"text-center\">\r\n\t\t<div ng-if=\"exam !== 'CLP_TEACHING_EXAM'\">\r\n\t\t\t<p>{{'exam.error.' + exam | translate }}</p>\r\n\t\t</div>\r\n\t\t<div ng-if=\"exam === 'CLP_TEACHING_EXAM'\">\r\n\t\t\t<h5>{{ 'exam.error.' + exam | translate }}</h5>\r\n\t\t\t<p>{{ 'exam.error.clp.line1' | translate }}</p>\r\n\t\t\t<p>{{ 'exam.error.clp.line2' | translate }}</p>\r\n\t\t\t<h5><strong>{{ 'exam.error.clp.line3' | translate }}</strong></h5>\r\n\t\t\t<p>{{ 'exam.error.clp.line4' | translate }}</p>\r\n\t\t\t<p>{{ 'exam.error.clp.line5' | translate }}</p>\r\n\t\t</div>\r\n\t\t<p>\r\n            <am-button on-click=\"$ctrl.completeExam(exam)\" btn-text=\"{{'exam.type.' + exam | translate }}\"></am-button>\r\n        </p>\r\n\t\t<div ng-if=\"$ctrl.configureLaterFn\">\r\n\t        <hr>\r\n\t        <p>{{ 'investmentconfig.error.configureLater' | translate }}</p>\r\n\t        <p>\r\n                <am-button on-click=\"$ctrl.configureLater(exam)\" btn-text=\"{{ 'word.configureLater' | translate }}\"></am-button>\r\n            </p>\r\n\t    </div>\r\n\t</div>\r\n</div>"},function(e,t,n){e.exports=function(e){e.component("amExamQuestions",{template:n(1421),controller:["ModalService","ResourceService",function(t,n){var a=this,r=function(){return a.isLoading},i=function(){a.isLoading=!0,a.errors=void 0;var r={examType:a.examType,question:{name:a.questions[a.index].name,answer:a.questions[a.index].answer},index:a.index};n.update(e.SERVER_PATH+"/Exam",r).then(function(e){a.index=e.data.index,a.index==a.questions.length&&t.setModalResult(!0)}).catch(function(e){a.errors=e.data.errors}).finally(function(){o(),a.isLoading=!1})},o=function(){var e=[];a.errors&&a.errors.exam?(e.push({label:"word.close",alignment:"left",fn:t.closeModal}),e.push({label:"word.continue",alignment:"right",fn:i,btnType:"primary",isDisabled:r})):a.index<a.questions.length?e.push({label:"word.continue",alignment:"right",fn:i,btnType:"primary",isDisabled:r}):e.push({label:"word.close",alignment:"right",fn:t.closeModal}),t.setModalButtons(e)};a.$onInit=function(){a.isLoading=!0,a.examType=t.getModalData().examType,a.errors={},n.fetch(e.SERVER_PATH+"/Exam",{type:a.examType}).then(function(e){a.questions=e.data.questions,a.index=e.data.index,o()}).finally(function(){a.isLoading=!1})}}]})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.isLoading"></loading-overlay>\r\n\r\n<div class="alert alert-info" ng-if="$ctrl.index < $ctrl.questions.length">\r\n\t<p translate="exam.header" translate-values="{ total: $ctrl.questions.length }"></p>\r\n</div>\r\n\r\n<div class="alert alert-success" ng-if="$ctrl.index >= $ctrl.questions.length">\r\n\t<p class="text-center" translate="exam.message.success" translate-value-exam="{{ (\'exam.type.\' + $ctrl.examType | translate) }}"></p>\r\n</div>\r\n\r\n<div class="alert alert-danger" ng-if="$ctrl.errors.exam">\r\n\t<p>{{ \'exam.error.\' + $ctrl.errors.exam | translate }}</p>\r\n</div>\r\n\r\n<div ng-if="$ctrl.index < $ctrl.questions.length">\r\n\t<p>\r\n\t\t{{$ctrl.index + 1 + \'.\'}}\r\n\t\t<span class="margin-left-10" translate="{{ \'exam.\' + $ctrl.examType + \'.\' + $ctrl.questions[$ctrl.index].name + \'.title\' }}" translate-values="{ break: \'<br />\' }"></span>\r\n\t</p>\r\n\t<br>\r\n\t<div class="row" ng-repeat="option in $ctrl.questions[$ctrl.index].options">\r\n\t\t<div class="col-xs-2 col-sm-1 col-md-1 col-lg-1">\r\n\t\t\t<p class="text-center">\r\n\t\t\t\t<input ng-model="$ctrl.questions[$ctrl.index].answer" type="radio" value="{{option.value}}" i-check required />\r\n\t\t\t</p>\r\n\t\t</div>\r\n\t\t<div class="col-xs-10 col-sm-11 col-md-11 col-lg-11">\r\n\t\t\t<p>{{ (\'exam.\' + $ctrl.examType + \'.\' + $ctrl.questions[$ctrl.index].name + \'.option_\' + option.value) | translate }}</p>\r\n\t\t</div>\r\n\t</div>\r\n\t<br>\r\n\t<div class="alert alert-danger" ng-if="$ctrl.errors[$ctrl.questions[$ctrl.index].name]">\r\n\t\t<p>{{ \'exam.error.\' + $ctrl.errors[$ctrl.questions[$ctrl.index].name] | translate }}</p>\r\n\t</div>\r\n</div>'},function(e,t,n){e.exports=function(e){e.component("amExamQuestionnaire",{template:n(1423),controller:["ModalService","ResourceService",function(t,n){var a=this,r=function(){return a.isLoading},i=function(){a.isLoading=!0,a.errors=void 0;var r={examType:a.examType,questionnaire:a.questionnaire};n.update(e.SERVER_PATH+"/ExamQuestionnaire",r).then(function(e){a.success=e.data.success||!1,a.success&&t.setModalResult(!0),o()}).catch(function(e){a.errors=e.data.errors}).finally(function(){a.isLoading=!1})},o=function(){var e=[];a.success||e.push({label:"word.submit",alignment:"right",fn:i,btnType:"primary",isDisabled:r}),e.push({label:"word.close",alignment:"left",fn:t.closeModal}),t.setModalButtons(e)};a.$onInit=function(){a.isLoading=!0,a.examType=t.getModalData().examType,a.errors={},n.fetch(e.SERVER_PATH+"/ExamQuestionnaire",{type:a.examType}).then(function(e){a.questionnaire=e.data,a.displayDescription=222===a.questionnaire.id||!1,o()},function(e){a.errors=e.errors}).finally(function(){a.isLoading=!1})}}]})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.isLoading"></loading-overlay>\n\n<div class="alert alert-success" ng-if="$ctrl.success">\n\t<p class="text-center" translate="exam.message.success" translate-value-exam="{{ (\'exam.type.\' + $ctrl.examType | translate) }}"></p>\n</div>\n\n<div class="alert alert-danger" ng-if="$ctrl.errors.exam">\n\t<p>{{ \'exam.error.\' + $ctrl.errors.exam | translate }}</p>\n</div>\n\n<div ng-form="$ctrl.questionnaireForm" ng-if="!$ctrl.success">\n    <div ng-if="$ctrl.questionnaire" form-server-errors="$ctrl.errors">\n        <questionnaire-form name="{{$ctrl.questionnaire.name}}" ng-model="$ctrl.questionnaire" display-description="$ctrl.displayDescription"></questionnaire-form>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("amFormInvestmentExperiences",{require:{parentForm:"^^form"},bindings:{experiences:"=ngModel",rules:"<",hideDescription:"<?",skipped:"=?",serverErrors:"<?"},template:n(1425),controller:["FinancialInfoService","KnowledgeGuidanceService",function(e,t){var n=this;n.$onInit=function(){n.hideDescription=n.hideDescription||!1,n.skipped=n.skipped||!1,n.serverErrors=n.serverErrors||void 0,n.getYearRangeText=e.getYearRangeText,n.getTradeRangeText=e.getTradeRangeText,n.getAssetTypeText=e.getAssetTypeText,n.completeKnowledgeQuiz=e.completeKnowledgeQuiz,n.isKnowledgeQuizDisabled=e.isKnowledgeQuizDisabled,n.openGuidance=t.openGuidance,function(e){for(var t in e)e[t].updated=!0}(n.experiences),n.resetReviewData=function(e,t,a){angular.isUndefined(t)||null==t||e===t||(n.experiences[a].reviewData=[])},n.displayNotes=function(){var e=Object.keys(n.rules.assetExperienceRules).every(function(e){var t=n.experiences[e];return angular.isDefined(t.years)&&null!=t.years&&angular.isDefined(t.trades)&&null!=t.trades&&angular.isDefined(t.knowledge)&&null!=t.knowledge&&"UNKNOWN"!==t.knowledge});return angular.isDefined(n.rules.accountData)&&n.rules.accountData.isFinancialAdvisor&&!e}}}]})}},function(e,t){e.exports='<h6 class="subtitle" ng-if="::!$ctrl.hideDescription">\r\n\t{{\'investmentExperience.header\' | translate}}\r\n\t<span ng-if="$ctrl.rules.skippable" class="text-small panel-group-right">\r\n\t\t{{ \'word.skip\' | translate }}\r\n\t\t<input name="skipped" ng-model="$ctrl.skipped" type="checkbox" i-check></input>\r\n\t</span>\r\n</h6>\r\n<p ng-if="::!$ctrl.rules.impactable && !$ctrl.hideDescription">{{ \'investmentExperience.displayMessage.\' + $ctrl.rules.displayStyle | translate }}</p>\r\n<br>\r\n<div class="alert alert-danger" ng-if="$ctrl.serverErrors[\'investment_experience\']">\r\n\t<p>{{ \'investmentExperience.error.\' + $ctrl.serverErrors[\'investment_experience\'] | translate }}</p>\r\n</div>\r\n<div class="alert alert-info" ng-if="$ctrl.displayNotes()">\r\n\t<p>{{ \'investmentExperience.note.advisorExperience\' | translate }}</p>\r\n</div>\r\n<div class="form-group" ng-if="::!$ctrl.rules.impactable" ng-repeat="(assetType, assetExperienceRules) in $ctrl.rules.assetExperienceRules">\r\n\t<div class="row" ng-if="assetExperienceRules">\r\n\t\t<div class="col-xs-12 col-sm-3 col-md-3 col-lg-3">\r\n\t\t\t<label class="control-label">\r\n\t\t\t\t{{ ::$ctrl.getAssetTypeText($ctrl.experiences[assetType].label, assetType) }}\r\n\t\t\t\t<span class="text-center margin-left-5" ng-if="assetExperienceRules.displayKnowledgeGuidance">\r\n\t\t\t\t\t<am-button btn-type="icon" tooltip-text="{{\'knowledgeGuidance.label.guidance\' | translate}}" tooltip-side="right" btn-icon="fa-question-circle" on-click="$ctrl.openGuidance(assetType)"></am-button>\r\n\t\t\t\t</span>\r\n\t\t\t</label>\r\n\t\t</div>\r\n\t\t<div class="col-xs-12 col-sm-3 col-md-3 col-lg-3">\r\n\t\t\t<am-select name="{{assetType}}_years" ng-model="$ctrl.experiences[assetType].years" model-listener="$ctrl.resetReviewData($newValue, $oldValue, assetType)" options="assetExperienceRules.allowedYears" option-key="$ctrl.getYearRangeText" is-disabled="::$ctrl.skipped || assetExperienceRules.disabled" no-translate="true" empty-option-text="{{ \'investmentExperience.label.selectYears\' | translate }}" ng-required="!assetExperienceRules.optional" server-errors="$ctrl.serverErrors"></am-select>\r\n\t\t</div>\r\n\t\t<div class="col-xs-12 col-sm-3 col-md-3 col-lg-3">\r\n\t\t\t<am-select name="{{assetType}}_trades" ng-model="$ctrl.experiences[assetType].trades" model-listener="$ctrl.resetReviewData($newValue, $oldValue, assetType)" options="assetExperienceRules.allowedTrades" option-key="$ctrl.getTradeRangeText" is-disabled="::$ctrl.skipped || assetExperienceRules.disabled" no-translate="true" empty-option-text="{{ \'investmentExperience.label.selectTrades\' | translate }}" ng-required="!assetExperienceRules.optional" server-errors="$ctrl.serverErrors"></am-select>\r\n\t\t</div>\r\n\t\t<div class="col-xs-12 col-sm-3 col-md-3 col-lg-3">\r\n\t\t\t<am-select name="{{assetType}}_knowledge" ng-if="!assetExperienceRules.knowledgeQuiz" ng-model="$ctrl.experiences[assetType].knowledge" model-listener="$ctrl.resetReviewData($newValue, $oldValue, assetType)" options="assetExperienceRules.allowedKnowledgeLevels" option-key="\'investmentExperience.knowledge.\'" is-disabled="::$ctrl.skipped || assetExperienceRules.disabled" empty-option-text="{{ \'investmentExperience.label.selectKnowledge\' | translate }}" ng-required="!assetExperienceRules.optional" server-errors="$ctrl.serverErrors"></am-select>\r\n\t\t\t<p class="review-btn" ng-if="assetExperienceRules.knowledgeQuiz">\r\n\t\t\t\t\x3c!-- The trailing "" stops the angular expression to be evaluated to any text. --\x3e\r\n\t\t\t\t<span ng-if="$ctrl.experiences[assetType].knowledge === \'UNKNOWN\' && assetExperienceRules.knowledgeQuiz.knowledge !== \'UNKNOWN\'">{{ $ctrl.experiences[assetType].knowledge = assetExperienceRules.knowledgeQuiz.knowledge;"" }}</span>\r\n\t\t\t\t<am-select name="{{assetType}}_knowledge" ng-if="$ctrl.experiences[assetType].knowledge !== \'UNKNOWN\'" ng-model="$ctrl.experiences[assetType].knowledge" options="[$ctrl.experiences[assetType].knowledge]" option-key="\'investmentExperience.knowledge.\'"></am-select>\r\n\t\t\t\t<am-button ng-if="assetExperienceRules.knowledgeQuiz.allowed" btn-class="w-100" btn-type="primary" btn-text="{{ \'word.completeKnowledgeQuiz\' | translate }}" on-click="$ctrl.completeKnowledgeQuiz($ctrl.experiences[assetType], assetExperienceRules.knowledgeQuiz)" is-disabled="$ctrl.isKnowledgeQuizDisabled($ctrl.experiences[assetType])"></am-button>\r\n\t\t\t</p>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="row" ng-repeat="review in $ctrl.experiences[assetType].reviewData">\r\n\t    <div class="offset-sm-3 col-sm-9">\r\n\t        <div class="alert alert-warning">\r\n\t            <p>  {{ review.warningDescriptor.text }} </p>\r\n\t            <am-textarea class="sm-3 col-sm-12" ng-model="review.approvalExplanation" ph-text="{{ (\'investmentExperience.explanation.\' + review.type | translate:{asset: (\'investmentExperience.type.\' + assetType | translate)}) }}" is-required="true"></am-textarea>\r\n\t        </div>\r\n\t    </div>\r\n\t</div>\r\n</div>\r\n<div ng-if="::$ctrl.rules.impactable" ng-repeat="(assetType, assetExperienceRules) in $ctrl.rules.assetExperienceRules">\r\n    <p>{{ \'investmentconfig.impact.\' + assetType | translate }}</p>\r\n    <br>\r\n    <div ng-if="assetExperienceRules">\r\n        <am-form-select name="{{assetType}}_years" ng-model="$ctrl.experiences[assetType].years" options="assetExperienceRules.allowedYears" option-key="$ctrl.getYearRangeText" no-translate="true" empty-option-text="{{ \'investmentExperience.label.selectYears\' | translate }}" label-text="{{ \'investmentExperience.label.years\' | translate }}" is-disabled="assetExperienceRules.disabled" ng-required="!assetExperienceRules.optional"></am-form-select>\r\n\r\n        <am-form-select name="{{assetType}}_trades" ng-model="$ctrl.experiences[assetType].trades" options="assetExperienceRules.allowedTrades" option-key="$ctrl.getTradeRangeText" no-translate="true" empty-option-text="{{ \'investmentExperience.label.selectTrades\' | translate }}" label-text="{{ \'investmentExperience.label.trades\' | translate }}" is-disabled="assetExperienceRules.disabled" ng-required="!assetExperienceRules.optional"></am-form-select>\r\n\r\n        <am-form-select name="{{assetType}}_knowledge" ng-model="$ctrl.experiences[assetType].knowledge" options="assetExperienceRules.allowedKnowledgeLevels" option-key="\'investmentExperience.knowledge.\'" empty-option-text="{{ \'investmentExperience.label.selectKnowledge\' | translate }}" label-text="{{ \'investmentExperience.label.knowledge\' | translate }}" is-disabled="assetExperienceRules.disabled" ng-required="!assetExperienceRules.optional"></am-form-select>\r\n    </div>\r\n</div>\r\n<br>'},function(e,t,n){e.exports=function(e){e.component("investmentExperiencesReview",{bindings:{experiences:"<",configurable:"<?",configureFn:"&?"},template:["$attrs",function(e){return(e.revised||"").length>0?n(1427):n(1428)}],controller:["FinancialInfoService",function(e){var t=this;t.$onInit=function(){t.configurable=t.configurable||!1,t.configureFn=t.configureFn||void 0,t.getYearRangeText=e.getYearRangeText,t.getTradeRangeText=e.getTradeRangeText,t.isValidExperience=e.isValidExperience,t.getAssetTypeText=e.getAssetTypeText}}]})}},function(e,t){e.exports='<div class="row">\n\t<div class="col-12 col-sm-12 col-md-3 col-lg-3">\n\t\t<p class="review-title">{{ \'investmentExperience.header\' | translate }}</p>\n\t</div>\n\t<div class="col-12 col-sm-12 col-md-7 col-lg-7">\n\t\t<div ng-repeat="(asset, experience) in $ctrl.experiences" ng-if="$ctrl.isValidExperience(experience)">\n\t\t\t<div class="row">\n\t\t\t\t<div class="col-12 col-sm-2 col-md-6 col-lg-6">\n\t\t\t\t\t<p class="review-label">{{ \'investmentExperience.label.assetExperience\' | translate:{asset: (\'investmentExperience.type.\' + asset | translate)} }}</p>\n\t\t\t\t</div>\n\t\t\t\t<div class="col-12 col-sm-2 col-md-6 col-lg-6">\n\t\t\t\t\t<p class="review-label">{{ $ctrl.getYearRangeText(experience.years) }}</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="row">\n\t\t\t\t<div class="col-12 col-sm-2 col-md-6 col-lg-6">\n\t\t\t\t\t<p class="review-label">{{ \'investmentExperience.label.assetTrades\' | translate:{asset: (\'investmentExperience.type.\' + asset | translate)} }}</p>\n\t\t\t\t</div>\n\t\t\t\t<div class="col-12 col-sm-2 col-md-6 col-lg-6">\n\t\t\t\t\t<p class="review-label">{{ $ctrl.getTradeRangeText(experience.trades) }}</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="row">\n\t\t\t\t<div class="col-12 col-sm-2 col-md-6 col-lg-6">\n\t\t\t\t\t<p class="review-label">{{ \'investmentExperience.label.assetKnowledge\' | translate:{asset: (\'investmentExperience.type.\' + asset | translate)} }}</p>\n\t\t\t\t</div>\n\t\t\t\t<div class="col-12 col-sm-2 col-md-6 col-lg-6">\n\t\t\t\t\t<p class="review-label">{{ \'investmentExperience.knowledge.\' + experience.knowledge | translate }}</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="row" ng-if="experience.reviewData.length > 0" ng-repeat="review in experience.reviewData">\n\t\t\t\t<div class="col-12 col-sm-2 col-md-6 col-lg-6">\n\t\t\t\t\t<p class="review-label">{{ \'investmentExperience.label.\' + review.type | translate:{asset: (\'investmentExperience.type.\' + asset | translate)} }}</p>\n\t\t\t\t</div>\n\t\t\t\t<div class="col-12 col-sm-2 col-md-6 col-lg-6">\n\t\t\t\t\t<p class="review-label">{{ review.approvalExplanation }}</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<hr ng-if="!$last">\n\t\t</div>\n\t</div>\n\t<div class="col-12 col-sm-12 col-md-2 col-lg-2">\n\t\t<p class="review-btn" ng-if="::$ctrl.configurable && $ctrl.configureFn">\n\t\t\t<am-button btn-type="primary" on-click="$ctrl.configureFn()" btn-text="{{ \'word.edit\' | translate }}"></am-button>\n\t\t</p>\n\t</div>\n</div>\n<hr>\n<br>'},function(e,t){e.exports='<h6 class="subtitle">{{\'investmentExperience.header\' | translate}}</h6>\r\n<div class="form-group" ng-if="::$ctrl.isValidExperience(experience)" ng-repeat="(asset, experience) in $ctrl.experiences">\r\n\t<div class="row">\r\n\t\t<div class="col-xs-12 col-sm-3 col-md-3 col-lg-3">\r\n\t\t\t<label class="control-label">{{ ::$ctrl.getAssetTypeText(experience.label, asset) }}</label>\r\n\t\t</div>\r\n\t\t<div class="col-xs-12 col-sm-3 col-md-3 col-lg-3">\r\n\t\t\t<label>{{ $ctrl.getYearRangeText(experience.years) }}</label>\r\n\t\t</div>\r\n\t\t<div class="col-xs-12 col-sm-3 col-md-3 col-lg-3">\r\n\t\t\t<label>{{ $ctrl.getTradeRangeText(experience.trades) }}</label>\r\n\t\t</div>\r\n\t\t<div class="col-xs-12 col-sm-3 col-md-3 col-lg-3">\r\n\t\t\t<label>{{(\'investmentExperience.knowledge.\' + experience.knowledge | translate)}}</label>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n<br>'},function(e,t){e.exports=function(e){e.component("institutionalServiceReview",{bindings:{services:"<"},template:['<div class="form-bordered">',"    <p><strong>{{ 'institutionalServiceProfile.label.header' | translate }}</strong></p>",'    <div class="row" ng-repeat="service in $ctrl.services">','        <div class="col-xs-1 col-sm-1 col-md-1 col-lg-1">','            <p class="text-gray">',"                <i ng-class=\"{'fa fa-check': service.enabled, 'fa fa-square-o': !service.enabled}\"></i>","            </p>","        </div>",'        <div class="col-xs-2 col-sm-2 col-md-2 col-lg-2">',"            <p><strong>{{ 'institutionalServiceProfile.type.' + service.type | translate }}</strong></p>","        </div>",'        <div class="col-xs-9 col-sm-9 col-md-9 col-lg-9">',"            <p>{{ 'institutionalServiceProfile.note.' + service.type | translate }}</p>","        </div>","    </div>","</div>","<br>"].join("")})}},function(e,t,n){e.exports=function(e){e.component("investorCategoryQuestions",{bindings:{questions:"<"},template:n(1431)})}},function(e,t){e.exports='<div ng-repeat="question in $ctrl.questions" ng-include=" \'investorCategoryQuestions.html\' ">\n\t\n</div>\n\n\x3c!-- additional question script --\x3e\n<script type="text/ng-template" id="investorCategoryQuestions.html">\n\t<p ng-if="$ctrl.isTranslationLoaded" ng-bind-html="\'investorCategory.addtionalQuestion.\' + question.name | translate | renderHTML"> </p>\n\t\n\t<p>\n\t\t<am-switch name="{{question.name}}" ng-model="question.answer"></am-switch>\n\t</p>\n\t\n    <br>\n\t\x3c!-- if->> question.answer is defined and for answered question, you have next question, then repeat --\x3e\n\t<div ng-if="(question.answer !== undefined) && (question.options | filter: {value: question.answer})[0].question" \n\t\tng-repeat="option in question.options | filter: {value: question.answer}" \n\t\t\tng-include=" \'investorCategoryQuestions.html\' " \n\t\t\t\tng-init=" question = option.question ">\n\t</div>\n<\/script>'},function(e,t,n){e.exports=function(e){e.component("amFormInvestmentObjectives",{require:{parentForm:"^^form"},bindings:{objectives:"=ngModel",rules:"<",hideDescription:"<?",skipped:"=?",serverErrors:"<?"},template:["ACTIVE_CONTEXT","ApplicationContext",function(e,t){return e===t.AM_DEPENDENCY?n(1433):n(1434)}],controller:["$translate","ACTIVE_CONTEXT","IS_MOBILE","ModalService",function(t,a,r,i){var o=this,s={LOW:1,MEDIUM:2,HIGH:3,EXTREME:4};o.$onInit=function(){o.objectives=o.objectives||[],o.hideDescription=o.hideDescription||!1,o.skipped=o.skipped||!1,o.serverErrors=o.serverErrors||void 0,o.standalone="STANDALONE"===a,o.isMobile=r,o.validateObjective=function(e){o.restrictedObjectiveTypes=o.rules.restrictedObjectives[e];for(var t=0;t<o.objectives.length;t++){var n=o.objectives[t];o.restrictedObjectiveTypes.indexOf(n.type)<0||(n.selected=!1)}},o.click=function(e){e.selected=!e.selected,o.validateObjective(e.type)},o.getPopoverContent=function(){return n(1435)},o.openModal=function(){var n={title:t.instant("investmentObjective.header"),templateUrl:e.WEBAPP_ROOT+"/components/objectives/investmentObjectiveHelp.html",buttons:[]};i.openInfoModal(n)},o.getPopoverTrigger=function(){return r?"click":"mouseenter"},(o.objectives||[]).sort(function(e,t){return s[o.rules.objectiveRules[e.type].riskType]-s[o.rules.objectiveRules[t.type].riskType]})}}]})}},function(e,t){e.exports='<h6 class="subtitle" aria-level="2" ng-if="::!$ctrl.hideDescription">\n\t{{\'investmentObjective.header\' | translate }}\n\t<span ng-if="$ctrl.rules.skippable" class="text-small panel-group-right">\n\t\t{{ \'word.skip\' | translate }}\n\t\t<input name="skipped" ng-model="$ctrl.skipped" type="checkbox" i-check></input>\n\t</span>\n\t<span ng-if="::$ctrl.standalone">\n\t\t<a href="javascript:void(0);" class="btn-icon">\n\t\t\t<i class="fa fa-question-circle" data-popover="{{$ctrl.getPopoverContent()}}" popover-html="true" popover-trigger="{{$ctrl.getPopoverTrigger()}}" popover-placement="right"></i>\n\t\t</a>\n\t</span>\n</h6>\n<p ng-if="::!$ctrl.hideDescription" translate="{{ \'investmentObjective.message.\' + $ctrl.rules.displayStyle }}" translate-values="{startTag: \'<strong>\', endTag: \'</strong>\', breakTag: \'<br>\'}"></p>\n<br>\n<div class="investment-objectives">\n\t<div class="btn-objective" ng-class="{\'active\': objective.selected, \'disabled\': $ctrl.skipped || $ctrl.rules.objectiveRules[objective.type].disabled}" ng-repeat="objective in $ctrl.objectives" ng-click="$ctrl.click(objective)">\n\t\t<div class="objective-check">\n\t\t\n\t\t</div>\n\t\t<div class="objective-title">\n\t\t\t<p>{{ \'investmentObjective.type.\' + objective.type | translate }}</p>\n\t\t</div>\n\t\t<div class="risk-level">\n\t\t\t<p class="risk-label">{{ \'investmentObjective.label.riskTolerance\' | translate }}</p>\n\t\t\t<p class="risk-dots" ng-if="::$ctrl.rules.objectiveRules[objective.type].riskType === \'LOW\'">\n\t\t\t\t<i class="fas fa-circle risk-low"></i>\n\t\t\t\t<i class="fas fa-circle"></i>\n\t\t\t\t<i class="fas fa-circle"></i>\n\t\t\t\t<i class="fas fa-circle"></i>\n\t\t\t</p>\n\t\t\t<p class="risk-dots" ng-if="::$ctrl.rules.objectiveRules[objective.type].riskType === \'MEDIUM\'">\n\t\t\t\t<i class="fas fa-circle risk-low"></i>\n\t\t\t\t<i class="fas fa-circle risk-low"></i>\n\t\t\t\t<i class="fas fa-circle"></i>\n\t\t\t\t<i class="fas fa-circle"></i>\n\t\t\t</p>\n\t\t\t<p class="risk-dots" ng-if="::$ctrl.rules.objectiveRules[objective.type].riskType === \'HIGH\'">\n\t\t\t\t<i class="fas fa-circle risk-med"></i>\n\t\t\t\t<i class="fas fa-circle risk-med"></i>\n\t\t\t\t<i class="fas fa-circle risk-med"></i>\n\t\t\t\t<i class="fas fa-circle"></i>\n\t\t\t</p>\n\t\t\t<p class="risk-dots" ng-if="::$ctrl.rules.objectiveRules[objective.type].riskType === \'EXTREME\'">\n\t\t\t\t<i class="fas fa-circle risk-high"></i>\n\t\t\t\t<i class="fas fa-circle risk-high"></i>\n\t\t\t\t<i class="fas fa-circle risk-high"></i>\n\t\t\t\t<i class="fas fa-circle risk-high"></i>\n\t\t\t</p>\n\t\t</div>\n\t</div>\n</div>'},function(e,t){e.exports='<h6 id="investmentObjHeaderLabel" class="subtitle" aria-level="2" ng-if="::!$ctrl.hideDescription">\r\n    {{\'investmentObjective.header\' | translate }}\r\n    <span ng-if="$ctrl.rules.skippable" class="text-small panel-group-right">\r\n        {{ \'word.skip\' | translate }}\r\n        <input name="skipped" ng-model="$ctrl.skipped" type="checkbox" i-check></input>\r\n    </span>\r\n    <span ng-if="::$ctrl.standalone">\r\n        <a href="javascript:void(0);" class="btn-icon" role="button" aria-label="{{ \'word.moreInformation\' | translate }}">\r\n            <i ng-if="!$ctrl.isMobile" class="fa fa-question-circle" data-popover="{{$ctrl.getPopoverContent()}}" popover-html="true" popover-trigger="{{$ctrl.getPopoverTrigger()}}" popover-placement="right"></i>\r\n            <i ng-if="$ctrl.isMobile" class="fa fa-question-circle" ng-click="$ctrl.openModal()"></i>\r\n        </a>\r\n    </span>\r\n</h6>\r\n<p ng-if="::!$ctrl.hideDescription" translate="{{ \'investmentObjective.message.\' + $ctrl.rules.displayStyle }}" translate-values="{startTag: \'<strong>\', endTag: \'</strong>\', breakTag: \'<br>\'}"></p>\r\n<div class="alert alert-danger" ng-if="$ctrl.serverErrors[\'investment_objective\']">\r\n    <p>{{ \'investmentObjective.error.\' + $ctrl.serverErrors[\'investment_objective\'] | translate }}</p>\r\n</div>\r\n<div class="form-bordered" role="group" aria-labelledby="investmentObjHeaderLabel">\r\n\t<div class="row">\r\n\t\t<div class="col-xs-12 col-sm-8 col-md-8 col-lg-8">\r\n\t\t\t<p>\r\n\t\t\t\t<strong>{{ \'investmentObjective.label.select\' | translate }}</strong>\r\n\t\t\t</p>\r\n\t\t</div>\r\n\t\t<div class="col-xs-12 col-sm-4 col-md-4 col-lg-4">\r\n\t\t\t<p class="pull-right">\r\n\t\t\t\t<strong>{{ \'investmentObjective.label.riskTolerance\' | translate }}</strong>\r\n\t\t\t</p>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="row align-item-center" ng-repeat="objective in $ctrl.objectives"  role="checkbox" aria-labelledby="{{objective.type}}_LABEL" tabindex="0" aria-checked="{{objective.selected}}" aria-disabled="{{$ctrl.skipped || $ctrl.rules.objectiveRules[objective.type].disabled}}" icheck-toggle>\r\n\t\t<div class="col-xs-12 col-sm-8 col-md-8 col-lg-8" aria-hidden="true">\r\n\t\t\t<p>\r\n\t\t\t\t<input name="{{objective.type}}" ng-model="objective.selected" type="checkbox" i-check ng-disabled="$ctrl.skipped || $ctrl.rules.objectiveRules[objective.type].disabled" ng-change="$ctrl.validateObjective(objective.type)" aria-labelledby="{{objective.type}}_LABEL"/>\r\n\t\t\t\t<span id="{{objective.type}}_LABEL" class="margin-left-5 margin-right-5">{{ \'investmentObjective.type.\' + objective.type | translate }}</span>\r\n\t\t\t</p>\r\n\t\t</div>\r\n\t\t<div class="col-xs-12 col-sm-4 col-md-4 col-lg-4">\r\n\t\t\t<div class="pull-right">\r\n\t\t\t\t<p ng-if="::$ctrl.rules.objectiveRules[objective.type].riskType === \'LOW\'">\r\n\t\t\t\t\t<span id="lowRiskLabel" class="sr-only">{{ \'investmentObjective.label.lowTolerance\' | translate }}</span>\r\n\t\t\t\t\t<i class="fas fa-circle fa-2xs success"></i>\r\n\t\t\t\t\t<i class="fas fa-circle fa-2xs gray-30"></i>\r\n\t\t\t\t\t<i class="fas fa-circle fa-2xs gray-30"></i>\r\n\t\t\t\t\t<i class="fas fa-circle fa-2xs gray-30"></i>\r\n\t\t\t\t</p>\r\n\t\t\t\t<p ng-if="::$ctrl.rules.objectiveRules[objective.type].riskType === \'MEDIUM\'">\r\n\t\t\t\t\t<span id="mediumRiskLabel" class="sr-only">{{ \'investmentObjective.label.mediumTolerance\' | translate }}</span>\r\n\t\t\t\t\t<i class="fas fa-circle fa-2xs success"></i>\r\n\t\t\t\t\t<i class="fas fa-circle fa-2xs success"></i>\r\n\t\t\t\t\t<i class="fas fa-circle fa-2xs gray-30"></i>\r\n\t\t\t\t\t<i class="fas fa-circle fa-2xs gray-30"></i>\r\n\t\t\t\t</p>\r\n\t\t\t\t<p ng-if="::$ctrl.rules.objectiveRules[objective.type].riskType === \'HIGH\'">\r\n\t\t\t\t\t<span id="highRiskLabel" class="sr-only">{{ \'investmentObjective.label.highTolerance\' | translate }}</span>\r\n\t\t\t\t\t<i class="fas fa-circle fa-2xs warning"></i>\r\n\t\t\t\t\t<i class="fas fa-circle fa-2xs warning"></i>\r\n\t\t\t\t\t<i class="fas fa-circle fa-2xs warning"></i>\r\n\t\t\t\t\t<i class="fas fa-circle fa-2xs gray-30"></i>\r\n\t\t\t\t</p>\r\n\t\t\t\t<p ng-if="::$ctrl.rules.objectiveRules[objective.type].riskType === \'EXTREME\'">\r\n\t\t\t\t\t<span id="extremeRiskLabel" class="sr-only">{{ \'investmentObjective.label.extremeTolerance\' | translate }}</span>\r\n\t\t\t\t\t<i class="fas fa-circle fa-2xs danger"></i>\r\n\t\t\t\t\t<i class="fas fa-circle fa-2xs danger"></i>\r\n\t\t\t\t\t<i class="fas fa-circle fa-2xs danger"></i>\r\n\t\t\t\t\t<i class="fas fa-circle fa-2xs danger"></i>\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n<br>'},function(e,t){e.exports="<p>\n\t<strong>{{ ('investmentObjective.type.CAPITAL_AND_INCOME' | translate) + ': ' }}</strong>\n\t<span>{{ 'investmentObjective.helpMessage.CAPITAL_AND_INCOME' | translate }}</span>\n</p>\n<p>\n\t<strong>{{ ('investmentObjective.type.GROWTH' | translate) + ': ' }}</strong>\n\t<span>{{ 'investmentObjective.helpMessage.GROWTH' | translate }}</span>\n</p>\n<p>\n\t<strong>{{ ('investmentObjective.type.HEDGING' | translate) + ': ' }}</strong>\n\t<span>{{ 'investmentObjective.helpMessage.HEDGING' | translate }}</span>\n</p>\n<p>\n\t<strong>{{ ('investmentObjective.type.TRADING_AND_SPECULATION' | translate) + ': ' }}</strong>\n\t<span>{{ 'investmentObjective.helpMessage.TRADING_AND_SPECULATION' | translate }}</span>\n</p>"},function(e,t,n){e.exports=function(e){e.component("investmentObjectivesReview",{bindings:{objectives:"<",configurable:"<?",configureFn:"&?"},template:["$attrs",function(e){return(e.revised||"").length>0?n(1437):n(1438)}],controller:[function(){var e=this;e.$onInit=function(){e.configurable=e.configurable||!1,e.configureFn=e.configureFn||void 0,e.objectives=e.objectives||[]}}]})}},function(e,t){e.exports='<div class="row">\n\t<div class="col-12 col-sm-12 col-md-3 col-lg-3">\n\t\t<p class="review-title">{{ \'investmentObjective.header\' | translate }}</p>\n\t</div>\n\t<div class="col-12 col-sm-12 col-md-7 col-lg-7">\n\t\t<div class="row" ng-if="objective.selected" ng-repeat="objective in $ctrl.objectives">\n\t\t\t<div class="col-12 col-sm-12 col-md-12 col-lg-12">\n\t\t\t\t<p>{{\'investmentObjective.type.\' + objective.type | translate }}</p>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div class="col-12 col-sm-12 col-md-2 col-lg-2">\n\t\t<p class="review-btn" ng-if="::$ctrl.configurable && $ctrl.configureFn">\n\t\t\t<am-button btn-type="primary" on-click="$ctrl.configureFn()" btn-text="{{ \'word.edit\' | translate }}"></am-button>\n\t\t</p>\n\t</div>\n</div>\n<hr>\n<br>'},function(e,t){e.exports='<h6 class="subtitle">{{\'investmentObjective.header\' | translate }}</h6>\r\n<div class="row">\r\n\t<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" ng-repeat="objective in $ctrl.objectives">\r\n\t\t<p ng-class="{\'text-gray\' : !objective.selected}">\r\n\t\t\t<i ng-class="{\'fa fa-check\': objective.selected, \'fa fa-square-o\': !objective.selected}"></i>\r\n\t\t\t{{\'investmentObjective.type.\' + objective.type | translate}}\r\n\t\t</p>\r\n\t</div>\r\n</div>\r\n<br>'},function(e,t){e.exports=function(e){e.component("exchangeReview",{bindings:{exchanges:"<"},template:function(){var e="";return e+='<div class="row">',e+='<div class="col-xs-12 col-sm-4 col-md-4 col-lg-4" ng-repeat="exchange in $ctrl.exchanges track by $index">',e+="<p>",e+="<span>{{ 'tradingExchange.location.' + exchange.location | translate }}</span>",e+="<span>{{ ' - ' }}</span>",e+="<span>{{ 'tradingExchange.type.' + exchange.productType | translate }}</span>",e+="</p>",e+="</div>",e+="</div>",e+="<br>",e}})}},function(e,t,n){e.exports=function(e){e.component("generalTradingPermission",{require:{parentForm:"^tradingPermissionSelectionForm"},bindings:{selectionPool:"=ngModel",rules:"<",accountCapability:"<?",notes:"<?"},template:n(1441),controller:["ACTIVE_CONTEXT","$translate","NavigationService","ModalService","FinancialInfoService","KnowledgeGuidanceService",function(e,t,n,a,r,i){var o=this;o.$onInit=function(){o.accountCapability=o.accountCapability||void 0,o.notes=o.notes||[],o.productTypePool=o.parentForm.productTypePool,o.selectedProductType=o.parentForm.selectedProductType,o.getExperienceRules=o.parentForm.getExperienceRules||angular.noop,o.experienceChanged=o.parentForm.experienceChanged||angular.noop,o.isPossibleCapabilityLevel=o.parentForm.isPossibleCapabilityLevel||angular.noop,o.isApplication="STANDALONE"===e,o.getYearRangeText=r.getYearRangeText,o.getTradeRangeText=r.getTradeRangeText,o.completeKnowledgeQuiz=r.completeKnowledgeQuiz,o.isKnowledgeQuizDisabled=r.isKnowledgeQuizDisabled,o.openGuidance=i.openGuidance,o.isAddingMarketDisabled=function(e){var t=(e.permissions||[]).every(function(e){return e.requested}),n=(e.permissions||[]).every(function(e){return e.disabled});return t||n},o.areAllPermissionsDisabled=function(e){return(e.permissions||[]).every(function(e){return e.disabled})},o.productHelp={NEXTSHARE:"https://www.nextshares.com",CLP:"https://www.ibkr.com/faq?id=84620875"},o.isSelectionRemovable=function(e){return!angular.isUndefined(e)&&o.rules[e.productType].removable},o.isPermissionDisabled=function(e){return e.disabled},o.getPendingPermissions=function(t){return"STANDALONE"===e?[]:(t.permissions||[]).filter(function(e){return e.pending})},o.addPermissions=function(e){var n=[];e.permissions.forEach(function(e){n.push(angular.copy(e))});var r={templateUrl:"trading-permission-selection-modal.component",title:t.instant("tradingPermissionProfile.label.marketPermissions")+" - "+t.instant("tradingExchange.type."+e.productType),modalData:{permissions:n}};a.openModal(r).then(function(t){t&&(e.permissions=t||[])})},o.removePermission=function(e,t){t.requested=t.pending=!1,t.downgraded=t.qualified&&!t.requested;var n=e.permissions.find(function(e){return"US_FRACTIONAL_SHARES"===e.code});"IB_FRAC_STK"!==t.code||angular.isUndefined(n)||(n.requested=t.requested,n.downgraded=n.qualified&&!n.requested)},o.removeProduct=function(e){o.selectedProductType=void 0,o.parentForm.removeProduct(e)},o.addProduct=function(e){o.selectedProductType=void 0,o.parentForm.addProduct(e)},o.navigateToPromotion=function(e){var t=o.rules[e].promotionPage;n.setNavigationValidator(void 0),n.navigate(t)}}}]})}},function(e,t){e.exports='\x3c!-- \n\tAdditional product dropdown\n--\x3e\n<div wide-form ng-if="$ctrl.productTypePool.length > 0">\n\t<am-form-select ng-model="$ctrl.selectedProductType" options="$ctrl.productTypePool" option-key="\'tradingExchange.type.\'" model-listener="$ctrl.addProduct($ctrl.selectedProductType)" label-text="{{ \'tradingPermissionProfile.label.additionalProducts\' | translate }}" enable-single-option="true"></am-form-select>\n</div>\n\x3c!-- \n\tProduct List\n--\x3e\n<div ng-repeat="selection in $ctrl.selectionPool">\n\t<div class="tp-container" ng-class="{\'active\': (selection.permissions | filter:{requested: true}).length > 0 }">\n\t\t<div class="tp-header">\n\t\t\t<h5 aria-level="3" class="tp-title">\n\t\t\t\t{{ \'tradingExchange.type.\' + selection.productType | translate }}\n\t\t\t\t<span class="tp-subtitle" ng-if="selection.productType === \'NEXTSHARE\'">{{ \': \' + (\'tradingExchange.subtext.\' + selection.productType | translate) }}</span>\n\t\t\t\t<span class="tp-learn-more">\n\t\t\t\t\t<a href="{{$ctrl.productHelp[selection.productType]}}" class="tp-learn-more" ng-if="$ctrl.productHelp[selection.productType]" target="_blank">\n\t\t\t\t\t\t{{\'word.learnMore\' | translate }}\n\t\t\t\t\t\t<i class="fas fa-external-link-alt"></i>\n\t\t\t\t\t</a>\n\t\t\t\t</span>\n\t\t\t</h5>\n\t\t\t<span class="btn-group-right">\n\t\t\t\t<am-button ng-if="$ctrl.isSelectionRemovable(selection)" btn-type="icon" tooltip-side="right" btn-icon="fa-times-circle" on-click="$ctrl.removeProduct(selection.productType)"></am-button>\n\t\t\t</span>\n\t\t</div>\n\t\t<div class="tp-body">\n\t\t\t<div class="row">\n\t\t\t\t<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n\t\t\t\t\t\x3c!-- \n\t\t\t\t\t\tProduct Notes\n\t\t\t\t\t--\x3e\n\t\t\t\t\t<div ng-if="$ctrl.rules[selection.productType].productNotes.length > 0">\n\t\t\t\t\t\t<am-notes notes="$ctrl.rules[selection.productType].productNotes" severity="LOW" key-prefix="tradingPermissionProfile.note." disable-bulleted-list="true"></am-notes>\n\t\t\t\t\t</div>\n\t\t\t\t\t\x3c!-- \n\t\t\t\t\t\tExperience\n\t\t\t\t\t--\x3e\n\t\t\t\t\t<div ng-if="$ctrl.getExperienceRules(selection) && (selection.permissions | filter:{requested: true}).length > 0">\n\t\t\t\t\t\t<p  ng-if="$ctrl.getExperienceRules(selection).displayKnowledgeGuidance">\n\t\t\t\t\t\t\t{{ \'tradingPermissionProfile.label.experience\' | translate }}\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t<am-button btn-size="small" btn-type="icon" tooltip-text="{{\'knowledgeGuidance.label.guidance\' | translate}}" tooltip-side="right" btn-icon="fas fa-question-circle" on-click="$ctrl.openGuidance(selection.assetType)"></am-button>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t<div class="col-xs-12 col-sm-4 col-md-4 col-lg-4">\n\t\t\t\t\t\t\t\t<am-select name="{{selection.assetType}}_years" ng-model="selection.experience.years" model-listener="$ctrl.experienceChanged(selection)" options="$ctrl.getExperienceRules(selection).allowedYears" option-key="$ctrl.getYearRangeText" no-translate="true" empty-option-text="{{ \'investmentExperience.label.selectYears\' | translate }}" is-disabled="$ctrl.getExperienceRules(selection).disabled" required></am-select>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="col-xs-12 col-sm-4 col-md-4 col-lg-4">\n\t\t\t\t\t\t\t\t<am-select name="{{selection.assetType}}_trades" ng-model="selection.experience.trades" model-listener="$ctrl.experienceChanged(selection)" options="$ctrl.getExperienceRules(selection).allowedTrades" option-key="$ctrl.getTradeRangeText" no-translate="true" empty-option-text="{{ \'investmentExperience.label.selectTrades\' | translate }}" is-disabled="$ctrl.getExperienceRules(selection).disabled" required></am-select>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="col-xs-12 col-sm-4 col-md-4 col-lg-4">\n\t\t\t\t\t\t\t\t<am-select ng-if="!$ctrl.getExperienceRules(selection).knowledgeQuiz" name="{{selection.assetType}}_knowledge" ng-model="selection.experience.knowledge" model-listener="$ctrl.experienceChanged(selection)" options="$ctrl.getExperienceRules(selection).allowedKnowledgeLevels" option-key="\'investmentExperience.knowledge.\'" empty-option-text="{{ \'investmentExperience.label.selectKnowledge\' | translate }}" is-disabled="$ctrl.getExperienceRules(selection).disabled" required></am-select>\n\t\t\t\t\t\t\t\t<p ng-if="$ctrl.getExperienceRules(selection).knowledgeQuiz">\n\t\t\t\t\t\t\t\t\t\x3c!-- The trailing "" stops the angular expression to be evaluated to any text. --\x3e\n\t\t\t\t\t\t\t\t\t<span ng-if="selection.experience.knowledge === \'UNKNOWN\' && $ctrl.getExperienceRules(selection).knowledgeQuiz.knowledge !== \'UNKNOWN\'">{{ selection.experience.knowledge = $ctrl.getExperienceRules(selection).knowledgeQuiz.knowledge;"" }}</span>\n\t\t\t\t\t\t\t\t\t<am-select ng-if="selection.experience.knowledge !== null && selection.experience.knowledge !== \'UNKNOWN\'" ng-model="selection.experience.knowledge" model-listener="$ctrl.experienceChanged(selection)" options="[selection.experience.knowledge]" option-key="\'investmentExperience.knowledge.\'"></am-select>\n\t\t\t\t\t\t\t\t\t<am-button ng-if="$ctrl.getExperienceRules(selection).knowledgeQuiz.allowed" btn-class="w-100" btn-type="primary" btn-text="{{ \'word.completeKnowledgeQuiz\' | translate }}" on-click="$ctrl.completeKnowledgeQuiz(selection.experience, $ctrl.getExperienceRules(selection).knowledgeQuiz)" is-disabled="$ctrl.isKnowledgeQuizDisabled(selection.experience)"></am-button>\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t\x3c!-- \n\t\t\t\t\t\tLimited Trading\n\t\t\t\t\t--\x3e\n\t\t\t\t\t<div ng-if="$ctrl.rules[selection.productType].limitedTrading && ($ctrl.rules[selection.productType].availableSubCapabilities | objectLength) === 0" class="margin-top-10">\n\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t<span>{{ \'tradingPermissionProfile.label.limitedTrading\' | translate:{product: (\'tradingExchange.type.\' + selection.productType | translate)} }}</span>\n\t\t\t\t\t\t\t\t\t<input type="checkbox" ng-model="selection.limitedTrading" i-check>\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t\x3c!-- \n\t\t            \tCapability Levels\n\t\t            --\x3e\n\t\t            <div ng-if="selection.productType === \'OPTION\' && $ctrl.isPossibleCapabilityLevel(selection)" class="margin-top-10">\n\t\t            \t<div ng-if="($ctrl.rules[selection.productType].availableSubCapabilities | objectLength) > 0" ng-repeat="(capability, levels) in $ctrl.rules[selection.productType].availableSubCapabilities">\n\t\t            \t\t<option-level-form ng-if="capability === \'OPTION\'" ng-model="selection.accountSubCapability" levels="levels" account-capability="$ctrl.accountCapability" ib-entity="$ctrl.rules[selection.productType].ibEntity"></option-level-form>\n\t\t            \t</div>\n\t\t            </div>\n\t\t\t\t\t\x3c!-- \n\t\t\t\t\t\tPermissions \n\t\t\t\t\t--\x3e\n\t\t\t\t\t<div ng-if="selection.permissions.length > 0" class="margin-top-10">\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t<span><i class="fas fa-globe" aria-hidden="true"></i></span>\n\t\t\t\t\t\t\t<span><strong>{{ \'tradingPermissionProfile.label.markets\' | translate }}:</strong></span>\n\t\t\t\t\t\t\t<span class="tp-btns" ng-if="!$ctrl.areAllPermissionsDisabled(selection)">\n\t\t\t\t\t\t\t\t<a href="javascript:void(0);" role="{{$ctrl.isPermissionDisabled(permission) ? \'listitem\' : \'button\'}}" target="_self" class="btn btn-pill-active" ng-if="!permission.hidden" ng-repeat="permission in (selection.permissions | filter:{requested: true})" ng-class="{\'disabled\' : $ctrl.isPermissionDisabled(permission) }" ng-click="!$ctrl.isPermissionDisabled(permission) && $ctrl.removePermission(selection, permission)">\n\t\t\t\t\t\t\t\t\t<span>{{ \'tradingExchange.location.\' + permission.location | translate }}</span>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t<a href="javascript:void(0);" target="_self" class="btn btn-pill-add" ng-if="!$ctrl.isAddingMarketDisabled(selection)" ng-click="$ctrl.addPermissions(selection)">\n\t\t\t\t\t\t\t\t\t<span>{{ \'word.add\' | translate }}</span>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span ng-if="$ctrl.areAllPermissionsDisabled(selection)">\n\t\t\t\t\t\t\t\t<span ng-if="!permission.hidden " ng-repeat="permission in (selection.permissions | filter:{requested: true})">\n                                    {{ \'tradingExchange.location.\' + permission.location | translate }}{{ $last ? \'\' : \', \' }}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<any ng-if="$ctrl.getPendingPermissions(selection).length > 0">\n\t\t\t\t\t\t\t<hr>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t<span class="stamp stamp-warning"><strong>{{ \'word.pending\' | translate }}:</strong></span>\n\t\t\t\t\t\t\t\t<span class="tp-btns" ng-if="!$ctrl.areAllPermissionsDisabled(selection)">\n\t\t\t\t\t\t\t\t\t<a ng-if="!permission.hidden" ng-repeat="permission in $ctrl.getPendingPermissions(selection)" href="javascript:void(0);" role="{{$ctrl.isPermissionDisabled(permission) ? \'listitem\' : \'button\'}}" target="_self" class="btn btn-pill-active" ng-class="{\'disabled\' : $ctrl.isPermissionDisabled(permission) }" ng-click="!$ctrl.isPermissionDisabled(permission) && $ctrl.removePermission(selection, permission)">\n\t\t\t\t\t\t\t\t\t\t<span>{{ \'tradingExchange.location.\' + permission.location | translate }}</span>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<span ng-if="$ctrl.areAllPermissionsDisabled(selection)">\n\t\t\t\t\t\t\t\t\t<span ng-if="!permission.hidden" ng-repeat="permission in (selection.permissions | filter:{requested: true})">\n\t\t\t\t\t\t\t\t\t\t{{ \'tradingExchange.location.\' + permission.location | translate }}{{ $last ? \'\' : \', \' }}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</any>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<br>\n</div>\n\x3c!-- \n    Notes\n--\x3e\n<am-notes ng-if="::$ctrl.notes.length > 0" severity="MEDIUM" notes="$ctrl.notes" disable-bulleted-list="true"></am-notes>'},function(e,t,n){e.exports=function(e){e.component("impactTradingPermission",{require:{parentForm:"^tradingPermissionSelectionForm"},bindings:{selectionPool:"=ngModel"},template:n(1443),controller:["FinancialInfoService",function(e){var t=this,n=function(e){return e.requested};t.$onInit=function(){t.getExperienceRules=t.parentForm.getExperienceRules,t.getYearRangeText=e.getYearRangeText,t.getTradeRangeText=e.getTradeRangeText,t.selectionOptional={},t.collectExperience="IMPACT"==t.parentForm.tpPageStyle,t.cryptoSelection=t.parentForm.selections.find(function(e){return"CRYPTO"===e.productType&&e.permissions.filter(n).length>0}),t.updateCryptoPermissions=function(){t.cryptoSelection.permissions.forEach(function(e){e.requested=t.selectionOptional.CRYPTO})},t.isNonCrypto=function(e){return"CRYPTO"!==e.productType};for(var a=0;a<t.selectionPool.length;a++){var r=t.selectionPool[a];t.selectionOptional[r.productType]=r.permissions.filter(n).length>0}}}]})}},function(e,t){e.exports='\x3c!-- \n    Ask only experience for Impact application\n--\x3e\n<div ng-if="$ctrl.collectExperience" ng-repeat="selection in $ctrl.selectionPool | filter: $ctrl.isNonCrypto">\n    <div ng-if="$ctrl.getExperienceRules(selection)">\n        <p>{{ \'investmentconfig.impact.\' + selection.productType | translate }}</p>\n\n        <am-form-select name="{{selection.assetType}}_years" ng-model="selection.experience.years" options="$ctrl.getExperienceRules(selection).allowedYears" option-key="$ctrl.getYearRangeText" no-translate="true" empty-option-text="{{ \'investmentExperience.label.selectYears\' | translate }}" label-text="{{ \'investmentExperience.label.years\' | translate }}" is-disabled="$ctrl.getExperienceRules(selection).disabled" required></am-form-select>\n\n        <am-form-select name="{{selection.assetType}}_trades" ng-model="selection.experience.trades" options="$ctrl.getExperienceRules(selection).allowedTrades" option-key="$ctrl.getTradeRangeText" no-translate="true" empty-option-text="{{ \'investmentExperience.label.selectTrades\' | translate }}" label-text="{{ \'investmentExperience.label.trades\' | translate }}" is-disabled="$ctrl.getExperienceRules(selection).disabled" required></am-form-select>\n\n        <am-form-select name="{{selection.assetType}}_knowledge" ng-model="selection.experience.knowledge" options="$ctrl.getExperienceRules(selection).allowedKnowledgeLevels" option-key="\'investmentExperience.knowledge.\'" empty-option-text="{{ \'investmentExperience.label.selectKnowledge\' | translate }}" label-text="{{ \'investmentExperience.label.knowledge\' | translate }}" is-disabled="$ctrl.getExperienceRules(selection).disabled" required></am-form-select>\n    </div>\n</div>\n<div ng-if="$ctrl.cryptoSelection" class="row margin-top-10">\n    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n        <h6 class="subtitle">{{ \'tradingExchange.type.\' + $ctrl.cryptoSelection.productType | translate }}</h6>\n        <p class="margin-top-20">\n            <input type="checkbox" ng-model="$ctrl.selectionOptional[\'CRYPTO\']" ng-change="$ctrl.updateCryptoPermissions()" i-check>\n            <span>{{ \'investmentconfig.impact.\' + $ctrl.cryptoSelection.productType | translate }}</span>\n        </p>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("simplifiedTradingPermission",{require:{parentForm:"^tradingPermissionSelectionForm"},bindings:{selectionPool:"=ngModel",rules:"<",accountCapability:"<?",notes:"<?"},template:n(1445),controller:["ACTIVE_CONTEXT","IS_MOBILE","$translate","FinancialInfoService","KnowledgeGuidanceService",function(e,t,a,r,i){var o=this,s=function(e){return e.requested},l=function(e){return"CRYPTO_ZEROHASH"===e.code},c=function(e){return"CRYPTO_OSL_HK"===e.code};o.$onInit=function(){o.accountCapability=o.accountCapability||void 0,o.notes=o.notes||[],o.addProduct=o.parentForm.addProduct||angular.noop,o.removeProduct=o.parentForm.removeProduct||angular.noop,o.getExperienceRules=o.parentForm.getExperienceRules||angular.noop,o.experienceChanged=o.parentForm.experienceChanged||angular.noop,o.isPossibleCapabilityLevel=o.parentForm.isPossibleCapabilityLevel||angular.noop,o.accountCapability=o.parentForm.accountCapability||void 0,o.isApplication="STANDALONE"===e,o.getYearRangeText=r.getYearRangeText,o.getTradeRangeText=r.getTradeRangeText,o.completeKnowledgeQuiz=r.completeKnowledgeQuiz,o.isKnowledgeQuizDisabled=r.isKnowledgeQuizDisabled,o.openGuidance=i.openGuidance,o.simplifiedOptional={},o.simplifiedSelectionPool=[],o.uncheckedSimplifiedBundles={},o.isApplication="STANDALONE"===e,o.showMoreProducts=function(){o.simplifiedOptional.CRYPTO||o.simplifiedSelectionPool.some(function(e){return"CRYPTO"===e.productType})&&o.removeProduct("CRYPTO");o.parentForm.setTpPageStyle("GENERAL")},o.checkSimplifiedOptional=function(e){if(o.simplifiedOptional[e.productType]){if("CRYPTO"===e.productType)e.permissions.forEach(function(e){e.requested=!0});else if(o.addProduct(e.productType),0==e.permissions.filter(s).length&&angular.isDefined(o.uncheckedSimplifiedBundles[e.productType]))for(var t=0;t<o.uncheckedSimplifiedBundles[e.productType].length;t++){var n=o.uncheckedSimplifiedBundles[e.productType][t];e.permissions.forEach(function(e){e.code===n.code&&(e.requested=!0)})}}else"CRYPTO"===e.productType?e.permissions.forEach(function(e){e.requested=!1,e.downgraded=e.qualified&&!e.requested}):(o.uncheckedSimplifiedBundles[e.productType]=e.permissions.filter(s),o.removeProduct(e.productType))},o.isEligibleForSimplifiedSelection=function(e){return"CRYPTO"===e.productType?e.permissions.filter(s).length>0:!("OPTION"!==e.productType||!o.rules[e.productType].isEventContractApplication)||!(!e.requested||!o.rules[e.productType].simplified)&&e.permissions.filter(s).length>0},o.isCryptoThroughZeroHash=function(e){return e.permissions.filter(l).length>0},o.isCryptoThroughOsl=function(e){return e.permissions.filter(c).length>0},o.getPopoverContent=function(e){return o.isCryptoThroughZeroHash(e)?n(1446):o.isCryptoThroughOsl(e)?n(1447):n(1448)},o.getCryptoDescription=function(e){return o.isCryptoThroughZeroHash(e)?a.instant("investmentconfig.simplified.cryptoZeroHash"):o.isCryptoThroughOsl(e)?a.instant("investmentconfig.simplified.cryptoOsl"):a.instant("investmentconfig.simplified.crypto")},o.getPopoverTrigger=function(){return t?"click":"mouseenter"},o.isSelectionDisabled=function(e){return!o.rules[e.productType].removable&&(o.getExperienceRules(e)&&o.getExperienceRules(e).disabled)};for(var u=0;u<o.selectionPool.length;u++){var d=o.selectionPool[u];o.isEligibleForSimplifiedSelection(d)&&(o.simplifiedSelectionPool.push(d),o.simplifiedOptional[d.productType]=d.permissions.filter(s).length>0)}o.showMoreProductsLink=function(){return o.simplifiedSelectionPool.some(function(e){return o.rules[e.productType].showMoreProductsLink})},o.parentForm.sortSimplifiedProducts(o.simplifiedSelectionPool)}}]})}},function(e,t){e.exports='\x3c!-- \n    Simplified selections\n--\x3e\n<div ng-repeat="selection in $ctrl.simplifiedSelectionPool" class="margin-bottom-10">\n    <h5>{{ \'tradingExchange.type.\' + selection.productType | translate }}</h5>\n    \x3c!-- \n        optional product\n    --\x3e\n    <div class="row" ng-if="selection.productType !== \'STOCK\'">\n\t\t<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n\t\t\t<p>\n\t\t\t\t<input type="checkbox" ng-model="$ctrl.simplifiedOptional[selection.productType]" ng-change="$ctrl.checkSimplifiedOptional(selection)" ng-disabled="$ctrl.isSelectionDisabled(selection)" i-check aria-labelledby="{{selection.productType}}_LABEL">\n\t\t\t\t<span id="{{selection.productType}}_LABEL" ng-if="::selection.productType !== \'CRYPTO\'">{{ \'investmentconfig.simplified.optional\' | translate:{product: (\'tradingExchange.type.\' + selection.productType | translate)} }}</span>\n\t\t\t\t<span id="{{selection.productType}}_LABEL" ng-if="::selection.productType === \'CRYPTO\'">{{ $ctrl.getCryptoDescription(selection) }}</span>\n\t\t\t\t<span ng-if="::selection.productType === \'CRYPTO\'">\n\t\t\t\t\t<a href="javascript:void(0);" class="btn-icon" role="button" aria-label="{{ \'word.moreInformation\' | translate }}">\n\t\t\t\t\t\t<i class="fa fa-question-circle" data-popover="{{$ctrl.getPopoverContent(selection)}}" popover-html="true" popover-trigger="{{$ctrl.getPopoverTrigger()}}" popover-placement="right"></i>\n\t\t\t\t\t</a>\n\t\t\t\t</span>\n\t\t\t</p>\n\t\t</div>\n\t</div>\n    <div class="row" ng-if="$ctrl.simplifiedOptional[selection.productType]">\n        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n            \x3c!-- \n                Experience\n            --\x3e\n            <div ng-if="$ctrl.getExperienceRules(selection)">\n                <p  ng-if="$ctrl.getExperienceRules(selection).displayKnowledgeGuidance">\n                    {{ \'tradingPermissionProfile.label.experience\' | translate }}\n                    <span>\n                        <am-button btn-size="small" btn-type="icon" tooltip-text="{{\'knowledgeGuidance.label.guidance\' | translate}}" tooltip-side="right" btn-icon="fas fa-question-circle" on-click="$ctrl.openGuidance(selection.assetType)"></am-button>\n                    </span>\n                </p>\n                <div class="row">\n                    <div class="col-xs-12 col-sm-4 col-md-4 col-lg-4">\n                        <am-select name="{{selection.assetType}}_years" ng-model="selection.experience.years" model-listener="$ctrl.experienceChanged(selection)" options="$ctrl.getExperienceRules(selection).allowedYears" option-key="$ctrl.getYearRangeText" no-translate="true" empty-option-text="{{ \'investmentExperience.label.selectYears\' | translate }}" is-disabled="$ctrl.getExperienceRules(selection).disabled" required></am-select>\n                    </div>\n                    <div class="col-xs-12 col-sm-4 col-md-4 col-lg-4">\n                        <am-select name="{{selection.assetType}}_trades" ng-model="selection.experience.trades" model-listener="$ctrl.experienceChanged(selection)" options="$ctrl.getExperienceRules(selection).allowedTrades" option-key="$ctrl.getTradeRangeText" no-translate="true" empty-option-text="{{ \'investmentExperience.label.selectTrades\' | translate }}" is-disabled="$ctrl.getExperienceRules(selection).disabled" required></am-select>\n                    </div>\n                    <div class="col-xs-12 col-sm-4 col-md-4 col-lg-4">\n                        <am-select ng-if="!$ctrl.getExperienceRules(selection).knowledgeQuiz" name="{{selection.assetType}}_knowledge" ng-model="selection.experience.knowledge" model-listener="$ctrl.experienceChanged(selection)" options="$ctrl.getExperienceRules(selection).allowedKnowledgeLevels" option-key="\'investmentExperience.knowledge.\'" empty-option-text="{{ \'investmentExperience.label.selectKnowledge\' | translate }}" is-disabled="$ctrl.getExperienceRules(selection).disabled" required></am-select>\n                        <p ng-if="$ctrl.getExperienceRules(selection).knowledgeQuiz">\n\t\t\t\t\t\t\t\x3c!-- The trailing "" stops the angular expression to be evaluated to any text. --\x3e\n\t\t\t\t\t\t\t<span ng-if="selection.experience.knowledge === \'UNKNOWN\' && $ctrl.getExperienceRules(selection).knowledgeQuiz.knowledge !== \'UNKNOWN\'">{{ selection.experience.knowledge = $ctrl.getExperienceRules(selection).knowledgeQuiz.knowledge;"" }}</span>\n\t\t\t\t\t\t\t<am-select ng-if="selection.experience.knowledge !== \'UNKNOWN\'" ng-model="selection.experience.knowledge" model-listener="$ctrl.experienceChanged(selection)" options="[selection.experience.knowledge]" option-key="\'investmentExperience.knowledge.\'"></am-select>\n                        \t<am-button ng-if="$ctrl.getExperienceRules(selection).knowledgeQuiz.allowed" btn-class="w-100" btn-type="primary" btn-text="{{ \'word.completeKnowledgeQuiz\' | translate }}" on-click="$ctrl.completeKnowledgeQuiz(selection.experience, $ctrl.getExperienceRules(selection).knowledgeQuiz)" is-disabled="$ctrl.isKnowledgeQuizDisabled(selection.experience)"></am-button>\n                        </p>\n                    </div>\n                </div>\n                <br>\n            </div>\n            \x3c!-- \n            \tCapability Levels\n            --\x3e\n            <div ng-if="selection.productType === \'OPTION\' && $ctrl.isPossibleCapabilityLevel(selection)">\n            \t<div ng-if="($ctrl.rules[selection.productType].availableSubCapabilities | objectLength) > 0" ng-repeat="(capability, levels) in $ctrl.rules[selection.productType].availableSubCapabilities">\n            \t\t<option-level-form ng-if="capability === \'OPTION\'" ng-model="selection.accountSubCapability" levels="levels" account-capability="$ctrl.accountCapability" ib-entity="$ctrl.rules[selection.productType].ibEntity"></option-level-form>\n            \t</div>\n            </div>\n        </div>\n    </div>\n    <br />\n</div>\n\x3c!-- \n    Notes\n--\x3e\n<am-notes ng-if="::$ctrl.notes.length > 0" severity="MEDIUM" notes="$ctrl.notes" disable-bulleted-list="true">\n\t<a ng-if="$ctrl.showMoreProductsLink()" href="javascript:void(0);" ng-click="$ctrl.showMoreProducts();">{{ \'investmentconfig.simplified.moreProducts\' | translate }}</a>\n</am-notes>'},function(e,t){e.exports="<div class=\"popover-body\">\n\t<p>{{ 'tradingExchange.help.CRYPTO_ZEROHASH' | translate }}</p>\n</div>"},function(e,t){e.exports="<div class=\"popover-body\">\n\t<p>{{ 'tradingExchange.help.CRYPTO_OSL' | translate }}</p>\n</div>"},function(e,t){e.exports="<div class=\"popover-body\">\n\t<p>{{ 'tradingExchange.help.CRYPTO' | translate }}</p>\n</div>"},function(e,t,n){e.exports=function(e){e.component("tradingExchangeProfilePanel",{bindings:{selections:"<",configurable:"<?"},template:["UserPlatformService",function(e){return e.isSimplifiedPlatform()?n(1450):n(1451)}],controller:["$translate","NavigationService","FinancialInfoService","$filter",function(t,n,a,r){var i=this;i.$onInit=function(){i.selections=i.selections||[],i.configurable=i.configurable||!1,i.validSelections=[],i.getYearRangeText=a.getYearRangeText,i.getTradeRangeText=a.getTradeRangeText,i.isValidExperience=a.isValidExperience,i.isValidSelection=function(e){return i.configurable||i.isValidExperience(e.experience)||r("filter")(e.permissions,{requested:!0}).length>0},i.isProductConfigurable=function(e){var t=(e.permissions||[]).every(function(e){return e.qualified}),n=(e.permissions||[]).every(function(e){return e.disabled});return i.configurable&&(!t||!n)},i.configure=function(a){var r;(r=a?{id:"TradingProduct",title:t.instant("page.title.tradingProduct",{productType:t.instant("tradingExchange.type."+a)}),path:"am-dynamic-sequence.component",pageData:{sequenceSource:e.SERVER_PATH+"/TradingPermissionProfile/Sequence",sequenceType:"/"+a,hideHelp:!0}}:{id:"TradingPermissions",path:"trading-product-summary.component"}).skipFetch=!0,n.navigate(r)};for(var o=0;o<i.selections.length;o++){var s=i.selections[o];i.isValidSelection(s)&&i.validSelections.push(s)}i.validSelections.sort(function(e,t){return r("filter")(e.permissions,{requested:!0}).length>0?-1:r("filter")(t.permissions,{requested:!0}).length>0?1:0})}}]})}},function(e,t){e.exports='<div class="link-row link-icon link-hover" ng-click="$ctrl.configure()">\n\t<div class="link-text">\n\t\t<p>\n\t\t\t<span class="link-label">{{ \'manageAccount.header.tradingPermissions\' | translate }}</span>\n\t\t</p>\n\t</div>\n\t<div class="btn-group-right">\n\t\t<ul class="btn-icons">\n\t\t\t<li>\n\t\t\t\t<am-button btn-type="icon" btn-icon="fas fa-angle-right"></am-button>\n\t\t\t</li>\n\t\t</ul>\n\t</div>\n</div>'},function(e,t){e.exports='<section class="panel b-0">\n\t<div class="panel-heading">\n\t\t<span class="heading">{{ \'manageAccount.header.tradingPermissions\' | translate}}</span>\n\t\t<span class="btn-group-right" ng-if="::$ctrl.configurable">\n\t\t\t<am-help sub-id="TradingPermissions"></am-help>\n\t\t</span>\n\t</div>\n\t<div class="panel-body panel-padding">\n\t\t<div class="form-bordered" ng-if="::$ctrl.validSelections.length === 0">\n\t\t\t<div class="form-group">\n\t\t\t\t<div class="row">\n\t\t\t\t\t\x3c!-- \n\t\t\t\t\t\tNo trading permission selections\n\t\t\t\t\t--\x3e\n\t\t\t\t\t<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" ng-if="::$ctrl.configurable">\n\t\t\t\t\t\t<p translate="manageAccount.message.tradingExchangeProfile" translate-values="{icon: \'<i class=&quot;fa fa-plus&quot;></i>\' }"></p>\n\t\t\t\t\t</div>\n                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" ng-if="::!$ctrl.configurable">\n                        <p>{{ \'tradingPermissionProfile.label.notConfigured\' | translate }}</p>\n                    </div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="form-bordered" ng-if="::$ctrl.validSelections.length > 0">\n\t\t\t<div ng-repeat="selection in $ctrl.validSelections">\n\t\t\t\t<div class="form-group">\n\t\t\t\t\t<div class="row row-header hidden-xs" ng-if="$first">\n\t\t\t\t\t\t<div class="col-xs-12 col-sm-4 col-md-3 col-lg-3">\n\t\t\t\t\t\t\t<p>{{ \'tradingPermissionProfile.label.asset\' | translate }}</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="col-xs-12 col-sm-5 col-md-6 col-lg-6">\n\t\t\t\t\t\t\t<p>{{ \'tradingPermissionProfile.label.markets\' | translate }}</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="col-xs-12 col-sm-3 col-md-3 col-lg-3">\n\t\t\t\t\t\t\t<p>{{ \'tradingPermissionProfile.label.experience\' | translate }}</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<br ng-if="$first">\n\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\x3c!-- \n\t\t\t\t\t\t\tProduct Type\n\t\t\t\t\t\t--\x3e\n\t\t\t\t\t\t<div class="col-xs-12 col-sm-4 col-md-3 col-lg-3">\n\t\t\t\t\t\t\t<p class="hidden-sm hidden-md hidden-lg">\n\t\t\t\t\t\t\t\t<br>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t\t<div class="col-xs-9 col-sm-9 col-md-9 col-lg-9">\n\t\t\t\t\t\t\t\t\t<p class="text-dark">\n\t\t\t\t\t\t\t\t\t\t<strong>{{ \'tradingExchange.type.\' + selection.productType | translate }}</strong>\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="col-xs-3 col-sm-3 col-md-3 col-lg-3">\n\t\t\t\t\t\t\t\t\t<p ng-if="$ctrl.isProductConfigurable(selection)">\n\t\t\t\t\t\t\t\t\t\t<am-button btn-type="icon" btn-icon="fa-cog" on-click="$ctrl.configure(selection.productType)" tooltip-text="{{ \'word.configureProduct\' | translate}}"></am-button>\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\x3c!-- \n\t\t\t\t\t\t\tRequested Trading Permissions\n\t\t\t\t\t\t--\x3e\n\t\t\t\t\t\t<div class="col-xs-12 col-sm-5 col-md-6 col-lg-6">\n\t\t\t\t\t\t\t<p class="hidden-sm hidden-md hidden-lg">\n\t\t\t\t\t\t\t\t<br>\n\t\t\t\t\t\t\t\t<strong>{{ (\'tradingPermissionProfile.label.markets\' | translate) + \':\' }}</strong>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<p ng-if="::(selection.permissions | filter:{ qualified: true }).length > 0">\n\t\t\t\t\t\t\t\t<span ng-if="!permission.hidden" ng-repeat="permission in (selection.permissions | filter:{ qualified: true })">\n\t\t\t\t\t\t\t\t\t{{ \'tradingExchange.location.\' + permission.location | translate }}<span ng-if="!$last">{{ \',\' }}</span>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<a href="javascript:void(0);" ng-if="::$ctrl.configurable && selection.permissions.length !== (selection.permissions | filter:{qualified: true}).length" target="_self" class="ml-5" ng-click="$ctrl.configure(selection.productType)">{{ \'tradingPermissionProfile.label.addEdit\' | translate }}</a>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<hr ng-if="::(selection.permissions | filter:{ qualified: true }).length > 0 && (selection.permissions | filter:{ pending: true }).length > 0">\n\t\t\t\t\t\t\t<p ng-if="::(selection.permissions | filter:{ pending: true }).length > 0">\n\t\t\t\t\t\t\t\t<span class="stamp stamp-warning">{{ \'word.pending\' | translate }}</span>\n\t\t\t\t\t\t\t\t<span ng-if="!permission.hidden" ng-repeat="permission in (selection.permissions | filter:{ pending: true })">\n\t\t\t\t\t\t\t\t\t{{ \'tradingExchange.location.\' + permission.location | translate }}<span ng-if="!$last">{{ \',\' }}</span>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<a href="javascript:void(0);" ng-if="::$ctrl.configurable && (selection.permissions | filter:{qualified: true}).length === 0" target="_self" class="ml-5" ng-click="$ctrl.configure(selection.productType)">{{ \'tradingPermissionProfile.label.addEdit\' | translate }}</a>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<span class="hidden-sm hidden-md hidden-lg" ng-if="::(selection.permissions | filter:{ qualified: true }).length > 0 && (selection.permissions | filter:{ pending: true }).length > 0">\n\t\t\t\t\t\t\t\t<hr>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<p ng-if="::$ctrl.configurable && (selection.permissions | filter:{ requested: true }).length === 0">\n\t\t\t\t\t\t\t\t<a href="javascript:void(0);" ng-click="$ctrl.configure(selection.productType)">{{ \'tradingPermissionProfile.label.request\' | translate }}</a>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\x3c!-- \n\t\t\t\t\t\t\tExperience\n\t\t\t\t\t\t--\x3e\n\t\t\t\t\t\t<div class="col-xs-12 col-sm-3 col-md-3 col-lg-3">\n\t\t\t\t\t\t\t<p class="hidden-sm hidden-md hidden-lg" ng-if="::$ctrl.isValidExperience(selection.experience)">\n\t\t\t\t\t\t\t\t<br>\n\t\t\t\t\t\t\t\t<strong>{{ (\'tradingPermissionProfile.label.experience\' | translate) + \':\' }}</strong>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<ul ng-if="::$ctrl.isValidExperience(selection.experience)">\n\t\t\t\t\t\t\t\t<li>{{ $ctrl.getYearRangeText(selection.experience.years) }}</li>\n\t\t\t\t\t\t\t\t<li>{{ $ctrl.getTradeRangeText(selection.experience.trades) }}</li>\n\t\t\t\t\t\t\t\t<li>{{(\'investmentExperience.knowledge.\' + selection.experience.knowledge | translate)}}</li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t<ul ng-if="::!selection.experience && (selection.permissions | filter:{ requested: true }).length > 0">\n\t\t\t\t\t\t\t\t<li>{{ \'word.notApplicable\' | translate }}</li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<hr ng-if="!$last">\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</section>\n'},function(e,t,n){e.exports=function(e){e.component("tradingPermissionSelectionForm",{require:{parentForm:"^^form"},bindings:{selections:"=ngModel",rules:"<",experiences:"<?",capabilityLevelCallback:"&?",accountCapability:"<?",accountCapabilityRules:"<?",notes:"<?",serverErrors:"<?",capabilityErrors:"<?",capabilityExams:"<?",riskAppetites:"<?",mandatoryTasks:"<?",hardStopWarnings:"<?",acknowledgements:"<?",riskAcceptanceTasks:"<?",tpPageStyle:"<?"},template:n(1453),controller:["ACTIVE_CONTEXT","FinancialInfoService","KnowledgeGuidanceService",function(e,t,n){var a=this,r={STOCK:1,OPTION:2,BOND:3,WARRANT:4,STOCK_OPTION:5,ISSUER_OPTION:6,FUTURE:7,FOP:8,SSF:9,CFD:10,FXCFD:11,METAL:12,FUND:13,NEXTSHARE:14,FOREX:15,FXCONVERSION:16,CLP:17,CRYPTO:18,EVENT_OPTIONS:19},i=function(e,t){angular.isArray(e)&&e.sort(function(e,n){return angular.isObject(e)&&angular.isObject(n)||angular.isDefined(t)?a.rules[e[t]].requested&&a.rules[n[t]].requested?a.rules[e[t]].sortingOrder-a.rules[n[t]].sortingOrder:a.rules[e[t]].requested?-1:a.rules[n[t]].requested?1:0!=a.rules[e[t]].sortingOrder||0!=a.rules[n[t]].sortingOrder?a.rules[e[t]].sortingOrder-a.rules[n[t]].sortingOrder:r[e[t]]-r[n[t]]:0!=a.rules[e].sortingOrder||0!=a.rules[n].sortingOrder?a.rules[e].sortingOrder-a.rules[n].sortingOrder:r[e]-r[n]})},o=function(e){return e.requested},s=function(e){var t=a.rules[e.productType].defaultBundles||[];if(0!==t.length)for(var n=0;n<t.length;n++){var r=t[n];e.permissions.forEach(function(e){e.code===r&&(e.requested=!0)})}};a.$onInit=function(){a.selections=a.selections||[],a.experiences=a.experiences||{},a.capabilityLevelCallback=a.capabilityLevelCallback||angular.noop,a.accountCapability=a.accountCapability||void 0,a.notes=a.notes||[],a.serverErrors=a.serverErrors||void 0,a.capabilityErrors=a.capabilityErrors||[],a.capabilityExams=a.capabilityExams||[],a.riskAppetites=a.riskAppetites||[],a.mandatoryTasks=a.mandatoryTasks||[],a.hardStopWarnings=a.hardStopWarnings||[],a.acknowledgements=a.acknowledgements||[],a.riskAcceptanceTasks=a.riskAcceptanceTasks||[],a.tpPageStyle=a.tpPageStyle||"GENERAL",a.selectedProductType=void 0,a.productTypePool=[],a.selectionPool=[],a.fetchedPossibleCapabilityLevel={},a.experienceRulesExists=Object.keys(a.rules).some(function(e){var t=a.rules[e].assetExperienceRules;return angular.isDefined(t)}),a.knowledgeQuizAllowed=Object.keys(a.rules).some(function(e){var t=a.rules[e].assetExperienceRules;return angular.isDefined(t)&&angular.isDefined(t.knowledgeQuiz)}),a.getYearRangeText=t.getYearRangeText,a.getTradeRangeText=t.getTradeRangeText,a.getAssetTypeText=t.getAssetTypeText,a.completeKnowledgeQuiz=t.completeKnowledgeQuiz,a.isKnowledgeQuizDisabled=t.isKnowledgeQuizDisabled,a.openGuidance=n.openGuidance,a.getServerErrors=function(){return a.serverErrors},a.setTpPageStyle=function(e){a.tpPageStyle=e},a.sortSimplifiedProducts=function(e){e.sort(function(e,t){return angular.isObject(e)&&angular.isObject(t)?0!=a.rules[e.productType].sortingOrder||0!=a.rules[e.productType].sortingOrder?a.rules[e.productType].sortingOrder-a.rules[t.productType].sortingOrder:r[e.productType]-r[t.productType]:0})},a.getExperienceRules=function(e){var t=e.productType;return"FOREX"!==t?a.rules[t].assetExperienceRules:(e.permissions||[]).some(function(e){return"LEVFX"===e.code&&e.requested})||a.rules[t].requested?a.rules[t].assetExperienceRules:void 0},a.addProduct=function(t){if(t){a.selectedProductType=void 0;var n=a.productTypePool.indexOf(t);a.productTypePool.splice(n,1);var r=a.selections.find(function(e){return e.productType===t});if(r.requested=!0,s(r),a.selectionPool.unshift(r),1===r.permissions.length&&r.permissions.forEach(function(e){e.requested=!0}),"STANDALONE"===e){var i=a.selections.find(function(e){return"STOCK"===e.productType});if(i){var l=(i.permissions||[]).filter(o).map(function(e){return e.location});r.permissions.forEach(function(e){l.indexOf(e.location)>=0&&(e.requested=!0)})}}}},a.removeProduct=function(e){a.selectedProductType=void 0,a.productTypePool.push(e);var t=a.selectionPool.findIndex(function(t){return t.productType===e});a.selectionPool.splice(t,1),i(a.productTypePool),function(e){var t=a.selections.find(function(t){return t.productType===e});t.requested=!1,t.limitedTrading=!1;var n=a.rules[e].assetExperienceRules||void 0;angular.isDefined(n)&&!n.disabled&&(t.experience={assetType:t.assetType,knowledge:void 0,trades:void 0,years:void 0}),t.permissions.forEach(function(e){e.requested=!1,e.downgraded=e.qualified&&!e.requested})}(e)},a.experienceChanged=function(e){for(var t=[],n=0;n<Object.keys(a.rules[e.productType].availableSubCapabilities||{}).length;n++){var r=Object.keys(a.rules[e.productType].availableSubCapabilities)[n];0!==(a.rules[e.productType].availableSubCapabilities[r]||[]).length&&t.push(r)}if(0!==t.length)if(angular.isDefined(e.accountSubCapability)&&"UNKNOWN"!==e.accountSubCapability)e.accountSubCapability;else if(angular.isUndefined(e.experience)||angular.isDefined(e.experience)&&"UNKNOWN"===e.experience.knowledge)e.experience;else for(n=0;n<t.length;n++){r=t[n];a.fetchedPossibleCapabilityLevel[e.productType]=!1,a.capabilityLevelCallback({capability:r,experience:e.experience}).then(function(t){e.accountSubCapability=t}).finally(function(){a.fetchedPossibleCapabilityLevel[e.productType]=!0})}else e.productType},a.isPossibleCapabilityLevel=function(e){return a.fetchedPossibleCapabilityLevel[e.productType]};for(var l=0;l<a.selections.length;l++){var c=a.selections[l],u=!1;a.rules[c.productType].requested||!a.rules[c.productType].removable?u=!0:t.isValidExperience(c.experience)?u=!0:c.permissions.filter(o).length>0&&(u=!0),c.requested=u,s(c),u?a.selectionPool.push(c):a.productTypePool.push(c.productType),a.fetchedPossibleCapabilityLevel[c.productType]=angular.isDefined(c.accountSubCapability)&&"UNKNOWN"!==c.accountSubCapability,"UNKNOWN"!==c.assetType&&"MARGIN"!==c.assetType&&(a.experiences[c.assetType]=c.experience)}i(a.selectionPool,"productType"),i(a.productTypePool)}}]})}},function(e,t){e.exports='<div ng-if="$ctrl.tpPageStyle != \'IMPACT_SHORT\'">\n\t<any ng-switch="$ctrl.tpPageStyle">\n\t\t<h6 class="subtitle" aria-level="2" ng-switch-when="SIMPLIFIED">{{ \'investmentconfig.simplified.header\' | translate }}</h6>\n\t\t<h6 class="subtitle" aria-level="2" ng-switch-when="IMPACT">{{ \'investmentconfig.impact.header\' | translate }}</h6>\n\t\t<h6 class="subtitle" aria-level="2" ng-switch-default>{{ ($ctrl.experienceRulesExists ? \'investmentconfig.header.experienceAndpermissions\' : \'investmentconfig.header.permissions\') | translate }}</h6>\t\n\t</any>\n\t<any ng-if="$ctrl.tpPageStyle != \'IMPACT\'" ng-switch="$ctrl.tpPageStyle">\n\t\t<any ng-switch-when="SIMPLIFIED">\n\t\t\t<p ng-if="::!$ctrl.knowledgeQuizAllowed">{{ \'investmentconfig.simplified.message\' | translate }}</p>\n\t\t\t<p ng-if="::$ctrl.knowledgeQuizAllowed">{{ \'investmentconfig.knowledgeQuizMessage\' | translate}}</p>\n\t\t</any>\n\t\t<any ng-switch-default>\n\t\t\t<p ng-if="::!$ctrl.knowledgeQuizAllowed">\n\t\t\t\t{{ \'investmentconfig.message\' | translate }}\n\t\t\t\t<span ng-if="$ctrl.productTypePool.length > 0">{{ \'investmentconfig.productSelectionMessage\' | translate }}</span>\n\t\t\t</p>\n\t\t\t<p ng-if="::$ctrl.knowledgeQuizAllowed">{{ \'investmentconfig.knowledgeQuizMessage\' | translate}}</p>\t\t\t\n\t\t</any>\n\t</any>\n    <br>\n</div>\n\x3c!-- \n\tNotes\n--\x3e\n<am-notes ng-if="::$ctrl.notes.length > 0" severity="LOW" notes="$ctrl.notes"></am-notes>\n\x3c!-- \n\tServer Errors\n--\x3e\n<div class="alert alert-danger" ng-if="$ctrl.serverErrors[\'investment_experience\']">\n\t<p>{{ \'investmentExperience.error.\' + $ctrl.serverErrors[\'investment_experience\'] | translate }}</p>\n</div>\n\x3c!-- \n\tRisk Appetite\n--\x3e\n<risk-appetite ng-if="$ctrl.riskAppetites.length > 0" risk-appetite-types="$ctrl.riskAppetites"></risk-appetite>\n\x3c!-- \n\tCapability Mandatory Tasks\n--\x3e\n<capability-mandatory-task ng-if="$ctrl.mandatoryTasks.length > 0" mandatory-tasks="$ctrl.mandatoryTasks" experiences="$ctrl.experiences"></capability-mandatory-task>\n\x3c!-- \n\tHard Stop Warnings\n--\x3e\n<hard-stop-warning ng-if="$ctrl.hardStopWarnings.length > 0" warnings="$ctrl.hardStopWarnings"></hard-stop-warning>\n\x3c!-- \n\tFinancial Info Exams\n--\x3e\n<am-exam ng-if="$ctrl.exams.length > 0" exam-types="$ctrl.exams"></am-exam>\n\x3c!-- \n\tCapability Exams\n--\x3e\n<capability-exam ng-if="$ctrl.capabilityExams.length > 0" exams="$ctrl.capabilityExams"></capability-exam>\n\x3c!-- \n\tCapability Acknowledgments\n--\x3e\n<capability-acknowledgement ng-if="$ctrl.acknowledgements.length > 0" acknowledgements="$ctrl.acknowledgements"></capability-acknowledgement>\n\x3c!-- \n\tFinancial Info Custom Errors\n--\x3e\n<financial-info-error ng-if="$ctrl.capabilityErrors.length > 0" errors="$ctrl.capabilityErrors"></financial-info-error>\n\x3c!-- \n\tMargin/P-Margin Account Type Experience\n--\x3e\n<div class="tp-container active" ng-if="$ctrl.accountCapability && $ctrl.accountCapabilityRules.allowedAssetsRules[$ctrl.accountCapability.accountType].length > 0">\n\t<div ng-repeat="assetRules in $ctrl.accountCapabilityRules.allowedAssetsRules[$ctrl.accountCapability.accountType]">\n\t\t<div class="tp-header">\n\t\t\t<h5 aria-level="3" class="tp-title">\n\t\t\t\t{{ ::$ctrl.getAssetTypeText(assetRules.label, assetRules.assetType) }}\n\t\t\t</h5>\t\t\n\t\t</div>\n\t\t<div class="tp-body">\n\t\t\t<div class="row">\n\t\t\t\t<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n\t\t\t\t\t<p>\n\t\t\t\t\t\t{{ \'tradingPermissionProfile.label.experience\' | translate }}\n\t\t\t\t\t\t<span ng-if="assetRules.displayKnowledgeGuidance">\n\t\t\t\t\t\t\t<am-button btn-size="small" btn-type="icon" tooltip-text="{{\'knowledgeGuidance.label.guidance\' | translate}}" tooltip-side="right" btn-icon="fas fa-question-circle" on-click="$ctrl.openGuidance(assetRules.assetType)"></am-button>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</p>\n\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t<div class="col-xs-12 col-sm-4 col-md-4 col-lg-4">\n\t\t\t\t\t\t\t<am-select name="{{assetRules.assetType}}_years" ng-model="$ctrl.experiences[assetRules.assetType].years" options="assetRules.allowedYears" option-key="$ctrl.getYearRangeText" no-translate="true" empty-option-text="{{ \'investmentExperience.label.selectYears\' | translate }}" is-disabled="assetRules.disabled" required></am-select>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="col-xs-12 col-sm-4 col-md-4 col-lg-4">\n\t\t\t\t\t\t\t<am-select name="{{assetRules.assetType}}_trades" ng-model="$ctrl.experiences[assetRules.assetType].trades" options="assetRules.allowedTrades" option-key="$ctrl.getTradeRangeText" no-translate="true" empty-option-text="{{ \'investmentExperience.label.selectTrades\' | translate }}" is-disabled="assetRules.disabled" required></am-select>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="col-xs-12 col-sm-4 col-md-4 col-lg-4">\n\t\t\t\t\t\t\t<am-select ng-if="!assetRules.knowledgeQuiz" name="{{assetRules.assetType}}_knowledge" ng-model="$ctrl.experiences[assetRules.assetType].knowledge" options="assetRules.allowedKnowledgeLevels" option-key="\'investmentExperience.knowledge.\'" empty-option-text="{{ \'investmentExperience.label.selectKnowledge\' | translate }}" is-disabled="assetRules.disabled " required></am-select>\n\t\t\t\t\t\t\t<p ng-if="assetRules.knowledgeQuiz">\n\t\t\t\t\t\t\t\t\x3c!-- The trailing "" stops the angular expression to be evaluated to any text. --\x3e\n\t\t\t\t\t\t\t\t<span ng-if="$ctrl.experiences[assetRules.assetType].knowledge === \'UNKNOWN\' && assetRules.knowledgeQuiz.knowledge !== \'UNKNOWN\'">{{ $ctrl.experiences[assetRules.assetType].knowledge = assetRules.knowledgeQuiz.knowledge;"" }}</span>\n\t\t\t\t\t\t\t\t<am-select ng-if="$ctrl.experiences[assetRules.assetType].knowledge !== \'UNKNOWN\'" name="{{assetRules.assetType}}_knowledge" ng-model="$ctrl.experiences[assetRules.assetType].knowledge" options="[$ctrl.experiences[assetRules.assetType].knowledge]" option-key="\'investmentExperience.knowledge.\'"></am-select>\n\t\t\t\t\t\t\t\t<am-button ng-if="assetRules.knowledgeQuiz.allowed" btn-class="w-100" btn-type="primary" btn-text="{{ \'word.completeKnowledgeQuiz\' | translate }}" on-click="$ctrl.completeKnowledgeQuiz($ctrl.experiences[assetRules.assetType], assetRules.knowledgeQuiz)" is-disabled="$ctrl.isKnowledgeQuizDisabled($ctrl.experiences[assetRules.assetType])"></am-button>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<br>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\t\n\t</div>\n</div>\n\x3c!-- \n    Simplified trading permission page\n--\x3e\n<simplified-trading-permission ng-if="$ctrl.tpPageStyle == \'SIMPLIFIED\'" ng-model="$ctrl.selectionPool" rules="$ctrl.rules" account-capability="$ctrl.accountCapability" notes="$ctrl.notes"></simplified-trading-permission>\n\x3c!-- \n    General style trading permission page\n--\x3e\n<general-trading-permission ng-if="$ctrl.tpPageStyle == \'GENERAL\'" ng-model="$ctrl.selectionPool" rules="$ctrl.rules" account-capability="$ctrl.accountCapability" notes="$ctrl.notes"></general-trading-permission>\n\x3c!-- \n    Impact style trading permission page\n--\x3e\n<impact-trading-permission ng-if="$ctrl.tpPageStyle == \'IMPACT\' || $ctrl.tpPageStyle == \'IMPACT_SHORT\'" ng-model="$ctrl.selectionPool"></impact-trading-permission>'},function(e,t){e.exports=function(e){e.component("tradingPermissionSelectionsReview",{bindings:{selections:"<"},templateUrl:e.WEBAPP_ROOT+"/components/permissions/tradingPermissionSelectionReview.html",controller:["FinancialInfoService",function(e){var t=this;t.$onInit=function(){t.selections=t.selections||[],t.getYearRangeText=e.getYearRangeText,t.getTradeRangeText=e.getTradeRangeText,t.isValidExperience=e.isValidExperience}}]})}},function(e,t){e.exports=function(e){e.component("stockYieldCalculator",{bindings:{positionYields:"<"},templateUrl:e.WEBAPP_ROOT+"/components/programs/stockYieldCalculator.html",controller:["$filter",function(e){var t=this;t.$onInit=function(){t.positionYields=t.positionYields||[],t.totalDailyNetFee=t.positionYields[0].totalDailyNetFee,t.getDailyNetFeeTotal=function(){var e=0;return angular.forEach(t.positionYields[0].stockYields,function(t){e+=t.dailyNetFee}),e},t.getMonthlyNetFeeTotal=function(){var e=0;return angular.forEach(t.positionYields[0].stockYields,function(t){e+=t.monthlyNetFee}),e}}}]})}},function(e,t,n){e.exports=function(e){e.component("amFormTradingPrograms",{require:{parentForm:"^^form"},bindings:{programs:"=ngModel",rules:"<"},template:n(1457),controller:function(){var e=this;e.$onInit=function(){e.programs=e.programs||[]}}})}},function(e,t){e.exports='<div id="tradingProgramAccordion" class="accordion">\n\t<div class="accordion-item">\n\t\t<h2 class="accordion-header" id="tradingProgramHeader">\n\t\t\t<button class="accordion-button collapsed" type="button" data-toggle="collapse" data-target="#tradingProgramPanel" aria-controls="tradingProgramPanel" aria-expanded="false">\n\t\t\t\t{{ \'tradingProgram.header.configure\' | translate }}\n\t\t\t</button>\n\t\t</h2>\n\t\t<div id="tradingProgramPanel" class="accordion-collapse collapse" aria-labelledby="tradingProgramHeader" aria-expanded="false">\n\t\t\t<div class="accordion-body">\n\t\t\t\t<div class="row" ng-if="$ctrl.rules[program.type]" ng-repeat="program in $ctrl.programs">\n\t\t\t\t\t<div class="col-xs-10 col-sm-10 col-md-10 col-lg-10">\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t<Strong>{{ \'tradingProgram.type.\' + program.type | translate }}</Strong>\n\t\t\t\t\t\t\t<span class="badge bg-dark-blue margin-left-5" ng-if="program.pending">{{ \'word.pending\' | translate }}</span>\n\t\t\t\t\t\t\t<span ng-if="$ctrl.rules[program.type].downgradeAllowed" class="text-small text-danger" translate="tradingProgram.warning.downgrade" translate-values="{ program: (\'tradingProgram.type.\' + program.type | translate ) }"></span>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="col-xs-2 col-sm-2 col-md-2 col-lg-2">\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t<span class="btn-group-right">\n\t\t\t\t\t\t\t\t<input type="checkbox" ng-model="program.requested" ng-disabled="program.disabled" i-check />\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n'},function(e,t){e.exports=function(e){e.component("tradingProgramReview",{bindings:{programs:"<"},templateUrl:e.WEBAPP_ROOT+"/components/programs/tradingProgramsReview.html"})}},function(e,t,n){e.exports=function(e){var t=n(4).component.ComponentLoadEvent;e.component("investmentConfigForm",{bindings:{globalAccountId:"@?",readOnly:"<?"},template:["$element","$attrs",function(e,t){var a="true"===t.readOnly||!1;return n(a?1460:1461)}],controller:["$q","$timeout","$translate","InvestmentConfigService","ModalService","ComponentService",function(e,n,a,r,i,o){var s=this;s.$onInit=function(){s.exams=s.exams||[],s.capabilityExams=s.capabilityExams||[],s.riskAppetites=s.riskAppetites||[],s.mandatoryTasks=s.mandatoryTasks||[],s.hardStopWarnings=s.hardStopWarnings||[],s.customErrors=s.customErrors||[],s.acknowledgedCapabilities=s.acknowledgedCapabilities||[],s.riskAcceptanceTasks=s.riskAcceptanceTasks||[],s.descriptors=s.descriptors||[],s.errors={},s.fetchedInvestmentConfig=!1,s.submit=function(){s.fetchedInvestmentConfig=!1;var e=jQuery.Deferred();return r.submitInvestmentConfig(s.financialInfo,s.selections,s.selectionRules,s.accountCapability,s.accountCapabilityRules,s.globalAccountCapability,s.acknowledgedCapabilities,s.descriptors,s.globalAccountId).then(function(t){e.resolve(t)},function(t){if(s.errors=t.errors||[],s.exams=t.exams||[],s.capabilityExams=t.capabilityExams||[],s.riskAppetites=t.riskAppetites||[],s.mandatoryTasks=t.mandatoryTasks||[],s.customErrors=t.customErrors||[],s.acknowledgements=t.acknowledgements||[],s.riskAcceptanceTasks=t.riskAcceptanceTasks||[],s.hardStopWarnings=t.hardStopWarnings||[],s.capabilityLevelAcknowledgements=t.capabilityLevelAcknowledgements||[],s.skipDisclosure=t.skipDisclosure||!1,s.customErrors.length>0||s.exams.length>0||s.capabilityExams.length>0||s.riskAppetites.length>0||s.mandatoryTasks.length>0||s.hardStopWarnings.length>0){var r={contentClass:"modal-gray",title:a.instant("word.attention"),templateUrl:"capability-error-modal.component",dialogClass:"modal-lg",modalData:{customErrors:s.customErrors,skipDisclosure:s.skipDisclosure,exams:s.exams,capabilityExams:s.capabilityExams,riskAppetites:s.riskAppetites,mandatoryTasks:s.mandatoryTasks,hardStopWarnings:s.hardStopWarnings,financialInfo:s.financialInfo,selections:s.selections,selectionRules:s.selectionRules,accountCapability:s.accountCapability,accountCapabilityRules:s.accountCapabilityRules,globalAccountCapability:s.globalAccountCapability,globalAccountId:s.globalAccountId,pageStyle:s.tpPageStyle}};i.openModal(r).then(function(e){angular.isUndefined(e)||(s.exams=e.exams,s.capabilityExams=e.capabilityExams,s.riskAppetites=e.riskAppetites,s.mandatoryTasks=e.mandatoryTasks,s.hardStopWarnings=e.hardStopWarnings,s.customErrors=e.customErrors,s.tpPageStyle=e.pageStyle||s.tpPageStyle,0===(s.exams||[]).length&&0===(s.customErrors||[]).length&&0===(s.riskAppetites||[]).length&&0===(s.capabilityExams||[]).length&&goNext())})}else if(s.acknowledgements.length>0){r={contentClass:"modal-gray",title:a.instant("word.attention"),templateUrl:"capability-acknowledgement-modal.component",dialogClass:"modal-lg",modalData:{accountCapability:s.accountCapability,selections:s.selections,acknowledgements:s.acknowledgements}};i.openModal(r).then(function(e){angular.isUndefined(e)||(s.accountCapability=e.accountCapability,s.acknowledgements=e.acknowledgements||[],s.acknowledgedCapabilities=e.acknowledgedCapabilities||[],s.descriptors=e.descriptors||[],0===s.acknowledgements.length&&goNext())})}else if(s.capabilityLevelAcknowledgements.length>0){r={noClose:!0,contentClass:"modal-gray",title:a.instant("word.attention"),templateUrl:"capability-level-acknowledgement-modal.component",dialogClass:"modal-lg",modalData:{acknowledgements:s.capabilityLevelAcknowledgements,selections:s.selections}};i.openModal(r).then(function(e){angular.isUndefined(e)||(s.acknowledgements=e.acknowledgements||[],s.acknowledgedCapabilities=e.acknowledgedCapabilities||[],s.descriptors=e.descriptors||[],0===s.acknowledgements.length&&goNext())})}else if(s.riskAcceptanceTasks.length>0){r={noClose:!0,contentClass:"modal-gray",title:a.instant("word.attention"),templateUrl:"capability-risk-acceptance-task-modal.component",dialogClass:"modal-lg",modalData:{riskAcceptanceTasks:s.riskAcceptanceTasks,selections:s.selections,accountCapability:s.accountCapability}};i.openModal(r).then(function(e){angular.isUndefined(e)||(s.accountCapability=e.accountCapability,s.riskAcceptanceTasks=e.riskAcceptanceTasks||[],s.acknowledgedCapabilities=e.acknowledgedCapabilities||[],s.descriptors=e.descriptors||[],0===s.riskAcceptanceTasks.length&&goNext())})}n(function(){e.reject(t)},0,!0)}).finally(function(){s.fetchedInvestmentConfig=!0}),e.promise()},s.getServerErrors=function(){return s.errors},s.capabilityLevelCallback=function(t,n){s.isLoading=!0;var a=e.defer();return r.fetchCapabilityLevel(s.financialInfo.financialAssets,s.financialInfo.objectives,n,t).then(function(e){a.resolve(e.capabilityLevel)},function(e){a.reject("UNKNOWN")}).finally(function(){s.isLoading=!1}),a.promise},r.fetchInvestmentConfig({globalAccountId:s.globalAccountId}).then(function(e){s.financialInfo=e.financialInfo||void 0,s.financialInfoRules=e.financialInfoRules||void 0,s.selections=e.selections||[],s.selectionRules=e.selectionRules||void 0,s.accountCapability=e.accountCapability||void 0,s.accountCapabilityRules=e.accountCapabilityRules||void 0,s.globalAccountCapability=e.globalAccountCapability||void 0,s.globalAccountCapabilityRules=e.globalAccountCapabilityRules||void 0,s.notes=e.notes||[],s.tpPageStyle=e.tpPageStyle||"GENERAL",s.fetchedInvestmentConfig=!0,s.finInfoQuestionnaires=e.finInfoQuestionnaires||[]},function(e){s.fetchedInvestmentConfig=!1}).finally(function(){a.onReady().then(function(){var e=new t("investmentConfig",s.fetchedInvestmentConfig);e.submit=s.submit,o.notifyLoad(e)})})}}]})}},function(e,t){e.exports='<div>\r\n    \x3c!-- \r\n        Financial Net Worth\r\n    --\x3e\r\n    <financial-net-worth-review ng-if="$ctrl.financialInfo.financialAssets" financial-net-worth="$ctrl.financialInfo.financialAssets"></financial-net-worth-review>\r\n    \x3c!-- \r\n        Investment Objectives\r\n    --\x3e\r\n    <investment-objectives-review ng-if="$ctrl.financialInfo.objectives.length > 0" objectives="$ctrl.financialInfo.objectives"></investment-objectives-review>\r\n    \x3c!--\r\n        Trading Permissions and Experience\r\n    --\x3e\r\n    <trading-permission-selections-review ng-if="$ctrl.selections.length > 0" selections="$ctrl.selections"></trading-permission-selections-review>\r\n</div>'},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.isLoading"></loading-overlay>\r\n<div ng-form="$ctrl.investmentConfigForm" form-server-errors="$ctrl.getServerErrors()">\r\n\t\x3c!-- \r\n\t\tTrading Account Type\r\n\t--\x3e\r\n\t<trading-account-capability-form ng-if="$ctrl.accountCapabilityRules" ng-model="$ctrl.accountCapability" rules="$ctrl.accountCapabilityRules"></trading-account-capability-form>\r\n\t\x3c!-- \r\n\t\tDomestic Trading Account Type\r\n\t--\x3e\r\n\t<trading-account-capability-form ng-if="$ctrl.globalAccountCapabilityRules" ng-model="$ctrl.globalAccountCapability" rules="$ctrl.globalAccountCapabilityRules"></trading-account-capability-form>\r\n    \x3c!-- \r\n        Financial Assets\r\n    --\x3e\r\n    <am-form-financial-net-worth ng-if="$ctrl.financialInfoRules.assetRules" ng-model="$ctrl.financialInfo.financialAssets" rules="$ctrl.financialInfoRules.assetRules" questionnaires="$ctrl.finInfoQuestionnaires"></am-form-financial-net-worth>\r\n    \x3c!-- \r\n        Investment Objectives\r\n    --\x3e\r\n    <am-form-investment-objectives ng-if="$ctrl.financialInfoRules.objectiveRules" ng-model="$ctrl.financialInfo.objectives" rules="$ctrl.financialInfoRules.objectiveRules"></am-form-investment-objectives>\r\n    \x3c!-- \r\n        Trading Permissions and Experience\r\n    --\x3e\t\r\n    <trading-permission-selection-form ng-if="($ctrl.selectionRules | objectLength) > 0 && $ctrl.selections.length > 0" ng-model="$ctrl.selections" rules="$ctrl.selectionRules" experiences="$ctrl.financialInfo.experiences" capability-level-callback="$ctrl.capabilityLevelCallback(capability, experience)" account-capability="$ctrl.accountCapability" account-capability-rules="$ctrl.accountCapabilityRules" notes="$ctrl.notes" capability-errors="$ctrl.customErrors" exams="$ctrl.exams" capability-exams="$ctrl.capabilityExams" risk-appetites="$ctrl.riskAppetites" mandatory-tasks="$ctrl.mandatoryTasks" acknowledgements="$ctrl.acknowledgements" hard-stop-warnings="$ctrl.hardStopWarnings" tp-page-style="$ctrl.tpPageStyle"></trading-permission-selection-form>\r\n</div>\r\n\r\n\r\n    \r\n'},function(e,t){e.exports=function(e){e.component("investmentConfigModuleError",{bindings:{error:"@"},template:['<div class="alert alert-warning">',"   <p>{{ $ctrl.error }}</p>","</div>"].join(""),controller:["$translate",function(t){var n=this;n.$onInit=function(){n.error=n.error||t.instant("Unable to load a investment config module: "+e.name)}}]})}},function(e,t,n){e.exports=function(e){e.component("riskAppetite",{bindings:{riskAppetiteTypes:"<"},template:n(1464),controller:["RiskAppetiteService","$translate",function(e,t){var n=this;n.$onInit=function(){n.riskAppetiteTypes=n.riskAppetiteTypes||[],n.completeRiskAppetite=e.complete}}]})}},function(e,t){e.exports='<div class="alert alert-info" ng-repeat="riskAppetite in $ctrl.riskAppetiteTypes">\r\n\t<div class="row">\r\n\t\t<div class="col-xs-12 col-sm-12 col-md-2 col-lg-2">\r\n\t\t\t<p><i class="fas fa-3x fa-info-circle text-blue"></i></p>\r\n\t\t</div>\r\n\t\t<div class="col-xs-12 col-sm-12 col-md-7 col-lg-7">\r\n\t\t\t<p>{{ (\'riskAppetite.message.completion.\' + riskAppetite.type | translate) }}</p>\r\n\t\t</div>\r\n\t\t<div class="col-xs-12 col-sm-12 col-md-3 col-lg-3">\r\n\t\t\t<p class="btn-group-right">\r\n\t\t\t\t<am-button btn-type="primary" on-click="$ctrl.completeRiskAppetite(riskAppetite.type, riskAppetite.accountId)" btn-text="{{ \'word.verb.complete\' | translate }}"></am-button>\r\n\t\t\t</p>\r\n\t\t</div>\r\n\t</div>\r\n</div>'},function(e,t,n){e.exports=function(e){e.component("riskAppetiteSummary",{template:n(1466),controller:["$q","PageService","ResourceService","RiskAppetiteService",function(t,n,a,r){var i=this,o=function(){return t.resolve("restricted")};i.$onInit=function(){i.riskAppetites=[],i.cancelLoading=!1,i.complete=function(e,t){r.complete(e,t,"UPDATE").then(function(e){e&&s()})};var s=function(){var n=[];return n.push(a.fetch(e.SERVER_PATH+"/RiskAppetite").then(function(e){i.riskAppetites=e.data.riskAppetites||[]}).catch(o)),t.all(n)};n.setOnPageLoad(function(){s().finally(function(){i.cancelLoading||n.setIsPageLoading(!1)})})},i.$onDestroy=function(){i.cancelLoading=!0}}]})}},function(e,t){e.exports='<div page-structure>\n\t<h4>{{ \'page.title.RiskAppetite\' | translate }}</h4>\n\t<br>\n\t\x3c!-- \n\t\tRisk Appetites\n\t--\x3e\n\t<div class="row" ng-if="::$ctrl.riskAppetites.length > 0" ng-repeat="riskAppetite in $ctrl.riskAppetites">\n\t\t<div class="col-xs-12 col-sm-12 col-md-9 col-lg-9">\n\t\t\t<div class="alert alert-info">\n\t\t\t\t<p>\n\t\t\t\t\t<span>{{ \'riskAppetite.type.\' + riskAppetite.type | translate }}</span>\n\t\t\t\t\t<span class="pull-right" ng-if="riskAppetite.investmentLimit > 0">\n\t\t\t\t\t\t<strong>{{ (\'Investment Limit\' | translate) + \': \' }}</strong>\n\t\t\t\t\t\t<span>{{ (riskAppetite.investmentLimit * 100) + \'%\'}}</span>\n\t\t\t\t\t</span>\n\t\t\t\t</p>\n\t\t\t</div>\t\n\t\t</div>\n\t\t<div class="col-xs-12 col-sm-12 col-md-3 col-lg-3">\n\t\t\t<p class="btn-group-right">\n\t\t\t\t<am-button on-click="$ctrl.complete(riskAppetite.type, riskAppetite.accountId)" btn-type="primary" btn-text="{{ \'word.update\' | translate }}"></am-button>\n\t\t\t</p>\n\t\t</div>\n\t</div>\n</div>'},function(e,t){e.exports=function(e){e.component("riskAppetiteQuestions",{templateUrl:e.WEBAPP_ROOT+"/components/riskappetite/riskAppetiteQuestions.html",controller:["ModalService","ResourceService",function(t,n){var a=this;a.submit=function(){a.isLoading=!0;var r={questions:a.questions,type:a.riskAppetiteType,accountId:a.accountId,formFileId:a.disclaimer.fileId,agreementSubstitutions:a.disclaimer.agreementSubstitutions};n.update(e.SERVER_PATH+"/RiskAppetite",r).then(function(e){a.modalState="SUCCESS",t.setModalButtons([{label:"word.close",fn:t.closeModal,alignment:"right"}])}).catch(function(e){a.errors=e.data.errors,a.errors.question_22?a.actual=0:a.errors.riskAppetite&&(a.modalState="FAILURE",t.setModalButtons([{label:"word.close",fn:t.closeModal,alignment:"right"}]))}).finally(function(){a.isLoading=!1,t.setModalResult(a.modalState)})},a.$onInit=function(){a.isLoading=!0,a.riskAppetiteType=a.riskAppetiteType||t.getModalData().riskAppetiteType,a.accountId=a.accountId||t.getModalData().accountId,a.modalState="",a.errors={},n.create(e.SERVER_PATH+"/RiskAppetite",{type:a.riskAppetiteType,accountId:a.accountId}).then(function(e){a.questions=e.data.questions||[],a.disclaimer=e.data.disclaimer||void 0,t.setModalButtons([{label:"word.confirm",fn:a.submit,btnType:"primary",alignment:"right"}])}).finally(function(){a.isLoading=!1})}}]})}},function(e,t,n){e.exports=function(e){e.component("tutorialForm",{require:{parentForm:"^^form",formServerErrorsCtrl:"^^formServerErrors"},bindings:{tutorial:"=ngModel"},template:n(1469),controller:[function(){var e=this;e.$onInit=function(){if(angular.isUndefined(e.tutorial))throw"Invalid tutorial argument";e.getServerErrors=function(){return e.formServerErrorsCtrl.getServerErrors()||{}},e.onAnswered=function(t){"CHECKBOX"===t.inputType&&(t.userAnswer=[],(t.answers||[]).forEach(function(e){e.selected&&t.userAnswer.push(e.id)})),e.formServerErrorsCtrl.getServerErrors()&&e.formServerErrorsCtrl.getServerErrors()["question_"+t.id]&&delete e.formServerErrorsCtrl.getServerErrors()["question_"+t.id]}}}]})}},function(e,t){e.exports='<div name="{{$ctrl.tutorial.tutorialId}}">\n\t<div ng-if="$ctrl.tutorial.questions.length > 0" ng-repeat="question in $ctrl.tutorial.questions">\n\t\t<div class="row">\n\t\t\t<div class="col-xs-1 col-sm-1 col-md-1 col-lg-1">\n\t\t\t\t<p class="text-center">\n\t\t\t\t\t<span><i class="fa fas fa-angle-right"></i></span>\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t\t<div class="col-xs-11 col-sm-11 col-md-11 col-lg-11">\n\t\t\t\t<p ng-bind-html="question.text | renderHTML"></p>\n\t\t\t</div>\n\t\t\t<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" ng-repeat="answer in question.answers">\n\t\t\t\t<div class="row">\n\t\t\t\t\t<div class="col-xs-2 col-sm-1 col-md-1 col-lg-1" ng-if="::question.inputType === \'MULTIPLE_CHOICE\'">\n\t\t\t\t\t\t<p class="text-center">\n\t\t\t\t\t\t\t<input type="radio" name="{{ \'question_\' + question.id }}" ng-model="question.userAnswer" ng-value="{{answer.id}}" ng-change="$ctrl.onAnswered(question)" i-check />\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="col-xs-2 col-sm-1 col-md-1 col-lg-1" ng-if="::question.inputType === \'CHECKBOX\'">\n\t\t\t\t\t\t<p class="text-center">\n\t\t\t\t\t\t\t<input type="checkbox" name="{{ \'question_\' + question.id }}" ng-model="answer.selected" ng-change="$ctrl.onAnswered(question)" i-check />\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="col-xs-10 col-sm-11 col-md-11 col-lg-11">\n\t\t\t\t\t\t<p ng-bind-html="answer.text | renderHTML"></p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="alert alert-danger" ng-if="$ctrl.getServerErrors()[\'question_\' + question.id]">\n\t\t\t<p>{{\'field.error.\'+ $ctrl.getServerErrors()[\'question_\' + question.id] | translate}}</p>\n\t\t</div>\n\t\t<br>\n\t</div>\n</div>'},function(e,t,n){e.exports=function(e){n(1471)(e),n(1473)(e),n(1475)(e),n(1477)(e),n(1479)(e),n(1481)(e),n(1483)(e),n(1485)(e),n(1487)(e),n(1489)(e),n(1490)(e),n(1492)(e),n(1494)(e),n(1496)(e),n(1498)(e)}},function(e,t,n){e.exports=function(e){e.component("accountTypeDowngradeConfirmationModal",{template:n(1472),controller:["ModalService",function(e){var t=function(){e.closeModal()},n=function(){e.closeModal(!0)};this.$onInit=function(){var a;(a=[]).push({label:"accountTypeDowngradeRequest.label.changeAccountType",btnType:"primary",alignment:"right",fn:n}),a.push({label:"word.cancel",btnType:"default",alignment:"left",fn:t}),e.setModalButtons(a)}}]})}},function(e,t){e.exports='<div class="row">\n\t<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n\t\t<p class="text-center" translate="accountTypeDowngradeRequest.message.confirmation" translate-values="{ breakTag: \'<br>\' }"></p>\n\t</div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("folioMarginDowngradeModal",{template:n(1474),controller:["ResourceService","ModalService",function(t,n){var a=this,r=function(){a.modalResult.accountCapability.accountType=a.previousAccountType,n.closeModal()},i=function(){var e=a.question.answers.find(function(e){return"Yes"===e.text||"YES"===e.text});a.question.userAnswer={answerId:e.answerId,text:e.text},a.modalResult.questionnaire=a.questionnaire,n.closeModal()};a.$onInit=function(){a.previousAccountType=n.getModalData().previousAccountType,a.modalResult={},a.modalResult.accountCapability=n.getModalData().accountCapability||void 0,a.isLoading=!0,a.errors={},a.getServerErrors=function(){return a.errors},t.fetch(e.SERVER_PATH+"/Questionnaire/Name",{name:"Consent of Automated Liquidation"}).then(function(e){a.questionnaire=e.data,a.question=a.questionnaire.questions[0]},function(e){a.errors=e.errors,a.submissionState="FAILURE"}).finally(function(){var e;a.isLoading=!1,n.setModalResult(a.modalResult),e=[],"FAILURE"===a.submissionState?e.push({label:"word.close",btnType:"default",alignment:"right",fn:n.closeModal}):(e.push({label:"word.yes",btnType:"primary",alignment:"right",fn:i}),e.push({label:"word.no",btnType:"default",alignment:"left",fn:r})),n.setModalButtons(e)})}}]})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.isLoading"></loading-overlay>\n<div ng-if="!$ctrl.isLoading">\n\t\x3c!-- \n\t\tQuestionnaire Info\n\t--\x3e\n\t<div ng-if="$ctrl.submissionState !== \'SUCCESS\' && $ctrl.submissionState !== \'FAILURE\'">\n\t\t<div class="row" ng-repeat="question in $ctrl.questionnaire.questions">\n\t\t\t<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n\t\t\t\t<p translate="tradingAccountTypeProfile.warning.folio" translate-values="{ breakTag: \'<br><br>\' }"></p>\n\t\t\t</div>\n\t\t</div>\t\t\n\t</div>\n\t\x3c!-- \n\t\tFailure\n\t--\x3e\n\t<div ng-if="$ctrl.getServerErrors()[\'internal\'] || $ctrl.submissionState === \'FAILURE\'">\n\t\t<div align="center">\n\t        <i class="fa fa-4x fa-exclamation-triangle text-danger"></i>\n\t    </div>\n\t    <h3 class="text-center text-dark">{{ \'internal.error.\' + $ctrl.getServerErrors()[\'internal\'] | translate}}</h3>\n\t</div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("capabilityAcknowledgementModal",{template:n(1476),controller:["$translate","ModalService","CapabilityAcknowledgementService",function(e,t,n){var a=this,r=function(){a.isLoading=!0,a.modalResult.acknowledgedCapabilities=a.acknowledgements.map(function(e){return e.capability}),a.modalResult.acknowledgements=[],t.closeModal()},i=function(){t.closeModal()},o=function(){var e=[];0===Object.keys(a.errors).length?e.push({label:"word.continue",btnType:"primary",alignment:"right",fn:r}):e.push({label:"word.close",btnType:"default",alignment:"right",fn:i}),t.setModalButtons(e)};a.$onInit=function(){a.modalResult={},a.modalResult.accountCapability=t.getModalData().accountCapability||void 0,a.modalResult.acknowledgedCapabilities=[],a.modalResult.acknowledgements=a.acknowledgements=t.getModalData().acknowledgements||[],a.descriptors=[],a.capabilityPermissions={},a.isLoading=!0,a.errors={};var e=t.getModalData().selections||[];a.configureLater=function(r){a.isLoading=!0,n.fetchBundles(r).then(function(t){for(var n=a.acknowledgements.length;n--;)if(a.acknowledgements[n].capability===r)a.acknowledgements.splice(n,1);else if("FUTURE"===r&&"FOP"===a.acknowledgements[n].capability)a.acknowledgements.splice(n,1);else if("FOP"===r&&"FUTURE"===a.acknowledgements[n].capability){e.some(function(e){return"FUTURE"===e.productType&&(e.permissions||[]).some(function(e){return e.requested})})||a.acknowledgements.splice(n,1)}var i=t.bundles||[];for(n=0;n<e.length;n++)for(var o=e[n],s=0;s<(o.permissions||[]).length;s++){var l=o.permissions[s];if(l.requested)for(var c=0;c<i.length;c++){var u=i[c];l.code===u&&(l.requested=!1)}}a.modalResult.accountCapability&&"MARGIN"===r&&(a.modalResult.accountCapability.accountType="CASH")},function(e){a.errors=e.errors||{}}).finally(function(){if(0!==Object.keys(a.errors).length)return o(),void(a.isLoading=!1);var e=a.descriptors.findIndex(function(e){return e.capabilityType===r}),i=a.descriptors[e];if(angular.isUndefined(i))throw"Unable to record the user action!!!";a.descriptors.splice(e,1),i.action="DECLINE",n.updateWarning(i).then(function(e){a.isLoading=!1,0!==Object.keys(a.errors).length||0!==a.acknowledgements.length?o():t.closeModal()}).catch(function(e){a.isLoading=!1,a.errors=e.errors||{}})})},n.recordWarnings(a.acknowledgements).then(function(e){a.modalResult.descriptors=a.descriptors=e||[]},function(e){a.modalResult.descriptors=a.descriptors=[],a.errors=e.errors||{}}).finally(function(){a.isLoading=!1,t.setModalResult(a.modalResult),o()})}}]})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.isLoading"></loading-overlay>\n<div ng-if="!$ctrl.isLoading">\n\t<div class="alert alert-danger" ng-if="$ctrl.errors[\'internal\']">\n\t    <p>{{ \'internal.error.\' + $ctrl.errors[\'internal\'] | translate}}</p>\n\t</div>\n\t<capability-acknowledgement acknowledgements="$ctrl.acknowledgements" configure-later-fn="$ctrl.configureLater(capability)"></capability-acknowledgement>\n\t<div class="alert alert-info">\n\t\t<div class="row">\n\t\t\t<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n\t\t\t\t<p>{{ \'capability.message.acknowledgement\' | translate }}</p>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("capabilityLevelAcknowledgementModal",{template:n(1478),controller:["ModalService","CapabilityAcknowledgementService",function(e,t){var n=this,a=function(){n.isLoading=!0,n.modalResult.acknowledgedCapabilities=n.acknowledgements.map(function(e){return e.capability});for(var t=0;t<n.selections.length;t++)for(var a=n.selections[t],r=0;r<n.acknowledgements.length;r++){var i=n.acknowledgements[r];a.productType===i.capability&&(a.productType,a.accountSubCapability=i.qualifiedCapabilityLevel)}n.modalResult.acknowledgements=[],e.closeModal()};n.$onInit=function(){n.modalResult={},n.modalResult.acknowledgedCapabilities=[],n.modalResult.acknowledgements=n.acknowledgements=e.getModalData().acknowledgements||[],n.selections=e.getModalData().selections||[],n.descriptors=[],n.isLoading=!0,n.errors={},t.recordWarnings(n.acknowledgements).then(function(e){n.modalResult.descriptors=n.descriptors=e||[]},function(e){n.modalResult.descriptors=n.descriptors=[],n.errors=e.errors||{}}).finally(function(){var t;n.isLoading=!1,e.setModalResult(n.modalResult),(t=[]).push({label:"word.continue",btnType:"primary",alignment:"right",fn:a}),e.setModalButtons(t)})}}]})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.isLoading"></loading-overlay>\n<div ng-if="!$ctrl.isLoading">\n\t<capability-acknowledgement acknowledgements="$ctrl.acknowledgements"></capability-acknowledgement>\n</div>'},function(e,t,n){e.exports=function(e){e.component("financialInfoAcknowledgementModal",{template:n(1480),controller:["$translate","ModalService","CapabilityAcknowledgementService",function(e,t,n){var a=this,r=function(){a.isLoading=!0,a.modalResult.acknowledgedCapabilities=a.acknowledgements.map(function(e){return e.capability}),a.modalResult.acknowledgements=[],t.closeModal()};a.$onInit=function(){a.modalResult={},a.modalResult.acknowledgedCapabilities=[],a.modalResult.acknowledgements=a.acknowledgements=t.getModalData().acknowledgements||[],a.isLoading=!1,a.errors={},t.setModalResult(a.modalResult),t.setModalButtons([{label:"word.continue",btnType:"primary",alignment:"right",fn:r}])}}]})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.isLoading"></loading-overlay>\n<capability-acknowledgement acknowledgements="$ctrl.acknowledgements"></capability-acknowledgement>\n<div class="alert alert-info">\n\t<div class="row">\n\t\t<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n\t\t\t<p>{{ \'capability.message.infoChangeAcknowledgement\' | translate }}</p>\n\t\t</div>\n\t</div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("financialNetWorthConversionModal",{template:n(1482),controller:["ModalService","ResourceService",function(t,n){var a=this,r=function(){var e={annualIncome:a.convertedAnnualIncome,liquidNetWorth:a.convertedLiquidNetWorth,netWorth:a.convertedNetWorth};t.setModalResult(e),t.closeModal()},i=function(){t.closeModal()},o=function(e,t){return t.find(function(t){return parseFloat(t.range.minimum)<=e&&parseFloat(t.range.maximum)>e})};a.$onInit=function(){a.currency=t.getModalData().currency,a.selectedCurrency=t.getModalData().baseCurrency,a.liquidNetWorthRanges=t.getModalData().liquidNetWorthRanges||[],a.netWorthRanges=t.getModalData().netWorthRanges||[],a.annualIncomeRanges=t.getModalData().annualIncomeRanges||[],a.errors={},a.annualIncome=0,a.convertedAnnualIncome={},a.liquidNetWorth=0,a.convertedLiquidNetWorth={},a.netWorth=0,a.convertedNetWorth={},a.isLoading=!0;var s=0;a.getAssetRangeText=function(e){return e.rangeLabel},a.getMaxRange=function(e){if("AI"===e)return a.annualIncomeRanges[a.annualIncomeRanges.length-1].range.minimum/s+1;if("LNW"===e)return a.liquidNetWorthRanges[a.liquidNetWorthRanges.length-1].range.minimum/s+1;if("NW"===e)return a.netWorthRanges[a.netWorthRanges.length-1].range.minimum/s+1;throw"Invalid argument passed!!!"},a.findAnnualIncome=function(){var e=parseFloat(a.annualIncome.toString());a.convertedAnnualIncome=o(e*s,a.annualIncomeRanges)},a.findLiquidNetWorth=function(){var e=parseFloat(a.liquidNetWorth);a.convertedLiquidNetWorth=o(e*s,a.liquidNetWorthRanges)},a.findNetWorth=function(){var e=parseFloat(a.netWorth);a.convertedNetWorth=o(e*s,a.netWorthRanges)},a.onCurrencyChange=function(){a.selectedCurrency&&(a.isLoading=!0,n.fetch(e.SERVER_PATH+"/ExchangeRate",{from:a.selectedCurrency,to:a.currency}).then(function(e){s=e.data}).catch(function(e){a.errors=e.data.errors||{}}).finally(function(){a.annualIncome=0,a.convertedAnnualIncome={},a.liquidNetWorth=0,a.convertedLiquidNetWorth={},a.netWorth=0,a.convertedNetWorth={},a.isLoading=!1}))},n.fetch(e.SERVER_PATH+"/FinancialNetWorthCurrency").then(function(e){a.allowedCurrencies=e.data||[],a.selectedCurrency=a.allowedCurrencies[0]}).catch(function(e){a.errors=e.data.errors||{}}).finally(function(){var e;a.isLoading=!1,(e=[]).push({label:"word.confirmAndContinue",btnType:"primary",alignment:"right",fn:r}),e.push({label:"word.cancel",btnType:"default",alignment:"left",fn:i}),t.setModalButtons(e)})}}]}),e.directive("amRangeInput",[function(){return{require:"ngModel",link:function(e,t,n,a){a.$parsers.push(function(e){return""+e}),a.$formatters.push(function(e){return parseFloat(e)})}}}])}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.isLoading"></loading-overlay>\n<div ng-show="!$ctrl.isLoading" class="row" ng-form="$ctrl.financialNetWorthConversionForm">\n\t<div class="col">\n\t\t<div class="form-currency-conversion">\n\t\t\t<p>{{ \'financialData.labelDesc.currencyConversion\' | translate:{from: (\'currency.\' + $ctrl.selectedCurrency | translate), to: (\'currency.\' + $ctrl.currency | translate)} }}</p>\n\t\t\t<am-select name="currency" ng-model="$ctrl.selectedCurrency" options="$ctrl.allowedCurrencies" option-key="\'currency.\'" model-listener="$ctrl.onCurrencyChange()" hide-empty-option="true"></am-select>\n\t\t\t<br>\n\t\t\t<div class="form-group" ng-if="::$ctrl.annualIncomeRanges.length > 0">\n\t\t\t\t<div class="row">\n\t\t\t\t\t<div class="col">\n\t\t\t\t\t\t<label class="control-label">{{\'financialInfo.label.annualNetIncome\' | translate}}</label>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="row">\n\t\t\t\t\t<div class="col-12 col-sm-5">\n\t\t\t\t\t\t<div class="input-group">\n\t\t\t\t\t\t\t<am-input name="annualIncome" type="text" ng-model="$ctrl.annualIncome" input-mask-alias="amountPositive" model-listener="$ctrl.findAnnualIncome()" is-required="true"></am-input>\n\t\t\t\t\t\t\t<div class="input-group-append">\n\t\t\t\t\t\t\t\t<span class="input-group-text">{{$ctrl.selectedCurrency}}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<input type="range" am-range-input name="annualIncomeRange" ng-model="$ctrl.annualIncome" min="0" max="{{ $ctrl.getMaxRange(\'AI\') }}" ng-change="$ctrl.findAnnualIncome()" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="col-12 col-sm-2">\n\t\t\t\t\t\t<div class="icon-conversion-arrow"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="col-12 col-sm-5">\n\t\t\t\t\t\t<div class="input-group active">\n\t\t\t\t\t\t\t<input class="form-control" placeholder="{{$ctrl.convertedAnnualIncome.rangeLabel}}" disabled/>\n\t\t\t\t\t\t\t<div class="input-group-append">\n\t\t\t\t\t\t\t\t<span class="input-group-text">{{$ctrl.currency}}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="form-group" ng-if="::$ctrl.netWorthRanges.length > 0">\n\t\t\t\t<div class="row">\n\t\t\t\t\t<div class="col">\n\t\t\t\t\t\t<label class="control-label">{{\'financialInfo.label.netWorth\' | translate }}</label>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="row">\n\t\t\t\t\t<div class="col-12 col-sm-5">\n\t\t\t\t\t\t<div class="input-group">\n\t\t\t\t\t\t\t<am-input name="netWorth" type="text" ng-model="$ctrl.netWorth" input-mask-alias="amountPositive" model-listener="$ctrl.findNetWorth()" is-required="true"></am-input>\n\t\t\t\t\t\t\t<div class="input-group-append">\n\t\t\t\t\t\t\t\t<span class="input-group-text" id>{{$ctrl.selectedCurrency}}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<input type="range" am-range-input name="netWorthRange" ng-model="$ctrl.netWorth" min="0" max="{{ $ctrl.getMaxRange(\'NW\') }}" ng-change="$ctrl.findNetWorth()">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="col-12 col-sm-2">\n\t\t\t\t\t\t<div class="icon-conversion-arrow"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="col-12 col-sm-5">\n\t\t\t\t\t\t<div class="input-group active">\n\t\t\t\t\t\t\t<input class="form-control" placeholder="{{$ctrl.convertedNetWorth.rangeLabel}}" disabled/>\n\t\t\t\t\t\t\t<div class="input-group-append">\n\t\t\t\t\t\t\t\t<span class="input-group-text">{{$ctrl.currency}}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="form-group" ng-if="::$ctrl.liquidNetWorthRanges.length > 0">\n\t\t\t\t<div class="row">\n\t\t\t\t\t<div class="col">\n\t\t\t\t\t\t<label class="control-label">{{\'financialInfo.label.liquidNetWorth\' | translate}}</label>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="row">\n\t\t\t\t\t<div class="col-12 col-sm-5">\n\t\t\t\t\t\t<div class="input-group">\n\t\t\t\t\t\t\t<am-input name="liquidNetWorth" type="text" ng-model="$ctrl.liquidNetWorth" input-mask-alias="amountPositive" model-listener="$ctrl.findLiquidNetWorth()" is-required="true"></am-input>\n\t\t\t\t\t\t\t<div class="input-group-append">\n\t\t\t\t\t\t\t\t<span class="input-group-text" id>{{$ctrl.selectedCurrency}}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<input type="range" am-range-input name="liquidNetWorthRange" ng-model="$ctrl.liquidNetWorth" min="0" max="{{ $ctrl.getMaxRange(\'LNW\') }}" ng-change="$ctrl.findLiquidNetWorth()">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="col-12 col-sm-2">\n\t\t\t\t\t\t<div class="icon-conversion-arrow"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="col-12 col-sm-5">\n\t\t\t\t\t\t<div class="input-group active">\n\t\t\t\t\t\t\t<input class="form-control" placeholder="{{$ctrl.convertedLiquidNetWorth.rangeLabel}}" disabled/>\n\t\t\t\t\t\t\t<div class="input-group-append">\n\t\t\t\t\t\t\t\t<span class="input-group-text">{{$ctrl.currency}}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("capabilityErrorModal",{template:n(1484),controller:["$translate","ModalService","CapabilityErrorModalService","InvestmentConfigService",function(e,t,n,a){var r=this;r.$onInit=function(){r.exams=t.getModalData().exams||[],r.capabilityExams=t.getModalData().capabilityExams||[],r.riskAppetites=t.getModalData().riskAppetites||[],r.mandatoryTasks=t.getModalData().mandatoryTasks||[],r.hardStopWarnings=t.getModalData().hardStopWarnings||[],r.customErrors=t.getModalData().customErrors||[],r.skipDisclosure=t.getModalData().skipDisclosure||!1,r.isLoading=!1,r.errors={},r.experiences={};var a=t.getModalData().selections||[],i=t.getModalData().financialInfo||{},o=t.getModalData().selectionRules||{},s=t.getModalData().accountCapability||void 0,l=t.getModalData().accountCapabilityRules||void 0,c=t.getModalData().globalAccountCapability||void 0,u=t.getModalData().globalAccountId||void 0,d=t.getModalData().pageStyle||void 0;r.configureExamLater=function(e){r.isLoading=!0,n.fetchBundles(e).then(function(p){var g=r.exams.indexOf(e);r.exams.splice(g,1),"BONDS_TEACHING_EXAM"===e&&(r.riskAppetites.length=0);for(var f=p.bundles||[],m=0;m<a.length;m++)for(var v=a[m],h=0;h<(v.permissions||[]).length;h++){var b=v.permissions[h];if(b.requested)for(var y=0;y<f.length;y++){var D=f[y];b.code===D&&(b.requested=!1)}}n.validate(i,a,o,s,l,c,u).then(function(e){r.errors={},r.exams=[],r.capabilityExams=[],r.riskAppetites=[],r.mandatoryTasks=[],r.hardStopWarnings=[],r.customErrors=[]},function(e){r.errors=e.errors||{},r.exams=e.exams||[],r.capabilityExams=e.capabilityExams||[],r.riskAppetites=e.riskAppetites||[],r.mandatoryTasks=e.mandatoryTasks||[],r.hardStopWarnings=e.hardStopWarnings||[],r.customErrors=e.customErrors||[]}).finally(function(){r.isLoading=!1,t.setModalResult({exams:r.exams,capabilityExams:r.capabilityExams,riskAppetites:r.riskAppetites,customErrors:r.customErrors,mandatoryTasks:r.mandatoryTasks,hardStopWarnings:r.hardStopWarnings,pageStyle:"SIMPLIFIED"===d&&"STOCK_TEACHING_EXAM"===e?"GENERAL":d}),0===Object.keys(r.errors).length&&0===r.exams.length&&0===r.capabilityExams.length&&0===r.customErrors.length&&0===r.riskAppetites.length&&0===r.mandatoryTasks.length&&t.closeModal()})},function(e){r.errors=e.errors||{},r.isLoading=!1})},r.completeRiskAppetite=function(n){var a={title:e.instant("riskAppetite.type."+n),templateUrl:"risk-appetite-questions.component",modalData:{riskAppetiteType:n}};t.openModal(a)};for(var p=0;p<Object.keys(i.experiences||{}).length;p++){var g=i.experiences[Object.keys(i.experiences)[p]];"MARGIN"===g.assetType&&(r.experiences[g.assetType]=g)}for(p=0;p<(a||[]).length;p++){var f=a[p];"UNKNOWN"!==f.assetType&&"MARGIN"!==f.assetType&&(r.experiences[f.assetType]=f.experience)}}}]})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.isLoading"></loading-overlay>\n\x3c!-- \n\tInternal Errors\n--\x3e\n<div class="alert alert-danger" ng-if="$ctrl.errors[\'internal\']">\n    <p>{{ \'internal.error.\' + $ctrl.errors[\'internal\'] | translate}}</p>\n</div>\n\x3c!-- \n\tCustom Errors\n--\x3e\n<financial-info-error ng-if="$ctrl.customErrors.length > 0" errors="$ctrl.customErrors" skip-disclosure="$ctrl.skipDisclosure" ></financial-info-error>\n\x3c!-- \n\tExams\n--\x3e\n<am-exam ng-if="$ctrl.exams.length > 0" exam-types="$ctrl.exams" configure-later-fn="$ctrl.configureExamLater(exam)"></am-exam>\n\x3c!-- \n\tCapability Exams\n--\x3e\n<capability-exam ng-if="$ctrl.capabilityExams.length > 0" exams="$ctrl.capabilityExams" configure-later-fn="$ctrl.configureExamLater(exam)"></capability-exam>\n\x3c!-- \n\tRisk Appetite\n--\x3e\n<risk-appetite ng-if="$ctrl.riskAppetites.length > 0" risk-appetite-types="$ctrl.riskAppetites"></risk-appetite>\n\x3c!-- \n\tCapability Mandatory Tasks\n--\x3e\n<capability-mandatory-task ng-if="$ctrl.mandatoryTasks.length > 0" mandatory-tasks="$ctrl.mandatoryTasks" experiences="$ctrl.experiences"></capability-mandatory-task>\n\x3c!-- \n\tHard Stop Warnings\n--\x3e\n<hard-stop-warning ng-if="$ctrl.hardStopWarnings.length > 0" warnings="$ctrl.hardStopWarnings"></hard-stop-warning>'},function(e,t,n){e.exports=function(e){e.component("financialInfoErrorModal",{template:n(1486),controller:["ModalService",function(e){var t=this;t.$onInit=function(){t.modalResult={},t.modalResult.skippableCapabilities=[],t.modalResult.skippableErrors=t.skippableErrors=e.getModalData().skippableErrors||[],t.exams=e.getModalData().exams||[],t.capabilityExams=e.getModalData().capabilityExams||[],t.riskAppetites=e.getModalData().riskAppetites||[],t.mandatoryTasks=e.getModalData().mandatoryTasks||[],t.hardStopWarnings=e.getModalData().hardStopWarnings||[],t.errors=e.getModalData().errors||[],t.experiences=e.getModalData().experiences||void 0,t.removeCapability=function(n){t.modalResult.skippableCapabilities.push(n),t.modalResult.skippableErrors=Object.keys(t.modalResult.skippableErrors).filter(function(e){return e!==n}).reduce(function(e,n){return e[n]=t.modalResult.skippableErrors[n],e},{}),0===t.exams.length&&0===t.capabilityExams.length&&0===t.riskAppetites.length&&0===t.errors.length&&0===Object.keys(t.modalResult.skippableErrors).length&&e.closeModal()},e.setModalResult(t.modalResult)}}]})}},function(e,t){e.exports='\x3c!-- \n\tCustom Errors\n--\x3e\n<financial-info-error ng-if="::$ctrl.errors.length > 0" errors="$ctrl.errors"></financial-info-error>\n\x3c!-- \n\tExams\n--\x3e\n<am-exam exam-types="$ctrl.exams" ng-if="::$ctrl.exams.length > 0"></am-exam>\n\x3c!-- \n\tCapability Exams\n--\x3e\n<capability-exam ng-if="$ctrl.capabilityExams.length > 0" exams="$ctrl.capabilityExams"></capability-exam>\n\x3c!-- \n\tRisk Appetite\n--\x3e\n<risk-appetite risk-appetite-types="$ctrl.riskAppetites" ng-if="::$ctrl.riskAppetites.length > 0"></risk-appetite>\n\x3c!-- \n\tCapability Mandatory Tasks\n--\x3e\n<capability-mandatory-task ng-if="$ctrl.mandatoryTasks.length > 0" mandatory-tasks="$ctrl.mandatoryTasks" experiences="$ctrl.experiences"></capability-mandatory-task>\n\x3c!-- \n\tHard Stop Warnings\n--\x3e\n<hard-stop-warning ng-if="$ctrl.hardStopWarnings.length > 0" warnings="$ctrl.hardStopWarnings"></hard-stop-warning>\n\x3c!-- \n\tSkippable Errors\n--\x3e\n<capability-skippable-errors ng-if="($ctrl.skippableErrors | objectLength) > 0" errors="$ctrl.skippableErrors" skip-fn="$ctrl.removeCapability(capability)"></capability-skippable-errors>'},function(e,t,n){e.exports=function(e){e.component("knowledgeGuidanceModal",{template:n(1488),controller:["ModalService","KnowledgeGuidanceService",function(e,t){var n=this;n.$onInit=function(){n.asset=e.getModalData().asset||"",n.errors={},n.isLoading=!0,t.fetch(n.asset).then(function(e){n.questions=e.questions||[],n.correctAnswers=e.correctAnswers||{}},function(e){n.errors=e.errors||{}}).finally(function(){n.isLoading=!1})}}]})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.isLoading"></loading-overlay>\n\x3c!--\n    Failure Note\n--\x3e\n<div ng-if="$ctrl.errors[\'internal\']" class="alert alert-danger">\n    <p class="text-center">{{ \'internal.error.\' + $ctrl.errors[\'internal\'] | translate}}</p>\n</div>\n\n<div class="alert alert-info">\n\t<p>\n\t\t<strong>{{ (\'knowledgeGuidance.label.extensive\' | translate) + \':\' }}</strong>\n\t\t<span>{{ \'knowledgeGuidance.extensive.\' + $ctrl.asset | translate }}</span>\n\t</p>\n</div>\n<div class="alert alert-info">\n\t<p>\n\t\t<strong>{{ (\'knowledgeGuidance.label.no\' | translate) + \':\' }}</strong>\n\t\t<span>{{ \'knowledgeGuidance.no.\' + $ctrl.asset | translate }}</span>\n\t</p>\n</div>\n<div class="alert alert-info">\n\t<p>\n\t\t<strong>{{ (\'knowledgeGuidance.label.good\' | translate) + \':\' }}</strong>\n\t\t<span>{{ \'knowledgeGuidance.good.\' + $ctrl.asset | translate }}</span>\n\t</p>\n</div>\n<div ng-if="$ctrl.questions.length > 0" ng-repeat="question in $ctrl.questions">\n\t<p>\n\t\t{{ ($index + 1) + \'.\'}}\n\t\t<span class="margin-left-10">{{ \'knowledgeGuidance.\' + $ctrl.asset + \'.\' + question.name + \'.title\' | translate }}</span>\n\t</p>\n\t<div class="row" ng-repeat="option in question.options">\n\t\t<div class="col-xs-2 col-sm-1 col-md-1 col-lg-1">\n\t\t\t<p class="text-center">\n\t\t\t\t<input ng-model="question.answer" type="radio" value="{{option.value}}" i-check required />\n\t\t\t</p>\n\t\t</div>\n\t\t<div class="col-xs-10 col-sm-11 col-md-11 col-lg-11">\n\t\t\t<p>{{ \'knowledgeGuidance.\' + $ctrl.asset + \'.\' + question.name + \'.\' + option.value | translate }}</p>\n\t\t</div>\n\t</div>\n\t<br ng-if="!$last">\n</div>\n<br>\n<hr>\n<br>\n<div ng-if="($ctrl.correctAnswers | objectLength) > 0">\n\t<p>\n\t\t<a href="javascript:void(0);" data-toggle="collapse" data-target="#answers" role="button" aria-expanded="false" arai-controls="answers">\n\t\t\t{{ \'knowledgeGuidance.label.displayAnswers\' | translate }}\n\t\t</a>\n\t</p>\n\t<br>\n\t<div class="collapse" id="answers">\n\t\t<div class="card card-body">\n\t\t\t<p ng-repeat="(questionId, answer) in $ctrl.correctAnswers">\n\t\t\t\t<strong>{{ \'knowledgeGuidance.question.\' + questionId | translate }}</strong>\n\t\t\t\t<span>{{ \': \' }}</span>\n\t\t\t\t<span>{{ \'knowledgeGuidance.answer.\' + answer | translate }}</span>\n\t\t\t</p>\n\t\t</div>\n\t</div>\n</div>'},function(e,t){e.exports=function(e){e.controller("ViewInstitutionalServiceCtrl",["ResourceService",function(t){var n=this;n.$onInit=function(){n.isLoading=!0,t.fetch(e.SERVER_PATH+"/InstitutionalService").then(function(e){n.institutionalServices=e.data.institutionalServices},function(e){n.errors=e.data.errors}).finally(function(){n.isLoading=!1})}}])}},function(e,t,n){e.exports=function(e){e.component("tradingPermissionSelectionModal",{template:n(1491),controller:["$translate","ModalService",function(e,t){var n=this,a=function(e){return e.requested},r=function(e){return e.disabled},i=function(){t.closeModal(n.permissions)};n.$onInit=function(){var e;n.permissions=t.getModalData().permissions||[],n.regionPermissions={},n.allRegionalPermissions={},n.onChange=function(e,t){e.downgraded=e.qualified&&!e.requested,n.allRegionalPermissions[t].requested=n.regionPermissions[t].every(a);var r=n.permissions.find(function(e){return"US_FRACTIONAL_SHARES"===e.code});"IB_FRAC_STK"!==e.code||angular.isUndefined(r)||(r.requested=e.requested,r.downgraded=r.qualified&&!r.requested)},n.enableRegionalPermissions=function(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.disabled||(r.requested=n.allRegionalPermissions[e].requested,r.downgraded=r.qualified&&!r.requested)}},n.regionPermissions=function(e,t){for(var n={},a=e.reduce(function(e,n){var a=n[t];return e[a]=e[a]||[],e[a].push(n),e},{}),r=Object.keys(a),i=0;i<r.length;i++)n[r[i]]=a[r[i]];return n}(n.permissions,"region")||{},Object.keys(n.regionPermissions).forEach(function(e){var t=n.regionPermissions[e];n.allRegionalPermissions[e]=n.allRegionalPermissions[e]||{},n.allRegionalPermissions[e].requested=t.every(a),n.allRegionalPermissions[e].disabled=t.every(r)}),(e=[]).push({label:"word.save",btnType:"primary",alignment:"right",fn:i}),t.setModalButtons(e)}}]})}},function(e,t){e.exports='<p class="tp-title">{{ \'tradingPermissionProfile.label.tradingLocations\' | translate }}</p>\n<div class="tp-locations">\n\t<div ng-repeat="(region, permissions) in $ctrl.regionPermissions">\n\t\t<p ng-if="($ctrl.regionPermissions | objectLength) > 1">\n\t\t\t<input type="checkbox" ng-model="$ctrl.allRegionalPermissions[region].requested" i-check ng-disabled="$ctrl.allRegionalPermissions[region].disabled" ng-change="$ctrl.enableRegionalPermissions(region, permissions)">\n\t\t\t<strong>{{ \'tradingExchange.region.\' + region | translate }}</strong>\n\t\t</p>\n\t\t<div class="row">\n\t\t\t<div ng-if="::!permission.hidden" name="{{ permission.code }}" class="col-xs-12 col-sm-6 col-md-6 col-lg-6" ng-repeat="permission in permissions">\n\t\t\t\t<p>\n\t\t\t\t\t<input type="checkbox" ng-model="permission.requested" i-check ng-disabled="permission.disabled" ng-change="$ctrl.onChange(permission, region)">\n\t\t\t\t\t<span class="margin-left-5">{{ \'tradingExchange.location.\' + permission.location | translate }}</span>\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t</div>\n\t\t<br ng-if="!$last">\n\t</div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("knowledgeQuizModal",{template:n(1493),controller:["ModalService","KnowledgeQuizService",function(e,t){var n=this,a=function(){return n.isLoading},r=function(){n.isLoading=!0;var a=angular.isDefined(n.disclosure)&&null!==n.disclosure?n.disclosure.id.fileId:0;t.submit(n.knowledgeTutorial.questions,n.quiz.formNumber,a).then(function(t){e.setModalResult(t),n.modalState="SUCCESS"},function(e){e.errors.internal?n.modalState="FAILURE":n.errors=e.errors}).finally(function(){i(),n.isLoading=!1})},i=function(){var t=[];"FAILURE"===n.modalState||"SUCCESS"===n.modalState?t.push({label:"word.close",alignment:"left",fn:e.closeModal}):t.push({label:"word.submit",alignment:"right",fn:r,btnType:"primary",isDisabled:a}),e.setModalButtons(t)};n.$onInit=function(){if(n.quiz=e.getModalData().quiz||void 0,angular.isUndefined(n.quiz))throw"Invalid quiz detected!!!";n.errors={},n.isLoading=!0,t.fetchById(n.quiz.tutorialId).then(function(e){n.knowledgeTutorial=e.tutorial,n.disclosure=e.disclosure||void 0,n.modalState="INIT"},function(e){n.modalState="FAILURE"}).finally(function(){i(),n.isLoading=!1})}}]})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.isLoading"></loading-overlay>\n<div ng-if="!$ctrl.isLoading">\n\t<div class="alert alert-success" ng-if="$ctrl.modalState === \'SUCCESS\'">\n\t\t<p class="text-center" translate="capabilityMandatoryTask.message.success" translate-value-task="{{ (\'form.title.\' + $ctrl.quiz.formNumber | translate) }}"></p>\n\t</div>\n\t\n\t<div class="alert alert-danger" ng-if="$ctrl.modalState === \'FAILURE\'">\n\t\t<p>{{ \'internal.error.request_process\' | translate }}</p>\n\t</div>\n\t\n\t<div ng-form="$ctrl.tutorialForm" ng-if="$ctrl.modalState === \'INIT\'">\n\t\t<div ng-if="::$ctrl.disclosure">\n\t        <am-agreement agreement="$ctrl.disclosure" hide-hr="true"></am-agreement>\n\t    </div>\n\t    <div ng-if="$ctrl.knowledgeTutorial" form-server-errors="$ctrl.errors">\n\t    \t<tutorial-form name="{{$ctrl.knowledgeTutorial.tutorialId}}" ng-model="$ctrl.knowledgeTutorial"></tutorial-form>\n\t    </div>\n\t</div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("capabilityRiskAcceptanceTaskModal",{template:n(1495),controller:["$q","ModalService","ResourceService","WarningDescriptorService","CapabilityAcknowledgementService",function(t,n,a,r,i){var o=this,s=e.SERVER_PATH+"/RiskAcceptanceTaskCompletion",l=function(){return o.isLoading||o.counter>0},c=function(){var e;o.isLoading=!0,(e=o.riskAcceptanceTasks.map(function(e){return a.create(s,{formNumber:e.formNumber})}),t.all(e)).then(function(e){o.modalResult.acknowledgedCapabilities=o.riskAcceptanceTasks.map(function(e){return e.capability}),o.modalResult.riskAcceptanceTasks=[],n.closeModal()}).catch(function(e){return o.modalState="FAILURE"}).finally(function(){o.isLoading=!1})},u=function(e){o.isLoading=!0,i.fetchBundles(e).then(function(t){var n=o.riskAcceptanceTasks.findIndex(function(t){return t.capability===e});o.riskAcceptanceTasks.splice(n,1);for(var a=t.bundles||[],r=0;r<o.selections.length;r++)for(var i=o.selections[r],s=0;s<(i.permissions||[]).length;s++){var l=i.permissions[s];if(l.requested)for(var c=0;c<a.length;c++){var u=a[c];l.code===u&&(l.requested=!1)}}o.modalResult.accountCapability&&"MARGIN"===e&&(o.modalResult.accountCapability.accountType="CASH")},function(e){o.modalState="FAILURE"}).finally(function(){if("FAILURE"===o.modalState)return d(),void(o.isLoading=!1);var t=o.descriptors.findIndex(function(t){return t.capabilityType===e}),a=o.descriptors[t];if(angular.isUndefined(a))throw"Unable to record the user action!!!";o.descriptors.splice(t,1),a.action="DECLINE",r.updateWarning(a).catch(function(e){o.modalState="FAILURE"}).finally(function(){d(),0===o.riskAcceptanceTasks.length&&n.closeModal(),o.isLoading=!1})})},d=function(){var e=[];if("FAILURE"===o.modalState)return e.push({label:"word.close",alignment:"left",fn:n.closeModal}),e;o.counter>0?e.push({alignment:"right",fn:c,btnType:"primary",btnIcon:"fa-spin fa-spinner",isDisabled:l}):e.push({label:"word.continue",alignment:"right",fn:c,btnType:"primary"}),n.setModalButtons(e)};o.$onInit=function(){o.modalResult={},o.modalResult.accountCapability=n.getModalData().accountCapability||void 0,o.modalResult.acknowledgedCapabilities=[],o.modalResult.riskAcceptanceTasks=o.riskAcceptanceTasks=n.getModalData().riskAcceptanceTasks||[],o.descriptors=[],o.capabilityPermissions={},o.isLoading=!0,o.counter=60,o.selections=n.getModalData().selections||[],0===o.selections.length||angular.isUndefined(o.modalResult.accountCapability)?o.configureLater=void 0:o.configureLater=u,r.recordRiskAcceptanceTaskWarnings(o.riskAcceptanceTasks).then(function(e){o.modalResult.descriptors=o.descriptors=e||[],o.modalState="INIT"},function(e){o.modalState="FAILURE"}).finally(function(){o.isLoading=!1,n.setModalResult(o.modalResult),d()})},o.$doCheck=function(){o.previousCounter!==o.counter&&0===o.counter&&d(),o.previousCounter=o.counter}}]})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.isLoading"></loading-overlay>\n<div ng-if="!$ctrl.isLoading">\n\t<div ng-if="$ctrl.modalState === \'FAILURE\'" class="alert alert-danger" >\n\t\t<p>{{ \'internal.error.request_process\' | translate }}</p>\n\t</div>\n\t<div ng-if="$ctrl.modalState === \'INIT\'">\n\t\t<capability-risk-acceptance-tasks ng-if="::!$ctrl.configureLater" risk-acceptance-tasks="$ctrl.riskAcceptanceTasks" counter="$ctrl.counter"></capability-risk-acceptance-tasks>\n\t\t<capability-risk-acceptance-tasks ng-if="::$ctrl.configureLater" risk-acceptance-tasks="$ctrl.riskAcceptanceTasks" counter="$ctrl.counter" configure-later-fn="$ctrl.configureLater(capability)"></capability-risk-acceptance-tasks>\n\t</div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("riskAppetiteQuestionnaire",{template:n(1497),controller:["$filter","WHITE_BRANDING_DETAILS","ModalService","ResourceService","AgreementService","FormInputService",function(t,n,a,r,i,o){var s=this,l=function(){return s.isLoading},c=function(){var t=a.getModalButtons();a.setModalButtons([o.getLoadingButton()]),i.record(s.agreementRecord).then(function(t){s.isLoading=!0,s.errors=void 0;var n={type:s.riskAppetiteType,questionnaire:s.questionnaire,agreementData:t};r.update(e.SERVER_PATH+"/RiskAppetiteQuestionnaire",n).then(function(e){s.modalState="SUCCESS",s.investmentLimit=e.data.investmentLimit||void 0,s.capabilityDowngrades=e.data.capabilityDowngrades||[]}).catch(function(e){e.data.errors.internal?s.modalState="FAILURE":s.errors=e.data.errors}).finally(function(){a.setModalResult(s.modalState),u(),s.isLoading=!1})}).catch(function(e){return a.setModalButtons(t)})},u=function(){var e=[];"FAILURE"===s.modalState||"SUCCESS"===s.modalState?e.push({label:"word.close",alignment:"left",fn:a.closeModal}):e.push({label:"word.submit",alignment:"right",fn:c,btnType:"primary",isDisabled:l}),a.setModalButtons(e)};s.$onInit=function(){if(s.riskAppetiteType=a.getModalData().riskAppetiteType,angular.isUndefined(s.riskAppetiteType))throw"Invalid Risk Appetite Type detected!!!";s.context=a.getModalData().context||void 0,s.branded=n.isBranded()||!1,s.isLoading=!0,s.errors={},s.getLimit=function(){return angular.isUndefined(s.investmentLimit)?"":t("currency")(s.investmentLimit.amount,s.investmentLimit.currencyType+" ",0)},r.fetch(e.SERVER_PATH+"/RiskAppetiteQuestionnaire",{type:s.riskAppetiteType}).then(function(e){s.questionnaire=e.data.questionnaire||void 0,s.agreementRecord=e.data.record||void 0,s.modalState="INIT"},function(e){s.modalState="FAILURE"}).finally(function(){u(),s.isLoading=!1})}}]})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.isLoading"></loading-overlay>\n<div ng-if="!$ctrl.isLoading">\n\t\x3c!-- \n\t\tSUCCESS\n\t--\x3e\n\t<div ng-if="$ctrl.modalState === \'SUCCESS\'">\n\t\t<div class="alert alert-success">\n\t\t\t<p class="text-center" translate="riskAppetite.message.success" translate-values="{riskAppetite: (\'riskAppetite.type.\' + $ctrl.riskAppetiteType | translate)}"></p>\n\t\t</div>\n\t\t<div class="notes" ng-if="$ctrl.capabilityDowngrades.length === 0">\n\t\t\t<p translate="riskAppetite.message.investmentLimit" translate-values="{investmentLimit: $ctrl.getLimit(), startStrongTag: \'<strong>\', endStrongTag: \'</strong>\' }"></p>\n\t\t\t<p ng-if="!$ctrl.branded" translate="riskAppetite.message.transactions" translate-values="{ linkStart: \'<a href=&quot;https://www.ibkr.com/faq?id=421773600&quot; target=&quot;_blank&quot;>\',  linkEnd: \'</a>\' }"></p>\n\t\t\t<p>{{ \'riskAppetite.message.changes\' | translate }}</p>\n\t\t</div>\n\t\t<div ng-if="::$ctrl.context === \'UPDATE\' && $ctrl.capabilityDowngrades.length > 0" class="notes">\n\t\t\t<p>{{ \'riskAppetite.message.downgrade\' | translate }}</p>\n\t\t</div>\n\t</div>\n\t\x3c!-- \n\t\tFAILURE\n\t--\x3e\n\t<div class="alert alert-danger" ng-if="$ctrl.modalState === \'FAILURE\'">\n\t\t<p>{{ \'internal.error.request_process\' | translate }}</p>\n\t</div>\n\t\x3c!-- \n\t\tINIT\n\t--\x3e\n\t<div ng-form="$ctrl.riskAppetiteQuestionnaireForm" ng-if="$ctrl.modalState === \'INIT\'" form-server-errors="$ctrl.errors">\n\t\t\x3c!-- \n\t\t\tNotes \n\t\t--\x3e\n\t\t<div class="alert alert-warning" ng-if="::$ctrl.riskAppetiteType === \'VA_RISK_APPETITE\'">\n\t\t\t<div class="text-sm">\n\t\t\t\t<p>\n\t\t\t\t\t<strong>{{ \'word.Notes\' | translate }}</strong>\n\t\t\t\t</p>\n\t\t\t\t<p>{{ \'riskAppetite.notes.VA_RISK_APPETITE.message\' | translate }}</p>\n\t\t\t\t<ul>\n\t\t\t\t\t<li>{{ \'riskAppetite.notes.VA_RISK_APPETITE.equity\' | translate }}</li>\n\t\t\t\t\t<li>{{ \'riskAppetite.notes.VA_RISK_APPETITE.netWorth\' | translate }}</li>\n\t\t\t\t</ul>\n\t\t\t\t<p ng-if="::!$ctrl.branded" translate="riskAppetite.notes.VA_RISK_APPETITE.reference" translate-values="{ linkStart: \'<a href=&quot;https://www.ibkr.com/faq?id=421773600&quot; target=&quot;_blank&quot;>\',  linkEnd: \'</a>\' }"></p>\n\t\t\t</div>\n\t\t</div>\n\t\t\x3c!-- \n\t\t\tQuestionnaire\n\t\t--\x3e\n\t    <questionnaire-form ng-if="$ctrl.questionnaire" name="{{$ctrl.questionnaire.name}}" ng-model="$ctrl.questionnaire" display-description="true"></questionnaire-form>\n\t\t\x3c!-- \n\t\t\tDiclosure Record\n\t\t--\x3e\n\t\t<agreement-record ng-if="$ctrl.agreementRecord" record="$ctrl.agreementRecord"></agreement-record>\n\t</div>\n</div>'},function(e,t){e.exports=function(e){e.component("marginUpgradeModal",{templateUrl:e.WEBAPP_ROOT+"/modals/marginUpgradeModal.html",controller:["ModalService",function(e){var t=this,n=function(){e.closeModal()},a=function(){t.displayError=!1,t.form?e.closeModal(t.form):t.displayError=!0};t.$onInit=function(){var r;t.form=e.getModalData().form||void 0,t.marginUpgradeForms=e.getModalData().marginUpgradeForms||[],(r=[]).push({alignment:"left",btnType:"default",label:"word.cancel",fn:n}),r.push({alignment:"right",btnType:"primary",label:"word.confirm",fn:a}),e.setModalButtons(r)}}]})}},function(e,t,n){e.exports=function(e){n(1500)(e),n(1517)(e),n(1523)(e),n(1537)(e),n(1547)(e),n(1562)(e),n(1607)(e),n(1674)(e),n(1676)(e),n(1677)(e),n(1678)(e),n(1679)(e)}},function(e,t,n){e.exports=function(e){n(1501)(e),n(1508)(e),n(1509)(e),n(1511)(e),n(1513)(e),n(1515)(e)}},function(e,t,n){e.exports=function(e){n(1502)(e),n(1504)(e),n(1506)(e)}},function(e,t,n){e.exports=function(e){e.component("asicCfdTutorialExampleStep",{template:n(1503),controller:["DynamicSequenceService",function(e){this.$onInit=function(){e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{onClick:e.stepForward}})}}]})}},function(e,t){e.exports="<div page-structure>\n\t<h4>{{ 'asic.tutorial.cfd.example.header1' | translate }}</h4>\n\t<p>{{ 'cfd.example.para1' | translate }}</p>\n\t<h4>{{ 'asic.tutorial.cfd.example.header1' | translate }}</h4>\n\t<p>{{ 'asic.tutorial.cfd.example.para2' | translate }}</p>\n\t<h4>{{ 'asic.tutorial.cfd.example.header1' | translate }}</h4>\n\t<p>{{ 'asic.tutorial.cfd.example.para3' | translate }}</p>\n\t<p>{{ 'asic.tutorial.cfd.example.para4' | translate }}</p>\n\t<p>{{ 'asic.tutorial.cfd.example.para5' | translate }}</p>\n\t<p>{{ 'asic.tutorial.cfd.example.para6' | translate }}</p>\n</div>"},function(e,t,n){e.exports=function(e){e.component("asicCfdTutorialIntroductionStep",{template:n(1505),controller:["DynamicSequenceService",function(e){this.$onInit=function(){e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{onClick:e.stepForward}})}}]})}},function(e,t){e.exports="<div page-structure>\n\t<h4>{{ 'asic.tutorial.cfd.intro.header1' | translate }}</h4>\n\t<p>{{ 'asic.tutorial.cfd.intro.para1' | translate }}</p>\n\t<p>{{ 'asic.tutorial.cfd.intro.para2' | translate }}</p>\n\t<h4>{{ 'asic.tutorial.cfd.intro.header2' | translate }}</h4>\n\t<p>{{ 'asic.tutorial.cfd.intro.para3' | translate }}</p>\n\t<p>{{ 'asic.tutorial.cfd.intro.para4' | translate }}</p>\n\t<h4>{{ 'asic.tutorial.cfd.intro.header2' | translate }}</h4>\n\t<p>{{ 'asic.tutorial.cfd.intro.para5' | translate }}</p>\n\t<p>{{ 'asic.tutorial.cfd.intro.para6' | translate }}</p>\n\t<h4>{{ 'asic.tutorial.cfd.intro.header4' | translate }}</h4>\n\t<p>{{ 'asic.tutorial.cfd.intro.para7' | translate }}</p>\n</div>"},function(e,t,n){e.exports=function(e){e.component("asicCfdTutorialRisksStep",{template:n(1507),controller:["DynamicSequenceService",function(e){this.$onInit=function(){e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{onClick:e.stepForward}})}}]})}},function(e,t){e.exports="<div page-structure>\n\t<h4>{{ 'asic.tutorial.cfd.risks.header1' | translate }}</h4>\n\t<p>{{ 'asic.tutorial.cfd.risks.para1' | translate }}</p>\n\t<p>{{ 'asic.tutorial.cfd.risks.para2' | translate }}</p>\n\t<h4>{{ 'asic.tutorial.cfd.risks.header2' | translate }}</h4>\n\t<p>{{ 'asic.tutorial.cfd.risks.para3' | translate }}</p>\n</div>"},function(e,t){e.exports=function(e){e.component("asicObligationSequence",{template:'<am-dynamic-sequence ng-if="$ctrl.translationFetched" sequence-source="{{$ctrl.sequenceSource}}"></am-dynamic-sequence>',controller:["$translate","$translatePartialLoader","PageService",function(e,t,n){var a=this;a.$onInit=function(){n.setIsPageLoading(!0),a.translationFetched=!1,a.sequenceSource=(n.getCurrentPage().pageData||{}).config?"/AccountManagement/AsicObligation/Sequence/Config":"/AccountManagement/AsicObligation/Sequence",t.addPart("/questionnaire.webapp/i18n/questionnaire"),t.addPart("/investmentconfig.webapp/i18n/inv_experience_guidance"),e.refresh().then(function(){a.translationFetched=!0,n.setIsPageLoading(!1)},function(){throw"Unable to load questionnaire properties files!!!"})}}]})}},function(e,t,n){e.exports=function(e){e.component("asicConcentrationRiskQuestionnaireStep",{template:n(1510),controller:["DynamicSequenceService",function(e){var t=this,n=function(){e.stepForward(t.questionnaires)};t.$onInit=function(){t.questionnaires=e.getSequenceData().questionnaires||[],t.rules=e.getSequenceData().rules,e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{onClick:n}})}}]})}},function(e,t){e.exports='<div page-structure ng-form="$ctrl.questionnaireForm">\n\t<h4>{{ \'asicObligation.header.concentration\' | translate }}</h4>\n\t<questionnaire-form name="{{questionnaire.name}}" ng-model="questionnaire" ng-repeat="questionnaire in $ctrl.questionnaires" display-title="true" rules="$ctrl.rules[questionnaire.id]"></questionnaire-form>\n</div>'},function(e,t,n){e.exports=function(e){e.component("asicObligationCompletionStep",{template:n(1512),controller:["$translate","DynamicSequenceService","NavigationService","AmInterfaceService",function(e,t,n,a){var r=this;r.$onInit=function(){r.fetchPendingItems=t.getSequenceData().fetchPendingItems||!1,r.fetchPendingItems&&a.fetchPendingItems(),t.configureButtons({canGoBack:!1,extraButtons:[{alignment:"right",btnType:"primary",btnText:e.instant("word.ok"),onClick:n.navigateToPrevBreadcrumb}]})}}]})}},function(e,t){e.exports='<div page-structure>\n\t<div align="center">\n\t\t<i class="fa fa-4x fa-check-circle text-success"></i>\n\t</div>\n\t<h1 class="text-center text-success">{{\'word.thankYou\' | translate}}</h1>\n\t<h3 class="text-center text-dark">{{ \'asicObligation.message.completion\' | translate }}</h3>\n</div>'},function(e,t,n){e.exports=function(e){e.component("asicObligationRejectionStep",{template:n(1514),controller:["$translate","DynamicSequenceService","NavigationService","AmInterfaceService",function(e,t,n,a){var r=this;r.$onInit=function(){r.fetchPendingItems=t.getSequenceData().fetchPendingItems||!1,r.fetchPendingItems&&a.fetchPendingItems(),t.configureButtons({canGoBack:!1,extraButtons:[{alignment:"right",btnType:"primary",btnText:e.instant("word.ok"),onClick:n.navigateToPrevBreadcrumb}]})}}]})}},function(e,t){e.exports='<div page-structure>\n\t<div align="center">\n\t\t<i class="fa fa-2x fa-exclamation-triangle"></i>\n\t</div>\n\t<h1 class="text-center text-success">{{\'word.thankYou\' | translate}}</h1>\n\t<p class="text-center text-dark">{{ \'asicObligation.message.rejection\' | translate }}</p>\n</div>'},function(e,t,n){e.exports=function(e){e.component("asicRiskAppetiteQuestionnaireStep",{template:n(1516),controller:["$translate","DynamicSequenceService","ModalService",function(e,t,n){var a=this,r=function(){n.closeModal()},i=function(){n.setModalResult("ACKNOWLEDGED"),n.closeModal()},o=function o(){var s={questionnaire:a.questionnaire,acknowledged:a.acknowledged};t.stepForward(s).catch(function(t){a.removedCapabilities=t.data.removedCapabilities||[];var s=a.removedCapabilities.map(function(t){return e.instant("capability.type."+t)}).join(", ");if(a.removedCapabilities.length>0){var l={templateUrl:"error-modal.component",modalData:{errors:[e.instant("asicObligation.warning",{capabilities:s})]},buttons:[{label:"word.close",alignment:"left",fn:r,btnClass:"btn-default"},{label:"word.confirm",alignment:"right",fn:i,btnClass:"btn-default"}]};n.openWarningModal(l).then(function(e){a.acknowledged="ACKNOWLEDGED"===e,a.acknowledged&&o()})}})};a.$onInit=function(){a.questionnaire=t.getSequenceData().questionnaire||void 0,a.rules=t.getSequenceData().rules,a.removedCapabilities=t.getSequenceData().removedCapabilities||[],a.acknowledged=!1,t.configureButtons({canGoBack:t.getSequenceData().stepIndex>0,continueBtn:{onClick:o}})}}]})}},function(e,t){e.exports='<div page-structure ng-form="$ctrl.questionnaireForm">\n\t<h4>{{ \'asicObligation.header.risk\' | translate }}</h4>\n\t<questionnaire-form ng-if="$ctrl.questionnaire" name="{{$ctrl.questionnaire.name}}" ng-model="$ctrl.questionnaire" rules="$ctrl.rules"></questionnaire-form>\n</div>'},function(e,t,n){e.exports=function(e){n(1518)(e),n(1520)(e),n(1522)(e)}},function(e,t,n){e.exports=function(e){e.component("examConfigurationStep",{template:n(1519),controller:["DynamicSequenceService",function(e){var t=this,n=function(){var n={questionnaire:t.questionnaire,signatureSubmissionData:t.signature.signatureSubmissionData};e.stepForward(n).catch(function(e){t.errors=e.data.errors||void 0})};t.$onInit=function(){t.questionnaire=e.getSequenceData().questionnaire||void 0,t.rules=e.getSequenceData().rules,t.signature=e.getSequenceData().signature||void 0,t.getServerErrors=function(){return t.errors},e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{onClick:n}})}}]})}},function(e,t){e.exports='<div page-structure ng-form="$ctrl.examForm">\n\t<div form-server-errors="$ctrl.getServerErrors()">\n\t\t<h4>{{ \'exam.header.\' + $ctrl.questionnaire.formNumber | translate }}</h4>\n\t\t<p>{{ \'exam.message.\' + $ctrl.questionnaire.formNumber | translate }}</p>\n\t\t<br>\n\t\t<questionnaire-form name="{{$ctrl.questionnaire.name}}" ng-model="$ctrl.questionnaire" display-title="true" display-description="true" rules="$ctrl.rules"></questionnaire-form>\n\t\t<h4>{{ \'exam.signature.\' + $ctrl.questionnaire.formNumber | translate }}</h4>\n\t\t<signature-block ng-if="::$ctrl.signature" document-signature="$ctrl.signature" no-signature-header="true"></signature-block>\n\t</div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("examCompletionStep",{template:n(1521),controller:["$translate","DynamicSequenceService","NavigationService","AmInterfaceService",function(e,t,n,a){var r=this;r.$onInit=function(){r.passed=t.getSequenceData().passed||!1,r.fetchPendingItems=t.getSequenceData().fetchPendingItems||!1,r.fetchPendingItems&&a.fetchPendingItems(),t.configureButtons({canGoBack:!1,extraButtons:[{alignment:"right",btnType:"primary",btnText:e.instant("word.ok"),onClick:n.navigateToPrevBreadcrumb}]})}}]})}},function(e,t){e.exports='<div page-structure>\n\t<div align="center">\n\t\t<i class="fa fa-4x fa-check-circle text-success"></i>\n\t</div>\n\t<h1 class="text-center text-success">{{\'word.thankYou\' | translate}}</h1>\n\t<h3 class="text-center text-dark">{{ \'exam.completion\' | translate }}</h3>\n\t<div class="alert alert-warning" ng-if="::!$ctrl.passed">\n\t\t<p>{{ \'exam.failure.3450\' | translate }}</p>\n\t</div>\n</div>'},function(e,t){e.exports=function(e){e.component("examSequence",{template:'<am-dynamic-sequence ng-if="$ctrl.translationFetched" sequence-source="{{::$ctrl.sequenceSource}}"></am-dynamic-sequence>',controller:["$translate","$translatePartialLoader","PageService",function(e,t,n){var a=this;a.$onInit=function(){var r=n.getCurrentPage().pageData||{};a.sequenceSource=r.sequenceSource||void 0,a.translationFetched=!1,t.addPart("/questionnaire.webapp/i18n/questionnaire"),e.refresh().then(function(){a.translationFetched=!0},function(){throw"Unable to load questionnaire properties files!!!"})}}]})}},function(e,t,n){e.exports=function(e){n(1524)(e),n(1526)(e),n(1527)(e),n(1528)(e),n(1530)(e),n(1532)(e),n(1534)(e),n(1536)(e)}},function(e,t,n){e.exports=function(e){e.component("capabilityDowngradeStep",{template:n(1525),controller:["DynamicSequenceService",function(e){var t=this,n=function(){e.stepForward().catch(function(e){t.removedCapabilities=e.data.removedCapabilities||[]})};t.$onInit=function(){t.removedCapabilities=e.getSequenceData().removedCapabilities||[],e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{onClick:n}})}}]})}},function(e,t){e.exports='<div page-structure="fullPanel" no-border="true">\n\t<div class="trading-permissions">\n\t\t<div class="text-center">\n\t\t\t<i class="fa fa-4x fa-exclamation-triangle text-gray"></i>\n\t\t\t<h2>{{ \'capability.downgrade.header\' | translate }}</h2>\n\t\t\t<br>\n\t\t</div>\n\t\t<capability-downgrade ng-if="$ctrl.removedCapabilities.length > 0" capability-downgrades="$ctrl.removedCapabilities"></capability-downgrade>\n\t</div>\n</div>'},function(e,t){e.exports=function(e){function t(e,t,n,a){var r=this,i=function(){var e={id:r.loginMessageType,title:t.instant("loginMessageType."+r.loginMessageType),path:"template/page/loginmessage/realTimeLoginMessageSequence.html",pageData:{sequenceParameters:{id:r.loginMessageId}},skipFetch:!0,breadcrumb:BreadcrumbAction.REPLACE};n.navigate(e)};r.$onInit=function(){var a;r.request=e.getSequenceData().request,r.loginMessageType=e.getSequenceData().loginMessageType,r.loginMessageId=e.getSequenceData().loginMessageId,e.configureButtons({canGoBack:!1,extraButtons:(a=[],"PMRGN_DOWNGRADE_REVIEW"===r.loginMessageType?a.push({alignment:"right",btnType:"primary",btnText:t.instant("word.continue"),onClick:i}):a.push({alignment:"right",btnType:"primary",btnText:t.instant("word.ok"),onClick:n.navigateToPrevBreadcrumb}),a)})}}e.controller("FinancialInfoCompletionCtrl",t),t.$inject=["DynamicSequenceService","$translate","NavigationService","NavigationAction"]}},function(e,t){e.exports=function(e){function t(e,t,n,a,r,i){var o=this;var s=function(){if(a.getDefaultBackFn()(),o.descriptors.length>0){for(var t=[],n=0;n<o.descriptors.length;n++){var r=o.descriptors[n];r.action="DECLINE",t.push(i.updateWarning(r))}e.all(t)}},l=function e(){var n={financialInfo:function(){for(var e=angular.copy(o.financialInfo),t=e.sourcesOfWealth||[],n=t.length;n--;){var a=t[n];angular.isDefined(a.checked)&&!a.checked&&t.splice(n,1)}return e}(),acknowledged:o.acknowledged,assetSkipped:o.assetSkipped,experienceSkipped:o.experienceSkipped,objectiveSkipped:o.objectiveSkipped,acknowledgedCapabilities:o.acknowledgedCapabilities||[],skippableCapabilities:o.skippableCapabilities||[],descriptors:o.descriptors||[]};a.stepForward(n,function(n){if(n.data&&n.data.errors&&Object.keys(n.data.errors).length>0){o.exams=n.data.exams||[],o.capabilityExams=n.data.capabilityExams||[],o.riskAppetites=n.data.riskAppetites||[],o.customErrors=n.data.customErrors||[],o.removedCapabilities=n.data.removedCapabilities||[],o.acknowledgements=n.data.acknowledgements||[],o.mandatoryTasks=n.data.mandatoryTasks||[],o.hardStopWarnings=n.data.hardStopWarnings||[],o.riskAcceptanceTasks=n.data.riskAcceptanceTasks||[],o.skippableErrors=n.data.skippableErrors||{};var a=n.data.assetReviewData||[];for(var s in a)o.financialInfo.experiences[s].reviewData=a[s]||[];if(o.customErrors.length>0||o.exams.length>0||o.capabilityExams.length>0||o.riskAppetites.length>0||o.mandatoryTasks.length>0||o.hardStopWarnings.length>0||Object.keys(o.skippableErrors).length>0){var l={contentClass:"modal-gray",title:t.instant("word.attention"),templateUrl:"financial-info-error-modal.component",modalData:{errors:o.customErrors,exams:o.exams,capabilityExams:o.capabilityExams,riskAppetites:o.riskAppetites,mandatoryTasks:o.mandatoryTasks,hardStopWarnings:o.hardStopWarnings,skippableErrors:o.skippableErrors,experiences:o.financialInfo.experiences}};r.openModal(l).then(function(t){if(!angular.isUndefined(t)){for(var n=0;n<(t.skippableCapabilities||[]).length;n++){var a=t.skippableCapabilities[n];o.skippableCapabilities.push(a)}o.skippableErrors=t.skippableErrors||{},0===o.exams.length&&0===o.capabilityExams.length&&0===o.riskAppetites.length&&0===o.mandatoryTasks.length&&0===o.customErrors.length&&0===Object.keys(o.skippableErrors).length&&e()}})}else if(o.acknowledgements.length>0){l={contentClass:"modal-gray",title:t.instant("word.attention"),templateUrl:"financial-info-acknowledgement-modal.component",modalData:{acknowledgements:o.acknowledgements||[]}};i.recordAcknowledgementWarnings(o.acknowledgements).then(function(e){o.descriptors=e||[]},function(e){o.descriptors=[]}),r.openModal(l).then(function(t){angular.isUndefined(t)||(o.acknowledgedCapabilities=t.acknowledgedCapabilities||[],o.acknowledgements=t.acknowledgements||[],0===o.acknowledgements.length&&e())})}else if(o.riskAcceptanceTasks.length>0){l={noClose:!0,contentClass:"modal-gray",title:t.instant("word.attention"),templateUrl:"capability-risk-acceptance-task-modal.component",dialogClass:"modal-lg",modalData:{riskAcceptanceTasks:o.riskAcceptanceTasks}};r.openModal(l).then(function(t){angular.isUndefined(t)||(o.riskAcceptanceTasks=t.riskAcceptanceTasks||[],o.acknowledgedCapabilities=t.acknowledgedCapabilities||[],o.descriptors=t.descriptors||[],0===o.riskAcceptanceTasks.length&&e())})}else if(o.removedCapabilities.length>0){l={title:t.instant("financialInfo.label.downgradingCapabilities"),templateUrl:"downgrading-capability-modal.component",modalData:{removedCapabilities:o.removedCapabilities},buttons:[{label:"word.cancel",fn:r.closeModal,alignment:"left"},{label:"word.ok",fn:function(){r.setModalResult("ACKNOWLEDGED"),r.closeModal()},alignment:"right",btnType:"primary"}]};r.openInfoModal(l).then(function(t){"ACKNOWLEDGED"===t&&(o.acknowledged=!0,e())})}}})};o.$onInit=function(){o.financialInfo=a.getSequenceData().financialInfo,o.rules=a.getSequenceData().rules,o.exams=a.getSequenceData().exams||[],o.capabilityExams=a.getSequenceData().capabilityExams||[],o.riskAppetites=a.getSequenceData().riskAppetites||[],o.removedCapabilities=a.getSequenceData().removedCapabilities||[],o.customErrors=a.getSequenceData().customErrors||[],o.acknowledgements=a.getSequenceData().acknowledgements||[],o.mandatoryTasks=a.getSequenceData().mandatoryTasks||[],o.hardStopWarnings=a.getSequenceData().hardStopWarnings||[],o.riskAcceptanceTasks=a.getSequenceData().riskAcceptanceTasks||[],o.skippableErrors=a.getSequenceData().skippableErrors||{},o.assetSkipped=a.getSequenceData().assetSkipped||!1,o.experienceSkipped=a.getSequenceData().experienceSkipped||!1,o.objectiveSkipped=a.getSequenceData().objectiveSkipped||!1,o.acknowledgedCapabilities=o.acknowledgedCapabilities||[],o.skippableCapabilities=o.skippableCapabilities||[],o.descriptors=[],o.acknowledged=o.acknowledged||!1,o.additionalIncomeSources=!1,o.getErrors=function(){return a.getSequenceData().errors},a.configureButtons({backBtn:{onClick:s},continueBtn:{onClick:l}}),o.acknowledgements.length>0&&n.setOnPageLoad(function(){i.recordAcknowledgementWarnings(o.acknowledgements).then(function(e){o.descriptors=e||[]},function(e){o.descriptors=[]}).finally(function(){n.setIsPageLoading(!1)})}),o.riskAcceptanceTasks.length>0&&n.setOnPageLoad(function(){i.recordRiskAcceptanceTaskWarnings(o.riskAcceptanceTasks).then(function(e){o.descriptors=e||[]},function(e){o.descriptors=[]}).finally(function(){n.setIsPageLoading(!1)})})}}e.controller("FinancialInfoConfigurationCtrl",t),t.$inject=["$q","$translate","PageService","DynamicSequenceService","ModalService","WarningDescriptorService"]}},function(e,t,n){e.exports=function(e){e.component("financialInfoReviewStep",{template:n(1529),controller:["$translate","DynamicSequenceService",function(e,t){var n=this;n.$onInit=function(){n.financialInfo=t.getSequenceData().financialInfo,n.revised=!!t.getSequenceData().revised||"",n.section=t.getSequenceData().section||"",n.displaySections=t.getSequenceData().displaySections||[],n.downgrades=t.getSequenceData().downgrades||[],n.entities=t.getSequenceData().entities||[],t.configureButtons({canGoBack:t.getSequenceData().stepIndex>0,continueBtn:{btnText:e.instant("word.submit"),onClick:t.stepForward}})}}]})}},function(e,t){e.exports='<div page-structure="fullPanel" no-border="true">\n\t<div class="trading-permissions">\n\t\t<h2>{{ \'financialInfo.header.review\' | translate }}</h2>\n\t\t<br>\n\t\t<ng-switch on="::$ctrl.section">\n\t\t\t<p ng-switch-when="FINANCIAL_DATA" translate="financialInfo.review.FINANCIAL_DATA" translate-values="{ startTag: \'<strong>\', endTag: \'</strong>\'}"><p>\n\t\t\t<p ng-switch-when="SOW" translate="financialInfo.review.SOW" translate-values="{ startTag: \'<strong>\', endTag: \'</strong>\'}"><p>\n\t\t\t<p ng-switch-when="OBJECTIVE" translate="financialInfo.review.OBJECTIVE" translate-values="{ startTag: \'<strong>\', endTag: \'</strong>\'}"><p>\n\t\t\t<p ng-switch-when="EXPERIENCE" translate="financialInfo.review.EXPERIENCE" translate-values="{ startTag: \'<strong>\', endTag: \'</strong>\'}"><p>\n\t\t\t<p ng-switch-default translate="financialInfo.message.review" translate-values="{ startTag: \'<strong>\', endTag: \'</strong>\'}"><p>\n\t\t</ng-switch>\n\t\t<hr>\n\t\t<br>\n\t\t\x3c!-- \n\t    \tFinancial Net Worth\n\t    --\x3e\n\t    <financial-net-worth-review ng-if="::($ctrl.displaySections.length === 0 || ($ctrl.displaySections | amContains: \'FINANCIAL_DATA\')) && $ctrl.financialInfo.financialAssets" financial-net-worth="$ctrl.financialInfo.financialAssets" revised="{{$ctrl.revised}}"></financial-net-worth-review>\n\t    \x3c!-- \n\t      \tSources of Wealth\n\t    --\x3e\n\t    <sources-of-wealth-review ng-if="::($ctrl.displaySections.length === 0 || ($ctrl.displaySections | amContains: \'SOW\')) && $ctrl.financialInfo.sourcesOfWealth.length > 0" sources-of-wealth="$ctrl.financialInfo.sourcesOfWealth" revised="{{$ctrl.revised}}"></sources-of-wealth-review>\n\t    \x3c!-- \n\t    \tInvestment Objectives\n\t    --\x3e\n\t    <investment-objectives-review ng-if="::($ctrl.displaySections.length === 0 || ($ctrl.displaySections | amContains: \'OBJECTIVE\')) && $ctrl.financialInfo.objectives.length > 0" objectives="$ctrl.financialInfo.objectives" revised="{{$ctrl.revised}}"></investment-objectives-review>\n\t    \x3c!-- \n\t    \tInvestment Experiences\n\t    --\x3e\n\t    <investment-experiences-review ng-if="::($ctrl.displaySections.length === 0 || ($ctrl.displaySections | amContains: \'EXPERIENCE\')) && $ctrl.financialInfo.experiences && ($ctrl.financialInfo.experiences | objectLength) > 0" experiences="$ctrl.financialInfo.experiences" revised="{{$ctrl.revised}}"></investment-experiences-review>\n\t\t\x3c!-- \n\t\t\tDowngrading Capabilities\n\t\t--\x3e\n\t\t<capability-downgrade-review ng-if="::$ctrl.downgrades.length > 0" downgrades="$ctrl.downgrades"></capability-downgrade-review>\n\t\t\x3c!-- \n\t\t    Employer Details\n\t\t--\x3e\n\t\t<div ng-if="::$ctrl.entities.length > 0" ng-repeat="entity in $ctrl.entities">\n\t\t    <p class="subtitle"><strong>{{ \'employerDetails.header\' | translate:{entity: (entity | amEntityName)} }}</strong></p>\n            <employer-details-review ng-if="entity.employerDetails && entity.employerDetails.employmentType !== \'UNKNOWN\'" employer="entity.employerDetails"></employer-details-review>\n\t    </div>\n\t</div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("financialNetWorthConfigurationStep",{template:n(1531),controller:["DynamicSequenceService",function(e){var t=this,n=function(){var n={financialAssets:t.financialAssets};e.stepForward(n).catch(function(e){t.customErrors=e.data.customErrors||[]})};t.$onInit=function(){t.financialAssets=e.getSequenceData().financialAssets,t.rules=e.getSequenceData().rules,t.customErrors=e.getSequenceData().customErrors||[],e.configureButtons({canGoBack:!0,continueBtn:{onClick:n}})}}]})}},function(e,t){e.exports='<div page-structure="fullPanel" no-border="true">\n\t<div class="trading-permissions" ng-form="$ctrl.financialNetWorthForm">\n\t\t<h2>{{ \'financialData.header\' | translate }}</h2>\n\t\t<br>\n\t\t<p>{{ \'financialData.message.trading\' | translate }}</p>\n\t\t<hr>\n\t\t<br>\n\t\t<div class="row">\n\t\t\t<div class="col-12 col-lg-8 col-left">\n\t\t\t\t\x3c!-- \n\t\t\t\t\tFinancial Info Custom Errors\n\t\t\t\t--\x3e\n\t\t\t\t<financial-info-error ng-if="$ctrl.customErrors.length > 0" errors="$ctrl.customErrors"></financial-info-error>\n\t\t\t\t\x3c!-- \n\t\t\t\t\tFinancial Assets\n\t\t\t\t--\x3e\n\t\t\t\t<am-form-financial-net-worth ng-if="::$ctrl.rules" ng-model="$ctrl.financialAssets" rules="$ctrl.rules" hide-description="true" wide-form></am-form-financial-net-worth>\n\t\t\t</div>\n\t\t\t<div class="col-12 col-lg-4 col-right">\n\t\t\t\t<h6>{{ \'financialData.helpMessage.terms\' | translate}}</h6>\n\t\t\t\t<ul class="paralist">\n\t\t\t\t\t<li translate="financialData.helpMessage.annualIncome" translate-values="{ strongStartTag: \'<strong>\', strongEndTag: \'</strong>\' }"></li>\n\t\t\t\t\t<li translate="financialData.helpMessage.netWorth" translate-values="{ strongStartTag: \'<strong>\', strongEndTag: \'</strong>\' }"></li>\n\t\t\t\t\t<li translate="financialData.helpMessage.liquidNetWorth" translate-values="{ strongStartTag: \'<strong>\', strongEndTag: \'</strong>\' }"></li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("investmentExperienceConfigurationStep",{template:n(1533),controller:["DynamicSequenceService",function(e){var t=this,n=function(){var n={experiences:t.experiences};e.stepForward(n,function(e){t.customErrors=e.data.customErrors||[];var n=e.data.assetReviewData||[];for(var a in n)t.experiences[a].reviewData=n[a]||[]})};t.$onInit=function(){t.experiences=e.getSequenceData().experiences,t.rules=e.getSequenceData().rules,t.customErrors=e.getSequenceData().customErrors||[],t.assetNotes=e.getSequenceData().assetNotes||[],e.configureButtons({canGoBack:!0,continueBtn:{onClick:n}})}}]})}},function(e,t){e.exports='<div page-structure="fullPanel" no-border="true">\n\t<div class="trading-permissions" ng-form="$ctrl.investmentExperienceForm">\n\t\t<h2>{{ \'investmentExperience.header\' | translate }}</h2>\n\t\t<br>\n\t\t<p>{{ \'investmentExperience.displayMessage.\' + $ctrl.rules.displayStyle | translate }}</p>\n\t\t<br>\n\t\t<hr>\n\t\t<br>\n\t\t<div class="row">\n\t\t\t<div class="col-12">\n\t\t\t\t\x3c!-- \n\t\t\t\t\tFinancial Info Custom Errors\n\t\t\t\t--\x3e\n\t\t\t\t<financial-info-error ng-if="$ctrl.customErrors.length > 0" errors="$ctrl.customErrors"></financial-info-error>\n\t\t\t\t\x3c!-- \n\t\t\t\t\tAsset Notes\n\t\t\t\t--\x3e\n\t\t\t\t<am-notes ng-if="$ctrl.assetNotes.length > 0" notes="$ctrl.assetNotes" severity="LOW" key-prefix="tradingPermissionProfile.note." disable-bulleted-list="true"></am-notes>\n\t\t\t\t\x3c!-- \n\t\t\t\t\tInvestment Experiences\n\t\t\t\t--\x3e\n\t\t\t\t<am-form-investment-experiences ng-if="::$ctrl.rules" ng-model="$ctrl.experiences" rules="$ctrl.rules" hide-description="true"></am-form-investment-experiences>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("investmentObjectiveConfigurationStep",{template:n(1535),controller:["DynamicSequenceService",function(t){var n=this,a=function(){var e={objectives:n.objectives};t.stepForward(e).catch(function(e){n.customErrors=e.data.customErrors||[]})};n.$onInit=function(){n.objectives=t.getSequenceData().objectives,n.rules=t.getSequenceData().rules,n.customErrors=t.getSequenceData().customErrors||[],n.getHelp=function(){return e.WEBAPP_ROOT+"/components/objectives/investmentObjectiveHelp.html"},t.configureButtons({canGoBack:!0,continueBtn:{onClick:a}})}}]})}},function(e,t){e.exports='<div page-structure="fullPanel" no-border="true">\n\t<div class="trading-permissions" ng-form="$ctrl.investmentObjectiveForm">\n\t\t<h2>{{ \'investmentObjective.header\' | translate }}</h2>\n\t\t<br>\n\t\t<p>{{ \'investmentObjective.configure\' | translate }}</p>\n\t\t<br>\n\t\t<hr>\n\t\t<br>\n\t\t<div class="row">\n\t\t\t<div class="col-12 col-lg-9 col-left">\n\t\t\t\t<h6>{{ \'investmentObjective.label.check\' | translate}}</h6>\n\t\t\t\t\x3c!-- \n\t\t\t\t\tFinancial Info Custom Errors\n\t\t\t\t--\x3e\n\t\t\t\t<financial-info-error ng-if="$ctrl.customErrors.length > 0" errors="$ctrl.customErrors"></financial-info-error>\n\t\t\t\t\x3c!-- \n\t\t\t\t\tInvestment Objectives\n\t\t\t\t--\x3e\n\t\t\t\t<am-form-investment-objectives ng-if="::$ctrl.rules" ng-model="$ctrl.objectives" rules="$ctrl.rules" hide-description="true"></am-form-investment-objectives>\n\t\t\t</div>\n\t\t\t<div class="col-12 col-lg-3 col-right">\n\t\t\t\t<h6>{{ \'word.important\' | translate}}</h6>\n\t\t\t\t<ng-include src="$ctrl.getHelp()"></ng-include>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>'},function(e,t){e.exports=function(e){function t(e,t){var n=this;n.$onInit=function(){n.request=e.getSequenceData().request||{},e.configureButtons({canGoBack:!1,continueBtn:{onClick:e.stepForward,btnText:t.instant("word.cancelRequest")}})}}e.controller("PendingFinancialInfoCtrl",t),t.$inject=["DynamicSequenceService","$translate"]}},function(e,t,n){e.exports=function(e){n(1538)(e),n(1540)(e),n(1542)(e),n(1544)(e),n(1546)(e)}},function(e,t,n){e.exports=function(e){e.component("investorCategoryCompletionStep",{template:n(1539),controller:["$translate","DynamicSequenceService","NavigationService",function(e,t,n){var a=this;a.$onInit=function(){a.categories=t.getSequenceData().categories||[],a.status=t.getSequenceData().status,t.configureButtons({canGoBack:!1,extraButtons:[{alignment:"right",btnType:"primary",btnText:e.instant("word.ok"),onClick:n.navigateToPrevBreadcrumb}]})}}]})}},function(e,t){e.exports='<div page-structure>\n\t<div align="center">\n\t\t<i class="fa fa-4x fa-check-circle text-success"></i>\n\t</div>\n\t<h1 class="text-center text-success">{{\'word.thankYou\' | translate}}</h1>\n\t<h3 class="text-center text-dark">{{ \'investorCategory.completion.\' + $ctrl.status | translate }}</h3>\n</div>'},function(e,t,n){e.exports=function(e){e.component("investorCategoryConfigurationStep",{template:n(1541),controller:["DynamicSequenceService","ModalService",function(e,t){var n=this,a=function(){e.stepForward(n.category).catch(function(e){e.data&&e.data.customErrors&&e.data.customErrors.length>0&&t.openErrorModal({modalData:{errors:e.data.customErrors}})})};n.$onInit=function(){n.category=e.getSequenceData().category,e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{onClick:a}})}}]})}},function(e,t){e.exports="<div page-structure ng-form=\"$ctrl.investorCategoryForm\">\n\t<h4>{{'investorCategory.header.' + $ctrl.category.categoryType | translate}}</h4>\n\t<p>{{'investorCategory.question.' + $ctrl.category.categoryType + '_QUESTION' | translate }}</p>\n\t<p ng-if=\"$ctrl.category.categoryType == 'ECP' \">{{'investorCategory.question.ecp' | translate }}</p>\n\t<p ng-if=\"$ctrl.category.categoryType != 'ECP' && $ctrl.category.categoryType != 'AI_AUTO' \">{{'investorCategory.question.other' | translate }}</p>\n\t\x3c!-- \n\t\tIf categoryType is AI_AUTO, don't show switch and dont't show addition question \n\t--\x3e\n\t<p>\n\t\t<am-switch ng-if=\"$ctrl.category.categoryType !== 'AI_AUTO'\" name=\"{{$ctrl.category.categoryId}}\" ng-model=\"$ctrl.category.isSelected\"></am-switch>\n\t</p>\n\t\x3c!-- \n\t\tAdditional Questions\n\t--\x3e\n\t<div ng-if=\"$ctrl.category.isSelected && $ctrl.category.categoryType !== 'AI_AUTO' && $ctrl.category.additionalQuestions.length > 0\">\n\t\t<h6 class=\"subtitle\">{{'word.additionalQuestions' | translate}}</h6>\n\t\t\n\t\t\x3c!-- list of additional questions for category --\x3e\n\t\t<investor-category-questions questions=\"$ctrl.category.additionalQuestions\"></investor-category-questions>\n\t</div>\n</div>"},function(e,t,n){e.exports=function(e){e.component("investorCategoryReviewStep",{template:n(1543),controller:["DynamicSequenceService","$translate","translateMultiLoader",function(e,t,n){var a=this,r=function(){var t={signatureSubmissionData:a.userSignature.signatureSubmissionData};e.stepForward(t)};a.$onInit=function(){a.getSequenceData=e.getSequenceData,a.categories=a.getSequenceData().categories||[],a.userSignature=a.getSequenceData().userSignature||void 0,a.isClientReview=function(){if(angular.isDefined(a.getSequenceData().loginTask)){var e=a.getSequenceData().loginTask;if(angular.isDefined(e.actions)&&0!=e.actions.length)return"INVESTOR_CATEGORIES"==e.actions[0].type}return!1}(),a.isTranslationLoaded=!1,n.addLoader("InvestorCategoryTextLoader",{}),t.refresh().then(function(){a.isTranslationLoaded=!0}),e.configureButtons({canGoBack:a.getSequenceData().stepIndex>0,continueBtn:{onClick:r}})}}]})}},function(e,t){e.exports='<div page-structure ng-form="$ctrl.investorCategoryReviewForm">\n\t<h4>{{\'page.summary.title\' | translate  : {pageTitle : \'Investor Category\' } }}</h4>\n\t<p ng-if="!$ctrl.isClientReview">{{\'investorCategory.summary.text\' | translate}}</p>\n\t<p ng-if="$ctrl.isClientReview" translate="{{ (\'investorCategory.reviewInformation\') }}" translate-values="{masterAccountTitle: $ctrl.getSequenceData().masterAccountTitle, strongStart: \'<strong>\', strongEnd: \'</strong>\'}"></p>\n\t<br>\n\t<br>\n\t<div class="accordion" id="investorCategoryAccordion">\n\t\t<div class="accordion-item" ng-repeat="category in $ctrl.categories">\n\t\t\t<h2 class="accordion-header" ng-class="category.isSelected ? \'\' : \'disabled\'" id="heading_{{category.categoryId}}">\n\t\t\t\t<button class="accordion-button" ng-class="$ctrl.isClientReview ? \'\' : \'collapsed\'" type="button" data-toggle="collapse" data-target="{{\'#\' + category.categoryId}}" aria-controls="{{category.categoryId}}" aria-expanded="false">\n\t\t\t\t\t{{\'investorCategory.header.\' + category.categoryType | translate}}\n\t\t\t\t</button>\n\t\t\t\t<span class="accordion-total">\n\t\t\t\t\t<span ng-class="category.isSelected ? \'text-sucess\' : \'text-gray\'">\n\t\t\t\t\t\t{{ (category.isSelected ? \'word.yes\' : \'word.no\' ) | translate }}\n\t\t\t\t\t</span>\n\t\t\t\t</span>\n\t\t\t</h2>\n\t\t\t<div id="{{category.categoryId}}" ng-if="category.isSelected" class="accordion-collapse collapse" ng-class="$ctrl.isClientReview ? \'show\' : \'\'" aria-labelledby="heading_{{category.categoryId}}">\n\t\t\t\t<div class="accordion-body">\n                    <div ng-if="category.categoryType === \'AI_AUTO\'">\n                        <div class="row">\n                            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n                                <p>{{\'investorCategory.question.\' + category.categoryType + \'_QUESTION\' | translate }}</p>\n                            </div>\n                        </div>\n                    </div>\n\t\t\t\t\t<div ng-repeat="question in category.additionalQuestions" ng-include=" \'investorCategorySummary.html\' ">\n\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t\x3c!-- \n\t\tSignature Block\n\t--\x3e\n\t<signature-block ng-if="$ctrl.userSignature" document-signature="$ctrl.userSignature"></signature-block>\n</div>\n\n\x3c!-- summary script --\x3e\n<script type="text/ng-template" id="investorCategorySummary.html">\n\t<div class="row">\n\t\t<div class="col-xs-12 col-sm-12 col-md-10 col-lg-10">\n\t\t\t<p ng-if="$ctrl.isTranslationLoaded" ng-bind-html="\'investorCategory.addtionalQuestion.\' + question.name | translate | renderHTML"> </p>\n\t\t\t<br>\n\t\t</div>\n\t\t<div class="col-xs-12 col-sm-12 col-md-2 col-lg-2">\n\t\t\t<p class="text-center" ng-class="question.answer === \'true\' ? \'text-sucess\' : \'text-gray\'">\n\t\t\t\t<strong>{{ ( question.answer === \'true\' ? \'word.yes\' : \'word.no\' ) | translate }}</strong>\n\t\t\t</p>\n\t\t</div>\n\t</div>\n\t<hr>\n\t\x3c!-- if-> question.answer is defined and for answered question, you have next question, then repeat--\x3e\n\t\n\t<div ng-if="(question.answer !== undefined) && (question.options | filter: {value: question.answer})[0].question" \n\t\tng-repeat="option in question.options | filter: {value: question.answer}" \n\t\t\tng-include=" \'investorCategorySummary.html\' " \n\t\t\t\tng-init=" question = option.question ">\n\t\t\n\t</div>\n<\/script>'},function(e,t,n){e.exports=function(e){e.component("investorCategoryStandaloneStep",{template:n(1545),controller:["$translate","DynamicSequenceService","ModalService",function(e,t,n){var a=this,r=function(){t.stepForward({category:a.category,signatureSubmissionData:a.signature.signatureSubmissionData}).catch(function(e){e.data&&e.data.customErrors&&e.data.customErrors.length>0&&n.openErrorModal({modalData:{errors:e.data.customErrors}})})};a.$onInit=function(){a.category=t.getSequenceData().category,a.signature=t.getSequenceData().signature,a.loginTask=t.getSequenceData().loginTask||{},a.rules=t.getSequenceData().rules,a.active=t.getSequenceData().active,t.configureButtons({canGoBack:t.getSequenceData().stepIndex>0,continueBtn:{onClick:r}})}}]})}},function(e,t){e.exports='<div page-structure ng-form="$ctrl.investorCategoryForm">\n\t<h4>{{\'investorCategory.header.\' + $ctrl.category.categoryType | translate}}</h4>\n\t<any ng-if="$ctrl.loginTask.messageType !=\'ANNUAL_REVIEW\'">\n\t\t<p>{{\'investorCategory.question.\' + $ctrl.category.categoryType + \'_QUESTION\' | translate }}</p>\n\t    <br>\n\t    \n\t\t<p>{{\'investorCategory.question.standalone\' | translate }}</p>\n\t</any>\n\t<any ng-if="$ctrl.loginTask.messageType ===\'ANNUAL_REVIEW\'">\n\t\t<p ng-if="$ctrl.active">{{\'investorCategory.question.\' + $ctrl.category.categoryType + \'.active\' | translate }}</p>\n\t\t<p ng-if="!$ctrl.active">{{\'investorCategory.question.\' + $ctrl.category.categoryType + \'.eligible\' | translate }}</p>\n\t</any>\n\t\n\t\n\t<p ng-if="$ctrl.rules.declinable">\n\t\n\t\t<am-switch name="{{$ctrl.category.categoryId}}" ng-model="$ctrl.category.isSelected"></am-switch>\n\t</p>\n\t\n\t<div class="alert alert-warning" align="center" ng-if="$ctrl.rules.declinable && $ctrl.active && !$ctrl.category.isSelected">\n      \t<p class="text-center">{{\'investorCategory.warning.\' + $ctrl.category.categoryType + \'.downgrade\' | translate }}</p>\n    </div>\n    \x3c!-- \n\t\tAdditional Questions\n\t--\x3e\n    <div ng-if="$ctrl.category.isSelected && $ctrl.category.additionalQuestions.length > 0">\n\t    <h6 ng-if="$ctrl.rules.declinable" class="subtitle">{{\'word.additionalQuestions\' | translate}}</h6>\n\t    \n\t    <investor-category-questions questions="$ctrl.category.additionalQuestions"></investor-category-questions>\n\t    <br>\n\t\t<signature-block document-signature="$ctrl.signature"></signature-block>\n\t</div>\n</div>'},function(e,t){e.exports=function(e){e.component("investorCategorySequence",{template:'<am-dynamic-sequence sequence-source="/AccountManagement/InvestorCategory/Sequence"></am-dynamic-sequence>',controller:function(){this.$onInit=function(){}}})}},function(e,t,n){e.exports=function(e){n(1548)(e),n(1550)(e),n(1552)(e),n(1554)(e),n(1556)(e),n(1558)(e),n(1560)(e)}},function(e,t,n){e.exports=function(e){e.component("baFinFuturesCompletion",{template:n(1549),controller:"GenericCompletionStepController"})}},function(e,t){e.exports='<div page-structure>\n    <div align="center">\n        <i class="fa fa-4x fa-check-circle text-success"></i>\n    </div>\n    <h1 class="text-center text-success">{{\'word.thankYou\' | translate}}</h1>\n    <h3 class="text-center text-dark">{{ ($ctrl.getSequenceData().enabled ? \'baFinFutures.message.enable\' : \'baFinFutures.message.disable\') | translate}}</h3>\n</div>'},function(e,t,n){e.exports=function(e){e.component("baFinFuturesConfiguration",{template:n(1551),controller:["DynamicSequenceService",function(e){var t=this,n=function(){e.stepForward({enabled:t.enabled})};t.$onInit=function(){t.enabled=e.getSequenceData().enabled||!1,e.configureButtons({canGoBack:!0,continueBtn:{onClick:n}})}}]})}},function(e,t){e.exports='<div page-structure>\n\t<h4>{{ \'page.title.BaFinFutures\' | translate }}</h4>\n\t<br>\n\t<div class="row">\n\t\t<div class="col-xs-2 col-sm-1 col-md-1 col-lg-1">\n\t\t\t<p class="text-center">\n\t\t\t\t<input type="checkbox" name="enabled" ng-model="$ctrl.enabled" i-check />\n\t\t\t</p>\n\t\t</div>\n\t\t<div class="col-xs-10 col-sm-11 col-md-11 col-lg-11">\n\t\t\t<p>{{\'baFinFutures.label.authorize\' | translate }}</p>\n\t\t</div>\n\t</div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("baFinFuturesNoChange",{template:n(1553),controller:"GenericNoChangeStepController"})}},function(e,t){e.exports='<div page-structure>\n    <div class="text-center">\n        <i class="fa fa-2x fa-exclamation-triangle text-gray"></i>\n        <h5>{{ \'page.title.BaFinFutures\' | translate }}</h5>\n        <br>\n        <div class="alert alert-warning">\n            <p>{{ \'sequence.warning.nochange\' | translate }}</p>            \n        </div>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("stockYieldProgramCompletionStep",{template:n(1555),controller:["$translate","DynamicSequenceService","NavigationService","StockYieldProgramService",function(e,t,n,a){var r=this;r.$onInit=function(){r.stockYieldProgramRequests=t.getSequenceData().stockYieldProgramRequests,r.containsAuEntity=function(){return a.containsAuEntity(r.stockYieldProgramRequests)},t.configureButtons({canGoBack:!1,continueBtn:{onClick:n.navigateToPrevBreadcrumb,btnText:e.instant("word.ok")}})}}]})}},function(e,t){e.exports='<div page-structure>\n    <div align="center">\n        <i class="fa fa-4x fa-check-circle text-success"></i>\n    </div>\n    <h1 class="text-center text-success">{{\'word.thankYou\' | translate}}</h1>\n    <h3 class="text-center text-dark">{{ \'tradingProgram.syep.completion.header\' | translate }}</h3>\n    <div ng-if="$ctrl.stockYieldProgramRequests.length > 0" ng-repeat="stockYieldProgramRequest in $ctrl.stockYieldProgramRequests">\n    \t<div ng-if="::(stockYieldProgramRequest.program.requested && !stockYieldProgramRequest.program.assigned)">\n    \t\t<ng-switch on="stockYieldProgramRequest.entity">\n\t\t\t\t<p class="text-center" ng-switch-when="AU" translate="tradingProgram.syep.completion.subscribe_AU" translate-values="{accountId: stockYieldProgramRequest.accountId}"></p>\n\t\t\t\t<p class="text-center" ng-switch-default translate="tradingProgram.syep.completion.subscribe" translate-values="{accountId: stockYieldProgramRequest.accountId}"></p>\n\t\t\t</ng-switch>\n    \t</div>\n    \t<div ng-if="::(!stockYieldProgramRequest.program.requested && stockYieldProgramRequest.program.assigned)">\n\t\t\t<p class="text-center" translate="tradingProgram.syep.completion.unsubscribe" translate-values="{accountId: stockYieldProgramRequest.accountId}"></p>\n    \t</div>\n    </div>\n \t<br>\n\t<div class="alert alert-info">\n        <p class="text-center">{{ ($ctrl.containsAuEntity() ? \'tradingProgram.syep.completionMessage_AU\' : \'tradingProgram.syep.completionMessage\') | translate }}</p>\n\t</div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("stockYieldProgramConfigurationStep",{template:n(1557),controller:["DynamicSequenceService","CONTENT_HOST","$translate","ModalService",function(e,t,n,a){var r=this;r.$onInit=function(){r.stockYieldProgramRequests=e.getSequenceData().stockYieldProgramRequests,r.contentHost=t,r.openUnsubscriptionWarningModel=function(e){if(!angular.isUndefined(e)&&null!==e&&e.program.assigned&&!e.program.requested){var t={title:n.instant("AU"===e.entity?"tradingProgram.syep.confirmHeader_AU":"tradingProgram.syep.confirmHeader"),dialogClass:"modal-md",modalData:{pendingText:n.instant("AU"===e.entity?"tradingProgram.syep.confirmMessage_AU":"tradingProgram.syep.confirmMessage"),noSuccessScreen:!0}};a.openConfirmModal(t).then(function(t){"SUCCESS"!==t&&(e.program.requested=!0)})}},r.getHeaderText=function(e){return"AU"===e.entity?n.instant("tradingProgram.syep.header_AU"):"SG"===e.entity?n.instant("tradingProgram.syep.header_SG"):e.accountId.endsWith("-L")?n.instant("tradingProgram.syep.header_L-Segment"):n.instant("tradingProgram.syep.header")},r.getSYEPDescriptionText=function(e){return"AU"===e.entity?n.instant("tradingProgram.syep.message_AU"):e.accountId.endsWith("-L")?n.instant("tradingProgram.syep.message_L-Segment"):n.instant("tradingProgram.syep.message")};e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{onClick:function(){for(var t={},n=0;n<r.stockYieldProgramRequests.length;n++){var a=r.stockYieldProgramRequests[n];t[a.accountId]=a.program}e.stepForward({tradingPrograms:t})}}})}}]})}},function(e,t){e.exports='<div page-structure ng-form="$ctrl.stockYieldProgramForm">\r\n    <div ng-if="$ctrl.stockYieldProgramRequests.length > 0" ng-repeat="stockYieldProgramRequest in $ctrl.stockYieldProgramRequests">   \r\n\t\t<h4>{{ $ctrl.getHeaderText(stockYieldProgramRequest) }}</h4>\r\n    \t<br>\r\n        <div class="row">\r\n\t        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-2">\r\n\t            <p>\r\n\t                <img class="img-logo" src="https://{{::$ctrl.contentHost}}/images/am/features-syep.jpg" alt="{{ program.type }}" border="0">\r\n\t            </p>\r\n\t        </div>\r\n\t        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-8">\r\n\t            <p class="text-gray">{{ $ctrl.getSYEPDescriptionText(stockYieldProgramRequest) }}</p>\r\n\t        </div>\r\n\t        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-2">\r\n\t            <p>\r\n\t                <input type="checkbox" ng-model="stockYieldProgramRequest.program.requested" ng-change="$ctrl.openUnsubscriptionWarningModel(stockYieldProgramRequest)" ng-disabled="stockYieldProgramRequest.program.disabled" i-check/>\r\n\t            </p>\r\n\t        </div>\r\n    \t</div>\r\n    </div>\r\n</div>'},function(e,t,n){e.exports=function(e){e.component("stockYieldProgramPendingStep",{template:n(1559),controller:["$translate","DynamicSequenceService","StockYieldProgramService",function(e,t,n){var a=this;a.$onInit=function(){a.requests=t.getSequenceData().requests,a.entities=t.getSequenceData().entities,a.containsAuEntity=function(){return n.containsAuEntity(a.stockYieldProgramRequests)},t.configureButtons({canGoBack:!1,continueBtn:{onClick:t.stepForward,btnText:e.instant("word.cancelRequest")}})}}]})}},function(e,t){e.exports="<div page-structure>\r\n    <div class=\"text-center\">\r\n        <i class=\"fa fa-2x fa-exclamation-triangle text-gray\"></i>\r\n        <h5>{{ ($ctrl.containsAuEntity() ? 'tradingProgram.syep.pendingHeader_AU' : 'tradingProgram.syep.pendingHeader') | translate }}</h5>\r\n        <br>\r\n        <div class=\"alert alert-warning\">\r\n            <p>{{ ($ctrl.containsAuEntity() ? 'tradingProgram.syep.pendingMessage_AU' : 'tradingProgram.syep.pendingMessage') | translate }}</p>\r\n        </div>\r\n    </div>\r\n    <div ng-if=\"$ctrl.requests.length > 0\" ng-repeat=\"request in $ctrl.requests\">\r\n    \t<p>\r\n       \t\t<strong> {{'word.account' | translate}}:</strong><span class=\"margin-left-10\">{{request.accountId}}</span>\r\n   \t\t</p>\r\n   \t\t<p>\r\n       \t\t<strong> {{'word.referenceNumber' | translate}}:</strong><span class=\"margin-left-10\">{{request.id}}</span>\r\n   \t\t</p>\r\n   \t\t<p>\r\n       \t\t<strong>{{'word.dateOfRequest' | translate }}:</strong> <span class=\"margin-left-10\">{{request.requestTime | date:'shortDate'}}</span>\r\n   \t\t</p>\r\n   \t\t<br>\r\n    </div>\r\n</div>"},function(e,t,n){e.exports=function(e){e.component("stockYieldProgramNoChangeStep",{template:n(1561),controller:"GenericNoChangeStepController"})}},function(e,t){e.exports='<div page-structure>\n    <div class="text-center">\n        <i class="fa fa-2x fa-exclamation-triangle text-gray"></i>\n        <h5>{{ \'tradingProgram.syep.header\' | translate }}</h5>\n        <br>\n        <div class="alert alert-warning">\n            <p>{{ \'sequence.warning.nochange\' | translate }}</p>            \n        </div>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){n(1563)(e),n(1571)(e),n(1576)(e),n(1583)(e),n(1585)(e),n(1591)(e),n(1602)(e),n(1603)(e),n(1605)(e),n(1606)(e)}},function(e,t,n){e.exports=function(e){n(1564)(e),n(1565)(e),n(1567)(e),n(1569)(e)}},function(e,t){e.exports=function(e){function t(t,n,a){var r=this,i=function(e,t,a,r){return{alignment:e,btnText:n.instant(t),btnType:a,onClick:function(){r()}}},o=function(){a.delete(e.SERVER_PATH+"/TradingAccountTypeProfile",{requestId:r.request.requestId}).then(function(e){t.restartSequence()},function(e){r.errors=e.data.errors})};r.$onInit=function(){var e,n;r.state=t.getSequenceData().state,r.request=t.getSequenceData().portfolioMarginDowngradeRequest,r.errors={},t.configureButtons({canGoBack:t.getSequenceData().stepIndex>0,extraButtons:(e=r.state,n=[],"PENDING"===e||"CONFIRMED"===e?n.push(i("right","word.cancelRequest","primary",t.stepForward)):"IF_COMPLETE"===e?(n.push(i("right","word.confirmRequest","primary",t.stepForward)),r.request.mandatoryDowngrade||n.push(i("left","word.cancelRequest",null,o))):"IF_FAILED"===e&&n.push(i("right","word.continue","primary",t.stepForward)),n)})}}e.controller("PortfolioMarginDowngradeCtrl",t),t.$inject=["DynamicSequenceService","$translate","ResourceService"]}},function(e,t,n){e.exports=function(e){e.component("tradingAccountTypeConfigurationStep",{template:n(1566),controller:["$translate","CONTENT_HOST","DynamicSequenceService","ModalService","NavigationService","TradingAccountTypeService",function(e,t,n,a,r,i){var o=this,s=function(){n.stepForward(o.accountCapability).catch(function(t){if(t.data&&t.data.errors&&Object.keys(t.data.errors).length>0){o.customErrors=t.data.customErrors||[];var n={contentClass:"modal-gray",title:e.instant("word.attention"),templateUrl:"financial-info-error-modal.component",modalData:{errors:o.customErrors}};a.openModal(n)}})},l=function(){if(!(!o.originalAccountCapability||!o.accountCapability||("TRADING_ACCOUNT"!==o.accountCapability.accountType||"LEVERAGED_TRADING_ACCOUNT"!==o.originalAccountCapability.accountType&&"PROFESSIONAL_ACCOUNT"!==o.originalAccountCapability.accountType)&&("INVESTMENT_ACCOUNT"!==o.accountCapability.accountType||"TRADING_ACCOUNT"!==o.originalAccountCapability.accountType&&"LEVERAGED_TRADING_ACCOUNT"!==o.originalAccountCapability.accountType&&"PROFESSIONAL_ACCOUNT"!==o.originalAccountCapability.accountType))){var t={templateUrl:"trading-permission-profile-warning.component",title:e.instant("tradingAccountTypeProfile.header.downgrade"),modalData:{warning:e.instant("tradingAccountTypeProfile.downgrade.type."+o.accountCapability.accountType)},buttons:[{label:"word.cancel",alignment:"left",fn:a.closeModal},{label:"word.confirm",alignment:"right",btnType:"primary",fn:function(){a.closeModal(),s()}}]};a.openWarningModal(t)}else if(o.accountCapability&&o.rules.allowedMarginUpgradeForms[o.accountCapability.accountType]){t={templateUrl:"margin-upgrade-modal.component",title:e.instant("marginUpgrade.header"),modalData:{form:o.accountCapability.marginUpgradeForm,marginUpgradeForms:o.rules.allowedMarginUpgradeForms[o.accountCapability.accountType]}};a.openModal(t).then(function(e){e&&(o.accountCapability.marginUpgradeForm=e,s())})}else s()};o.$onInit=function(){o.accountCapability=n.getSequenceData().accountCapability,o.rules=n.getSequenceData().rules,o.allowedCfdPromotion=n.getSequenceData().rules.allowedCfdPromotion||!1,o.isIbAuCorp=n.getSequenceData().rules.isIbAuCorp||!1,o.isIbAu=n.getSequenceData().isIbAu||!1,o.isSmsf=n.getSequenceData().isSmsf||!1,o.contentHost=t,o.originalAccountCapability=angular.copy(o.accountCapability),o.getTradingAccountType=function(e){return i.getTradingAccountType(e,o.rules)},o.goToTradingPermissions=function(){r.navigate({id:"TradingPermissions",path:"/investmentconfig.webapp/sequences/trading/permissions/tradingPermissionSequence.html",skipFetch:!0})},n.configureButtons({canGoBack:n.getSequenceData().stepIndex>0,continueBtn:{onClick:l,isDisabled:function(){return 1==o.rules.allowedAccountCapabilities.length||!o.tradingAccountTypeForm.$valid}}})}}]})}},function(e,t){e.exports='<div page-structure ng-form="$ctrl.tradingAccountTypeForm">\n\t<h4>{{ \'tradingAccountTypeProfile.header.configure\' | translate }}</h4>\n\t<p ng-if="!$ctrl.isIbAu">{{ \'tradingAccountTypeProfile.message.configure\' | translate }}</p>\n\t<p ng-if="$ctrl.isIbAu">{{ \'tradingAccountTypeProfile.message.ibau.configure\' | translate }}</p>\n\t<br>\n\t\n\t<div class="alert alert-warning" ng-if="::$ctrl.rules.allowedAccountCapabilities.length === 1">\n\t\t<p>{{ \'tradingAccountTypeProfile.warning.noChange\' | translate }}</p>\n\t</div>\n\t\n    <div class="alert alert-warning" ng-if="$ctrl.allowedCfdPromotion">\n    \t<p ng-if="$ctrl.isSmsf" translate="tradingAccountType.ibau.margin.restriction.smsf" translate-values="{linkTagStart: \'<a href=&quot;https://ibkr.info/article/3352&quot; target=&quot;_blank&quot;>\',  linkTagEnd: \'</a>\'}"></p>\n    \t<p ng-if="!$ctrl.isIbAuCorp && !$ctrl.isSmsf" translate="tradingAccountType.ibau.margin.restriction.retail" translate-values="{linkTagStart: \'<a href=&quot;https://ibkr.info/article/3352&quot; target=&quot;_blank&quot;>\',  linkTagEnd: \'</a>\'}"></p>\n    \t<p ng-if="$ctrl.isIbAuCorp && !$ctrl.isSmsf" translate="{{ (\'tradingAccountType.ibau.margin.restriction.corp\') }}" translate-values="{linkTagStart: \'<a href=&quot;https://ibkr.info/article/3291&quot; target=&quot;_blank&quot;>\',  linkTagEnd: \'</a>\'}"></p>\n    \t\n        <span translate="{{(\'tradingAccountType.ibau.cfd.promote.msg\')}}" translate-values="{linkTagStart: \'<a href=&quot;https://\' + $ctrl.contentHost + \'/en/index.php?f=38596&hm=au&ex=au&rgt=1&rsk=0&pm=0&rst=040404010101080101&quot; target=&quot;_blank&quot;>\', linkTagEnd: \'</a>\'}"></span>&nbsp;<a href="javascript:void(0)" ng-click="$ctrl.goToTradingPermissions()">{{\'tradingAccountType.ibau.cfd.promote.clickHere\' | translate}}</a>\n    </div>\n\n\t<div class="alert alert-warning" ng-if="$ctrl.accountCapability.accountType === \'PORTFOLIO_MARGIN\' && !$ctrl.rules.assignedPortfolioMargin">\n\t\t<p translate="tradingAccountTypeProfile.warning.portfolioMarginUpgrade" translate-values="{ breakTag: \'<br>\' }"></p>\n\t</div>\n\t<br>\n\t\x3c!-- \n\t\tFinancial Info Custom Errors\n\t--\x3e\n\t<financial-info-error ng-if="$ctrl.customErrors.length > 0" errors="$ctrl.customErrors"></financial-info-error>\n\t\x3c!-- \n\t\tAccount Type\n\t--\x3e\n\t<am-form-select name="tradingAccountCapability" ng-model="$ctrl.accountCapability" options="$ctrl.rules.allowedAccountCapabilities" option-key="$ctrl.getTradingAccountType" track-by-id="accountType" label-text="{{ \'tradingAccountTypeProfile.label.type\' | translate }}" required></am-form-select>\t\n\t<br>\t\t\n\t<div ng-if="$ctrl.accountCapability.accountType === \'MARGIN\' && $ctrl.rules.assignedPortfolioMargin">\n\t\t<div class="text-center">\n\t\t\t<i class="fa fa-2x fa-exclamation-triangle text-gray"></i>\n\t\t\t<h5>{{ \'tradingAccountTypeProfile.header.downgrade\' | translate }}</h5>\n\t\t\t<br />\n\t\t\t<p translate="{{\'tradingAccountTypeProfile.warning.downgrade\' }}" translate-values="{ breakTag : \'<br />\' }"></p>\n\t\t</div>\n\t</div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("tradingAccountTypeDowngradeCompletionStep",{template:n(1568),controller:["$translate","DynamicSequenceService","NavigationService",function(e,t,n){var a=this;a.$onInit=function(){a.result=t.getSequenceData().result||void 0,t.configureButtons({canGoBack:!1,extraButtons:[{alignment:"right",btnType:"primary",btnText:e.instant("word.ok"),onClick:n.navigateToPrevBreadcrumb}]})}}]})}},function(e,t){e.exports='<div page-structure>\n\t<br>\n\t<div ng-if="$ctrl.result.result === \'SUCCESS\'">\n\t\t<div align="center">\n\t\t\t<i class="fa fa-4x fa-check-circle text-success"></i>\n\t\t</div>\n\t\t<h1 class="text-center text-success">{{\'word.thankYou\' | translate}}</h1>\n\t\t<h5 class="text-center text-dark">{{ \'accountTypeDowngradeRequest.message.success\' | translate }}</h5>\n\t\t<p>\n\t\t\t<strong> {{\'word.referenceNumber\' | translate}}:</strong><span class="margin-left-10">{{$ctrl.result.requestId}}</span>\n\t\t</p>\n\t\t<p>\n\t\t\t<strong>{{\'word.dateOfRequest\' | translate }}:</strong> <span class="margin-left-10">{{$ctrl.result.requested | date:\'shortDate\'}}</span>\n\t\t</p>\n\t</div>\n\t<div ng-if="$ctrl.result.result === \'FAILURE\'">\n\t\t<div align="center">\n\t\t\t<i class="fa fa-2x fa-exclamation-triangle text-gray"></i>\n\t\t</div>\n\t\t<h5 class="text-center text-dark">{{ \'accountTypeDowngradeRequest.message.failure\' | translate }}</h5>\n\t</div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("tradingAccountTypeDowngradeConfirmationStep",{template:n(1570),controller:["$translate","DynamicSequenceService","ModalService",function(e,t,n){var a=this,r=function(){var a={contentClass:"modal-gray",title:e.instant("word.attention"),templateUrl:"account-type-downgrade-confirmation-modal.component",dialogClass:"modal-md"};n.openModal(a).then(function(e){e&&t.stepForward()})};a.$onInit=function(){a.violation=t.getSequenceData().violation||void 0,a.capabilityDowngrades=t.getSequenceData().capabilityDowngrades||[],a.eligible=function(){return a.violation&&0===a.violation.positions.length&&0===a.violation.balances.length&&a.violation.whatifExcessLiquidation>=0},t.configureButtons({canGoBack:t.getSequenceData().stepIndex>0,continueBtn:{onClick:r,isDisabled:function(){return!a.eligible()}}})}}]})}},function(e,t){e.exports="<div page-structure>\n\t<h4>{{ 'accountTypeDowngradeRequest.header.eligibility' | translate }}</h4>\n\t<p>\n\t\t{{ 'accountTypeDowngradeRequest.message.CASH' | translate }}\n\t\t<ul>\n\t\t\t<li translate=\"accountTypeDowngradeRequest.violation.liquidity\" translate-values=\"{ 'strongStartTag': '<strong>', 'strongEndTag': '</strong>'}\"></li>\n\t\t\t<li translate=\"accountTypeDowngradeRequest.violation.position\" translate-values=\"{ 'strongStartTag': '<strong>', 'strongEndTag': '</strong>'}\"></li>\n\t\t\t<li translate=\"accountTypeDowngradeRequest.violation.cash\" translate-values=\"{ 'strongStartTag': '<strong>', 'strongEndTag': '</strong>'}\"></li>\n\t\t</ul>\n\t</p>\n\t\x3c!-- \n\t\tDpwngrade warnings\n\t--\x3e\n\t<capability-downgrade ng-if=\"$ctrl.capabilityDowngrades.length > 0\" capability-downgrades=\"$ctrl.capabilityDowngrades\"></capability-downgrade>\n\t\x3c!-- \n\t\tDowngrade Violations\t\t\n\t--\x3e\n\t<div class=\"alert alert-warning\" ng-if=\"::!$ctrl.violation\">\n\t\t<p>{{ 'internal.error.request_process' | translate }}</p>\n\t</div>\n\t<div ng-if=\"::$ctrl.violation\">\n\t\t<div class=\"alert alert-gray\">\n\t\t\t<p translate=\"accountTypeDowngradeRequest.note\" translate-values=\"{ 'strongStartTag': '<strong>', 'strongEndTag': '</strong>'}\"></p>\n\t\t</div>\n\t\t\n\t\t<div class=\"alert alert-warning\" ng-if=\"::!$ctrl.eligible()\">\n\t\t\t<p>{{ 'accountTypeDowngradeRequest.message.ineligible' | translate }}</p>\n\t\t</div>\n\t\t\n\t\t<h6 class=\"subtitle\" ng-if=\"::$ctrl.violation.currency !== 'UNKNOWN'\">{{ 'accountTypeDowngradeRequest.header.current' | translate }}</h6>\n\t\t<am-form-label ng-if=\"::$ctrl.violation.currency !== 'UNKNOWN'\" label-text=\"{{ ('accountTypeDowngradeRequest.label.maintenanceMargin' | translate) + ':' }}\" value-text=\"{{$ctrl.violation.currency + ' ' + ($ctrl.violation.currMaintMargin | currency:'')}}\"></am-form-label>\n\t\t<am-form-label ng-if=\"::$ctrl.violation.currency !== 'UNKNOWN'\" label-text=\"{{ ('accountTypeDowngradeRequest.label.excessLiquidity' | translate) + ':' }}\" value-text=\"{{$ctrl.violation.currency + ' ' + ($ctrl.violation.currExcessLiquidation | currency:'')}}\"></am-form-label>\n\t\t\t\n\t\t<h6 class=\"subtitle\" ng-if=\"::$ctrl.violation.currency !== 'UNKNOWN'\">{{ 'accountTypeDowngradeRequest.header.downgrade' | translate}}</h6>\n\t\t<am-form-label ng-if=\"::$ctrl.violation.currency !== 'UNKNOWN'\" label-text=\"{{ ('accountTypeDowngradeRequest.label.maintenanceMargin' | translate) + ':' }}\" value-text=\"{{$ctrl.violation.currency + ' ' + ($ctrl.violation.whatifMaintMargin | currency:'')}}\"></am-form-label>\n\t\t<am-form-label ng-if=\"::$ctrl.violation.currency !== 'UNKNOWN'\" label-text=\"{{ ('accountTypeDowngradeRequest.label.excessLiquidity' | translate) + ':' }}\" value-text=\"{{$ctrl.violation.currency + ' ' + ($ctrl.violation.whatifExcessLiquidation | currency:'')}}\" value-class=\"{{$ctrl.violation.whatifExcessLiquidation < 0 ? 'red' : undefined }}\"></am-form-label>\n\t\t<am-form-label ng-if=\"::$ctrl.violation.currency !== 'UNKNOWN'\" label-text=\"{{ ('accountTypeDowngradeRequest.label.eodMargin' | translate) + ':' }}\" value-text=\"{{$ctrl.violation.currency + ' ' + ($ctrl.violation.whatifRegTMargin | currency:'')}}\"></am-form-label>\n\t\t<am-form-label ng-if=\"::$ctrl.violation.currency !== 'UNKNOWN'\" label-text=\"{{ ('accountTypeDowngradeRequest.label.sma' | translate) + ':' }}\" value-text=\"{{$ctrl.violation.currency + ' ' + ($ctrl.violation.whatifRegTExcess | currency:'')}}\"></am-form-label>\n\t\t\n\t\t<position-violation ng-if=\"::$ctrl.violation.positions.length > 0\" positions=\"$ctrl.violation.positions\"></position-violation>\n\t\t<cash-violation ng-if=\"::$ctrl.violation.balances.length > 0\" balances=\"$ctrl.violation.balances\"></cash-violation>\n\t</div>\n</div>"},function(e,t,n){e.exports=function(e){n(1572)(e),n(1574)(e)}},function(e,t,n){e.exports=function(e){e.component("capabilityLevelCompletionStep",{template:n(1573),controller:["$translate","AM_BRANCH","DynamicSequenceService","NavigationService",function(e,t,n,a){var r=this,i=function(){var e={id:"Logout",path:"/AccountManagement/Logout",navigateAction:NavigationAction.REDIRECT};a.navigate(e)};r.$onInit=function(){var o;r.capabilityLevels=n.getSequenceData().capabilityLevels||{},n.configureButtons({canGoBack:!1,extraButtons:(o=[],"CORE"!==t?o.push({alignment:"right",btnType:"primary",btnText:e.instant("word.logout"),onClick:i}):o.push({alignment:"right",btnType:"primary",btnText:e.instant("word.ok"),onClick:a.navigateToPrevBreadcrumb}),o)})}}]})}},function(e,t){e.exports='<div page-structure>\n\t<div align="center">\n\t\t<i class="fa fa-4x fa-check-circle text-success"></i>\n\t</div>\n\t<h1 class="text-center text-success">{{\'word.thankYou\' | translate}}</h1>\n\t<h3 class="text-center text-dark" translate="capabilityLevel.message.completion"></h3>\n</div>'},function(e,t,n){e.exports=function(e){e.component("capabilityLevelConfigurationStep",{template:n(1575),controller:["AM_BRANCH","DynamicSequenceService",function(e,t){var n=this,a=function(){t.stepForward({capabilityLevel:n.capabilityLevel}).catch(function(e){n.customErrors=e.data.customErrors||[]})};n.$onInit=function(){n.productType=t.getSequenceData().productType,n.capability=t.getSequenceData().capability,n.capabilityLevel=t.getSequenceData().capabilityLevel||"UNKNOWN",n.ibEntity=t.getSequenceData().ibEntity||"UNKNOWN",n.accountCapability=t.getSequenceData().accountCapability||void 0,n.availableCapabilityLevels=t.getSequenceData().availableCapabilityLevels||[],n.customErrors=[],t.configureButtons({canGoBack:t.getSequenceData().stepIndex>0||"CORE"===e,continueBtn:{onClick:a}})}}]})}},function(e,t){e.exports='<div page-structure="fullPanel" no-border="true" ng-form="$ctrl.capabilityLevelForm">\n\t<div class="trading-permissions">\n\t\t<div class="row">\n\t\t\t<div class="col-12 col-lg-9 col-left">\n\t\t\t\t\x3c!-- \n\t\t\t\t\tCustom Errors\n\t\t\t\t--\x3e\n\t\t\t\t<financial-info-error ng-if="$ctrl.customErrors.length > 0" errors="$ctrl.customErrors"></financial-info-error>\n\t\t\t\t\x3c!-- \n\t            \tCapability Levels\n\t            --\x3e\n\t            <div ng-if="$ctrl.availableCapabilityLevels.length > 0">\n            \t\t<option-level-form ng-if="$ctrl.capability === \'OPTION\'" ng-model="$ctrl.capabilityLevel" levels="$ctrl.availableCapabilityLevels" account-capability="$ctrl.accountCapability" ib-entity="$ctrl.ibEntity"></option-level-form>\n            \t</div>\n\t\t\t</div>\n\t\t\t<div class="col-12 col-lg-3 col-right">\n\t\t\t\t<trading-product-requirement product-type="{{$ctrl.productType}}"></trading-product-requirement>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>'},function(e,t,n){e.exports=function(e){n(1577)(e),n(1579)(e),n(1581)(e)}},function(e,t,n){e.exports=function(e){e.component("fundingModelStep",{template:n(1578),controller:["AM_BRANCH","DynamicSequenceService","FundingModelService",function(e,t,n){var a=this,r={AUTO:1,PRE_FUND:2};a.$onInit=function(){a.supportedFundingModels=t.getSequenceData().supportedFundingModels||[],a.clearingSegmentEntity=t.getSequenceData().clearingSegmentEntity,(a.supportedFundingModels||[]).sort(function(e,t){return r[e]-r[t]}),a.getImage=n.getImage,a.enroll=function(e){t.stepForward({fundingModel:e})},t.configureButtons({canGoBack:"CORE"===e})}}]})}},function(e,t){e.exports='<div page-structure>\n\t<h4 ng-if="::$ctrl.supportedFundingModels.length > 1">{{ \'cryptoFundingModel.header\' | translate }}</h4>\n\t<br>\n\t<div class="trade-crypto" ng-if="::$ctrl.supportedFundingModels.length > 0">\n\t\t<div class="trade-crypto-type" ng-repeat="model in $ctrl.supportedFundingModels">\n    \t\t<div class="trade-crypto-img">\n\t            <img alt="{{model}}" ng-src="{{ $ctrl.getImage(model) }}" border="0">\n\t        </div>\n    \t\t<div class="trade-crypto-text" ng-if="model === \'AUTO\'">\n\t            <h4 ng-class="{ \'mb-0\' : $ctrl.clearingSegmentEntity === \'IBL_ZH\' }">{{ \'cryptoFundingModel.type.AUTO\' | translate }}</h4>\n                <p ng-if="$ctrl.clearingSegmentEntity === \'IBL_ZH\'" class="text-muted">{{\'cryptoFundingModel.subheader.IBL_ZH\' | translate}}</p>\n\t            <p>{{ \'cryptoFundingModel.message.AUTO\' | translate }}</p>\n\t            <ul class="paralist">\n\t            \t<li>{{ \'cryptoFundingModel.auto.faq.1\' | translate }}</li>\n\t            \t<li>{{ \'cryptoFundingModel.auto.faq.2\' | translate }}</li>\n\t            </ul>\n\t            <br>\n\t            <p>\n\t            \t<am-button btn-type="primary" btn-text="{{ \'cryptoFundingModel.label.autoEnroll\' | translate }}" on-click="$ctrl.enroll(\'AUTO\')"></am-button>\n\t            </p>\n\t        </div>\n\t        <div class="trade-crypto-text" ng-if="model === \'PRE_FUND\'"> \n\t            <h4 ng-class="{ \'mb-0\' : $ctrl.clearingSegmentEntity === \'IBL_ZH\' }">{{ \'cryptoFundingModel.type.PRE_FUND\' | translate }}\n\t            \t<span class="badge badge-new">{{ \'word.new\' | translate }}</span>\n\t            </h4>\n                <p ng-if="$ctrl.clearingSegmentEntity === \'IBL_ZH\'" class="text-muted">{{\'cryptoFundingModel.subheader.IBL_ZH\' | translate}}</p>\n\t            <p>{{ \'cryptoFundingModel.message.PRE_FUND\' | translate }}</p>\n\t            <ul class="paralist">\n\t\t            <li translate="cryptoFundingModel.prefund.faq.1" translate-values="{provider: (\'clearingSegmentEntity.type.\' + $ctrl.clearingSegmentEntity | translate)}"></li>\n\t\t            <li ng-if="$ctrl.clearingSegmentEntity === \'IBL_PAXOS\'" translate="cryptoFundingModel.prefund.faq.2" translate-values="{provider: (\'clearingSegmentEntity.type.\' + $ctrl.clearingSegmentEntity | translate)}"></li>\n\t\t            <li translate="cryptoFundingModel.prefund.faq.3" translate-values="{provider: (\'clearingSegmentEntity.type.\' + $ctrl.clearingSegmentEntity | translate)}"></li>\n\t\t            <li translate="cryptoFundingModel.prefund.faq.4" translate-values="{provider: (\'clearingSegmentEntity.type.\' + $ctrl.clearingSegmentEntity | translate)}"></li>\n\t\t            <li translate="cryptoFundingModel.prefund.faq.6" translate-values="{provider: (\'clearingSegmentEntity.type.\' + $ctrl.clearingSegmentEntity | translate)}"></li>\n\t\t            <li translate="cryptoFundingModel.prefund.faq.7" translate-values="{provider: (\'clearingSegmentEntity.type.\' + $ctrl.clearingSegmentEntity | translate)}"></li>\n\t\t            <li translate="cryptoFundingModel.prefund.faq.5" translate-values="{provider: (\'clearingSegmentEntity.type.\' + $ctrl.clearingSegmentEntity | translate)}"></li>\n\t            </ul>\n\t            <br>\n\t            <p>\n\t            \t<am-button btn-type="primary" btn-text="{{ \'cryptoFundingModel.label.prefundEnroll\' | translate }}" on-click="$ctrl.enroll(\'PRE_FUND\')"></am-button>\n\t            </p>\n\t        </div>\n    \t</div>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("fundingModelDowngradeStep",{template:n(1580),controller:["DynamicSequenceService",function(e){var t=this;t.$onInit=function(){t.clearingSegmentEntity=e.getSequenceData().clearingSegmentEntity,e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{onClick:e.stepForward}})}}]})}},function(e,t){e.exports='<div page-structure>\n\t<h4>{{ \'page.title.DowngradeFundingModel\' | translate }}</h4>\n\t<h6 class="subtitle">{{ \'cryptoFundingModel.downgrade.header\' | translate }}</h6>\n\t<ul class="paralist">\n\t\t<li translate="cryptoFundingModel.downgrade.eligibility1" translate-values="{provider: (\'clearingSegmentEntity.type.\' + $ctrl.clearingSegmentEntity | translate)}">\n\t\t<li translate="cryptoFundingModel.downgrade.eligibility2" translate-values="{provider: (\'clearingSegmentEntity.type.\' + $ctrl.clearingSegmentEntity | translate)}">\n\t\t<li translate="cryptoFundingModel.downgrade.eligibility3" translate-values="{provider: (\'clearingSegmentEntity.type.\' + $ctrl.clearingSegmentEntity | translate)}">\n\t</ul>\n\t<div class="notes">\n\t\t<ul class="paralist">\n\t\t\t<li>{{ \'cryptoFundingModel.downgrade.note1\' | translate }}</li>\n\t\t\t<li translate="cryptoFundingModel.downgrade.note2" translate-values="{provider: (\'clearingSegmentEntity.type.\' + $ctrl.clearingSegmentEntity | translate)}">\n\t\t</ul>\n\t</div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("fundingModelCompletionStep",{template:n(1582),controller:["$translate","DynamicSequenceService","NavigationService",function(e,t,n){var a=this;a.$onInit=function(){a.request=t.getSequenceData().request,t.configureButtons({canGoBack:!1,extraButtons:[{alignment:"right",btnType:"primary",btnText:e.instant("word.ok"),onClick:n.navigateToPrevBreadcrumb}]})}}]})}},function(e,t){e.exports='<div page-structure>\n\t<div align="center">\n\t\t<i class="fa fa-4x fa-check-circle text-success"></i>\n\t</div>\n\t<h1 class="text-center text-success">{{\'word.success\' | translate}}</h1>\n\t<h3 class="text-center text-dark">{{\'cryptoFundingModel.message.downgrade.success\' | translate}}</h3>\n    <h6 class="text-center">{{\'word.referenceNumber\' | translate}}: {{::$ctrl.request.id}}</h6>\n</div>'},function(e,t,n){e.exports=function(e){n(1584)(e)}},function(e,t){e.exports=function(e){function t(e,t,n){var a=this;a.$onInit=function(){a.isIbPrimeQualified=e.getSequenceData().isIbprimeQualified,a.institutionalServices=e.getSequenceData().institutionalServices,a.displayWarning=function(e){"IBPRIME"===e.type?a.isIbprimeSelected=e.enabled:"IBEXEC"===e.type&&(a.isIbexecutionSelected=e.enabled)},e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{onClick:function(){e.stepForward(a.institutionalServices).catch(function(e){var r={};a.customErrors=[],e.data&&e.data.customErrors&&e.data.customErrors.length>0&&(a.customErrors=e.data.customErrors,r.contentClass="modal-gray",r.title=n.instant("word.attention"),r.templateUrl="financial-info-error-modal.component",r.modalData={errors:a.customErrors},t.openModal(r))})}}}),angular.forEach(a.institutionalServices,function(e){a.displayWarning(e)})}}e.controller("InstitutionalServiceCtrl",t),t.$inject=["DynamicSequenceService","ModalService","$translate"]}},function(e,t,n){e.exports=function(e){n(1586)(e),n(1588)(e),n(1590)(e)}},function(e,t,n){e.exports=function(e){e.component("exchangeAccessPrerequisite",{template:n(1587),controller:["$translate","DynamicSequenceService","ModalService",function(e,t,n){var a=this;a.$onInit=function(){a.individuals=t.getSequenceData().individuals||{},a.entityRules=t.getSequenceData().entityRules||{},t.configureButtons({canGoBack:t.getSequenceData().stepIndex>0,continueBtn:{onClick:function(){var r={};for(var i in a.individuals)r[i]={maritalStatus:a.individuals[i].maritalStatus,dependents:a.individuals[i].dependents};t.stepForward(r).catch(function(t){if(response.data&&response.data.customErrors&&response.data.customErrors.length>0){var a={title:e.instant("word.error"),modalData:{errors:response.data.customErrors}};n.openErrorModal(a)}})}}})}}]})}},function(e,t){e.exports='<div page-structure ng-form="$ctrl.exchangeAccessPrerequisiteForm">\n\t<h4>{{ \'tradingPermissionProfile.header.prerequisite\' | translate }}</h4>\n\t<br>\n\t\n\t<div ng-if="$ctrl.entityRules" ng-repeat="(association, individual) in $ctrl.individuals">\n\t\t<h4>{{ \'association.type.\' + association | translate }}</h4>\n\t\t<individual-entity-form ng-if="::$ctrl.entityRules[association]" ng-model="individual" rules="$ctrl.entityRules[association]" hide-header="true"></individual-entity-form>\n\t</div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("exchangeAccessRequisiteNotification",{template:n(1589),controller:["DynamicSequenceService",function(e){var t=this;t.$onInit=function(){t.primaryUser=e.getSequenceData().primaryUser||"",e.configureButtons({canGoBack:!1})}}]})}},function(e,t){e.exports='<div page-structure>\n\t<div class="text-center">\n\t\t<i class="fa fa-2x fa-exclamation-triangle text-gray"></i>\n\t\t<h5>{{ \'tradingPermissionProfile.header.restricted\' | translate }}</h5>\n\t\t<br>\n\t\t<div class="alert alert-warning">\n\t\t\t<p translate="tradingPermissionProfile.message.restricted" translate-values="{primaryUser: $ctrl.primaryUser}"></p>\t\t\n\t\t</div>\n\t</div>\n</div>'},function(e,t){function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(e){function t(e,t,a,r,i,o){var s=this,l=function(t,n,i,o,l){s.exams=[],s.customErrors=[],s.capabilityExams=[],s.riskAppetites=[];var u={requested:t||[],downgraded:n||[],experiences:i||{},limitedOptionTrading:o,acknowledgedCapabilities:l||[],programs:s.programs||[]};a.stepForward(u).catch(function(t){if(t.data&&t.data.errors&&Object.keys(t.data.errors).length>0)if(s.exams=t.data.exams||[],s.capabilityExams=t.data.capabilityExams||[],s.riskAppetites=t.data.riskAppetites||[],s.customErrors=t.data.customErrors||[],s.acknowledgements=t.data.acknowledgements||[],s.customErrors&&s.customErrors.length>0||s.exams&&s.exams.length>0||s.capabilityExams&&s.capabilityExams.length>0||s.riskAppetites&&s.riskAppetites.length>0){var n={contentClass:"modal-gray",title:e.instant("word.attention"),templateUrl:"financial-info-error-modal.component",modalData:{errors:s.customErrors,exams:s.exams,capabilityExams:s.capabilityExams,riskAppetites:s.riskAppetites}};r.openModal(n)}else if(s.acknowledgements.length>0){n={contentClass:"modal-gray",title:e.instant("word.attention"),templateUrl:"financial-info-acknowledgement-modal.component",modalData:{acknowledgements:s.acknowledgements||[]}};r.openModal(n).then(function(e){angular.isUndefined(e)||(l=e.acknowledgedCapabilities||[],s.acknowledgements=e.acknowledgements||[],0===s.acknowledgements.length&&c(l))})}})},c=function(t){for(var n=[],a=[],i={},o=!1,c=(t=t||[],0);c<s.selections.length;c++){var u=s.selections[c];if(u.requested){for(var d=0;d<u.permissions.length;d++){var p=u.permissions[d];p.requested&&n.push(p),p.downgraded&&a.push(p)}if(s.selectionRules[u.productType].assetExperienceRules)if("FOREX"===u.productType)(u.permissions||[]).some(function(e){return"LEVFX"===e.code&&e.requested})&&(i[u.assetType]=u.experience);else i[u.assetType]=u.experience;s.selectionRules[u.productType].limitedTrading&&(o=u.limitedTrading)}}if(a.length>0){var g={templateUrl:"trading-permission-profile-warning.component",title:e.instant("tradingPermissionProfile.header.downgrade"),modalData:{warning:e.instant("tradingPermissionProfile.message.downgrade")},buttons:[{label:"word.no",alignment:"left",fn:r.closeModal},{label:"word.yes",alignment:"right",btnType:"primary",fn:function(){!function(e,t,n,a){r.closeModal(),l(e,t,n,a,[])}(n,a,i,o)}}]};r.openWarningModal(g)}else l(n,a,i,o,t)},u=function(e,t){if(e===t)return!0;var a=!0;return n(e)!==n(t)?a=!1:angular.isUndefined(e)||angular.isUndefined(t)?a=!1:e.minimum!==t.minimum?a=!1:e.maximum!==t.maximum&&(a=!1),a},d=function(e,t){return e===t||n(e)===n(t)&&(!angular.isUndefined(e)&&!angular.isUndefined(t)&&e.every(function(e){return t.filter(function(t){return e===t||e.productType===t.productType&&(e.limitedTrading===t.limitedTrading&&(e.assetType===t.assetType&&(!!function(e,t){if(e===t)return!0;var a=!0;return n(e)!==n(t)?a=!1:angular.isUndefined(e)||angular.isUndefined(t)?a=!1:e.assetType!==t.assetType?a=!1:e.knowledge!==t.knowledge?a=!1:e.label!==t.label?a=!1:u(e.years,t.years)&&u(e.trades,t.trades)||(a=!1),a}(e.experience,t.experience)&&!!function(e,t){if(e===t)return!0;return n(e)===n(t)&&!angular.isUndefined(e)&&!angular.isUndefined(t)&&e.every(function(e){return t.filter(function(t){return e===t||n(e)===n(t)&&!angular.isUndefined(e)&&!angular.isUndefined(t)&&e.requested===t.requested&&e.pending===t.pending&&e.qualified===t.qualified&&e.downgraded===t.downgraded&&e.disabled===t.disabled&&e.code===t.code&&e.location===t.location&&e.region===t.region&&e.productType===t.productType}).length})}(e.permissions,t.permissions))))}).length}))};s.$onInit=function(){s.currentSelections=a.getSequenceData().currentSelections||[],s.selections=a.getSequenceData().selections||[],s.selectionRules=a.getSequenceData().selectionRules,s.programs=a.getSequenceData().programs||[],s.programRules=a.getSequenceData().programRules,s.exams=a.getSequenceData().exams||[],s.capabilityExams=a.getSequenceData().capabilityExams||[],s.riskAppetites=a.getSequenceData().riskAppetites||[],s.restrictions=a.getSequenceData().restrictions||[],s.tpRestrictionNotes=a.getSequenceData().tpRestrictionNotes||[],s.acknowledgements=a.getSequenceData().acknowledgements||[],s.customErrors=[],s.getErrors=function(){return a.getSequenceData().errors};var e=i.getNavigationValidator();i.setNavigationValidator(function(t){return"TradingPermissionConfiguration"!==a.getSequenceData().id||a.getSequenceData().totalSteps>1?e(t):d(s.currentSelections,s.selections)?e(t):function(){o.showUnsavedChanges(t)}}),a.configureButtons({canGoBack:a.getSequenceData().stepIndex>0,continueBtn:{onClick:c,isDisabled:function(){return!s.selectionRules||0===s.selections.length}}})}}e.controller("TradingExchangeConfigurationCtrl",t),t.$inject=["$translate","$filter","DynamicSequenceService","ModalService","NavigationService","NavigationGuardService"]}},function(e,t,n){e.exports=function(e){n(1592)(e),n(1594)(e),n(1596)(e),n(1598)(e),n(1600)(e)}},function(e,t,n){e.exports=function(e){e.component("eventContractConfigureStep",{template:n(1593),controller:["DynamicSequenceService",function(e){var t=this;t.$onInit=function(){t.getImage=function(){return"/images/am/eventtrader-hero.png"},t.request=function(){e.stepForward()}}}]})}},function(e,t){e.exports='<div page-structure="fullPanel" no-border="true">\n\t<div class="row">\n\t\t<div class="col-12 col-lg-8 col-left">\n\t\t\t<h4>{{ \'eventContract.header\' | translate }}</h4>\n\t\t\t<p>{{ \'eventContract.message\' | translate }}</p>\n\t\t\t<br>\n\t\t\t<p><strong>{{ \'eventContract.label.market\' | translate }}</strong></p>\n\t\t\t<p>{{ \'eventContract.labelMessage.market\' | translate }}</p>\n\t\t\t<br>\n\t\t\t<p><strong>{{ \'eventContract.label.trade\' | translate }}</strong></p>\n\t\t\t<p>{{ \'eventContract.labelMessage.trade\' | translate }}</p>\n\t\t\t<br>\n\t\t\t<p><strong>{{ \'eventContract.label.profit\' | translate }}</strong></p>\n\t\t\t<p>{{ \'eventContract.labelMessage.profit\' | translate }}</p>\n\t\t\t<br>\n            <p>\n            \t<am-button btn-type="primary" btn-text="{{ \'eventContract.label.request\' | translate }}" on-click="$ctrl.request()"></am-button>\n            \t<span class="margin-left-10">\n            \t\t<a href="https://eventtrader.interactivebrokers.com/" target="_blank">{{ \'word.learnMore\' | translate}}</a>\n            \t</span>\n            </p>\n\t\t</div>\n\t\t<div class="col-12 col-lg-4 col-right">\n\t\t\t<div class="trade-crypto-img">\n            \t<img alt="{{model}}" ng-src="{{ $ctrl.getImage() }}" border="0">\n        \t</div>\n\t\t</div>\n\t</div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("exchangeErrorStep",{template:n(1595),controller:["$translate","AM_BRANCH","DynamicSequenceService","NavigationAction","NavigationService",function(e,t,n,a,r){var i=function(){var e={id:"Logout",path:"/AccountManagement/Logout",navigateAction:a.REDIRECT};r.navigate(e)};this.$onInit=function(){var a;n.configureButtons({canGoBack:!1,extraButtons:(a=[],"CORE"!==t?a.push({alignment:"right",btnType:"primary",btnText:e.instant("word.logout"),onClick:i}):a.push({alignment:"right",btnType:"primary",btnText:e.instant("word.ok"),onClick:r.navigateToPrevBreadcrumb}),a)})}}]})}},function(e,t){e.exports='<div page-structure="fullPanel" no-border="true">\n\t<div class="trading-permissions">\n\t\t<div class="alert alert-warning">\n\t\t\t<div class="row">\n\t\t\t\t<div class="col-xs-12 col-sm-12 col-md-1 col-lg-1">\n\t\t\t\t\t<p class="text-center"><i class="fa fa-2x fa-exclamation-triangle text-gray"></i></p>\n\t\t\t\t</div>\t\n\t\t\t\t<div class="col-xs-12 col-sm-12 col-md-11 col-lg-11">\n\t\t\t\t\t<p translate="tradingPermissionProfile.error.INELIGIBLE" translate-values="{breakTag: \'<br>\', ulStartTag: \'<ul>\', liStartTag: \'<li>\', liEndTag: \'</li>\', ulEndTag: \'</ul>\'}"></p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("exchangeLocationConfigurationStep",{template:n(1597),controller:["$translate","AM_BRANCH","DynamicSequenceService","ModalService",function(e,t,n,a){var r=this,i=function(e,t){var a={requested:e||[],downgraded:t||[],limitedOptionTrading:r.limitedOptionTrading};n.stepForward(a).catch(function(e){r.customErrors=e.data.customErrors||[]})},o=function(){for(var t=[],n=[],o=0;o<r.permissions.length;o++){var s=r.permissions[o];s.requested&&t.push(s),s.downgraded&&n.push(s)}if(n.length>0){var l={templateUrl:"trading-permission-profile-warning.component",title:e.instant("tradingPermissionProfile.header.downgrade"),modalData:{warning:e.instant("tradingPermissionProfile.message.downgrade")},buttons:[{label:"word.no",alignment:"left",fn:a.closeModal},{label:"word.yes",alignment:"right",btnType:"primary",fn:function(){!function(e,t){a.closeModal(),i(e,t)}(t,n)}}]};a.openWarningModal(l)}else i(t,n)};r.$onInit=function(){r.productType=n.getSequenceData().productType,r.limitedOptionTradingEligible=n.getSequenceData().limitedOptionTradingEligible||!1,r.limitedOptionTrading=n.getSequenceData().limitedOptionTrading||!1,r.permissions=n.getSequenceData().permissions||[],n.configureButtons({canGoBack:n.getSequenceData().stepIndex>0||"CORE"===t,continueBtn:{onClick:o,isDisabled:function(){if(0===r.permissions.length)return!0;var e=r.permissions.filter(function(e){return e.requested||e.pending})||[],t=r.permissions.filter(function(e){return e.downgraded})||[];return 0===e.length&&0===t.length}}})}}]})}},function(e,t){e.exports='<div page-structure="fullPanel" no-border="true">\n\t<div class="trading-permissions">\n\t\t<div class="row">\n\t\t\t<div class="col-12 col-lg-9 col-left">\n\t\t\t\t<h4>{{ \'tradingPermissionProfile.header.locations\' | translate:{productType: (\'tradingExchange.type.\' + $ctrl.productType | translate)} }}</h4>\n\t\t\t\t<br>\n\t\t\t\t<hr>\n\t\t\t\t<br>\n\t\t\t\t\x3c!-- \n\t\t\t\t\tNo permission to select\n\t\t\t\t--\x3e\n\t\t\t\t<div class="alert alert-warning" ng-if="$ctrl.permissions.length === 0">\n\t\t\t\t\t<p translate="tradingPermissionProfile.error.INELIGIBLE" translate-values="{breakTag: \'<br>\', ulStartTag: \'<ul>\', liStartTag: \'<li>\', liEndTag: \'</li>\', ulEndTag: \'</ul>\'}"></p>\n\t\t\t\t</div>\n\t\t\t\t\x3c!-- \n\t\t\t\t\tDisplay errors\n\t\t\t\t--\x3e\n\t\t\t\t<div ng-if="$ctrl.customErrors.length > 0" class="alert alert-warning">\n\t\t\t\t    <p ng-if="$ctrl.customErrors.length === 1">{{ $ctrl.customErrors[0] }}</p>\n\t\t\t\t    <ul ng-if="$ctrl.customErrors.length > 1">\n\t\t\t\t        <li ng-repeat="error in $ctrl.customErrors track by $index">{{ error }}</li>\n\t\t\t\t    </ul>\n\t\t\t\t</div>\n\t\t\t\t\x3c!-- \n\t\t\t\t\tLimited Option Trading\n\t\t\t\t--\x3e\n\t\t\t\t<div ng-if="$ctrl.limitedOptionTradingEligible">\n\t\t\t\t\t<div class="form-group form-icheck">\n\t\t\t\t\t\t<input type="checkbox" ng-model="$ctrl.limitedOptionTrading" i-check>\n\t\t\t\t\t\t<label class="form-check-label">\n\t\t\t\t\t\t\t<strong>{{ \'tradingPermissionProfile.label.limitedTrading\' | translate:{product: (\'tradingExchange.type.\' + $ctrl.productType | translate)} }}</strong>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t<hr>\n\t\t\t\t</div>\n\t\t\t\t\x3c!-- \n\t\t\t\t\tExchange Location Selection\n\t\t\t\t--\x3e\n\t\t\t\t<exchange-locations permissions="$ctrl.permissions"></exchange-locations>\n\t\t\t</div>\n\t\t\t<div class="col-12 col-lg-3 col-right">\n\t\t\t\t<trading-product-requirement product-type="{{$ctrl.productType}}"></trading-product-requirement>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("exchangeLocationReviewStep",{template:n(1599),controller:["DynamicSequenceService",function(e){var t=this;t.$onInit=function(){var n=e.getSequenceData().permissions||[];t.productPermissions=function(e,t){for(var n={},a=e.reduce(function(e,n){var a=n[t];return e[a]=e[a]||[],e[a].push(n),e},{}),r=Object.keys(a),i=0;i<r.length;i++)n[r[i]]=a[r[i]];return n}(n,"productType")||{},e.configureButtons({canGoBack:!0,continueBtn:{onClick:e.stepForward,isDisabled:function(){return 0===n.length}}})}}]})}},function(e,t){e.exports='<div page-structure="fullPanel" no-border="true">\n\t<div class="trading-permissions">\n\t\t<div class="row">\n\t\t\t<div class="col-12 col-lg-9 col-left">\n\t\t\t\t<h4>{{ \'tradingPermissionProfile.header.reviewLocations\' | translate }}</h4>\n\t\t\t\t<br>\n\t\t\t\t<hr>\n\t\t\t\t<br>\n\t\t\t\t\x3c!-- \n\t\t\t\t\tNo permission to select\n\t\t\t\t--\x3e\n\t\t\t\t<div class="alert alert-warning" ng-if="($ctrl.productPermissions | objectLength) === 0">\n\t\t\t\t\t<p translate="tradingPermissionProfile.error.INELIGIBLE" translate-values="{breakTag: \'<br>\', ulStartTag: \'<ul>\', liStartTag: \'<li>\', liEndTag: \'</li>\', ulEndTag: \'</ul>\'}"></p>\n\t\t\t\t</div>\n\t\t\t\t<div ng-if="($ctrl.productPermissions | objectLength) > 0" ng-repeat="(product, permissions) in $ctrl.productPermissions">\n\t\t\t\t\t<div class="form-group form-icheck">\n\t\t\t\t\t\t<label class="form-check-label">\n\t\t\t\t\t\t\t<strong>{{ \'tradingExchange.type.\' + product | translate }}</strong>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t<div name="{{ permission.code }}" class="col-12 col-sm-6" ng-repeat="permission in permissions">\n\t\t\t\t\t\t\t<div class="form-group form-icheck">\n\t\t\t\t\t\t\t\t<label class="form-check-label">\n\t\t\t\t\t\t\t\t\t{{ \'tradingExchange.location.\' + permission.location | translate }}\n\t\t\t\t\t\t\t\t\t<span ng-if="permission.pending" class="text-small text-dark margin-left-5">{{ \'(\' + (\'word.pending\' | translate) + \')\'}}</span>\t\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t</div>\t\t\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<hr ng-if="!$last">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="col-12 col-lg-3 col-right">\n\t\t\t\t<h5>{{ \'tradingPermissionProfile.label.requirement\' | translate}}</h5>\n\t\t\t\t<br>\n\t\t\t\t<p>{{ \'tradingPermissionProfile.requirement.3\' | translate }}</p>\n\t\t\t\t<br>\n\t\t\t\t<p>{{ \'tradingPermissionProfile.requirement.2\' | translate }}</p>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("tradingProductReviewStep",{template:n(1601),controller:"AgreementStepController"})}},function(e,t){e.exports='<div page-structure="fullPanel" no-border="true">\n\t<div class="trading-permissions" ng-form="$ctrl.tradingProductConfirmationForm">\n\t\t<h4>{{ \'tradingProductSummary.confirm\' | translate }}</h4>\n\t\t<br>\n\t\t<hr>\n\t\t<br>\n\t\t\x3c!-- \n\t\t\tTP Notes\n\t\t--\x3e\n\t\t<am-notes ng-if="::$ctrl.getSequenceData().notes.length > 0" severity="LOW" notes="$ctrl.getSequenceData().notes"></am-notes>\n\t\t\x3c!-- \n\t\t\tFinancial Net Worth\n\t\t--\x3e\n    \t<financial-net-worth-review ng-if="::($ctrl.getSequenceData().displaySections | amContains: \'FINANCIAL_DATA\') && $ctrl.getSequenceData().financialInfo.financialAssets" financial-net-worth="$ctrl.getSequenceData().financialInfo.financialAssets" revised="{{$ctrl.getSequenceData().revised}}"></financial-net-worth-review>\n\t\t\x3c!-- \n\t\t\tSources of Wealth\n\t\t--\x3e\n\t    <sources-of-wealth-review ng-if="::($ctrl.getSequenceData().displaySections | amContains: \'SOW\') && $ctrl.getSequenceData().financialInfo.sourcesOfWealth.length > 0" sources-of-wealth="$ctrl.getSequenceData().financialInfo.sourcesOfWealth" revised="{{$ctrl.getSequenceData().revised}}"></sources-of-wealth-review>\n\t\t\x3c!-- \n\t\t\tInvestment Objectives\n\t\t--\x3e\n\t    <investment-objectives-review ng-if="::($ctrl.getSequenceData().displaySections | amContains: \'OBJECTIVE\') && $ctrl.getSequenceData().financialInfo.objectives.length > 0" objectives="$ctrl.getSequenceData().financialInfo.objectives" revised="{{$ctrl.getSequenceData().revised}}"></investment-objectives-review>\n\t\t\x3c!-- \n\t\t\tInvestment Experiences\n\t\t--\x3e\n\t    <investment-experiences-review ng-if="::($ctrl.getSequenceData().displaySections | amContains: \'EXPERIENCE\') && $ctrl.getSequenceData().financialInfo.experiences && ($ctrl.getSequenceData().financialInfo.experiences | objectLength) > 0" experiences="$ctrl.getSequenceData().financialInfo.experiences" revised="{{$ctrl.getSequenceData().revised}}"></investment-experiences-review>\n\t\t\x3c!-- \n\t\t\tExchange Location Review\n\t\t--\x3e\n\t\t<exchange-location-review ng-if="::$ctrl.getSequenceData().qualifiedExchanges.length > 0 || $ctrl.getSequenceData().requestedExchanges.length > 0 || $ctrl.getSequenceData().downgradedExchanges.length > 0 || $ctrl.getSequenceData().removedExchanges.length > 0" qualified="$ctrl.getSequenceData().qualifiedExchanges" requested="$ctrl.getSequenceData().requestedExchanges" downgraded="$ctrl.getSequenceData().downgradedExchanges" removed="$ctrl.getSequenceData().removedExchanges"></exchange-location-review>\n\t\t\x3c!-- \n\t\t\tCapability Levels\n\t\t--\x3e\n\t\t<capability-levels-review ng-if="::($ctrl.getSequenceData().capabilityLevels | objectLength) > 0" levels="$ctrl.getSequenceData().capabilityLevels"></capability-levels-review>\n\t\t\x3c!-- \n\t\t\tCash Forex Details\n\t\t--\x3e\n\t\t<cash-forex-review ng-if="::$ctrl.getSequenceData().cashForexDetails" cash-forex-details="$ctrl.getSequenceData().cashForexDetails" revised="true"></cash-forex-review>\n\t\t\x3c!-- \n\t\t\tEmployer Details\n\t\t--\x3e\n\t\t<div ng-if="::$ctrl.getSequenceData().entities.length > 0" ng-repeat="entity in $ctrl.getSequenceData().entities">\n\t\t\t<p class="subtitle"><strong>{{ \'employerDetails.header\' | translate:{entity: (entity | amEntityName)} }}</strong></p>\n\t\t\t<employer-details-review ng-if="entity.employerDetails && entity.employerDetails.employmentType !== \'UNKNOWN\'" employer="entity.employerDetails"></employer-details-review>\n\t    </div>\n\t\t\x3c!-- \n\t\t\tAgreement Record\n\t\t--\x3e\n\t\t<agreement-record ng-if="::$ctrl.agreementRecord" record="$ctrl.agreementRecord"></agreement-record>\n\t</div>\n</div>'},function(e,t){e.exports=function(e){function t(e){var t=this,n=function(){var n={cashForexDetails:t.cashForexDetails,signatureSubmissionData:t.categories.length>0?t.signature.signatureSubmissionData:null,categories:t.categories};e.stepForward(n).catch(function(e){e&&e.data.errors&&(t.errors=e.data.errors)})};t.$onInit=function(){t.cashForexDetails=e.getSequenceData().cashForexDetails||{},t.categories=e.getSequenceData().categories||[],t.signature=e.getSequenceData().signature||{},e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{onClick:n,isDisabled:function(){return t.cashForexDetails.forexDealer&&!t.cashForexDetails.marginCertification}}})}}e.controller("CashForexCtrl",t),t.$inject=["DynamicSequenceService"]}},function(e,t,n){e.exports=function(e){e.component("capabilityUpgradeErrorStep",{template:n(1604),controller:["$q","$translate","BreadcrumbAction","WHITE_BRANDING_DETAILS","PageService","NavigationService","DynamicSequenceService","TradingProductService","FinancialInfoService","WarningDescriptorService",function(e,t,n,a,r,i,o,s,l,c){var u=this,d=function(){var e;e=u.acknowledgements.length>0?u.acknowledgements.map(function(e){return e.capability}):u.riskAcceptanceTasks.length>0?u.riskAcceptanceTasks.map(function(e){return e.capability}):[];var t={experiences:u.experiences,acknowledgedCapabilities:e,descriptors:u.descriptors,riskAcceptanceTasks:u.riskAcceptanceTasks};o.stepForward(t).catch(function(e){u.exams=e.data.exams||[],u.riskAppetites=e.data.riskAppetites||[],u.customErrors=e.data.customErrors||[],u.acknowledgements=e.data.acknowledgements||[],u.mandatoryTasks=e.data.mandatoryTasks||[],u.hardStopWarnings=e.data.hardStopWarnings||[],u.riskAcceptanceTasks=e.data.riskAcceptanceTasks||[],u.counter=u.riskAcceptanceTasks.length>0?60:0,o.configureButtons({extraButtons:f()})})},p=function(){return u.counter>0},g=function(){if(o.getDefaultBackFn()(),u.descriptors.length>0){for(var t=[],n=0;n<u.descriptors.length;n++){var a=u.descriptors[n];a.action="DECLINE",t.push(c.updateWarning(a))}e.all(t)}},f=function(){var e=[];return u.customErrors.length>0||u.hardStopWarnings.length>0?(e.push({alignment:"right",btnType:"primary",btnText:t.instant("word.cancelRequest"),onClick:i.navigateToPrevBreadcrumb}),e):(u.counter>0?e.push({alignment:"right",btnType:"primary",btnIcon:"fa-spin fa-spinner",onClick:d,isDisabled:p}):e.push({alignment:"right",btnType:"primary",btnText:t.instant("word.continue"),onClick:d}),e.push({alignment:"left",btnType:"primary",btnText:t.instant("word.back"),onClick:g}),e)};u.$onInit=function(){u.productType=o.getSequenceData().productType,u.customErrors=o.getSequenceData().customErrors||[],u.exams=o.getSequenceData().exams||[],u.riskAppetites=o.getSequenceData().riskAppetites||[],u.acknowledgements=o.getSequenceData().acknowledgements||[],u.mandatoryTasks=o.getSequenceData().mandatoryTasks||[],u.hardStopWarnings=o.getSequenceData().hardStopWarnings||[],u.riskAcceptanceTasks=o.getSequenceData().riskAcceptanceTasks||[],u.experiences=o.getSequenceData().experiences||{},u.pageEntry=o.getSequenceData().pageEntry||void 0,u.descriptors=[],u.isBranded=a.isBranded()||!1,u.whiteBrandingTitle=a.getTitle()||"IBKR",u.counter=u.riskAcceptanceTasks.length>0?60:0,u.configureFinancialInfo=l.configure,u.navigateFinancialInfo=function(){u.pageEntry.breadcrumb=n.REPLACE,i.navigate(u.pageEntry)},u.viewProductInfo=function(){if("UNKNOWN"!==u.productType)return s.getProductInfo(u.productType)},o.configureButtons({extraButtons:f()}),u.acknowledgements.length>0&&r.setOnPageLoad(function(){c.recordAcknowledgementWarnings(u.acknowledgements).then(function(e){u.descriptors=e||[]},function(e){u.descriptors=[]}).finally(function(){r.setIsPageLoading(!1)})}),u.riskAcceptanceTasks.length>0&&r.setOnPageLoad(function(){c.recordRiskAcceptanceTaskWarnings(u.riskAcceptanceTasks).then(function(e){u.descriptors=e||[]},function(e){u.descriptors=[]}).finally(function(){r.setIsPageLoading(!1)})})},u.$doCheck=function(){u.previousCounter!==u.counter&&0===u.counter&&o.configureButtons({extraButtons:f()}),u.previousCounter=u.counter}}]})}},function(e,t){e.exports='<div page-structure="fullPanel" no-border="true">\n\t<div class="trading-permissions">\n\t\t<div ng-if="::$ctrl.customErrors.length === 0">\n\t\t\t\x3c!-- \n\t\t\t\tCapability Exams\n\t\t\t--\x3e\n\t\t\t<capability-exam ng-if="$ctrl.exams.length > 0" exams="$ctrl.exams"></capability-exam>\n\t\t\t\x3c!-- \n\t\t\t\tCapability Acknowledgments\n\t\t\t--\x3e\n\t\t\t<div ng-if="$ctrl.acknowledgements.length > 0">\n\t\t\t\t<capability-acknowledgement acknowledgements="$ctrl.acknowledgements"></capability-acknowledgement>\n\t\t\t\t<div class="alert alert-info">\n\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n\t\t\t\t\t\t\t<p>{{ \'capability.message.infoChangeAcknowledgement\' | translate }}</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t\x3c!-- \n\t\t\t\tRisk Appetite\n\t\t\t--\x3e\n\t\t\t<risk-appetite ng-if="$ctrl.riskAppetites.length > 0" risk-appetite-types="$ctrl.riskAppetites"></risk-appetite>\n\t\t\t\x3c!-- \n\t\t\t\tCapability Mandatory Tasks\n\t\t\t--\x3e\n\t\t\t<capability-mandatory-task ng-if="$ctrl.mandatoryTasks.length > 0" mandatory-tasks="$ctrl.mandatoryTasks" experiences="$ctrl.experiences"></capability-mandatory-task>\n\t\t\t\x3c!-- \n\t\t\t\tCapability Risk Acceptance Task\n\t\t\t--\x3e\n\t\t\t<capability-risk-acceptance-tasks ng-if="$ctrl.riskAcceptanceTasks.length > 0" risk-acceptance-tasks="$ctrl.riskAcceptanceTasks" counter="$ctrl.counter"></capability-risk-acceptance-tasks>\n\t\t\t\x3c!-- \n\t\t\t\tHard Stop Warnings\n\t\t\t--\x3e\n\t\t\t<hard-stop-warning ng-if="$ctrl.hardStopWarnings.length > 0" warnings="$ctrl.hardStopWarnings"></hard-stop-warning>\n\t\t</div>\n\t\t\x3c!-- \n\t\t\tFinancial Info Custom Errors\n\t\t--\x3e\n\t\t<financial-info-error ng-if="$ctrl.customErrors.length > 0" errors="$ctrl.customErrors" category="TP_UPGRADE"></financial-info-error>\n\t\t\n\t\t<div class="row">\n\t\t\t<div class="col-12">\n\t\t\t\t<p ng-if="::$ctrl.pageEntry" translate="tradingPermissionProfile.message.financialInfoError" translate-values="{startTag: \'<a href=&quot;javascript:void(0);&quot; ng-click=&quot;$ctrl.navigateFinancialInfo()&quot;>\', endTag: \'</a>\'}" translate-compile></p>\n\t\t\t\t<br>\n\t\t\t\t<a ng-if="::$ctrl.productType !== \'UNKNOWN\'" href="{{$ctrl.viewProductInfo()}}" target="_blank">{{ \'word.learnMore\' | translate}}</a>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>'},function(e,t){e.exports=function(e){function t(e,t,n,a,r,i,o,s,l,c,u,d){var p=this,g=function(){return"INDIVIDUAL"!==p.customerType&&"JOINT"!==p.customerType&&("MIFIR_INFO"===p.loginMessageType||"MIFIR_INFO_CMDTY"===p.loginMessageType||"FATCA_CRS"===p.loginMessageType)},f=function(){var e;!p.cryptoRequested||p.acknowledgedCryptoWarning?(e=g()?{path:"/Universal/servlet/service.ClassicAmLandingServlet",navigateAction:s.REDIRECT}:{id:p.loginMessageType,title:r.instant("loginMessageType."+p.loginMessageType),path:"template/page/loginmessage/realTimeLoginMessageSequence.html",pageData:{sequenceParameters:{id:p.loginMessageId}},skipFetch:!0,breadcrumb:l.REPLACE},o.navigate(e)):p.displayCryptoError=!0},m=function(){if(!p.cryptoRequested||p.acknowledgedCryptoWarning)if(t.isSimplifiedPlatform())d.closeWebView();else{var e={id:"Logout",path:"/AccountManagement/Logout",navigateAction:s.REDIRECT};o.navigate(e)}else p.displayCryptoError=!0},v=function(){!p.cryptoRequested||p.acknowledgedCryptoWarning?i.navigateToPendingItems():p.displayCryptoError=!0},h=function(){!p.cryptoRequested||p.acknowledgedCryptoWarning?o.navigateToPrevBreadcrumb():p.displayCryptoError=!0},b=function(){d.closeWebView()},y=function(){p.fundingPageEntry.breadcrumb=l.CLEAR,o.navigate(p.fundingPageEntry)};p.$onInit=function(){n.getSequenceData().fetchPendingItems&&i.fetchPendingItems(),p.pendingExchanges=n.getSequenceData().pendingExchanges||[],p.downgradedExchanges=n.getSequenceData().downgradedExchanges||[],p.accountType=n.getSequenceData().accountType,p.services=n.getSequenceData().services,p.loginMessageType=n.getSequenceData().loginMessageType,p.loginMessageId=n.getSequenceData().loginMessageId,p.customerType=n.getSequenceData().customerType,p.documents=n.getSequenceData().documents||[],p.exams=n.getSequenceData().exams||[],p.riskForms=n.getSequenceData().riskForms||[],p.masterAction=n.getSequenceData().masterAction||!1,p.cryptoRequested=n.getSequenceData().cryptoRequested||!1,p.fundingPageEntry=n.getSequenceData().fundingPageEntry||void 0,p.fundingModels=n.getSequenceData().fundingModels||[],p.acknowledgedCryptoWarning=!1,p.contentHost=e,p.getServices=function(){for(var e="",t=0;t<p.services.length;t++){var n=p.services[t];e+=r.instant("institutionalServiceProfile.type."+n.type),t!==p.services.length-1&&(e+=", ")}return e},p.agreedCryptoWarning=function(){p.displayCryptoError=!p.acknowledgedCryptoWarning},n.configureButtons({canGoBack:!1,extraButtons:function(){var e=[];if("CORE"!==c){var n=i.getActiveLoginTask();if(angular.isUndefined(n)||"MASTER_ACTION"!==n.customType){if(t.isSimplifiedPlatform()){var a=t.isImpact()?r.instant("impact.action.explore"):r.instant("globaltrader.action.explore");e.push({alignment:"right",btnType:"primary",btnText:a,onClick:m})}else e.push({alignment:"right",btnType:"primary",btnText:r.instant("word.logout"),onClick:m});return e}}"CFTC_OCR"===p.loginMessageType?e.push({alignment:"right",btnType:"primary",btnText:r.instant("ocr.continue"),onClick:f}):"MIFIR_INFO"===p.loginMessageType||"MIFIR_INFO_CMDTY"===p.loginMessageType?e.push({alignment:"right",btnType:"primary",btnText:r.instant("word.continue"),onClick:f}):"CHINA_CONNECT"===p.loginMessageType?e.push({alignment:"right",btnType:"primary",btnText:r.instant("word.continue"),onClick:f}):"FATCA_CRS"===p.loginMessageType?e.push({alignment:"right",btnType:"primary",btnText:r.instant("word.continue"),onClick:f}):"PMRGN_DOWNGRADE_REVIEW"===p.loginMessageType?e.push({alignment:"right",btnType:"primary",btnText:r.instant("word.continue"),onClick:f}):(p.exams.length>0&&e.push({alignment:"right",btnType:"primary",btnText:r.instant("word.pendingItems"),onClick:v}),t.isSimplifiedPlatform()?(p.fundingPageEntry&&e.push({alignment:"right",btnText:r.instant("impact.action.fund"),onClick:y}),a=t.isImpact()?r.instant("impact.action.explore"):r.instant("globaltrader.action.explore"),e.push({alignment:"right",btnType:"primary",btnText:a,onClick:b})):e.push({alignment:"right",btnType:"primary",btnText:r.instant("word.ok"),onClick:h}));return e}()}),(angular.isUndefined(p.loginMessageType)||""===p.loginMessageType)&&u.onReady().then(function(){return u.showCes("367669975")})}}e.controller("TradingProfileCompletionCtrl",t),t.$inject=["CONTENT_HOST","UserPlatformService","DynamicSequenceService","$window","$translate","AmInterfaceService","NavigationService","NavigationAction","BreadcrumbAction","AM_BRANCH","TelemetryService","NativeAppCommunicationService"],e.component("realTimeLoginMessage",{bindings:{loginMessageType:"<"},template:["<h4>{{ 'loginTask.header.' + $ctrl.loginMessageType | translate }}</h4>",'<div class="alert alert-gray">','<p ng-if="$ctrl.loginMessageType === \'CFTC_OCR\'" translate="loginTask.introduction.CFTC_OCR" translate-value-start-tag="<a href=&quot;http://ibkb.interactivebrokers.com/node/2274&quot; target=&quot;_blank&quot;>" translate-value-end-tag="</a>"></p>',"<p ng-if=\"$ctrl.loginMessageType === 'MIFIR_INFO'\">{{ 'loginTask.introduction.MIFIR_INFO' | translate }}</p>","<p ng-if=\"$ctrl.loginMessageType === 'MIFIR_INFO_CMDTY'\">{{ 'loginTask.introduction.MIFIR_INFO_CMDTY' | translate }}</p>","<p ng-if=\"$ctrl.loginMessageType === 'CHINA_CONNECT'\">{{ 'loginTask.introduction.CHINA_CONNECT' | translate }}</p>","<p ng-if=\"$ctrl.loginMessageType === 'FATCA_CRS'\">{{ 'loginTask.introduction.FATCA_CRS' | translate }}</p>","<p ng-if=\"$ctrl.loginMessageType === 'PMRGN_DOWNGRADE_REVIEW'\">{{ 'loginTask.message.PMRGN_DOWNGRADE_REVIEW' | translate }}</p>","</div>","<br>"].join("")})}},function(e,t){e.exports=function(e){function t(e,t){var n=this;this.$onInit=function(){n.reasons=t.getSequenceData().reasons||[],n.downgradeExchanges=t.getSequenceData().downgradeExchanges||[],t.configureButtons({canGoBack:!1,continueBtn:{onClick:t.stepForward,btnText:e.instant("word.cancel")}})}}e.controller("TradingProfilePendingCtrl",t),t.$inject=["$translate","DynamicSequenceService"]}},function(e,t,n){e.exports=function(e){n(1608)(e),n(1610)(e),n(1612)(e),n(1614)(e),n(1616)(e),n(1618)(e),n(1620)(e),n(1622)(e),n(1624)(e),n(1626)(e),n(1628)(e),n(1630)(e),n(1632)(e),n(1634)(e),n(1636)(e),n(1638)(e),n(1640)(e),n(1642)(e),n(1644)(e),n(1646)(e),n(1648)(e),n(1650)(e),n(1652)(e),n(1654)(e),n(1656)(e),n(1658)(e),n(1660)(e),n(1662)(e),n(1664)(e),n(1666)(e),n(1668)(e),n(1670)(e),n(1672)(e)}},function(e,t,n){e.exports=function(e){e.component("tutorialCompletionStep",{template:n(1609),controller:["$translate","DynamicSequenceService","NavigationService","AmInterfaceService",function(e,t,n,a){var r=this;r.$onInit=function(){r.tutorialResult=t.getSequenceData().tutorialResult,r.fetchPendingItems=t.getSequenceData().fetchPendingItems||!1,r.fetchPendingItems&&a.fetchPendingItems(),t.configureButtons({canGoBack:!1,extraButtons:[{alignment:"right",btnType:"primary",btnText:e.instant("word.ok"),onClick:n.navigateToPrevBreadcrumb}]})}}]})}},function(e,t){e.exports='<div page-structure>\n\t<div align="center">\n\t\t<i class="fa fa-4x fa-check-circle text-success"></i>\n\t</div>\n\t<h1 class="text-center text-success">{{\'word.thankYou\' | translate}}</h1>\n\t<h3 class="text-center text-dark">{{ \'tutorial.completion.header\' | translate }}</h3>\n</div>'},function(e,t,n){e.exports=function(e){e.component("tutorialConfigurationStep",{template:n(1611),controller:["DynamicSequenceService",function(e){var t=this,n=function(){e.stepForward(t.tutorial.questions).catch(function(e){t.errors=e.data.errors||void 0})};t.$onInit=function(){t.tutorial=e.getSequenceData().tutorial||void 0,t.errors=void 0,t.getErrors=function(){return t.errors},e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{onClick:n}})}}]})}},function(e,t){e.exports='<div page-structure ng-form="$ctrl.capabilityTutorialForm">\n\t<div form-server-errors="$ctrl.getErrors()">\n\t\t<h4>{{ \'tutorial.title.\' + $ctrl.tutorial.recordFormNumber | translate }}</h4>\n\t\t<tutorial-form ng-model="$ctrl.tutorial"></tutorial-form>\n\t</div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("tutorialConfigureLaterStep",{template:n(1613),controller:["$translate","DynamicSequenceService","NavigationService",function(e,t,n){var a=this;a.$onInit=function(){a.capability=t.getSequenceData().capability,a.exchanges=t.getSequenceData().exchanges||[],t.configureButtons({canGoBack:!1,extraButtons:[{alignment:"right",btnType:"primary",btnText:e.instant("word.ok"),onClick:n.navigateToPrevBreadcrumb}]})}}]})}},function(e,t){e.exports='<div page-structure>\n\t<div align="center">\n\t\t<i class="fa fa-2x fa-exclamation-triangle"></i>\n\t</div>\n\t<h1 class="text-center text-success">{{\'word.thankYou\' | translate}}</h1>\n\t<h3 class="text-center text-dark" translate="tutorial.configureLater.header" translate-values="{ capability: (\'capability.type.\' + $ctrl.capability | translate)}"></h3>\n</div>'},function(e,t,n){e.exports=function(e){e.component("tutorialConfirmationStep",{template:n(1615),controller:["DynamicSequenceService",function(e){var t=this;t.$onInit=function(){t.capability=e.getSequenceData().capability,t.agreed=e.getSequenceData().agreed||!1,t.errors={},e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{onClick:function(){e.stepForward({agreed:t.agreed})}}})}}]})}},function(e,t){e.exports='<div page-structure ng-form="$ctrl.capabilityConfirmationForm">\n\t<ng-switch on="$ctrl.capability">\n        <crypto-risk-acknowledgement ng-switch-when="CRYPTO"></crypto-risk-acknowledgement>\n        <div ng-switch-default>\n            <h4 translate="tutorial.confirmation.header" translate-values="{capability: (\'capability.type.\' + $ctrl.capability | translate) }"></h4>\n            <p translate="tutorial.confirmation.message" translate-values="{capability: (\'capability.type.\' + $ctrl.capability | translate) }"></p>\n        </div>\n    </ng-switch>\n\t<br>\n\t<div class="row">\n\t\t<div class="col-xs-2 col-sm-1 col-md-1 col-lg-1">\n\t\t\t<p class="text-center">\n\t\t\t\t<input type="radio" name="agreed" ng-model="$ctrl.agreed" ng-value="{{ true }}" i-check required />\n\t\t\t</p>\n\t\t</div>\n\t\t<div class="col-xs-10 col-sm-11 col-md-11 col-lg-11">\n\t\t\t<p>{{\'tutorial.label.agree\' | translate }}</p>\n\t\t</div>\n\t</div>\n\t<div class="row">\n\t\t<div class="col-xs-2 col-sm-1 col-md-1 col-lg-1">\n\t\t\t<p class="text-center">\n\t\t\t\t<input type="radio" name="agreed" ng-model="$ctrl.agreed" ng-value="{{ false }}" i-check required />\n\t\t\t</p>\n\t\t</div>\n\t\t<div class="col-xs-10 col-sm-11 col-md-11 col-lg-11">\n\t\t\t<p>{{\'tutorial.label.disagree\' | translate }}</p>\n\t\t</div>\n\t</div>\n\t<div class="alert alert-warning" ng-if="$ctrl.errors[\'agreed\']">\n\t\t<p>{{ \'field.error.\' + $ctrl.errors[\'agreed\'] | translate }}</p>\n\t</div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("tutorialCoverPageStep",{template:n(1617),controller:["DynamicSequenceService",function(e){var t=this;t.$onInit=function(){t.capability=e.getSequenceData().capability,t.agreed=e.getSequenceData().agreed||!1,t.errors={},e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{onClick:function(){e.stepForward({agreed:t.agreed})}}})}}]})}},function(e,t){e.exports='<div page-structure ng-form="$ctrl.tutorialForm">\n    <ng-switch on="$ctrl.capability">\n        <crypto-risk-acknowledgement ng-switch-when="CRYPTO"></crypto-risk-acknowledgement>\n        <div ng-switch-default>\n            <h4>{{ \'tutorial.coverPage.heading\' | translate }}</h4>\n            <p translate="tutorial.coverPage.message" translate-values="{capability: (\'capability.type.\' + $ctrl.capability | translate) }"></p>\n        </div>\n    </ng-switch>\n    \n    <br>\n\t<div class="row">\n\t\t<div class="col-xs-2 col-sm-1 col-md-1 col-lg-1">\n\t\t\t<p class="text-center">\n\t\t\t\t<input type="radio" name="agreed" ng-model="$ctrl.agreed" ng-value="{{ true }}" i-check required />\n\t\t\t</p>\n\t\t</div>\n\t\t<div class="col-xs-10 col-sm-11 col-md-11 col-lg-11">\n\t\t\t<p>{{\'tutorial.label.agree\' | translate }}</p>\n\t\t</div>\n\t</div>\n\t<div class="row">\n\t\t<div class="col-xs-2 col-sm-1 col-md-1 col-lg-1">\n\t\t\t<p class="text-center">\n\t\t\t\t<input type="radio" name="agreed" ng-model="$ctrl.agreed" ng-value="{{ false }}" i-check required />\n\t\t\t</p>\n\t\t</div>\n\t\t<div class="col-xs-10 col-sm-11 col-md-11 col-lg-11">\n\t\t\t<p>{{\'tutorial.label.disagree\' | translate }}</p>\n\t\t</div>\n\t</div>\n\t<div class="alert alert-warning" ng-if="$ctrl.errors[\'agreed\']">\n\t\t<p>{{ \'field.error.\' + $ctrl.errors[\'agreed\'] | translate }}</p>\n\t</div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("tutorialSummaryStep",{template:n(1619),controller:["DynamicSequenceService",function(e){var t=this;t.$onInit=function(){t.summary=e.getSequenceData().summary||void 0,e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{onClick:e.stepForward}})}}]})}},function(e,t){e.exports='<div page-structure>\n\t<h4>{{ \'tutorial.summary.header\' | translate }}</h4>\n\t<div ng-if="::$ctrl.summary" ng-repeat="(questionId, question) in $ctrl.summary.questionResult">\n\t\t<div class="row" >\n\t\t\t<div class="col-xs-12 col-sm-12 col-md-10 col-lg-10">\n\t\t\t\t<p>\n\t\t\t\t\t<strong>{{questionId + \'. \'}}</strong>\n\t\t\t\t\t<span>{{ question.name }}</span>\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t\t<div class="col-xs-12 col-sm-12 col-md-2 col-lg-2">\n\t\t\t\t<p>\n\t\t\t\t\t<strong>{{ ( question.answer === \'true\' ? \'word.correct\' : \'word.incorrect\' ) | translate}}</strong>\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t</div>\n\t\t<hr ng-if="!$last">\n\t</div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("bondTutorialCharacteristicsStep",{template:n(1621),controller:["DynamicSequenceService",function(e){this.$onInit=function(){e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{onClick:e.stepForward}})}}]})}},function(e,t){e.exports='<div page-structure>\n\t<h4>{{ \'bond.chara.header\' | translate }}</h4>\n\t<p>{{ \'bond.chara.para1\' | translate }}</p>\n\t<p>{{ \'bond.chara.para2\' | translate }}</p>\n\t<p>{{ \'bond.chara.para3\' | translate }}</p>\n\t<p>{{ \'bond.chara.para4\' | translate }}</p>\n\t<p>{{ \'bond.chara.para5\' | translate }}</p>\n\t<p>{{ \'bond.chara.para6\' | translate }}</p>\n\t<p>{{ \'bond.chara.para7\' | translate }}</p>\n\t<div class="table-responsive">\n\t\t<table width="100%" cellpadding="0" cellspacing="0" border="0" class="table">\n\t\t\t<thead>\n\t\t\t\t<tr>\n\t\t\t\t\t<th align="left" valign="middle">{{ \'tutorial.label.quality\' | translate }}</th>\n\t\t\t\t\t<th align="left" valign="middle">{{ \'tutorial.label.moodys\' | translate }}</th>\n\t\t\t\t\t<th align="left" valign="middle">{{ \'tutorial.label.standard\' | translate }}</th>\n\t\t\t\t</tr>\n\t\t\t</thead>\n\t\t\t<tbody>\n\t\t\t\t<tr>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'tutorial.label.bestQuality\' | translate }}</td>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'Aaa\' }}</td>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'AAA\' }}</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'tutorial.label.highQuality\' | translate }}</td>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'Aa\' }}</td>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'AA\' }}</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'tutorial.label.upperQuality\' | translate }}</td>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'A\' }}</td>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'A\' }}</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'tutorial.label.mediumQuality\' | translate }}</td>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'Baa\' }}</td>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'BBB\' }}</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'tutorial.label.junkQuality\' | translate }}</td>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'Ba, B, Caa, Ca\' }}</td>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'BB, B, CCC, CC\' }}</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'tutorial.label.default\' | translate }}</td>\n\t\t\t\t\t<td align="left" valign="middle"></td>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'D\' }}</td>\n\t\t\t\t</tr>\n\t\t\t</tbody>\n\t\t</table>\t\n\t</div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("bondTutorialIntroductionStep",{template:n(1623),controller:["DynamicSequenceService",function(e){this.$onInit=function(){e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{onClick:e.stepForward}})}}]})}},function(e,t){e.exports="<div page-structure>\n\t<h4>{{ 'bond.intro.header' | translate }}</h4>\n\t<p>{{ 'bond.intro.message' | translate }}</p>\n\t<ul>\n\t\t<li>{{ 'bond.intro.list1' | translate }}</li>\n\t\t<li>{{ 'bond.intro.list2' | translate }}</li>\n\t\t<li>{{ 'bond.intro.list3' | translate }}</li>\n\t</ul>\n</div>"},function(e,t,n){e.exports=function(e){e.component("bondTutorialRisksStep",{template:n(1625),controller:["DynamicSequenceService",function(e){this.$onInit=function(){e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{onClick:e.stepForward}})}}]})}},function(e,t){e.exports="<div page-structure>\n\t<h4>{{ 'bond.risks.header' | translate }}</h4>\n\t<p>{{ 'bond.risks.para1' | translate }}</p>\n\t<p>{{ 'bond.risks.para2' | translate }}</p>\n\t<p>{{ 'bond.risks.para3' | translate }}</p>\n\t<p>{{ 'bond.risks.para4' | translate }}</p>\n\t<p>{{ 'bond.risks.para5' | translate }}</p>\n\t<p>{{ 'bond.risks.para6' | translate }}</p>\n</div>"},function(e,t,n){e.exports=function(e){e.component("cfdTutorialExampleStep",{template:n(1627),controller:["DynamicSequenceService",function(e){this.$onInit=function(){e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{onClick:e.stepForward}})}}]})}},function(e,t){e.exports="<div page-structure>\n\t<h4>{{ 'cfd.example.header1' | translate }}</h4>\n\t<p>{{ 'cfd.example.para1' | translate }}</p>\n\t<h4>{{ 'cfd.example.header2' | translate }}</h4>\n\t<p>{{ 'cfd.example.para2' | translate }}</p>\n</div>"},function(e,t,n){e.exports=function(e){e.component("cfdTutorialIntroductionStep",{template:n(1629),controller:["DynamicSequenceService",function(e){this.$onInit=function(){e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{onClick:e.stepForward}})}}]})}},function(e,t){e.exports="<div page-structure>\n\t<h4>{{ 'cfd.intro.header1' | translate }}</h4>\n\t<p>{{ 'cfd.intro.para1' | translate }}</p>\n\t<p>{{ 'cfd.intro.para2' | translate }}</p>\n\t<h4>{{ 'cfd.intro.header2' | translate }}</h4>\n\t<p>{{ 'cfd.intro.para3' | translate }}</p>\n\t<p>{{ 'cfd.intro.para4' | translate }}</p>\n\t<h4>{{ 'cfd.intro.header3' | translate }}</h4>\n\t<p>{{ 'cfd.intro.para5' | translate }}</p>\n\t<p>{{ 'cfd.intro.para6' | translate }}</p>\n</div>"},function(e,t,n){e.exports=function(e){e.component("cfdTutorialRisksStep",{template:n(1631),controller:["DynamicSequenceService",function(e){this.$onInit=function(){e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{onClick:e.stepForward}})}}]})}},function(e,t){e.exports="<div page-structure>\n\t<h4>{{ 'cfd.risks.header1' | translate }}</h4>\n\t<p>{{ 'cfd.risks.para1' | translate }}</p>\n\t<h4>{{ 'cfd.risks.header2' | translate }}</h4>\n\t<p>{{ 'cfd.risks.para2' | translate }}</p>\n</div>"},function(e,t,n){e.exports=function(e){e.component("clpTutorialCharacteristicsStep",{template:n(1633),controller:["DynamicSequenceService",function(e){this.$onInit=function(){e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{onClick:e.stepForward}})}}]})}},function(e,t){e.exports='<div page-structure>\n\t<h4>{{ \'clp.chara.header\' | translate }}</h4>\n\t<p>{{ \'clp.chara.para1\' | translate }}</p>\n\t<h6 class="subtitle">{{ \'clp.chara.subheader1\' | translate }}</h6>\n\t<p>{{ \'clp.chara.para2\' | translate }}</p>\n\t<div class="table-responsive">\n\t\t<table width="100%" cellpadding="0" cellspacing="0" border="0" class="table">\n\t\t\t<thead>\n\t\t\t\t<tr>\n\t\t\t\t\t<th align="left" valign="middle">&nbsp;</th>\n\t\t\t\t\t<th align="left" valign="middle" colspan="2">{{ \'Underlying X\' | translate }}</th>\n\t\t\t\t\t<th align="left" valign="middle" colspan="2">{{ \'3x Daily Leverage\' | translate }}</th>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<th align="left" valign="middle">&nbsp;</th>\n\t\t\t\t\t<th align="left" valign="middle">{{ \'Value\' | translate }}</th>\n\t\t\t\t\t<th align="left" valign="middle">{{ \'% Change\' | translate }}</th>\n\t\t\t\t\t<th align="left" valign="middle">{{ \'Value\' | translate }}</th>\n\t\t\t\t\t<th align="left" valign="middle">{{ \'% Change\' | translate }}</th>\n\t\t\t\t</tr>\n\t\t\t</thead>\n\t\t\t<tbody>\n\t\t\t\t<tr>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'Initial\' | translate }}</td>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'100\' }}</td>\n\t\t\t\t\t<td align="left" valign="middle">&nbsp;</td>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'100\' }}</td>\n\t\t\t\t\t<td align="left" valign="middle">&nbsp;</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'Day 1\' | translate }}</td>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'95\' }}</td>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'-5.00%\' }}</td>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'85\' }}</td>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'-15.00%\' }}</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'Day 2\' | translate }}</td>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'94\' }}</td>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'-1.05%\' }}</td>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'82.32\' }}</td>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'-3.16%\' }}</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'Day 3\' | translate }}</td>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'95\' }}</td>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'1.06%\' }}</td>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'84.94\' }}</td>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'3.19%\' }}</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'Day 4\' | translate }}</td>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'98\' }}</td>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'3.16%\' }}</td>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'92.99\' }}</td>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'9.47%\' }}</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'Day 5\' | translate }}</td>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'100\' }}</td>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'2.04%\' }}</td>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'98.68\' }}</td>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'6.12%\' }}</td>\n\t\t\t\t</tr>\n\t\t\t</tbody>\n\t\t\t<tfoot>\n\t\t\t\t<tr>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'Total Performance\' | translate }}</td>\n\t\t\t\t\t<td align="left" valign="middle">&nbsp;</td>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'0.00%\' }}</td>\n\t\t\t\t\t<td align="left" valign="middle">&nbsp;</td>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'-1.32%\' }}</td>\n\t\t\t\t</tr>\n\t\t\t</tfoot>\n\t\t</table>\t\n\t</div>\n\t<h6 class="subtitle">{{ \'clp.chara.subheader2\' | translate }}</h6>\n\t<p>{{ \'clp.chara.para3\' | translate }}</p>\n\t<h6 class="subtitle">{{ \'clp.chara.subheader3\' | translate }}</h6>\n\t<p>{{ \'clp.chara.para4\' | translate }}</p>\n\t<p>{{ \'clp.chara.para5\' | translate }}</p>\n\t<p>{{ \'clp.chara.para6\' | translate }}</p>\n\t<h6 class="subtitle">{{ \'clp.chara.subheader4\' | translate }}</h6>\n\t<p>{{ \'clp.chara.para7\' | translate }}</p>\n\t<ul>\n\t\t<li>{{ \'clp.chara.certificate1\' | translate }}</li>\n\t\t<li>{{ \'clp.chara.certificate2\' | translate }}</li>\n\t\t<li>{{ \'clp.chara.certificate3\' | translate }}</li>\n\t</ul>\n</div>'},function(e,t,n){e.exports=function(e){e.component("clpTutorialIntroductionStep",{template:n(1635),controller:["DynamicSequenceService",function(e){this.$onInit=function(){e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{onClick:e.stepForward}})}}]})}},function(e,t){e.exports="<div page-structure>\n\t<h4>{{ 'clp.intro.header1' | translate }}</h4>\n\t<p>{{ 'clp.intro.para1' | translate }}</p>\n\t<p>{{ 'clp.intro.para2' | translate }}</p>\n\t<h4>{{ 'clp.intro.header2' | translate }}</h4>\n\t<p>{{ 'clp.intro.para3' | translate }}</p>\n\t<p>{{ 'clp.intro.para4' | translate }}</p>\n\t<h4>{{ 'clp.intro.header3' | translate }}</h4>\n\t<p>{{ 'clp.intro.para5' | translate }}</p>\n</div>"},function(e,t,n){e.exports=function(e){e.component("clpTutorialRisksStep",{template:n(1637),controller:["DynamicSequenceService",function(e){this.$onInit=function(){e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{onClick:e.stepForward}})}}]})}},function(e,t){e.exports="<div page-structure>\n\t<h4>{{ 'clp.risks.header' | translate }}</h4>\n\t<p>{{ 'clp.risks.para1' | translate }}</p>\n\t<p>{{ 'clp.risks.para2' | translate }}</p>\n\t<p>{{ 'clp.risks.para3' | translate }}</p>\n</div>"},function(e,t,n){e.exports=function(e){e.component("fopTutorialCharacteristicsStep",{template:n(1639),controller:["DynamicSequenceService",function(e){this.$onInit=function(){e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{onClick:e.stepForward}})}}]})}},function(e,t){e.exports='<div page-structure>\n\t<h4>{{ \'fop.chara.header\' | translate }}</h4>\n\t<p>{{ \'fop.chara.para1\' | translate }}</p>\n\t<p>{{ \'fop.chara.para2\' | translate }}</p>\n\t<p>{{ \'fop.chara.para3\' | translate }}</p>\n\t<p>{{ \'fop.chara.para4\' | translate }}</p>\n\t<p>{{ \'fop.chara.para5\' | translate }}</p>\n\t<p>{{ \'fop.chara.para6\' | translate }}</p>\n\t<div class="table-responsive">\n\t\t<table width="100%" cellpadding="0" cellspacing="0" border="0" class="table">\n\t\t\t<thead>\t\n\t\t\t\t<tr>\n\t\t\t\t\t<th align="left" valign="middle">{{ \'tutorial.label.strategy\' | translate }}</th>\n\t\t\t\t\t<th colspan="2">{{ \'tutorial.label.profitable\' | translate }}</th>\n\t\t\t\t\t<th colspan="2">{{ \'tutorial.label.unprofitable\' | translate }}</th>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<th></th>\n\t\t\t\t\t<th align="left" valign="middle">{{ \'tutorial.label.openingTrades\' | translate }}</th>\n\t\t\t\t\t<th align="left" valign="middle">{{ \'tutorial.label.closingTrades\' | translate }}</th>\n\t\t\t\t\t<th align="left" valign="middle">{{ \'tutorial.label.openingTrades\' | translate }}</th>\n\t\t\t\t\t<th align="left" valign="middle">{{ \'tutorial.label.closingTrades\' | translate }}</th>\n\t\t\t\t</tr>\n\t\t\t</thead>\n\t\t\t<tbody>\n\t\t\t\t<tr>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'tutorial.label.boughtCall\' | translate }}</td>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'tutorial.label.low\' | translate }}</td>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'tutorial.label.high\' | translate }}</td>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'tutorial.label.high\' | translate }}</td>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'tutorial.label.sameLower\' | translate }}</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'tutorial.label.boughtPut\' | translate }}</td>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'tutorial.label.high\' | translate }}</td>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'tutorial.label.low\' | translate }}</td>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'tutorial.label.low\' | translate }}</td>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'tutorial.label.sameHigher\' | translate }}</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'tutorial.label.soldCall\' | translate }}</td>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'tutorial.label.high\' | translate }}</td>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'tutorial.label.sameLower\' | translate }}</td>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'tutorial.label.low\' | translate }}</td>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'tutorial.label.high\' | translate }}</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'tutorial.label.soldPut\' | translate }}</td>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'tutorial.label.low\' | translate }}</td>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'tutorial.label.sameHigher\' | translate }}</td>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'tutorial.label.high\' | translate }}</td>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'tutorial.label.low\' | translate }}</td>\n\t\t\t\t</tr>\n\t\t\t</tbody>\n\t\t</table>\n\t</div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("fopTutorialIntroductionStep",{template:n(1641),controller:["DynamicSequenceService",function(e){this.$onInit=function(){e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{onClick:e.stepForward}})}}]})}},function(e,t){e.exports='<div page-structure>\n\t<h4>{{ \'fop.intro.header\' | translate }}</h4>\n\t<p>{{ \'fop.intro.para1\' | translate }}</p>\n\t<p>{{ \'fop.intro.para2\' | translate }}</p>\n\t<p>{{ \'fop.intro.para3\' | translate }}</p>\n\t<p>{{ \'fop.intro.para4\' | translate }}</p>\n\t<p>{{ \'fop.intro.para5\' | translate }}</p>\n\t<p>{{ \'fop.intro.para6\' | translate }}</p>\n\t<p>{{ \'fop.intro.types\' | translate }}</p>\n\t<ul>\n\t\t<li>{{ \'fop.type.1\' | translate }}</li>\n\t\t<li>{{ \'fop.type.2\' | translate }}</li>\n\t</ul>\n\t<p>{{ \'fop.intro.para7\' | translate }}</p>\n\t<div class="table-responsive">\n\t\t<table width="100%" cellpadding="0" cellspacing="0" border="0" class="table">\n\t\t\t<tbody>\n\t\t\t\t<tr>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'tutorial.label.buyerExercise\' | translate }}</td>\n\t\t\t\t\t<td align="left" valign="middle"></td>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'tutorial.label.effect\' | translate }}</td>\n\t\t\t\t\t<td align="left" valign="middle"></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'tutorial.label.boughtCallOption\' | translate }}</td>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'tutorial.label.boughtFutures\' | translate }}</td>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'tutorial.label.soldCallOption\' | translate }}</td>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'tutorial.label.soldFutures\' | translate }}</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'tutorial.label.boughtPutOption\' | translate }}</td>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'tutorial.label.soldFutures\' | translate }}</td>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'tutorial.label.soldPutOption\' | translate }}</td>\n\t\t\t\t\t<td align="left" valign="middle">{{ \'tutorial.label.boughtFutures\' | translate }}</td>\n\t\t\t\t</tr>\n\t\t\t</tbody>\n\t\t</table>\n\t</div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("fopTutorialRisksStep",{template:n(1643),controller:["DynamicSequenceService",function(e){this.$onInit=function(){e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{onClick:e.stepForward}})}}]})}},function(e,t){e.exports="<div page-structure>\n\t<h4>{{ 'fop.risks.header' | translate }}</h4>\n\t<p>{{ 'fop.risks.para1' | translate }}</p>\n\t<p>{{ 'fop.risks.para2' | translate }}</p>\n\t<p>{{ 'fop.risks.para3' | translate }}</p>\n\t<p>{{ 'fop.risks.para4' | translate }}</p>\n\t<p>{{ 'fop.risks.para5' | translate }}</p>\n\t<p>{{ 'fop.risks.para6' | translate }}</p>\n\t<p>{{ 'fop.risks.para7' | translate }}</p>\n</div>"},function(e,t,n){e.exports=function(e){e.component("forexTutorialCharacteristicsStep",{template:n(1645),controller:["DynamicSequenceService",function(e){this.$onInit=function(){e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{onClick:e.stepForward}})}}]})}},function(e,t){e.exports="<div page-structure>\n\t<h4>{{ 'forex.chara.header1' | translate }}</h4>\n\t<p>{{ 'forex.chara.para1' | translate }}</p>\n\t<h4>{{ 'forex.chara.header2' | translate }}</h4>\n\t<p>{{ 'forex.chara.para2' | translate }}</p>\n\t<p>{{ 'forex.chara.para3' | translate }}</p>\n\t<p>{{ 'forex.chara.para4' | translate }}</p>\n\t<p>{{ 'forex.chara.para5' | translate }}</p>\n\t<p>{{ 'forex.chara.para6' | translate }}</p>\n</div>"},function(e,t,n){e.exports=function(e){e.component("forexTutorialIntroductionStep",{template:n(1647),controller:["DynamicSequenceService",function(e){this.$onInit=function(){e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{onClick:e.stepForward}})}}]})}},function(e,t){e.exports="<div page-structure>\n\t<h4>{{ 'forex.intro.header' | translate }}</h4>\n\t<p>{{ 'forex.intro.para1' | translate }}</p>\n\t<p>{{ 'forex.intro.para2' | translate }}</p>\n\t<p>{{ 'forex.intro.para3' | translate }}</p>\n\t<p>{{ 'forex.intro.para4' | translate }}</p>\n\t<ul>\n\t\t<li>{{ 'forex.transaction.1' | translate }}</li>\n\t\t<li>{{ 'forex.transaction.2' | translate }}</li>\n\t</ul>\n\t<p>{{ 'forex.intro.para5' | translate }}</p>\n\t<p>{{ 'forex.intro.para6' | translate }}</p>\n\t<p>{{ 'forex.intro.para7' | translate }}</p>\n\t<ul>\n\t\t<li>{{ 'forex.transaction.3' | translate }}</li>\n\t\t<li>{{ 'forex.transaction.4' | translate }}</li>\n\t</ul>\n</div>"},function(e,t,n){e.exports=function(e){e.component("forexTutorialRisksStep",{template:n(1649),controller:["DynamicSequenceService",function(e){this.$onInit=function(){e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{onClick:e.stepForward}})}}]})}},function(e,t){e.exports="<div page-structure>\n\t<h4>{{ 'forex.risks.header' | translate }}</h4>\n\t<p>{{ 'forex.risks.para1' | translate }}</p>\n\t<p>{{ 'forex.risks.para2' | translate }}</p>\n\t<p>{{ 'forex.risks.para3' | translate }}</p>\n</div>"},function(e,t,n){e.exports=function(e){e.component("fundsTutorialCharacteristicsStep",{template:n(1651),controller:["DynamicSequenceService",function(e){this.$onInit=function(){e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{onClick:e.stepForward}})}}]})}},function(e,t){e.exports="<div page-structure>\n\t<h4>{{ 'funds.chara.header' | translate }}</h4>\n\t<p>{{ 'funds.chara.para1' | translate }}</p>\n\t<p>{{ 'funds.chara.para2' | translate }}</p>\n\t<p>{{ 'funds.chara.para3' | translate }}</p>\n\t<p>{{ 'funds.chara.para4' | translate }}</p>\n\t<p>{{ 'funds.chara.para5' | translate }}</p>\n\t<p>{{ 'funds.chara.para6' | translate }}</p>\n\t<p>{{ 'funds.chara.para7' | translate }}</p>\n</div>"},function(e,t,n){e.exports=function(e){e.component("fundsTutorialIntroductionStep",{template:n(1653),controller:["DynamicSequenceService",function(e){this.$onInit=function(){e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{onClick:e.stepForward}})}}]})}},function(e,t){e.exports="<div page-structure>\n\t<h4>{{ 'funds.intro.header' | translate }}</h4>\n\t<p>{{ 'funds.intro.para1' | translate }}</p>\n\t<ul>\n\t\t<li>{{ 'funds.type.1' | translate }}</li>\n\t\t<li>{{ 'funds.type.2' | translate }}</li>\n\t</ul>\n\t<p>{{ 'funds.intro.para2' | translate }}</p>\n\t<ul>\n\t\t<li>{{ 'funds.objective.1' | translate }}</li>\n\t\t<li>{{ 'funds.objective.2' | translate }}</li>\n\t\t<li>{{ 'funds.objective.3' | translate }}</li>\n\t\t<li>{{ 'funds.objective.4' | translate }}</li>\n\t\t<li>{{ 'funds.objective.5' | translate }}</li>\n\t\t<li>{{ 'funds.objective.6' | translate }}</li>\n\t</ul>\n</div>"},function(e,t,n){e.exports=function(e){e.component("fundsTutorialRisksStep",{template:n(1655),controller:["DynamicSequenceService",function(e){this.$onInit=function(){e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{onClick:e.stepForward}})}}]})}},function(e,t){e.exports="<div page-structure>\n\t<h4>{{ 'funds.risks.header' | translate }}</h4>\n\t<p>{{ 'funds.risks.para1' | translate }}</p>\n\t<p>{{ 'funds.risks.para2' | translate }}</p>\n\t<p>{{ 'funds.risks.para3' | translate }}</p>\n\t<p>{{ 'funds.risks.para4' | translate }}</p>\n\t<p>{{ 'funds.risks.para5' | translate }}</p>\n</div>"},function(e,t,n){e.exports=function(e){e.component("futuresTutorialCharacteristicsStep",{template:n(1657),controller:["DynamicSequenceService",function(e){this.$onInit=function(){e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{onClick:e.stepForward}})}}]})}},function(e,t){e.exports="<div page-structure>\n\t<h4>{{ 'futures.chara.header' | translate }}</h4>\n\t<p>{{ 'futures.chara.para1' | translate }}</p>\n\t<p>{{ 'futures.chara.para2' | translate }}</p>\n\t<p>{{ 'futures.chara.para3' | translate }}</p>\n\t<p>{{ 'futures.chara.para4' | translate }}</p>\n</div>"},function(e,t,n){e.exports=function(e){e.component("futuresTutorialIntroductionStep",{template:n(1659),controller:["DynamicSequenceService",function(e){this.$onInit=function(){e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{onClick:e.stepForward}})}}]})}},function(e,t){e.exports="<div page-structure>\n\t<h4>{{ 'futures.intro.header' | translate }}</h4>\n\t<p>{{ 'futures.intro.para1' | translate }}</p>\n\t<p>{{ 'futures.intro.para2' | translate }}</p>\n\t<p>{{ 'futures.intro.para3' | translate }}</p>\n\t<p>{{ 'futures.intro.para4' | translate }}</p>\n\t<p>{{ 'futures.intro.para5' | translate }}</p>\n\t<p>{{ 'futures.intro.para6' | translate }}</p>\n\t<p>{{ 'futures.intro.para7' | translate }}</p>\n</div>"},function(e,t,n){e.exports=function(e){e.component("futuresTutorialRisksStep",{template:n(1661),controller:["DynamicSequenceService",function(e){this.$onInit=function(){e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{onClick:e.stepForward}})}}]})}},function(e,t){e.exports="<div page-structure>\n\t<h4>{{ 'futures.risks.header' | translate }}</h4>\n\t<p>{{ 'futures.risks.para1' | translate }}</p>\n\t<p>{{ 'futures.risks.para2' | translate }}</p>\n\t<p>{{ 'futures.risks.para3' | translate }}</p>\n\t<p>{{ 'futures.risks.para4' | translate }}</p>\n</div>"},function(e,t,n){e.exports=function(e){e.component("marginTutorialExampleStep",{template:n(1663),controller:["DynamicSequenceService",function(e){this.$onInit=function(){e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{onClick:e.stepForward}})}}]})}},function(e,t){e.exports="<div page-structure>\n\t<h4>{{ 'margin.example.header1' | translate }}</h4>\n\t<p>{{ 'margin.example.para1' | translate }}</p>\n\t<h4>{{ 'margin.example.header2' | translate }}</h4>\n\t<p>{{ 'margin.example.para2' | translate }}</p>\n</div>"},function(e,t,n){e.exports=function(e){e.component("marginTutorialIntroductionStep",{template:n(1665),controller:["DynamicSequenceService",function(e){this.$onInit=function(){e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{onClick:e.stepForward}})}}]})}},function(e,t){e.exports="<div page-structure>\n\t<h4>{{ 'margin.intro.header1' | translate }}</h4>\n\t<p>{{ 'margin.intro.para1' | translate }}</p>\n\t<h4>{{ 'margin.intro.header2' | translate }}</h4>\n\t<p>{{ 'margin.intro.para2' | translate }}</p>\n</div>"},function(e,t,n){e.exports=function(e){e.component("marginTutorialRisksStep",{template:n(1667),controller:["DynamicSequenceService",function(e){this.$onInit=function(){e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{onClick:e.stepForward}})}}]})}},function(e,t){e.exports="<div page-structure>\n\t<h4>{{ 'margin.risks.header' | translate }}</h4>\n\t<p>{{ 'margin.risks.para1' | translate }}</p>\n\t<p>{{ 'margin.risks.para2' | translate }}</p>\n\t<p>{{ 'margin.risks.para3' | translate }}</p>\n</div>"},function(e,t,n){e.exports=function(e){e.component("optionsTutorialCharacteristicsStep",{template:n(1669),controller:["DynamicSequenceService",function(e){this.$onInit=function(){e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{onClick:e.stepForward}})}}]})}},function(e,t){e.exports="<div page-structure>\n\t<h4>{{ 'options.chara.header' | translate }}</h4>\n\t<p>{{ 'options.chara.types' | translate }}</p>\n\t<ul>\n\t\t<li>\n\t\t\t<span translate=\"options.pricing.1\" translate-values=\"{'strongStartTag': '<strong>', 'strongEndTag': '</strong>'}\"></span>\n\t\t\t<ul>\n\t\t\t\t<li>{{ 'options.assetPrice.para1' | translate }}</li>\n\t\t\t\t<li>{{ 'options.assetPrice.para2' | translate }}</li>\n\t\t\t</ul>\n\t\t\t<p>{{ 'options.assetPrice.para3' | translate }}</p>\n\t\t</li>\n\t\t<li translate=\"options.pricing.2\" translate-values=\"{strongStartTag: '<strong>', strongEndTag: '</strong>', breakTag: '<br>'}\"></li>\n\t\t<li translate=\"options.pricing.3\" translate-values=\"{strongStartTag: '<strong>', strongEndTag: '</strong>'}\"></li>\n\t\t<li translate=\"options.pricing.4\" translate-values=\"{strongStartTag: '<strong>', strongEndTag: '</strong>'}\"></li>\n\t\t<li translate=\"options.pricing.5\" translate-values=\"{strongStartTag: '<strong>', strongEndTag: '</strong>'}\"></li>\n\t\t<li translate=\"options.pricing.6\" translate-values=\"{strongStartTag: '<strong>', strongEndTag: '</strong>'}\"></li>\n\t\t<li translate=\"options.pricing.7\" translate-values=\"{strongStartTag: '<strong>', strongEndTag: '</strong>'}\"></li>\n\t</ul>\n</div>"},function(e,t,n){e.exports=function(e){e.component("optionsTutorialIntroductionStep",{template:n(1671),controller:["DynamicSequenceService",function(e){this.$onInit=function(){e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{onClick:e.stepForward}})}}]})}},function(e,t){e.exports="<div page-structure>\n\t<h4>{{ 'options.intro.header' | translate }}</h4>\n\t<p>{{ 'options.intro.types' | translate }}</p>\n\t<ul>\n\t\t<li translate=\"options.type.1\" translate-values=\"{strongStartTag: '<strong>', strongEndTag: '</strong>'}\"></li>\n\t\t<li translate=\"options.type.2\" translate-values=\"{strongStartTag: '<strong>', strongEndTag: '</strong>'}\"></li>\n\t</ul>\n\t<p>{{ 'options.intro.para1' | translate }}</p>\n\t<p>{{ 'options.intro.para2' | translate }}</p>\n\t<p>{{ 'options.intro.para3' | translate }}</p>\n</div>"},function(e,t,n){e.exports=function(e){e.component("optionsTutorialRisksStep",{template:n(1673),controller:["DynamicSequenceService",function(e){this.$onInit=function(){e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{onClick:e.stepForward}})}}]})}},function(e,t){e.exports="<div page-structure>\n\t<h4>{{ 'options.risks.header' | translate }}</h4>\n\t<p>{{ 'options.risks.para1' | translate }}</p>\n\t<p>{{ 'options.risks.para2' | translate }}</p>\n\t<p>{{ 'options.risks.para3' | translate }}</p>\n</div>"},function(e,t,n){e.exports=function(e){e.component("riskAppetiteConfigurationStep",{template:n(1675),controller:"AgreementStepController"})}},function(e,t){e.exports='<div page-structure ng-form="$ctrl.riskAppetiteForm">\n\t<h4>{{ \'riskAppetite.type.\' + $ctrl.agreementData.riskAppetiteType | translate }}</h4>\n\t<br>\n\t<div ng-repeat="question in $ctrl.agreementData.questions">\n\t\t<p>\n           \t{{ ($index + 1) + \'.\'}}\n            <span class="margin-left-10">{{ \'riskAppetite.\' + $ctrl.agreementData.riskAppetiteType + \'.\' + question.name + \'.title\' | translate }}</span>\n        </p>\n        <br>\n       \t<div class="row" ng-repeat="option in question.options">\n       \t\t<div class="col-xs-2 col-sm-1 col-md-1 col-lg-1">\n                <p class="text-center">\n                    <input ng-model="question.answer" type="radio" value="{{option.value}}" i-check required />\n                </p>\n            </div>\n            <div class="col-xs-10 col-sm-11 col-md-11 col-lg-11">\n                <p>{{ (\'riskAppetite.\' + $ctrl.agreementData.riskAppetiteType + \'.\' + question.name + \'.option_\' + option.value) | translate }}</p>\n            </div>\n       \t</div>\n       \t<br>\n        <am-form-error name="{{question.name}}" ng-model="question.answer" error-prefix="riskAppetite.error."></am-form-error>\n\t</div>\n    <agreement-record ng-if="::$ctrl.agreementRecord" record="$ctrl.agreementRecord"></agreement-record>\n</div>'},function(e,t){e.exports=function(e){function t(e,t,n){var a=this;this.$onInit=function(){a.rules=t.getSequenceData().rules||{},a.selectableInvestorCategories=a.rules.selectableInvestorCategories||[],a.investorCategoryElection=1===a.selectableInvestorCategories.length?a.selectableInvestorCategories[0]:t.getSequenceData().investorCategoryElection,a.customerType=t.getSequenceData().customerType,a.selectType=function(){t.stepForward(a.investorCategoryElection).catch(function(t){if(t.data&&t.data.customErrors&&t.data.customErrors.length>0){var a={title:e.instant("word.error"),modalData:{errors:t.data.customErrors}};n.openErrorModal(a)}})},a.showWarning=function(e){return"ACCREDITED"===e&&"ACCREDITED"===a.investorCategoryElection},a.getCategoryDescription=function(t){return"ORG"===a.customerType?e.instant("singaporeOrgInvestorCategoryType."+t,{strongStart:"<strong>",strongEnd:"</strong>"}):"TRUST"===a.customerType?e.instant("singaporeTrustInvestorCategoryType."+t,{strongStart:"<strong>",strongEnd:"</strong>"}):e.instant("singaporeInvestorCategoryType."+t,{strongStart:"<strong>",strongEnd:"</strong>"})},a.getInstructions=function(){return"ORG"===a.customerType||"TRUST"===a.customerType?e.instant("singaporeOrgInvestorCategory.review"):e.instant("singaporeInvestorCategory.review")},t.configureButtons({continueBtn:{isDisabled:function(){return!a.investorCategoryElectionForm||!a.investorCategoryElectionForm.$valid||angular.isUndefined(a.investorCategoryElection)||"UNKNOWN"===a.investorCategoryElection},onClick:a.selectType}})}}e.controller("InvestorCategoryElectionCtrl",t),t.$inject=["$translate","DynamicSequenceService","ModalService"]}},function(e,t){e.exports=function(e){function t(e,t,n,a){var r=this,i=function(){n.stepForward({professionalInvestor:r.isProfessionalInvestor})},o=function(){!r.isProfessionalInvestor&&r.hasPiDependentTradingPermission?s():i()},s=function(){var e="<ul>";e+="<li>"+t.instant("hongKongInvestorCategory.downgrade.note1",{piLinkStart:'<a href="https://ibkr.info/article/4344" target="_blank">',piLinkEnd:"</a>"})+"</li>",e+="<li>"+t.instant("hongKongInvestorCategory.downgrade.note2",{faqLinkStart:'<a href="https://www.interactivebrokers.com/lib/cstools/faq/#/content/25483761" target="_blank">',faqLinkEnd:"</a>"})+"</li>",e+="<li>"+t.instant("hongKongInvestorCategory.downgrade.note3")+"</li>",e+="</ul>",e+="<p>"+t.instant("hongKongInvestorCategory.downgrade.note4")+"</p>";var n={title:t.instant("hongKongInvestorCategory.downgrade.impactTradingPermission"),templateUrl:"confirm-modal.component",modalData:{noSuccessScreen:!0,pendingText:e}};a.openWarningModal(n).then(function(e){"SUCCESS"===e&&i()})};r.openKBLink=function(){e.open("https://ibkr.info/article/4344","_blank")},r.statusChange=function(){l(r.existingPiStatus!==r.isProfessionalInvestor)};var l=function(e){var t={canGoBack:!0};r.existingPiStatus!==r.isProfessionalInvestor&&(t.continueBtn={onClick:o}),n.configureButtons(t)};r.$onInit=function(){r.existingPiStatus=n.getSequenceData().existingPiStatus,r.statusUpdate=n.getSequenceData().statusUpdate,r.hasPiDependentTradingPermission=n.getSequenceData().hasPiDependentTradingPermission,r.isProfessionalInvestor=r.statusUpdate?!r.existingPiStatus:r.existingPiStatus,l(r.statusUpdate)}}e.controller("HkInvestorCategoryConfigurationCtrl",t),t.$inject=["$window","$translate","DynamicSequenceService","ModalService"]}},function(e,t){e.exports=function(e){function t(t,n,a,r,i,o,s,l,c,u){var d=this;d.openKBLink=function(){t.open("https://ibkr.info/article/4344","_blank")},d.openTransactionHistory=function(){i.menuNavigate("TransactionHistory")},d.goToDocumentUpload=function(){d.item.navigateToDocumentUpload=!0,d.item.text={key:"",displayText:n.instant("page.title.HongKongInvestorCategory")},s.navigateToPendingItem(d.item)},d.getImage=function(e){return"DEPOSIT"===e?"icon-deposit.svg":"POSITION_INBOUND"===e?"position-transfer-incoming.png":void 0};d.select=function(e){i.navigate(d.pageEntries[e])};var p=function(){u.setIsPageLoading(!0),c.delete(e.SERVER_PATH+"/RetailRequest/"+d.request.id).then(function(){i.navigateToPrevBreadcrumb()},function(){l.openErrorModal({modalData:{errors:[n.instant("hongKongInvestorCategory.professionalInvestor.error.cancelPiRequest")]}})}).finally(function(){u.setIsPageLoading(!1)})};d.$onInit=function(){d.types=["DEPOSIT","POSITION_INBOUND"],d.request=r.getSequenceData().request,d.upgradePiSequence=r.getSequenceData().upgradePiSequence,d.pageEntries=r.getSequenceData().pageEntries,d.item=r.getSequenceData().item,d.rejectReasons=r.getSequenceData().rejectReasons,d.accountId=r.getSequenceData().accountId,d.pendingFundingRequest=r.getSequenceData().pendingFundingRequest,d.equityRequiredForThresholdInHkd=r.getSequenceData().equityRequiredForThresholdInHkd,d.amount=a("number")(Math.ceil(d.equityRequiredForThresholdInHkd)),d.documentSubmissionStatus=d.item.task.documentStatus,d.isDocumentUnderProcess="NOT_ACCEPTED_CHECK_EMAIL"!==d.documentSubmissionStatus&&"NOT_YET_RECEIVED"!==d.documentSubmissionStatus&&"UNKNOWN"!==d.documentSubmissionStatus,function(e){r.configureButtons(e)}({extraButtons:[{alignment:"right",btnType:d.isDocumentUnderProcess?"primary":"secondary",btnText:d.isDocumentUnderProcess?n.instant("word.ok"):n.instant("hongKongInvestorCategory.professionalInvestor.askLater"),onClick:i.navigateToPrevBreadcrumb},{alignment:"left",btnType:"secondary",btnText:n.instant("hongKongInvestorCategory.professionalInvestor.cancelPiRequest"),onClick:p}]})}}e.controller("HkInvestorCategoryThresholdDetailsCtrl",t),t.$inject=["$window","$translate","$filter","DynamicSequenceService","NavigationService","BreadcrumbAction","AmInterfaceService","ModalService","ResourceService","PageService"]}},function(e,t){e.exports=function(e){function t(e,t,n){var a=this,r=function(){t.stepForward()};a.$onInit=function(){a.requestId=t.getSequenceData().request.id||0,a.equityRequiredForThreshold=t.getSequenceData().equityRequiredForThreshold,a.accountId=t.getSequenceData().accountId,a.equityRequired=a.requestId>0&&a.equityRequiredForThreshold;var i={canGoBack:!1};a.equityRequiredForThreshold?i.continueBtn={onClick:r}:i.extraButtons=[{alignment:"right",btnType:"primary",btnText:e.instant("word.ok"),onClick:n.navigateToPrevBreadcrumb}],t.configureButtons(i)}}e.controller("HkInvestorCategoryCompletionCtrl",t),t.$inject=["$translate","DynamicSequenceService","NavigationService"]}},function(e,t,n){e.exports=function(e){n(1681)(e),n(1682)(e),n(1683)(e),n(1684)(e),n(1685)(e),n(1686)(e),n(1687)(e),n(1688)(e),n(1689)(e),n(1690)(e),n(1691)(e),n(1692)(e),n(1693)(e),n(1694)(e)}},function(e,t){e.exports=function(e){e.factory("CapabilityAcknowledgementService",["$q","ResourceService",function(t,n,a){var r=e.SERVER_PATH+"/TradingExchangeBundle",i=e.SERVER_PATH+"/CapabilityAcknowledgementWarning";return{fetchBundles:function(e){var a=t.defer();return n.fetch(r+"/Capability",{type:e}).then(function(e){a.resolve(e.data)},function(e){a.reject(e.data)}),a.promise},recordWarnings:function(e){var a=t.defer();return n.create(i,e).then(function(e){a.resolve(e.data)},function(e){a.reject(e.data)}),a.promise},updateWarning:function(e){var a=t.defer();return n.update(i,e).then(function(e){a.resolve(e.data)},function(e){a.reject(e.data)}),a.promise}}}])}},function(e,t){e.exports=function(e){e.factory("CapabilityErrorModalService",["$q","ResourceService","InvestmentConfigService",function(t,n,a){var r=e.SERVER_PATH+"/CapabilityValidation",i=e.SERVER_PATH+"/TradingExchangeBundle";return{fetchBundles:function(e){var a=t.defer();return n.fetch(i+"/Exam",{type:e}).then(function(e){a.resolve(e.data)},function(e){a.reject(e.data)}),a.promise},validate:function(e,i,o,s,l,c,u){var d=a.getRequestObject(e,i,o,s,l,c,u),p=t.defer();return n.create(r,d).then(function(e){p.resolve(e.data)},function(e){p.reject(e.data)}),p.promise}}}])}},function(e,t){e.exports=function(e){e.factory("CurrencyConversionUrlService",["UserAgentService","UserPlatformService","NavigationAction","NavigationService",function(e,t,n,a){var r={gotoPlatformBasedCurrencyConversion:function(){var e=r.getConvertCurrencyLink();r.navigate(e)},navigate:function(e){a.setNavigationValidator(void 0),a.navigate({path:e,navigateAction:n.REDIRECT})},getConvertCurrencyLink:function(){return t.isIbkrMobile()||t.isSimplifiedPlatform()?r.getConvertCurrencyFaqLink():"/portal/#/order-ticket/convert-currency"},getConvertCurrencyFaqLink:function(){return e.isIos()?"https://www.ibkr.com/faq?id=111454839":"https://www.ibkr.com/faq?id=111457348"}};return r}])}},function(e,t){e.exports=function(e){e.factory("FinancialInfoService",["$q","$filter","$translate","ResourceService","NavigationService","ModalService",function(t,n,a,r,i,o){var s=e.SERVER_PATH+"/FinancialInfoConfig",l=function(e){return!(!e||!e.knowledge)&&("NONE"!==e.knowledge&&"UNKNOWN"!==e.knowledge)};return{getAssetRangeText:function(e){return 0===e.minimum?"< "+n("currency")(e.maximum,"",0):e.maximum>=999999999999?"> "+n("currency")(e.minimum,"",0):n("currency")(e.minimum,"",0)+" - "+n("currency")(e.maximum,"",0)},getYearRangeText:function(e){return e?e.maximum<6?e.maximum+" "+a.instant("investmentExperience.label.years"):e.maximum>10?"> "+e.minimum+" "+a.instant("investmentExperience.label.years"):e.minimum+" - "+e.maximum+" "+a.instant("investmentExperience.label.years"):a.instant("word.notApplicable")},getTradeRangeText:function(e){return e?e.maximum>100?"> "+e.minimum+" "+a.instant("investmentExperience.label.trades"):e.minimum===e.maximum?e.minimum+" "+a.instant("investmentExperience.label.trades"):e.minimum+" - "+e.maximum+" "+a.instant("investmentExperience.label.trades"):a.instant("word.notApplicable")},getAssetTypeText:function(e,t){return angular.isUndefined(e)||"UNKNOWN"===e?a.instant("investmentExperience.type."+t):a.instant("investmentExperience.type."+e)},isValidExperience:l,isValidExperiencePresent:function(e){return Object.values(e).some(function(e){return l(e)&&angular.isDefined(e.years)&&angular.isDefined(e.trades)})},isValidNetWorth:function(e){return!!e&&(e.rangeId>0||"N/A"!=e.rangeLabel&&""!=e.rangeLabel)},fetch:function(e){var n=t.defer();return r.fetch(s,e).then(function(e){n.resolve(e.data)},function(e){n.reject(e.data)}),n.promise},submit:function(e){var n=t.defer(),a={financialInfo:e};return e.financialAssets.questionnaires&&(a.finInfoQuestionnaires=e.financialAssets.questionnaires),r.create(s,a).then(function(e){n.resolve(e.data)},function(e){n.reject(e.data)}),n.promise},configure:function(t){var n;n="FINANCIAL_DATA"===t?a.instant("page.title.ConfigureFinancialNetWorth"):"SOW"===t?a.instant("page.title.ConfigureSOW"):"OBJECTIVE"===t?a.instant("page.title.ConfigureInvestmentObjectives"):"EXPERIENCE"===t?a.instant("page.title.ConfigureInvestmentExperience"):a.instant("page.title.ConfigureFinancialInfo");var r=angular.isDefined(t)?"/"+t:"",o={id:"ConfigureFinancialInfo",title:n,path:"am-dynamic-sequence.component",skipFetch:!0,pageData:{sequenceSource:e.SERVER_PATH+"/FinancialInfo/Sequence/",sequenceType:r,hideHelp:!0}};i.navigate(o)},completeKnowledgeQuiz:function(e,n){var r=t.defer(),i={templateUrl:"knowledge-quiz-modal.component",title:a.instant("form.title."+n.formNumber),modalData:{quiz:n}};return o.openModal(i).then(function(t){r.resolve(t),angular.isUndefined(t)||(e.knowledge=t.knowledge,n.allowed=t.allowed||!1)}),r.promise},isKnowledgeQuizDisabled:function(e){return angular.isUndefined(e)||angular.isUndefined(e.years)}}}])}},function(e,t){e.exports=function(e){e.factory("FundingModelService",["COLOR_THEME",function(e){return{getImage:function(t){var n;if("AUTO"===t)n="DARK"===e.get()?"crypto-basic-dark.svg":"crypto-basic.svg";else{if("PRE_FUND"!==t)throw"Invalid funding model detected to fetch svg";n="DARK"===e.get()?"crypto-plus-dark.svg":"crypto-plus.svg"}return"/images/am/"+n}}}])}},function(e,t){e.exports=function(e){e.factory("InvestmentConfigService",["ResourceService","$q",function(t,n){var a=e.SERVER_PATH+"/InvestmentConfig",r={fetchInvestmentConfig:function(e){var r=n.defer();return t.fetch(a,e).then(function(e){r.resolve(e.data)},function(e){r.reject(e.data)}),r.promise},submitInvestmentConfig:function(e,i,o,s,l,c,u,d,p){var g=r.getRequestObject(e,i,o,s,l,c,p);g.acknowledgedCapabilities=u||[],g.descriptors=d||[],s.questionnaire&&(g.questionnaire=s.questionnaire),e.financialAssets.questionnaires&&(g.finInfoQuestionnaires=e.financialAssets.questionnaires);var f=n.defer();return t.create(a,g).then(function(e){f.resolve(e.data)},function(e){f.reject(e.data)}),f.promise},fetchCapabilityLevel:function(a,r,i,o){var s={financialNetWorth:a,objectives:r,experience:i,capability:o},l=n.defer();return t.create(e.SERVER_PATH+"/CapabilityLevel/PossibleCapabilityLevel",s).then(function(e){l.resolve(e.data)},function(e){l.reject(e.data)}),l.promise},getRequestObject:function(e,t,n,a,r,i,o){var s=[],l={},c=!1;e.experiences.MARGIN&&("MARGIN"===a.accountType||"PORTFOLIO_MARGIN"===a.accountType)&&r&&(r.allowedAssetsRules[a.accountType]||[]).length>0&&(l.MARGIN=e.experiences.MARGIN,l.MARGIN.assetType="MARGIN");for(var u={},d=0;d<t.length;d++){var p=t[d];if(p.requested){for(var g=0;g<p.permissions.length;g++){var f=p.permissions[g];f.requested&&s.push(f)}var m=(p.permissions||[]).some(function(e){return e.requested});if(n[p.productType].assetExperienceRules&&m&&(l[p.assetType]=p.experience),n[p.productType].limitedTrading&&(c=p.limitedTrading),angular.isDefined(n[p.productType].availableSubCapabilities)&&m)for(g=0;g<Object.keys(n[p.productType].availableSubCapabilities).length;g++){var v=Object.keys(n[p.productType].availableSubCapabilities)[g];0!==(n[p.productType].availableSubCapabilities[v]||[]).length&&(u[v]=p.accountSubCapability)}}}return{financialNetWorth:e.financialAssets,objectives:e.objectives,experiences:l,requestedPermissions:s,limitedOptionTrading:c,accountCapability:a,accountCapabilityLevels:u,globalAccountCapability:i,globalAccountId:o}}};return r}])}},function(e,t){e.exports=function(e){e.factory("InvestorCategoryTextLoader",["$http","$q",function(t,n){return function(a){var r,i=n.defer();return t.get(e.SERVER_PATH+"/InvestorCategoryText/"+a.key).then(function(e){r=e.data,i.resolve(r)}),i.promise}}])}},function(e,t){e.exports=function(e){e.factory("KnowledgeGuidanceService",["$q","$translate","ResourceService","ModalService",function(t,n,a,r){var i=e.SERVER_PATH+"/KnowledgeGuidance";return{fetch:function(e){var n=t.defer();return a.fetch(i,{asset:e}).then(function(e){n.resolve(e.data)},function(e){n.reject(e.data)}),n.promise},openGuidance:function(e){var t={templateUrl:"knowledge-guidance-modal.component",title:n.instant("knowledgeGuidance.label.popup")+" - "+n.instant("knowledgeGuidance.type."+e),modalData:{asset:e}};r.openModal(t)}}}])}},function(e,t){e.exports=function(e){e.factory("KnowledgeQuizService",["$q","ResourceService",function(t,n){var a=e.SERVER_PATH+"/KnowledgeQuiz";return{fetchByForm:function(e){var r=t.defer();return n.fetch(a+"/Form",{formNumber:e}).then(function(e){r.resolve(e.data)},function(e){r.reject(e.data)}),r.promise},fetchById:function(e){var r=t.defer();return n.fetch(a+"/Id",{id:e}).then(function(e){r.resolve(e.data)},function(e){r.reject(e.data)}),r.promise},submit:function(e,r,i){var o={questions:e,formNumber:r,disclosureFileId:i},s=t.defer();return n.create(a,o).then(function(e){s.resolve(e.data)}).catch(function(e){s.reject(e.data)}),s.promise}}}])}},function(e,t){e.exports=function(e){e.factory("RiskAppetiteService",["$q","$translate","ResourceService","ModalService",function(e,t,n,a){return{complete:function(e,n,r){var i=function(e){var t;if("BONDS_RISK_APPETITE"===e)t="risk-appetite-questions.component";else{if("VA_RISK_APPETITE"!==e)throw"Invalid Risk Appetite Type detected!!!";t="risk-appetite-questionnaire.component"}return t}(e),o={title:function(e,n){return"VA_RISK_APPETITE"===e?t.instant("riskAppetite.title."+e):n+": "+t.instant("riskAppetite.title."+e)}(e,n),templateUrl:i,modalData:{riskAppetiteType:e,accountId:n,context:r}};return a.openModal(o)}}}])}},function(e,t){e.exports=function(e){e.factory("StockYieldProgramService",function(){return{containsAuEntity:function(e){for(var t in e)if("AU"===t.entity)return!0;return!1}}})}},function(e,t){e.exports=function(e){e.factory("TradingAccountTypeService",function(){return{getTradingAccountType:function(e,t){var n=e?e.accountType:"";return"MARGIN"===n?t.pendingMargin?"tradingAccountTypeProfile.label.pending."+n:t.requestedMargin?"tradingAccountTypeProfile.label.requested."+n:"tradingAccountTypeProfile.label.mostCommon."+n:"PORTFOLIO_MARGIN"===n&&t.pendingPortfolioMargin?"tradingAccountTypeProfile.label.pending."+n:"PORTFOLIO_MARGIN"===n&&t.requestedPortfolioMargin?"tradingAccountTypeProfile.label.requested."+n:"tradingAccountTypeProfile.type."+n}}})}},function(e,t){e.exports=function(e){e.factory("TradingProductService",["CONTENT_HOST","COLOR_THEME",function(e,t){return{getProductImage:function(n){var a;switch(n){case"STOCK":a="DARK"===t.get()?"icon-product-stocks-white.svg":"icon-product-stocks.svg";break;case"OPTION":case"STOCK_OPTION":a="DARK"===t.get()?"icon-product-options-white.svg":"icon-product-options.svg";break;case"ISSUER_OPTION":a="DARK"===t.get()?"icon-product-index-options-white.svg":"icon-product-index-options.svg";break;case"WARRANT":a="DARK"===t.get()?"icon-product-warrants-white.svg":"icon-product-warrants.svg";break;case"BOND":a="DARK"===t.get()?"icon-product-bonds-white.svg":"icon-product-bonds.svg";break;case"FUTURE":a="DARK"===t.get()?"icon-product-futures-white.svg":"icon-product-futures.svg";break;case"FOP":a="DARK"===t.get()?"icon-product-future-options-white.svg":"icon-product-future-options.svg";break;case"SSF":a="DARK"===t.get()?"icon-product-single-stock-futures-white.svg":"icon-product-single-stock-futures.svg";break;case"FUND":a="DARK"===t.get()?"icon-product-mutual-funds-white.svg":"icon-product-mutual-funds.svg";break;case"FOREX":a="DARK"===t.get()?"icon-product-forex-white.svg":"icon-product-forex.svg";break;case"METAL":a="DARK"===t.get()?"icon-product-metals-white.svg":"icon-product-metals.svg";break;case"NEXTSHARE":a="icon-product-nextshares.png";break;case"CLP":a="DARK"===t.get()?"icon-product-complex-products-white.svg":"icon-product-complex-products.svg";break;case"CRYPTO":a="DARK"===t.get()?"icon-product-crypto-white.svg":"icon-product-crypto.svg";break;case"CFD":a="DARK"===t.get()?"icon-product-cfds-white.svg":"icon-product-cfds.svg";break;default:a="DARK"===t.get()?"icon-product-stocks-white.svg":"icon-product-stocks.svg"}return"https://"+e+"/images/am/"+a},getProductInfo:function(t){var n="";switch(t){case"STOCK":n="https://"+e+"/lib/cstools/faq/#/tag/tp_stocks_glossary";break;case"OPTION":case"STOCK_OPTION":case"ISSUER_OPTION":n="https://"+e+"/lib/cstools/faq/#/tag/tp_options_glossary";break;case"WARRANT":n="https://"+e+"/lib/cstools/faq/#/tag/tp_warrants_glossary";break;case"BOND":n="https://"+e+"/lib/cstools/faq/#/tag/tp_bonds_glossary";break;case"FUTURE":n="https://"+e+"/lib/cstools/faq/#/tag/tp_futures_glossary";break;case"FOP":n="https://"+e+"/lib/cstools/faq/#/tag/tp_futureoptions_glossary";break;case"SSF":n="https://"+e+"/lib/cstools/faq/#/tag/tp_singlestockfutures_glossary";break;case"FUND":n="https://"+e+"/lib/cstools/faq/#/tag/tp_mutualfunds_glossary";break;case"FOREX":n="https://"+e+"/lib/cstools/faq/#/tag/tp_forex_glossary";break;case"METAL":n="https://"+e+"/lib/cstools/faq/#/tag/tp_metals_glossary";break;case"NEXTSHARE":n="https://"+e+"/lib/cstools/faq/#/tag/tp_nextshares_glossary";break;case"CLP":n="https://"+e+"/lib/cstools/faq/#/tag/tp_clps_glossary";break;case"CRYPTO":n="https://"+e+"/lib/cstools/faq/#/tag/tp_crypto_glossary";break;case"CFD":n="https://"+e+"/lib/cstools/faq/#/tag/tp_cfd_glossary";break;case"EVENT_OPTIONS":n="https://"+e+"/lib/cstools/faq/#/tag/tp_events_glossary"}return n}}}])}},function(e,t){e.exports=function(e){e.factory("WarningDescriptorService",["$q","ResourceService",function(t,n){var a=e.SERVER_PATH+"/WarningDescriptor";return{recordAcknowledgementWarnings:function(e){var r=t.defer();return n.create(a+"/Acknowledgement",e).then(function(e){r.resolve(e.data)},function(e){r.reject(e.data)}),r.promise},recordRiskAcceptanceTaskWarnings:function(e){var r=t.defer();return n.create(a+"/RiskAcceptance",e).then(function(e){r.resolve(e.data)},function(e){r.reject(e.data)}),r.promise},updateWarning:function(e){var r=t.defer();return n.update(a,e).then(function(e){r.resolve(e.data)},function(e){r.reject(e.data)}),r.promise}}}])}},function(e,t,n){"use strict";var a=angular.module("ibmarketing.ipo",[]);a.WEBAPP_ROOT="/ipo.webapp",a.SERVER_PATH="/aces/Ipo",a.AM_SERVER_PATH="/AccountManagement",n(1696)(a)},function(e,t,n){e.exports=function(e){n(1697)(e),n(1699)(e),n(1706)(e),n(1713)(e),n(1721)(e)}},function(e,t,n){e.exports=function(e){n(1698)(e)}},function(e,t){e.exports=function(e){function t(t,n,a,r){var i=null;this.$onInit=function(){t.setOnPageLoad(function(){n.dependencyLogin(e.SERVER_PATH+"/IpoAuth").then(function(n){var i,o;i=t.getCurrentPage().id,o={id:i,skipFetch:!1,breadcrumb:r.REPLACE},"IpoSubscriptionConfig"===i?(o.serverPath=e.SERVER_PATH+"/IpoSubscriptionConfig",o.path=e.WEBAPP_ROOT+"/sequence/ipoconfiguration/ipoConfigSequence.html"):(o.serverPath=e.SERVER_PATH+"/IpoSubscriptionSeq",o.path=e.WEBAPP_ROOT+"/sequence/subscription/ipoSubscriptionSequence.html"),a.navigate(o)}).catch(function(e){t.setIsPageLoading(!1)}).finally(function(){i=null})})},this.$onDestroy=function(){null!==i&&i.cancel()}}e.controller("IpoCtrl",t),t.$inject=["PageService","UserAuthService","NavigationService","BreadcrumbAction"]}},function(e,t,n){e.exports=function(e){n(1700)(e),n(1701)(e),n(1702)(e),n(1703)(e),n(1704)(e),n(1705)(e)}},function(e,t){e.exports=function(e){function t(e,t,n,a,r){var i=this;i.isContainIPO=function(){return i.isContainUSIPO()||i.isContainHKIPO()},i.openUserSetting=function(){a.menuNavigate("Settings")},i.isContainUSIPO=function(){return i.usMyIpoList.length>0||i.usActiveIpoList.length>0},i.isContainHKIPO=function(){return i.hkMyIpoList.length>0||i.hkActiveIpoList.length>0},i.subscriptionFund=function(){var n={title:e.instant("ipo.label.availableFundForSubscription"),templateUrl:"subscription-fund-modal.component"};t.openModal(n)},i.ipoEntered=function(e){n.stepForward({ipoId:e.id})},i.showFAQ=r.openFaq,i.$onInit=function(){i.hkMyIpoList=n.getSequenceData().hkMyIpoList,i.usMyIpoList=n.getSequenceData().usMyIpoList,i.hkActiveIpoList=n.getSequenceData().hkActiveIpoList,i.usActiveIpoList=n.getSequenceData().usActiveIpoList,i.emailAddress=n.getSequenceData().emailAddress}}e.controller("IpoSummaryCtrl",t),t.$inject=["$translate","ModalService","DynamicSequenceService","NavigationService","IpoService"]}},function(e,t){e.exports=function(e){function t(e,t,n,a,r,i){var o=this;o.isContainIPO=function(){return o.activeIpos.length>0||o.myIpos.length>0},o.openUserSetting=function(){a.menuNavigate("Settings")},o.ipoEntered=function(a,i){if(o.hasAnyOfClientSignedAgreement)o.ipoId=a.id,o.isSubscribedIpo=i,i?n.stepForward({ipoId:o.ipoId}):r.openClientAccountPicker(o.stepForward,a.auctionName);else{var s={title:e.instant("page.title.IpoSubscription"),templateUrl:"fa-clients-not-signed-agreement-modal.component"};t.openModal(s)}},o.stepForward=function(e){n.stepForward({ipoId:o.ipoId,clientAccountIds:e})},o.showFAQ=r.openFaq,o.$onInit=function(){o.fetched=!1,o.myIpos=n.getSequenceData().myIpos,o.activeIpos=n.getSequenceData().activeIpos,o.emailAddress=n.getSequenceData().emailAddress,o.hasAnyOfClientSignedAgreement=n.getSequenceData().hasAnyOfClientSignedAgreement,o.hasEligibleClients=n.getSequenceData().hasEligibleClients}}e.controller("IpoFaSummaryCtrl",t),t.$inject=["$translate","ModalService","DynamicSequenceService","NavigationService","IpoService","ResourceService"]}},function(e,t){e.exports=function(e){function t(e,t,n,a){var r=this,i=function(){var e={isAcceptedDeclaration:r.isAcceptedDeclaration,signatureSubmissionData:r.signature.signatureSubmissionData};a.stepForward(e)};r.$onInit=function(){r.ipo=a.getSequenceData().ipo,r.signature=a.getSequenceData().signature,r.isFa=a.getSequenceData().isFa,r.isAcceptedDeclaration=!1,r.getErrors=function(){return a.getSequenceData().errors},a.configureButtons({canGoBack:a.getSequenceData().stepIndex>0,continueBtn:{isDisabled:function(){return!r.ipoProspectusForm||!r.ipoProspectusForm.$valid||"HK"===r.ipo.type&&!r.isAcceptedDeclaration},onClick:i}})}}e.controller("IpoProspectusCtrl",t),t.$inject=["$window","$translate","ModalService","DynamicSequenceService"]}},function(e,t){e.exports=function(e){function t(t,n,a,r,i,o,s){var l=this,c=function(){var n={ipoId:l.ipo.id,ipoBid:angular.toJson(l.ipoBid),isAcceptedDeclaration:l.isAcceptedDeclaration,signatureSubmissionData:angular.toJson(l.signature.signatureSubmissionData)};l.isLoading=!0,i.fetch(e.SERVER_PATH+"/ReConfirmBid",n).then(function(e){e.data.result?(l.updateIpoDetail(e),l.ipoActionNote=t.instant("ipo.label.actionNote.reConfirmSuccess")):l.ipoActionNote=t.instant("ipo.label.actionNote.reConfirmError"),l.action=l.getAction(),o.setAction(l.action),l.configButtons()},function(e){l.errors=e.data.errors}).finally(function(){l.isLoading=!1})};l.isNeedReConfirm=function(){l.reConfirm=l.ipo.needsReconfirmation&&l.ipoBidRules.ipoOpen};var u=function(){return"MODIFY"===o.getAction()?l.ipoActionNote=t.instant("ipo.label.actionNote.modify"):"CANCEL"===o.getAction()&&(l.ipoActionNote=t.instant("ipo.label.actionNote.cancel",{italicStart:"<em>",italicEnd:"</em>"})),"RECONFIRM"===o.getAction()?{continueBtn:{isDisabled:function(){return l.reConfirm&&(!l.ipoProspectusForm||!l.ipoProspectusForm.$valid||!l.isAcceptedDeclaration&&l.isHk())},onClick:c},extraButtons:[{alignment:"left",btnText:t.instant("word.back"),onClick:d}]}:{extraButtons:[{alignment:"left",btnText:t.instant("word.back"),onClick:d}]}};l.configButtons=function(){r.configureButtons(u())};var d=function(){"RECONFIRM"===o.getAction()?(o.setAction(l.getAction()),l.isNeedReConfirm(),l.action=l.getAction()):r.restartSequence()};l.isHk=function(){return"HK"===l.ipo.type},l.refresh=function(){var t={ipoId:l.ipo.id,action:"REFRESHBID"};l.isLoading=!0,i.create(e.SERVER_PATH+"/IpoBidActivity",t).then(function(e){l.updateIpoDetail(e)},function(e){l.errors=e.data.errors}).finally(function(){l.isLoading=!1})},l.setIpoBid=function(e){l.containsBidActivities=!1,l.ipoBid=e||{},l.quantity=l.ipoBid.cumAuthorizedQty?l.ipoBid.cumAuthorizedQty:0,l.ipoBid.bidActivities&&l.ipoBid.bidActivities.length>0&&(l.containsBidActivities=!0,l.multiAppWarning="Multiple applications found"===l.ipoBid.bidActivities[0].memo)},l.getAction=function(){return l.ipoBidRules.canAdd?"ADD":"SUBMITTED"},l.submit=function(){var a={ipoId:l.ipo.id,quantity:l.quantity,action:l.action};l.isLoading=!0,i.create(e.SERVER_PATH+"/IpoBidActivity",a).then(function(e){"ADD"===l.action||"MODIFY"===l.action?(l.action="SUBMITTED",l.ipoActionNote=t.instant("ipo.label.actionNote.submitted")):(l.action="CANCELED",l.ipoActionNote=t.instant("ipo.label.actionNote.cancelled")),o.setAction(l.action),l.updateIpoDetail(e),l.containsBidActivities=!0,l.configButtons()},function(e){l.errors=e.data.errors,l.errors.quantity||(l.ipoActionNote=t.instant("ipo.error.bidSubmitError"))}).finally(function(){l.isLoading=!1,angular.isDefined(l.ipoBid.pendingQty)&&0!==l.ipoBid.pendingQty&&n(l.refresh,5e3)})},l.getApplicationStatusClass=function(){return l.ipoBidRules.ipoOpen?"alert alert-success":(l.ipoActionNote=t.instant("ipo.label.actionNote.closed"),"alert alert-danger")},l.updateIpoDetail=function(e){l.ipo=e.data.ipo,l.setIpoBid(e.data.ipoBid),l.ipoBidRules=e.data.ipoBidRules},l.$onInit=function(){l.errors={},l.ipo=r.getSequenceData().ipo,l.ipoBidRules=r.getSequenceData().ipoBidRules,l.signature=r.getSequenceData().signature,l.allowedOrderQuantity=r.getSequenceData().allowedOrderQuantity,l.setIpoBid(r.getSequenceData().ipoBid),l.isAcceptedDeclaration=!1,l.reConfirm=!1,l.isNeedReConfirm(),l.reConfirm&&(l.ipoActionNote=t.instant("ipo.label.actionNote.reconfirm")),l.action=l.getAction(),o.setAction(l.action),r.configureButtons(u()),l.isLoading=!1}}e.controller("IpoBidActivityCtrl",t),t.$inject=["$translate","$timeout","ModalService","DynamicSequenceService","ResourceService","IpoBidActivityService","PageService"]}},function(e,t){e.exports=function(e){function t(e){var t=this;t.$onInit=function(){t.status=e.getSequenceData().status,e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{onClick:function(){e.stepForward({status:t.status})}}})}}e.controller("IpoSubscriptionController",t),t.$inject=["DynamicSequenceService"]}},function(e,t){e.exports=function(e){function t(t,n,a,r,i,o){var s=this;s.getQuantityText=function(e){return"0"===e.toString()&&s.isConfirmationScreen?t("number")(e):t("number")(e)+" ("+s.ipo.currency+" "+t("number")(s.allowedOrderQuantity[e])+")"},s.openImportantNoteModal=function(){var e={title:n.instant("ipo.label.importantNotes"),templateUrl:"ipo-disclosure-modal.component",modalData:{ipo:s.ipo,isFa:!0}};a.openModal(e)},s.handleCheck=function(e){e.isChecked?s.accountToSubmitBid.push(e):(s.accountToSubmitBid.splice(s.accountToSubmitBid.indexOf(e),1),s.isError[e.account.id]=!1)},s.subscriptionFund=function(e){var t={title:n.instant("ipo.label.availableFundForSubscription"),templateUrl:"subscription-fund-modal.component",modalData:{account:e}};a.openModal(t)},s.SubHistory=function(e){var t={title:n.instant("ipo.label.subscriptionHistory"),templateUrl:"subscription-history-modal.component",modalData:{accountId:e,ipoId:s.ipo.id,isHk:!0,isAgent:!0}};a.openModal(t).then(function(t){t&&(t.cumAuthorizedQty&&l(e,t.cumAuthorizedQty),s.accountsHasPendingQty[e]=0!==t.pendingQty)})};var l=function(e,t){s.accountsAuthorizedQty[e]=t,s.accountQty[e]=t.toString(),s.subscribedQty[e]=s.getQuantityText(t);var n=Object.keys(s.allowedOrderQuantity);(angular.isUndefined(s.accountsAuthorizedQty[e])||0===s.accountsAuthorizedQty[e])&&n.splice(0,1),s.allowedQty[e]=n};s.modify=function(){s.isConfirmationScreen=!1,s.ipoActionNote=""},s.selectAll=function(){angular.forEach(s.clientAccounts,function(e){!s.selected.isChecked||s.accountsNeedReconfirm[e.account.id]||e.isChecked?s.selected.isChecked||(e.isChecked=!1,s.accountToSubmitBid.splice(s.accountToSubmitBid.indexOf(e),1),s.isError[e.account.id]=!1):(e.isChecked=!0,s.accountToSubmitBid.push(e))})},s.initialiseAccounts=function(){s.allowedQty=[],s.allocatedQtyPrice=[],s.isIpoOpen&&(s.accountToSubmitBid=[],s.isError=[],s.selected={},s.selected.isChecked=!s.hasSubmittedClientBid,s.selectAll()),angular.forEach(s.clientAccounts,function(e){if(l(e.account.id,s.accountsAuthorizedQty[e.account.id]),s.isIpoAllocated){var n=s.accountsAllocatedQtyPrice[e.account.id],a=Object.keys(n)[0];"0"!==a.toString()?s.allocatedQtyPrice[e.account.id]=t("number")(a)+" ("+s.ipo.currency+" "+t("number")(n[a])+")":s.allocatedQtyPrice[e.account.id]=t("number")(a)}})},s.isContainError=function(){var e=!1;return s.selectAccountError=!1,angular.forEach(s.accountToSubmitBid,function(t){angular.isUndefined(s.accountQty[t.account.id])?(s.isError[t.account.id]=!0,e=!0):s.isError[t.account.id]=!1}),s.accountToSubmitBid.length<=0&&(s.selectAccountError=!0,e=!0),s.disclosureError=!s.isAcceptedNotes,e||s.disclosureError},s.submit=function(){if(!s.isContainError()){var t=[];angular.forEach(s.accountToSubmitBid,function(e){t.push(e.account.id)});var a={clientsToSubmitBid:angular.toJson(t),accountsQty:angular.toJson(s.accountQty),accountsHasPendingQty:angular.toJson(s.accountsHasPendingQty),action:"submit",ipoId:s.ipo.id,accountsAuthorizedQty:angular.toJson(s.accountsAuthorizedQty)};s.isLoading=!0,i.fetch(e.SERVER_PATH+"/FaIpos",a).then(function(e){s.ipoActionNote=n.instant("ipo.label.actionNote.faBidsubmitted",{lineBreak:"<br>"}),s.accountsAuthorizedQty=e.data.accountsAuthorizedQty,s.accountsHasPendingQty=e.data.accountsHasPendingQty,s.hasSubmittedClientBid=!0,s.isConfirmationScreen=!0,s.initialiseAccounts()},function(e){s.isConfirmationScreen=!0,s.ipoActionNote=n.instant("ipo.error.bidSubmitError")}).finally(function(){s.isLoading=!1})}},s.checkreConfirmRequired=function(e){var t=!1;s.accountsNeedReconfirm=e,angular.forEach(s.accountsNeedReconfirm,function(e,n){e&&(t=e)}),s.isRequiredReConfirmation=t},s.reConfirm=function(){s.showProspectus=!0,r.configureButtons(d())};var c=function(){var t={ipoId:s.ipo.id,action:"reConfirmBid",accountsNeedReconfirm:angular.toJson(s.accountsNeedReconfirm),isAcceptedDeclaration:s.isAcceptedDeclaration,signatureSubmissionData:angular.toJson(s.signature.signatureSubmissionData)};s.isLoading=!0,i.fetch(e.SERVER_PATH+"/FaIpos",t).then(function(e){s.ipoActionNote=n.instant("ipo.label.actionNote.reConfirmSuccess"),s.checkreConfirmRequired(e.data.accountsNeedReconfirm),s.initialiseAccounts(),s.showProspectus=!1},function(e){s.errors=e.data.errors}).finally(function(){s.isLoading=!1,r.configureButtons(d())})},u=function(){s.showProspectus?s.showProspectus=!1:r.restartSequence()};s.prevScreen=function(){s.isConfirmationScreen=!0};var d=function(){return s.showProspectus?{continueBtn:{isDisabled:function(){return!s.ipoProspectusForm||!s.ipoProspectusForm.$valid||!s.isAcceptedDeclaration},onClick:function(){s.isNeedsToJoinOrAckIpo?p():c()}},extraButtons:[{alignment:"left",btnText:n.instant("word.back"),onClick:u}]}:{extraButtons:[{alignment:"left",btnText:n.instant("word.back"),onClick:u}]}};s.clientAccountPicker=function(){o.openClientAccountPicker(s.isFaNeedsToJoinOrAckIpo,s.ipo.auctionName)},s.isFaNeedsToJoinOrAckIpo=function(t){s.accountsToFetchIpo=t;for(var n=0;n<s.clientAccounts.length;n++)-1===s.accountsToFetchIpo.indexOf(s.clientAccounts[n].account.id)&&s.accountsToFetchIpo.push(s.clientAccounts[n].account.id);s.clientsToJoinIpo=[],s.clientsToAckIpo=[],s.isNeedsToJoinOrAckIpo=!1;var a={clientAccountIds:angular.toJson(s.accountsToFetchIpo),ipoAuctionName:s.ipo.auctionName};s.isLoading=!0,i.fetch(e.SERVER_PATH+"/FetchFaClient/JoinOrAckStatus/",a).then(function(e){s.clientsToJoinIpo=e.data.clientsToJoinIpo,s.clientsToAckIpo=e.data.clientsToAckIpo,s.isNeedsToJoinOrAckIpo=s.clientsToJoinIpo.length>0||s.clientsToAckIpo.length>0}).finally(function(){s.isLoading=!1,s.showProspectus=s.isNeedsToJoinOrAckIpo,s.isNeedsToJoinOrAckIpo?r.configureButtons(d()):p()})};var p=function(){var t={clientAccountIds:angular.toJson(s.accountsToFetchIpo),ipoId:s.ipo.id,ipoAuctionName:s.ipo.auctionName,accountsNeedReconfirm:angular.toJson(s.accountsNeedReconfirm),accountsHasPendingQty:angular.toJson(s.accountsHasPendingQty),accountsAuthorizedQty:angular.toJson(s.accountsAuthorizedQty),clientsToJoinIpo:angular.toJson(s.clientsToJoinIpo),clientsToAckIpo:angular.toJson(s.clientsToAckIpo),isNeedsToJoinOrAckIpo:s.isNeedsToJoinOrAckIpo,signatureSubmissionData:angular.toJson(s.signature.signatureSubmissionData)};s.isLoading=!0,i.fetch(e.SERVER_PATH+"/FetchFaClient/IpoDetail/",t).then(function(e){s.clientAccounts=e.data.clientAccounts,s.hasSubmittedClientBid=e.data.hasSubmittedClientBid,s.accountsAuthorizedQty=e.data.accountsAuthorizedQty,s.accountsHasPendingQty=e.data.accountsHasPendingQty,s.checkreConfirmRequired(e.data.accountsNeedReconfirm),s.isNeedsToJoinOrAckIpo=!1,s.showProspectus=!1,s.initialiseAccounts()},function(e){s.errors=e.data.errors}).finally(function(){s.isLoading=!1,r.configureButtons(d())})};s.$onInit=function(){s.errors={},s.accountQty={},s.subscribedQty=[],s.isRequiredReConfirmation=!1,s.isConfirmationScreen=!0,s.ipo=r.getSequenceData().ipo,s.clientAccounts=r.getSequenceData().clientAccounts,s.accountsAuthorizedQty=r.getSequenceData().accountsAuthorizedQty,s.accountsHasPendingQty=r.getSequenceData().accountsHasPendingQty,s.isIpoOpen=r.getSequenceData().isIpoOpen,s.isIpoAllocated=r.getSequenceData().isIpoAllocated,s.isIpoAllocated&&(s.accountsAllocatedQtyPrice=r.getSequenceData().accountsAllocatedQtyPrice),s.allowedOrderQuantity=r.getSequenceData().allowedOrderQuantity,s.accountsNeedReconfirm=r.getSequenceData().accountsNeedReconfirm,s.isIpoOpen?(s.isAcceptedDeclaration=!1,s.isAcceptedNotes=!1,s.disclosureError=!1,s.signature=r.getSequenceData().signature,s.hasSubmittedClientBid=r.getSequenceData().hasSubmittedClientBid,s.isConfirmationScreen=s.hasSubmittedClientBid,s.checkreConfirmRequired(s.accountsNeedReconfirm),s.bidInstruction=n.instant("ipo.label.actionNote.faIpoBidInstruction")):s.ipoActionNote=n.instant("ipo.label.actionNote.closed"),s.initialiseAccounts(),r.configureButtons(d())}}e.controller("IpoFaBidActivity",t),t.$inject=["$filter","$translate","ModalService","DynamicSequenceService","ResourceService","IpoService"]}},function(e,t,n){e.exports=function(e){n(1707)(e),n(1708)(e),n(1709)(e),n(1710)(e),n(1711)(e),n(1712)(e)}},function(e,t){e.exports=function(e){e.component("subscriptionFundModal",{templateUrl:e.WEBAPP_ROOT+"/modals/subscriptionFundModal.html",controller:["ModalService","ResourceService",function(t,n){var a=this;a.closeModal=function(){t.closeModal()};a.$onInit=function(){a.isSearchInProgress=!0,a.account=t.getModalData().account,function(){if(a.account)var t={account:a.account};n.fetch(e.SERVER_PATH+"/CreditCheckReport",t).then(function(e){a.creditCheck=e.data.creditCheck}).finally(function(){a.isSearchInProgress=!1})}(),t.setModalButtons([{label:"word.ok",alignment:"right",fn:a.closeModal,btnType:"primary"}])}}]})}},function(e,t){e.exports=function(e){e.component("ipoFeesModal",{templateUrl:e.WEBAPP_ROOT+"/modals/ipoFeesModal.html",controller:["ModalService",function(e){var t=this;t.closeModal=function(){e.closeModal()},t.getFeeCurrency=function(){return"UNKNOWN"===t.ipo.feeCurrency?"HKD":t.ipo.feeCurrency},t.$onInit=function(){t.ipo=e.getModalData().ipo,e.setModalButtons([{label:"word.ok",alignment:"right",fn:t.closeModal,btnType:"primary"}])}}]})}},function(e,t){e.exports=function(e){e.component("ipoDisclosureModal",{templateUrl:e.WEBAPP_ROOT+"/modals/ipoDisclosureModal.html",controller:["ModalService",function(e){var t=this;t.closeModal=function(){e.closeModal()},t.$onInit=function(){t.ipo=e.getModalData().ipo,t.isFa=e.getModalData().isFa,t.isHk="HK"===t.ipo.type,e.setModalButtons([{label:"word.ok",alignment:"right",fn:t.closeModal,btnType:"primary"}])}}]})}},function(e,t){e.exports=function(e){e.component("allowedOrderQuantityModal",{templateUrl:e.WEBAPP_ROOT+"/modals/allowedOrderQuantityModal.html",controller:["ModalService","ResourceService",function(t,n){var a=this;a.closeModal=function(){t.closeModal()};a.$onInit=function(){var r;a.isSearchInProgress=!0,a.auctionName=t.getModalData().auctionName,a.currency=t.getModalData().currency,r={auctionName:a.auctionName},n.fetch(e.SERVER_PATH+"/AllowedOrderQuantity",r).then(function(e){a.allowedOrderQuantity=e.data.allowedOrderQuantity}).finally(function(){a.isSearchInProgress=!1}),t.setModalButtons([{label:"word.ok",alignment:"right",fn:a.closeModal,btnType:"primary"}])}}]})}},function(e,t){e.exports=function(e){e.component("subscriptionHistoryModal",{templateUrl:e.WEBAPP_ROOT+"/modals/subscriptionHistoryModal.html",controller:["ModalService","ResourceService",function(t,n){var a=this;a.closeModal=function(){t.closeModal(a.ipoBid)};a.$onInit=function(){var r;a.isSearchInProgress=!0,a.accountId=t.getModalData().accountId,a.isHk=t.getModalData().isHk,a.isAgent=t.getModalData().isAgent,a.ipoId=t.getModalData().ipoId,r={accountId:a.accountId,ipoId:a.ipoId,action:"fetchIpoBids"},n.fetch(e.SERVER_PATH+"/FaIpos",r).then(function(e){a.ipoBid=e.data.ipoBid}).finally(function(){a.isSearchInProgress=!1}),t.setModalButtons([{label:"word.ok",alignment:"right",fn:a.closeModal,btnType:"primary"}])},a.$onDestroy=function(){t.closeModal(a.ipoBid)}}]})}},function(e,t){e.exports=function(e){e.component("faClientsNotSignedAgreementModal",{templateUrl:e.WEBAPP_ROOT+"/modals/faClientsNotSignedAgreementModal.html",controller:["ModalService","IpoService",function(e,t){var n=this;n.closeModal=function(){e.closeModal()},n.showFAQ=t.openFaq,n.$onInit=function(){e.setModalButtons([{label:"word.ok",alignment:"right",fn:n.closeModal,btnType:"primary"}])}}]})}},function(e,t,n){e.exports=function(e){n(1714)(e),n(1715)(e),n(1716)(e),n(1717)(e),n(1718)(e),n(1719)(e),n(1720)(e)}},function(e,t){e.exports=function(e){e.component("prospectusDeclaration",{bindings:{ipo:"<",signature:"<",isAcceptedDeclaration:"=",serverErrors:"<",isFa:"<"},templateUrl:e.WEBAPP_ROOT+"/components/prospectusDeclaration.html",controller:["$window","$translate","ModalService","DynamicSequenceService",function(e,t,n,a){var r=this;r.openProspectusWindow=function(){var t=r.ipo.prospectusLink;t.startsWith("http")?e.open(t,t):e.open("http://"+t,t)},r.openAgreementModal=function(e){var a={title:t.instant("ipo.title."+e),templateUrl:"view-agreement-modal.component",modalData:{formDetails:e}};n.openModal(a)},r.showFees=function(){var e={title:t.instant("ipo.fees.heading"),templateUrl:"ipo-fees-modal.component",modalData:{ipo:r.ipo}};n.openModal(e)},r.isHk=function(){return"HK"===r.ipo.type}}]})}},function(e,t){e.exports=function(e){e.component("hkOfferDetails",{bindings:{ipo:"<",isFa:"<"},templateUrl:e.WEBAPP_ROOT+"/components/hkOfferDetails.html",controller:["$filter","$translate","ModalService","DynamicSequenceService","LanguageService",function(e,t,n,a,r){var i=this;i.showFees=function(){var e={title:t.instant("ipo.fees.heading"),templateUrl:"ipo-fees-modal.component",modalData:{ipo:i.ipo}};n.openModal(e)},i.getOfferPrice=function(t){return t.lowBidPrice===t.highBidPrice?t.currency+" "+e("number")(t.lowBidPrice):t.currency+" "+e("number")(t.lowBidPrice)+"-"+e("number")(t.highBidPrice)},i.getTableClass=function(){return i.isFa?"col-xs-12 col-sm-12 col-md-6 col-lg-6":"col-xs-12 col-sm-12 col-md-12 col-lg-12"},i.getStatusClass=function(){return"OPEN"===i.ipo.status||"TESTING"===i.ipo.status?"text-success text-bold":"CLOSED"===i.ipo.status||"CANCELLED"===i.ipo.status?"text-danger text-bold":"text-primary text-bold"},i.$onInit=function(){i.ipo.prospectusLink.startsWith("http")?i.prospectusLink=i.ipo.prospectusLink:i.prospectusLink="http://"+i.ipo.prospectusLink;var e=r.getCurrentLanguage();i.ipoMarginRateLink="zh_CN"===e||"zh_TW"===e?"https://www.interactivebrokers.com.hk/cn/index.php?f=46796&p=m":"https://www.interactivebrokers.com.hk/en/index.php?f=46735&p=m"}}]})}},function(e,t){e.exports=function(e){e.component("usOfferDetails",{bindings:{ipo:"<"},templateUrl:e.WEBAPP_ROOT+"/components/usOfferDetails.html",controller:["$filter","DynamicSequenceService",function(e,t){var n=this;n.getOfferPrice=function(t){return t.lowBidPrice===t.highBidPrice?t.currency+" "+e("number")(t.lowBidPrice):t.currency+" "+e("number")(t.lowBidPrice)+"-"+e("number")(t.highBidPrice)},n.$onInit=function(){n.ipo.prospectusLink.startsWith("http")?n.prospectusLink=n.ipo.prospectusLink:n.prospectusLink="http://"+n.ipo.prospectusLink}}]})}},function(e,t){e.exports=function(e){e.component("ipoApplicationDetails",{bindings:{ipo:"<",ipoBidRules:"=",ipoBid:"=",allowedOrderQuantity:"<",action:"=",actionNote:"=",quantity:"=",configButtons:"&",submit:"&",serverErrors:"<",refresh:"&"},templateUrl:e.WEBAPP_ROOT+"/components/ipoApplicationDetails.html",controller:["$window","$translate","$filter","ModalService","DynamicSequenceService","IpoBidActivityService","LanguageService",function(e,t,n,a,r,i,o){var s=this;s.openImportantNoteModal=function(){var e={title:t.instant("ipo.label.importantNotes"),templateUrl:"ipo-disclosure-modal.component",modalData:{ipo:s.ipo}};a.openModal(e)},s.subscriptionFund=function(){var e={title:t.instant("ipo.label.availableFundForSubscription"),templateUrl:"subscription-fund-modal.component"};a.openModal(e)},s.updateAction=function(e){s.action=e,s.quantity=s.quantity.toString(),s.prevQuantity=s.quantity,s.prevAction=i.getAction(),"CANCEL"===e&&(s.quantity=0),s.priceCalculate(),i.setAction(s.action),s.configButtons()},s.prevScreen=function(){s.action=s.prevAction,i.setAction(s.prevAction),s.prevAction="",s.actionNote="",s.quantity=s.prevQuantity,s.configButtons()},s.submitBid=function(){s.isAcceptedNotes?(s.disclosureError=!1,s.submit()):s.disclosureError=!0},s.isHkConfirmationScreen=function(){return s.isHk()&&("SUBMITTED"===s.action||"CANCELED"===s.action)},s.isHk=function(){return"HK"===s.ipo.type},s.priceCalculate=function(){s.totalEstimatedPrice=+(s.ipo.cobPriceRangeTo*s.quantity).toFixed(2)},s.showFees=function(){var e={title:t.instant("ipo.fees.heading"),templateUrl:"ipo-fees-modal.component",modalData:{ipo:s.ipo}};a.openModal(e)},s.getQuantityText=function(e){return s.getQtyText(e,s.allowedOrderQuantity[e])},s.hasPendingBid=function(){return angular.isDefined(s.ipoBid.pendingQty)&&0!==s.ipoBid.pendingQty},s.getQtyText=function(e,t){return"0"!==e.toString()?n("number")(e)+" ("+s.ipo.currency+" "+n("number")(t)+")":n("number")(e)},s.getPendingQuantity=function(){return s.getQtyText(s.ipoBid.pendingQty,s.ipoBid.pendingAmount)},s.getAllocatedQuantity=function(){return s.getQtyText(s.ipo.allocatedQuantity,s.ipo.allocationPrice)},s.isIpoAllocated=function(){return"ALLOCATED"===s.ipo.status},s.canCancel=function(){return s.ipoBidRules.canCancel&&"SUBMITTED"===s.action},s.canSubmit=function(){return"SUBMITTED"!==s.action&&"CANCELED"!==s.action&&s.ipoBidRules.ipoOpen},s.canModify=function(){return s.ipoBidRules.canModify&&("SUBMITTED"===s.action||"CANCELED"===s.action)},s.getMaxOfferPrice=function(){var e=s.isHk()?s.ipo.highBidPrice:s.ipo.cobPriceRangeTo;return s.ipo.currency+" "+n("number")(e)},s.$onInit=function(){s.isAcceptedNotes=!1,s.disclosureError=!1;var e=o.getCurrentLanguage();s.ipoMarginRateLink="zh_CN"===e||"zh_TW"===e?"https://www.interactivebrokers.com.hk/cn/index.php?f=46796&p=m":"https://www.interactivebrokers.com.hk/en/index.php?f=46735&p=m",0!==s.quantity&&(s.isAcceptedNotes=!0),s.reConfirm=s.ipo.needsReconfirmation&&s.ipoBidRules.ipoOpen,s.priceCalculate(),s.isHk()&&(s.hkquantities=Object.keys(s.allowedOrderQuantity))}}]})}},function(e,t){e.exports=function(e){e.component("hkIpos",{bindings:{myIpos:"<",activeIpos:"<",submit:"&",isAgent:"<"},templateUrl:e.WEBAPP_ROOT+"/components/hkIpos.html",controller:["$filter","$translate","$window","ModalService",function(e,t,n,a){var r=this;r.openMinBidAmountModal=function(e){var n={title:t.instant("ipo.label.allowedOrderQuantity"),templateUrl:"allowed-order-quantity-modal.component",modalData:{auctionName:e.auctionName,currency:e.currency}};a.openModal(n)},r.getAllocationRefundDate=function(e){return""===e.allotmentResultDate?e.refundDate:e.allotmentResultDate},r.openProspectusWindow=function(e){e.startsWith("http")?n.open(e,e):n.open("http://"+e,e)},r.getOfferPrice=function(t){return t.lowBidPrice===t.highBidPrice?t.currency+" "+e("number")(t.lowBidPrice):t.currency+" "+e("number")(t.lowBidPrice)+"-"+e("number")(t.highBidPrice)},r.ipoEntered=function(e,t){r.submit({ipo:e,isSubscribedIpo:t})}}]})}},function(e,t){e.exports=function(e){e.component("usIpos",{bindings:{myIpos:"<",activeIpos:"<",submit:"&"},templateUrl:e.WEBAPP_ROOT+"/components/usIpos.html",controller:["$filter","$window",function(e,t){var n=this;n.getOfferPrice=function(t){return t.lowBidPrice===t.highBidPrice?t.currency+" "+e("number")(t.lowBidPrice):t.currency+" "+e("number")(t.lowBidPrice)+"-"+e("number")(t.highBidPrice)},n.openProspectusWindow=function(e){e.startsWith("http")?t.open(e,e):t.open("http://"+e,e)},n.ipoEntered=function(e){n.submit({ipo:e})}}]})}},function(e,t){e.exports=function(e){e.component("subscriptionHistory",{bindings:{ipoBid:"=",account:"<",isHk:"<",ipoId:"<",isAgent:"<"},templateUrl:e.WEBAPP_ROOT+"/components/subscriptionHistory.html",controller:["$translate","$timeout","ResourceService",function(t,n,a){var r=this;r.cancelBidActivity=function(i){var o={ipoId:r.ipoId,bidActivity:i,accountId:r.account,action:"BIDCANCEL"};r.isLoading=!0,a.create(e.SERVER_PATH+"/IpoBidActivity",o).then(function(e){r.ipoBid=e.data.ipoBid},function(e){e.data.errors&&(r.note=t.instant("ipo.error.bidActivityCancelError"),n(function(){r.note=""},5e3))}).finally(function(){r.isLoading=!1})},r.getEnteredByText=function(e){return"ENTERED_BY_CLIENT"===e?t.instant("ipo.label.enterdByClient"):"ENTERED_BY_AGENT"===e?t.instant("ipo.label.enterdByAgent"):e},r.formatDate=function(e){return e.slice(0,18)+e.slice(21)}}]})}},function(e,t,n){e.exports=function(e){n(1722)(e),n(1723)(e)}},function(e,t){e.exports=function(e){e.factory("IpoBidActivityService",["DynamicSequenceService",function(e){var t={setAction:function(e){t.action=e},getAction:function(){return t.action}};return t}])}},function(e,t){e.exports=function(e){e.factory("IpoService",["$window","LanguageService","PickerService",function(t,n,a){var r={openFaq:function(){var e=n.getCurrentLanguage();"zh_CN"===e||"zh_TW"===e?t.open("https://www.interactivebrokers.com.hk/cn/index.php?f=46352&article=35812801","faq"):t.open("https://www.interactivebrokers.com.hk/en/index.php?f=46352&article=35812801","faq")},openClientAccountPicker:function(t,n){r.action=t,a.setOnPickerUpdate(i);var o=e.SERVER_PATH+"/IpoSubscriptionSeq/PickerData";n&&(o+="/"+n),a.getCurrentSource()!==o&&a.loadPicker(o),a.openPicker()}},i=function(e){for(var t=[],n=0;n<e.length;++n)t.push(e[n].accountId);a.closePicker(),r.action(t)};return r}])}},function(e,t,n){"use strict";var a=angular.module("ibmarketing.linkage",[]);a.WEBAPP_ROOT="/linkage.webapp",a.SERVER_PATH="/AccountManagement",n(1725)(a)},function(e,t,n){e.exports=function(e){n(1726)(e),n(1738)(e),n(1743)(e),n(1751)(e)}},function(e,t,n){e.exports=function(e){n(1727)(e),n(1728)(e),n(1730)(e),n(1732)(e),n(1734)(e),n(1736)(e)}},function(e,t){e.exports=function(e){e.component("additionalAccount",{template:function(){var e="";return e+='<loading-overlay loading-template="candyStripe" ng-if="$ctrl.isPageLoading()"></loading-overlay>',e+='<ng-include src="$ctrl.getPageSource()" onload="$ctrl.finishPageContent()"></ng-include>',e},controller:["NavigationService","PageService",function(t,n){var a=this;a.$onInit=function(){var r;a.isPageLoading=n.isPageLoading,a.getPageSource=n.getPagePath,a.finishPageContent=n.onPartialLoad,n.getActivePickerSelections().length>0?t.navigate({id:"AdditionalAccount",path:"additional-account-sequence.component",skipFetch:!0}):(r={id:"AdditionalAccountAccess",path:e.WEBAPP_ROOT+"/sequences/additional/additionalAccountAccess.html",skipFetch:!0},t.navigate(r))}}]})}},function(e,t,n){e.exports=function(e){e.component("additionalAccountSubTypeIra",{bindings:{iraSubTypes:"<",additionalAccountDetails:"=ngModel"},template:n(1729)})}},function(e,t){e.exports='<div data-customer-sub-type="IRA">\n    <div class="container">\n        <div class="row align-items-start">\n            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n                <h3 data-help="customerTypeIra">\n                    {{ \'linkage.ira.help\' | translate }}\n                </h3>\n\n                <br />\n                <div class="row">\n                    <div class="col">\n                        <div class="form-group">\n                            <am-select name="iraType" ng-model="$ctrl.additionalAccountDetails.iraType" options="$ctrl.iraSubTypes" option-key=" \'linkage.ira.type.\' " required></am-select>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("additionalAccountSubTypeJoint",{bindings:{jointSubTypes:"<",additionalAccountDetails:"=ngModel"},template:n(1731),controller:["DynamicSequenceService",function(e){var t=this;t.$onInit=function(){t.validate=function(){if("TENANTS_IN_COMMON"==t.additionalAccountDetails.jointType){var e=parseInt(t.additionalAccountDetails.firstHolderSharePercentage,10),n=parseInt(t.additionalAccountDetails.secondHolderSharePercentage,10);parseInt(e,10)+parseInt(n,10)!=100?(t.jointHolderPercentagesForm.$setValidity("firstHolderPercent",!1),t.jointHolderPercentagesForm.$setValidity("secondHolderPercent",!1)):(t.jointHolderPercentagesForm.$setValidity("firstHolderPercent",!0),t.jointHolderPercentagesForm.$setValidity("secondHolderPercent",!0))}else t.jointHolderPercentagesForm.$setValidity("firstHolderPercent",!0),t.jointHolderPercentagesForm.$setValidity("secondHolderPercent",!0)},t.getPercentSuffix=function(){return"%"}}}]})}},function(e,t){e.exports='<div data-customer-sub-type="JOINT" ng-form="$ctrl.jointHolderPercentagesForm">\n    <div class="container">\n        <div class="row align-items-start">\n            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n                <h3 data-help="customerTypeJoint">\n                    {{ \'linkage.joint.help\' | translate }}\n                </h3>\n                <br />\n                <div class="row">\n                    <div class="col">\n                        <div class="form-group">\n                            <am-select name="jointType" model-listener="$ctrl.validate()" ng-model="$ctrl.additionalAccountDetails.jointType" options="$ctrl.jointSubTypes" option-key=" \'linkage.joint.type.\' " required></am-form-select>\n                        </div>\n                    </div>\n                </div>\n                <div id="jointCommonPercentages" ng-if="$ctrl.additionalAccountDetails.jointType === \'TENANTS_IN_COMMON\'" wide-form>\n                    <am-form-input id="firstHolderPercent" name="firstHolderPercent" type="text" label-text="{{ \'linkage.joint.firstHolder\' | translate }}" ng-model="$ctrl.additionalAccountDetails.firstHolderSharePercentage" model-listener="$ctrl.validate()" input-suffix="$ctrl.getPercentSuffix()" maxlength="2" required></am-form-input>\n                    <am-form-input id="secondHolderPercent" name="secondHolderPercent" type="text" label-text="{{ \'linkage.joint.secondHolder\' | translate }}" ng-model="$ctrl.additionalAccountDetails.secondHolderSharePercentage" model-listener="$ctrl.validate()" input-suffix="$ctrl.getPercentSuffix()" maxlength="2" required></am-form-input>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("additionalAccountSubTypeCustodian",{bindings:{custodianTypes:"<",additionalAccountDetails:"=ngModel"},template:n(1733)})}},function(e,t){e.exports='<div data-customer-sub-type="CUSTODIAN">\n    <div class="container">\n        <div class="row align-items-start">\n            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n                <h3 data-help="customerTypeCustodian">\n                    {{ \'linkage.custodian.help\' | translate }}\n                </h3>\n\n                <br />\n                <div class="row">\n                    <div class="col">\n                        <div class="form-group">\n                            <am-select name="custodianType" ng-model="$ctrl.additionalAccountDetails.accountType" options="$ctrl.custodianTypes" option-key=" \'linkage.custodian.type.\' " required></am-select>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("additionalAccountSubTypeTbsz",{bindings:{eligibilities:"<",additionalAccountDetails:"=ngModel"},template:n(1735)})}},function(e,t){e.exports='<div data-customer-sub-type="TBSZ">\n    <div class="container">\n        <div class="row align-items-start">\n            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n                <h4 data-help="customerTypeTbsz">\n                    {{ \'linkage.tbsz.help\' | translate }}\n                </h4>\n                <br />\n                <div class="row">\n                    <div class="col" ng-repeat="eligibility in $ctrl.eligibilities">\n                        <div class="account-selector" ng-class="{ \'active\': $ctrl.additionalAccountDetails.tbszYear === eligibility.year, \'disabled\': !eligibility.eligible }">\n                            <span>\n                                <input name="tbszYear" ng-model="$ctrl.additionalAccountDetails.tbszYear" type="radio" ng-value="eligibility.year" ng-disabled="{{!eligibility.eligible}}" i-check/>\n                                &nbsp;<span>{{ eligibility.year }}</span>\n                            </span>\n                        </div>\n                    </div>\n                </div>\n                <br>\n                <am-form-error name="tbszYear" error-prefix="linkage.additionalAccount.warning.{{$ctrl.additionalAccountDetails.additionalAccountType}}."></am-form-error>\n            </div>\n        </div>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("additionalAccountTypeAccordion",{bindings:{additionalAccountType:"=ngModel",rules:"<",warnings:"<",categorySet:"<",categoryName:"<",handleTypeSelection:"&",autoOpen:"<"},template:n(1737),controller:["$translate","$timeout","DynamicSequenceService","ModalService","NavigationService","ACTIVE_CONTEXT","ApplicationContext",function(e,t,n,a,r,i,o){var s=this;s.$onInit=function(){s.isApplication=i===o.STANDALONE,s.autoSelect=!1,s.preferredAccountType=window.preferredAccountType||"",s.isApplication&&-1!==s.categorySet.indexOf(preferredAccountType)&&(s.autoSelect=!0),s.selectType=function(e){if(!s.hasWarning(e)){if(s.additionalAccountType=e,-1!==s.rules.allowedToLink.indexOf(e))return s.handleTypeSelection({type:e});s.openRedirectModal(e)}},s.isSuccessButton=function(e){return("JOINT"===e||"IRA"===e||"CUSTODIAN"===e||"ISA"===e||"JISA"===e||"SG_LLC_JOINT"===e||"TBSZ_INDIVIDUAL"===e)&&(e===s.additionalAccountType||"ISA"===e&&"INDIVIDUAL"===s.additionalAccountType)},s.isLink=function(e){return-1!==s.rules.allowedToLink.indexOf(e)},s.getChoiceSubstitutionValues=function(e){var t={};return"TBSZ_INDIVIDUAL"===e&&(t.tbszLinkStart='<a href="https://ibkr.info/article/4888" target="_blank">',1===s.rules.tbszEligibilities.length&&(t.tbszYear=s.rules.tbszEligibilities[0].year.toString())),t.linkEnd="</a>",t},s.getChoiceText=function(t){return e.instant("linkage.additionalAccount.label."+t,s.getChoiceSubstitutionValues(t))},s.getWarningKey=function(t){if(s.isMissingNino(t))return s.isApplication?"linkage.additionalAccount.warning.ISA.missingNinoApplication":"linkage.additionalAccount.warning.ISA.missingNino";if("TBSZ_INDIVIDUAL"===t){var n="linkage.additionalAccount.warning.TBSZ_INDIVIDUAL."+s.warnings[t].toLowerCase();return e.instant(n)!==n?n:"linkage.additionalAccount.warning.TBSZ_INDIVIDUAL.internal_error"}return""},s.getWarningSubstitutions=function(e){return s.isMissingNino(e)?{profileLinkStart:'<a href="javascript:void(0);" ng-click="$ctrl.goToProfile()">',linkEnd:"</a>"}:"TBSZ_INDIVIDUAL"===e?s.getChoiceSubstitutionValues(e):{}},s.hasWarning=function(e){return angular.isDefined(s.warnings[e])},s.isMissingNino=function(e){return"ISA"===e&&"missingNino"===s.warnings[e]},s.goToProfile=function(){return r.menuNavigate("UnifiedSettings",{configId:"Profile"})},s.openRedirectModal=function(t){var n={templateUrl:"additional-account-redirect-modal.component",dialogClass:"modal-md",modalData:{type:t},title:e.instant("linkage.additionalAccount.redirect.title")};a.openModal(n).then(function(e){s.handleTypeSelection({type:""})})},s.autoSelect&&(s.selectType(s.preferredAccountType),s.autoSelect=!1,window.preferredAccountType="")},s.$postLink=function(){s.autoOpen&&t(function(){$("#heading_"+s.categoryName+"_card a").trigger("click")},250)}}]})}},function(e,t){e.exports='    <div class="panel panel-default">\n        <div class="panel-heading" role="tab" id="{{\'heading_\' + $ctrl.categoryName + \'_card\'}}">\n            <h4 class="panel-title">\n                <a role="button" class="collapsed" data-toggle="collapse" data-target="{{\'#\' + $ctrl.categoryName + \'_card\'}}" aria-expanded="false" aria-controls="{{ $ctrl.categoryName + \'_card\' }}" href="javascript:void(0);">\n                    {{ \'linkage.accordion.title.\' + $ctrl.categoryName | translate }}\n                </a>\n            </h4>\n        </div>\n        <div id="{{ $ctrl.categoryName + \'_card\' }}" class="panel-collapse collapse" role="tabpanel" aria-labelledby="{{ \'heading_\' + $ctrl.categoryName + \'_card\'}}" data-parent="#additionalAccountTypeAccordion">\n            <div class="panel-body">\n                <div ng-repeat="additionalAccountType in $ctrl.categorySet">\n                    <div class="row" ng-class="$last ? \'mb-3\' : \'\'">\n                        <div class="col-12 col-sm-9">\n                            <h5 class="text-primary cursor-pointer" ng-click="$ctrl.selectType(additionalAccountType)">\n                                {{$ctrl.getChoiceText(additionalAccountType)}}\n                                <span ng-if="$ctrl.isLink(additionalAccountType)" class="badge bg-light-green green">\n                                    {{ \'linkage.accordion.label.badge.link\' | translate }}\n                                </span>\n                                <span ng-if="!$ctrl.isLink(additionalAccountType)" class="badge bg-light-blue black">\n                                    {{ \'linkage.accordion.label.badge.add.new\' | translate }}\n                                </span>\n                            </h5>\n                            \n                            <p ng-if="::!$ctrl.hasWarning(additionalAccountType)" translate="{{\'linkage.additionalAccount.description.\' + additionalAccountType}}" translate-values="$ctrl.getChoiceSubstitutionValues(additionalAccountType)" translate-compile></p>\n                            \n                            <div ng-if="::$ctrl.hasWarning(additionalAccountType)" class="alert alert-warning">\n                                <p translate="{{$ctrl.getWarningKey(additionalAccountType)}}" translate-values="$ctrl.getWarningSubstitutions(additionalAccountType)" translate-compile></p>\n                            </div>\n                            \n                            <p ng-if="additionalAccountType === \'ORG\' || additionalAccountType === \'SMB\'" class="text-muted text-xs">\n                                {{ \'linkage.additionalAccount.description.notice.\' + additionalAccountType  | translate }}\n                            </p>\n                        </div>\n                        <div ng-if="::!$ctrl.hasWarning(additionalAccountType)" class="col-12 col-sm-3">\n                            <a class="btn btn-primary w-100" ng-if="!$ctrl.isSuccessButton(additionalAccountType)" href="javascript:void(0);" ng-model="$ctrl.additionalAccountDetails.additionalAccountType" ng-click="$ctrl.selectType(additionalAccountType)">\n                                {{ \'word.select\' | translate }}\n                            </a>\n                            <a ng-if="$ctrl.isSuccessButton(additionalAccountType)" class="btn w-100 btn-success" href="javascript:void(0);">\n                                {{ \'word.selected\' | translate }}\n                            </a>\n                        </div>\n                    </div>\n                    <br>\n                </div>\n            </div>\n        </div>\n    </div>'},function(e,t,n){e.exports=function(e){n(1739)(e),n(1741)(e)}},function(e,t,n){e.exports=function(e){e.component("additionalAccountRedirectModal",{template:n(1740),controller:["$window","ModalService",function(e,t){var n=this;n.$onInit=function(){n.type=t.getModalData().type;t.setModalButtons([{label:"word.cancel",alignment:"left",isDisabled:!1,fn:function(){t.closeModal()}},{label:"word.accept",alignment:"right",isDisabled:!1,btnType:"primary",fn:function(){e.location.href="/Universal/Application?type="+n.type}}])}}]})}},function(e,t){e.exports='<div class="row">\n    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n        <p>{{\'linkage.additionalAccount.redirect.text\' | translate }}</p>\n    </div>\n</div>\n'},function(e,t,n){e.exports=function(e){e.component("epAdminDelinkInfoModal",{template:n(1742),controller:["ModalService",function(e){var t=this;t.$onInit=function(){t.adminInfo=e.getModalData().adminInfo,t.employeeClientList=t.adminInfo.employeeClientList;e.setModalButtons([{label:"word.close",alignment:"right",isDisabled:!1,btnType:"primary",fn:function(){e.closeModal()}}])}}]})}},function(e,t){e.exports='<div class="row">\n    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n        <p>{{\'admin.management.delink.notAllowed\' | translate }}</p>\n    </div>\n</div>\n<div ng-if="$ctrl.employeeClientList.length > 0">\n    <am-form-label label-text="{{\'linkage.label.employeeAccounts\' | translate}}" value-text="{{$ctrl.employeeClientList}}"></am-form-label>\n</div>'},function(e,t,n){e.exports=function(e){n(1744)(e),n(1748)(e)}},function(e,t,n){e.exports=function(e){n(1745)(e),n(1746)(e),n(1747)(e);n(2)(e,["additional-account-pre-requisite","additional-account-redirection","additional-account-type","additional-account-created","additional-tbsz-completion","pending-additional-account"],function(){return[n.e(10).then(n.t.bind(null,2103,7)),n.e(10).then(n.t.bind(null,2104,7)),n.e(10).then(n.t.bind(null,2105,7)),n.e(10).then(n.t.bind(null,2106,7)),n.e(10).then(n.t.bind(null,2107,7)),n.e(10).then(n.t.bind(null,2108,7))]})}},function(e,t){e.exports=function(e){e.component("additionalAccountSequence",{template:function(){var e="";return e+='<am-dynamic-sequence ng-if="::$ctrl.isApplication" sequence-source="/AccountManagement/Linkage/Sequence/ADDITIONAL_ACCOUNT" cancel-fn="$ctrl.cancel()"></am-dynamic-sequence>',e+='<am-dynamic-sequence ng-if="::!$ctrl.isApplication" sequence-source="/AccountManagement/Linkage/Sequence/ADDITIONAL_ACCOUNT"></am-dynamic-sequence>',e},controller:["ACTIVE_CONTEXT","ApplicationContext",function(e,t){var n=this;n.$onInit=function(){n.isApplication=e===t.STANDALONE;var a=window.cancelFn;n.cancel=a||angular.noop}}]})}},function(e,t){e.exports=function(e){function t(){var e=this;e.$onInit=function(){var t=window.cancelFn;e.cancel=t||angular.noop}}e.controller("AdditionalAccountAccessController",t),t.$inject=[]}},function(e,t){e.exports=function(e){e.component("tbszPartitionApprovalSequence",{template:'<am-dynamic-sequence sequence-source="/AccountManagement/TbszPartition/Approve"></am-dynamic-sequence>'})}},function(e,t,n){e.exports=function(e){n(1749)(e)}},function(e,t,n){e.exports=function(e){e.component("adminLinkageAdditionalInfo",{template:n(1750),controller:["$translate","ModalService","DynamicSequenceService","NavigationService","BreadcrumbAction",function(e,t,n,a,r){var i=this;i.$onInit=function(){i.feesTemplatesPage=n.getSequenceData().feesTemplatesPage,i.submit=function(){n.stepForward({choice:i.choice})},i.goToTemplateConfigurationScreen=function(){a.navigate(i.feesTemplatesPage)},n.configureButtons({canGoBack:n.getSequenceData().stepIndex>0,continueBtn:{isDisabled:function(){return angular.isUndefined(i.choice)},onClick:i.submit}})}}]})}},function(e,t){e.exports='<div page-structure>\n    <div class="row">\n        <h4>{{\'feesConfigurationType.ADVISOR\' | translate}}</h4>\n        <p>{{\'linkage.employeePlan.admin.feeTemplate.configure\' | translate}}</p>\n    </div>\n    <br />\n    <div class="row">\n        <div class="col-xs-2 col-sm-1 col-md-1 col-lg-1">\n            <p class="text-right">\n                <input name="choice" ng-model="$ctrl.choice" type="radio" value="{{true}}" i-check>\n            </p>\n        </div>\n        <div class="col-xs-10 col-sm-11 col-md-11 col-lg-11">\n            <p>{{\'linkage.employeePlan.admin.feeTemplate.choice.yes\' | translate}}</p>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-xs-2 col-sm-1 col-md-1 col-lg-1">\n            <p class="text-right">\n                <input name="choice" ng-model="$ctrl.choice" type="radio" value="{{false}}" i-check>\n            </p>\n        </div>\n        <div class="col-xs-10 col-sm-11 col-md-11 col-lg-11">\n            <p>{{\'linkage.employeePlan.admin.feeTemplate.choice.no\' | translate}}</p>\n        </div>\n    </div>\n    <br/>\n    <div class="row">\n        <p translate="linkage.employeePlan.admin.feeTemplate.new" translate-values="{linkStart: \'<a href=&quot;javascript:void(0);&quot; ng-click=&quot;$ctrl.goToTemplateConfigurationScreen()&quot;>\', linkEnd: \'</a>\'}" translate-compile></p>\n    </div>\n    <br/>\n    <div class="row">\n        <div class="alert alert-info">\n            <ul>\n                <li>{{ \'linkage.employeePlan.admin.feeTemplate.notice.one\' | translate }}</li>\n                <li>{{ \'linkage.employeePlan.admin.feeTemplate.notice.two\' | translate }}</li>\n                <li>{{ \'linkage.employeePlan.admin.feeTemplate.notice.three\' | translate }}</li>\n            </ul>\n        </div>\n    </div>\n    \n</div>'},function(e,t,n){e.exports=function(e){n(1752)(e)}},function(e,t,n){e.exports=function(e){n(1753)(e),n(1755)(e),n(1757)(e),n(1759)(e),n(1761)(e)}},function(e,t,n){e.exports=function(e){e.component("policyHolderDelinkController",{template:n(1754),controller:["$translate","ResourceService","ModalService",function(e,t,n){var a=this;a.showAcctIds=function(e){return e.join(", ")},a.$onInit=function(){var e=n.getModalData();a.linkType=e.linkType,a.isError=!1,a.success=!1,a.policyAcctIdsToDelink=e.policyAcctIdsToDelink,a.failedPolicyAcctIds=[],a.successfulPolicyAcctIds=[],a.errors={};var r=function(){a.isLoading=!0,a.success=!1,a.isError=!1,t.create(AM_APP_ROOT+"/PolicyHolderLinkDelink/Delink",{policyAcctIdsToDelink:a.policyAcctIdsToDelink}).then(function(e){a.success=!0,a.successfulPolicyAcctIds=e.data.successfulPolicyAcctIds},function(e){a.errors=e.data.errors,a.validationErrors=e.data.validationErrors,a.failedPolicyAcctIds=e.data.failedPolicyAcctIds,a.isError=!0}).finally(function(){a.isLoading=!1,o()})},i=function(){a.successfulPolicyAcctIds.length>0||a.isError?n.closeModal("reload"):n.closeModal()},o=function(){var e=[];a.isError||a.successfulPolicyAcctIds.length>0?e.push({label:"word.close",alignment:"right",fn:i}):e.push({label:"word.continue",alignment:"right",fn:r,btnType:"primary"}),n.setModalButtons(e)};o()}}]})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.isLoading"></loading-overlay>\n<div class="row" ng-if="!$ctrl.isError && $ctrl.successfulPolicyAcctIds.length == 0">\n    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n        <p>{{\'policyHolder.delink.description\' | translate}}</p>\n        <p ng-if="$ctrl.policyAcctIdsToDelink && $ctrl.policyAcctIdsToDelink.length > 0">{{$ctrl.showAcctIds($ctrl.policyAcctIdsToDelink)}}</p>\n        <br>\n    </div>\n</div>\n\n<div class="row" ng-if="$ctrl.isError" >\n    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n        <div ng-if="$ctrl.failedPolicyAcctIds && $ctrl.failedPolicyAcctIds.length > 0" class="alert alert-danger">\n            <p>{{\'policyHolder.delink.policy.failure\' | translate}}</p>\n            <p>{{$ctrl.showAcctIds($ctrl.failedPolicyAcctIds)}}</p>\n        </div>\n        <div class="alert alert-danger" ng-if="$ctrl.validationErrors && $ctrl.validationErrors.length > 0" ng-repeat="err in $ctrl.validationErrors">{{err}}</div>\n    </div>\n</div>\n\n<div class="row" ng-if="!$ctrl.isError && $ctrl.successfulPolicyAcctIds.length > 0">\n    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n        <div class="alert alert-success">\n            <p>{{\'policyHolder.delink.policy.success\' | translate}}</p>\n            <p>{{$ctrl.showAcctIds($ctrl.successfulPolicyAcctIds)}}</p>\n        </div>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("policyHolderLinkController",{template:n(1756),controller:["$translate","ResourceService","ModalService",function(e,t,n){var a=this;a.showAcctIds=function(e){return e.join(", ")},a.getServerErrors=function(){return a.errors};var r=function(){a.isLoading=!0,a.isError=!1,a.success=!1,t.create(AM_APP_ROOT+"/PolicyHolderLinkDelink/Link",{policyAcctIdsToLink:a.policyAcctIdsToLink,advisorAccountId:a.advisorAccountId}).then(function(e){a.successfulPolicyAcctIds=e.data.successfulPolicyAcctIds,a.success=!0},function(e){a.errors=e.data.errors,a.validationErrors=e.data.validationErrors,a.failedPolicyAcctIds=e.data.failedPolicyAcctIds,a.isError=!0}).finally(function(){a.isLoading=!1,o()})},i=function(){a.successfulPolicyAcctIds.length>0||a.isError?n.closeModal("reload"):n.closeModal()},o=function(){var e=[];a.isError||a.successfulPolicyAcctIds.length>0?e.push({label:"word.close",alignment:"right",fn:i}):e.push({label:"word.continue",alignment:"right",fn:r,btnType:"primary",isDisabled:function(){return!a.advisorAccountId}}),n.setModalButtons(e)};a.$onInit=function(){var e=n.getModalData();a.policyAcctIdsToLink=e.policyAcctIdsToLink,a.linkType=e.linkType,a.successfulPolicyAcctIds=[],a.failedPolicyAcctIds=[],a.advisors=[],a.success=!1,a.errors={},a.isError=!1,a.isLoading=!0,t.fetch(AM_APP_ROOT+"/PolicyHolderLinkDelink/advisors").then(function(e){a.advisors=e.data.advisors},function(e){a.errors=e.data.errors,a.isError=!0}).finally(function(){a.isLoading=!1}),o()}}]})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.isLoading"></loading-overlay>\n<div class="row" ng-if="!$ctrl.isError && !$ctrl.success">\n    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n        <p>{{\'policyHolder.choose.advisor.description\' | translate}}</p>\n        <p ng-if="$ctrl.policyAcctIdsToLink && $ctrl.policyAcctIdsToLink.length > 0" >{{$ctrl.showAcctIds($ctrl.policyAcctIdsToLink)}}</p>\n        <br>\n    </div>\n</div>\n\n<div ng-if="($ctrl.advisors.length > 0 && !$ctrl.isError && !$ctrl.success) || $ctrl.errors[\'advisorAccountId\']" class="form-group">\n    <div class="row">\n        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" ng-form="$ctrl.policyLinkForm" form-server-errors="$ctrl.getServerErrors()">\n            <am-form-select name="advisorAccountId" ng-model="$ctrl.advisorAccountId" label-text="{{\'policyHolder.advisor.account\' | translate}}" options="$ctrl.advisors" no-translate="true" hide-empty-option="true" enable-single-option="true"></am-form-select>\n        </div>\n    </div>\n</div>\n\n<div ng-if="$ctrl.advisors.length == 0">\n    <div class="row">\n        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n            <div class="alert alert-warning">\n                <p>{{\'policyHolder.noAdvisor.configured.description\' | translate}}</p>\n            </div>\n        </div>\n    </div>\n</div>\n\n<div class="row" ng-if="$ctrl.isError" >\n    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n        <div ng-if="$ctrl.failedPolicyAcctIds && $ctrl.failedPolicyAcctIds.length > 0" class="alert alert-danger">\n            <p>{{\'policyHolder.link.policy.failure\' | translate}}</p>\n            <p>{{$ctrl.showAcctIds($ctrl.failedPolicyAcctIds)}}</p>\n        </div>\n        <div class="alert alert-danger" ng-if="$ctrl.errors.invalidAdvisor">\n            <p class="text-center">{{\'field.error.invalidAdvisor\' | translate}}</p>\n        </div>\n        <div class="alert alert-danger" ng-if="$ctrl.validationErrors && $ctrl.validationErrors.length > 0" ng-repeat="err in $ctrl.validationErrors">{{err}}</div>\n    </div>\n</div>\n\n<div class="row" ng-if="!$ctrl.isError && $ctrl.successfulPolicyAcctIds && $ctrl.successfulPolicyAcctIds.length > 0" >\n    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n        <div class="alert alert-success">\n            <p>{{\'policyHolder.link.policy.success\' | translate}}</p>\n            <p>{{$ctrl.showAcctIds($ctrl.successfulPolicyAcctIds)}}</p>\n        </div>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("policyHolderLinkDelink",{template:n(1758),controller:[function(){this.$onInit=function(){}}]})}},function(e,t){e.exports='<div page-structure>\n     <div class="row">\n        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n                <div class="tab-content crm-content">\n                    <am-item-manipulator item-template="policy-holder-link-delink-list.component" manipulator-id="PolicyHolderLinkDelinkList"></am-item-manipulator>\n                </div>\n        </div>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("policyHolderLinkDelinkList",{require:{$itemManipulator:"^^amItemManipulator"},template:n(1760),controller:["$translate","ResourceService","ModalService",function(e,t,n){var a=this;a.policyHolderLinkDelinkPreferences={},a.filterOptionMapping={};var r=[],i=[];a.linkType="LINK",a.$onInit=function(){a.refreshGrid=function(){a.error=void 0,r=[],i=[],a.$itemManipulator.itemControl.load({refreshGrid:"Yes",linkType:a.linkType})},a.getSorter=function(e){var t=a.$itemManipulator.services.SORTER.sorters;for(key in t)if(t[key].id==e)return t[key];return null},a.getTablePreference=function(){return a.policyHolderLinkDelinkPreferences.policyHolderLinkDelinkListColumns},a.isColumnEnabled=function(e){var t=a.policyHolderLinkDelinkPreferences.policyHolderLinkDelinkListColumns;return!angular.isUndefined(t)&&!angular.isUndefined(t[e])&&t[e].enabled},a.isLinkPolicyButtonDisabled=function(){return 0==r.length},a.addPolicyAcctIdsToLink=function(e){var t=r.indexOf(e.policyAcctId);e.selected&&-1==t?r.push(e.policyAcctId):e.selected||r.splice(t,1)},a.isDelinkPolicyButtonDisabled=function(){return 0==i.length},a.addPolicyAcctIdsToDelink=function(e){var t=i.indexOf(e.policyAcctId);e.selected&&-1==t?i.push(e.policyAcctId):e.selected||i.splice(t,1)},a.setLinkType=function(e){a.linkType=e,a.refreshGrid()},a.delinkPolicy=function(){var t={title:e.instant("policyHolder.delink.title"),templateUrl:"policy-holder-delink-controller.component",dialogClass:"modal-md",modalData:{policyAcctIdsToDelink:i,linkType:"DELINK"}};n.openModal(t).then(function(e){"reload"==e&&a.refreshGrid()})},a.linkPolicy=function(){var t={title:e.instant("policyHolder.link.title"),templateUrl:"policy-holder-link-controller.component",dialogClass:"modal-md",modalData:{policyAcctIdsToLink:r,linkType:"LINK"}};n.openModal(t).then(function(e){"reload"==e&&a.refreshGrid()})},a.cancelRetailRequest=function(t){var r={title:e.instant("policyHolder.cancel.linkDelink.request.title"),templateUrl:"cancel-link-delink-request.component",dialogClass:"modal-md",modalData:{item:t,linkType:a.linkType}};n.openModal(r).then(function(e){"reload"==e&&a.refreshGrid()})},a.$itemManipulator.loadInProgress=!0,t.fetch(AM_APP_ROOT+"/PolicyHolderLinkDelinkList/Preferences").then(function(e){a.policyHolderLinkDelinkPreferences=e.data.preferences,a.$itemManipulator.itemControl.load()}).finally(function(){})}}]})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.$itemManipulator.loadInProgress"></loading-overlay>\n\n<div ng-if="!$ctrl.$itemManipulator.loadInProgress">\n<div class="row">\n    <div class="col-xs-12 col-sm-6 col-md-4 col-lg-4">\n        <div class="btn-selectors">\n            <p>\n              <a class="btn btn-default" href="javascript:void(0)" ng-class="{ \'active\' : $ctrl.linkType === \'LINK\' }" ng-click="$ctrl.setLinkType(\'LINK\')">{{\'policyHolder.linkage.linkType.link\' | translate}}</a>\n            </p>\n        </div>\n    </div>\n    <div class="col-xs-12 col-sm-6 col-md-4 col-lg-4">\n        <div class="btn-selectors">\n            <p>\n              <a class="btn btn-default" href="javascript:void(0)" ng-class="{ \'active\' : $ctrl.linkType === \'DELINK\' }" ng-click="$ctrl.setLinkType(\'DELINK\')">{{\'policyHolder.linkage.linkType.delink\' | translate}}</a>\n            </p>\n        </div>\n    </div>\n</div>\n\x3c!-- Link/Delink Table Starts --\x3e\n<div class="panel-heading">\n    <span class="btn-group-right">\n        <ul class="btn-icons">\n            <li><am-button btn-type="icon" on-click="$ctrl.refreshGrid()" btn-icon="fa fa-sync tooltips" tooltip-text="{{\'word.refresh\' | translate}}"></am-button>\n            </li>\n            <table-preference-config preference="$ctrl.getTablePreference()" preference-name="policyHolderLinkDelinkListColumns" preference-key-prefix="policyHolder.linkage.column."></table-preference-config>\n        </ul>\n    </span>\n</div>\n<div ng-if="$ctrl.$itemManipulator.entries.length">\n    <div class="row">\n        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n            <br>\n            <div ng-if="$ctrl.error" class="alert alert-warning">\n                <p>{{ $ctrl.error }}</p>\n            </div>\n            <div class="table-responsive">\n                <table width="100%" cellpadding="0" cellspacing="0" border="0" class="table table-striped tablesorter" id="table-all">\n                    <thead>\n                         <tr>\n                            <th ng-show="$ctrl.linkType === \'LINK\'" width="10%" align="center" valign="middle" class="sorter-false">{{\'policyHolder.linkage.column.link.selected\' | translate}}</th>\n                            <th ng-show="$ctrl.linkType === \'DELINK\'" width="10%" align="center" valign="middle" class="sorter-false">{{\'policyHolder.linkage.column.delink.selected\' | translate}}</th>\n                            <th ng-show="$ctrl.isColumnEnabled(\'policy\')" ng-click="$ctrl.$itemManipulator.toggleSort($ctrl.getSorter(\'policy\'))"\n                                width="20%" align="left" valign="middle" class="header"\n                                ng-class="{ \'headerSortDown\' : $ctrl.getSorter(\'policy\').state == \'DESCENDING\',\n                                            \'headerSortUp\' : $ctrl.getSorter(\'policy\').state == \'ASCENDING\' }">\n                                {{\'policyHolder.linkage.column.policy\' | translate}}\n                            </th>\n                            <th ng-show="$ctrl.isColumnEnabled(\'advisor\')" ng-click="$ctrl.$itemManipulator.toggleSort($ctrl.getSorter(\'advisor\'))"\n                                width="15%" align="left" valign="middle" class="header"\n                                ng-class="{ \'headerSortDown\' : $ctrl.getSorter(\'advisor\').state == \'DESCENDING\',\n                                            \'headerSortUp\' : $ctrl.getSorter(\'advisor\').state == \'ASCENDING\' }">\n                                {{\'policyHolder.linkage.column.advisor\' | translate}}\n                            </th>\n                            <th ng-show="$ctrl.isColumnEnabled(\'policyAcctId\')" ng-click="$ctrl.$itemManipulator.toggleSort($ctrl.getSorter(\'policyAcctId\'))"\n                                width="15%" align="left" valign="middle" class="header"\n                                ng-class="{ \'headerSortDown\' : $ctrl.getSorter(\'policyAcctId\').state == \'DESCENDING\',\n                                            \'headerSortUp\' : $ctrl.getSorter(\'policyAcctId\').state == \'ASCENDING\' }">\n                                {{\'policyHolder.linkage.column.policyAcctId\' | translate}}\n                            </th>\n                            <th ng-show="$ctrl.isColumnEnabled(\'retailRequestId\')" ng-click="$ctrl.$itemManipulator.toggleSort($ctrl.getSorter(\'retailRequestId\'))"\n                                width="20%" align="left" valign="middle" class="header"\n                                ng-class="{ \'headerSortDown\' : $ctrl.getSorter(\'retailRequestId\').state == \'DESCENDING\',\n                                            \'headerSortUp\' : $ctrl.getSorter(\'retailRequestId\').state == \'ASCENDING\' }">\n                                {{\'policyHolder.linkage.column.retailRequestId\' | translate}}\n                            </th>\n                            <th ng-show="$ctrl.isColumnEnabled(\'accountNav\')" ng-click="$ctrl.$itemManipulator.toggleSort($ctrl.getSorter(\'accountNav\'))"\n                                width="10%" align="left" valign="middle" class="header"\n                                ng-class="{ \'headerSortDown\' : $ctrl.getSorter(\'accountNav\').state == \'DESCENDING\',\n                                            \'headerSortUp\' : $ctrl.getSorter(\'accountNav\').state == \'ASCENDING\' }">\n                                {{\'policyHolder.linkage.column.accountNav\' | translate}}\n                            </th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr ng-repeat="item in $ctrl.$itemManipulator.entries">\n                            <td ng-show="$ctrl.linkType === \'LINK\'" align="center" valign="middle">\n                                 <input ng-model="item.selected" type="checkbox" ng-change="$ctrl.addPolicyAcctIdsToLink(item)" i-check ng-disabled="item.advisor || item.retailRequestId > 0"/>\n                            </td>\n                             <td ng-show="$ctrl.linkType === \'DELINK\'" align="center" valign="middle">\n                                 <input ng-model="item.selected" type="checkbox" i-check ng-change="$ctrl.addPolicyAcctIdsToDelink(item)" ng-disabled="!item.advisor || item.retailRequestId > 0"/>\n                            </td>\n                            <td align="left" valign="middle" ng-show="$ctrl.isColumnEnabled(\'policy\')">{{item.policy}}</td>\n                            <td align="left" valign="middle" ng-show="$ctrl.isColumnEnabled(\'advisor\')">{{ item.advisor }}</td>\n                            <td align="left" valign="middle" ng-show="$ctrl.isColumnEnabled(\'policyAcctId\')">{{ item.policyAcctId }}</td>\n                            <td align="left" valign="middle" ng-show="$ctrl.isColumnEnabled(\'retailRequestId\')">\n                                <div ng-if="item.retailRequestId > 0">{{\'policyHolder.linkDelink.retailRequest.description\' | translate}}&nbsp;\n                                    <a href="javascript:void(0)" ng-click="$ctrl.cancelRetailRequest(item)">{{\'policyHolder.cancel.linkDelink.request.title\' | translate}}</a>\n                                </div>\n                             </td>\n                            <td align="left" valign="middle" ng-show="$ctrl.isColumnEnabled(\'accountNav\')">{{item.accountNav | number:0}}</td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n        </div>\n    </div>\n    <pagination-controls></pagination-controls>\n</div>\n\x3c!-- Link/Delink Table Ends --\x3e\n<br>\n<div class="text-center">\n  <am-button ng-if="$ctrl.linkType == \'LINK\'" is-disabled="$ctrl.isLinkPolicyButtonDisabled()" btn-text="{{\'policyHolder.linkage.button.link\' | translate}}" on-click="$ctrl.linkPolicy()" btn-type="primary"></am-button>\n  <am-button ng-if="$ctrl.linkType == \'DELINK\'" is-disabled="$ctrl.isDelinkPolicyButtonDisabled()" btn-text="{{\'policyHolder.linkage.button.delink\' | translate}}" on-click="$ctrl.delinkPolicy()" btn-type="primary"></am-button>\n</div>\n</div>\n\n<div ng-if="!$ctrl.$itemManipulator.loadInProgress && !$ctrl.$itemManipulator.entries.length">\n    <br />\n    <div class="alert alert-gray">\n        <p class="text-center">{{\'accountadmin.accounts.warning.noRecords\' | translate}}</p>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("cancelLinkDelinkRequest",{template:n(1762),controller:["ResourceService","ModalService",function(e,t){var n=this,a=function(){e.delete(AM_APP_ROOT+"/RetailRequest/"+n.item.retailRequestId).then(function(e){n.result=e.data.result,n.success=!0},function(e){n.isError=!0}).finally(function(){i()})},r=function(){n.success||n.isError?t.closeModal("reload"):t.closeModal()},i=function(){var e=[];n.isError||n.success?e.push({label:"word.close",alignment:"right",fn:r}):e.push({label:"word.confirm",alignment:"right",fn:a,btnType:"primary"}),t.setModalButtons(e)};n.$onInit=function(){n.isError=!1,n.success=!1,n.result={};var e=t.getModalData();n.item=e.item,n.linkType=e.linkType,i()}}]})}},function(e,t){e.exports='<div class="row" ng-if="!$ctrl.isError && !$ctrl.success">\n    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n        <p translate="{{\'policyHolder.cancel.linkDelink.confirmation\'}}" translate-values="{linkType: ($ctrl.linkType | lowercase)}"></p>\n        <p ng-if="$ctrl.item.retailRequestId">{{$ctrl.item.policyAcctId}}</p>\n        <br>\n    </div>\n</div>\n\n<div class="row" ng-if="$ctrl.success" >\n    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n        <div class="alert alert-success">\n            <p>{{\'policyHolder.cancel.linkDelink.success.message\' | translate}}</p>\n        </div>\n    </div>\n</div>\n\n<div class="row" ng-if="$ctrl.isError" >\n    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n        <div class="alert alert-danger">\n            <p>{{\'policyHolder.cancel.linkDelink.failure.message\'| translate}}</p>\n        </div>\n    </div>\n</div>'},function(e,t,n){"use strict";var a=angular.module("ibmarketing.marketplace",[]);a.WEBAPP_ROOT="/marketplace.webapp",a.SERVER_PATH="/aces/Marketplace",a.AM_SERVER_PATH="/AccountManagement",a.config(["$translateProvider","$translatePartialLoaderProvider","$windowProvider",function(e,t,n){e.useLoader("$translatePartialLoader",{urlTemplate:"{part}_{lang}.json"});var r=n.$get();e.preferredLanguage(r.AM_LOGIN_LANGUAGE||"en"),e.fallbackLanguage("en"),t.addPart(a.WEBAPP_ROOT+"/i18n/Marketplace")}]),n(1764)(a)},function(e,t,n){e.exports=function(e){n(1765)(e),n(1797)(e),n(1799)(e),n(1803)(e),n(1820)(e),n(1829)(e),n(1831)(e)}},function(e,t,n){e.exports=function(e){n(1766)(e),n(1768)(e),n(1770)(e),n(1772)(e),n(1774)(e),n(1776)(e),n(1777)(e),n(1779)(e),n(1781)(e),n(1783)(e),n(1785)(e),n(1787)(e),n(1789)(e),n(1791)(e),n(1793)(e),n(1795)(e)}},function(e,t,n){e.exports=function(e){e.component("mpApplicant",{bindings:{applicant:"<",onClick:"&"},template:n(1767)()})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<div class="provider" ng-click="$ctrl.onClick()"><div class="provider-header"><mp-applicant-header applicant="$ctrl.applicant"></mp-applicant-header></div><div class="provider-footer"><mp-applicant-footer applicant="$ctrl.applicant"></mp-applicant-footer></div></div>'}},function(e,t,n){e.exports=function(e){e.component("mpApplicantDetails",{bindings:{applicant:"<"},template:n(1769)(),controller:["$translate","MarketplaceService",function(e,t){var n=this;n.$onInit=function(){if(n.marketplaceType=n.applicant.marketplaceType,n.isAdmin=t.isAdminMarketplace(n.marketplaceType),n.strategyTypes="",angular.isArray(n.applicant.strategyTypes))for(var a=0;a<n.applicant.strategyTypes.length;++a){var r=e.instant("marketplaceStrategy."+n.applicant.strategyTypes[a]);n.strategyTypes+=(n.strategyTypes.length>0?", ":"")+r}if(n.productsTraded="",angular.isArray(n.applicant.productsTraded))for(a=0;a<n.applicant.productsTraded.length;++a){var i=e.instant("marketplaceProductType."+n.applicant.productsTraded[a]);n.productsTraded+=(n.productsTraded.length>0?", ":"")+i}if(n.registrations="",angular.isArray(n.applicant.registrations))for(a=0;a<n.applicant.registrations.length;++a){var o=e.instant("marketplaceRegistration."+n.applicant.registrations[a]);n.registrations+=(n.registrations.length>0?", ":"")+o}if(n.languages="",angular.isArray(n.applicant.languages))for(a=0;a<n.applicant.languages.length;++a){var s=e.instant("marketplaceLanguage."+n.applicant.languages[a]);n.languages+=(n.languages.length>0?", ":"")+s}if(n.programmingLanguages="",angular.isArray(n.applicant.programmingLanguages))for(a=0;a<n.applicant.programmingLanguages.length;++a){var l=n.applicant.programmingLanguages[a];n.programmingLanguages+=(n.programmingLanguages.length>0?", ":"")+l}n.applicant.yearsInBusiness&&(n.years=e.instant("marketplace.value.years",{years:n.applicant.yearsInBusiness}))}}]})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<div class="row" ng-if="::$ctrl.marketplaceType === \'ADVISOR\'"><div class="col-xs-12 col-6"><am-field-value ng-if="::$ctrl.applicant.education.length" label-text="{{\'marketplace.label.education\' | translate}}" value-text="{{::$ctrl.applicant.education}}"></am-field-value><am-field-value label-text="{{\'marketplace.label.registration\' | translate}}" value-text="{{::$ctrl.registrations}}"></am-field-value><am-field-value ng-if="::$ctrl.applicant.certifications.length" label-text="{{\'marketplace.label.certifications\' | translate}}" value-text="{{::$ctrl.applicant.certifications}}"></am-field-value><am-field-value label-text="{{\'marketplace.label.beganTrading\' | translate}}" value-text="{{::$ctrl.applicant.dateBegunTrading}}"></am-field-value><am-field-value label-text="{{\'marketplace.label.assetsUnderManagement\' | translate}}" value-text="{{::$ctrl.applicant.totalAum | currency:\'\':0}}"></am-field-value></div><div class="col-xs-12 col-6"><am-field-value label-text="{{\'marketplace.label.strategyType\' | translate}}" value-text="{{::$ctrl.strategyTypes}}"></am-field-value><am-field-value label-text="{{\'marketplace.label.minimumInvestment\' | translate}}" value-text="{{::$ctrl.applicant.minimumInvestment | currency:\'\':0}}"></am-field-value><am-field-value label-text="{{\'marketplace.label.feeStructure\' | translate}}" value-text="{{::$ctrl.applicant.feeStructure}}"></am-field-value><am-field-value label-text="{{\'marketplace.label.productsTraded\' | translate}}" value-text="{{::$ctrl.productsTraded}}"></am-field-value></div></div><div class="row" ng-if="::$ctrl.marketplaceType === \'BROKER\'"><div class="col-xs-12 col-6"><am-field-value label-text="{{\'marketplace.label.beganTrading\' | translate}}" value-text="{{::$ctrl.applicant.dateBegunTrading}}"></am-field-value><am-field-value label-text="{{\'marketplace.label.productsTraded\' | translate}}" value-text="{{::$ctrl.productsTraded}}"></am-field-value></div><div class="col-xs-12 col-6"><am-field-value label-text="{{\'marketplace.label.languages\' | translate}}" value-text="{{::$ctrl.languages}}"></am-field-value><am-field-value label-text="{{\'marketplace.label.region\' | translate}}" value-text="{{::\'marketplaceRegion.\' + $ctrl.applicant.regionOfFocus | translate}}"></am-field-value></div></div><div class="row" ng-if="::$ctrl.marketplaceType === \'MONEY_MANAGER\'"><div class="col-xs-12 col-6"><am-field-value label-text="{{\'marketplace.label.registration\' | translate}}" value-text="{{::$ctrl.registrations}}"></am-field-value><am-field-value label-text="{{\'marketplace.label.beganTrading\' | translate}}" value-text="{{::$ctrl.applicant.dateBegunTrading}}"></am-field-value><am-field-value label-text="{{\'marketplace.label.assetsUnderManagement\' | translate}}" value-text="{{::$ctrl.applicant.totalAum | currency:\'\':0}}"></am-field-value></div><div class="col-xs-12 col-6"><am-field-value label-text="{{\'marketplace.label.minimumInvestment\' | translate}}" value-text="{{::$ctrl.applicant.minimumInvestment | currency:\'\':0}}"></am-field-value><am-field-value label-text="{{\'marketplace.label.productsTraded\' | translate}}" value-text="{{::$ctrl.productsTraded}}"></am-field-value><am-field-value label-text="{{\'marketplace.label.region\' | translate}}" value-text="{{::\'marketplaceRegion.\' + $ctrl.applicant.regionOfFocus | translate}}"></am-field-value></div></div><div class="row" ng-if="::$ctrl.isAdmin"><div class="col-xs-12 col-6"><am-field-value label-text="{{\'marketplace.label.yearsInBusiness\' | translate}}" value-text="{{::$ctrl.years}}"></am-field-value><am-field-value ng-if="::$ctrl.applicant.certifications.length" label-text="{{\'marketplace.label.certifications\' | translate}}" value-text="{{::$ctrl.applicant.certifications}}"></am-field-value><am-field-value ng-if="::$ctrl.applicant.education.length" label-text="{{\'marketplace.label.education\' | translate}}" value-text="{{::$ctrl.applicant.education}}"></am-field-value></div><div class="col-xs-12 col-6"><am-field-value label-text="{{\'marketplace.label.numClients\' | translate}}" value-text="{{::$ctrl.applicant.numberOfClients | currency:\'\':0}}"></am-field-value><am-field-value label-text="{{\'marketplace.label.fees\' | translate}}" value-text="{{::$ctrl.applicant.fees}}"></am-field-value></div></div><div class="row"><div class="col"><am-field-value ng-if="::$ctrl.applicant.dateAdded" label-text="{{\'marketplace.label.dateAdded\' | translate}}" value-text="{{::$ctrl.applicant.dateAdded}}"></am-field-value><div ng-if="::$ctrl.marketplaceType === \'PROGRAMMING\'"><am-field-value label-text="{{\'marketplace.label.programmingLanguages\' | translate}}" value-text="{{::$ctrl.programmingLanguages}}"></am-field-value></div><div ng-if="::$ctrl.marketplaceType === \'SOFTWARE_VENDOR\'"><am-field-value ng-if="::$ctrl.applicant.company.length" label-text="{{\'marketplace.label.providerName\' | translate}}" value-text="{{::$ctrl.applicant.company}}"></am-field-value><am-field-value label-text="{{\'marketplace.label.softwareType\' | translate}}" value-text="{{::\'marketplaceSoftwareType.\' + $ctrl.applicant.softwareType | translate}}"></am-field-value></div><div ng-if="::$ctrl.marketplaceType === \'NEWS_AND_RESEARCH\'"><am-field-value ng-if="::$ctrl.applicant.company.length" label-text="{{\'marketplace.label.providerName\' | translate}}" value-text="{{::$ctrl.applicant.company}}"></am-field-value></div><div ng-if="::$ctrl.marketplaceType === \'ANALYST_RESEARCH\'"><am-field-value ng-if="::$ctrl.applicant.company.length" label-text="{{\'marketplace.label.providerName\' | translate}}" value-text="{{::$ctrl.applicant.company}}"></am-field-value></div><div ng-if="::$ctrl.marketplaceType === \'EDUCATOR\'"><am-field-value label-text="{{\'marketplace.label.educationType\' | translate}}" value-text="{{::\'marketplaceEducationType.\' + $ctrl.applicant.educationType | translate}}"></am-field-value></div><div ng-if="::$ctrl.applicant.isRatingSupported"><am-field-value label-text="{{\'marketplace.label.votes\' | translate}}" value-text="{{::$ctrl.applicant.totalVotes}}"></am-field-value><p><strong translate="marketplace.label.rating">:</strong><mp-stars rating="$ctrl.applicant.rating"></mp-stars></p></div></div></div>'}},function(e,t,n){e.exports=function(e){e.component("mpApplicantFooter",{bindings:{applicant:"<"},template:n(1771)()})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<div class="row" ng-if="::$ctrl.applicant.marketplaceType === \'ADVISOR\' || $ctrl.applicant.marketplaceType === \'MONEY_MANAGER\'"><div class="col-6"><p class="text-small" translate="marketplace.label.yearsInBusiness"></p><p>{{ \'marketplace.value.years\' | translate:{ \'years\' : $ctrl.applicant.yearsInBusiness } }}</p></div><div class="col-6"><p class="text-small" translate="marketplace.label.aum"></p><p>{{ $ctrl.applicant.totalAum | currency : \'\' : 0 }}</p></div></div><div class="row" ng-if="::$ctrl.applicant.marketplaceType === \'BROKER\'"><div class="col-6"><p class="text-small" translate="marketplace.label.yearsInBusiness"></p><p>{{ \'marketplace.value.years\' | translate:{ \'years\' : $ctrl.applicant.yearsInBusiness } }}</p></div><div class="col-6"><p class="text-small" translate="marketplace.label.country"></p><p translate="country.{{$ctrl.applicant.address.country.alpha3}}"></p></div></div><div class="row" ng-if="::$ctrl.applicant.marketplaceType === \'ADMINISTRATOR\'"><div class="col-6"><p class="text-small" translate="marketplace.label.yearsInBusiness"></p><p>{{ \'marketplace.value.years\' | translate:{ \'years\' : $ctrl.applicant.yearsInBusiness } }}</p></div><div class="col-6"><p class="text-small" translate="marketplace.label.numClients"></p><p ng-bind="$ctrl.applicant.numberOfClients"></p></div></div><div class="row"><div class="col-6" ng-if="::$ctrl.applicant.dateAdded"><p class="text-small" translate="marketplace.label.dateAdded"></p><p ng-bind="$ctrl.applicant.dateAdded"></p></div><div class="col-6" ng-if="::$ctrl.applicant.isRatingSupported"><p class="text-small" translate="marketplace.label.ratings"></p><mp-stars rating="$ctrl.applicant.rating"></mp-stars></div></div><div class="row"><div class="col-12"><p class="text-center"><a class="btn btn-primary" href="javascript:void(0)" target="_self" translate="provider.search.moreInfo"></a></p></div></div>'}},function(e,t,n){e.exports=function(e){e.component("mpApplicantHeader",{bindings:{applicant:"<"},template:n(1773)(),controller:["CONTENT_HOST",function(e){var t=this;t.$onInit=function(){t.marketplaceType=t.applicant.marketplaceType,t.contentHost=e}}]})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<div class="row"><div class="col-8"><div class="provider-name"><h5 ng-bind="$ctrl.applicant.displayName"></h5><p ng-if="::$ctrl.marketplaceType === \'ADVISOR\'" ng-bind="$ctrl.applicant.address | amAddress"></p><p ng-if="::$ctrl.marketplaceType === \'BROKER\'" ng-bind="($ctrl.applicant.address.state.dbName.length ? $ctrl.applicant.address.state.dbName + \',\' : \'\') + \' \' + $ctrl.applicant.address.city"></p><p ng-if="$ctrl.marketplaceType === \'MONEY_MANAGER\' || $ctrl.marketplaceType === \'ADMINISTRATOR\'" translate="country.{{$ctrl.applicant.address.country.alpha3}}"></p><p ng-if="::$ctrl.applicant.isRatingSupported" translate="marketplace.value.votes" translate-values="{ \'votes\': $ctrl.applicant.totalVotes }"></p></div></div><div class="col-4"><img ng-src="{{\'https://\' + $ctrl.contentHost + $ctrl.applicant.logoImage}}"></div></div>'}},function(e,t,n){e.exports=function(e){e.component("mpRatingsData",{require:{$itemManipulator:"^^amItemManipulator"},template:n(1775)(),controller:function(){var e=this;e.$onInit=function(){e.$itemManipulator.itemControl.load()}}})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<br><h6 class="subtitle" translate="marketplace.heading.ratings"></h6><div ng-if="$ctrl.$itemManipulator.itemControl.isLoadInProgress()"><br><loading-overlay></loading-overlay><br></div><div ng-if="$ctrl.$itemManipulator.entries === 0"><p translate="marketplace.noComments"></p></div><div class="marketplace-comments-wrapper" ng-if="$ctrl.$itemManipulator.entries.length &gt; 0"><div class="row" ng-repeat="rating in $ctrl.$itemManipulator.entries"><div class="col-2"><p class="text-right"><mp-stars rating="::rating.rating"></mp-stars></p></div><div class="col-10"><p ng-if="::rating.comments &amp;&amp; rating.comments.length &gt; 0">&quot;{{::rating.comments}}&quot;</p><p class="text-small"><span ng-bind="rating.voterId"></span><span ng-if="::rating.dateVoted">({{::rating.dateVoted}})</span></p></div></div></div><pagination-controls></pagination-controls>'}},function(e,t){e.exports=function(e){e.component("mpStars",{bindings:{rating:"<"},template:function(){var e="";return e+='<span class="stars">',e+="   <span ng-style=\"::{ 'width': (14.2 * $ctrl.rating) }\"></span>",e+="</span>",e}})}},function(e,t,n){e.exports=function(e){e.component("mpApply",{bindings:{groups:"<",autoMarketplace:"<?"},template:n(1778)(),controller:["AlphaTestService","SESSION_ID","$translate","BreadcrumbAction","AgreementService","NavigationAction","ResourceService","PageService","NavigationService","MarketplaceService","ModalService",function(t,n,a,r,i,o,s,l,c,u,d){var p=this,g=function(t){var n={};"ADVISOR"===t?p.path="TA_ADVISOR_MKT_PLACE":"BROKER"===t?p.path="TA_BROKER_MKT_PLACE":"MONEY_MANAGER"===t?p.path="TA_MM_MKT_PLACE":"HFCIP"===t?p.path="TA_HFCI_ADD":u.isAdminMarketplace(t)?p.path="TA_ADM_MKT_PLACE":(n.id="MpConsultantApplication",n.path=e.WEBAPP_ROOT+"/sequences/mpApplicationSequence.html",n.pageData={sequenceType:"/"+t},n.title=function(){return a.instant("mp.title.application",{marketplaceType:a.instant("marketplaceType."+t)})},n.skipFetch=!0,p.autoMarketplace.length>0&&(n.breadcrumb=r.REPLACE)),angular.isDefined(p.path)&&(n.id="MarketplaceType",n.path=e.WEBAPP_ROOT+"/pages/apply/marketplaceType.html",n.pageData={marketplaceType:p.path},n.title=a.instant("mp.title.application",{marketplaceType:a.instant("marketplaceType."+t)}),n.skipFetch=!0,p.autoMarketplace.length>0&&(n.breadcrumb=r.REPLACE)),c.navigate(n)};p.$onInit=function(){p.leftGroups=p.groups[0],p.rightGroups=p.groups.length>1?p.groups[1]:[],p.applyMarketplace=function(t){u.isStandalone()?function(e){if(u.isIbcustMarketplace(e)||u.isAdminMarketplace(e)){var t={title:a.instant("apply.modal.title")+a.instant("marketplaceType."+e),templateUrl:"am-redirection.component",dialogClass:"modal-lg",modalData:{marketplaceType:e}};d.openModal(t)}else g(e)}(t.type):(p.isLoading=!0,s.fetch(e.SERVER_PATH+"/Apply/Agreements/"+t.type).then(function(e){!function e(t,n){if(angular.isUndefined(t)||0===t.length)g(n.type);else{l.setIsPageLoading(!1);var a=t[0];i.openAgreementModal(a).then(function(a){!0===a?(t.splice(0,1),e(t,n)):p.autoMarketplace=""})}}(e.data.agreements,t)}).finally(function(){p.isLoading=!1}))},p.autoMarketplace=p.autoMarketplace||"",p.autoMarketplace.length>0&&p.applyMarketplace({type:p.autoMarketplace})}}]})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<h4 translate="mp.apply.heading"></h4><hr><div class="row"><div class="col-12 col-lg-6"><div ng-repeat="group in $ctrl.leftGroups"><h6 translate="marketplaceCategory.{{group.category}}"></h6><p ng-repeat="marketplace in group.marketplaces"><a class="btn btn-default btn-arrow" href="javascript:void(0)" ng-click="$ctrl.applyMarketplace(marketplace)" translate="marketplaceType.{{marketplace.type}}"></a></p></div></div><div class="col-12 col-lg-6"><div ng-repeat="group in $ctrl.rightGroups"><h6 translate="marketplaceCategory.{{group.category}}"></h6><p ng-repeat="marketplace in group.marketplaces"><a class="btn btn-default btn-arrow" href="javascript:void(0)" ng-click="$ctrl.applyMarketplace(marketplace)" translate="marketplaceType.{{marketplace.type}}"></a></p></div></div></div>'}},function(e,t,n){e.exports=function(e){e.component("hfcipTransferRequestForm",{bindings:{request:"=ngModel",rules:"<"},template:n(1780)(),controller:["$filter","$translate","ResourceService",function(t,n,a){var r=this,i=function(){return r.minimumAmount?n.instant("transfer.label.amountMinimum.default",{amount:t("currency")(r.minimumAmount,r.request.transferParameters.moneyAmount.currencyType+" ")}):n.instant("transfer.label.amount")},o=function(){angular.isUndefined(r.request.transferParameters.moneyAmount.currencyType)||(r.isInProgress=!0,a.fetch(e.SERVER_PATH+"/Hfcip/Transfer/MinimumAmount",{method:r.request.transferParameters.method,currency:r.request.transferParameters.moneyAmount.currencyType}).then(function(e){r.minimumAmount=e.data.minimumAmount},function(e){r.errors=e.data.errors}).finally(function(){i(),r.isInProgress=!1}))};r.$onInit=function(){r.onCurrencyChange=o,r.getAmountLabel=i}}]})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<am-form-select hide-empty-option="true" name="currency" ng-model="$ctrl.request.transferParameters.moneyAmount.currencyType" model-listener="$ctrl.onCurrencyChange()" label-text="{{\'word.currency\' | translate}}" options="$ctrl.rules.allowedCurrencies" option-key="\'currency.\'" required></am-form-select><am-form-input name="amount" input-mask-alias="amountPositive" ng-model="$ctrl.request.transferParameters.moneyAmount.amount" type="text" label-text="{{$ctrl.getAmountLabel()}}" required></am-form-input><am-form-textarea name="message" ng-model="$ctrl.request.message" label-text="{{\'hfcip.transfer.label.message\' | translate}}" cols="50" maxlength="200"></am-form-textarea><div ng-if="$ctrl.rules.feeRules"><p translate="hfcip.transfer.invest.fees"></p><br><hfcip-fee-form ng-model="$ctrl.request.fees" rules="$ctrl.rules.feeRules"></hfcip-fee-form></div>'}},function(e,t,n){e.exports=function(e){e.component("hfcipTransferRequestReview",{bindings:{request:"<",fund:"<"},template:n(1782)()})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='\x3c!-- General transaction details --\x3e<am-form-label ng-if="$ctrl.request.id" label-text="{{\'word.referenceNumber\' | translate}}" value-text="{{$ctrl.request.id}}"></am-form-label><am-form-label ng-if="$ctrl.request.requestTime" label-text="{{\'transaction.field.requestDate\' | translate}}" value-text="{{$ctrl.request.requestTime}}"></am-form-label>\x3c!-- HFCIP transfer details --\x3e<am-form-label ng-if="$ctrl.fund.fundName" label-text="{{(\'hfcip.transfer.label.fundName.\' + $ctrl.request.type) | translate}}" value-text="{{$ctrl.fund.fundName}}"></am-form-label><am-form-label label-text="{{\'hfcip.transfer.label.accountId\' | translate}}" value-text="{{$ctrl.request.accountId}}"></am-form-label><am-form-label ng-if="$ctrl.fund.fundAccountId" label-text="{{\'hfcip.transfer.label.fundAccountId\' | translate}}" value-text="{{$ctrl.fund.fundAccountId}}"></am-form-label><am-form-label label-text="{{\'hfcip.transfer.label.type\' | translate}}" value-text="{{\'hfcip.transfer.value.type\' | translate}}"></am-form-label><am-form-label label-text="{{\'word.transactionAmount\' | translate}}" value-text="{{$ctrl.request.transferParameters.moneyAmount | amMoneyAmount}}"></am-form-label><am-form-label ng-if="$ctrl.message" label-text="{{\'hfcip.transfer.label.message\' | translate}}" value-text="{{$ctrl.request.message}}"></am-form-label>\x3c!-- HFCIP Fees to Advisor --\x3e<hfcip-fee-review fee="$ctrl.request.fees"></hfcip-fee-review>'}},function(e,t,n){e.exports=function(e){e.component("hfcipListingData",{require:{$itemManipulator:"^^amItemManipulator"},template:n(1784)(),controller:["$translate","CONTENT_HOST","NavigationService","PageService","ResourceService","FileDownloadService","ModalService",function(t,n,a,r,i,o,s){var l=this,c=function(e,t){l.activeSorterState[t]={id:e.id,state:e.state}},u=function(e){for(var t=[],n=[],a=0;a<l.$itemManipulator.entries.length;++a){var r=l.$itemManipulator.entries[a];"TIER_1"===r.fundType?t.push(r):"TIER_2"===r.fundType&&n.push(r)}"TIER_1"===e?l.tier1=t:"TIER_2"===e?l.tier2=n:(l.tier1=t,l.tier2=n)},d=function(){i.fetch(e.AM_SERVER_PATH+"/Agreement/Form/8732").then(function(e){var n=e.data.agreements;if(n.length>0){var a=n[0].fileContent,r=t.instant("form.title.8732")+".pdf",i=o.decodeBase64(a);o.download(r,i,"application/pdf")}}).finally(function(){l.isInProgress=!1})};l.$onInit=function(){l.tier1=[],l.tier2=[];var i=new Date;l.currentYear=i.getFullYear(),l.lastMonth=0===i.getMonth()?1:i.getMonth(),l.contentHost=n,l.downloadFaq=d,l.activeSorterState={TIER_1:{id:"",state:"NEUTRAL"},TIER_2:{id:"",state:"NEUTRAL"}},l.onSortChange=function(e,t){if(!angular.isUndefined(e)){for(var n=l.$itemManipulator.services.SORTER,a=0;a<n.sorters.length;++a){var r=n.sorters[a];r.id===e.id?(l.activeSorterState[t].id===e.id?"ASCENDING"===l.activeSorterState[t].state||"NEUTRAL"===l.activeSorterState[t].state?r.state="DESCENDING":"DESCENDING"===l.activeSorterState[t].state&&(r.state="ASCENDING"):"ASCENDING"===r.state||"NEUTRAL"===r.state?r.state="DESCENDING":"DESCENDING"===r.state&&(r.state="ASCENDING"),c(r,t)):r.state="NEUTRAL"}l.$itemManipulator.updateSorters().finally(function(){u(t),l.sorters=l.$itemManipulator.services.SORTER.sorters})}},l.getSorter=function(e){if(!angular.isUndefined(l.sorters)){var t=l.sorters;for(var n in t){var a=t[n];if(a.id===e)return a}return{}}},l.getSortState=function(e,t){return l.activeSorterState[t].id===e?l.activeSorterState[t].state:"NEUTRAL"},l.$itemManipulator.itemControl.load().finally(function(){u(),l.sorters=l.$itemManipulator.services.SORTER.sorters}),l.getPreviousFiveYearsList=function(){for(var e=[],t=l.currentYear,n=0;n<5;n++)e.push(t),t--;return e},l.getOrderedReturnRates=function(e){var t=[],n=e.returnRates,a=l.getPreviousFiveYearsList();for(var r in a)for(var i in n)if(n[i].year===a[r]){t.push(n[i]);break}return t},l.viewFundDetails=function(n){var i={id:"HfcipFundDetails"};i.path=e.WEBAPP_ROOT+"/pages/search/hedgeFundDetails.html",i.pageData={fund:n,fiveYearsArr:l.getPreviousFiveYearsList(),orderedReturnRates:l.getOrderedReturnRates(n)},i.title=t.instant("marketplace.hfcip.list.funds.heading")+" : "+n.fundName,i.skipFetch=!0,r.setIsPageLoading(!0),a.navigate(i)},l.viewArticles=function(e){var n={title:t.instant("modal.title.article"),templateUrl:"article-modal.component",modalData:{accountId:e}};s.openModal(n)}}}]})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<div class="row"><div class="col-12"><h4 translate="marketplace.hfcip.search.funds.heading"></h4><p translate="marketplace.hfcip.search.funds.label" translate-values="{ linkStart : \'&lt;a href=&amp;quot;javascript:void(0);&amp;quot; ng-click=&amp;quot;$ctrl.downloadFaq()&amp;quot; class=&amp;quot;linkexternal&amp;quot;&gt;\' , linkEnd : \'&lt;/a&gt;\'}" translate-compile></p><br><div ng-if="$ctrl.tier1.length"></div><h6 class="subtitle" translate="marketplace.hfcip.search.funds.TIER_1"></h6><div class="table-responsive"><table class="table table-bordered tablesorter" width="100%" cellpadding="0" cellspacing="0" border="0"><thead><tr><th colspan="2" align="center" valign="middle"><span>&nbsp;</span></th><th colspan="5" align="center" valign="middle"><span translate="marketplace.hfcip.search.funds.performanceData.returnRate.label"></span><br><span class="text-normal" translate="marketplace.hfcip.search.funds.performanceData.returnRate.text"></span></th><th colspan="3" align="center" valign="middle"><span>&nbsp;</span></th></tr><tr><th align="center" valign="middle"></th><th class="header" align="left" valign="middle" translate="marketplace.hfcip.search.funds.performanceData.fund.label" ng-click="$ctrl.onSortChange($ctrl.getSorter(\'name\'), \'TIER_1\')" ng-class="{ \'headerSortDown\' : $ctrl.getSortState(\'name\',\'TIER_1\') == \'DESCENDING\', \'headerSortUp\' : $ctrl.getSortState(\'name\',\'TIER_1\') == \'ASCENDING\' }"></th><th class="header" align="center" valign="middle" ng-repeat="year in ::$ctrl.getPreviousFiveYearsList()" ng-bind="year" ng-click="$ctrl.onSortChange($ctrl.getSorter(\'year_\' + year), \'TIER_1\')" ng-class="{ \'headerSortDown\' : $ctrl.getSortState(\'year_\' + year, \'TIER_1\') == \'DESCENDING\', \'headerSortUp\' : $ctrl.getSortState(\'year_\' + year, \'TIER_1\') == \'ASCENDING\' }"></th><th class="header" align="center" valign="middle" translate="marketplace.hfcip.search.funds.performanceData.aum.label" ng-click="$ctrl.onSortChange($ctrl.getSorter(\'aum\'), \'TIER_1\')" ng-class="{ \'headerSortDown\' : $ctrl.getSortState(\'aum\',\'TIER_1\') == \'DESCENDING\', \'headerSortUp\' : $ctrl.getSortState(\'aum\',\'TIER_1\') == \'ASCENDING\' }"></th><th class="header" align="center" valign="middle" translate="marketplace.hfcip.search.funds.performanceData.minAmt.label" ng-click="$ctrl.onSortChange($ctrl.getSorter(\'minimumInvestment\'), \'TIER_1\')" ng-class="{ \'headerSortDown\' : $ctrl.getSortState(\'minimumInvestment\',\'TIER_1\') == \'DESCENDING\', \'headerSortUp\' : $ctrl.getSortState(\'minimumInvestment\',\'TIER_1\') == \'ASCENDING\' }"></th><th class="header" align="right" valign="middle" translate="marketplace.hfcip.search.funds.performanceData.strategy.label" ng-click="$ctrl.onSortChange($ctrl.getSorter(\'strategy\'), \'TIER_1\')" ng-class="{ \'headerSortDown\' : $ctrl.getSortState(\'strategy\',\'TIER_1\') == \'DESCENDING\', \'headerSortUp\' : $ctrl.getSortState(\'strategy\',\'TIER_1\') == \'ASCENDING\' }"></th></tr></thead><tbody><tr ng-repeat="fund in $ctrl.tier1"><td align="center" valign="middle"><a class="btn-icon noprint" href="javascript:void(0);" ng-click="$ctrl.viewFundDetails(fund)"><i class="fa fa-lg fa-info-circle"></i></a></td><td align="left" valign="middle"><span ng-bind="fund.fundName"></span><span>&nbsp;</span><span ng-if="fund.hasArticles"><a class="btn-icon noprint" href="javascript:void(0);" ng-click="$ctrl.viewArticles(fund.accountId)"><i class="far fa-file-alt" aria-hidden="true"></i></a><span>&nbsp;</span></span><span class="badge bg-blue" ng-if="fund.newFund" translate="word.new"></span></td><td align="center" valign="middle" ng-repeat="returnRate in ::$ctrl.getOrderedReturnRates(fund)"><span ng-class="{ \'text-bold\' : returnRate.audited }" ng-bind="(returnRate.returnRatePercentage === -999) ? \'-\' : (returnRate.returnRatePercentage | number : 2) + \'%\'"></span></td><td align="center" valign="middle"><span ng-bind="fund.strategy.aum.amount | number : 2"></span><span>&nbsp; MM</span></td><td align="center" valign="middle"><span ng-bind="fund.strategy.minimumAmount.amount | number : 2"></span><span>&nbsp; MM</span><span class="text-red" ng-if="::fund.strategy.flexibleInvestment" translate=" *"></span></td><td align="right" valign="middle"><span ng-bind="fund.strategy.briefStrategy"></span></td></tr></tbody></table><p class="text-small"><em><span class="text-red">*</span><span>&nbsp;</span><span translate="marketplace.hfcip.search.funds.note9"></span></em></p><br><br></div><div ng-if="$ctrl.tier2.length"><h6 class="subtitle" translate="marketplace.hfcip.search.funds.TIER_2"></h6><div class="table-responsive"><table class="table table-bordered tablesorter" width="100%" cellpadding="0" cellspacing="0" border="0"><thead><tr><th colspan="2" align="center" valign="middle"></th><th colspan="5" align="center" valign="middle"><span translate="marketplace.hfcip.search.funds.performanceData.returnRate.label"></span><br><span class="text-normal" translate="marketplace.hfcip.search.funds.performanceData.returnRate.text"></span></th><th colspan="3" align="center" valign="middle"></th></tr><tr><th align="center" valign="middle"></th><th class="header" align="left" valign="middle" translate="marketplace.hfcip.search.funds.performanceData.fund.label" ng-click="$ctrl.onSortChange($ctrl.getSorter(\'name\'), \'TIER_2\')" ng-class="{ \'headerSortDown\' : $ctrl.getSortState(\'name\',\'TIER_2\') == \'DESCENDING\', \'headerSortUp\' : $ctrl.getSortState(\'name\',\'TIER_2\') == \'ASCENDING\' }"></th><th class="header" align="center" valign="middle" ng-repeat="year in ::$ctrl.getPreviousFiveYearsList()" ng-click="$ctrl.onSortChange($ctrl.getSorter(\'year_\' + year), \'TIER_2\')" ng-class="{ \'headerSortDown\' : $ctrl.getSortState(\'year_\' + year, \'TIER_2\') == \'DESCENDING\', \'headerSortUp\' : $ctrl.getSortState(\'year_\' + year, \'TIER_2\') == \'ASCENDING\' }" ng-bind="year"></th><th class="header" align="center" valign="middle" translate="marketplace.hfcip.search.funds.performanceData.aum.label" ng-click="$ctrl.onSortChange($ctrl.getSorter(\'aum\'), \'TIER_2\')" ng-class="{ \'headerSortDown\' : $ctrl.getSortState(\'aum\',\'TIER_2\') == \'DESCENDING\', \'headerSortUp\' : $ctrl.getSortState(\'aum\',\'TIER_2\') == \'ASCENDING\' }"></th><th class="header" align="center" valign="middle" translate="marketplace.hfcip.search.funds.performanceData.minAmt.label" ng-click="$ctrl.onSortChange($ctrl.getSorter(\'minimumInvestment\'), \'TIER_2\')" ng-class="{ \'headerSortDown\' : $ctrl.getSortState(\'minimumInvestment\',\'TIER_2\') == \'DESCENDING\', \'headerSortUp\' : $ctrl.getSortState(\'minimumInvestment\',\'TIER_2\') == \'ASCENDING\' }"></th><th class="header" align="right" valign="middle" translate="marketplace.hfcip.search.funds.performanceData.strategy.label" ng-click="$ctrl.onSortChange($ctrl.getSorter(\'strategy\'), \'TIER_2\')" ng-class="{ \'headerSortDown\' : $ctrl.getSortState(\'strategy\',\'TIER_2\') == \'DESCENDING\', \'headerSortUp\' : $ctrl.getSortState(\'strategy\',\'TIER_2\') == \'ASCENDING\' }"></th></tr></thead><tbody><tr ng-repeat="fund in $ctrl.tier2"><td align="center" valign="middle"><a class="btn-icon noprint" href="javascript:void(0);" ng-click="$ctrl.viewFundDetails(fund)"><i class="fa fa-lg fa-info-circle"></i></a></td><td align="left" valign="middle"><span ng-bind="fund.fundName"></span><span ng-if="fund.hasArticles"><span>&nbsp;</span><a class="btn-icon noprint" href="javascript:void(0);" ng-click="$ctrl.viewArticles(fund.accountId)"><i class="far fa-file-alt" aria-hidden="true"></i></a><span>&nbsp;</span></span><span class="badge bg-blue" ng-if="fund.newFund" translate="word.new"></span></td><td align="center" valign="middle" ng-repeat="returnRate in ::$ctrl.getOrderedReturnRates(fund)"><span ng-class="{ \'text-bold\' : returnRate.audited }" ng-bind="(returnRate.returnRatePercentage === -999) ? \'-\' : (returnRate.returnRatePercentage | number : 2) + \'%\'"></span></td><td align="center" valign="middle" ng-bind="(fund.strategy.aum.amount | number : 2) + \' MM\'"></td><td align="center" valign="middle"><span ng-bind="fund.strategy.minimumAmount.amount | number : 2"></span><span>&nbsp; MM</span><span class="text-red" ng-if="::fund.strategy.flexibleInvestment" translate=" *"></span></td><td align="right" valign="middle" ng-bind="fund.strategy.briefStrategy"></td></tr></tbody></table></div><p class="text-small"><em><span class="text-red">*</span><span>&nbsp;</span><span translate="marketplace.hfcip.search.funds.note9"></span></em></p><br><br></div><div class="notes"><p translate="marketplace.hfcip.search.funds.disclaimer1"></p><p translate="marketplace.hfcip.search.funds.disclaimer2"></p><br><p><strong translate="marketplace.hfcip.search.funds.note.label"></strong></p><ul><li translate="marketplace.hfcip.search.funds.note1"></li><li translate="marketplace.hfcip.search.funds.note2" translate-values="{ currentYear : $ctrl.currentYear, lastMonth: $ctrl.lastMonth }"></li><li translate="marketplace.hfcip.search.funds.note3"></li><li><i class="far fa-file-alt" aria-hidden="true"></i><span>&nbsp;</span><span translate="marketplace.hfcip.search.funds.note4"></span></li></ul><hr><p translate="marketplace.hfcip.search.funds.warning1"></p><ul><li translate="marketplace.hfcip.search.funds.warning2"></li><li translate="marketplace.hfcip.search.funds.warning3"></li><li translate="marketplace.hfcip.search.funds.warning4"></li></ul></div></div></div>'}},function(e,t,n){e.exports=function(e){e.component("mpListingData",{require:{$itemManipulator:"^^amItemManipulator"},template:n(1786)(),controller:["$translate","orderByTranslatedFilter","MarketplaceService","ModalService","PageService",function(e,t,n,a,r){var i=this,o=function(){if(!angular.isUndefined(i.activeSort)){for(var e=!1,t=i.activeSort.split("_"),n=i.$itemManipulator.services.SORTER,a=0;a<n.sorters.length;++a){var r=n.sorters[a];r.id===t[0]?(e=r.state!==t[1],r.state=t[1]):r.state="NEUTRAL"}e&&i.$itemManipulator.updateSorters()}},s=function(t){for(var n=t.split("_"),a=i.$itemManipulator.services.SORTER,r=void 0,o=0;o<a.sorters.length;++o){var s=a.sorters[o];s.id===n[0]&&(r=s)}return angular.isDefined(r)?e.instant("marketplace.sort.id."+n[0])+" "+e.instant("marketplace.sort.type."+r.sorterType+"."+n[1]):""},l=function(e){var t=r.getCurrentPage().pageData.mpAction;delete r.getCurrentPage().pageData.mpAction;var n={title:e.displayName,templateUrl:"mp-applicant-modal.component",modalData:{marketplaceType:e.marketplaceType,applicantId:e.applicantId,mpCustomerType:i.mpCustomerType,mpAction:t}};a.openModal(n)};i.$onInit=function(){i.mpCustomerType=r.getCurrentPage().pageData.categorizationType,i.onSortChange=o,i.getSortText=s,i.openApplicantModal=l,i.disclaimerKey="generic",i.filterOptionMapping={},i.filterOptionMapping.languages="marketplaceLanguage.",i.filterOptionMapping.products="marketplaceProductType.",i.filterOptionMapping.registrations="marketplaceRegistration.",i.filterOptionMapping.strategies="marketplaceStrategy.",i.filterOptionMapping.adminService="marketplaceAdminService.",i.filterOptionMapping.softwareType="marketplaceSoftwareType.",i.filterOptionMapping.educationType="marketplaceEducationType.",i.filterOptionMapping.regions="country.",i.$itemManipulator.itemHooks.update.push(function(e){if(!(angular.isUndefined(e.manipulator)||angular.isUndefined(e.manipulator.services)||angular.isUndefined(e.manipulator.services.FILTER))){var n=e.manipulator.services.FILTER;if(!angular.isUndefined(n.filters)&&!angular.isUndefined(n.filters.regions)){var a=n.filters.regions.options,r=t(a,"country.","id");n.filters.regions.options=r}}}),i.$itemManipulator.itemHooks.load.push(function(e){if(!angular.isUndefined(e.selectedApplicant)){var t=e.selectedApplicant;angular.isDefined(t)&&null!==t&&l(t)}});var e={},a=r.getCurrentPage().pageData.mpApplicantId;angular.isDefined(a)&&null!==a&&(e.selectedApplicantId=a,delete r.getCurrentPage().pageData.mpApplicantId),i.$itemManipulator.itemControl.load(e).finally(function(){var e=0,t=i.$itemManipulator.services.FILTER;angular.isDefined(t)&&(e=Object.keys(t.filters).length),i.hasFilters=e>1;var a=i.$itemManipulator.services.SORTER;if(angular.isDefined(a)){for(var r=void 0,o=[],s=0;s<a.sorters.length;++s){var l=a.sorters[s];o.push(l.id+"_ASCENDING"),o.push(l.id+"_DESCENDING"),"NEUTRAL"!==l.state&&(r=l.id+"_"+l.state)}i.sortOptions=o,i.activeSort=r}n.hasCustomDisclaimer(i.$itemManipulator.manipulator.marketplaceType)&&(i.disclaimerKey=i.$itemManipulator.manipulator.marketplaceType)})}}]})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<div class="row"><div class="col-12 col-lg-3" ng-if="$ctrl.hasFilters"><accordion-filters filter-key-prefix="marketplace.filter.id." option-key-prefix-map="$ctrl.filterOptionMapping"></accordion-filters></div><div class="col-12" ng-class="{ \'col-lg-9\' : $ctrl.hasFilters, \'col-lg-12\' : !$ctrl.hasFilters }"><div class="provider-results"><div class="row"><div class="col-xs-12 col-6"><div class="provider-search"><freeform-text-filter filter-id="mpText" placeholder-key-prefix="marketplace.filter.option.placeholder."> </freeform-text-filter></div></div><div class="col-xs-12 col-6"><div class="provider-sort"><div class="form-inline"><label class="control-label margin-right-10" translate="marketplace.label.sortBy"></label><am-select ng-model="$ctrl.activeSort" model-listener="$ctrl.onSortChange()" options="$ctrl.sortOptions" option-key="$ctrl.getSortText" hide-empty-option="true" no-translate="true"></am-select></div></div><div class="clearfix"></div></div></div><div class="row"><div class="col-12 col-lg-4" ng-repeat="applicant in $ctrl.$itemManipulator.entries"><mp-applicant applicant="applicant" on-click="$ctrl.openApplicantModal(applicant)"></mp-applicant></div></div><pagination-controls></pagination-controls></div></div></div><hr><div class="notes"><p><strong translate="{{\'marketplace.disclaimer.explanation.\' + $ctrl.disclaimerKey}}" translate-values="{ \'break\' : \'&lt;br /&gt;\', \'startBold\' : \'&lt;strong&gt;\', \'endBold\' : \'&lt;/strong&gt;\', \'startUnderline\' : \'&lt;u&gt;\', \'endUnderline\' : \'&lt;/u&gt;\' }"></strong></p><p ng-if="$ctrl.$itemManipulator.manipulator.isRatingSupported"><strong translate="marketplace.disclaimer.ratings"></strong></p></div>'}},function(e,t,n){e.exports=function(e){e.component("mpSearch",{bindings:{groups:"<",autoMarketplace:"<?",categorizationType:"<?"},template:n(1788)(),controller:["$translate","BreadcrumbAction","AgreementService","NavigationAction","ResourceService","PageService","NavigationService","MarketplaceService",function(t,n,a,r,i,o,s,l){var c=this,u=function(a){var i={};l.isAdminMarketplace(a)?i.id="MpListings_ADMINISTRATOR":i.id="MpListings_"+a,"HFCIP"===a&&l.isStandalone()?(i.path=e.WEBAPP_ROOT+"/pages/search/hfcipWebDetails.html",i.skipFetch=!0,i.pageData={categorizationType:c.categorizationType}):(i.path=e.WEBAPP_ROOT+"/pages/search/listing.html",i.pageData={marketplaceType:a,categorizationType:c.categorizationType,mpApplicantId:o.getCurrentPage().pageData.mpApplicantId,mpAction:o.getCurrentPage().pageData.mpAction},delete o.getCurrentPage().pageData.mpApplicantId,delete o.getCurrentPage().pageData.mpAction,i.title=function(){return t.instant("marketplaceType."+a)},i.skipFetch=!0,c.autoMarketplace.length>0&&o.getBreadcrumbs().length>1&&(i.breadcrumb=n.REPLACE)),i.navigateAction===r.REDIRECT&&o.setIsPageLoading(!0),s.navigate(i)};c.$onInit=function(){c.groups=c.groups||[],c.leftGroups=c.groups[0],c.rightGroups=c.groups.length>1?c.groups[1]:[],c.categorizationType=c.categorizationType||"",c.viewMarketplace=function(t){l.isStandalone()?u(t.type):(c.isLoading=!0,i.fetch(e.SERVER_PATH+"/Search/Agreements/"+t.type).then(function(e){!function e(t,n){if(angular.isUndefined(t)||0===t.length)u(n.type);else{o.setIsPageLoading(!1);var r=t[0];a.openAgreementModal(r).then(function(a){!0===a?(t.splice(0,1),e(t,n)):c.autoMarketplace=""})}}(e.data.agreements,t)}).finally(function(){c.isLoading=!1}))},c.autoMarketplace=c.autoMarketplace||"",c.autoMarketplace.length>0&&(!function(){for(var e in c.groups)for(var t in c.groups[e]){var n=c.groups[e][t].marketplaces;for(var a in n)if(n[a].type===c.autoMarketplace)return!0}}()?o.triggerUnauthorized():c.viewMarketplace({type:c.autoMarketplace}))}}]})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<loading-overlay ng-if="$ctrl.isLoading"></loading-overlay><h4 translate="mp.search.heading"></h4><div class="row"><div class="col-12 col-md-6"><div ng-repeat="group in $ctrl.leftGroups"><h6 translate="marketplaceCategory.{{group.category}}"></h6><p ng-repeat="marketplace in group.marketplaces"><a class="btn btn-default btn-arrow" href="javascript:void(0)" ng-click="$ctrl.viewMarketplace(marketplace)"><span translate="marketplaceType.{{marketplace.type}}"></span></a></p></div></div><div class="col-12 col-md-6"><div ng-repeat="group in $ctrl.rightGroups"><h6 translate="marketplaceCategory.{{group.category}}"></h6><p ng-repeat="marketplace in group.marketplaces"><a class="btn btn-default btn-arrow" href="javascript:void(0)" ng-click="$ctrl.viewMarketplace(marketplace)"><span translate="marketplaceType.{{marketplace.type}}"></span></a></p></div></div></div>'}},function(e,t,n){e.exports=function(e){e.component("mpBackground",{template:n(1790)(),controller:["$translate","PageService",function(e,t){var n=this;n.$onInit=function(){n.getTitle=function(){var n=t.getCurrentPage().id;if(-1!==n.indexOf("MpListings_")){var a=n.split("MpListings_")[1];return e.instant("marketplaceType."+a)}return e.instant("mp.title."+n)}}}]})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<section class="background"><div class="container"><div class="row"><div class="col"><h1 class="page-title" translate="{{$ctrl.getTitle()}}"></h1></div></div></div></section>'}},function(e,t,n){e.exports=function(e){e.component("mpFooter",{template:n(1792)(),controller:["CONTENT_HOST",function(e){var t=this;t.$onInit=function(){t.contentHost=e}}]})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<footer class="marketplace-footer noprint" id="marketplace-footer"><div class="container"><div class="row align-items-center"><div class="col-12 col-md-3"><div class="feedback-link"><p><a href="mailto:ibim@interactivebrokers.com?subject=Investors\' Marketplace Feedback"><i class="fas fa-envelope"><span translate="word.feedback"></span></i></a></p></div></div><div class="col-12 col-md-9"><div class="social-links"><ul><li><a href="https://www.facebook.com/interactivebrokers" target="_blank" rel="noreferrer noopener"><i class="fab fa-facebook"></i><Facebook></Facebook></a></li><li><a href="https://www.instagram.com/interactivebrokers" target="_blank" rel="noreferrer noopener"><i class="fab fa-instagram"></i><Instagram></Instagram></a></li><li><a href="https://www.linkedin.com/company/interactive-brokers" target="_blank" rel="noreferrer noopener"><i class="fab fa-linkedin"></i><LinkedIn></LinkedIn></a></li><li><a href="https://www.twitter.com/ibkr" target="_blank" rel="noreferrer noopener"><i class="fab fa-twitter"></i><Twitter></Twitter></a></li><li><a href="https://www.youtube.com/interactivebrokers" target="_blank" rel="noreferrer noopener"><i class="fab fa-youtube"></i><YouTube></YouTube></a></li></ul></div></div></div></div></footer>'}},function(e,t,n){e.exports=function(e){e.component("mpHeader",{template:n(1794)(),controller:["CONTENT_HOST","MarketplaceService",function(e,t){var n=this;n.$onInit=function(){n.goToHome=t.goToHome,n.find=t.search,n.apply=t.apply,n.contentHost=e}}]})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<div class="marketplace-header" id="marketplace-header"><nav class="navbar navbar-inverse navbar-expand-lg navbar-bottom"><div class="container"><a class="navbar-brand ib-investors-marketplace-logo-black" href="javascript:void(0)" ng-click="$ctrl.goToHome()"></a><button class="d-lg-none navbar-toggler" type="button" data-toggle="collapse" data-target="#marketplace-nav-bottom" aria-controls="marketplace-nav-bottom" aria-expanded="false" aria-label="Toggle Navigation"><span class="navbar-toggler-icon"><i class="fas fa-bars" aria-hidden="true"></i></span></button><div class="navbar-collapse collapse" id="marketplace-nav-bottom"><ul class="navbar-nav ml-auto align-items-center"><li class="nav-item"><a class="nav-link" href="javascript:void(0)" ng-click="$ctrl.goToHome()" translate="marketplace.web.header.buttons.home"></a></li><li class="nav-item"><a class="nav-link" href="javascript:void(0)" ng-click="$ctrl.find()" translate="marketplace.web.header.buttons.find"></a></li><li class="nav-item"><a class="nav-link" href="javascript:void(0)" ng-click="$ctrl.apply()" translate="marketplace.web.header.buttons.apply"></a></li><li class="nav-item"><a class="nav-link" href="https://{{$ctrl.contentHost}}/en/index.php?f=564" translate="marketplace.web.header.buttons.about" target="_blank"></a></li></ul></div></div></nav></div>'}},function(e,t,n){e.exports=function(e){e.component("mpPage",{template:n(1796)(),controller:["MarketplaceService","PageService",function(e,t){var n=this;n.$onInit=function(){n.isPageLoading=t.isPageLoading,n.getPageSource=t.getPagePath,n.finishPageContent=t.onPartialLoad,e.goToHome(),n.isHomePage=function(){return"MpHome"===t.getCurrentPage().id}}}]})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<div class="marketplace-wrapper"><loading-overlay ng-if="$ctrl.isPageLoading()"></loading-overlay><mp-background ng-if="!$ctrl.isHomePage()"></mp-background><ng-include ng-show="!$ctrl.isPageLoading()" src="$ctrl.getPageSource()" onload="$ctrl.finishPageContent()"></ng-include></div>'}},function(e,t,n){e.exports=function(e){n(1798)(e)}},function(e,t){e.exports=function(e){e.constant("MarketplacePageId",Object.freeze({HOME:"MpHome",SEARCH:"MpSearch",APPLY:"MpApply"}))}},function(e,t,n){e.exports=function(e){n(1800)(e),n(1801)(e),n(1802)(e)}},function(e,t){e.exports=function(e){e.directive("countUp",["$compile","$interval",function(e,t){return{restrict:"E",replace:!1,scope:{max:"=max",min:"=?min"},link:function(n,a,r){n.count=n.min||0,0===a.html().trim().length?a.append(e("<span>{{count}}</span>")(n)):a.append(e(a.contents())(n));var i=n.max,o=t(function(){n.count++,n.count>=i&&t.cancel(o)},2e3/i)}}}])}},function(e,t){e.exports=function(e){e.directive("mpPageButtons",["ApplicationContext","ACTIVE_CONTEXT",function(e,t){var n='<section class="panel panel-btns">';return n+='<div class="panel-body">',n+='<div ng-transclude class="row">',n+="</div>",n+="</div>",n+="<br>",{require:"div",restrict:"A",replace:!0,transclude:!0,template:n+="</section>"}}])}},function(e,t){e.exports=function(e){e.directive("mpPageStructure",["ACTIVE_CONTEXT","ApplicationContext",function(e,t){return{restrict:"A",compile:function(n,a){var r=a.mpPageStructure,i=angular.isDefined(a.contentClass)&&""!==a.contentClass?a.contentClass:"results",o=e===t.AM_DEPENDENCY,s="";return o&&(s+='<div class="marketplace-wrapper">'),s+='<section class="'+i+'">',s+='<div class="container">',s+='<div class="row">',s+="innerContent"===r?'<div class="col col-lg-10 offset-lg-1">':'<div class="col">',s+="</div>",s+="</div>",s+="</div>",s+="</section>",o&&(s+="</div>"),{pre:function(e,t){t.wrap(s)}}}}}])}},function(e,t,n){e.exports=function(e){n(1804)(e),n(1806)(e),n(1808)(e),n(1810)(e),n(1812)(e),n(1814)(e),n(1816)(e),n(1818)(e)}},function(e,t,n){e.exports=function(e){e.component("amRedirection",{template:n(1805)(),controller:["$translate","CONTENT_HOST","MarketplaceService","ModalService","NavigationAction","NavigationService",function(e,t,n,a,r,i){var o=this;o.$onInit=function(){var s;o.marketplaceType=a.getModalData().marketplaceType,o.contentHost=t,o.isAdmin=n.isAdminMarketplace(o.marketplaceType),o.params=((s={}).path="https://"+o.contentHost,s.requestParams="?forwardTo=","ADVISOR"===o.marketplaceType?(s.path+="/adv/en/main.php#open-account",s.requestParams+="TA_ADVISOR_MKT_PLACE",s.btnText=e.instant("apply.modal.amRedirection.button.openAcct.advisor")):"BROKER"===o.marketplaceType?(s.path+="/bro/en/main.php#open-account",s.requestParams+="TA_BROKER_MKT_PLACE",s.btnText=e.instant("apply.modal.amRedirection.button.openAcct.broker")):"MONEY_MANAGER"===o.marketplaceType?(s.path+="/mm/en/main.php#open-account",s.requestParams+="TA_MM_MKT_PLACE",s.btnText=e.instant("apply.modal.amRedirection.button.openAcct.mm")):"HFCIP"===o.marketplaceType?(s.path+="/hmf/en/main.php#open-account",s.requestParams+="TA_HFCI_ADD",s.btnText=e.instant("apply.modal.amRedirection.button.openAcct.hfcip")):o.isAdmin?("COMPLIANCE_FIRM"===o.marketplaceType?s.path+="/co/en/main.php#open-account":s.path+="/adm/en/main.php#open-account",s.requestParams+="TA_ADM_MKT_PLACE",s.btnText=e.instant("apply.modal.amRedirection.button.openAcct.admin")):(s.path+="/en/index.php?f=4695",s.requestParams="",s.btnText=e.instant("apply.modal.amRedirection.button.openAcct.gen")),s),o.loginToAm=function(){var e={path:"https://"+o.contentHost+"/sso/Login"+o.params.requestParams,navigateAction:r.REDIRECT};i.navigate(e),a.closeModal()},o.openAccount=function(){var e={navigateAction:r.REDIRECT,path:o.params.path};i.navigate(e),a.closeModal()}}}]})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<div class="form-group"><div class="row"><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"><p class="text-center"><am-button on-click="$ctrl.loginToAm()" btn-type="info" btn-size="large" btn-text="{{\'apply.modal.amRedirection.button.am\' | translate}}"></am-button></p></div><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"><p class="text-center"><am-button on-click="$ctrl.openAccount()" btn-type="info" btn-size="large" btn-text="{{$ctrl.params.btnText}}"></am-button></p></div></div></div>'}},function(e,t,n){e.exports=function(e){e.component("mpApplicantModal",{template:n(1807)(),controller:["$translate","CONTENT_HOST","MarketplaceService","NavigationAction","NavigationService","ModalService","ResourceService","FileDownloadService",function(t,n,a,r,i,o,s,l){var c=this,u=function(){var e={path:"https://account.interactiveadvisors.com/client/signup/create-login",navigateAction:r.REDIRECT};i.navigate(e),o.closeModal()},d=function(){var e=[];if("VIEW"!==c.commentState&&e.push({alignment:"left",label:"marketplace.voterComment.goBack",fn:c.cancelVote}),"VIEW"===c.commentState){if(c.applicant.isRatingSupported&&e.push({alignment:"right",label:"marketplace.action.rateProvider",fn:c.rateProvider}),c.isLinkageSupported)if("ADVISOR"===c.marketplaceType&&"F774752"===c.applicant.accountId){var t=c.isStandalone()?"marketplace.action.openExistingAccount":"marketplace.action.partitionAccount";e.push({label:t,btnType:"primary",alignment:"right",fn:u})}else c.isStandalone()?c.isAdmin?e.push({label:"marketplace.action.linkAccount",btnType:"primary",alignment:"right",fn:function(){c.loginToAm("TA_VIEW_ADM_MKT_PLACE")}}):"MONEY_MANAGER"===c.marketplaceType?(e.push({label:"marketplace.action.openExistingAccount",btnType:"info",alignment:"left",fn:function(){c.loginToAm("TA_VIEW_MM_MKT_PLACE")}}),e.push({label:"marketplace.action.openAccount",btnType:"primary",alignment:"right",fn:c.openAccount})):e.push({label:"marketplace.action.openExistingAccount",btnType:"primary",alignment:"right",fn:function(){c.loginToAm("AA_LINKAGE","&masterAccountId="+c.applicant.accountId)}}):e.push({label:"marketplace.action.linkAccount",btnType:"primary",alignment:"right",fn:c.linkAccount});c.applicant.isSubscribeSupported&&(c.isStandalone()?(e.push({label:"marketplace.action.freeTrial",btnType:"info",alignment:"right",fn:function(){c.loginToAm("TA_DATA_SERVICES")}}),e.push({label:"marketplace.action.openAccount",btnType:"primary",alignment:"right",fn:c.openAccount})):e.push({label:"marketplace.action.subscribe",btnType:"primary",alignment:"right",fn:c.researchSubscribe}))}else"LOGIN"===c.commentState?e.push({alignment:"right",label:"marketplace.voterComment.login",fn:c.voterLogin,isDisabled:c.isLoginDisabled}):"WRITE"===c.commentState?e.push({alignment:"right",label:"marketplace.voterComment.submit",fn:c.submitVote,isDisabled:c.isCommentDisabled}):"CONFIGURE"===c.commentState&&e.push({alignment:"right",label:"marketplace.voterComment.configure",fn:c.configureScreenName});e.length>0&&o.setModalButtons(e)},p=function(){o.openWarningModal({templateUrl:"tp-redirection-warning-modal.component"}).then(function(e){if("REDIRECT"!==e);else{var t={path:c.applicant.website,navigateAction:r.POPUP};i.navigate(t)}})};c.$onInit=function(){c.applicantId=o.getModalData().applicantId,c.marketplaceType=o.getModalData().marketplaceType,c.mpCustomerType=o.getModalData().mpCustomerType,c.contentHost=n,c.isAdmin=a.isAdminMarketplace(c.marketplaceType),c.isStandalone=a.isStandalone,c.providerType=t.instant("marketplace.providerType."+a.getProviderType(c.marketplaceType)),c.isContactVisible=!1,c.contactState="SUBMIT",c.errors={},c.redirect=p,c.ratingsSource=e.SERVER_PATH+"/Ratings/Data/"+c.marketplaceType+"/"+c.applicantId,c.fetchApplicantData=function(){c.isLoading=!0;var t={};c.isStandalone&&(t.mpCustomerType=c.mpCustomerType),s.fetch(e.SERVER_PATH+"/Applicant/"+c.marketplaceType+"/"+c.applicantId,t).then(function(e){c.applicant=e.data.applicant,c.documents=e.data.documents,c.isLinkageSupported=e.data.isLinkageSupported,c.getCaptchaUrl=function(){if(!c.isStandalone())return"";var e=c.applicant.accountId,t=Math.random()*e.length;return c.captchaKey=e.substring(0,t)+e.substring(t+1,e.length),"https://www.interactivebrokers.com/marketplace/php/imgcheck.php?key="+c.captchaKey},angular.isArray(c.applicant.phoneNumbers)?c.applicant.phoneNumbers.length>0&&(c.phoneNumber=c.applicant.phoneNumbers[0]):c.phoneNumber=c.applicant.phoneNumber,c.commentState="VIEW",d()}).finally(function(){c.isLoading=!1,"RateProvider"===o.getModalData().mpAction&&c.rateProvider()})},c.downloadDocument=function(n,a){s.fetch(e.SERVER_PATH+"/Applicant/Document/"+c.marketplaceType,{documentId:n}).then(function(e){var n=t.instant("form.title."+a)+".pdf",r=l.decodeBase64(e.data.documentContent);l.download(n,r,"application/pdf")})},c.researchSubscribe=function(){i.navigate({id:"ResearchSubscription",path:"/dataservices.webapp/pages/research/researchSubscriptionAuth.html",skipFetch:!0}),o.closeModal()},c.linkAccount=function(){var t=c.applicant.accountId,n={id:"Linkage",path:e.AM_SERVER_PATH+"/template/page/linkage/linkageSequence.html",serverPath:e.AM_SERVER_PATH+"/ManageAccount",pageData:{sequenceParameters:{linkageTarget:t}}};i.navigate(n),o.closeModal()},c.toggleContact=function(){c.isContactVisible=!c.isContactVisible},c.submitContactRequest=function(){c.isLoading=!0;var t={marketplaceType:c.marketplaceType,applicantId:c.applicantId,contactEmail:c.contactEmail,contactPhone:c.contactPhone};c.isStandalone()&&(t.contactName=c.contactName,t.captchaKey=c.captchaKey,t.captchaValue=c.captcha),function(t){s.create(e.SERVER_PATH+"/Contact",t).then(function(e){c.contactState="SUCCESS"},function(e){"fail"===e.data.errors.submit&&(c.contactState="ERROR"),c.errors=e.data.errors}).finally(function(){c.isLoading=!1})}(t)},c.isLoginDisabled=function(){return c.isLoading||angular.isUndefined(c.voterUsername)||0===c.voterUsername.length||angular.isUndefined(c.voterPassword)||0===c.voterPassword.length},c.isCommentDisabled=function(){return c.isLoading||angular.isUndefined(c.voterRating)},c.cancelVote=function(){c.commentState="VIEW",d()},c.rateProvider=function(){c.applicant.isRatingSupported&&(c.isLoading=!0,s.fetch(e.SERVER_PATH+"/Ratings/"+c.marketplaceType+"/"+c.applicantId).then(function(e){if(c.voterUsername=e.data.screenName,delete c.voterComments,delete c.voterRating,c.commentState=e.data.result,"LOGIN"===c.commentState){o.closeModal(),t={path:"/sso/Login?action=MpSearch&autoMarketplace="+c.marketplaceType+"&mpApplicantId="+c.applicantId+"&mpAction=RateProvider",navigateAction:r.REDIRECT},i.navigate(t)}else d();var t}).finally(function(){return c.isLoading=!1}))},c.voterLogin=function(){c.isLoginDisabled()||(c.isLoading=!0,s.create(e.SERVER_PATH+"/Ratings",{voterUsername:c.voterUsername,voterPassword:c.voterPassword}).then(function(e){c.commentState="WRITE",d()},function(e){c.commentErrors=e.data.errors}).finally(function(){c.isLoading=!1}))},c.configureScreenName=function(){var t={id:"Settings",path:e.AM_SERVER_PATH+"/template/page/settings/userSettings.html",skipFetch:!0};i.navigate(t),o.closeModal()},c.submitVote=function(){if(!c.isCommentDisabled()){var t={marketplaceType:c.marketplaceType,applicantId:c.applicantId,rating:c.voterRating,comments:c.voterComments};c.isLoading=!0,s.update(e.SERVER_PATH+"/Ratings",t).then(function(e){c.fetchApplicantData()},function(e){c.commentErrors=e.data.errors,c.isLoading=!1})}},c.loginToAm=function(e,t){t=t||"";var n={path:"https://"+c.contentHost+"/sso/Login?forwardTo="+e+t,navigateAction:r.REDIRECT};i.navigate(n),o.closeModal()},c.openAccount=function(){var e;e="MONEY_MANAGER"===c.marketplaceType?"https://"+c.contentHost+"/adv/en/main.php#open-account":"https://"+c.contentHost+"/en/index.php?f=4695";var t={navigateAction:r.REDIRECT,path:e};i.navigate(t)},c.getServerErrors=function(){return c.errors},c.fetchApplicantData()}}]})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<loading-overlay ng-if="$ctrl.isLoading"></loading-overlay><div ng-if="$ctrl.commentState === \'VIEW\'"><div class="row"><div class="col"><div class="row"><div class="col-6 col-xs-12"><p ng-if="::$ctrl.applicant.emailAddress"><i class="fa fa-lg fa-envelope">&nbsp;</i><a href="mailto:{{::$ctrl.applicant.emailAddress}}"><span ng-bind="$ctrl.applicant.emailAddress"></span></a></p><p ng-if="::$ctrl.phoneNumber"><i class="fa fa-lg fa-phone">&nbsp;</i><span ng-bind="$ctrl.phoneNumber.phoneNumber"></span></p></div><div class="col-6 col-xs-12"><p ng-if="::$ctrl.applicant.website"><i class="fa fa-lg fa-globe">&nbsp;</i><a href="javascript:void(0);" ng-click="$ctrl.redirect()"><span ng-bind="$ctrl.applicant.website"></span></a></p><p ng-if="::$ctrl.applicant.address.country.alpha3"><i class="fa fa-lg fa-map-marker-alt">&nbsp;</i><span ng-bind="$ctrl.applicant.address | amAddress"></span></p></div></div></div></div><div ng-if="::$ctrl.applicant.isContactingSupported" ng-cloak><br><p><i class="fa fa-lg fa-comment">&nbsp;</i><a href="javascript:void(0);" ng-click="$ctrl.toggleContact()" translate="marketplace.action.contactProvider" translate-values="{\'providerType\' : $ctrl.providerType}"></a></p><div class="am-animate ng-hide" ng-show="$ctrl.isContactVisible"><br><div ng-if="$ctrl.contactState === \'SUBMIT\'" ng-form="$ctrl.mpContactForm" form-server-errors="$ctrl.getServerErrors()"><div class="well"><div class="row"><div class="col-xs-12 col-sm-10 col-sm-offset-1 col-md-10 col-md-offset-1 col-lg-10 col-lg-offset-1"><div ng-if="::$ctrl.isStandalone()"><br><am-form-input name="name" ng-model="$ctrl.contactName" label-text="{{ \'word.name\' | translate }}" maxlength="20" required></am-form-input><am-form-input name="emailAddress" ng-model="$ctrl.contactEmail" label-text="{{ \'word.email\' | translate }}" maxlength="40" required></am-form-input><am-form-input name="phone" ng-model="$ctrl.contactPhone" label-text="{{ \'phoneNumber.label.phoneNumber\' | translate }}" maxlength="20" required></am-form-input><div class="form-group"><div class="row"><div class="col-xs-12 col-6 col-lg-4"></div><div class="col-xs-12 col-6 col-lg-8"><img alt="captchaImg" ng-src="{{::$ctrl.getCaptchaUrl()}}"></div></div></div><am-form-input name="captcha" ng-model="$ctrl.captcha" label-text="{{ \'applicant.contact.captcha\' | translate }}" maxlength="20" required></am-form-input></div><div ng-if="::!$ctrl.isStandalone()"><div class="form-group"><div class="row"><div class="col"><p translate="marketplace.contact.internal.desc"></p></div></div></div><div class="form-group"><div class="row"><div class="col-xs-2 col-1"><p class="text-center"><input name="email" type="checkbox" i-check ng-model="$ctrl.contactEmail"></p></div><div class="col-xs-10 col-11"><p translate="marketplace.contactRequestType.EMAIL"></p></div></div></div><div class="form-group"><div class="row"><div class="col-xs-2 col-1"><p class="text-center"><input name="phone" type="checkbox" i-check ng-model="$ctrl.contactPhone"></p></div><div class="col-xs-10 col-11"><p translate="marketplace.contactRequestType.PHONE"></p></div></div></div></div><div class="form-group"><div class="row"><div class="col"><am-button btn-type="success" btn-text="{{\'marketplace.contactRequest.submit\' | translate}}" on-click="$ctrl.submitContactRequest()"></am-button></div></div></div></div></div></div></div><div ng-if="$ctrl.contactState === \'SUCCESS\'"><div class="row"><div class="col"><div class="alert alert-success"><p translate="marketplace.contactRequest.success" translate-values="{\'providerType\' : $ctrl.providerType}"></p></div></div></div></div><div ng-if="$ctrl.contactState === \'ERROR\'"><div class="row"><div class="col"><div class="alert alert-danger"><p translate="marketplace.contactRequest.error" translate-values="{\'providerType\' : $ctrl.providerType}"></p></div></div></div></div></div></div><div ng-if="::!$ctrl.isAdmin"><br><h6 class="subtitle" translate="marketplace.heading.description"></h6><p class="text-center" ng-if="::$ctrl.applicant.customLogo"><img ng-src="{{\'https://\' + $ctrl.contentHost + $ctrl.applicant.logoImage}}"></p><p ng-bind-html="::$ctrl.applicant.summary | renderHTML"></p></div><div ng-if="::$ctrl.isAdmin"><br><h6 class="subtitle" translate="marketplace.heading.servicesProvided"></h6><p><ul><li ng-repeat="service in $ctrl.applicant.servicesProvided"><span translate="marketplaceAdminService.{{service}}"></span></li></ul></p></div><br><h6 class="subtitle" translate="marketplace.heading.details"></h6><mp-applicant-details applicant="::$ctrl.applicant"></mp-applicant-details><am-item-manipulator ng-if="::$ctrl.applicant.isRatingSupported" item-template="mp-ratings-data.component" manipulator-id="Ratings" item-source="{{$ctrl.ratingsSource}}"></am-item-manipulator><div ng-if="::$ctrl.documents.length"><br><h6 class="subtitle" translate="marketplace.heading.documentation"></h6><div class="row" ng-repeat="document in ::$ctrl.documents"><div class="col-xs-12 col-9 col-lg-10"> <p translate="form.title.{{document.formNumber}}"></p></div><div class="col-xs-12 col-3 col-lg-2"><p class="text-center"><am-button on-click="$ctrl.downloadDocument(document.documentId, document.formNumber)" btn-size="small" btn-icon="fa-arrow-down" btn-text="PDF"></am-button></p></div></div></div></div><div ng-if="$ctrl.commentState === \'LOGIN\'"><h4 translate="marketplace.voterLogin.heading"></h4><p translate="marketplace.voterLogin.desc"></p><br><am-form-input name="voterUsername" ng-model="$ctrl.voterUsername" label-text="{{\'marketplace.voterLogin.label.screenname\' | translate}}" hook-enter="$ctrl.voterLogin()" is-required="true"></am-form-input><am-form-input name="voterPassword" ng-model="$ctrl.voterPassword" type="password" label-text="{{\'marketplace.voterLogin.label.password\' | translate}}" hook-enter="$ctrl.voterLogin()" is-required="true"></am-form-input><div ng-if="$ctrl.commentErrors[\'voterLogin\']"><div class="alert alert-danger"><p translate="marketplace.voterError.login"></p></div></div><div class="alert alert-gray"><label class="control-label" translate="marketplace.voterLogin.alert.1"></label><p translate="marketplace.voterLogin.alert.2" translate-values="{strongStart: \'&lt;strong&gt;\', strongEnd: \'&lt;/strong&gt;\'}"></p><p translate="marketplace.voterLogin.alert.3"></p><p><a href="javascript:void(0);" ng-click="$ctrl.loginToAm(\'UM_VOTER_REGISTRATION\')" translate="marketplace.voterLogin.alert.4"></a></p></div></div><div ng-if="$ctrl.commentState === \'ALREADY_RATED\'"><div class="alert alert-danger"><p translate="marketplace.voterError.already_rated"></p></div></div><div ng-if="$ctrl.commentState === \'CONFIGURE\'"><p translate="marketplace.voterError.need_configure"></p></div><div ng-if="$ctrl.commentState === \'WRITE\'"><am-form-label label-text="{{\'marketplace.voterLogin.label.screenname\' | translate}}" value-text="{{$ctrl.voterUsername}}"></am-form-label><div class="form-group"><div class="row"><div class="col-xs-12 col-6 col-lg-4"><label class="control-label" translate="marketplace.voterComment.label.rating"></label></div><div class="col-xs-12 col-6 col-lg-8"><div class="rating"><input id="rating_5" type="radio" name="rating" ng-model="$ctrl.voterRating" value="5"><label for="rating_5"></label><input id="rating_4" type="radio" name="rating" ng-model="$ctrl.voterRating" value="4"><label for="rating_4"></label><input id="rating_3" type="radio" name="rating" ng-model="$ctrl.voterRating" value="3"><label for="rating_3"></label><input id="rating_2" type="radio" name="rating" ng-model="$ctrl.voterRating" value="2"><label for="rating_2"></label><input id="rating_1" type="radio" name="rating" ng-model="$ctrl.voterRating" value="1"><label for="rating_1"></label></div></div></div></div><am-form-textarea label-text="{{\'marketplace.voterComment.label.comment\' | translate}}" ng-model="$ctrl.voterComments"></am-form-textarea><div ng-if="$ctrl.commentErrors[\'already_rated\']"><div class="alert alert-danger"><p translate="marketplace.voterError.already_rated"></p></div></div></div>'}},function(e,t,n){e.exports=function(e){e.component("tpRedirectionWarningModal",{template:n(1809)(),controller:["ModalService",function(e){this.$onInit=function(){var t=[];t.push({label:"word.cancel",alignment:"left",fn:e.closeModal}),t.push({label:"word.continue",alignment:"right",fn:function(){e.closeModal("REDIRECT")},btnType:"primary"}),e.setModalButtons(t)}}]})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<div class="row"><div class="col-12"><p><strong translate="thirdparty.redirection.warning.text.1"></strong></p><br><p translate="thirdparty.redirection.warning.text.2"></p></div></div>'}},function(e,t,n){e.exports=function(e){e.component("hedgeFundAgreementsModal",{template:n(1811)(),controller:["$translate","SESSION_ID","AgreementService","BreadcrumbAction","MarketplacePageId","MarketplaceService","ModalService","NavigationService","ResourceService","UserService",function(t,n,a,r,i,o,s,l,c,u){var d=this,p=function n(i){if(angular.isUndefined(i)||0===i.length)return(o={id:"MpListings_HFCIP"}).path=e.WEBAPP_ROOT+"/pages/search/listing.html",o.pageData={marketplaceType:"HFCIP"},o.title=t.instant("marketplaceType.HFCIP"),o.skipFetch=!0,o.breadcrumb=r.REPLACE,void l.navigate(o);var o,s=i[0];a.openAgreementModal(s).then(function(e){!0===e&&(i.splice(0,1),n(i))})},g=function(){c.fetch(e.SERVER_PATH+"/Search/Agreements/HFCIP").then(function(e){p(e.data.agreements)}).finally(function(){d.isLoading=!1})},f=null;d.$onInit=function(){d.isLoading=!0,(f=c.create(e.SERVER_PATH+"/MarketplaceAuth",{user_name:u.getUser().username,sessionId:n},!0)).promise.then(angular.noop).catch(angular.noop).finally(function(){f=null,d.isLoading=!1}),d.fetchAgreements=g},d.$onDestroy=function(){null!==f&&f.cancel()}}]})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<loading-overlay ng-if="$ctrl.isLoading"></loading-overlay><div page-structure><h4 translate="hfcip.agreement.title"></h4><p translate="hfcip.agreement.text"></p></div><div page-buttons><div class="col-xs-12 col-6"></div><div class="col-xs-12 col-6"><div class="panel-btn-right"><p><am-button on-click="$ctrl.fetchAgreements()" btn-type="primary" btn-text="{{\'word.continue\' | translate}}"></am-button></p></div></div></div>'}},function(e,t,n){e.exports=function(e){e.component("hedgeFundIneligibilityModal",{template:n(1813)(),controller:["CONTENT_HOST",function(e){var t=this;t.$onInit=function(){t.contentHost=e}}]})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<div class="alert alert-warning"><p translate="marketplace.hfcip.ineligibleClient.text" translate-values="{linkStart:\'&lt;a href=&amp;quot;http://{{$ctrl.contentHost}}/en/software/am/am/marketplace/hedgefundmarketplaceforinvestors.htm&amp;quot; target=&amp;quot;_blank&amp;quot;&gt;\', linkEnd: \'&lt;/a&gt;\'}"></p></div>'}},function(e,t,n){e.exports=function(e){e.component("hedgeFundCallback",{template:n(1815)(),controller:["$translate","MarketplaceService","ModalService","ResourceService",function(t,n,a,r){var i=this,o=function(){return!i.contactEmail&&!i.contactPhone},s=function(){var e=[];"SUBMIT"===i.contactState?(e.push({label:"word.continue",alignment:"right",fn:l,isDisabled:o}),e.push({label:"word.close",alignment:"left",fn:a.closeModal})):e.push({label:"word.ok",alignment:"right",fn:a.closeModal}),a.setModalButtons(e)},l=function(){i.isInProgress=!0;var t={marketplaceType:i.fund.marketplaceType,applicantId:i.fund.applicantId,contactEmail:i.contactEmail,contactPhone:i.contactPhone};i.isLoading=!0,r.create(e.SERVER_PATH+"/Contact",t).then(function(e){i.contactState="SUCCESS"},function(e){i.contactState="ERROR"}).finally(function(){i.isCompletionStep=!0,s(),i.isInProgress=!1})};i.$onInit=function(){i.fund=a.getModalData().fund,i.contactState="SUBMIT",i.providerType=t.instant("marketplace.providerType."+n.getProviderType(i.fund.marketplaceType)),s()}}]})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<loading-overlay ng-if="$ctrl.isInProgress"></loading-overlay><div ng-if="$ctrl.contactState === \'SUBMIT\'"><div class="well"><div class="row"><div class="col-xs-12 col-sm-10 col-sm-offset-1 col-md-10 col-md-offset-1 col-lg-10 col-lg-offset-1"><div class="form-group"><div class="row"><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"><p translate="marketplace.contact.internal.desc"></p></div></div></div><div class="form-group"><div class="row"><div class="col-xs-2 col-sm-1 col-md-1 col-lg-1"><p class="text-center"><input name="email" type="checkbox" i-check ng-model="$ctrl.contactEmail"></p></div><div class="col-xs-10 col-sm-11 col-md-11 col-lg-11"><p translate="marketplace.contactRequestType.EMAIL"></p></div></div></div><div class="form-group"><div class="row"><div class="col-xs-2 col-sm-1 col-md-1 col-lg-1"><p class="text-center"><input name="phone" type="checkbox" i-check ng-model="$ctrl.contactPhone"></p></div><div class="col-xs-10 col-sm-11 col-md-11 col-lg-11"><p translate="marketplace.contactRequestType.PHONE"></p></div></div></div></div></div></div></div><div ng-if="$ctrl.contactState === \'SUCCESS\'"><div class="row"><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"><div class="alert alert-success"><p translate="marketplace.contactRequest.success" translate-values="{\'providerType\' : $ctrl.providerType}"></p></div></div></div></div><div ng-if="$ctrl.contactState === \'ERROR\'"><div class="row"><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"><div class="alert alert-danger"><p translate="marketplace.contactRequest.error" translate-values="{\'providerType\' : $ctrl.providerType}"></p></div></div></div></div>'}},function(e,t,n){e.exports=function(e){e.component("hfcipTransfer",{template:n(1817)(),controller:["$translate","$filter","ResourceService","ModalService","PageService",function(t,n,a,r,i){var o=this,s=function(e){o.sequenceState=e;var t=[];"DETAILS"===e?t.push({label:"word.continue",alignment:"right",fn:d,isDisabled:u,btnClass:"btn-success"}):"REVIEW"===e?(t.push({label:"word.continue",alignment:"right",fn:c,isDisabled:u,btnClass:"btn-success"}),t.push({label:"word.back",alignment:"left",fn:function(){l("DETAILS")}})):"PRINT"===e?t.push({label:"word.print",alignment:"right",fn:i.print}):"COMPLETION"!==e&&"ERROR"!==e||("COMPLETION"===e&&o.canPrint()?t.push({label:"word.continue",alignment:"right",fn:function(){l("PRINT")}}):t.push({label:"word.ok",alignment:"right",fn:r.closeModal})),r.setModalButtons(t)},l=function(e){o.isInProgress=!0,s(e),o.isInProgress=!1},c=function(){o.isInProgress=!0,a.create(e.SERVER_PATH+"/Hfcip/Transfer",o.request).then(function(e){o.requestId=e.data.requestId,l("COMPLETION")},function(e){l("ERROR")}).finally(function(){o.isInProgress=!1})},u=function(){return!!o.isInProgress||("DETAILS"===o.sequenceState?!o.hfcipTransferForm||!o.hfcipTransferForm.$valid:"REVIEW"===o.sequenceState?angular.isUndefined(o.disclaimer)||"accept"!==o.disclaimer:"COMPLETION"!==o.sequenceState)},d=function(){o.isInProgress=!0,a.create(e.SERVER_PATH+"/Hfcip/Transfer/Validate",{fundId:o.fund.applicantId,transferParameters:o.request.transferParameters,fees:o.request.fees}).then(function(e){l("REVIEW")}).catch(function(e){o.errors=e.data.errors,l("DETAILS")}).finally(function(){o.isInProgress=!1})},p=function(){return"HFCIP_TRANSFER"===o.method&&o.rules.isClientAccount};o.$onInit=function(){var t;o.isInProgress=!0,o.method=r.getModalData().method,o.fund=r.getModalData().fund,o.request={fundId:o.fund.applicantId,accountId:(t=i.getActivePickerSelections(),t.length>0?t[0].accountId:""),type:o.method,transferParameters:{type:"INTERNAL",method:o.method,moneyAmount:{}}},o.rules={},o.errors={},o.canPrint=p,o.getServerErrors=function(){return o.errors},a.fetch(e.SERVER_PATH+"/Hfcip/Transfer/Rules",{method:o.method,fundId:o.fund.applicantId}).then(function(e){o.rules.feeRules=e.data.rules,o.rules.allowedCurrencies=e.data.allowedCurrencies,o.rules.isClientAccount=e.data.isClientAccount,o.rules.masterAccountTitle=e.data.masterAccountTitle;var t=e.data.isRedemptionAllowed;"HFCIP_REDEMPTION"!==o.method||t?s("DETAILS"):s("RESTRICTED")},function(e){o.errors=e.data.errors,s("ERROR")}).finally(function(){o.isInProgress=!1})}}]})}},function(e,t,n){n(0);e.exports=function(e){var t="";return t+='<loading-overlay ng-if="$ctrl.isInProgress"></loading-overlay><div ng-show="$ctrl.sequenceState === \'DETAILS\'" ng-form="$ctrl.hfcipTransferForm" form-server-errors="$ctrl.getServerErrors()"><div ng-if="$ctrl.method === \'HFCIP_TRANSFER\'"><p translate="hfcip.transfer.invest.label.1"></p><p translate="hfcip.transfer.invest.label.2"></p><p translate="hfcip.transfer.invest.label.3"></p></div><div ng-if="$ctrl.method === \'HFCIP_REDEMPTION\'"><p translate="hfcip.transfer.redeem.label.1"></p><p translate="hfcip.transfer.redeem.label.2"></p><p translate="hfcip.transfer.redeem.label.3"></p></div><br><hfcip-transfer-request-form ng-model="$ctrl.request" rules="$ctrl.rules"></hfcip-transfer-request-form></div><div ng-show="$ctrl.sequenceState === \'REVIEW\'"><h4 translate="marketplace.hfcip.transfer.invest.confirm.heading"></h4><br><hfcip-transfer-request-review request="$ctrl.request" fund="$ctrl.fund"></hfcip-transfer-request-review><br><div ng-if="$ctrl.method === \'HFCIP_TRANSFER\'"><p><strong translate="marketplace.hfcip.transfer.invest.confirm.text1"></strong></p><p translate="marketplace.hfcip.transfer.invest.confirm.text2"></p><p translate="marketplace.hfcip.transfer.invest.confirm.text3"></p><p translate="marketplace.hfcip.transfer.invest.confirm.text4"></p><p translate="marketplace.hfcip.transfer.invest.confirm.text5"></p><p translate="marketplace.hfcip.transfer.invest.confirm.text6"></p><p translate="marketplace.hfcip.transfer.invest.confirm.note.label"></p><ul><li translate="marketplace.hfcip.transfer.invest.confirm.note.1"></li><li translate="marketplace.hfcip.transfer.invest.confirm.note.2"></li></ul></div><div class="row"><div class="col-xs-12 col-6"><p><input name="disclaimer" ng-model="$ctrl.disclaimer" type="radio" value="accept" i-check><span class="margin-left-10" translate="marketplace.hfcip.transfer.invest.confirm.note.accept"></span></p></div><div class="col-xs-12 col-6"><p><input name="disclaimer" ng-model="$ctrl.disclaimer" type="radio" value="decline" i-check><span class="margin-left-10" translate="marketplace.hfcip.transfer.invest.confirm.note.decline"></span></p></div></div></div><div ng-show="$ctrl.sequenceState === \'COMPLETION\'"><div align="center"><i class="fa fa-4x fa-check-circle text-success"></i></div><h1 class="text-center text-success" translate="word.thankYou"></h1><h3 class="text-center text-dark" translate="marketplace.hfcip.transfer.request.completion.text"></h3><hr><h6 class="text-center">{{\'word.referenceNumber\' | translate}}: {{::$ctrl.requestId}}</h6><br><div class="alert alert-warning" ng-if="::$ctrl.canPrint()"><p translate="hfcip.transfer.print.note.1"></p></div></div><div ng-show="$ctrl.sequenceState === \'PRINT\'"><h3 translate="hfcip.transfer.print.heading"></h3><h4 translate="hfcip.transfer.print.subheading.investment"></h4><p translate="hfcip.transfer.print.text.investment"></p><br>\x3c!-- Investment Details --\x3e<am-form-label label-text="{{\'hfcip.transfer.label.accountId\' | translate}}" value-text="{{$ctrl.request.accountId}}"></am-form-label><am-form-label label-text="{{(\'hfcip.transfer.label.fundName.\' + $ctrl.request.type) | translate}}" value-text="{{$ctrl.fund.fundName}}"></am-form-label><am-form-label label-text="{{\'word.transactionAmount\' | translate}}" value-text="{{$ctrl.request.transferParameters.moneyAmount | amMoneyAmount}}"></am-form-label><am-form-label label-text="{{\'hfcipTransferApproval.label.masterAcctTitle\' | translate}}" value-text="{{$ctrl.rules.masterAccountTitle}}"></am-form-label><br>\x3c!-- Fee details --\x3e<div ng-if="$ctrl.request.fees.fundFees.length"><h4 translate="hfcip.transfer.print.subheading.fees"></h4><p translate="hfcip.transfer.print.text.investment"></p><br><hfcip-fee-review fee="$ctrl.request.fees"></hfcip-fee-review><br></div>\x3c!-- Signature & Acknowledgement --\x3e<h4 translate="hfcip.transfer.print.subheading.acknowledgement"></h4><br><br><p>_________________________________</p><p translate="hfcip.transfer.print.text.acknowledgement.1"></p><br><br><p>_________________________________</p><p translate="hfcip.transfer.print.text.acknowledgement.2"></p><div class="notes"><p translate="hfcip.transfer.print.note.2"></p></div></div><div ng-if="$ctrl.sequenceState === \'ERROR\'"><div class="alert alert-danger"><p translate="internal.error.request_submit"></p></div></div><div ng-if="$ctrl.sequenceState === \'RESTRICTED\'"><div class="alert alert-warning"><p translate="marketplace.hfcip.transfer.redeem.restricted"></p></div></div>'}},function(e,t,n){e.exports=function(e){e.component("articleModal",{template:n(1819),controller:["$translate","ResourceService","ModalService",function(t,n,a){var r=this;this.$onInit=function(){this.errors={},this.isLoading=!0,r.accountId=a.getModalData().accountId,n.fetch(e.SERVER_PATH+"/Hfcip/Articles",{accountId:r.accountId}).then(function(e){r.articles=e.data.articles||[]},function(e){r.errors=e.data.errors}).finally(function(){r.isLoading=!1})}}]})}},function(e,t){e.exports=' <loading-overlay ng-if="$ctrl.isLoading"></loading-overlay>\n <div class="accordion" id="articlePanel">\n     <div class="accordion-item" ng-repeat="article in $ctrl.articles">\n         <h2 class="accordion-header" id="{{article.articleId}}">\n             <button class="accordion-button collapsed" type="button" data-toggle="collapse" data-parent="#articlePanel" data-target="#collapse{{article.articleId}}">\n                 {{::article.title}}\n             </button>\n             <span class="text-right">{{::article.approvalDate}} &nbsp;&nbsp;</span>      \n         </h2>\n         <div id="collapse{{article.articleId}}" class="accordion-collapse collapse">\n             <div class="accordion-body">\n             <p ng-bind-html="::article.articleBody | renderHTML"></p>\n             </div>          \n         </div>\n     </div>\n</div>\n<div ng-if="$ctrl.articles.length === 0" class="alert alert-warning">\n    <p translate="hfcip.articles.empty"></p>\n</div>'},function(e,t,n){e.exports=function(e){n(1821)(e),n(1822)(e),n(1823)(e),n(1824)(e),n(1825)(e),n(1826)(e),n(1827)(e),n(1828)(e)}},function(e,t){e.exports=function(e){function t(t,n,a){var r=this;r.$onInit=function(){r.mpGroups=[],r.autoMarketplace=n.getCurrentPage().pageData.autoMarketplace||"",delete n.getCurrentPage().pageData.autoMarketplace,n.setOnPageLoad(function(){var i=(t.isStandalone()?"/Website":"")+"/Apply/Services";a.fetch(e.SERVER_PATH+i).then(function(e){r.mpGroups=e.data.mpGroups}).finally(function(){n.setIsPageLoading(!1)})})}}e.controller("MpApplyController",t),t.$inject=["MarketplaceService","PageService","ResourceService"]}},function(e,t){e.exports=function(e){function t(e,t){var n=this;n.$onInit=function(){n.marketplaceType="",n.marketplaceType=t.getCurrentPage().pageData.marketplaceType;var a=t.getActivePickerSelections(),r=a.length>0?a[0].accountId:"";n.frameParams={action:n.marketplaceType,sessionId:e,selectedAccountId:r},n.onFrameLoad=function(){t.setIsPageLoading(!1)},t.setOnPageLoad(function(){})}}e.controller("MarketPlaceTypeController",t),t.$inject=["SESSION_ID","PageService"]}},function(e,t){e.exports=function(e){function t(t,n,a,r,i,o,s,l){var c=null,u=function(){r.onReady().finally(function(){var n=o.getCurrentPage().id;n.startsWith("Mp")&&(n=n.substring(2));var s=angular.equals(o.getCurrentPage().pageData,{})?{}:o.getCurrentPage().pageData,l=angular.equals(o.getCurrentPage().serverParams,{})?{}:o.getCurrentPage().serverParams;if(!angular.isUndefined(s.autoMarketplace)&&""!==s.autoMarketplace||""===l.autoMarketplace||(s.autoMarketplace=l.autoMarketplace,delete o.getCurrentPage().serverParams.autoMarketplace,s.mpApplicantId=l.mpApplicantId,s.mpAction=l.mpAction,delete o.getCurrentPage().serverParams.mpApplicantId,delete o.getCurrentPage().serverParams.mpAction),"Search"===n||"SearchConfig"===n)r.search(s);else if("Apply"===n||"ApplyConfig"===n)r.apply();else if("ClientHfcip"===n){(c={id:"MpListings_HFCIP"}).path=e.WEBAPP_ROOT+"/pages/search/listing.html",c.pageData={marketplaceType:"HFCIP"},c.title=t.instant("marketplaceType.HFCIP"),c.serverPath=e.SERVER_PATH+"/Search",c.skipFetch=!1,c.breadcrumb=a.REPLACE,c.serverParams=l,i.navigate(c)}else if("ClientHfcip_Agreement"===n){var c;(c={}).id=n,c.serverPath=e.SERVER_PATH+"/Search",c.path="hedge-fund-agreements-modal.component",c.title=t.instant("marketplaceType.HFCIP"),c.skipFetch=!1,c.breadcrumb=a.REPLACE,c.serverParams=l,i.navigate(c)}})};this.$onInit=function(){o.setOnPageLoad(function(){(c=s.create(e.SERVER_PATH+"/MarketplaceAuth",{user_name:l.getUser().username,sessionId:n},!0)).promise.then(u).catch(function(){o.setIsPageLoading(!1)}).finally(function(){c=null})})},this.$onDestroy=function(){null!==c&&c.cancel()}}e.controller("MarketplaceCtrl",t),t.$inject=["$translate","SESSION_ID","BreadcrumbAction","MarketplaceService","NavigationService","PageService","ResourceService","UserService"]}},function(e,t){e.exports=function(e){function t(t,n,a,r,i){var o=this;o.$onInit=function(){o.fund=n.getCurrentPage().pageData.fund,o.fiveYearsArr=n.getCurrentPage().pageData.fiveYearsArr,o.orderedReturnRates=n.getCurrentPage().pageData.orderedReturnRates,o.performTransfer=function(e){var n={title:t.instant("hfcip.transfer.title."+e),templateUrl:"hfcip-transfer.component",modalData:{method:e,fund:o.fund}};i.openModal(n)},o.callBack=function(){var e={title:t.instant("hfcip.callback.title"),templateUrl:"hedge-fund-callback.component",modalData:{fund:o.fund}};i.openModal(e)},o.downloadDocument=function(n,i){a.fetch(e.SERVER_PATH+"/Applicant/Document/HFCIP",{documentId:n}).then(function(e){var n=t.instant("form.title."+i)+".pdf",a=r.decodeBase64(e.data.documentContent);r.download(n,a,"application/pdf")})},n.setOnPageLoad(function(){n.setIsPageLoading(!1)})}}e.controller("HedgeFundDetailsController",t),t.$inject=["$translate","PageService","ResourceService","FileDownloadService","ModalService"]}},function(e,t){e.exports=function(e){function t(e,t,n,a,r,i){var o=this;o.$onInit=function(){o.contentHost=e,o.clientsCount="",o.isLoading=!0,i.fetch("https://"+e+"/en/includes/numberOfClientAccounts.php").then(function(e){o.clientsCount=e.data}).catch(function(e){o.clientsCount="660,000"}).finally(function(){o.isLoading=!1}),o.loginToAm=function(){var t={path:"https://"+e+"/sso/Login?forwardTo=TA_HFCI_VIEW",navigateAction:n.REDIRECT};a.navigate(t)},o.openAccount=function(){var t={navigateAction:n.REDIRECT,path:"https://"+e+"/en/index.php?f=4695"};a.navigate(t)},o.goBack=function(){r.getBreadcrumbs().length>1?a.navigateToPrevBreadcrumb():t.search({categorizationType:r.getCurrentPage().pageData.categorizationType})}}}e.controller("HfcipWebDetailsCtrl",t),t.$inject=["CONTENT_HOST","MarketplaceService","NavigationAction","NavigationService","PageService","ResourceService"]}},function(e,t){e.exports=function(e){function t(t,n,a,r,i){var o=this;o.$onInit=function(){o.marketplaceType=r.getCurrentPage().pageData.marketplaceType,o.categorizationType=r.getCurrentPage().pageData.categorizationType,o.itemTemplate="HFCIP"===o.marketplaceType?"hfcip-listing-data.component":"mp-listing-data.component",o.listingLoad=t.defer(),o.isStandalone=n.isStandalone(),o.itemSource=e.SERVER_PATH+(o.isStandalone?"/Website":"")+"/Search/Data/"+o.marketplaceType+(o.isStandalone?"/"+o.categorizationType:""),o.goBack=function(){!o.isStandalone&&r.getBreadcrumbs().length>1?a.navigateToPrevBreadcrumb():n.search({categorizationType:o.categorizationType})},o.isPageLoading=!0,o.listingLoad.promise.finally(function(){o.isPageLoading=!1,r.setIsPageLoading(!1)})}}e.controller("ListingController",t),t.$inject=["$q","MarketplaceService","NavigationService","PageService","ResourceService"]}},function(e,t){e.exports=function(e){function t(t,n,a){var r=this,i=function(e){for(var t in r.type=e,r.categories){var n=r.categories[t];if(n.type===e)return void(r.mpGroups=n.marketplaceGroups)}};r.$onInit=function(){r.mpGroups=[],r.chooseClientType=i,r.autoMarketplace=a.getCurrentPage().pageData.autoMarketplace||"",delete a.getCurrentPage().pageData.autoMarketplace,a.setOnPageLoad(function(){var i=(t.isStandalone()?"/Website":"")+"/Search/Services";n.fetch(e.SERVER_PATH+i).then(function(e){r.categories=e.data.categories,r.mpGroups=e.data.marketplaceGroups}).finally(function(){r.type=a.getCurrentPage().pageData.categorizationType||"",""!==r.type&&r.chooseClientType(r.type),a.setIsPageLoading(!1)})})}}e.controller("MpSearchController",t),t.$inject=["MarketplaceService","ResourceService","PageService"]}},function(e,t){e.exports=function(e){function t(t,n,a){var r=this;r.$onInit=function(){r.contentHost=t,r.search=n.search,r.apply=n.apply,r.isDefined=function(e){return angular.isDefined(e)&&0!==e},r.count={},n.onReady().then(function(){r.isProviderCountLoading=!0,a.fetch(e.SERVER_PATH+"/InvestorsMarketplace/ProviderCount").then(function(e){r.count=e.data.providerCount}).finally(function(){r.isProviderCountLoading=!1})})}}e.controller("MpHomeController",t),t.$inject=["CONTENT_HOST","MarketplaceService","ResourceService"]}},function(e,t,n){e.exports=function(e){n(1830)(e);n(2)(e,["consultant-application-agreements","consultant-application-completion","consultant-application-details"],function(){return[n.e(12).then(n.t.bind(null,2109,7)),n.e(12).then(n.t.bind(null,2110,7)),n.e(12).then(n.t.bind(null,2111,7))]})}},function(e,t){e.exports=function(e){function t(e,t){var n=this;n.$onInit=function(){n.isStandalone=e.isStandalone(),n.isPageLoading=t.isPageLoading}}e.controller("MpApplicationSeqCtrl",t),t.$inject=["MarketplaceService","PageService"]}},function(e,t,n){e.exports=function(e){n(1832)(e)}},function(e,t){e.exports=function(e){function t(t,n,a,r,i,o,s,l,c,u,d){var p=!1,g={onReady:function(){n.addPart(e.WEBAPP_ROOT+"/i18n/Marketplace");var o=t.refresh(),l=d.isRtl()?".rtl":"",c=s.inject({id:"mpStyle",url:"/css/reg-am/investors-marketplace"+l+".min.css",before:{id:"amTheme"}}),g=s.inject({id:"mpPrintStyle",url:"/css/reg-am/investors-marketplace-print"+l+".min.css",media:"print",before:{id:"amTheme"}}),f=u.fetch(e.SERVER_PATH+"/Service");return p=r===i.STANDALONE,a.all([o,c,g,f])},isStandalone:function(){return p},isAdminMarketplace:function(e){return"ADMINISTRATOR"===e||"ACCOUNTING_FIRM"===e||"AUDITING_FIRM"===e||"COMPLIANCE_FIRM"===e||"LEGAL_FIRM"===e||"TAX_FIRM"===e},isIbcustMarketplace:function(e){return"ADVISOR"===e||"BROKER"===e||"MONEY_MANAGER"===e||"HFCIP"===e},hasCustomDisclaimer:function(e){return"NEWS_AND_RESEARCH"===e||"ADVISOR"===e||"BROKER"===e||"MONEY_MANAGER"===e},getProviderType:function(e){return g.isAdminMarketplace(e)?"ADMINISTRATOR":e},goToHome:function(){var t={id:l.HOME,serverPath:e.SERVER_PATH+"/Service",path:e.WEBAPP_ROOT+"/pages/website/mpHome.html",skipFetch:!0};c.navigate(t)},search:function(t){var n=g.isStandalone(),a=e.SERVER_PATH+(n?"/Website":"")+"/Search",r=e.WEBAPP_ROOT+(n?"/pages/search/websiteSearch.html":"/pages/search/search.html"),i={id:l.SEARCH,serverPath:a,breadcrumb:o.REPLACE,path:r,skipFetch:n};angular.isDefined(t)&&(i.pageData=t),c.navigate(i)},apply:function(){var t=g.isStandalone(),n=e.SERVER_PATH+(t?"/Website":"")+"/Apply",a=e.WEBAPP_ROOT+(t?"/pages/apply/websiteApply.html":"/pages/apply/apply.html"),r={id:l.APPLY,serverPath:n,breadcrumb:o.REPLACE,path:a,skipFetch:t};c.navigate(r)},navigateToMarketplace:function(e,t){var n={path:"/marketplace.webapp/pages/marketplace/marketplace.html",skipFetch:!0};n.id=e,n.pageData=t,c.navigate(n)},getAlphaFlags:function(){return g.alphaFlags},addAlphaFlag:function(e,t){g.alphaFlags=g.alphaFlags||{},g.alphaFlags[e]=t}};return g}e.factory("MarketplaceService",t),t.$inject=["$translate","$translatePartialLoader","$q","ACTIVE_CONTEXT","ApplicationContext","BreadcrumbAction","CssService","MarketplacePageId","NavigationService","ResourceService","LanguageService"]}},function(e,t,n){"use strict";var a=angular.module("ibmarketing.nsdl",[]);a.WEBAPP_ROOT="/nsdl.webapp",a.SERVER_PATH="/aces/Nsdl",a.NSDL_SERVER_PATH="https://esign.egov-nsdl.com/nsdl-esp/authenticate/esign-doc/",a.config(["$translatePartialLoaderProvider","$provide",function(e,t){e.addPart("/nsdl.webapp/i18n/nsdl_esign"),t.constant("ACTIVE_CONTEXT",window.ACTIVE_CONTEXT||"AM_DEPENDENCY")}]),n(1834)(a),n(1838)(a)},function(e,t,n){e.exports=function(e){n(1835)(e),n(1836)(e),n(1837)(e)}},function(e,t,n){e.exports=function(e){n(4).component.ComponentLoadEvent;e.component("esignOnboardingAgreement",{bindings:{accountId:"<",completeFn:"<?",cancelFn:"<?",printOnly:"&?"},templateUrl:e.WEBAPP_ROOT+"/components/esignapplication/esignOnboardingAgreement.html",controller:["ACTIVE_CONTEXT","ApplicationContext","$q","$translate","$sce","$timeout","ComponentService","FileDownloadService","PageService","ResourceService","EsignUploadService","EsignAgreementService","EsignEligibilityService","UserAuthService",function(t,n,a,r,i,o,s,l,c,u,d,p,g,f){var m=this;m.downloadSignedAgreement=function(){var e={fileName:"SignedAccountApplication.pdf",fileContent:m.signedCustomerAgreement.agreementData,contentType:"application/pdf",fileFormat:"PDF"};l.processDownload(e)},m.downloadAgreement=function(){var e={fileName:"AccountOnboardingApplication.pdf",fileContent:m.customerAgreement.agreementData,contentType:"application/pdf",fileFormat:"PDF"};l.processDownload(e)},m.updateSignatureMethod=function(){m.changeEsignState("NEW"),m.isEsignSelected&&!m.agreementFetched&&(m.isLoading=!0,p.fetchAgreementRequest(m.accountId).then(function(e){m.customerAgreement=e.customerAgreement;var t=l.decodeBase64(m.customerAgreement.agreementData),n=new Blob([t],{type:"application/pdf"}),a=URL.createObjectURL(n);m.contentUrl=i.trustAsResourceUrl(a),m.agreementFetched=!0},function(e){m.errorType="general",m.changeEsignState("ERROR")}).finally(function(){m.isLoading=!1}))};m.startAuthentication=function(){v("ESIGN_AUTHENTICATE"),m.isLoading=!0,m.isError=!1;var e=document.createElement("form");e.target="Map",e.method="POST",e.action=m.redirectURL;var t=document.createElement("input");t.type="hidden",t.name="msg",e.appendChild(t),document.body.appendChild(e),m.nsdlAuthWindow=window.open("","Map","status=0,title=0.height=500,width=700,scrollbars=1"),m.nsdlAuthWindow&&m.nsdlAuthWindow.document.write("loading ..."),a.all([p.fetchRequest(m.accountId).then(function(e){m.request=e.xmlRequest,m.frameParams={msg:m.request}},function(e){m.isError=!0,m.errorType="general",m.changeEsignState("ERROR")}),p.updateState().then(function(e){},function(e){m.isError=!0})]).finally(function(){m.isError||(t.value=m.request,m.nsdlAuthWindow&&(m.statePollCount=0,e.submit(),o(function(){m.doAuthenticationStatePoll()},5e3))),m.isLoading=!1})};var v=function(e){"PENDING_AUTHENTICATION"!==e&&m.nsdlAuthWindow&&!m.nsdlAuthWindow.closed&&m.nsdlAuthWindow.close(),"PENDING_SUBMISSION"===e||"SUCCESS"===e?(m.isLoading=!0,p.fetchSignedAgreement(m.accountId).then(function(t){m.signedCustomerAgreement=t.customerAgreement,m.esignState=e,m.isLoading=!1},function(e){m.errorType="general",m.esignState="ERROR",m.isLoading=!1})):m.esignState=e};m.doAuthenticationStatePoll=function(){p.fetchState().then(function(e){"PENDING_SUBMISSION"===e||"SUCCESS"===e?m.changeEsignState(e):"PENDING_AUTHENTICATION"===e?m.nsdlAuthWindow&&!m.nsdlAuthWindow.closed&&++m.statePollCount<80?o(m.doAuthenticationStatePoll,3e3):m.changeEsignState("NEW"):(m.errorType="authentication",m.changeEsignState("ERROR"))},function(e){m.errorType="general",m.changeEsignState("ERROR")})};var h=function(){m.isLoading=!0,m.statePollCount=0,m.esignEnabled=!1,m.displayInline=!window.navigator||!window.navigator.msSaveOrOpenBlob,m.redirectURL=e.NSDL_SERVER_PATH,m.esignState="NEW",m.agreementFetched=!1,m.changeEsignState=v,m.completeEsign=angular.isUndefined(m.completeFn)?void 0:window[m.completeFn],m.cancelEsign=angular.isUndefined(m.cancelFn)?void 0:window[m.cancelFn],m.enableButton=!angular.isUndefined(m.cancelEsign),g.fetchStatus(m.accountId).then(function(e){"ELIGIBILE"===e?m.esignEnabled=!0:"PENDING_TASKS"===e?(m.errorType="pending.task",m.changeEsignState("ERROR")):"PENDING_ACCEPTANCE"===e?(m.errorType="pending.acceptance",m.changeEsignState("ERROR")):"SUBMITTED"===e&&(m.errorType="submitted",m.changeEsignState("SUBMITTED"))}).finally(function(){m.isLoading=!1})};m.$onInit=function(){t===n.AM_DEPENDENCY?f.dependencyLogin(e.SERVER_PATH+"/EsignAuth").then(function(e){h()}).catch(function(e){m.loading=!1}):h()}}]})}},function(e,t,n){e.exports=function(e){var t=n(4).component.ComponentLoadEvent;e.component("esignAgreement",{bindings:{accountId:"@",completeFn:"@",cancelFn:"@",printOnly:"<?"},templateUrl:e.WEBAPP_ROOT+"/components/esignapplication/esignAgreement.html",controller:["$translate","ComponentService",function(e,n){var a=this;a.$onInit=function(){e.onReady().then(function(){var e=new t("nsdl",!0);e.submit=a.submit,n.notifyLoad(e)})}}]})}},function(e,t){e.exports=function(e){e.component("printAgreement",{bindings:{accountId:"<"},templateUrl:e.WEBAPP_ROOT+"/components/esignapplication/printAgreement.html",controller:["$translate","FileDownloadService","EsignAgreementService",function(e,t,n){var a=this,r=function(){a.isLoading=!0,a.isError=!1,n.fetchAgreement(a.accountId).then(function(e){var n={fileName:"AccountOnboardingApplication.pdf",fileContent:e.customerAgreement.agreementData,contentType:"application/pdf",fileFormat:"PDF"};t.processDownload(n)},function(e){a.errorType="general",a.isError=!0}).finally(function(){a.isLoading=!1})};a.$onInit=function(){a.downloadAgreement=r,a.isError=!1}}]})}},function(e,t,n){e.exports=function(e){n(1839)(e),n(1840)(e),n(1841)(e)}},function(e,t){e.exports=function(e){e.factory("EsignAgreementService",["$q","ResourceService",function(t,n){var a=e.SERVER_PATH+"/EsignAgreement",r=e.SERVER_PATH+"/EsignRequest",i=e.SERVER_PATH+"/EsignState/State",o={fetchAgreementRequest:function(e){var r=t.defer();return n.fetch(a,{accountId:e}).then(function(e){r.resolve(e.data)},function(e){r.reject(e.data)}),r.promise},fetchSignedAgreement:function(e){var r=t.defer();return n.fetch(a+"/signed",{accountId:e}).then(function(e){r.resolve(e.data)},function(e){r.reject(e.data)}),r.promise},fetchAgreement:function(e){var r=t.defer();return n.fetch(a+"/download",{accountId:e}).then(function(e){r.resolve(e.data)},function(e){r.reject(e.data)}),r.promise},fetchRequest:function(e){var a=t.defer();return n.fetch(r,{accountId:e}).then(function(e){a.resolve(e.data)},function(e){a.reject(e.data)}),a.promise},fetchState:function(){var e=t.defer();return n.fetch(i).then(function(t){e.resolve(t.data)},function(t){e.reject(t.data)}),e.promise},updateState:function(){var e=t.defer();return n.update(i).then(function(t){e.resolve(t.data)},function(t){e.reject(t.data)}),e.promise}};return o}])}},function(e,t){e.exports=function(e){e.factory("EsignUploadService",["$q","ResourceService",function(t,n){var a=e.SERVER_PATH+"/EsignAgreementSubmission",r={submitAgreement:function(e,r){var i=t.defer();return n.update(a,{accountId:e,agreementData:r}).then(function(e){i.resolve(e.data)},function(e){i.reject(e.data)}),i.promise}};return r}])}},function(e,t){e.exports=function(e){e.factory("EsignEligibilityService",["$q","ResourceService",function(t,n){var a=e.SERVER_PATH+"/EsignEligibility",r={fetchStatus:function(e){var r=t.defer();return n.fetch(a,{accountId:e}).then(function(e){r.resolve(e.data)},function(e){r.reject(e.data)}),r.promise}};return r}])}},function(e,t,n){"use strict";var a=angular.module("ibmarketing.platformfeatures",[]);a.PLATFORMFEATURES_ROOT="/platformfeatures.webapp",a.SERVER_PATH="/AccountManagement",a.PF_SERVER_PATH="/aces/PlatformFeatures",n(1843)(a),n(1858)(a)},function(e,t,n){e.exports=function(e){n(1844)(e),n(1845)(e),n(1846)(e),n(1847)(e),n(1848)(e),n(1849)(e),n(1850)(e),n(1851)(e),n(1852)(e),n(1853)(e),n(1854)(e),n(1856)(e),n(10),n(311)}},function(e,t,n){e.exports=function(e){var t=n(10);e.component("infoSection",{bindings:{mediaType:"@",whiteBranded:"@",completeFn:"@",ibEntity:"@",moduleName:"@"},templateUrl:e.PLATFORMFEATURES_ROOT+"/components/infoSection/infoSection.html",controller:["ResourceService","$interval","$timeout","$translate","$window",function(n,a,r,i,o){var s=this,l=5,c="SUCCESS",u="NEED_MORE_INFO",d="REJECT",p="APPROVAL_AWAITED";s.$onInit=function(){s.firstTimeoutPromise=r(v,45e3),s.secondTimeoutPromise=r(h,18e4),s.refresh=window[s.completeFn]||void 0,s.intervalPromise=a(m,5e3),t.updateProgressBar("gray",0,s.moduleName),n.create(e.PF_SERVER_PATH+"/RealTimeAccountOpeningStatus",{action:"isSimplifiedPlatform",accountId:e.ACCOUNT_ID}).then(function(e){void 0!=e.data&&(s.isImpact=e.data.isImpact||!1,s.isGlobalTrader=e.data.isGlobalTrader||!1,s.isNativeIbkrApp=e.data.isNativeIbkrApp||!1,s.ecaAcctOpenCheck=e.data.ecaAcctOpenCheck||!1,s.arProcessType=e.data.arProcessType,s.isFaEntryOrEca="FA_ENTRY"===s.arProcessType||"ECA_CUST_COMPLETION"===s.arProcessType,s.isFaEntryOrEca&&(s.faEntryTimeoutPromise=r(b,7e3),s.intervalPromise=a(f,2e3)))})},s.width=0,s.isActCreationSuccess=!1,s.stopUpdate=!1,s.activeMessageId="rtao_accountSetUp";var g=function(){a.cancel(s.intervalPromise),r.cancel(s.firstTimeoutPromise),r.cancel(s.secondTimeoutPromise),r.cancel(s.faEntryTimeoutPromise)};function f(){s.width+=2*l,t.updateProcessingDiv(s.width,s.moduleName)}function m(){s.isFaEntryOrEca||n.create(e.PF_SERVER_PATH+"/RealTimeAccountOpeningStatus",{action:"checkStatus",accountId:e.ACCOUNT_ID}).then(function(e){void 0!=e.data&&(e.data.status==c?(e.data.showDeferredImpactScreen?s.showDeferredImpactScreen=!0:y("goLogin"),g()):e.data.status==u?(y("needMoreInfo"),g()):e.data.status==p?(y("approvalAwaited"),g()):e.data.status==d?(y("reject"),g()):0==s.stopUpdate&&(s.width+=l,t.updateProcessingDiv(s.width,s.moduleName)))})}function v(){s.closeText=i.instant("word.close"),y("holdTight"),l=2,s.width+=l,t.updateProcessingDiv(s.width,s.moduleName)}function h(){y("needMoreInfo"),s.stopUpdate=!0,g()}function b(){"ECA_CUST_COMPLETION"===s.arProcessType&&s.ecaAcctOpenCheck?n.create(e.PF_SERVER_PATH+"/RealTimeAccountOpeningStatus",{action:"checkStatus",accountId:e.ACCOUNT_ID}).then(function(e){void 0!=e.data&&(e.data.status==c?(y("goLogin"),g()):(s.stopUpdate=!0,g(),s.close()))}):(s.stopUpdate=!0,g(),s.close())}function y(e){s.activeMessageId="rtao_"+e,"goLogin"==e?("IB-SS"===s.ibEntity?s.closeText=i.instant("platform.features.account.setup.play"):s.isImpact||s.isGlobalTrader?s.closeText=i.instant("platform.features.open.impact"):s.closeText=i.instant("platform.features.account.setup.go"),s.close=s.gotoLogin,t.updateProgressBar("green",0,s.moduleName)):"needMoreInfo"==e?(s.closeText=i.instant("platform.features.continue.application"),t.updateProgressBar("gray",0,s.moduleName)):"approvalAwaited"==e?(s.closeText=i.instant("word.close"),t.updateProgressBar("green",0,s.moduleName)):"reject"==e&&(s.closeText=i.instant("platform.features.more.information"),t.updateProgressBar("red",0,s.moduleName))}s.gotoLogin=function(){if(g(),"IB-SS"==s.ibEntity)s.gotoBetWebSite();else{if((s.isImpact||s.isGlobalTrader||s.isNativeIbkrApp)&&window.sendToNativeApp)return void window.sendToNativeApp({action:"close_webview"});s.isImpact?s.gotoImpactPage():s.isGlobalTrader?s.gotoGlobalTraderPage():window.location=e.SERVER_PATH+"/SsoAuthentication?reattach=F"}},s.gotoFunding=function(){window.location=e.SERVER_PATH+"/SsoAuthentication?reattach=F&action=FUND_TRANSFERS&type=DEPOSIT"},s.gotoInvestmentProfile=function(){window.location=e.SERVER_PATH+"/SsoAuthentication?reattach=F&action=TA_TRADE_PERM_BETA"},s.gotoBetWebSite=function(){window.location="/ibg"},s.gotoImpactPage=function(){window.location="/sso/impact-launch"},s.gotoGlobalTraderPage=function(){window.location="/sso/global-launch"},s.closeModal=function(){g(),"IB-SS"==s.ibEntity?s.gotoBetWebSite():(t.hidePlatformModal(s.moduleName),s.refresh())},s.close=s.closeModal,s.closeText=i.instant("word.close")}]})}},function(e,t){e.exports=function(e){e.component("videoContainer",{bindings:{whiteBranded:"@",moduleName:"@"},templateUrl:e.PLATFORMFEATURES_ROOT+"/components/video/videoContainer.html",controller:["$sce",function(e){var t=this;t.$onInit=function(){var n="https://www.youtube.com/embed/Q3UYypx-aGk?rel=0&amp;controls=1&amp;showinfo=0&amp;autoplay=",a=function(t){return e.trustAsResourceUrl(t)};t.videoSrc=a(n+"1"),$("#platformModal_"+t.moduleName).on("hidden.bs.modal",function(){t.videoSrc=a(n+"0")})}}]})}},function(e,t){e.exports=function(e){e.component("slideContainer",{bindings:{whiteBranded:"@",ibEntity:"@"},template:'<div ng-include="$ctrl.resourcePath"/>',controller:["$timeout","ResourceService",function(t,n){var a=this;a.$onInit=function(){a.isIbkrLite=!1,"IB-SS"==a.ibEntity?a.resourcePath=e.PLATFORMFEATURES_ROOT+"/components/slide/betSlides.html":n.fetch(e.PF_SERVER_PATH+"/documentOcr/checkAccountStatus").then(function(e){a.isIbkrLite=e.data.isIbkrLite||!1,a.isImpact=e.data.isImpact||!1,a.isGlobalTrader=e.data.isGlobalTrader||!1}).finally(function(){a.isImpact?a.resourcePath=e.PLATFORMFEATURES_ROOT+"/components/slide/impactSlides.html":a.isGlobalTrader?a.resourcePath=e.PLATFORMFEATURES_ROOT+"/components/slide/globalTraderSlides.html":a.resourcePath=e.PLATFORMFEATURES_ROOT+"/components/slide/brokerageSlides.html"}),t(function(){$(".carousel").carousel({interval:1e4})},1e3)}}]})}},function(e,t){e.exports=function(e){e.component("platformfeaturesModuleError",{bindings:{error:"@"},template:['<div class="alert alert-warning">',"   <p>{{ $ctrl.error }}</p>","</div>"].join(""),controller:["$translate",function(e){var t=this;t.$onInit=function(){t.error=t.error||e.instant("Unable to load platformfeatures module")}}]})}},function(e,t){e.exports=function(e){e.component("mediaContainer",{bindings:{whiteBranded:"@",mediaType:"@",ibEntity:"@",moduleName:"@"},templateUrl:e.PLATFORMFEATURES_ROOT+"/components/mediaContainer/mediaContainer.html",controller:[function(){var e=this;e.$onInit=function(){e.showMedia=e.mediaType,"true"==e.whiteBranded&&(e.showMedia="slide")}}]})}},function(e,t,n){e.exports=function(e){var t=n(311);e.component("platformModal",{bindings:{mediaType:"@",whiteBranded:"@",completeFn:"@",moduleName:"@",ibEntity:"@",closeFn:"@"},templateUrl:e.PLATFORMFEATURES_ROOT+"/components/modal/modal.html",controller:["$window","$scope","$timeout","$interval","$rootScope",function(n,a,r,i,o){var s=this;a.isLoaded=!0,s.$onInit=function(){if(s.documentDetails="",s.flowName=s.moduleName,s.$doCheck=function(){s.moduleName!=s.flowName&&(s.moduleName=t.MODULE_REAL_TIME_ACCOUNT_OPENING,s.completeFn="go",a.isLoaded=!0)},s.moduleName===t.MODULE_REAL_TIME_ACCOUNT_OPENING){var e=window.LoadPlatformFeatures;void 0===e||!1===e?(r(function(){$("#platformModal_"+s.moduleName).modal("show")},0),window.LoadPlatformFeatures=!0):a.isLoaded=!1}else window.docStatProducer=window.docStatProducer||[],s.requestId=window.docStatProducer.length+1,window.docStatProducer.push(s.requestId),n.addEventListener("startProgressStatus",function(e){s.requestId,s.documentDetails=e.detail,s.documentDetails,o.$broadcast("initDocUpload",s.requestId),$("#platformModal_"+s.moduleName).modal("show")},{once:!0})},s.platformFeaturesRoot=e.PLATFORMFEATURES_ROOT}]})}},function(e,t,n){e.exports=function(e){var t=n(10),a=n(311);e.component("documentUpload",{bindings:{mediaType:"@",whiteBranded:"@",completeFn:"@",documentDetails:"=",moduleName:"=",closeFn:"@"},templateUrl:e.PLATFORMFEATURES_ROOT+"/components/documentUpload/documentUpload.html",controller:["$interval","$timeout","ResourceService","$rootScope","$translate",function(n,r,i,o,s){var l=this;l.$onInit=function(){l.documentIntimationExpiry=function(){l.timeoutPromise=r(l.handlePollTimeout,23e4),l.showMedia=!0},o.$on("initDocUpload",function(e,n){n==window.docStatProducer.length&&(l.showMedia=!1,l.initDocUpload(),t.updateProgressBar("gray",0,l.moduleName),window.docStatProducer=window.docStatProducer.filter(function(e){return e!=n}))})},l.initDocUpload=function(){l.refresh=window.documentupload[l.completeFn]||void 0,l.close=window[l.closeFn]||void 0,l.documentIntimationTimeout=r(l.documentIntimationExpiry,1e4),l.stopUpdate=!1,l.width=0,l.activeMessageId="rtao_processingDocument",l.intervalPromise=n(l.checkStatusOnServer,5e3),l.docVerified=!1,l.closeText=s.instant("word.close"),l.progressBarWidth=Math.floor(5e5/24e4)},l.clearTriggers=function(){l.showMedia=!0,n.cancel(l.intervalPromise),r.cancel(l.timeoutPromise),r.cancel(l.documentIntimationTimeout)},l.stopStatusFetch=function(){l.logModalClose(),l.clearTriggers(),l.activeMessageId="rtao_processingDocument",l.closeText=s.instant("word.close"),t.hidePlatformModal(l.moduleName),l.close()},l.closeModal=function(){if(l.logModalClose(),l.clearTriggers(),l.activeMessageId="rtao_processingDocument",l.closeText=s.instant("word.close"),t.hidePlatformModal(l.moduleName),l.docVerified)l.refresh();else{var e="",n=l.documentDetails.documentIds;void 0!=n&&(e=n.split(",")[0]),l.refresh(e)}},l.logModalClose=function(){i.create(e.PF_SERVER_PATH+"/documentOcr",{action:"logModalClose",data:l.documentDetails}).then(function(e){})},l.checkStatusOnServer=function(){""!=l.documentDetails&&i.create(e.PF_SERVER_PATH+"/documentOcr",{action:"documentStatus",data:l.documentDetails,accountId:e.ACCOUNT_ID}).then(function(e){void 0!=e.data&&(e.data.status==a.DOCUMENT_VERIFIED?(l.updateAccountOpeningStatus("documentAccepted"),l.clearTriggers(),l.docVerified=!0):e.data.status==a.DOCUMENT_REJECTED?(l.updateAccountOpeningStatus("documentRejected"),l.clearTriggers()):e.data.status==a.DOCUMENT_FAILED_PROCESSING?(l.updateAccountOpeningStatus("docVerificationFailed"),l.clearTriggers()):e.data.status==a.NO_PENDING_DOCUMENTS?(l.clearTriggers(),l.moduleName=a.MODULE_REAL_TIME_ACCOUNT_OPENING,l.moduleName):0==l.stopUpdate&&(l.width=l.width+l.progressBarWidth,t.updateProcessingDiv(l.width,l.moduleName)))})},l.updateAccountOpeningStatus=function(e){l.activeMessageId="rtao_"+e,"documentAccepted"==e?(l.closeText=s.instant("word.continue"),t.updateProgressBar("green",0,l.moduleName)):"docVerificationFailed"==e?(l.closeText=s.instant("word.continue"),t.updateProgressBar("gray",0,l.moduleName)):"documentRejected"==e&&(l.closeText=s.instant("platform.features.document.upload.review.error"),t.updateProgressBar("red",0,l.moduleName))},l.handlePollTimeout=function(){l.stopUpdate=!0,l.updateAccountOpeningStatus("docVerificationFailed"),l.clearTriggers()}}]})}},function(e,t){e.exports=function(e){e.component("accountInfo",{bindings:{primaryEntity:"<",secondHolderEntity:"<?",financialInfo:"<?",accountId:"<",accountTitle:"<?",masterAccountId:"<?",masterAccountTitle:"<?",masterAccountAddress:"<?",masterAccountType:"<?",mifidCategory:"<?",customerTypeDesc:"<?",dayTradingRestricted:"<?",editCallback:"&?",additionalAccount:"<?"},templateUrl:e.PLATFORMFEATURES_ROOT+"/components/accountinfo/accountInfo.html",controller:["ACTIVE_CONTEXT","ApplicationContext","$translate",function(e,t,n){var a=this;a.$onInit=function(){a.dayTradingRestricted=a.dayTradingRestricted||!1,a.getmasterAccountTitleLabel=function(){return"FAM"===a.masterAccountType?"accountReview.label.fam.accountTitle":"linkage.label.accountTitle"},a.getmasterAccountIdLabel=function(){return"FAM"===a.masterAccountType?"accountReview.label.fam.accountId":"linkage.label.accountId"},a.getmasterAccountAddressLabel=function(){return"FAM"===a.masterAccountType?"accountReview.label.fam.Address":"linkage.label.address"},a.getCustomerTypeDesc=function(){return n.instant(a.customerTypeDesc)}}}]})}},function(e,t,n){e.exports=function(e){var t=n(4).component.ComponentLoadEvent;e.component("facekomAppointment",{bindings:{closeFn:"@"},templateUrl:e.PLATFORMFEATURES_ROOT+"/components/facekom/faceKomAppointment.html",controller:["$filter","$translate","$interval","$timeout","ResourceService","PageService","ComponentService",function(n,a,r,i,o,s,l){var c=this;function u(){o.fetch(e.PF_SERVER_PATH+"/FaceKomAppointment/getBookedAppointment").then(function(e){c.scheduleDetails=e.data.scheduleDetails||{},!c.scheduleDetails.scheduleId||"SCHEDULED"!=c.scheduleDetails.status&&"FAILED"!=c.scheduleDetails.status||("SCHEDULED"==c.scheduleDetails.status?c.type="APPOINTMENT_DETAILS":c.type="APPOINTMENT_FAILED",r.cancel(c.intervalPromise),i.cancel(c.timeoutPromise),c.isLoading=!1)},function(e){c.errors=e.data.errors})}function d(){c.type="APPOINTMENT_PENDING_SCHEDULING",r.cancel(c.intervalPromise),i.cancel(c.timeoutPromise),c.isLoading=!1}c.errors={},c.submit=function(){c.isLoading=!0,c.errors={};var t={};c.CollectMobileNumber()&&(t=c.phoneNumbers[0]);o.create(e.PF_SERVER_PATH+"/FaceKomAppointment/bookAppointmentSlot",{phoneNumber:t,entityId:c.attendee.entityId,date:c.appointmentDate,time:c.appointmentTime}).then(function(e){c.scheduleDetails=e.data.scheduleDetails||{},"SCHEDULED"==c.scheduleDetails?c.type="APPOINTMENT_DETAILS":c.pollBookingStatus()},function(e){c.errors=e.data.errors}).catch(angular.noop).finally(function(){c.isPolling||(c.isLoading=!1)})},c.pollBookingStatus=function(){c.isLoading=!0,c.isPolling=!0,c.timeoutPromise=i(d,1e4),c.intervalPromise=r(u,2e3)},c.getServerErrors=function(){return c.errors},c.submitEnabled=function(){return void 0!=c.attendee&&void 0!=c.appointmentDate&&void 0!=c.appointmentTime},c.reschedule=function(){c.errors={},c.isLoading=!0,o.fetch(e.PF_SERVER_PATH+"/FaceKomAppointment/getSelectionRules").then(function(e){c.selectionRules=e.data.selectionRules||{},c.selectionRules.availableTimeSlots&&angular.forEach(c.selectionRules.availableTimeSlots,function(e,t){c.availableDates.push(t)}),c.type="APPOINTMENT_SELECTION"},function(e){c.errors=e.data.errors}).finally(function(){c.isLoading=!1})},c.$onInit=function(){c.close=window[c.closeFn]||void 0,c.errors={},c.isLoading=!0,c.availableDates=[],o.fetch(e.PF_SERVER_PATH+"/FaceKomAppointment/getBookedAppointment").then(function(e){c.scheduleDetails=e.data.scheduleDetails||{},c.selectionRules=e.data.selectionRules||{},c.selectionRules.availableTimeSlots&&angular.forEach(c.selectionRules.availableTimeSlots,function(e,t){c.availableDates.push(t)}),c.scheduleDetails.scheduleId&&"CANCELED"!=c.scheduleDetails.status&&"REJECTED"!=c.scheduleDetails.status&&"FAILED"!=c.scheduleDetails.status?c.type="APPOINTMENT_DETAILS":c.type="APPOINTMENT_SELECTION"},function(e){c.errors=e.data.errors}).finally(function(){c.isLoading=!1}),c.getOptionText=function(e){return e&&e.entityId>0?n("amEntityName")(e):a.instant("Not Listed")},c.formatTime=function(e){var t=e.split(":");if(t.length>=2){var a=new Date(0,0,0,t[0],t[1],0,0);return n("date")(a,"HH:mm")}return e},c.formatDate=function(e){return n("date")(e,"MMMM d, yyyy")},c.closeModal=function(){var e=new t("faceKomAppointment",!0);l.notifyLoad(e),c.close()},c.getAvailableTimeSlots=function(){return c.appointmentDate?c.selectionRules.availableTimeSlots[c.appointmentDate]:[]},c.getFormattedDateText=function(e){if(e){var t=c.formatDate(e.date),n=c.formatTime(e.startTime);return a.instant("faceKom.appointment.at",{date:t,time:n})}return""},c.CollectMobileNumber=function(){return!(!c.selectionRules||!c.attendee)&&c.selectionRules.missingMobileNumberEntities.indexOf(c.attendee.entityId)>-1}}}]})}},function(e,t,n){e.exports=function(e){var t=n(4).component.ComponentLoadEvent,a=n(10),r=n(12);e.component("auTenTixInfo",{bindings:{closeFn:"@",entityId:"<",identificationType:"@",taskNumber:"<"},templateUrl:e.PLATFORMFEATURES_ROOT+"/components/autentix/auTenTixInfo.html",controller:["IS_MOBILE","$window","ResourceService","ComponentService","ApplicationContext","ACTIVE_CONTEXT","NavigationService","UserPlatformService","$interval","$timeout","AmInterfaceService",function(n,i,o,s,l,c,u,d,p,g,f){var m,v=this;v.errors={},v.width=0,v.prevStatus="",v.moduleName="auTenTixInfo",v.showAuTenTixURL=!1,v.getServerErrors=function(){return v.errors},v.openLink=function(){d.isNativeMobileApplication()&&angular.isFunction(i.sendToNativeApp)?i.sendToNativeApp({action:"url-open",data:{url:v.auTenTixURL,external:!v.hsbcClient}}):i.open(v.auTenTixURL,"_blank")},v.getClasses=function(){return"ERROR"===v.autentixStatus||"VERIFICATION_FAILURE"===v.autentixStatus?"alert-danger":"VERIFICATION_SUCCESS"===v.autentixStatus?"alert-success":"alert-warning"};var h=function(){p.cancel(m),v.state="RESULT_STATE",g(v.closeModal,5e3),"VERIFICATION_SUCCESS"===v.autentixStatus?a.updateInnerProgressBar("green","green",0,v.moduleName):a.updateInnerProgressBar("red","red",0,v.moduleName)},b=function(){o.fetch(e.PF_SERVER_PATH+"/auTenTixInfo/autenTixResultStatus",{taskNumber:v.taskNumber,entityId:v.entityId}).then(function(e){v.autentixStatus=e.data.autentixStatus,"UNKNOWN"===v.autentixStatus&&(v.autentixStatus="ERROR")}).catch(function(e){v.autentixStatus="ERROR"}).finally(function(){"VERIFICATION_SUCCESS"===v.autentixStatus||"VERIFICATION_FAILURE"===v.autentixStatus||"TASK_ASSIGNED"===v.autentixStatus?h():"ERROR"===v.autentixStatus&&a.updateProcessingDiv(0,v.moduleName)})},y=function(){o.fetch(e.PF_SERVER_PATH+"/auTenTixInfo/autenTixStatus",{taskNumber:v.taskNumber}).then(function(e){v.autentixStatus=e.data.autentixStatus,v.forceClose=e.data.forceClose,"UNKNOWN"===v.autentixStatus&&(v.autentixStatus="ERROR")}).catch(function(e){v.autentixStatus="ERROR"}).finally(function(){"ERROR"!==v.autentixStatus&&"GENERATED_RESULT"!==v.autentixStatus&&v.prevStatus!=v.autentixStatus?"VERIFICATION_SUCCESS"===v.autentixStatus||"VERIFICATION_FAILURE"===v.autentixStatus?h():(v.width=v.width+100/7,a.updateProcessingDiv(v.width,v.moduleName),v.prevStatus=v.autentixStatus,"PROCESSING_DOCUMENTS"===v.autentixStatus&&(v.showAuTenTixURL=!1,v.forceClose&&(p.cancel(m),g(v.closeModal,5e3)))):"GENERATED_RESULT"===v.autentixStatus?(p.cancel(m),v.autentixStatus="PROCESSING_DOCUMENTS",m=p(b,5e3,3)):"ERROR"===v.autentixStatus&&a.updateProcessingDiv(0,v.moduleName)})};v.declineTask=function(){v.isLoading=!0;var t={entityId:v.entityId,taskNumber:v.taskNumber};o.delete(e.PF_SERVER_PATH+"/auTenTixInfo/",t).then(function(e){v.closeModal(!0)},function(e){v.errors=e.data.errors}).finally(function(){v.isLoading=!1})},v.selectverificationMethod=function(e){("STREAMLINED"!==e||v.isStreamlinedAllowed)&&(v.verificationMethod=e)},v.confirmMethodSelection=function(){"MANUAL"===v.verificationMethod?v.declineTask():(v.state="STREAMLINED_VERIFICATION",v.checkConsent())},v.sendEmail=function(){p.cancel(m),v.hasEmailAddress?v.submitEmail():v.state="COLLECT_EMAIL"},v.loadAutentixData=function(){v.auTenTixdataLoaded=!1,v.isLoading=!0;var t={entityId:v.entityId,taskNumber:v.taskNumber};o.fetch(e.PF_SERVER_PATH+"/auTenTixInfo/autenTixData",t).then(function(e){v.isNonPrimaryUser=e.data.isNonPrimaryUser,v.isNonPrimaryUser&&(v.hasEmailAddress=e.data.hasEmailAddress,v.secondaryEntity=e.data.secondaryEntity,v.hasEmailAddress&&(v.emailAddress=v.secondaryEntity.emailAddress)),v.auTenTixURL=e.data.auTenTixURL,v.onlyIdentityVerification=e.data.onlyIdentityVerification,v.showRealTimeStatus=e.data.showRealTimeStatus,v.auTenTixURL&&(v.showAuTenTixURL=!0,function(e){v.isLoading=!0;var t=angular.element("#qrcode")[0];r.toCanvas(t,e,{},function(e){e&&console.error(e),v.isLoading=!1})}(v.auTenTixURL),v.showRealTimeStatus&&(m=p(y,5e3,60),a.updateInnerProgressBar("blue",void 0,0,v.moduleName)))},function(e){v.errors=e.data.errors}).finally(function(){v.isLoading=!1,v.auTenTixdataLoaded=!0})},v.submitConsent=function(t){if(t){v.isLoading=!0;var n={consentTaskNumber:v.consentFormTask.taskNumber,consentAgreementId:v.consentAgreement.id.fileId,consentAgreementSubstitution:v.consentAgreement.agreementSubstitutions};o.update(e.PF_SERVER_PATH+"/auTenTixInfo/submitConsent",n).then(function(e){v.state="STREAMLINED_VERIFICATION",v.loadAutentixData()},function(e){v.errors=e.data.errors}).finally(function(){v.isLoading=!1})}else v.state="METHOD_SELECTION"},v.submitEmail=function(){v.isLoading=!0;var t={entityId:v.entityId,taskNumber:v.taskNumber,emailAddress:v.emailAddress};o.fetch(e.PF_SERVER_PATH+"/auTenTixInfo/sendAuTenTixEmail",t).then(function(e){if(e.data.hasValidEmail){var t=e.data.success;v.state="EMAIL_RESULT_STATE",v.autentixStatus=t?"EMAIL_SUCCESS":"EMAIL_FAILURE"}},function(e){v.errors=e.data.errors}).finally(function(){v.isLoading=!1})},v.checkConsent=function(){v.isLoading=!0;var t={entityId:v.entityId,taskNumber:v.taskNumber};o.fetch(e.PF_SERVER_PATH+"/auTenTixInfo/consentDetails",t).then(function(e){v.consentFormTask=e.data.consentFormTask,v.consentFormTask?(v.state="CONSENT_SCREEN",v.consentAgreement=e.data.consentAgreement):(v.state="STREAMLINED_VERIFICATION",v.loadAutentixData())},function(e){v.errors=e.data.errors}).finally(function(){v.isLoading=!1})},v.$onInit=function(){if(v.isMobile=n,v.isStandalone=c===l.STANDALONE,v.isLoading=!0,v.errors={},v.allowedVerificationMethods=["STREAMLINED","MANUAL"],v.onlyIdentityVerification=!1,v.hsbcClient=!1,v.isStandalone){v.close=window[v.closeFn]||void 0;var a=window.cancelFn;v.goToAppStatus=window[a]||void 0}else v.close=u.navigateToPrevBreadcrumb;v.state="METHOD_SELECTION",v.verificationMethod="STREAMLINED";var r={entityId:v.entityId,idType:v.identificationType,taskNumber:v.taskNumber};o.fetch(e.PF_SERVER_PATH+"/auTenTixInfo/identificationDetails",r).then(function(e){v.identificationDetails=e.data.identificationDetails,v.allowEmploymentAddress=e.data.allowEmploymentAddress,v.isOptOutAllowed=e.data.isOptOutAllowed,v.isStreamlinedAllowed=e.data.isStreamlinedAllowed,v.onlyIdentityVerification=e.data.onlyIdentityVerification,v.commsecClient=e.data.commsecClient,v.hsbcClient=e.data.hsbcClient,v.isOptOutAllowed||(v.state="STREAMLINED_VERIFICATION",v.checkConsent()),v.isStreamlinedAllowed||(v.verificationMethod="MANUAL")},function(e){v.errors=e.data.errors}).finally(function(){v.isLoading=!1}),v.closeModal=function(e){angular.isDefined(m)&&(p.cancel(m),m=void 0);var n=new t("auTenTixInfo",!0);s.notifyLoad(n),e&&v.isStandalone?v.goToAppStatus(v.entityId):(f.fetchPendingItems(),v.close())}}}]})}},function(e,t,n){e.exports=function(e){n(4).component.ComponentLoadEvent,n(10);var t=n(12);e.component("auTenTixEmailConsent",{bindings:{taskNumber:"<"},template:n(1855),controller:["IS_MOBILE","$window","$translate","ResourceService",function(n,a,r,i){var o=this;o.consentSelected=function(e){e?o.submitConsent():o.state="WARNING_SCREEN"},o.warningSelected=function(e){e?o.state="CONSENT_SCREEN":o.declineAuTenTix()},o.declineAuTenTix=function(){o.isLoading=!0;var t={entityId:o.entityId,taskNumber:o.taskNumber};i.fetch(e.PF_SERVER_PATH+"/AuTenTixEmailConsent/autenTixDecline",t).then(function(e){o.state="FINAL_SCREEN",e.data.success?(o.finalScreenAlertClass="alert alert-success",o.finalScreenMsg=r.instant("autentix.emailconsent.declineSucess")):(o.finalScreenAlertClass="alert alert-danger",o.finalScreenMsg=r.instant("autentix.emailconsent.declineFailed"))},function(e){o.errors=e.data.errors}).finally(function(){o.isLoading=!1})},o.submitConsent=function(){o.isLoading=!0;var t={consentTaskNumber:o.consentTaskNumber,consentAgreementId:o.consentAgreement.id.fileId,consentAgreementSubstitution:o.consentAgreement.agreementSubstitutions};i.update(e.PF_SERVER_PATH+"/AuTenTixEmailConsent/submitConsent",t).then(function(e){o.state="FINAL_SCREEN",e.data.success?o.fetchAuTenTixData():(o.finalScreenAlertClass="alert alert-danger",o.finalScreenMsg=r.instant("autentix.emailconsent.consentSubmitFailed"))},function(e){o.errors=e.data.errors}).finally(function(){o.isLoading=!1})},o.openLink=function(){a.open(o.auTenTixURL,"_blank")},o.fetchAuTenTixData=function(){o.isLoading=!0;var t={entityId:o.entityId,taskNumber:o.taskNumber};i.fetch(e.PF_SERVER_PATH+"/AuTenTixEmailConsent/autenTixData",t).then(function(e){o.auTenTixURL=e.data.auTenTixURL,o.isFraudAndNotKyc=e.data.isFraudAndNotKyc},function(e){o.errors=e.data.errors}).finally(function(){o.isLoading=!1,o.auTenTixURL?(s(o.auTenTixURL),o.finalScreenAlertClass="alert alert-success",o.isMobile?(o.finalScreenMsg=r.instant("autentix.emailconsent.consentSubmitSuccess"),a.open(o.auTenTixURL,"_self")):o.finalScreenMsg=r.instant("autentix.emailconsent.consentSubmitSuccessDesktop")):(o.finalScreenAlertClass="alert alert-danger",o.finalScreenMsg=r.instant("autentix.error.fetchfail"))})};var s=function(e){o.isLoading=!0;var n=angular.element("#qrcode")[0];t.toCanvas(n,e,{},function(e){e&&console.error(e),o.isLoading=!1})};o.$onInit=function(){o.isMobile=n,o.state="CONSENT_SCREEN",o.isLoading=!0;var t={taskNumber:o.taskNumber};i.fetch(e.PF_SERVER_PATH+"/AuTenTixEmailConsent/consentDetails",t).then(function(e){o.consentAgreement=e.data.consentAgreement,o.entityId=e.data.entityId,o.consentTaskNumber=e.data.consentTaskNumber,o.optOutAllowed=e.data.optOutAllowed,o.isOnlyIdentityVerification=e.data.isOnlyIdentityVerification},function(e){o.errors=e.data.errors}).finally(function(){o.isLoading=!1})}}]})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.isLoading"></loading-overlay>\n<div page-structure class="p-20 m-20">\n    <div class="shadow p-20" ng-if="$ctrl.state === \'CONSENT_SCREEN\'">\n        <div class="row">\n            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n                <div class="alert alert-light">\n                    <am-agreement ng-if="$ctrl.consentAgreement" agreement="$ctrl.consentAgreement" hide-title="true" full-page="true"></am-agreement>\n                </div>\n            </div>\n        </div>\n        <div class="row">\n            <div class="col-12 col-sm-6 p-10">\n                <am-button ng-if="$ctrl.optOutAllowed" on-click="$ctrl.consentSelected(false)" btn-text="{{\'word.nothankyou\' | translate}}" btn-type="Secondary"></am-button>\n            </div>\n            <div class="col-12 col-sm-6 p-10">\n                <am-button btn-class="float-right" on-click="$ctrl.consentSelected(true)" btn-text="{{\'word.doAgree\' | translate}}" btn-type="primary"></am-button>\n            </div>\n        </div>\n    </div>\n    <div class="shadow p-20" ng-if="$ctrl.state === \'WARNING_SCREEN\'">\n        <div class="row">\n            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n                <div class="alert alert-warning">\n                    <p>{{\'autentix.emailconsent.warning1\' | translate}}</p>\n                    <br>\n                    <p>{{\'autentix.emailconsent.warning2.header\' | translate}}</p>\n                    <ul ng-if="!$ctrl.isOnlyIdentityVerification">\n                        <li>{{\'autentix.emailconsent.warning2.note1\' | translate}}</li>\n                        <li>{{\'autentix.emailconsent.warning2.note2\' | translate}}</li>\n                        <li>{{\'autentix.emailconsent.warning2.note3\' | translate}}</li>\n                        <li>{{\'autentix.emailconsent.warning2.note4\' | translate}}</li>\n                    </ul>\n                    <ul ng-if="$ctrl.isOnlyIdentityVerification">\n                        <li>{{\'autentix.emailconsent.warning2.note5\' | translate}}</li>\n                        <li>{{\'autentix.emailconsent.warning2.note3\' | translate}}</li>\n                    </ul>\n                </div>\n            </div>\n        </div>\n        <div class="row">\n            <div class="col-12 col-sm-6 p-10">\n                <am-button on-click="$ctrl.warningSelected(false)" btn-text="{{\'autentix.consentform.useManual\' | translate}}" btn-type="Secondary"></am-button>\n            </div>\n            <div class="col-12 col-sm-6 p-10">\n                <am-button btn-class="float-right" on-click="$ctrl.warningSelected(true)" btn-text="{{\'autentix.consentform.useStreamlined\' | translate}}" btn-type="primary"></am-button>\n            </div>\n        </div>\n    </div>\n    <div class="shadow p-20" ng-if="$ctrl.state === \'FINAL_SCREEN\'">\n        <div class="row">\n            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n                <div ng-class="$ctrl.finalScreenAlertClass">\n                    <p>{{$ctrl.finalScreenMsg}}</p>\n                </div>\n                <center ng-show="$ctrl.auTenTixURL">\n                   <p>{{\'autentix.emailconsent.scanQr\' | translate}}</p>\n                   <canvas ng-if="!$ctrl.isMobile" id="qrcode"></canvas>\n                   <br>\n                   <a ng-if="$ctrl.isFraudAndNotKyc" ng-click="$ctrl.openLink()" href="javascript:void(0);">{{\'autentix.directLink\' | translate }}</a>\n               </center>\n            </div>\n        </div>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("emailConsentError",{bindings:{error:"@"},template:n(1857)})}},function(e,t){e.exports='<div page-structure class="p-20 m-20">\n    <div class="row">\n    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n        <div class="alert alert-danger">\n            <p>{{ \'autentix.emailconsent.error.\' + $ctrl.error | translate}}</p>\n        </div>\n    </div>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){n(1859)(e)}},function(e,t,n){e.exports=function(e){n(1860)(e)}},function(e,t){e.exports=function(e){function t(e){var t=this;t.$onInit=function(){t.migrationType=e.getSequenceData().migrationType,e.configureButtons({continueBtn:{onClick:e.stepForward}})}}e.controller("MigrationInProgressCtrl",t),t.$inject=["DynamicSequenceService"]}},function(e,t,n){"use strict";var a=angular.module("ibmarketing.questionnaire",[]);a.WEBAPP_ROOT="/questionnaire.webapp",a.SERVER_PATH="/AccountManagement",a.config(["$translatePartialLoaderProvider",function(e){e.addPart("/questionnaire.webapp/i18n/questionnaire")}]),n(1862)(a),n(1889)(a),n(1890)(a),n(1898)(a)},function(e,t,n){e.exports=function(e){n(1863)(e),n(1865)(e),n(1867)(e),n(1869)(e),n(1871)(e),n(1873)(e),n(1875)(e),n(1877)(e),n(1879)(e),n(1881)(e),n(1883)(e),n(1885)(e),n(1887)(e)}},function(e,t,n){e.exports=function(e){e.component("acknowledgementQuestionForm",{require:{questionnaireFormCtrl:"^questionnaireForm",formServerErrorsCtrl:"^^formServerErrors"},bindings:{question:"=ngModel"},template:n(1864),controller:function(){var e=this;e.$onInit=function(){if(angular.isUndefined(e.question))throw"Invalid argument passed to acknowledgement question form component!!!";e.getQuestionText=e.questionnaireFormCtrl.getQuestionText,e.getAnswerText=e.questionnaireFormCtrl.getAnswerText,e.getQuestionLeftColumns=e.questionnaireFormCtrl.getQuestionLeftColumns,e.getQuestionRightColumns=e.questionnaireFormCtrl.getQuestionRightColumns,e.clearError=function(){e.formServerErrorsCtrl.getServerErrors()&&e.formServerErrorsCtrl.getServerErrors()["questionResponse_"+e.question.questionId]&&delete e.formServerErrorsCtrl.getServerErrors()["questionResponse_"+e.question.questionId]}}}})}},function(e,t){e.exports='<div class="row">\n\t<div ng-class="$ctrl.getQuestionLeftColumns()">\n\t\t<p class="text-center">\n\t\t\t<span><i class="fa fas fa-angle-right"></i></span>\n\t\t</p>\n\t</div>\n\t<div ng-class="$ctrl.getQuestionRightColumns()">\n\t\t<p ng-bind-html="::$ctrl.getQuestionText($ctrl.question) | renderHTML"></p>\n\t</div>\n\t<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n\t\t<div class="row">\n\t\t\t<div class="col-xs-2 col-sm-1 col-md-1 col-lg-1">\n\t\t\t\t<p class="text-center">\n\t\t\t\t\t<input type="checkbox" name="{{\'questionResponse_\' + $ctrl.question.questionId }}" ng-model="$ctrl.question.userAnswer.answerId" i-check ng-true-value="{{$ctrl.question.answers[0].answerId}}" ng-false-value="" ng-change="$ctrl.clearError($ctrl.question)" />\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t\t<div class="col-xs-10 col-sm-11 col-md-11 col-lg-11">\n\t\t\t\t<p>{{ ::$ctrl.getAnswerText($ctrl.question.answers[0].answerId) }}</p>\n\t\t\t</div>\t\t\n\t\t</div>\n\t</div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("checkboxQuestionForm",{require:{questionnaireFormCtrl:"^questionnaireForm",formServerErrorsCtrl:"^^formServerErrors"},bindings:{question:"=ngModel"},template:n(1866),controller:function(){var e=this;e.$onInit=function(){if(angular.isUndefined(e.question))throw"Invalid argument passed to checkbox question form component!!!";(e.question.answers||[]).sort(function(e,t){return e.displayOrder-t.displayOrder}),e.getQuestionText=e.questionnaireFormCtrl.getQuestionText,e.getAnswerText=e.questionnaireFormCtrl.getAnswerText,e.getPlaceholderText=e.questionnaireFormCtrl.getPlaceholderText,e.getQuestionLeftColumns=e.questionnaireFormCtrl.getQuestionLeftColumns,e.getQuestionRightColumns=e.questionnaireFormCtrl.getQuestionRightColumns,e.nlCode=e.questionnaireFormCtrl.getInputLanguage(),e.displayOtherAnswer=function(e){return e.selected&&e.explanatory},e.update=function(t){t&&(e.formServerErrorsCtrl.getServerErrors()&&e.formServerErrorsCtrl.getServerErrors()["questionResponse_"+e.question.questionId]&&delete e.formServerErrorsCtrl.getServerErrors()["questionResponse_"+e.question.questionId],t.selected&&e.question.answers.filter(function(e){return e.exclusive!==t.exclusive}).forEach(function(e){e.selected=!t.selected}))}}}})}},function(e,t){e.exports='<div class="row">\n\t<div ng-class="$ctrl.getQuestionLeftColumns()">\n\t\t<p class="text-center">\n\t\t\t<span><i class="fa fas fa-angle-right"></i></span>\n\t\t</p>\n\t</div>\n\t<div ng-class="$ctrl.getQuestionRightColumns()">\n\t\t<p ng-bind-html="::$ctrl.getQuestionText($ctrl.question) | renderHTML"></p>\n\t\t<div name="{{answer.answerId}}" class="row" ng-repeat="answer in $ctrl.question.answers">\n\t\t\t<div class="col-xs-2 col-sm-1 col-md-1 col-lg-1">\n\t\t\t\t<p class="text-left">\n\t\t\t\t\t<input type="checkbox" name="{{\'questionResponse_\' + $ctrl.question.questionId }}" ng-model="answer.selected" ng-change="$ctrl.update(answer)" i-check />\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t\t<div class="col-xs-10 col-sm-11 col-md-11 col-lg-11">\n\t\t\t\t<p ng-bind-html="::$ctrl.getAnswerText(answer) | translate | renderHTML"></p>\n\t\t\t\t<p ng-if="$ctrl.displayOtherAnswer(answer)">\n\t\t       \t\t<am-textarea name="{{\'question_\' + $ctrl.question.questionId + \'_answer_\' + answer.answerId}}" ng-model="answer.explanation" maxlength="500" required ph-text="{{$ctrl.getPlaceholderText($ctrl.question, answer)}}" input-nl-code="{{$ctrl.nlCode}}"></am-textarea>\n\t\t       \t</p>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("businessLocationForm",{require:{questionnaireFormCtrl:"^questionnaireForm"},bindings:{question:"=ngModel",size:"<?"},template:n(1868),controller:["$translate",function(e){var t=this,n=["Country","Percentage"],a=function(){var e=Object.keys(t.question.multipleAnswers).length;return 0===e?0:Object.keys(t.question.multipleAnswers).map(Number)[e-1]};t.$onInit=function(){if(angular.isUndefined(t.question))throw"Invalid argument passed to emplyment history component!!!";t.size=t.size||3,t.getQuestionText=t.questionnaireFormCtrl.getQuestionText,t.getQuestionLeftColumns=t.questionnaireFormCtrl.getQuestionLeftColumns,t.getQuestionRightColumns=t.questionnaireFormCtrl.getQuestionRightColumns,t.nlCode=t.questionnaireFormCtrl.getInputLanguage(),t.getOptionText=function(t){return e.instant(n[t])},t.getInputMask=function(e){return"Percentage"===t.getOptionText(e)?"'alias': 'simplePercentage'":void 0},t.isAddDisabled=function(){var e=a(),n=t.question.multipleAnswers[e].some(function(e){return angular.isUndefined(e.text)});return Object.keys(t.question.multipleAnswers).length>=t.size||n},t.addObject=function(){var e=a(),r=[];for(var i in n){r.push({answerId:t.question.answers[0].answerId,answerKey:n[i]})}t.question.multipleAnswers[e+1]=r},t.isRemovable=function(){return Object.entries(t.question.multipleAnswers).length>1},t.removeObject=function(e){var n=e||a();delete t.question.multipleAnswers[n]},0===Object.entries(t.question.multipleAnswers).length&&t.addObject()}}]})}},function(e,t){e.exports='<div class="row">\n\t<div ng-class="$ctrl.getQuestionLeftColumns()">\n\t\t<p class="text-center">\n\t\t\t<span><i class="fa fas fa-angle-right"></i></span>\n\t\t</p>\n\t</div>\n\t<div ng-class="$ctrl.getQuestionRightColumns()">\n\t\t<p ng-bind-html="::$ctrl.getQuestionText($ctrl.question) | renderHTML"></p>\n\t</div>\n\t<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" ng-repeat="(rowCount, userAnswers) in $ctrl.question.multipleAnswers" ng-if="!$last">\n\t\t<div class="row">\n\t\t\t<div class="col-xs-2 col-sm-1 col-md-1 col-lg-1"></div>\n\t\t\t<div class="col-xs-10 col-sm-11 col-md-11 col-lg-11">\n\t\t\t\t<am-form-input ng-repeat="userAnswer in userAnswers" ng-model="userAnswer.text" label-text="{{ $ctrl.getOptionText($index) }}" is-disabled="true" is-required="true" input-nl-code="{{$ctrl.nlCode}}"></am-form-input>\n\t\t\t\t<div class="form-group">\n\t\t\t\t    <div class="row">\n\t\t\t\t        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n\t\t\t\t            <am-button on-click="$ctrl.removeObject(rowCount)" btn-icon="fa-times" btn-text="{{ \'word.remove\' | translate}}"></am-button>\n\t\t\t\t        </div>\n\t\t\t\t    </div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<hr />\n\t</div>\n\t<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" ng-repeat="(rowCount, userAnswers) in $ctrl.question.multipleAnswers" ng-if="$last">\n\t\t<div class="row">\n\t\t\t<div class="col-xs-2 col-sm-1 col-md-1 col-lg-1"></div>\n\t\t\t<div class="col-xs-10 col-sm-11 col-md-11 col-lg-11">\n\t\t\t\t<am-form-input name="{{ \'questionResponse_\' + $ctrl.question.questionId + \'_\' + rowCount + \'_\' + $index }}" ng-repeat="userAnswer in userAnswers" ng-model="userAnswer.text" label-text="{{ $ctrl.getOptionText($index) }}" input-mask="$ctrl.getInputMask($index)" maxlength="50" required input-nl-code="{{$ctrl.nlCode}}"></am-form-input>\t\t\t\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n<div class="form-group">\n    <div class="row">\n    \t<div class="col-xs-2 col-sm-1 col-md-1 col-lg-1"></div>\n        <div class="col-xs-10 col-sm-11 col-md-11 col-lg-11">\n            <am-button ng-if="$ctrl.isRemovable()" on-click="$ctrl.removeObject()" btn-icon="fa-times" btn-text="{{ \'word.remove\' | translate}}"></am-button>\n            <am-button btn-icon="fa-plus" on-click="$ctrl.addObject()" is-disabled="$ctrl.isAddDisabled()" btn-text="{{\'word.add\' | translate}}"></am-button>\n        </div>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("employmentHistoryForm",{require:{questionnaireFormCtrl:"^questionnaireForm"},bindings:{question:"=ngModel",maxPoolSize:"<?"},template:n(1870),controller:["$translate",function(e){var t=this,n=["Name","Address","Employer Industry","Number of Years Employed"],a=function(){var e=Object.keys(t.question.multipleAnswers).length;return 0===e?0:Object.keys(t.question.multipleAnswers).map(Number)[e-1]};t.$onInit=function(){if(angular.isUndefined(t.question))throw"Invalid argument passed to emplyment history component!!!";t.maxPoolSize=t.maxPoolSize||5,t.getQuestionText=t.questionnaireFormCtrl.getQuestionText,t.nlCode=t.questionnaireFormCtrl.getInputLanguage(),t.getOptionText=function(t){return e.instant(n[t])},t.isAddDisabled=function(){var e=a(),n=t.question.multipleAnswers[e].some(function(e){return angular.isUndefined(e.text)});return Object.keys(t.question.multipleAnswers).length>=t.size||n},t.addObject=function(){var e=a(),r=[];for(var i in n){r.push({answerId:t.question.answers[0].answerId,answerKey:n[i]})}t.question.multipleAnswers[e+1]=r},t.isRemovable=function(){return Object.entries(t.question.multipleAnswers).length>1},t.removeObject=function(e){var n=e||a();delete t.question.multipleAnswers[n]},0===Object.entries(t.question.multipleAnswers).length&&t.addObject()}}]})}},function(e,t){e.exports='<div class="row">\n\t<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n\t\t<p>\n\t\t\t<span><i class="fa fas fa-angle-right"></i></span>\n\t\t\t{{ ::$ctrl.getQuestionText($ctrl.question) }}\n\t\t</p>\n\t</div>\n\t<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" ng-repeat="(rowCount, userAnswers) in $ctrl.question.multipleAnswers" ng-if="!$last">\n\t\t<am-form-input ng-repeat="userAnswer in userAnswers" ng-model="userAnswer.text" label-text="{{ $ctrl.getOptionText($index) }}" is-disabled="true" is-required="true" input-nl-code="{{$ctrl.nlCode}}"></am-form-input>\n\t\t<div class="form-group">\n\t\t    <div class="row">\n\t\t        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n\t\t            <am-button on-click="$ctrl.removeObject(rowCount)" btn-icon="fa-times" btn-text="{{ \'word.remove\' | translate}}"></am-button>\n\t\t        </div>\n\t\t    </div>\n\t\t</div>\n\t\t<hr />\n\t</div>\n\t<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" ng-repeat="(rowCount, userAnswers) in $ctrl.question.multipleAnswers" ng-if="$last">\n\t\t<am-form-input name="{{ \'questionResponse_\' + $ctrl.question.questionId + \'_\' + rowCount + \'_\' + $index }}" ng-repeat="userAnswer in userAnswers" ng-model="userAnswer.text" label-text="{{ $ctrl.getOptionText($index) }}" maxlength="50" required input-nl-code="{{$ctrl.nlCode}}"></am-form-input>\n\t</div>\n</div>\n<div class="form-group">\n    <div class="row">\n        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n            <am-button ng-if="$ctrl.isRemovable()" on-click="$ctrl.removeObject()" btn-icon="fa-times" btn-text="{{ \'word.remove\' | translate}}"></am-button>\n            <am-button btn-icon="fa-plus" on-click="$ctrl.addObject()" is-disabled="$ctrl.isAddDisabled()" btn-text="{{\'word.add\' | translate}}"></am-button>\n        </div>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("phoneNumberForm",{require:{questionnaireFormCtrl:"^questionnaireForm"},bindings:{question:"=ngModel"},template:n(1872),controller:["$translate",function(e){var t=this,n=["Country","Type","Number"];t.$onInit=function(){if(angular.isUndefined(t.question))throw"Invalid argument passed to emplyment history component!!!";t.getQuestionText=t.questionnaireFormCtrl.getQuestionText,t.getQuestionLeftColumns=t.questionnaireFormCtrl.getQuestionLeftColumns,t.getQuestionRightColumns=t.questionnaireFormCtrl.getQuestionRightColumns,t.nlCode=t.questionnaireFormCtrl.getInputLanguage(),t.getOptionText=function(t){return e.instant(n[t])},t.addObject=function(){var e,a=0===(e=Object.keys(t.question.multipleAnswers).length)?0:Object.keys(t.question.multipleAnswers).map(Number)[e-1],r=[];for(var i in n){r.push({answerId:t.question.answers[0].answerId,answerKey:n[i]})}t.question.multipleAnswers[a+1]=r},0===Object.entries(t.question.multipleAnswers).length&&t.addObject()}}]})}},function(e,t){e.exports='<div class="row">\n\t<div ng-class="$ctrl.getQuestionLeftColumns()">\n\t\t<p class="text-center">\n\t\t\t<span><i class="fa fas fa-angle-right"></i></span>\n\t\t</p>\n\t</div>\n\t<div ng-class="$ctrl.getQuestionRightColumns()">\n\t\t<p ng-bind-html="::$ctrl.getQuestionText($ctrl.question) | renderHTML"></p>\n\t</div>\n\t<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" ng-repeat="(rowCount, userAnswers) in $ctrl.question.multipleAnswers" ng-if="$last">\n\t\t<div class="row">\n\t\t\t<div class="col-xs-2 col-sm-1 col-md-1 col-lg-1"></div>\n\t\t\t<div class="col-xs-10 col-sm-11 col-md-11 col-lg-11">\n\t\t\t\t<am-form-input name="{{ \'questionResponse_\' + $ctrl.question.questionId + \'_\' + rowCount + \'_\' + $index }}" ng-repeat="userAnswer in userAnswers" ng-model="userAnswer.text" label-text="{{ $ctrl.getOptionText($index) }}" input-mask="$ctrl.getInputMask($index)" maxlength="50" required input-nl-code="{{$ctrl.nlCode}}"></am-form-input>\t\t\t\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("transactionVolumeForm",{require:{questionnaireFormCtrl:"^questionnaireForm"},bindings:{question:"=ngModel",size:"<?"},template:n(1874),controller:["$translate",function(e){var t=this,n=["Merchant's name","Principal business activity","Geographic location","Transaction volume"],a=function(){var e=Object.keys(t.question.multipleAnswers).length;return 0===e?0:Object.keys(t.question.multipleAnswers).map(Number)[e-1]};t.$onInit=function(){if(angular.isUndefined(t.question))throw"Invalid argument passed to transaction volume component!!!";t.size=t.size||5,t.getQuestionText=t.questionnaireFormCtrl.getQuestionText,t.getQuestionLeftColumns=t.questionnaireFormCtrl.getQuestionLeftColumns,t.getQuestionRightColumns=t.questionnaireFormCtrl.getQuestionRightColumns,t.nlCode=t.questionnaireFormCtrl.getInputLanguage(),t.getOptionText=function(t){return e.instant(n[t])},t.isAddDisabled=function(){var e=a(),n=t.question.multipleAnswers[e].some(function(e){return angular.isUndefined(e.text)});return Object.keys(t.question.multipleAnswers).length>=t.size||n},t.addObject=function(){var e=a(),r=[];for(var i in n){r.push({answerId:t.question.answers[0].answerId,answerKey:n[i]})}t.question.multipleAnswers[e+1]=r},t.isRemovable=function(){return Object.entries(t.question.multipleAnswers).length>1},t.removeObject=function(e){var n=e||a();delete t.question.multipleAnswers[n]},0===Object.entries(t.question.multipleAnswers).length&&t.addObject()}}]})}},function(e,t){e.exports='<div class="row">\n\t<div ng-class="$ctrl.getQuestionLeftColumns()">\n\t\t<p class="text-center">\n\t\t\t<span><i class="fa fas fa-angle-right"></i></span>\n\t\t</p>\n\t</div>\n\t<div ng-class="$ctrl.getQuestionRightColumns()">\n\t\t<p ng-bind-html="::$ctrl.getQuestionText($ctrl.question) | renderHTML"></p>\n\t</div>\n\t<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" ng-repeat="(rowCount, userAnswers) in $ctrl.question.multipleAnswers" ng-if="!$last">\n\t\t<div class="row">\n\t\t\t<div class="col-xs-2 col-sm-1 col-md-1 col-lg-1"></div>\n\t\t\t<div class="col-xs-10 col-sm-11 col-md-11 col-lg-11">\n\t\t\t\t<am-form-input ng-repeat="userAnswer in userAnswers" ng-model="userAnswer.text" label-text="{{ $ctrl.getOptionText($index) }}" is-disabled="true" is-required="true" input-nl-code="{{$ctrl.nlCode}}"></am-form-input>\n\t\t\t\t<div class="form-group">\n\t\t\t\t\t<div class="row">\n\t\t\t\t        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n\t\t\t\t            <am-button on-click="$ctrl.removeObject(rowCount)" btn-icon="fa-times" btn-text="{{ \'word.remove\' | translate}}"></am-button>\n\t\t\t\t        </div>\n\t\t\t\t    </div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<hr />\n\t</div>\n\t<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" ng-repeat="(rowCount, userAnswers) in $ctrl.question.multipleAnswers" ng-if="$last">\n\t\t<div class="row">\n\t\t\t<div class="col-xs-2 col-sm-1 col-md-1 col-lg-1"></div>\n\t\t\t<div class="col-xs-10 col-sm-11 col-md-11 col-lg-11">\n\t\t\t\t<am-form-input name="{{ \'questionResponse_\' + $ctrl.question.questionId + \'_\' + rowCount + \'_\' + $index }}" ng-repeat="userAnswer in userAnswers" ng-model="userAnswer.text" label-text="{{ $ctrl.getOptionText($index) }}" maxlength="50" required input-nl-code="{{$ctrl.nlCode}}"></am-form-input>\t\t\t\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n<div class="form-group">\n\t<div class="row">\n    \t<div class="col-xs-2 col-sm-1 col-md-1 col-lg-1"></div>\n        <div class="col-xs-10 col-sm-11 col-md-11 col-lg-11">\n            <am-button ng-if="$ctrl.isRemovable()" on-click="$ctrl.removeObject()" btn-icon="fa-times" btn-text="{{ \'word.remove\' | translate}}"></am-button>\n            <am-button btn-icon="fa-plus" on-click="$ctrl.addObject()" is-disabled="$ctrl.isAddDisabled()" btn-text="{{\'word.add\' | translate}}"></am-button>\n        </div>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("numericQuestionForm",{require:{questionnaireFormCtrl:"^questionnaireForm"},bindings:{question:"=ngModel"},template:n(1876),controller:[function(){var e=this;e.$onInit=function(){if(angular.isUndefined(e.question))throw"Invalid argument passed to textarea question form component!!!";e.getQuestionText=e.questionnaireFormCtrl.getQuestionText,e.getQuestionLeftColumns=e.questionnaireFormCtrl.getQuestionLeftColumns,e.getQuestionRightColumns=e.questionnaireFormCtrl.getQuestionRightColumns,e.getAnswerLeftColumns=e.questionnaireFormCtrl.getAnswerLeftColumns,e.getAnswerRightColumns=e.questionnaireFormCtrl.getAnswerRightColumns,e.nlCode=e.questionnaireFormCtrl.getInputLanguage()}}]})}},function(e,t){e.exports='<div class="row">\n    <div ng-class="$ctrl.getQuestionLeftColumns()">\n        <p class="text-center">\n            <span><i class="fa fas fa-angle-right"></i></span>\n        </p>\n    </div>\n    <div ng-class="$ctrl.getQuestionRightColumns()">\n        <p ng-bind-html="::$ctrl.getQuestionText($ctrl.question) | renderHTML"></p>\n    </div>\n</div>\n<div class="row">\n    <div ng-class="$ctrl.getAnswerLeftColumns()"></div>\n    <div ng-class="$ctrl.getAnswerRightColumns()">\n        <p>\n            <am-input name="{{\'questionResponse_\' + $ctrl.question.questionId}}" ng-model="$ctrl.question.userAnswer.text" input-mask-alias="quantityPositive" required input-nl-code="{{$ctrl.nlCode}}"></am-input>\n        </p>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("percentageQuestionForm",{require:{questionnaireFormCtrl:"^questionnaireForm"},bindings:{question:"=ngModel"},template:n(1878),controller:["LanguageService",function(e){var t=this;t.$onInit=function(){if(angular.isUndefined(t.question))throw"Invalid argument passed to checkbox question form component!!!";t.getQuestionText=t.questionnaireFormCtrl.getQuestionText,t.getPlaceholderText=t.questionnaireFormCtrl.getPlaceholderText,t.getQuestionLeftColumns=t.questionnaireFormCtrl.getQuestionLeftColumns,t.getQuestionRightColumns=t.questionnaireFormCtrl.getQuestionRightColumns,t.getAnswerLeftColumns=t.questionnaireFormCtrl.getAnswerLeftColumns,t.getAnswerRightColumns=t.questionnaireFormCtrl.getAnswerRightColumns,t.nlCode=t.questionnaireFormCtrl.getInputLanguage(),t.getMask=function(t){var n=function(e){return 1630===e?"1":"0"}(t),a=function(e){return 1630===e?"30":1631===e?"29":"100"}(t);return e.isRtl()?"'digits': '0', 'max':"+a+", 'min':"+n:"'alias': 'am_percentage', 'digits': '0', 'max':"+a+", 'min':"+n}}}]})}},function(e,t){e.exports='<div class="row">\n    <div ng-class="$ctrl.getQuestionLeftColumns()">\n        <p class="text-center">\n            <span><i class="fa fas fa-angle-right"></i></span>\n        </p>\n    </div>\n    <div ng-class="$ctrl.getQuestionRightColumns()">\n        <p ng-bind-html="::$ctrl.getQuestionText($ctrl.question) | renderHTML"></p>\n    </div>\n</div>\n<div class="row">\n    <div ng-class="$ctrl.getAnswerLeftColumns()"></div>\n    <div ng-class="$ctrl.getAnswerRightColumns()">\n    \t<p>\n    \t\t<am-input name="{{\'questionResponse_\' + $ctrl.question.questionId}}" ng-model="$ctrl.question.userAnswer.text" ph-text="{{$ctrl.getPlaceholderText($ctrl.question)}}" input-mask="$ctrl.getMask($ctrl.question.questionId)" required input-nl-code="{{$ctrl.nlCode}}"></am-input>\n    \t</p>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("singleChoiceQuestionForm",{require:{questionnaireFormCtrl:"^questionnaireForm",formServerErrorsCtrl:"^^formServerErrors"},bindings:{question:"=ngModel"},template:n(1880),controller:function(){var e=this;e.$onInit=function(){if(angular.isUndefined(e.question))throw"Invalid argument passed to single choice question form component!!!";(e.question.answers||[]).sort(function(e,t){return e.displayOrder-t.displayOrder}),e.getQuestionText=e.questionnaireFormCtrl.getQuestionText,e.getAnswerText=e.questionnaireFormCtrl.getAnswerText,e.getPlaceholderText=e.questionnaireFormCtrl.getPlaceholderText,e.getQuestionLeftColumns=e.questionnaireFormCtrl.getQuestionLeftColumns,e.getQuestionRightColumns=e.questionnaireFormCtrl.getQuestionRightColumns,e.nlCode=e.questionnaireFormCtrl.getInputLanguage(),e.update=function(t){t.userAnswer.text=void 0,e.formServerErrorsCtrl.getServerErrors()&&e.formServerErrorsCtrl.getServerErrors()["questionResponse_"+t.questionId]&&delete e.formServerErrorsCtrl.getServerErrors()["questionResponse_"+t.questionId]},e.displayOtherAnswer=function(t){if(!t.userAnswer||!t.userAnswer.answerId)return!1;var n=t.answers.find(function(e){return e.answerId===t.userAnswer.answerId});return!!n&&(-1!==[1128,1142,1149,1512,1559,1778,1786,1869,2605,2756,2758,2759,2760].indexOf(n.answerId)||e.questionnaireFormCtrl.isNewStructure&&n.otherType)}}}})}},function(e,t){e.exports='<div class="row">\n\t<div ng-class="$ctrl.getQuestionLeftColumns()">\n\t\t<p class="text-center">\n\t\t\t<span><i class="fa fas fa-angle-right"></i></span>\n\t\t</p>\n\t</div>\n\t<div ng-class="$ctrl.getQuestionRightColumns()">\n\t\t<p ng-bind-html="::$ctrl.getQuestionText($ctrl.question) | renderHTML"></p>\n\t\t<div class="row" name="{{answer.answerId}}" ng-repeat="answer in $ctrl.question.answers">\n\t\t\t<div class="col-xs-2 col-sm-1 col-md-1 col-lg-1">\n\t\t\t\t<p class="text-left">\n\t\t\t\t\t<input type="radio" name="{{\'questionResponse_\' + $ctrl.question.questionId }}" ng-model="$ctrl.question.userAnswer.answerId" ng-value="{{answer.answerId}}" i-check ng-change="$ctrl.update($ctrl.question)" />\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t\t<div class="col-xs-10 col-sm-11 col-md-11 col-lg-11">\n\t\t\t\t<p>{{ ::$ctrl.getAnswerText(answer) }}</p>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="row" ng-if="$ctrl.displayOtherAnswer($ctrl.question)">\n\t\t\t<div class="col-xs-2 col-sm-1 col-md-1 col-lg-1"></div>\n\t\t\t<div class="col-xs-10 col-sm-11 col-md-11 col-lg-11">\n\t\t\t\t<p>\n\t\t       \t\t<am-textarea name="{{\'questionAnswerResponse_\' + $ctrl.question.questionId}}" ng-model="$ctrl.question.userAnswer.text" maxlength="500" required ph-text="{{$ctrl.getPlaceholderText($ctrl.question)}}" input-nl-code="{{$ctrl.nlCode}}"></am-textarea>\n\t\t       \t</p>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("switchQuestionForm",{require:{questionnaireFormCtrl:"^questionnaireForm"},bindings:{question:"=ngModel",dependentQuestions:"<?"},template:n(1882),controller:["IS_MOBILE","CountryService",function(e,t){var n=[100,101,102,104,106,108,109,110,112,114,983,984,987,988,1402,1404],a=this,r=function(e){return"Yes"===e||"YES"===e||"No"!==e&&"NO"!==e&&void 0};a.$onInit=function(){if(angular.isUndefined(a.question))throw"Invalid argument passed to switch question form component!!!";((a.question.answers||[]).sort(function(e,t){return e.displayOrder-t.displayOrder}),a.dependentQuestions=a.dependentQuestions||[],a.getQuestionText=a.questionnaireFormCtrl.getQuestionText,a.hasHelperText=a.questionnaireFormCtrl.hasHelperText,a.openHelperTextModal=a.questionnaireFormCtrl.openHelperTextModal,a.getQuestionLeftColumns=a.questionnaireFormCtrl.getQuestionLeftColumns,a.getQuestionRightColumns=a.questionnaireFormCtrl.getQuestionRightColumns,a.getAnswerLeftColumns=a.questionnaireFormCtrl.getAnswerLeftColumns,a.getAnswerRightColumns=a.questionnaireFormCtrl.getAnswerRightColumns,a.isMobile=e,a.isLoading=!0,a.update=function(e){if(!angular.isUndefined(e.response)){var t;e.answers.forEach(function(e){return e.selected=!1}),(t=e.response?e.answers.find(function(e){return"Yes"===e.text||"YES"===e.text}):e.answers.find(function(e){return"No"===e.text||"NO"===e.text})).selected=!0,e.userAnswer={answerId:t.answerId,text:t.text};var n=answer=e.answers.find(function(e){return e.answerId!=t.answerId});(a.dependentQuestions[n.answerId]||[]).forEach(function(e){"CHECKBOX"===e.questionType?e.answers.forEach(function(e){return e.selected=!1}):e.userAnswer={}})}},a.question.response=function(e){var t=e.userAnswer||void 0;if(!angular.isUndefined(t)){if(""!==t.text)return r(t.text);if(e.answers.some(function(e){return e.defaultSelected})){var n=e.answers.find(function(e){return e.defaultSelected});return n.selected=!0,e.userAnswer={answerId:n.answerId,text:n.text},r(n.text)}}}(a.question),a.question.answers.forEach(function(e){return e.selected=!1}),a.question.userAnswer&&a.question.userAnswer.text)&&(a.question.answers.find(function(e){return e.text===a.question.userAnswer.text}).selected=!0);n.includes(a.question.questionId)?t.fetchProhibitedCountries().then(function(e){a.countries=e||[]}).finally(function(){a.isLoading=!1}):(a.countries=[],a.isLoading=!1)}}]})}},function(e,t){e.exports='<div ng-if="!$ctrl.isLoading">\n\t<div class="row">\n\t\t<div ng-class="$ctrl.getQuestionLeftColumns()">\n\t\t\t<p class="text-center">\n\t\t\t\t<span><i class="fa fas fa-angle-right"></i></span>\n\t\t\t</p>\n\t\t</div>\n\t\t<div ng-class="$ctrl.getQuestionRightColumns()">\n\t\t\t<p>\n\t\t\t\t<span ng-bind-html="::$ctrl.getQuestionText($ctrl.question) | renderHTML"></span>\n\t\t\t\t<span ng-if="$ctrl.hasHelperText($ctrl.question)">\n\t\t\t\t\t<a href="javascript:void(0);" class="btn-icon" role="button" aria-label="{{ \'word.moreInformation\' | translate }}">\n\t\t\t            <i ng-if="!$ctrl.isMobile" class="fa fa-info-circle" data-popover="{{ \'question.helperText.\' + $ctrl.question.questionId | translate }}" popover-trigger="mouseenter" popover-placement="right"></i>\n\t\t\t            <i ng-if="$ctrl.isMobile" class="fa fa-info-circle" ng-click="$ctrl.openHelperTextModal($ctrl.question)"></i>\n\t\t\t        </a>\n\t\t\t\t</span>\n\t\t\t</p>\n\t\t\t<p ng-if="::$ctrl.countries.length > 0">\n\t\t\t\t<span ng-repeat="country in $ctrl.countries">\n\t\t            {{ \'country.\' + country.alpha3 | translate }}\n\t\t            <span ng-if="!$last">{{ \', \' }}</span>\n\t\t        </span>\n\t\t\t</p>\n\t\t</div>\n\t</div>\n\t<div class="row">\n\t\t<div ng-class="$ctrl.getAnswerLeftColumns()"></div>\n\t\t<div ng-class="$ctrl.getAnswerRightColumns()">\n\t\t\t<p>\n\t\t\t\t<am-switch name="{{\'questionResponse_\' + $ctrl.question.questionId}}" ng-model="$ctrl.question.response" model-listener="$ctrl.update($ctrl.question)"></am-switch>\n\t\t\t</p>\n\t\t</div>\n\t</div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("textareaQuestionForm",{require:{questionnaireFormCtrl:"^questionnaireForm"},bindings:{question:"=ngModel"},template:n(1884),controller:[function(){var e=this;e.$onInit=function(){if(angular.isUndefined(e.question))throw"Invalid argument passed to textarea question form component!!!";e.getQuestionText=e.questionnaireFormCtrl.getQuestionText,e.getQuestionLeftColumns=e.questionnaireFormCtrl.getQuestionLeftColumns,e.getQuestionRightColumns=e.questionnaireFormCtrl.getQuestionRightColumns,e.getAnswerLeftColumns=e.questionnaireFormCtrl.getAnswerLeftColumns,e.getAnswerRightColumns=e.questionnaireFormCtrl.getAnswerRightColumns,e.nlCode=e.questionnaireFormCtrl.getInputLanguage()}}]})}},function(e,t){e.exports='<div class="row">\n\t<div ng-class="$ctrl.getQuestionLeftColumns()">\n\t\t<p class="text-center">\n\t\t\t<span><i class="fa fas fa-angle-right"></i></span>\n\t\t</p>\n\t</div>\n\t<div ng-class="$ctrl.getQuestionRightColumns()">\n\t\t<p ng-bind-html="::$ctrl.getQuestionText($ctrl.question) | renderHTML"></p>\n\t</div>\n</div>\n<div class="row">\n\t<div ng-class="$ctrl.getAnswerLeftColumns()"></div>\n\t<div ng-class="$ctrl.getAnswerRightColumns()">\n\t\t<p>\n       \t\t<am-textarea name="{{\'questionResponse_\' + $ctrl.question.questionId}}" ng-model="$ctrl.question.userAnswer.text" maxlength="500" required input-nl-code="{{$ctrl.nlCode}}"></am-textarea>\n       \t</p>\n\t</div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("questionnaireForm",{require:{parentForm:"^^form",formServerErrorsCtrl:"?^^formServerErrors"},bindings:{questionnaire:"=ngModel",rules:"<?",displayTitle:"<?",displayDescription:"<?",singleColumn:"<?"},template:n(1886),controller:["$translate","ModalService",function(e,t){var n=this,a={underlineStartTag:"<u>",underlineEndTag:"</u>",strongStartTag:"<strong>",strongEndTag:"</strong>",breakTag:"<br />"},r=[722,729];n.$onInit=function(){if(angular.isUndefined(n.questionnaire))throw"Invalid questionnaire argument";if(n.questionnaire=n.questionnaire||void 0,n.displayTitle=n.displayTitle||!1,n.displayDescription=n.displayDescription||!1,n.singleColumn=n.singleColumn||!1,n.conditionalQuestions=[],n.dependentQuestions={},n.questionPool={},n.getError=function(t){var a=n.formServerErrorsCtrl.getServerErrors()||{};return"BUSINESS_LOCATION"===t.questionType&&a.business_location?e.instant("field.error."+a.business_location):e.instant("field.error."+a["questionResponse_"+t.questionId])},n.getPlaceholderText=function(t,n){if(angular.isDefined(n)){var a="question.answer.placeholder."+n.answerId;if(e.instant(a)!=a)return e.instant(a)}if(angular.isDefined(t.userAnswer)&&angular.isDefined(t.userAnswer.answerId)){a="question.answer.placeholder."+t.userAnswer.answerId;if(e.instant(a)!=a)return e.instant(a)}a="question.placeholder."+t.questionId;return e.instant(a)===a?e.instant("word.required"):e.instant(a)},n.hasErrors=function(e){if("FREEFORM"===e.questionType||"BINARY"===e.questionType||"NUMERIC"===e.questionType||"PERCENTAGE"===e.questionType)return!1;var t=n.formServerErrorsCtrl.getServerErrors()||{};return"BUSINESS_LOCATION"===e.questionType?t.business_location:t["questionResponse_"+e.questionId]},n.getQuestionText=function(t){var n=e.instant("questionnaire.question."+t.questionId,a);return n!=="questionnaire.question."+t.questionId?n:t.text},n.getAnswerText=function(t){var n=e.instant("questionnaire.answer."+t.answerId);return n!=="questionnaire.answer."+t.answerId?n:t.text},n.getTitle=function(){var t=e.instant("questionnaire.title."+n.questionnaire.id);return t!=="questionnaire.title."+n.questionnaire.id?t:n.questionnaire.name},n.hasHelperText=function(e){return-1!==r.indexOf(e.questionId)},n.openHelperTextModal=function(n){var a={title:e.instant("word.moreInformation"),templateUrl:"info-modal.component",modalData:{infoContent:e.instant("question.helperText."+n.questionId)},buttons:[]};t.openInfoModal(a)},n.displayDependentQuestion=function(e){return e.userAnswer.answerId&&n.dependentQuestions[e.userAnswer.answerId]},n.getQuestionLeftColumns=function(){return n.singleColumn?"d-none":"col-xs-1 col-sm-1 col-md-1 col-lg-1"},n.getQuestionRightColumns=function(){return n.singleColumn?"col-xs-12 col-sm-12 col-md-12 col-lg-12":"col-xs-11 col-sm-11 col-md-11 col-lg-11"},n.getAnswerLeftColumns=function(){return n.singleColumn?"d-none":"col-xs-12 col-sm-12 col-md-12 col-lg-1"},n.getAnswerRightColumns=function(){return n.singleColumn?"col-xs-12 col-sm-12 col-md-12 col-lg-12":"col-xs-12 col-sm-12 col-md-12 col-lg-11"},n.getInputLanguage=function(){return n.rules?n.rules.inputLanguage:"ENGLISH"},n.isNewStructure=function(){return n.questionnaire.newStructure||!1},n.questionnaire.newStructure)for(var i=0;i<n.questionnaire.questions.length;i++){var o=n.questionnaire.questions[i];if(0===o.dependentOnQuestionId){n.conditionalQuestions.push(o);for(var s=0;s<n.questionnaire.questions.length;s++){var l=n.questionnaire.questions[s];if(0!==l.dependentOnQuestionId&&l.dependentOnQuestionId===o.questionId){var c=n.dependentQuestions[l.displayOnAnswerId]||[];c.push(l),n.dependentQuestions[l.displayOnAnswerId]=c}}}}else for(var u=0;u<n.questionnaire.questions.length;u++){var d=n.questionnaire.questions[u];if(n.conditionalQuestions.push(d),"UNKNOWN"!==d.chapter){for(var p=[],g=u+1;g<n.questionnaire.questions.length;g++){var f=n.questionnaire.questions[g];d.chapter===f.chapter&&(p.push(f),u=g)}n.dependentQuestions[d.answers[0].answerId]=p}}n.conditionalQuestions.sort(function(e,t){return e.displayId-t.displayId})}}]})}},function(e,t){e.exports='<div name="{{$ctrl.questionnaire.name}}">\n\t<h6 ng-if="::$ctrl.displayTitle" class="subtitle">{{ $ctrl.getTitle() }}</h6>\n\t<p ng-if="::$ctrl.questionnaire.entityDetails">\n\t\t<strong>{{ $ctrl.questionnaire.entityDetails.entityName }}</strong>\n\t</p>\n\t<p ng-if="::$ctrl.isNewStructure() && $ctrl.questionnaire.description">\n\t\t{{ $ctrl.questionnaire.description }}\n\t\t<br>\n\t</p>\n\t<p ng-if="::$ctrl.displayDescription">{{ \'questionnaire.description.\' + $ctrl.questionnaire.id  | translate }}</p>\n\t<br ng-if="::$ctrl.displayDescription">\n\t<div ng-if="$ctrl.conditionalQuestions.length > 0" ng-repeat="question in $ctrl.conditionalQuestions">\n\t\t<div ng-include=" \'questionForm.html\' "></div>\n\t\t<br>\n\t</div>\n</div>\n\n<script type="text/ng-template" id="questionForm.html">\n\t<ng-switch on="::question.questionType">\n\t\t<div name="{{question.questionId}}">\n\t\t\t\x3c!-- \n\t\t\t\tFree form questions\n\t\t\t--\x3e\n\t\t\t<textarea-question-form ng-model="question" ng-switch-when="FREEFORM"></textarea-question-form>\n\t\t\t\x3c!-- \n\t\t\t\tSingle Choice Question\n\t\t\t--\x3e\n\t\t\t<single-choice-question-form ng-model="question" ng-switch-when="SINGLE_CHOICE"></single-choice-question-form>\n\t\t\t\x3c!-- \n\t\t\t\tMulti Choice Question\n\t\t\t--\x3e\n\t\t\t<checkbox-question-form ng-model="question" ng-switch-when="CHECKBOX"></checkbox-question-form>\n\t\t\t\x3c!-- \n\t\t\t\tAcknowledgement question\n\t\t\t--\x3e\n\t\t\t<acknowledgement-question-form ng-model="question" ng-switch-when="ACKNOWLEDGEMENT"></acknowledgement-question-form>\n\t\t\t\x3c!-- \n\t\t\t\tBinary question\n\t\t\t--\x3e\n\t\t\t<switch-question-form ng-model="question" ng-switch-when="BINARY" dependent-questions="$ctrl.dependentQuestions"></switch-question-form>\n\t\t\t\x3c!-- \n\t\t\t\tEmployment Hisotry \n\t\t\t--\x3e\n\t\t\t<employment-history-form ng-model="question" ng-switch-when="EMPLOYEMENT_HISTORY"></employment-history-form>\n\t\t\t\x3c!-- \n\t\t\t\tBusiness Location\n\t\t\t--\x3e\n\t\t\t<business-location-form ng-model="question" ng-switch-when="BUSINESS_LOCATION"></business-location-form>\n\t\t\t\x3c!--\n\t\t\t\tTransaction Volume\n\t\t\t--\x3e\n\t\t\t<transaction-volume-form ng-model="question" ng-switch-when="TRANSACTION_VOLUME"></transaction-volume-form>\n\t\t\t\x3c!--\n\t\t\t\tPhone Number\n\t\t\t--\x3e\n\t\t\t<phone-number-form ng-model="question" ng-switch-when="PHONE_NUMBER"></phone-number-form>\n\t\t\t\x3c!--\n\t\t\t\tNumeric\n\t\t\t--\x3e\n\t\t\t<numeric-question-form ng-model="question" ng-switch-when="NUMERIC"></numeric-question-form>\n\t\t\t\x3c!--\n\t\t\t\tPercentage\n\t\t\t--\x3e\n\t\t\t<percentage-question-form ng-model="question" ng-switch-when="PERCENTAGE"></percentage-question-form>\n\t\t\t\x3c!-- \n\t\t\t\tError\n\t\t\t--\x3e\n\t\t\t<div class="row" ng-if="$ctrl.hasErrors(question)">\n\t\t\t\t<div ng-class="$ctrl.getQuestionLeftColumns()">\n\t\t\t\t</div>\n\t\t\t\t<div ng-class="$ctrl.getQuestionRightColumns()">\n\t\t\t\t\t<div class="alert alert-danger">\n\t\t\t\t\t\t<p>{{ ::$ctrl.getError(question) }}</p>\n\t\t\t\t\t</div>\t\t\t\t\t\t\t\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</ng-switch>\n\t\x3c!-- \n\t\tDependent Question tree\n\t--\x3e\n\t<div ng-if="$ctrl.displayDependentQuestion(question)" ng-repeat="dependentQuestion in $ctrl.dependentQuestions[question.userAnswer.answerId]">\n\t\t<br>\n\t\t<div ng-include=" \'questionForm.html\' " ng-init="question = dependentQuestion"></div>\n\t</div>\n<\/script>'},function(e,t,n){var a=n(400).ComponentLoadEvent;e.exports=function(e){e.component("questionnaireFormConfig",{bindings:{componentId:"@",form:"@",entityIds:"@"},template:n(1888),controller:["$q","$timeout","ComponentService","QuestionnaireService",function(e,t,n,r){var i=this;i.submit=function(){var e=jQuery.Deferred();return r.submit(i.questionnaires).then(function(t){e.resolve(t)},function(n){i.errors=n.questionnaireErrors||{},t(function(){e.reject(n)},0,!0)}),e.promise()},i.$onInit=function(){i.componentId=i.componentId||"questionnaire",i.form=i.form||"",i.entityIds=i.entityIds||"",i.errors={};var t=[],o=i.entityIds.length>0?i.entityIds.split("|"):[];if(o.length>0)for(var s=0;s<o.length;s++){var l=o[s];t.push(r.fetchByForm(i.form,l))}else t.push(r.fetchByForm(i.form));i.getServerErrors=function(e){return i.errors[e]},e.all(t).then(function(e){i.questionnaires=e||[]},function(e){i.questionnaires=[]}).finally(function(){var e=new a(i.componentId,0!==i.questionnaires.length);e.submit=i.submit,n.notifyLoad(e)})}}]})}},function(e,t){e.exports='<div ng-form="$ctrl.questionnaireForm">\n\t<div ng-if="$ctrl.questionnaires.length > 0" form-server-errors="$ctrl.getServerErrors($index)" ng-repeat="questionnaire in $ctrl.questionnaires">\n\t\t<questionnaire-form name="{{questionnaire.name}}" ng-model="questionnaire"></questionnaire-form>\t\n\t</div>\n\t<div class="alert alert-danger" ng-if="$ctrl.questionnaires.length === 0">\n\t\t<p>{{ \'Unable to fetch questionnaires\' | translate }}</p>\n\t</div>\n</div>'},function(e,t){e.exports=function(e){}},function(e,t,n){e.exports=function(e){n(1891)(e),n(1893)(e),n(1895)(e),n(1896)(e)}},function(e,t,n){e.exports=function(e){e.component("questionnaireCompletionStep",{template:n(1892),controller:["$translate","DynamicSequenceService","NavigationService","AmInterfaceService",function(e,t,n,a){var r=this;r.$onInit=function(){r.fetchPendingItems=t.getSequenceData().fetchPendingItems||!1,r.fetchPendingItems&&a.fetchPendingItems(),t.configureButtons({canGoBack:!1,extraButtons:[{alignment:"right",btnType:"primary",btnText:e.instant("word.ok"),onClick:n.navigateToPrevBreadcrumb}]})}}]})}},function(e,t){e.exports='<div page-structure>\n\t<div align="center">\n\t\t<i class="fa fa-4x fa-check-circle text-success"></i>\n\t</div>\n\t<h1 class="text-center text-success">{{\'word.thankYou\' | translate}}</h1>\n\t<h3 class="text-center text-dark">{{ \'Your response has been submitted successfully.\' | translate }}</h3>\n</div>'},function(e,t,n){e.exports=function(e){e.component("questionnaireConfigurationStep",{template:n(1894),controller:["DynamicSequenceService",function(e){var t=this,n=function(){e.stepForward(t.questionnaires).catch(function(e){t.errors=e.data.errors||void 0})};t.$onInit=function(){t.startIndex=e.getSequenceData().startIndex||0,t.questionnaires=e.getSequenceData().questionnaires||[],t.rules=e.getSequenceData().rules,t.contextual=function(e){return 90===e.id||91===e.id},e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{onClick:n}})}}]})}},function(e,t){e.exports="<div page-structure ng-form=\"$ctrl.questionnaireForm\">\n\t<h4>{{ 'pendingItemType.QUESTIONNAIRE' | translate }}</h4>\n\t<div ng-repeat=\"questionnaire in $ctrl.questionnaires\">\n\t\t<div ng-if=\"$ctrl.contextual(questionnaire)\">\n\t\t\t<ng-include src=\"'questionnaire_' + questionnaire.id + '.html'\"></ng-include>\n\t\t</div>\n\t\t<questionnaire-form name=\"{{questionnaire.name}}\" ng-model=\"questionnaire\" rules=\"$ctrl.rules[questionnaire.id]\"></questionnaire-form>\n\t</div>\n</div>\n\n<script type=\"text/ng-template\" id=\"questionnaire_90.html\">\n\t<h4>{{ 'natureOfBusiness.header' | translate }}</h4>\n\t<p>{{ 'natureOfBusiness.message.applicant' | translate }}</p>\n\t<h6 class=\"subtitle\">{{ 'natureOfBusiness.label.businessTypes' | translate }}</h6>\n\t<ul>\n    \t<li>{{ 'natureOfBusiness.type.thirdPartyPayment' | translate }}</li>\n   \t\t<li>{{ 'natureOfBusiness.type.cannabis' | translate }}</li>\n    \t<li>{{ 'natureOfBusiness.type.msb' | translate }}</li>\n    \t<li>{{ 'natureOfBusiness.type.defense' | translate }}</li>\n    \t<li>{{ 'natureOfBusiness.type.casino' | translate }}</li>\n    \t<li>{{ 'natureOfBusiness.type.jeweler' | translate }}</li>\n    \t<li>{{ 'natureOfBusiness.type.charity' | translate }}</li>\n\t\t<li>{{ 'natureOfBusiness.type.crypto' | translate }}</li>\n\t</ul>\n    <p>{{ 'natureOfBusiness.message.associations' | translate }}</p>\n\t<hr>\n<\/script>\n\n<script type=\"text/ng-template\" id=\"questionnaire_91.html\">\n    <h4>{{ 'natureOfBusiness.header' | translate }}</h4>\n\t<p>{{ 'natureOfBusiness.message.entity' | translate }}</p>\n\t<p class=\"text-small font-italic\">{{ '(' + ('natureOfBusiness.submessage.entity' | translate) + ')' }}</p>\n\t<h6 class=\"subtitle\">{{ 'natureOfBusiness.label.businessTypes' | translate }}</h6>\n\t<ul>\n    \t<li>{{ 'natureOfBusiness.type.thirdPartyPayment' | translate }}</li>\n   \t\t<li>{{ 'natureOfBusiness.type.cannabis' | translate }}</li>\n    \t<li>{{ 'natureOfBusiness.type.msb' | translate }}</li>\n    \t<li>{{ 'natureOfBusiness.type.defense' | translate }}</li>\n    \t<li>{{ 'natureOfBusiness.type.casino' | translate }}</li>\n    \t<li>{{ 'natureOfBusiness.type.jeweler' | translate }}</li>\n    \t<li>{{ 'natureOfBusiness.type.charity' | translate }}</li>\n\t\t<li>{{ 'natureOfBusiness.type.crypto' | translate }}</li>\n\t</ul>\n    <p>{{ 'natureOfBusiness.message.associations' | translate }}</p>\n\t<hr>\n<\/script>"},function(e,t){e.exports=function(e){e.component("questionnaireSequence",{template:'<am-dynamic-sequence ng-if="$ctrl.translationFetched" sequence-source="{{::$ctrl.sequenceSource}}"></am-dynamic-sequence>',controller:["$translate","$translatePartialLoader","PageService",function(e,t,n){var a=this;a.$onInit=function(){var r=n.getCurrentPage().pageData||{};a.sequenceSource=r.sequenceSource||"/AccountManagement/Questionnaire/Sequence",a.translationFetched=!1,t.addPart("/questionnaire.webapp/i18n/questionnaire"),e.refresh().then(function(){a.translationFetched=!0},function(){throw"Unable to load questionnaire properties files!!!"})}}]})}},function(e,t,n){e.exports=function(e){e.component("ultimateBeneficialOwnerFormStep",{template:n(1897),controller:["DynamicSequenceService",function(e){var t=this,n=function(){for(var n=angular.copy(t.entity.sourcesOfWealth)||[],a=n.length;a--;){var r=n[a];angular.isDefined(r.checked)&&!r.checked&&n.splice(a,1)}var i={sources:t.entity.sourcesOfWealth,netWorth:t.netWorth};e.stepForward(i)};t.$onInit=function(){t.entity=e.getSequenceData().entity||void 0,t.sourceOfWealthRules=e.getSequenceData().sourceOfWealthRules||void 0,t.netWorth=e.getSequenceData().netWorth||void 0,e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{onClick:n}})}}]})}},function(e,t){e.exports='<div page-structure ng-form="$ctrl.entityInfoForm">\n\t<h4>{{ \'ubo.header\' | translate:{entityName: ($ctrl.entity | amEntityName)} }}</h4>\n\t<p>{{ \'ubo.message\' | translate }}</p>\n    <br>\n\t\x3c!-- \n\t\tNet Worth\n\t--\x3e\n\t<am-form-input name="netWorth" ng-model="$ctrl.netWorth" label-text="{{ \'ubo.label.netWorth\' | translate }}" required></am-form-input>\n\t<hr>\n\t\x3c!-- \n\t\tSource of Wealth\n\t--\x3e\n\t<sources-of-wealth-form ng-if="::$ctrl.sourceOfWealthRules" ng-model="$ctrl.entity.sourcesOfWealth" rules="$ctrl.sourceOfWealthRules"></sources-of-wealth-form>\n</div>'},function(e,t,n){e.exports=function(e){n(1899)(e)}},function(e,t){e.exports=function(e){e.factory("QuestionnaireService",["$q","ResourceService",function(t,n){var a=e.SERVER_PATH+"/Questionnaire",r=e.SERVER_PATH+"/QuestionnaireTask";return{fetchByForm:function(e,r){var i={form:e,entityId:r},o=t.defer();return n.fetch(a+"/Form",i).then(function(e){o.resolve(e.data)},function(e){o.reject(e.data)}),o.promise},fetchByName:function(e,r){var i={name:e,entityId:r},o=t.defer();return n.fetch(a+"/Name",i).then(function(e){o.resolve(e.data)},function(e){o.reject(e.data)}),o.promise},fetchById:function(e,r){var i={id:e,entityId:r},o=t.defer();return n.fetch(a+"/Id",i).then(function(e){o.resolve(e.data)},function(e){o.reject(e.data)}),o.promise},submit:function(e,r){var i={questionnaires:e||[],entityId:r||0},o=t.defer();return n.create(a,i).then(function(e){o.resolve(e.data)},function(e){o.reject(e.data)}),o.promise},fetchTaskByForm:function(e,r){var i={form:e,entityId:r},o=t.defer();return n.fetch(a+"/Form",i).then(function(e){o.resolve(e.data)},function(e){o.reject(e.data)}),o.promise},fetchTaskByName:function(e,r){var i={name:e,entityId:r},o=t.defer();return n.fetch(a+"/Name",i).then(function(e){o.resolve(e.data)},function(e){o.reject(e.data)}),o.promise},submitQuestionnaire:function(e,a){var i={questionnaire:e,formNumber:a||0},o=t.defer();return n.create(r,i).then(function(e){o.resolve(e.data)},function(e){o.reject(e.data)}),o.promise}}}])}},function(e,t,n){"use strict";var a=angular.module("ibmarketing.referral",[]);a.WEBAPP_ROOT="/referral.webapp",a.AM_SERVER_PATH="/AccountManagement",a.PF_SERVER_PATH="/aces/PlatformFeatures",a.config(["$translateProvider","$translatePartialLoaderProvider","$windowProvider",function(e,t,n){e.useLoader("$translatePartialLoader",{urlTemplate:"{part}_{lang}.json"});var r=n.$get();e.preferredLanguage(r.AM_LOGIN_LANGUAGE||"en"),e.fallbackLanguage("en"),t.addPart(a.WEBAPP_ROOT+"/i18n/Referral")}]),n(1901)(a)},function(e,t,n){e.exports=function(e){n(1902)(e),n(1904)(e),n(1907)(e)}},function(e,t,n){e.exports=function(e){n(1903)(e)}},function(e,t){e.exports=function(e){e.component("referralInvitation",{bindings:{code:"@",name:"@",type:"@"},templateUrl:e.WEBAPP_ROOT+"/components/referralInvitation.html",controller:["$translate","CONTENT_HOST","AgreementService","NavigationAction","NavigationService",function(e,t,n,a,r){var i=this;i.$onInit=function(){i.contentHost=t,i.logoClass="ib-logo-white",i.openAccount=function(){var e="/Universal/Application?referrerCode="+i.code;"IMPACT"===i.type&&(e+="&impact=T&ft=T"),r.navigate({navigateAction:a.REDIRECT,path:e})},i.viewTnC=function(){var e;e="IMPACT"===i.type?"ImpactReferral":"BrokerageReferral",n.viewAgreement(e)}}}]})}},function(e,t,n){e.exports=function(e){n(1905)(e)}},function(e,t,n){e.exports=function(e){e.component("referralStatusModal",{template:n(1906),controller:["ResourceService","ModalService",function(e,t){var n=this;n.$onInit=function(){n.isLoading=!0,e.fetch(AM_APP_ROOT+"/ReferralStatus").then(function(e){n.status=e.data.status||void 0,n.rejectedReferralRewardStatuses=e.data.rejectedReferralRewardStatuses||[]},function(){n.status=void 0}).finally(function(){n.isLoading=!1})}}]})}},function(e,t){e.exports='<loading-overlay ng-if="$ctrl.isLoading"></loading-overlay>\n<div ng-if="!$ctrl.isLoading">\n\t<div class="table-responsive" ng-if="$ctrl.status">\n\t\t<table class="table table-bordered table-condensed" width="100%" cellpadding="0" cellspacing="0" border="0">\n\t\t\t<thead>\n                <tr>\n                    <th valign="middle" align="center">&nbsp;</th>\n                    <th valign="middle" align="center">\n                    \t<div class="padding-left-10">\n                    \t\t<strong>{{ \'referralStatus.label.year\' | translate }}</strong>\n                    \t</div>\n                    </th>\n                    <th valign="middle" align="center">\n                    \t<div class="padding-left-10">\n                    \t\t<strong>{{ \'referralStatus.label.lifetime\' | translate }}</strong>\n                    \t</div>\n                    </th>\n                </tr>\n            </thead>\n\t\t\t<tbody>\n\t\t\t\t<tr>\n\t\t\t\t\t<td valign="middle" align="center"><strong>{{ \'referralStatus.label.started\' | translate }}</strong></td>\n\t\t\t\t\t<td valign="middle" align="center">{{ $ctrl.status.yearlyStartedReferrals }}</td>\n\t\t\t\t\t<td valign="middle" align="center">{{ $ctrl.status.startedReferrals }}</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td valign="middle" align="center"><strong>{{ \'referralStatus.label.opened\' | translate }}</strong></td>\n\t\t\t\t\t<td valign="middle" align="center">{{ $ctrl.status.yearlyOpenedReferredAccounts }}</td>\n\t\t\t\t\t<td valign="middle" align="center">{{ $ctrl.status.openReferredAccounts }}</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td valign="middle" align="center"><strong>{{ \'referralStatus.label.paid\' | translate }}</strong></td>\n\t\t\t\t\t<td valign="middle" align="center">{{ $ctrl.status.paidReferrals }}</td>\n\t\t\t\t\t<td valign="middle" align="center">{{ $ctrl.status.yearlyPaidReferrals }}</td>\n\t\t\t\t</tr>\n\t\t\t</tbody>\n\t\t</table>\n        <br>\n        <p class="text-muted" translate="referAfriend.moreInfo" translate-values="{ linkStart : \'<a href=&quot;https://www.interactivebrokers.com/lib/cstools/faq/#/content/121296038?articleId=32663939&quot; target=&quot;_blank&quot;>\', linkEnd: \'</a>\', tcLinkStart : \'<a href=&quot;https://ndcdyn.interactivebrokers.com/aces/Agreement/AgreementVersion/4051&quot; target=&quot;_blank&quot;>\'}"></p>\n\t</div>\n\t\n\t<any ng-if="$ctrl.rejectedReferralRewardStatuses.length>0">\n\t\t<br>\n\t\t<div class="alert alert-info">\n\t\t\t\t<p>One or more referred accounts do not meet Bonus Payout criteria</p>\n\t\t</div>\n\t\t<div class="table-responsive">\n\t\t\t<table width="100%" cellpadding="0" cellspacing="0" border="0" class="table table-bordered">\n\t\t\t\t<thead>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th align="left" valign="middle">Number of Referrals</th>\n\t\t\t\t\t\t<th align="left" valign="middle">Rejection Reason</th>\n\t\t\t\t\t</tr>\n\t\t\t\t</thead>\n\t\t\t\t<tbody>\n\t\t\t\t\t<tr ng-repeat="status in $ctrl.rejectedReferralRewardStatuses">\n\t\t\t\t\t\t<td align="left" valign="middle">{{status.count}}</td>\n\t\t\t\t\t\t<td align="left" valign="middle">{{status.rejectionReason}}</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t\t</div>\n\t</any>\n\t<div class="alert alert-danger" ng-if="!$ctrl.status">\n\t\t<p>{{\'internal.error.request_process\' | translate}}</p>\n\t</div>\t\n</div>'},function(e,t,n){e.exports=function(e){n(1908)(e)}},function(e,t){e.exports=function(e){function t(t,n,a,r,i,o,s,l){var c=this;c.$onInit=function(){o.hideHelp(),c.contentHost=r,c.showMatrix=!1,o.setOnPageLoad(function(){s.fetch(e.AM_SERVER_PATH+"/FriendReferral/Dashboard").then(function(e){c.commissions=e.data.commissions,c.accepted=e.data.accepted,c.referrerCode=e.data.referrerCode,c.referralLink="https://ibkr.com/referral/"+c.referrerCode,c.showMatrix=0!==c.commissions.amount&&"UNKNOWN"!==c.commissions.currencyType,c.agreement=e.data.agreement,angular.isUndefined(c.referrerCode)||null===c.referrerCode||0===c.referrerCode.length||"ibkr"===c.referrerCode?c.state="ERROR":c.state="SUCCESS"}).catch(angular.noop).finally(function(){o.setIsPageLoading(!1)})}),c.sendEmail=function(){var e=n.instant("referral.email.subject.BROKERAGE"),t=n.instant("referral.email.body.BROKERAGE",{lineBreak:"%0D%0A",referralLink:c.referralLink});a.open("mailto:?subject="+e+"&body="+t,"_self")},$("#copy").tooltip("disable"),c.copyLink=function(){if(l.copyText(c.referralLink)){var e=0;!function n(){e<1e3?($("#copy").tooltip("enable"),$("#copy").tooltip("show"),e+=1e3,t(n,1e3)):($("#copy").tooltip("hide"),$("#copy").tooltip("disable"))}()}}}}e.controller("FriendReferralCtrl",t),t.$inject=["$timeout","$translate","$window","CONTENT_HOST","AgreementService","PageService","ResourceService","ClipboardService"]}},function(e,t,n){e.exports=function(e){n(1910)(e),n(1917)(e),n(1922)(e),n(1924)(e)}},function(e,t,n){e.exports=function(e){n(1911)(e),n(1913)(e),n(1915)(e)}},function(e,t,n){e.exports=function(e){e.component("pendingMasterActionStep",{template:n(1912),controller:["$translate","DynamicSequenceService","NavigationService",function(e,t,n){var a=this;a.$onInit=function(){a.getPendingText=function(){return e.instant("whiteGlove.general.pendingRequest",{lineBreak:"<br>"})},t.configureButtons({continueBtn:{btnText:e.instant("word.cancelRequest"),onClick:t.stepForward},extraButtons:[{alignment:"left",btnText:e.instant("word.back"),onClick:n.navigateToPrevBreadcrumb}]})}}]})}},function(e,t){e.exports='<div page-structure>\n    <large-warning>\n        <h3 ng-bind-html="$ctrl.getPendingText() | renderHTML" class="text-center text-dark"></h3>\n    </large-warning>\n</div>'},function(e,t,n){e.exports=function(e){e.component("clientRequestReviewStep",{template:n(1914),controller:"GenericReviewStepController"})}},function(e,t){e.exports='<div page-structure>\n    <h4>{{\'clientRequestReview.header\' | translate}}</h4>\n    <p translate="{{ (\'clientRequestReview.info\') }}" translate-values="{masterAccountTitle: $ctrl.getSequenceData().masterAccountTitle, strongStart: \'<strong>\', strongEnd: \'</strong>\'}"></p>\n    <br />\n\t<any ng-repeat="request in $ctrl.getSequenceData().requests">\n\t\t<div ng-switch on="request.type">\n\t\t\t<div ng-switch-when="ADDINDIV_CHG|INDIVINFO_CHG|DELENTITY_CHG" ng-switch-when-separator="|">\n\t\t\t\t<h6 class="subtitle">{{ \'retailRequestType.\' + request.type | translate }}</h6>\n        \t\t<entity-account-association-review entity="request.entity"></entity-account-association-review>\n        \t\t<entity-review entity="request.entity"></entity-review>    \n\t\t\t</div>\n\t\t\t<div ng-switch-when="ORGINFO_CHG|TRUSTINFO_CHG" ng-switch-when-separator="|">\n\t\t\t\t<h6 class="subtitle">{{ \'retailRequestType.\' + request.type | translate }}</h6>\n        \t\t<entity-review entity="request.entity"></entity-review>    \n\t\t\t</div>\n\t\t\t<div ng-switch-when="FININFO_CHG" >\n\t\t\t\t<h6 class="subtitle">{{ \'retailRequestType.\' + request.type | translate }}</h6>\n    \t\t\t<financial-info-review financial-info="request.financialInfo"></financial-info-review>\n\t\t\t</div>\n\t\t\t<div ng-switch-when="COMPINFO_CHG" >\n\t\t\t\t<h6 class="subtitle">{{ \'retailRequestType.\' + request.type | translate }}</h6>\n    \t\t\t<review-regulatory-info questions="request.regulatoryInfo.questions" category="request.regulatoryInfo.category"></review-regulatory-info>\n    \t\t\t<any ng-repeat="orgInfoChgRequest in $ctrl.getSequenceData().requests | filter: {type: \'ORGINFO_CHG\'}">\n    \t\t\t\t<review-regulatory-info ng-if="orgInfoChgRequest.regulatoryInfo" questions="orgInfoChgRequest.regulatoryInfo.questions" category="orgInfoChgRequest.regulatoryInfo.category"></review-regulatory-info>\n    \t\t\t</any>\n\t\t\t</div>\n\t\t\t<div ng-switch-when=DEBIT_CARD_NEW >\n\t\t\t\t<h6 class="subtitle">{{ \'retailRequestType.\' + request.type | translate }}</h6>\n    \t\t\t<p translate="{{ (\'debitCard.clientRequestReview\') }}"> </p>\n\t\t\t</div>\n\t\t</div>\n\t</any>\n\t\x3c!-- Handle a standalone phone number change (without info change) --\x3e\n\t<any ng-if="$ctrl.getSequenceData().requests.length === 1 && $ctrl.getSequenceData().requests[0].type===\'PHONE_NUMBER_CHG\'">\n\t\t<h6 class="subtitle">{{ \'retailRequestType.\' + $ctrl.getSequenceData().requests[0].type | translate }}</h6>\n    \t\x3c!-- Phone Numbers --\x3e\n    \t<am-form-label data-private ng-repeat="phoneNumber in $ctrl.getSequenceData().requests[0].phoneNumbers" label-text="{{\'entity.label.phoneNumber\' | translate:{ phoneType: (\'phoneNumber.type.\' + phoneNumber.type | translate)} }}" value-text="{{phoneNumber.phoneNumber}}" value-class="direction-ltr"></am-form-label>\n\t</any>\n</div>'},function(e,t,n){e.exports=function(e){e.component("clientRequestConfirmCompletionStep",{template:n(1916),controller:"GenericCompletionStepController"})}},function(e,t){e.exports='<div page-structure>\n\t<div align="center">\n        <i class="fa fa-4x fa-check-circle text-success"></i>\n    </div>\n    <h1 class="text-center text-success">{{\'word.success\' | translate}}</h1>\n    <h3 class="text-center text-dark">{{\'clientRequestConfirm.completion\' | translate}}</h3>    <br>\n</div>'},function(e,t,n){e.exports=function(e){n(1918)(e),n(1920)(e)}},function(e,t,n){e.exports=function(e){e.component("policyHolderCreateStep",{template:n(1919),controller:["$translate","PageService","ModalService","DynamicSequenceService","AccountAdminBeanService",function(e,t,n,a,r){var i=this,o=function(){i.justUploaded=!1,i.policyHolderNumber&&(i.policyHolderNumbers=[],i.policyHolderNumbers.push(i.policyHolderNumber)),a.stepForward({policyHolderNumbers:i.policyHolderNumbers,advisorAccountId:i.advisorAccountId}).catch(function(e){i.errors=e.data.errors||{},i.customErrors=e.data.customErrors||[]})};i.showPolicyNumbers=function(){return angular.isDefined(i.policyHolderNumbers)&&i.policyHolderNumbers.length>0?i.policyHolderNumbers.join(", "):" "},i.isDisabled=function(){return!i.certConfirmation},i.configButtons=function(){var e={canGoBack:!0,continueBtn:{onClick:o,isDisabled:i.isDisabled}};a.configureButtons(e)},i.disablePolicyNumberText=function(){return i.bulkUpload},i.onToggle=function(){i.bulkUpload&&(i.policyHolderNumber=""),i.errors={},i.customErrors=[],i.justUploaded=!1,i.bulkUpload||(i.policyHolderNumbers=[])};i.$onInit=function(){i.policyHolderNumbers=[],i.configButtons(),i.bulkUpload=!1,i.justUploaded=!1,i.advisors=a.getSequenceData().mastersConfiguredForFsAdmin||[],t.setOnPageLoad(function(){r.onReady().finally(function(){t.setIsPageLoading(!1),i.isFullServiceAdmin=r.getCurrentAccountAdminBean().isFullServiceAdmin,i.accountAdminAccountId=r.getCurrentAccountAdminBean().accountAdminAccountId})}),i.openCsvUploadModal=function(){var t={title:e.instant("partial.upload.title"),templateUrl:"policy-holder-account-upload-modal.component",modalData:{advisorAccountId:i.advisorAccountId,adminAccountId:i.accountAdminAccountId}};i.errors={},i.customErrors=[],n.openModal(t).then(function(e){angular.isDefined(e)&&function(e){i.policyHolderNumbers=[];for(var t=0;t<e.length;t++)i.policyHolderNumbers.push(e[t]);i.justUploaded=!0}(e)})}}}]})}},function(e,t){e.exports='<div page-structure ng-form="$ctrl.policyHolderCreateForm">\n    <div>\n        <h4>{{\'page.title.policyHolderCreate\' | translate}}</h4>\n\n        <div ng-if="$ctrl.isFullServiceAdmin && $ctrl.advisors.length > 0" class="form-group">\n            <div class="row">\n               <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n                  <am-form-select ng-model="$ctrl.advisorAccountId" label-text="{{\'accountadmin.advisor.account\' | translate}}" options="$ctrl.advisors" no-translate="true" empty-option-text="{{\'word.none\' | translate}}" enable-single-option="true"></am-form-select>\n               </div>\n            </div>\n        </div>\n\n        <div class="row">\n           <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n               \x3c!-- Policy Holder Number --\x3e \n               <am-form-input is-disabled="$ctrl.disablePolicyNumberText()" name="policyHolderNumber" ng-model="$ctrl.policyHolderNumber" label-text="{{\'fullserviceadmin.policyHolderNumber\' | translate}}" ph-text="{{\' \'}}" server-errors="$ctrl.errors"></am-form-input>\n           </div>\n       </div>\n\n       <div class="row">\n           <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n               <am-form-switch name="bulkPolicyHolderAcctConfirmation" ng-model="$ctrl.bulkUpload" label-text="{{\'accountadmin.fullservice.policyholder.choice\' | translate}}" model-listener="$ctrl.onToggle()"></am-form-switch>\n           </div>\n       </div>\n\n       <div class="row" ng-show="$ctrl.bulkUpload">\n           <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n              <div class="btn-group-left">\n                  <am-button name="bulkUploadButton" ng-if="$ctrl.isFullServiceAdmin" btn-text="{{\'partial.upload.csvButton\' | translate}}" on-click="$ctrl.openCsvUploadModal()" btn-type="primary"></am-button>\n              </div>\n           </div>\n       </div>\n       <br/>\n       <div class="row" ng-show="$ctrl.justUploaded && $ctrl.policyHolderNumbers.length > 0">\n           <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n              <p class="text-left">{{\'policyHolder.numbers.label\' | translate}} {{ $ctrl.showPolicyNumbers() }}</p>\n           </div>\n       </div>\n       <br>\n       <div class="row">\n           <div class="col-12 col-lg-8 col-left">\n             <div class="alert alert-warning" ng-if="$ctrl.customErrors.length > 0">\n                <ul>\n                    <li ng-repeat="error in $ctrl.customErrors track by $index">{{ error }}</li>\n                </ul>\n             </div>\n          </div>\n       </div>\n\n        <br/>\n        <div class="row">\n            <div class="col-xs-2 col-sm-1 col-md-1 col-lg-1">\n                <p class="text-center">\n                    <input name="certConfirmation" type="checkbox" i-check ng-model="$ctrl.certConfirmation" />\n                </p>\n            </div>\n            <div class="col-xs-10 col-sm-11 col-md-11 col-lg-11">\n                <p>{{\'fullserviceadmin.certConfirmation\' | translate}}</p>\n            </div>\n        </div>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){e.component("policyHolderCompletionStep",{template:n(1921),controller:["$translate","DynamicSequenceService","NavigationService",function(e,t,n){var a=this;a.$onInit=function(){a.policyHoldersList=t.getSequenceData().policyHoldersList||[],t.configureButtons({canGoBack:!1,continueBtn:{onClick:n.navigateToPrevBreadcrumb,btnText:e.instant("word.ok")}})}}]})}},function(e,t){e.exports='<div page-structure>\n    <div align="center">\n        <i class="fa fa-4x fa-check-circle text-success"></i>\n        <h3 class="text-center text-success">{{\'word.thankYou\' | translate}}</h3>\n        <h6 class="text-center">{{\'policyHolder.completion.success.message\' | translate}}</h6>\n    </div>\n    <div class="table-responsive">\n        <table class="table" id="table-all" width="100%" cellspacing="0" cellpadding="0" border="0">\n            <thead>\n                <tr>\n                    <th class="sorter-false" width="50%" valign="middle" align="center">{{\'policyholder.policyNumber\' | translate}}</th>\n                    <th class="sorter-false" width="50%" valign="middle" align="center">{{\'policyholder.accountNumber\' | translate}}</th>\n                </tr>\n            </thead>\n            <tr ng-repeat="policyHolder in $ctrl.policyHoldersList">\n                <td valign="middle" align="center">{{policyHolder.policyNumber}}</td>\n                <td valign="middle" align="center">{{policyHolder.policyHolderAccountId}}</td>\n            </tr>\n        </table>\n    </div>\n</div>'},function(e,t,n){e.exports=function(e){n(1923)(e)}},function(e,t){e.exports=function(e){e.component("amLoginTaskSummaryPageRedirectStep",{template:'<div class="container"></div>',controller:["NavigationService","DynamicSequenceService","BreadcrumbAction",function(e,t,n){this.$onInit=function(){var a=t.getSequenceData().serverParams,r={id:"AM_LOGIN_TASK_SUMMARY_PAGE",path:"am-login-task-summary-page.component",pageData:t.getSequenceData().pageData,serverParams:a,breadcrumb:n.CLEAR,skipFetch:!0};return e.navigate(r)}}]})}},function(e,t,n){e.exports=function(e){n(1925)(e),n(1927)(e)}},function(e,t,n){e.exports=function(e){e.component("zionsSweepConfigurationDetailsStep",{template:n(1926),controller:["DynamicSequenceService",function(e){var t=this;t.$onInit=function(){t.isOptedIn=e.getSequenceData().isOptedIn,t.previousOptInStatus=t.isOptedIn,e.configureButtons({canGoBack:e.getSequenceData().stepIndex>0,continueBtn:{isDisabled:function(){return t.previousOptInStatus==t.isOptedIn},onClick:function(){e.stepForward(t.isOptedIn)}}})}}]})}},function(e,t){e.exports="<div page-structure>\n    <h4>{{'page.title.ZIONS_SWEEP_ID' | translate }}</h4>\n          <p>{{'zionssweep.election.heading1' | translate }}</p>\n          <p>{{'zionssweep.election.heading2' | translate }}</p>\n          <p>{{'zionssweep.election.heading3' | translate }}</p>\n          <br>\n     <div class=\"rows-dashed\">\n          <am-form-switch ng-model=\"$ctrl.isOptedIn\" label-text=\"{{'zionssweep.election.heading4' | translate }}\"></am-form-switch>\n     </div>\n</div>"},function(e,t,n){e.exports=function(e){e.component("zionsSweepConfigurationCompletionStep",{template:n(1928),controller:"GenericCompletionStepController"})}},function(e,t){e.exports='<div ng-controller="GenericCompletionStepController as $ctrl" page-structure>\r\n\t<div align="center">\r\n\t\t<i class="fa fa-4x fa-check-circle text-success"></i>\r\n\t</div>\r\n\t<h1 class="text-center text-success">{{\'word.thankYou\' | translate}}</h1>\r\n\t<h3 class="text-center">{{\'zionssweep.election.confirmation.text\' | translate }}</h3>\r\n</div>'}]);